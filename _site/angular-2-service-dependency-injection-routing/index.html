<!DOCTYPE html><html domain=".com" lang="en"><head><meta charset="utf-8"><meta content="width=device-width,initial-scale=1" name="viewport"><meta content="default-src 'self';object-src 'none';script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com/ https://gist.github.com/ https://www.googletagmanager.com/ https://www.google-analytics.com;connect-src 'self' https://www.google-analytics.com https://api.github.com;style-src 'self' https://fonts.googleapis.com/ https://use.fontawesome.com/ 'unsafe-inline' https://github.githubassets.com/ https://cdn.jsdelivr.net;img-src 'self' data:;font-src 'self' https://fonts.gstatic.com/ https://use.fontawesome.com/ https://cdn.jsdelivr.net" http-equiv="Content-Security-Policy"><link href="/favicon.svg" rel="icon" type="image/svg+xml"><meta content="#f9c412" name="theme-color"><meta content="max-snippet:-1, max-image-preview: large, max-video-preview: -1" name="robots"><title>Angular 2 - Services &amp; DI &amp; Routing</title><meta content="Angular 2 - Services &amp; DI &amp; Routing" prefix="og: http://ogp.me/ns#" property="og:title"><meta content="This is my note for the course &amp;quot;Angular - The Complete Guide (2021 Edition)&amp;quot; which is taught by Maximilian Schwarzmüller on Udemy...." name="description"><meta content="This is my note for the course &amp;quot;Angular - The Complete Guide (2021 Edition)&amp;quot; which is taught by Maximilian Schwarzmüller on Udemy...." prefix="og: http://ogp.me/ns#" property="og:description"><meta content="summary_large_image" name="twitter:card"><meta content="@dinhanhthi" name="twitter:site"><meta content="@dinhanhthi" name="twitter:creator"><meta content="https://dinhanhthi.com/img/remote/2hC4A2.png" prefix="og: http://ogp.me/ns#" property="og:image"><meta content="article" prefix="og: http://ogp.me/ns#" property="og:type"><link href="https://dinhanhthi.com/angular-2-service-dependency-injection-routing/" rel="canonical"><meta content="https://dinhanhthi.com/angular-2-service-dependency-injection-routing/" prefix="og: http://ogp.me/ns#" property="og:url"><meta content="no-referrer-when-downgrade" name="referrer"><link href="/feed/feed.xml" rel="alternate" type="application/atom+xml" title="🔥 Anh-Thi DINH"><link href="/" rel="preconnect" crossorigin=""><link href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css" rel="stylesheet"><script csp-hash="sha256-1krv3Gb414NWjc9OVes7p1DsVGXMgyXL7klj8V8OQJE=">if (/Mac OS X/.test(navigator.userAgent))
			document
				.documentElement
				.classList
				.add('apple')</script><style>@charset "UTF-8";@font-face{font-display:swap;font-family:"Poppins";font-style:normal;font-weight:400;src:url(/fonts/poppins/poppins-v15-latin-regular.eot);src:local("Poppins Regular"),local("Poppins-Regular"),url(/fonts/poppins/poppins-v15-latin-regular.eot?#iefix) format("embedded-opentype"),url(/fonts/poppins/poppins-v15-latin-regular.woff2) format("woff2"),url(/fonts/poppins/poppins-v15-latin-regular.woff) format("woff"),url(/fonts/poppins/poppins-v15-latin-regular.ttf) format("truetype"),url(/fonts/poppins/poppins-v15-latin-regular.svg#Poppins) format("svg")}@font-face{font-display:swap;font-family:"Poppins";font-style:italic;font-weight:400;src:url(/fonts/poppins/poppins-v15-latin-italic.eot);src:local("Poppins Italic"),local("Poppins-Italic"),url(/fonts/poppins/poppins-v15-latin-italic.eot?#iefix) format("embedded-opentype"),url(/fonts/poppins/poppins-v15-latin-italic.woff2) format("woff2"),url(/fonts/poppins/poppins-v15-latin-italic.woff) format("woff"),url(/fonts/poppins/poppins-v15-latin-italic.ttf) format("truetype"),url(/fonts/poppins/poppins-v15-latin-italic.svg#Poppins) format("svg")}@font-face{font-display:swap;font-family:'Poppins';font-style:normal;font-weight:600;src:url(/fonts/poppins/poppins-v15-latin-600.eot);src:local("Poppins SemiBold"),local("Poppins-SemiBold"),url(/fonts/poppins/poppins-v15-latin-600.eot?#iefix) format("embedded-opentype"),url(/fonts/poppins/poppins-v15-latin-600.woff2) format("woff2"),url(/fonts/poppins/poppins-v15-latin-600.woff) format("woff"),url(/fonts/poppins/poppins-v15-latin-600.ttf) format("truetype"),url(/fonts/poppins/poppins-v15-latin-600.svg#Poppins) format("svg")}@font-face{font-display:swap;font-family:'Poppins';font-style:italic;font-weight:600;src:url(/fonts/poppins/poppins-v15-latin-600italic.eot);src:local("Poppins SemiBold Italic"),local("Poppins-SemiBoldItalic"),url(/fonts/poppins/poppins-v15-latin-600italic.eot?#iefix) format("embedded-opentype"),url(/fonts/poppins/poppins-v15-latin-600italic.woff2) format("woff2"),url(/fonts/poppins/poppins-v15-latin-600italic.woff) format("woff"),url(/fonts/poppins/poppins-v15-latin-600italic.ttf) format("truetype"),url(/fonts/poppins/poppins-v15-latin-600italic.svg#Poppins) format("svg")}@font-face{font-display:swap;font-family:'Recoleta';src:url(/fonts/recoleta/Recoleta-Bold.woff2) format("woff2"),url(/fonts/recoleta/Recoleta-Bold.woff) format("woff"),url(/fonts/poppins/Recoleta-Bold.ttf) format("truetype");font-weight:700;font-style:bold}*{border:0;box-sizing:border-box}:root{font-size:16.5px}main img{content-visibility:auto}::-webkit-scrollbar{height:10px;width:10px}::-webkit-scrollbar-thumb{background:#3e466b;border-radius:6px}::-webkit-scrollbar-thumb:hover{background:#aaa;cursor:pointer}::-webkit-scrollbar-track{background:#363948}::-webkit-scrollbar-corner{background:#282a36}body,html{font-family:"Poppins",Arial,Helvetica,sans-serif;font-size:16.5px}html{-webkit-text-size-adjust:100%}@supports (font-variation-settings:normal){html{font-family:"Poppins" var alt,Arial,Helvetica,sans-serif}}body{background:#282a36;color:#eee;margin:0;counter-reset:h2counter}b,strong{font-weight:600;color:#8cc8ff}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}mark{color:inherit;padding:0;background-color:transparent;box-shadow:inset 0 -4px 0 0 #ffd479}a,a:hover{text-decoration:none}a:hover{border-bottom:2px solid #ffd479}a.no-effect:hover{border-bottom:none}.page-note h3:hover a:hover,.page-note h4:hover a:hover,.page-note>h2:hover a:hover,a,a b,a strong{color:#ffd479}.intro a,.page-note>.h2-wrapper>h2,.page-note>.h2-wrapper>h3,a b:hover,a strong:hover,a:hover{color:#fff}img{max-width:100%}main{margin:0 auto}.page-note h3,.page-note h4,.page-note>h2,h1,h2,h3,h4{font-family:"Recoleta",Arial,Helvetica,sans-serif}h1{font-size:29.7px}h2{font-size:24.75px}h3{font-size:21.5325px}h4{font-size:19.37925px}.page-note h3,.page-note h4,.page-note>h2{color:#eee}.page-note h3:hover .direct-link,.page-note h4:hover .direct-link,.page-note>h2:hover .direct-link{display:inline-block}.page-note>.h2-wrapper{border-radius:7px;height:fit-content;background-image:linear-gradient(to left top,#383c4e,#343748,#303342,#2c2e3c,#282a36);padding:.1rem 1.5rem .5rem;margin-bottom:37.125px;position:relative}.page-note>.h2-wrapper::before{display:block;content:"";background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pjxzdmcgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIHZpZXdCb3g9IjAgMCA1MDAgNTAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMwMCwzMDApIj48cGF0aCBkPSJNODEuNSwtMTM0LjFDOTcuNywtMTE2LjMsOTcuNSwtODAuNCw4OS42LC01My44QzgxLjcsLTI3LjIsNjYuMSwtMTAsODAuNywyNC4yQzk1LjQsNTguMywxNDAuMywxMDkuNCwxMzYuOSwxMjUuNEMxMzMuNiwxNDEuNSw4MiwxMjIuNiw0My41LDEyMS45QzUsMTIxLjIsLTIwLjUsMTM4LjgsLTM5LjQsMTMzLjVDLTU4LjMsMTI4LjMsLTcwLjcsMTAwLjIsLTg3LDc3LjVDLTEwMy4zLDU0LjksLTEyMy40LDM3LjgsLTE0Mi4xLDEwLjlDLTE2MC45LC0xNiwtMTc4LjIsLTUyLjcsLTE3OC4yLC05My4zQy0xNzguMSwtMTMzLjksLTE2MC43LC0xNzguNCwtMTI4LjEsLTE4OC43Qy05NS41LC0xOTksLTQ3LjgsLTE3NSwtNy42LC0xNjMuMkMzMi42LC0xNTEuNCw2NS4yLC0xNTEuOCw4MS41LC0xMzQuMVoiIGZpbGw9IiNGMEREM0UiLz48L2c+PC9zdmc+);background-repeat:no-repeat;height:100px;width:100px;opacity:.25;position:absolute;top:-15px;left:-20px;filter:hue-rotate(130deg)}.page-note>.h2-wrapper>h3,.page-note>h2{border-bottom:1px solid #4d526b;padding-bottom:5px}.page-note>h2{font-size:24.75px;margin:37.125px 0 19.8px;border-bottom:1px solid #444}.page-note p+ol,.page-note p+ul,.page-note>h2+h3,.page-note>h3+h4{margin-top:-.5rem}.page-note>h3,.page-note>h4{font-size:21.5325px;margin-bottom:19.8px}.page-note>h4{font-size:19.37925px}.page-note .direct-link{display:none;color:#777;border-bottom:none;margin-left:3px}.page-note pre+h2,.page-note pre+h3,.page-note pre+h4,.page-note>h3,.page-note>h4{margin-top:37.125px}.page-note h1{counter-reset:h2counter}.page-note h2{counter-reset:h3counter}.page-note h3{counter-reset:h4counter}.page-note h3:before,.page-note h4:before{opacity:.5}.page-note h2:before{content:counter(h2counter) ".  ";counter-increment:h2counter;color:#8cc8ff}.page-note h3:before{content:counter(h2counter) "." counter(h3counter) ".  ";counter-increment:h3counter}.page-note h4:before{content:counter(h2counter) "." counter(h3counter) "." counter(h4counter) ".  ";counter-increment:h4counter}.container,header{width:100%;margin:0 auto}.normal{padding:0 16.5px;width:100%}@media (min-width:916.5px){.normal{width:900px}}.mt-2{margin-top:2rem}.page-index .container{padding:2rem 1rem 0}.page-index .main-cats{flex:0 1 calc(100% - 280px);padding-right:1rem}.page-index .main-cats>.category-wrapper{padding-bottom:1.5rem}.page-index .main-cats>.category-wrapper>.category{border:1px solid #3b3e54;border-radius:7px;height:fit-content;background:#2f3240;padding:2rem 1.5rem 1.5rem}.page-index .toc-index-container{flex:0 1 280px;position:sticky;top:60px;height:fit-content}.page-index .toc-index{border:1px solid #404040;border-radius:7px;height:fit-content;background:#35373c;padding:1rem 1.1rem}.page-index .toc-index h3{padding-bottom:5px;border-bottom:1px solid #555;margin:0 0 10px;font-size:1.3rem}.page-index .toc-index ul{padding-left:20px;margin:0}.page-index .toc-index p{font-style:italic;color:#999;padding-top:0;margin-bottom:0;font-size:.95rem;margin-top:10px}.page-index .toc-index p a{color:#999;border-bottom:2px solid #999}.page-index .toc-index p a:hover{border-bottom:2px solid #ffd479}.page-index .appendix{font-style:italic;opacity:.6}.page-index .appendix-bottom{display:none;font-size:.95rem}.page-index .appendix-toc{padding:0 5px;font-size:.9rem}@media (max-width:991px){.page-index .main-cats{flex:1 1 100%;order:2;padding-right:0}.page-index .toc-index-container{flex:1 1 100%;order:1;position:inherit;margin-bottom:1.5rem}.page-index .toc-index-container ul{column-count:3;-webkit-column-count:3;-moz-column-count:3}.page-index .appendix-toc{display:none}.page-index .appendix-bottom{display:block}}@media (max-width:767px){.page-index .toc-index ul{column-count:2;-webkit-column-count:2;-moz-column-count:2}}@media (max-width:575px){.page-index .toc-index ul{column-count:1;-webkit-column-count:1;-moz-column-count:1}}.category{width:100%}.category h2,header h1{font-size:1.55rem;margin-top:0}.category h2 img{float:left;margin-right:7px}.category .list-homepage{list-style:none;padding-left:0;margin-bottom:0;column-count:1;-webkit-column-count:1;-moz-column-count:1}@media (min-width:768px){.category .list-homepage{column-count:2;-webkit-column-count:2;-moz-column-count:2}}@media (min-width:992px){.category .list-homepage{column-count:3;-webkit-column-count:3;-moz-column-count:3}}.category .list-homepage li{padding-left:25px;margin-bottom:10px;width:100%}.category .list-homepage li a{color:#ddd;border-bottom:2px solid rgba(255,255,255,.14);border-style:dotted}.category .list-homepage li img{margin-bottom:-5px;margin-left:-25px}.category .list-homepage li:hover{cursor:pointer}.category .list-homepage li:hover a{border-color:#ffd479;color:#fff}.category .list-homepage li:hover::before{opacity:1}.page-index header{padding-top:5em;padding-bottom:0}.page-index header .header-logo{height:80px;width:auto}header nav{z-index:10}#nav{z-index:2;position:relative}header{padding:5.5rem 1rem 1rem;width:900px;text-align:center;max-width:100%;display:flex;align-items:center;flex-direction:column}header h1{font-size:2.2rem;margin-bottom:0}header p{margin-top:1rem}header .header-logo{width:55px;height:55px;margin-bottom:1rem}header .header-logo img{width:100%;height:100%}header .social{margin-top:.5rem;margin-bottom:1.5rem}header #more-info #note-tag>a,header .social a{margin-right:10px}header .social a:last-child,p.contact a:last-child{margin-right:0}@media (min-width:992px){header .social a{margin-right:20px}}header .social a img{border-radius:50%}header #more-info{padding:1rem}header #more-info #note-tag{padding-bottom:10px;border-bottom:1px solid #444}header #more-info #note-tag>a::before{content:"#"}header #more-info #last-modified{padding-top:10px;font-style:italic}#reading-progress,nav{top:0;left:0;width:100vw}#reading-progress{z-index:3;border-bottom:1px solid #ffd479;position:absolute;bottom:0;transform:translate(-100vw,0);will-change:transform;pointer-events:none}.intro,.job span{font-size:1.02rem}.intro b,.intro strong{color:#ffd479;font-weight:400}.job span{background:#ffd479;color:#000;padding:3px 20px;border-radius:15px}p.contact{width:100%;text-align:center;margin-bottom:4rem}p.contact a{margin-right:10px;margin-bottom:10px}nav{position:fixed;padding:0 1.5rem;background:#35373c}nav nav #nav .nav-search .nav-search__input{padding-right:1.5rem}@media (max-width:992px){nav{padding:0 1rem}nav nav #nav .nav-search .nav-search__input{padding-right:1rem}}@media (max-width:576px){nav{padding:0 .5em}nav nav #nav .nav-search .nav-search__input{padding-right:.5rem}}nav #nav{display:-ms-flexbox;-ms-flex-align:center;align-items:center}nav #nav a{color:#ccc;margin-right:15px;align-items:center;padding:0 .5rem;font-size:1.1rem;white-space:nowrap}nav #nav a img{margin-right:5px}nav #nav a:hover{color:#fff;cursor:pointer;text-decoration:none}nav #nav .nav-item{text-align:left;margin-right:5px}@media (min-width:421px){nav #nav .nav-item{padding-left:0!important}}@media (max-width:575px){nav #nav .nav-item{width:unset!important}nav #nav .nav-item span{display:none}}@media (min-width:576px){nav #nav .nav-item{margin-right:15px}}nav #nav .nav-github{text-align:right;padding-right:0!important;margin-right:0!important}nav #nav .nav-github:hover img{filter:invert(.4)}nav #nav .nav-search{display:block;background-image:linear-gradient(to right,#3d4251,#3b3f4c,#393d46,#373a41,#35373c);width:100%;position:relative}nav #nav,nav #nav .nav-search form,nav #nav a{display:flex}nav #nav .nav-search .nav-search__input{border:0;background:0 0;color:#ddd;font-size:1.05rem;padding:.65rem .5rem;width:100%}nav #nav .nav-search .nav-search__input:focus{outline:0;border:0}nav #nav .nav-search #nav-search__result-container{position:absolute;max-height:80vh;overflow:auto;width:100%;background:#35373c;border-bottom-right-radius:5px;border-bottom-left-radius:5px;padding:0;filter:drop-shadow(2px 4px 6px #000)}@media (max-width:767px){nav #nav .nav-search #nav-search__result-container{position:fixed;left:0;right:0;border-radius:0}}nav #nav .nav-search #nav-search__result-container ul#nav-search__ul{padding:0;margin:0;list-style:none}nav #nav .nav-search #nav-search__result-container ul#nav-search__ul li{display:flex;padding:10px;align-items:center;justify-content:space-between;overflow:hidden}nav #nav .nav-search #nav-search__result-container ul#nav-search__ul li .item__icon{width:20px}nav #nav .nav-search #nav-search__result-container ul#nav-search__ul li .item__content{padding:0 10px;width:100%;overflow:hidden;text-overflow:ellipsis}nav #nav .nav-search #nav-search__result-container ul#nav-search__ul li .item__content h3{margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}nav #nav .nav-search #nav-search__result-container ul#nav-search__ul li .item__content h3 a{color:#efb232;padding:0;text-align:left;font-weight:400;font-size:16.5px;line-height:1.5;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}nav #nav .nav-search #nav-search__result-container ul#nav-search__ul li .item__content h3 a:hover{border-bottom:none;color:#8cc8ff}nav #nav .nav-search #nav-search__result-container ul#nav-search__ul li .item__content p{text-align:left;margin:0;line-height:1.5;font-size:.95rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}nav #nav .nav-search #nav-search__result-container ul#nav-search__ul li .enter{width:20px;display:none}nav #nav .nav-search #nav-search__result-container ul#nav-search__ul li.selected{background:#282a36}nav #nav .nav-search #nav-search__result-container ul#nav-search__ul li.selected .enter{display:block}nav #nav .nav-search #nav-search__result-container ul#nav-search__ul mark{background:0 0;color:inherit;box-shadow:inset 0 -3px 0 0 #fff}nav #nav .nav-search #nav-search__result-container #nav-search__no-result{padding:0 10px}nav #nav .nav-search #nav-search__result-container #nav-search__no-result p{text-align:left}footer{font-size:1rem;background:#35373c;padding:.75rem 1rem;text-align:center;margin-top:3rem}footer a{color:#ccc}.button,footer a:hover{color:#fff}.button{padding:12px 20px;font-size:.85rem;font-weight:500;transition:all .5s;letter-spacing:2px;box-shadow:none;outline:0!important;min-width:140px;position:relative;overflow:hidden;border-radius:40px;text-transform:uppercase;display:inline-table}.info,.warning{position:relative;padding:16.5px;margin-bottom:24.75px;border:1px solid transparent;border-radius:.25rem;color:#eee;border-left-width:15px}.info :last-child,.warning :last-child{margin-bottom:0}.info{border-color:#8cc8ff}.warning{border-color:#ffd479}.hsbox{margin-bottom:24.75px;border:1px solid #969696;padding:1rem;border-radius:3px}.hsbox .hs__title{cursor:pointer}.hsbox .hs__title::before{content:" ";display:inline-block;border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:7px solid currentColor;vertical-align:middle;margin-right:.7rem;transform:translateY(-2px);transition:transform .2s ease-out}.hsbox .hs__title.show{padding-bottom:15px;border-bottom:.5px solid #666;margin-bottom:1rem}.hsbox .hs__title.show+.hs__content{display:block;opacity:1;padding:5px 0;transition:all .25s 0s cubic-bezier(.4,0,.2,1)}.hsbox .hs__title.show::before{transform:rotate(90deg) translateX(-3px)}.hsbox .hs__content{display:none;transition:all .2s 0s ease}.hsbox .hs__content>:last-child,.page-note .list-item>:last-child{margin-bottom:0}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}.page-note .p-list>*{margin-bottom:1rem}.page-note .list-item{border:1px solid #424242;border-radius:3px;padding:1rem;margin-bottom:24.75px}.page-note .text-center{text-align:center}.page-note ol,.page-note p,.page-note ul{margin-top:0;margin-bottom:24.75px}.page-note ol li,.page-note ul li,div.toc ol li{margin-bottom:5px}.page-note ol li ol,.page-note ol li ul,.page-note ul li ol,.page-note ul li ul{margin-bottom:5px;margin-top:5px;padding-left:20px}.page-note ol li>:not(span),.page-note ul li>:not(span){margin-bottom:5px}.page-note p.noindent{display:none;padding-left:20px}.page-note p.noindent+ol,.page-note p.noindent+ul{padding-left:20px;margin-top:0}.page-note p.indent{display:none;padding-left:40px}.page-note ol.indent,.page-note p.indent+ol,.page-note p.indent+ul,.page-note ul.indent{padding-left:40px}.page-note ol.noindent,.page-note ul.noindent{padding-left:20px}.page-note hr{border-bottom:1px solid #525252;margin-bottom:24.75px;margin-right:auto;margin-left:0;width:200px}.page-note p.katex-block{overflow-x:auto;overflow-y:hidden}.page-note p.katex-block .katex-display{margin:0!important}#reading-list .item .author{font-style:italic}#reading-list .item .intro{color:#999}code[class*=language-],pre[class*=language-]{color:#eee;font-size:16px;text-shadow:none;font-family:Menlo,Monaco,Consolas,"Andale Mono","Ubuntu Mono","Courier New",monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#75a7ca}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}.token.comment{color:#6a9955}.token.punctuation{color:#eee}.token.inserted,.token.number{color:#b5cea8}.token.string{color:#ce9178}.token.attr-value .token.punctuation.attr-equals,.token.operator{color:#eee}.token.keyword{color:#90cdff}.token.keyword.module{color:#c586c0}.token.function{color:#efefac}.token.important{color:#90cdff}.token.class-name{color:#4ec9b0}.token.console,.token.parameter{color:#9cdcfe}.token.boolean{color:#90cdff}.token.property{color:#9cdcfe}.token.tag{color:#90cdff}.language-html .token.punctuation,.token.tag .token.punctuation{color:gray}.token.attr-name,code[class*=language-jsx],pre[class*=language-jsx]{color:#9cdcfe}.token.attr-value,.token.attr-value .token.punctuation{color:#ce9178}code[class*=language-html],pre[class*=language-html]{color:#eee}pre[class*=language-]>code[class*=language-]{position:relative;z-index:1}code,pre{font-family:Consolas,Menlo,Monaco,"Andale Mono WT","Andale Mono","Lucida Console","Lucida Sans Typewriter","DejaVu Sans Mono","Bitstream Vera Sans Mono","Liberation Mono","Nimbus Mono L","Courier New",Courier,monospace;line-height:1.5}h2>code{font-size:21.78px!important}h3>code{font-size:18.9486px!important}h4>code{font-size:17.05374px!important}:not(pre)>code{border:1px solid #444;background:#6b444245;padding:2px 4px;margin:0 1px;border-radius:3px;font-size:.9rem;color:#fff;word-break:break-word}h2>code,h3>code,h4>code{color:#ddd;padding-right:6px}a>code{color:#ffd479}a:hover>code{color:#ccc}pre,pre[class*=language-]{margin:0 0 27.225px;overflow:auto}pre>code,pre[class*=language-]>code{display:block;padding:14.5px 16.5px 16.5px;background:#2f3240;border:.5px solid #3b3e54;overflow:auto;border-radius:3px;max-height:450px}div.toc{margin-bottom:24.75px;border:1px solid #3b3e54;border-radius:7px;height:fit-content;background:#2f3240;padding:15px 15px 10px 0}div.toc>ol::before{content:"In this note";display:block;padding-bottom:5px;border-bottom:1px solid #555;margin:0 0 15px;font-size:1.18rem;font-family:"Recoleta",Arial,Helvetica,sans-serif}div.toc ol{padding-left:20px;font-size:14.85px;margin-bottom:0;counter-reset:item;list-style-type:none}div.toc ol>li:first-child{margin-top:0}div.toc ol li code{font-size:.85rem;background:#ececec;padding:0 4px 2px}div.toc ol li ol{padding-left:10px}div.toc ol ol{counter-reset:item;list-style-type:none}div.toc ol li::before{content:counters(item,".") ". ";counter-increment:item}div.toc>ol>li ol>li::before{opacity:.7}div.toc>ol>li::before{color:#8cc8ff}@media (min-width:1300px){div.toc{float:right;margin-right:-210px;border-left:none;width:200px;position:-webkit-sticky;position:sticky;top:60px;max-height:calc(100vh - 80px);overflow:auto}div.toc ol{margin-top:0;margin-bottom:0}}@media (min-width:1360px){div.toc{margin-right:-230px;width:220px}}@media (min-width:1373px){div.toc{margin-right:-240px;width:220px}}@media (min-width:1400){div.toc{margin-right:-250px;width:230px}}@media (min-width:1450px){div.toc{margin-right:-280px;width:250px}}@media (min-width:1550px){div.toc{margin-right:-310px;width:280px}}.toc-active>a{color:#fff!important}.toc-active::before{opacity:1!important}.page-note img{height:auto;width:100%}.page-note p>img+br,.page-note p>picture+br{display:none}.page-note p>img+br+em,.page-note p>picture+br+em{display:block;text-align:center;margin-top:10px;font-size:.9rem}</style></head><body><header><nav><div id="nav"><a href="/" class="nav-item no-effect"><img alt="home" src="/img/nav/home.svg" height="18" width="18" class="keep-original"> <span>Thi</span> </a><a href="/about/" class="nav-item no-effect"><img alt="about" src="/img/nav/about.svg" height="15" width="15" class="keep-original"> <span>About</span></a><div class="nav-search" id="nav-search"><form><input aria-label="search notes (press &quot;/&quot; to focus &amp; &quot;ESC&quot; to lose)" class="nav-search__input" id="nav-search__input" onfocusin="inFocus(this)" placeholder="search notes (press &quot;/&quot; to focus &amp; &quot;ESC&quot; to lose)" type="search"></form><div id="nav-search__result-container" style="display: none;"><ul id="nav-search__ul"></ul><div id="nav-search__no-result" style="display: none;"><p>No results found.</p></div></div></div><a href="https://github.com/dinhanhthi" class="nav-item no-effect nav-github" target="_blank"><img alt="github" src="/img/nav/github.svg" height="20" width="20" class="keep-original"></a></div><div id="reading-progress" aria-hidden="true"></div></nav><script src="/js/search.js?hash=1aae822ef9" async="" defer=""></script><div class="header-logo"><img alt="Angular 2 - Services &amp; DI &amp; Routing" src="/img/header/angular.svg" class="keep-original"></div><h1>Angular 2 - Services &amp; DI &amp; Routing</h1><div id="more-info"><div id="note-tag"><a href="/tags/mooc">MOOC</a> <a href="/tags/javascript">JavaScript</a> <a href="/tags/angular">Angular</a></div><div id="last-modified">08-03-2021 / <a href="https://github.com/dinhanhthi/dinhanhthi.com/edit/dev/./posts/angular/2021-03-04-angular-2-service-dependency-injection-routing.md">Edit on Github</a></div></div></header><main><article><div class="container mt-2 normal page-note"><div class="toc"><ol><li><a href="#tips">TIPS #</a></li><li><a href="#services-%26-dependency-injection">Services &amp; Dependency Injection #</a><ol><li><a href="#service%3F">Service? #</a></li><li><a href="#di-%26-logging-service">DI &amp; Logging service #</a></li><li><a href="#data-service">Data Service #</a></li><li><a href="#hierarchical-injector">Hierarchical injector #</a></li><li><a href="#inject-services-into-services">Inject Services into Services #</a></li><li><a href="#services-with-cross-components">Services with cross-components #</a></li><li><a href="#service---pushing-data-from-a-b">Service - pushing data from A-B #</a></li></ol></li><li><a href="#routing-%E2%86%92-change-pages">Routing → change pages #</a><ol><li><a href="#adding-routes">Adding Routes #</a></li><li><a href="#routerlink">routerLink #</a></li><li><a href="#understand-paths">Understand paths #</a></li><li><a href="#routerlinkactive">routerLinkActive #</a></li><li><a href="#navigating-programmatically">Navigating programmatically #</a></li><li><a href="#add-params-to-route">Add params to Route #</a></li><li><a href="#query-params-(%3F...)">Query params (?...) #</a></li><li><a href="#nested-%2F-child-router">Nested / Child router #</a></li><li><a href="#preserve-query-params-between-paths">Preserve query params between paths #</a></li><li><a href="#redirect-%26-wildcat-routes">Redirect &amp; wildcat routes #</a></li><li><a href="#app-routing.module.ts">app-routing.module.ts #</a></li><li><a href="#login-%26-guards-%26-authentication">Login &amp; Guards &amp; Authentication #</a></li><li><a href="#parsing-static-data-to-route">Parsing static data to route #</a></li><li><a href="#parsing-dynamic-data-(server)-to-route">Parsing dynamic data (server) to route #</a></li><li><a href="#location-strategies">Location strategies #</a></li></ol></li></ol></div><p>This is my note for the course "<a href="https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/13914134#overview">Angular - The Complete Guide (2021 Edition)</a>" which is taught by Maximilian Schwarzmüller on Udemy. This is an incredible course for you to start to learn Angular from basic. The official Angular docs is good but it's not for the beginner.</p><p>🍄 <strong>PART 1</strong> — <a href="/angular-1-basics-components-databinding-directives/">Angular 1 - Basics &amp; Components &amp; Databinding &amp; Directives</a><br>🍄 <strong>PART 2</strong> — <a href="/angular-2-service-dependency-injection-routing/">Angular 2 - Services &amp; Dependency Injection &amp; Routing</a><br>🍄 <strong>PART 3</strong> — <a href="/angular-3-observable/">Angular 3 - Observable</a><br>🍄 <strong>PART 4</strong> — <a href="/angular-4-forms/">Angular 4 - Forms</a><br>👉 <a href="https://github.com/dinhanhthi/learn-angular-complete-guide">Github repo</a><br>👉 <strong>Other note</strong> (taken before this course): <a href="https://www.notion.so/Angular-101-fcbd5683f8e941f89c709595792b62d2">Angular 101</a></p><div class="warning"><p>This note contains only the important things which can be look back later, it cannot replace either <a href="https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/13914134#overview">the course</a> nor <a href="https://angular.io/start">the official document</a>!</p></div><div class="h2-wrapper"><h2 id="tips"><strong>TIPS</strong> <a href="#tips" class="direct-link">#</a></h2><p>Get a copy, not access directly,</p><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// for example</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span> <span class="token punctuation">{</span><br>	<span class="token keyword">private</span> recipes<span class="token operator">:</span> Recipe<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>	<span class="token function">getRecipes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>		<span class="token comment">// get a copy from outside, not access the original recipes</span><br>		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>recipes<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>👉 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax">Spread operator</a>. (<code>...var</code>)</p><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// ES6's feature (spread operator): tranform "[a, b, c]" to "a, b, c"</span><br><span class="token comment">// because we cannot .push([]), but we can .push(a,b,c)</span><br><span class="token keyword">this</span><span class="token punctuation">.</span>ingredients<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>ingredients<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class="language-html"><code class="language-html"><span class="token comment">&lt;!-- if we just bind a string --&gt;</span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">abcXyz</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>abc<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">[abcXyz]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">'</span>abc<span class="token punctuation">'</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">[abcXyz]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>[<span class="token punctuation">'</span>abc<span class="token punctuation">'</span>]<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br><br><span class="token comment">&lt;!-- if we bind objects --&gt;</span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">abcXyz</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></code></pre><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// convert from string to number</span><br><span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>abc<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// just add "+" before it!</span></code></pre><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// an optional param in a method</span><br><span class="token function">abc</span><span class="token punctuation">(</span><span class="token parameter">required_1<span class="token punctuation">,</span> required_2<span class="token punctuation">,</span> optional<span class="token operator">?</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// with "?"</span><br>	<span class="token operator">...</span><br><span class="token punctuation">}</span></code></pre><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// When creating a new service (example.service.ts), you wanna add it in</span><br><span class="token comment">// app.module.ts in the section "providers"</span><br><br><span class="token comment">// You can make a shortcut right in the file example.service.ts</span><br><span class="token comment">// and no need to give it name in app.module.ts</span><br>@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>providedIn<span class="token operator">:</span> <span class="token string">'root'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></code></pre><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// inject a service in a component</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span> <span class="token punctuation">{</span><br>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> serviceName<span class="token operator">:</span> ServiceName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><br>	<span class="token comment">// then you can use it here!</span><br><span class="token punctuation">}</span></code></pre></div><div class="h2-wrapper"><h2 id="services-%26-dependency-injection">Services &amp; Dependency Injection <a href="#services-%26-dependency-injection" class="direct-link">#</a></h2><h3 id="service%3F">Service? <a href="#service%3F" class="direct-link">#</a></h3><ul><li>Don't duplicate tasks.</li><li>Access data and used in somewhere.</li><li>Just another class which help centralize your codes.</li></ul><p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/post/angular/angular-2/Untitled-1920w.webp 1920w, /img/post/angular/angular-2/Untitled-1280w.webp 1280w, /img/post/angular/angular-2/Untitled-640w.webp 640w, /img/post/angular/angular-2/Untitled-320w.webp 320w" type="image/webp"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/post/angular/angular-2/Untitled-1920w.jpg 1920w, /img/post/angular/angular-2/Untitled-1280w.jpg 1280w, /img/post/angular/angular-2/Untitled-640w.jpg 640w, /img/post/angular/angular-2/Untitled-320w.jpg 320w" type="image/jpeg"><img alt="Angular_2_-Services&amp;Dependency_Injection&amp;_Rout_fb1390f6e4ee48849ae39feb665bdf1b/Untitled.png" src="/img/post/angular/angular-2/Untitled.png" height="560" width="1075" decoding="async" loading="lazy" style="background-size:cover;contain-intrinsic-size: min(var(--main-width), 1075px) min(calc(var(--main-width) * 0.5209302325581395), 560px);background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 1075 560'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAGCAYAAAAVMmT4AAAACXBIWXMAAAsSAAALEgHS3X78AAAA8klEQVQY0z2OQUrDUABEczjXnsEbWEHpRhFcKIJKFHQlDVURBUHQpdbaNKGImjRJU4uN/ChRMFB02eTHPD8FHZjNzGMYLR7ERH5E/BTzLhLCbkjw4GNf2bi2gxgkiGFKHKVovuXgmo9YlybV6SqzUxWO1g958Z4JOiHWQY3G2hyt7RU00Rd07RDH9Gme3XJ92qB9oVZbHr37iFG/yail831noJ3rBhsz89SXtvhT2HHZqayyv6iTDAV5UZCNMzTKTNVj5RyZywnsqVt7C5vUlndJ3z7+R7RcAbIokfJHwfkkfA163Bh12scnfH2mlCqTUvIL6kDhSSYbW+UAAAAASUVORK5CYII='%3E%3C/image%3E%3C/svg%3E&quot;)"></picture></p><p>Why we need services? If we don't use, just use what we have (binding, emit,...) → more components and they need to communicate to each other → too complicated!</p><h3 id="di-%26-logging-service">DI &amp; Logging service <a href="#di-%26-logging-service" class="direct-link">#</a></h3><ul><li><a href="https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656208#questions/7884774">Course video</a>.</li><li>Naming: <code>logging.service.ts</code></li><li>There is NO DECORATOR like @Service() → just a normal typescript class!</li></ul><p>DI injects class (of a service) into our component automatically. ← we need to inform angular that we need to add this instant → add a constructor</p><p>👉 <a href="https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/09-services-final/src/app">Codes for this section</a>.</p><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// new-account.component.ts</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span> LoggingService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../logging.service'</span><span class="token punctuation">;</span><br><br>@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>	providers<span class="token operator">:</span> <span class="token punctuation">[</span>LoggingService<span class="token punctuation">]</span> <span class="token comment">// 2) angular know how to gives us this instan</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span> <span class="token punctuation">{</span><br><br>	<span class="token comment">// 1) tell angular: we need an instance of LoggingService class</span><br>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> loggingService<span class="token operator">:</span> LoggingService</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><br>									<span class="token comment">//  ^ custom name</span><br><br>	<span class="token comment">// use it</span><br>	<span class="token function">onCreateAccount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>		<span class="token operator">...</span><br>		<span class="token keyword">this</span><span class="token punctuation">.</span>loggingService<span class="token punctuation">.</span><span class="token function">logStatusChange</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// angular created this for us auto</span><br><span class="token comment">//  ^ reuse this line multiple times in multiple components</span><br>	<span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><h3 id="data-service">Data Service <a href="#data-service" class="direct-link">#</a></h3><p>Service: store and manage our data → exchange property &amp; event binding → get event to app component.</p><p>👉 <a href="https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/09-services-final/src/app">Codes for this section</a>.</p><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// reference pointing</span><br><span class="token keyword">this</span><span class="token punctuation">.</span>accounts <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>accountsService<span class="token punctuation">.</span>accounts<span class="token punctuation">;</span><br><span class="token comment">// they are actually the same object (ie. this.accountsService.accounts)</span></code></pre><p>Without account services, we have to emit &amp; output our data and event (add acc for example). However, with services, we don't need them anymore, just inject the service and put the account into it!</p><h3 id="hierarchical-injector">Hierarchical injector <a href="#hierarchical-injector" class="direct-link">#</a></h3><p>Inject a service to father → all its child component get the same instance of the service! ⇒ only go down in the tree components → if there is a duplicate in child, it will overwrite the father's.</p><p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/post/angular/angular-2/Untitled_1-1920w.webp 1920w, /img/post/angular/angular-2/Untitled_1-1280w.webp 1280w, /img/post/angular/angular-2/Untitled_1-640w.webp 640w, /img/post/angular/angular-2/Untitled_1-320w.webp 320w" type="image/webp"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/post/angular/angular-2/Untitled_1-1920w.jpg 1920w, /img/post/angular/angular-2/Untitled_1-1280w.jpg 1280w, /img/post/angular/angular-2/Untitled_1-640w.jpg 640w, /img/post/angular/angular-2/Untitled_1-320w.jpg 320w" type="image/jpeg"><img alt="Angular_2_-Services&amp;Dependency_Injection&amp;_Rout_fb1390f6e4ee48849ae39feb665bdf1b/Untitled_1.png" src="/img/post/angular/angular-2/Untitled_1.png" height="362" width="1020" decoding="async" loading="lazy" style="background-size:cover;contain-intrinsic-size: min(var(--main-width), 1020px) min(calc(var(--main-width) * 0.35490196078431374), 362px);background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 1020 362'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAFCAYAAACeuGYRAAAACXBIWXMAAAsSAAALEgHS3X78AAAAyElEQVQY0zWOzQ7BQBSF51UlNtaE2ItIxEYor4IX8BPWQ4i2EUobU52Z/kybHJkrFt/i3Jyb77Bp24HTncPpzPC6h9BaQyYSSioopRBFEYIggBACVVWhLEuw9WKDzXKL7WoHLTWMMcjzHFmWEfYxjmMkSUJ3Cxs3Jxi3Jpi2Z7i5N/i+j8f9QWUpJRGGIWFt4i3A+J6DH47g+yOZ0jQlg53xpygKwphfZr1aH/36AMPGCN7Zg+d7cK8uPvGHLHbW8/ki++XEKX8BsofqdZlJINgAAAAASUVORK5CYII='%3E%3C/image%3E%3C/svg%3E&quot;)"></picture></p><p>[<a href="https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656222#overview">video</a>] If don't want create A NEW INSTANCE IN CHILD (which will overwrite the one coming from father) → just remove the service in <code>providers</code>! → it will use the service of the father.</p><h3 id="inject-services-into-services">Inject Services into Services <a href="#inject-services-into-services" class="direct-link">#</a></h3><ul><li><p>Normally, if service A doesn't contain (inject) any service → no need <code>@Injectable()</code></p></li><li><p>If we wanna inject service B into service A → we need to add <code>@Injectable()</code> into A (not B!!!!)</p><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// service B</span><br><br><span class="token comment">// service A</span><br>@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ServiceA</span> <span class="token punctuation">{</span><br>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> serviceB<span class="token operator">:</span> ServiceB</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><br>	<span class="token comment">// something using serviceB</span><br><span class="token punctuation">}</span></code></pre></li></ul><p><strong>GOOD PRACTICE</strong>: ALWAYS ADD <code>@Injectable()</code> for all services!</p><h3 id="services-with-cross-components">Services with cross-components <a href="#services-with-cross-components" class="direct-link">#</a></h3><p>With services, we don't have to build complex inputs, outputs chanes where you pass events and properties to get data from component A to B,... → much cleaner!</p><p>👉 <a href="https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/09-services-final/src/app">Codes for this section</a>.</p><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// accounts.service.ts</span><br>@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AccountsService</span> <span class="token punctuation">{</span><br>	statusUpdated <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">();<br>}<br><br>// account.component.ts<br>@Component(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain-text">)<br>export class AccountComponent </span><span class="token punctuation">{</span><br>  @<span class="token function">Input</span><span class="token punctuation">(</span><span class="token punctuation">)</span> account<span class="token operator">:</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> string<span class="token punctuation">,</span> status<span class="token operator">:</span> string<span class="token punctuation">}</span><span class="token punctuation">;</span><br>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> accountsService<span class="token operator">:</span> AccountsService</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><br>					 <span class="token comment">// ^ a shorthand to create a property with the same name as</span><br>					 <span class="token comment">//   "accountService" &lt;- we can "this.accountService".</span><br>  <span class="token function">onSetTo</span><span class="token punctuation">(</span><span class="token parameter">status<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token operator">...</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>accountsService<span class="token punctuation">.</span>statusUpdated<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// emit an event</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token plain-text"><br><br>// new-account.component.ts<br>@Component(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain-text">)<br>export class NewAccountComponent </span><span class="token punctuation">{</span><br>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> accountsService<span class="token operator">:</span> AccountsService</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>accountsService<span class="token punctuation">.</span>statusUpdated<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span> <span class="token comment">// event is observable!</span><br>      <span class="token punctuation">(</span><span class="token parameter">status<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'New Status: '</span> <span class="token operator">+</span> status<span class="token punctuation">)</span> <span class="token comment">// capture that event!</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token plain-text"></span></code></pre><p>👉 Example: <a href="https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/10-services-assignment-solution/src/app">exchange active / inactive users</a>.<br>👉 <a href="https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/11-prj-services-final/src/app/recipes">Project with recipes and shopping-list</a>. (change from using EventEmitter to service) — <a href="https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656236#overview">videos</a></p><h3 id="service---pushing-data-from-a-b">Service - pushing data from A-B <a href="#service---pushing-data-from-a-b" class="direct-link">#</a></h3><p>When we use <code>.slice()</code> to copy a list (to work on this), there may be some event cannot access the original one (eg. when using <code>addIngredients</code>) → we need to emit an event containing the original list.</p><p>👉 <a href="https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/11-prj-services-final/src/app/shopping-list">Codes for this section</a></p><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// shopping-list.service.ts</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span> <span class="token punctuation">{</span><br>	ingredientsChanged <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token operator">&lt;</span>Ingredient<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token keyword">private</span> ingredients<span class="token operator">:</span> Ingredient<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>	<span class="token operator">...</span><br>	<span class="token function">addIngredient</span><span class="token punctuation">(</span><span class="token parameter">ingredient<span class="token operator">:</span> Ingredient</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>ingredients<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>ingredient<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>ingredientsChanged<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ingredients<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// shopping-list.component.ts</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span> <span class="token keyword">implements</span> <span class="token class-name">OnInit</span> <span class="token punctuation">{</span><br>	ingredients<span class="token operator">:</span> Ingredient<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> slService<span class="token operator">:</span> ShoppingListService</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><br>	<span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>	  <span class="token operator">...</span><br>	  <span class="token keyword">this</span><span class="token punctuation">.</span>slService<span class="token punctuation">.</span>ingredientsChanged<br>	    <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><br>	      <span class="token punctuation">(</span><span class="token parameter">ingredients<span class="token operator">:</span> Ingredient<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br>	        <span class="token keyword">this</span><span class="token punctuation">.</span>ingredients <span class="token operator">=</span> ingredients<span class="token punctuation">;</span><br>	      <span class="token punctuation">}</span><br>	    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre></div><div class="h2-wrapper"><h2 id="routing-%E2%86%92-change-pages">Routing → change pages <a href="#routing-%E2%86%92-change-pages" class="direct-link">#</a></h2><p>👉 <a href="https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/12-routing-final/src/app">Codes for this section</a><br>👉 <a href="https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/13-prj-routing-final/src/app">Example of final project using routing</a>.</p><h3 id="adding-routes">Adding Routes <a href="#adding-routes" class="direct-link">#</a></h3><p>Angular ships its own <em>router</em> which allows to change URLs of our application.</p><p>Where? ⇒ Because the router controls URLs of all things in our apps, the place we can put it is in <code>app.module.ts</code></p><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// app-routing.module.ts</span><br><span class="token comment">//----------------------</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span> Routes<span class="token punctuation">,</span> RouterModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/router'</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> appRoutes<span class="token operator">:</span> Routes <span class="token operator">=</span> <span class="token punctuation">[</span><br>	<span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> component<span class="token operator">:</span> HomeComponent <span class="token punctuation">}</span><span class="token punctuation">,</span><br>	<span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> UsersComponent <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// something: http//localhost:4200/users</span><br>				<span class="token comment">//^ without "/"</span><br>	<span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'servers'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> ServersComponent <span class="token punctuation">}</span><br><span class="token punctuation">]</span><br><br>@<span class="token function">NgModule</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>	<span class="token keyword">import</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>		RouterModule<span class="token punctuation">.</span><span class="token function">forRoot</span><span class="token punctuation">(</span>appRoutes<span class="token punctuation">)</span><br>							<span class="token comment">// ^ register our routes to the RouterModule of our app</span><br>	<span class="token punctuation">]</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// where to display component after click?</span><br><span class="token comment">// app.component.html</span><br><span class="token comment">//----------------------</span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-outlet</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-outlet</span><span class="token punctuation">&gt;</span></span> <span class="token comment">// &lt;- a directive shipped by angular!!!</span></code></pre><h3 id="routerlink"><code>routerLink</code> <a href="#routerlink" class="direct-link">#</a></h3><p>Add some links to app (<a href="https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656284#overview">video</a>)</p><pre class="language-html"><code class="language-html"><span class="token comment">&lt;!-- if we add links to a normal &lt;a&gt; =&gt; it will reload the app! --&gt;</span><br><span class="token comment">&lt;!-- =&gt; USE A SPECIAL DIRECTIVE "rounterLink" --&gt;</span><br><span class="token comment">&lt;!-- app.component.html --&gt;</span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">routerLink</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">routerLink</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/servers<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">[routerLink]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>[<span class="token punctuation">'</span>/users<span class="token punctuation">'</span>]<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br>			<span class="token comment">&lt;!-- ^ we can use "'/users'" &lt;- has to have '' because without it, --&gt;</span><br>			<span class="token comment">&lt;!-- |   angular will look for a property "/users" instead of a string --&gt;</span><br>			<span class="token comment">&lt;!-- ^ we use [] to add more complicated path here --&gt;</span><br>			<span class="token comment">&lt;!--   for example, ['/users', 'something'] &lt;- /users/something --&gt;</span><br><br><span class="token comment">&lt;!-- routerLink capture the click event + prevent the default behavior (which reloads --&gt;</span><br><span class="token comment">&lt;!-- entire our app) --&gt;</span></code></pre><h3 id="understand-paths">Understand paths <a href="#understand-paths" class="direct-link">#</a></h3><p>(<a href="https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656286#overview">video</a>) Why we need <code>"/"</code> before <code>"/servers"</code>? → if we on home page, it't normal, but if we in subpage (eg. /servers), if there is another link to "servers" (eg. <code>&lt;a routerLink='servers'&gt;</code>), it will be "<code>/servers/servers</code>" ← error!!!</p><p>We can <em>relative / absolute paths</em> inside <code>routerLink</code>.</p><pre class="language-jsx"><code class="language-jsx">routerLink<span class="token operator">=</span><span class="token string">"/abc"</span> <span class="token comment">// abs path: localhost:4200/abc</span><br>routerLink<span class="token operator">=</span><span class="token string">"abc"</span> <span class="token comment">// if you are in localhost:4200/xyz -&gt; localhost:4200/xyz/abc</span><br>routerLink<span class="token operator">=</span><span class="token string">"./abc"</span> <span class="token comment">// relative path: current position + /abc</span><br>routerLink<span class="token operator">=</span><span class="token string">"../abc"</span> <span class="token comment">// relative path: father path + /abc</span></code></pre><h3 id="routerlinkactive"><code>routerLinkActive</code> <a href="#routerlinkactive" class="direct-link">#</a></h3><p>We use <code>&lt;a class="active"&gt;</code> for current tab. ← how to use angular to add/remove this class auto?</p><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// don't forget to add "routerLinkActive" to ALL "li"</span><br><span class="token operator">&lt;</span>li routerLinkActive<span class="token operator">=</span><span class="token string">"active"</span> <span class="token punctuation">[</span>routerLinkActiveOptions<span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">"{exact: true}"</span><span class="token operator">&gt;</span><br>									<span class="token comment">//  ^css class                      //  ^only active if it's exactly the FULL path</span><br>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">routerLink</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/servers<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Servers</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><br><br><span class="token comment">// we add "routerLinkAcitve" inside &lt;a&gt; if we want</span></code></pre><p>(<a href="https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656288#overview">video</a>) <code>routerLinkActive</code> will check if the current path contains the path given in <code>routerLink</code> ← the empty path, ie. <code>"/"</code> is in all paths!!! → this may lead to a problem in which "Home" tab is always "active" ⇒ we need <code>routerLinkActiveOptions</code></p><h3 id="navigating-programmatically">Navigating programmatically <a href="#navigating-programmatically" class="direct-link">#</a></h3><p>Perform navigation after users click on some button, for example.</p><p>👉 <a href="https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/12-routing-final/src/app">Codes for this section</a></p><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// home.component.html</span><br><span class="token operator">&lt;</span><span class="token function">button</span> <span class="token punctuation">(</span>click<span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">"onLoadServers()"</span><span class="token operator">&gt;</span>Load servers<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><br><br><span class="token comment">// home.component.ts</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span> <span class="token punctuation">{</span><br>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> router<span class="token operator">:</span> Router</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><br>	<span class="token function">onLoadServers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>		<span class="token comment">// complex calculations</span><br>		<span class="token keyword">this</span><span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'/servers'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>If we want <code>.navigate()</code> knows where we are,</p><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// servers.component.html</span><br><span class="token operator">&lt;</span><span class="token function">button</span> <span class="token punctuation">(</span>click<span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">"onReload()"</span><span class="token operator">&gt;</span>Reload page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><br><br><span class="token comment">// servers.component.html</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span> <span class="token punctuation">{</span><br>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> router<span class="token operator">:</span> Router<span class="token punctuation">,</span><br>							<span class="token keyword">private</span> route<span class="token operator">:</span> ActivatedRoute</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>													<span class="token comment">// ^simply inject current route which load the component</span><br>													<span class="token comment">// a route =&gt; simply a javascript object</span><br><span class="token punctuation">}</span><br><br>	<span class="token function">onReload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>		<span class="token keyword">this</span><span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'/servers'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>						<span class="token comment">// ^with this method, we don't get the problem of</span><br>						<span class="token comment">// /servers/servers like in routerLink if we use ['servers']</span><br>						<span class="token comment">// REASON: .navigate() doesn't know where we currently are, it just</span><br>						<span class="token comment">//   know the path of template -&gt; '/servers' is the same as 'servers'</span><br><br>		<span class="token comment">// If we wanna use relative path with .navigate()?</span><br>		<span class="token keyword">this</span><span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'/servers'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>relativeTo<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>route<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>											<span class="token comment">//  ^             ^with this, angular knows what is currenty</span><br>											<span class="token comment">//  |                active route</span><br>											<span class="token comment">//  | we can use ['../'] (like a relative path)</span><br>	<span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><h3 id="add-params-to-route">Add params to Route <a href="#add-params-to-route" class="direct-link">#</a></h3><p>(Videos: <a href="https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656296#overview">Passing params to Routes</a> + <a href="https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656298#overview">Fetching Route params</a> + <a href="https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656302#overview">fetch reactively</a>) For example we wanna navigate to users, each user a path → change with ids. ← <code>id</code> will be the param of the Route.</p><p>👉 <a href="https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/12-routing-final/src/app">Codes for this section</a>.</p><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// app-routing.module.ts</span><br><span class="token keyword">const</span> appRoutes<span class="token operator">:</span> Routes <span class="token operator">=</span> <span class="token punctuation">[</span><br>	<span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'users/:id/:name'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> UserComponent <span class="token punctuation">}</span><br>					<span class="token comment">//     ^without this, localhost/users/something will get error!</span><br><span class="token punctuation">]</span></code></pre><p>Get the <code>id</code> from the router,</p><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// user.component.ts</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span> ActivatedRoute<span class="token punctuation">,</span> Params <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/router'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span> Subscription <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs/Subscription'</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span> <span class="token punctuation">{</span><br>	user<span class="token operator">:</span> <span class="token punctuation">{</span>id<span class="token operator">:</span> number<span class="token punctuation">,</span> name<span class="token operator">:</span> string<span class="token punctuation">}</span><span class="token punctuation">;</span><br>	paramsSubscription<span class="token operator">:</span> Subscription<span class="token punctuation">;</span><br><br>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> route<span class="token operator">:</span> ActivatedRoute</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><br>					<span class="token comment">//  ^ gives us access to the id passed in the URL -&gt; selected user</span><br><br>	<span class="token function">ngOninit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>		<span class="token comment">// OPTION 1: INITIAL ONLY</span><br>		<span class="token keyword">this</span><span class="token punctuation">.</span>user <span class="token operator">=</span> <span class="token punctuation">{</span><br>			id<span class="token operator">:</span> <span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>route<span class="token punctuation">.</span>snapshot<span class="token punctuation">.</span>params<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// &lt;- from 'users/:id'</span><br>								<span class="token comment">//   ^it's just a snapshot of the 1st initialization</span><br>			name<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>route<span class="token punctuation">.</span>snapshot<span class="token punctuation">.</span>params<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token comment">// &lt;- from 'users/:id/:name'</span><br>									<span class="token comment">//     if we change url dynamically, it won't work!</span><br>		<span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>		<span class="token comment">// OPTION 2: subscribe to the change of url (whenever we click)</span><br>		<span class="token keyword">this</span><span class="token punctuation">.</span>paramsSubscription<br>			<span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>route<span class="token punctuation">.</span>params<br>							 <span class="token comment">// ^it's an observable -&gt; help you work with async tasks</span><br>																											 <span class="token comment">//   ^in the future, users perform some tasks</span><br>																											 <span class="token comment">//   -&gt; you don't know where, when, how long,...</span><br>	      <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><br>	        <span class="token punctuation">(</span><span class="token parameter">params<span class="token operator">:</span> Params</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br>	          <span class="token keyword">this</span><span class="token punctuation">.</span>user<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token operator">+</span>params<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// "+" to convert to number</span><br>	          <span class="token keyword">this</span><span class="token punctuation">.</span>user<span class="token punctuation">.</span>name <span class="token operator">=</span> params<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>	        <span class="token punctuation">}</span><br>	      <span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token punctuation">}</span><br><br>	<span class="token function">ngOnDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span>paramsSubscription<span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// end of subscription!</span><br>		<span class="token comment">// in fact, for this router, you don't have to do this because</span><br>		<span class="token comment">//   angular will destroy the subscription for you</span><br>		<span class="token comment">//   but in general case for OBSERVABLE THAT YOU CREATED,</span><br>		<span class="token comment">//   you should .unsubcribe() it!</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// user.component.html</span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">User with ID </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">User with name </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span></code></pre><p><strong>GOOD PRACTICE:</strong> Always <code>.unsubscribe()</code> the observable has been created!</p><h3 id="query-params-(%3F...)">Query params (?...) <a href="#query-params-(%3F...)" class="direct-link">#</a></h3><p>👉 <a href="https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656308#overview">Video for this section</a>.</p><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// inside an a tag in html</span><br><span class="token operator">&lt;</span>a<br>  <span class="token punctuation">[</span>routerLink<span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">"['/servers', server.id]"</span> <span class="token comment">// locahost/servers/3</span><br>  <span class="token punctuation">[</span>queryParams<span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">"{allowEdit: server.id === 3 ? '1' : '0'}"</span> <span class="token comment">// .../3?allowEdit=1</span><br>  fragment<span class="token operator">=</span><span class="token string">"loading"</span> <span class="token comment">// ...?allowEdit=1#loading</span><br>  <span class="token operator">&gt;</span><br>  <br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span></code></pre><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// navigate from a button?</span><br><span class="token comment">// servers.component.html</span><br><span class="token operator">&lt;</span><span class="token function">button</span> <span class="token punctuation">(</span>click<span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">"onReload()"</span><span class="token operator">&gt;</span>Reload page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span></code></pre><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// servers.component.html</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span> <span class="token punctuation">{</span><br>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> router<span class="token operator">:</span> Router</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><br><br>	<span class="token function">onReload</span><span class="token punctuation">(</span><span class="token parameter">id<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>		<span class="token comment">// localhost/servers/1/edit?allowEdit=1#loading</span><br>		<span class="token keyword">this</span><span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'/servers'</span><span class="token punctuation">,</span> id<span class="token punctuation">,</span> <span class="token string">'edit'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>			<span class="token punctuation">{</span><br>				queryParams<span class="token operator">:</span> <span class="token punctuation">{</span>allowEdit<span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>				fragment<span class="token operator">:</span> <span class="token string">'loading'</span><br>			<span class="token punctuation">}</span><br>		<span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>How to retrieve the informatoin from the URLs? ⇒ check <a href="https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656314#overview">video</a>.</p><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// edit-server.component.ts</span><br><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> route<span class="token operator">:</span> ActivatedRoute</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><br>								 <span class="token comment">// ^simply inject current route which load the component</span><br><br><span class="token comment">// 1st approach -&gt; only get the ones created on init</span><br><span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>route<span class="token punctuation">.</span>snapshot<span class="token punctuation">.</span>queryParams<span class="token punctuation">)</span><span class="token punctuation">;</span><br>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>route<span class="token punctuation">.</span>snapshot<span class="token punctuation">.</span>fragment<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// 2nd approach -&gt; allow you to react to the change of query params</span><br><span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>	<span class="token keyword">this</span><span class="token punctuation">.</span>route<span class="token punctuation">.</span>queryParams<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token keyword">this</span><span class="token punctuation">.</span>route<span class="token punctuation">.</span>fragement<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><h3 id="nested-%2F-child-router">Nested / Child router <a href="#nested-%2F-child-router" class="direct-link">#</a></h3><p>(<a href="https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656322#overview">video</a> + <a href="https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/12-routing-final/src/app">codes</a>) No need to change to a new page for each child component, just display them on a sidebar (a part of the view) when we click on the navigator.</p><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// app-routing.module.ts</span><br><span class="token keyword">const</span> appRoutes<span class="token operator">:</span> Routes <span class="token operator">=</span> <span class="token punctuation">[</span><br>	<span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'servers'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> ServersComponent<span class="token punctuation">,</span> children<span class="token operator">:</span> <span class="token punctuation">[</span><br>		<span class="token punctuation">{</span>path<span class="token operator">:</span> <span class="token string">':id'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> ServerComponent<span class="token punctuation">}</span><span class="token punctuation">,</span><br>		<span class="token punctuation">{</span>path<span class="token operator">:</span> <span class="token string">':id/edit'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> EditServerComponent <span class="token punctuation">}</span><br>	<span class="token punctuation">]</span> <span class="token punctuation">}</span><br><span class="token punctuation">]</span></code></pre><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// servers.component.html</span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-outlet</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-outlet</span><span class="token punctuation">&gt;</span></span> <span class="token comment">// replace "old" &lt;app-server&gt; and &lt;app-edit-server&gt;</span><br><span class="token comment">//^ all the child routes inside this component will be shipped by angular</span><br><span class="token comment">//  -&gt; that's why we have several "the same" &lt;router-outlet&gt; in our app</span></code></pre><h3 id="preserve-query-params-between-paths">Preserve query params between paths <a href="#preserve-query-params-between-paths" class="direct-link">#</a></h3><p>Before enter to edit-server, there is <code>?allowEdit=1</code>, however, after navigate to edit-server, this info is gone. How to preserve it?</p><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// server.component.ts</span><br><span class="token function">onEdit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>	<span class="token keyword">this</span><span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span><br>		<span class="token punctuation">[</span><span class="token string">'edit'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>		<span class="token punctuation">{</span><br>			relativeTo<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>route<span class="token punctuation">,</span><br>			queryParamsHandling<span class="token operator">:</span> <span class="token string">'preserve'</span><br>											<span class="token comment">//   ^keep the old + overwrite to the new one</span><br>											<span class="token comment">//   ^'merge' if you wanna merge old + new</span><br>		<span class="token punctuation">}</span><br>	<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><h3 id="redirect-%26-wildcat-routes">Redirect &amp; wildcat routes <a href="#redirect-%26-wildcat-routes" class="direct-link">#</a></h3><p>For example: building 404 page.</p><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> appRoutes<span class="token operator">:</span> Routes <span class="token operator">=</span> <span class="token punctuation">[</span><br>	<span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'not-found'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> PageNoteFoundComponent <span class="token punctuation">}</span><span class="token punctuation">,</span><br>	<span class="token comment">// a specific path</span><br>	<span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'something'</span><span class="token punctuation">,</span> redirectTo<span class="token operator">:</span> <span class="token string">'/not-found'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// redirect /something to /not-found</span><br>	<span class="token comment">// all the paths (performed after THE ABOVE &lt;- order makes sense!!!!)</span><br>	<span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'**'</span><span class="token punctuation">,</span> redirectTo<span class="token operator">:</span> <span class="token string">'/not-found'</span> <span class="token punctuation">}</span><br><span class="token punctuation">]</span></code></pre><p>Error of <code>path: ''</code> (nothing) ← default behavior to check in angular is "prefix" (check from beginning) → every urls contains this "nothing" (<code>''</code>)</p><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// errors</span><br><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> redirectTo<span class="token operator">:</span> <span class="token string">'/somewhere-else'</span> <span class="token punctuation">}</span><br><br><span class="token comment">// fix</span><br><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> redirectTo<span class="token operator">:</span> <span class="token string">'/somewhere-else'</span><span class="token punctuation">,</span> pathMatch<span class="token operator">:</span> <span class="token string">'full'</span> <span class="token punctuation">}</span></code></pre><h3 id="app-routing.module.ts"><code>app-routing.module.ts</code> <a href="#app-routing.module.ts" class="direct-link">#</a></h3><p>Store all routing tasks in a single file. → no need to stored in <code>app.module.ts</code>.</p><p>👉 <a href="https://github1s.com/dinhanhthi/learn-angular-complete-guide/blob/master/12-routing-final/src/app/app-routing.module.ts">Example file</a>.</p><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// app-routing.module.ts</span><br><span class="token comment">// no need to re-declare components like already done in app.module.ts</span><br><span class="token keyword">const</span> appRoutes<span class="token operator">:</span> Routes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>@<span class="token function">NgModule</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>	imports<span class="token operator">:</span> <span class="token punctuation">[</span><br>		RouterModule<span class="token punctuation">.</span><span class="token function">forRoot</span><span class="token punctuation">(</span>appRoutes<span class="token punctuation">)</span><br>	<span class="token punctuation">]</span><span class="token punctuation">,</span><br>	exports<span class="token operator">:</span> <span class="token punctuation">[</span>RouterModule<span class="token punctuation">]</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AppRoutingModule</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></code></pre><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// app.module.ts</span><br><span class="token operator">...</span><br>@<span class="token function">NgModule</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>	<span class="token operator">...</span><br>	imports<span class="token operator">:</span> <span class="token punctuation">[</span><br>		AppRoutingModule<br>	<span class="token punctuation">]</span><br>	<span class="token operator">...</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h3 id="login-%26-guards-%26-authentication">Login &amp; Guards &amp; Authentication <a href="#login-%26-guards-%26-authentication" class="direct-link">#</a></h3><p>(<a href="https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656342#overview">video</a>) Create <code>auth-guard.service.ts</code> (<a href="https://github1s.com/dinhanhthi/learn-angular-complete-guide/blob/master/12-routing-final/src/app/auth-guard.service.ts">file</a>) containing the service to control the authentication. → use <code>CanActivate</code> ← <mark>angular executes this before router loaded!</mark></p><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// auth-guard.service.ts</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AuthGuard</span> <span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">{</span><br>	<span class="token function">canActivate</span><span class="token punctuation">(</span><br>	  state<span class="token operator">:</span> RouterStateSnapshot<span class="token punctuation">)</span><span class="token operator">:</span> Observable<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>boolean</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> | Promise</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>boolean</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> | boolean </span><span class="token punctuation">{</span><br><br>	<span class="token comment">// Obersvable / Promise -&gt; some tasks need auth from server/databse &lt;- async</span><br>	<span class="token comment">// boolean -&gt; some tasks completely on client &lt;- sync</span><br><span class="token punctuation">}</span><span class="token plain-text"></span></code></pre><p>Example: <code>auth.service.ts</code> → a fake service for the testing. In real app, we use this file to get the info / confirmation from the server about the authentication!</p><p>Apply to routes?</p><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// app-routing.module.ts</span><br><span class="token punctuation">{</span>path<span class="token operator">:</span> <span class="token string">'...'</span><span class="token punctuation">,</span> canActivate<span class="token operator">:</span> <span class="token punctuation">[</span>AuthGuard<span class="token punctuation">]</span><span class="token punctuation">,</span> component<span class="token operator">:</span> <span class="token operator">...</span><span class="token punctuation">,</span> children<span class="token operator">:</span> <span class="token operator">...</span><span class="token punctuation">}</span> <span class="token comment">// apply also for children</span><br><span class="token comment">//            ^add this to the path you wanna apply auth</span></code></pre><p>(<a href="https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656356#overview">video</a>) Show the father route list, only protect child routes? → use <code>CanActivateChild</code></p><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// auth-guard.service.ts</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AuthGuard</span> <span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">{</span><br>	<span class="token function">canActivate</span><span class="token punctuation">(</span><br>	  state<span class="token operator">:</span> RouterStateSnapshot<span class="token punctuation">)</span><span class="token operator">:</span> Observable<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>boolean</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> | Promise</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>boolean</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> | boolean </span><span class="token punctuation">{</span><br><br>	<span class="token function">canActivateChild</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token plain-text"><br><br>// app-routing.module.ts<br></span><span class="token punctuation">{</span>path<span class="token operator">:</span> <span class="token string">'...'</span><span class="token punctuation">,</span> canActivateChild<span class="token operator">:</span> <span class="token punctuation">[</span>AuthGuard<span class="token punctuation">]</span><span class="token punctuation">,</span> component<span class="token operator">:</span> <span class="token operator">...</span><span class="token punctuation">,</span> children<span class="token operator">:</span> <span class="token operator">...</span><span class="token punctuation">}</span><span class="token plain-text"></span></code></pre><p>(<a href="https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656346#overview">video</a> + <a href="https://github1s.com/dinhanhthi/learn-angular-complete-guide/blob/master/12-routing-final/src/app/servers/edit-server/can-deactivate-guard.service.ts">file</a>) Control whether you are allowed to leave a route or not ← <mark>Confirm to leave the input/changes</mark>!!! solve the problem of user accidentially navigating away!!!</p><p><strong>Idea</strong>: angular router can execute <code>canDeactivate()</code> in a service (<code>can-deactivate-guard.service.ts</code>) &gt; component we are currently on has <code>canDeactivate()</code> ← how guard communicates with our components.</p><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// can-deactivate-guard.service.ts</span><br><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">CanComponentDeactivate</span> <span class="token punctuation">{</span><br>	<span class="token function function-variable">canDeactivate</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Observable<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>boolean</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> | Promise</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>boolean</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> | boolean;<br>}<br><br>export class CanDeactivateGuard implements canDeactivate</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CanComponentDeactivate</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> </span><span class="token punctuation">{</span><br>	<span class="token function">canDeactivate</span><span class="token punctuation">(</span>component<span class="token operator">:</span> CanComponentDeactivate<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token operator">...</span> <span class="token punctuation">{</span><br>		<span class="token keyword">return</span> component<span class="token punctuation">.</span><span class="token function">canDeactivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token plain-text"></span></code></pre><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// app-routing.module.ts</span><br><span class="token punctuation">{</span>path<span class="token operator">:</span> <span class="token operator">...</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">,</span> canDeactivate<span class="token operator">:</span> <span class="token punctuation">[</span>CanDeactivateGuard<span class="token punctuation">]</span><span class="token punctuation">}</span><br><br><span class="token comment">// app.module.ts</span><br>providers<span class="token operator">:</span> <span class="token punctuation">[</span>CanDeactivate<span class="token punctuation">]</span></code></pre><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// edit-server.component.ts</span><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span> <span class="token keyword">implements</span> <span class="token class-name">CanComponentDeactivate</span> <span class="token punctuation">{</span><br>	<span class="token function">canDeactivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token operator">...</span> <span class="token punctuation">{</span><br>		<span class="token comment">// check if there are some changes and return true/false</span><br>	<span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><h3 id="parsing-static-data-to-route">Parsing static data to route <a href="#parsing-static-data-to-route" class="direct-link">#</a></h3><p>(<a href="https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656358#overview">video</a> + <a href="https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/12-routing-final/src/app">code</a>) Navigate to an error page with custom message from route.</p><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// error-page.component.html</span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">&gt;</span></span></code></pre><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// error-page.component.ts</span><br><br><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ErrorPageComponent</span> <span class="token keyword">implements</span> <span class="token class-name">OnInit</span> <span class="token punctuation">{</span><br>	errorMessage<span class="token operator">:</span> string<span class="token punctuation">;</span><br><br>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> route<span class="token operator">:</span> ActivatedRoute</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><br>									<span class="token comment">//  ^simply inject current route which load the component</span><br><br>	<span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>		<span class="token keyword">this</span><span class="token punctuation">.</span>errorMessage <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>route<span class="token punctuation">.</span>snapshot<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token string">'message'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>																				<span class="token comment">//  ^ there is "data" in app-routing.module.ts</span><br>		<span class="token comment">// or subscribe to the changes</span><br>		<span class="token comment">// (including the init snapshot)</span><br>		<span class="token keyword">this</span><span class="token punctuation">.</span>route<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><br>      <span class="token punctuation">(</span><span class="token parameter">data<span class="token operator">:</span> Data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br>        <span class="token keyword">this</span><span class="token punctuation">.</span>errorMessage <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">'message'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// app-routing.module.ts</span><br><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'not-found'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> ErrorPageComponent<span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token punctuation">{</span>message<span class="token operator">:</span> <span class="token string">'Page not found!'</span><span class="token punctuation">}</span> <span class="token punctuation">}</span></code></pre><h3 id="parsing-dynamic-data-(server)-to-route">Parsing dynamic data (server) to route <a href="#parsing-dynamic-data-(server)-to-route" class="direct-link">#</a></h3><p>(<a href="https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656360#overview">video</a> + <a href="https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/12-routing-final/src/app/servers">codes</a>) Display the component after fetch from the server (async data) → should watch the videos + below notes:</p><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// server-resolver.service.ts</span><br><span class="token function">resolve</span><span class="token punctuation">(</span>route<span class="token operator">:</span> ActivatedRouteSnapshot<span class="token punctuation">,</span> state<span class="token operator">:</span> RouterStateSnapshot<span class="token punctuation">)</span><span class="token operator">:</span> Observable<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Server</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> | Promise</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Server</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> | Server </span><span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>serversService<span class="token punctuation">.</span><span class="token function">getServer</span><span class="token punctuation">(</span><span class="token operator">+</span>route<span class="token punctuation">.</span>params<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>													<span class="token comment">// ^this service here will rerendered whenever we</span><br>													<span class="token comment">// rerender the route</span><br><span class="token punctuation">}</span><span class="token plain-text"><br>// unlike the component itself, this is executed each time, so no need to set<br>// up an observable or something like that</span></code></pre><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// app-routing.module.ts</span><br><span class="token punctuation">{</span> path<span class="token operator">:</span><span class="token operator">...</span><span class="token punctuation">,</span> component<span class="token operator">:</span><span class="token operator">...</span><span class="token punctuation">,</span> resolver<span class="token operator">:</span> <span class="token punctuation">{</span>server<span class="token operator">:</span> ServerResolver<span class="token punctuation">}</span> <span class="token punctuation">}</span><br>																	<span class="token comment">//  ^choose a name you like</span><br><span class="token comment">// but make sure "server" is set the same in</span><br><span class="token comment">// server.component.ts_____________________</span><br><span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                         <span class="token comment">//    |</span><br>	<span class="token keyword">this</span><span class="token punctuation">.</span>route<span class="token punctuation">.</span>data                  <span class="token comment">//      |</span><br>		<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>                  <span class="token comment">//        |</span><br>			<span class="token punctuation">(</span><span class="token parameter">data<span class="token operator">:</span> Data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>server <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">'server'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><br>		<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><h3 id="location-strategies">Location strategies <a href="#location-strategies" class="direct-link">#</a></h3><p>(<a href="https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656364#overview">video</a>) When deployment, all URLs are parsed by the server (which hosts your app) first → then angular → route of angular (eg. nagivate something strange page to not found) may not work like on localhost. → need to make sure your web server return html file you want!</p><p>Hash mode routing → informs your web server on care the part of URL before "#"! → all things behind will be ignored by webserver.</p><pre class="language-jsx"><code class="language-jsx">localhost<span class="token operator">:</span><span class="token operator">/</span>users <span class="token operator">-</span><span class="token operator">&gt;</span> localhost<span class="token operator">:</span><span class="token operator">/</span>#<span class="token operator">/</span>users<br>													<span class="token comment">//   ^from this to end: ignored by webserver</span></code></pre><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// app-routing.module.ts</span><br>@<span class="token function">NgModule</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>	imports<span class="token operator">:</span> <span class="token punctuation">[</span><br>		RouterModule<span class="token punctuation">.</span><span class="token function">forRoot</span><span class="token punctuation">(</span>appRoutes<span class="token punctuation">,</span> <span class="token punctuation">{</span>useHash<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><br>	<span class="token punctuation">]</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><br><span class="token keyword">export</span> <span class="token operator">...</span></code></pre></div></div><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Angular 2 - Services &amp; DI &amp; Routing","image":["https://dinhanhthi.com/img/post/angular/angular-2/Untitled.png","https://dinhanhthi.com/img/post/angular/angular-2/Untitled_1.png"],"author":"Anh-Thi DINH","genre":"Insert a schema.org genre","url":"https://dinhanhthi.com/angular-2-service-dependency-injection-routing/","mainEntityOfPage":"https://dinhanhthi.com/angular-2-service-dependency-injection-routing/","datePublished":"03-03-2021","dateModified":"08-03-2021","description":"This is my note for the course &amp;quot;Angular - The Complete Guide (2021 Edition)&amp;quot; which is taught by Maximilian Schwarzmüller on Udemy...."}</script></article></main><footer><a href="/" target="_blank">Thi &nbsp;©&nbsp; 2021 </a>&nbsp;•&nbsp; <a href="/about-the-notes/">About the notes </a>&nbsp;•&nbsp; <a href="/about/">About me </a>&nbsp;•&nbsp; <a href="https://photos.app.goo.gl/9OVEkdTjmtRPg7vC3" target="_blank">My sketches </a>&nbsp;•&nbsp; <a href="https://goo.gl/photos/yQXdQws1LLS16x5v5" target="_blank">I cook </a>&nbsp;•&nbsp; <a href="/for-me-only/">For me only </a>&nbsp;•&nbsp; <a href="/donate/">Support Thi</a></footer><script src="https://cdnjs.cloudflare.com/ajax/libs/elasticlunr/0.9.6/elasticlunr.min.js"></script><script src="https://www.googletagmanager.com/gtag/js?id=G-K3YRSB918B" async=""></script><script>window.dataLayer = window.dataLayer || [];
		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());
		gtag('config', 'G-K3YRSB918B');</script><script src="/js/min.js?hash=2e73ea4921" async="" defer=""></script></body></html>