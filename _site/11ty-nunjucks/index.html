<!DOCTYPE html><html domain=".com" lang="en"><head><meta charset="utf-8"><meta content="width=device-width,initial-scale=1" name="viewport"><meta content="default-src 'self';object-src 'none';script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com/ https://gist.github.com/ https://www.googletagmanager.com/ https://www.google-analytics.com;connect-src 'self' https://www.google-analytics.com https://api.github.com;style-src 'self' https://fonts.googleapis.com/ https://use.fontawesome.com/ 'unsafe-inline' https://github.githubassets.com/ https://cdn.jsdelivr.net;img-src 'self' data:;font-src 'self' https://fonts.gstatic.com/ https://use.fontawesome.com/ https://cdn.jsdelivr.net" http-equiv="Content-Security-Policy"><link href="/favicon.svg" rel="icon" type="image/svg+xml"><meta content="#f9c412" name="theme-color"><meta content="max-snippet:-1, max-image-preview: large, max-video-preview: -1" name="robots"><title>11ty + Nunjucks</title><meta content="11ty + Nunjucks" prefix="og: http://ogp.me/ns#" property="og:title"><meta content="This is not a tutorial to create an 11ty website, this's a note! You can find some very new and useful techniques on this note alongside the..." name="description"><meta content="This is not a tutorial to create an 11ty website, this's a note! You can find some very new and useful techniques on this note alongside the..." prefix="og: http://ogp.me/ns#" property="og:description"><meta content="summary_large_image" name="twitter:card"><meta content="@dinhanhthi" name="twitter:site"><meta content="@dinhanhthi" name="twitter:creator"><meta content="https://dinhanhthi.com/img/remote/2hC4A2.png" prefix="og: http://ogp.me/ns#" property="og:image"><meta content="article" prefix="og: http://ogp.me/ns#" property="og:type"><link href="https://dinhanhthi.com/11ty-nunjucks/" rel="canonical"><meta content="https://dinhanhthi.com/11ty-nunjucks/" prefix="og: http://ogp.me/ns#" property="og:url"><meta content="no-referrer-when-downgrade" name="referrer"><link href="/feed/feed.xml" rel="alternate" type="application/atom+xml" title="ðŸ”¥ Anh-Thi DINH"><link href="/" rel="preconnect" crossorigin=""><link href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css" rel="stylesheet"><script csp-hash="sha256-1krv3Gb414NWjc9OVes7p1DsVGXMgyXL7klj8V8OQJE=">if (/Mac OS X/.test(navigator.userAgent))
			document
				.documentElement
				.classList
				.add('apple')</script><style>@charset "UTF-8";@font-face{font-display:swap;font-family:"Poppins";font-style:normal;font-weight:400;src:url(/fonts/poppins/poppins-v15-latin-regular.eot);src:local("Poppins Regular"),local("Poppins-Regular"),url(/fonts/poppins/poppins-v15-latin-regular.eot?#iefix) format("embedded-opentype"),url(/fonts/poppins/poppins-v15-latin-regular.woff2) format("woff2"),url(/fonts/poppins/poppins-v15-latin-regular.woff) format("woff"),url(/fonts/poppins/poppins-v15-latin-regular.ttf) format("truetype"),url(/fonts/poppins/poppins-v15-latin-regular.svg#Poppins) format("svg")}@font-face{font-display:swap;font-family:"Poppins";font-style:italic;font-weight:400;src:url(/fonts/poppins/poppins-v15-latin-italic.eot);src:local("Poppins Italic"),local("Poppins-Italic"),url(/fonts/poppins/poppins-v15-latin-italic.eot?#iefix) format("embedded-opentype"),url(/fonts/poppins/poppins-v15-latin-italic.woff2) format("woff2"),url(/fonts/poppins/poppins-v15-latin-italic.woff) format("woff"),url(/fonts/poppins/poppins-v15-latin-italic.ttf) format("truetype"),url(/fonts/poppins/poppins-v15-latin-italic.svg#Poppins) format("svg")}@font-face{font-display:swap;font-family:'Poppins';font-style:normal;font-weight:600;src:url(/fonts/poppins/poppins-v15-latin-600.eot);src:local("Poppins SemiBold"),local("Poppins-SemiBold"),url(/fonts/poppins/poppins-v15-latin-600.eot?#iefix) format("embedded-opentype"),url(/fonts/poppins/poppins-v15-latin-600.woff2) format("woff2"),url(/fonts/poppins/poppins-v15-latin-600.woff) format("woff"),url(/fonts/poppins/poppins-v15-latin-600.ttf) format("truetype"),url(/fonts/poppins/poppins-v15-latin-600.svg#Poppins) format("svg")}@font-face{font-display:swap;font-family:'Poppins';font-style:italic;font-weight:600;src:url(/fonts/poppins/poppins-v15-latin-600italic.eot);src:local("Poppins SemiBold Italic"),local("Poppins-SemiBoldItalic"),url(/fonts/poppins/poppins-v15-latin-600italic.eot?#iefix) format("embedded-opentype"),url(/fonts/poppins/poppins-v15-latin-600italic.woff2) format("woff2"),url(/fonts/poppins/poppins-v15-latin-600italic.woff) format("woff"),url(/fonts/poppins/poppins-v15-latin-600italic.ttf) format("truetype"),url(/fonts/poppins/poppins-v15-latin-600italic.svg#Poppins) format("svg")}@font-face{font-display:swap;font-family:'Recoleta';src:url(/fonts/recoleta/Recoleta-Bold.woff2) format("woff2"),url(/fonts/recoleta/Recoleta-Bold.woff) format("woff"),url(/fonts/poppins/Recoleta-Bold.ttf) format("truetype");font-weight:700;font-style:bold}*{border:0;box-sizing:border-box}:root{font-size:16.5px}main img{content-visibility:auto}::-webkit-scrollbar{height:10px;width:10px}::-webkit-scrollbar-thumb{background:#3e466b;border-radius:6px}::-webkit-scrollbar-thumb:hover{background:#aaa;cursor:pointer}::-webkit-scrollbar-track{background:#363948}::-webkit-scrollbar-corner{background:#282a36}body,html{font-family:"Poppins",Arial,Helvetica,sans-serif;font-size:16.5px}html{-webkit-text-size-adjust:100%}@supports (font-variation-settings:normal){html{font-family:"Poppins" var alt,Arial,Helvetica,sans-serif}}body{background:#282a36;color:#eee;margin:0;counter-reset:h2counter}b,strong{font-weight:600;color:#8cc8ff}sup{top:-.5em}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}mark{color:inherit;padding:0;background-color:transparent;box-shadow:inset 0 -4px 0 0 #ffd479}a,a:hover{text-decoration:none}a:hover{border-bottom:2px solid #ffd479}a.no-effect:hover{border-bottom:none}.page-note h3:hover a:hover,.page-note h4:hover a:hover,.page-note>h2:hover a:hover,a,a b,a strong{color:#ffd479}.intro a,a b:hover,a strong:hover,a:hover{color:#fff}hr{border-bottom:1px solid #eee}img{max-width:100%}main{margin:0 auto}.page-note h3,.page-note h4,.page-note>h2,h1,h2,h3,h4{font-family:"Recoleta",Arial,Helvetica,sans-serif}h1{font-size:29.7px}h2{font-size:24.75px}h3{font-size:21.5325px}h4{font-size:19.37925px}.page-note h3,.page-note h4,.page-note>h2{color:#eee}.page-note h3:hover .direct-link,.page-note h4:hover .direct-link,.page-note>h2:hover .direct-link{display:inline-block}.page-note>h2{font-size:24.75px;margin:37.125px 0 19.8px}.page-note p+ol,.page-note p+ul,.page-note>h2+h3,.page-note>h3+h4{margin-top:-.5rem}.page-note>h3,.page-note>h4{font-size:21.5325px;margin-bottom:19.8px}.page-note>h4{font-size:19.37925px}.page-note .direct-link{display:none;color:#777;border-bottom:none;margin-left:3px}.page-note pre+h2,.page-note pre+h3,.page-note pre+h4,.page-note>h3,.page-note>h4{margin-top:37.125px}.page-note h1{counter-reset:h2counter}.page-note h2{counter-reset:h3counter}.page-note h3{counter-reset:h4counter}.page-note h3:before,.page-note h4:before{opacity:.5}.page-note h2:before{content:counter(h2counter) ".Â Â ";counter-increment:h2counter;color:#8cc8ff}.page-note h3:before{content:counter(h2counter) "." counter(h3counter) ".Â Â ";counter-increment:h3counter}.page-note h4:before{content:counter(h2counter) "." counter(h3counter) "." counter(h4counter) ".Â Â ";counter-increment:h4counter}.container,header{width:100%;margin:0 auto}.normal{padding:0 16.5px;width:100%}@media (min-width:916.5px){.normal{width:900px}}.mt-2{margin-top:2rem}.page-index .container{padding:2rem 1rem 0}.page-index .main-cats{flex:0 1 calc(100% - 280px);padding-right:1rem}.page-index .main-cats>.category-wrapper{padding-bottom:1.5rem}.page-index .main-cats>.category-wrapper>.category{border:1px solid #3b3e54;border-radius:7px;height:fit-content;background:#2f3240;padding:2rem 1.5rem 1.5rem}.page-index .toc-index-container{flex:0 1 280px;position:sticky;top:60px;height:fit-content}.page-index .toc-index{border:1px solid #404040;border-radius:7px;height:fit-content;background:#35373c;padding:1rem 1.1rem}.page-index .toc-index h3{padding-bottom:5px;border-bottom:1px solid #555;margin:0 0 10px;font-size:1.3rem}.page-index .toc-index ul{padding-left:20px;margin:0}.page-index .toc-index p{font-style:italic;color:#999;padding-top:0;margin-bottom:0;font-size:.95rem;margin-top:10px}.page-index .toc-index p a{color:#999;border-bottom:2px solid #999}.page-index .toc-index p a:hover{border-bottom:2px solid #ffd479}.page-index .appendix{font-style:italic;opacity:.6}.page-index .appendix-bottom{display:none;font-size:.95rem}.page-index .appendix-toc{padding:0 5px;font-size:.9rem}@media (max-width:991px){.page-index .main-cats{flex:1 1 100%;order:2;padding-right:0}.page-index .toc-index-container{flex:1 1 100%;order:1;position:inherit;margin-bottom:1.5rem}.page-index .toc-index-container ul{column-count:3;-webkit-column-count:3;-moz-column-count:3}.page-index .appendix-toc{display:none}.page-index .appendix-bottom{display:block}}@media (max-width:767px){.page-index .toc-index ul{column-count:2;-webkit-column-count:2;-moz-column-count:2}}@media (max-width:575px){.page-index .toc-index ul{column-count:1;-webkit-column-count:1;-moz-column-count:1}}.category{width:100%}.category h2,header h1{font-size:1.55rem;margin-top:0}.category h2 img{float:left;margin-right:7px}.category .list-homepage{list-style:none;padding-left:0;margin-bottom:0;column-count:1;-webkit-column-count:1;-moz-column-count:1}@media (min-width:768px){.category .list-homepage{column-count:2;-webkit-column-count:2;-moz-column-count:2}}@media (min-width:992px){.category .list-homepage{column-count:3;-webkit-column-count:3;-moz-column-count:3}}.category .list-homepage li{padding-left:25px;margin-bottom:10px;width:100%}.category .list-homepage li a{color:#ddd;border-bottom:2px solid rgba(255,255,255,.14);border-style:dotted}.category .list-homepage li img{margin-bottom:-5px;margin-left:-25px}.category .list-homepage li:hover{cursor:pointer}.category .list-homepage li:hover a{border-color:#ffd479;color:#fff}.category .list-homepage li:hover::before{opacity:1}.page-index header{padding-top:5em;padding-bottom:0}.page-index header .header-logo{height:80px;width:auto}header nav{z-index:10}#nav{z-index:2;position:relative}header{padding:5.5rem 1rem 1rem;width:900px;text-align:center;max-width:100%;display:flex;align-items:center;flex-direction:column}header h1{font-size:2.2rem;margin-bottom:0}header p{margin-top:1rem}header .header-logo{width:55px;height:55px;margin-bottom:1rem}header .header-logo img{width:100%;height:100%}header .social{margin-top:.5rem;margin-bottom:1.5rem}header #more-info #note-tag>a,header .social a{margin-right:10px}header .social a:last-child,p.contact a:last-child{margin-right:0}@media (min-width:992px){header .social a{margin-right:20px}}header .social a img{border-radius:50%}header #more-info{padding:1rem}header #more-info #note-tag{padding-bottom:10px;border-bottom:1px solid #444}header #more-info #note-tag>a::before{content:"#"}header #more-info #last-modified{padding-top:10px;font-style:italic}#reading-progress,nav{top:0;left:0;width:100vw}#reading-progress{z-index:3;border-bottom:1px solid #ffd479;position:absolute;bottom:0;transform:translate(-100vw,0);will-change:transform;pointer-events:none}.intro,.job span{font-size:1.02rem}.intro b,.intro strong{color:#ffd479;font-weight:400}.job span{background:#ffd479;color:#000;padding:3px 20px;border-radius:15px}p.contact{width:100%;text-align:center;margin-bottom:4rem}p.contact a{margin-right:10px;margin-bottom:10px}nav{position:fixed;padding:0 1.5rem;background:#35373c}nav nav #nav .nav-search .nav-search__input{padding-right:1.5rem}@media (max-width:992px){nav{padding:0 1rem}nav nav #nav .nav-search .nav-search__input{padding-right:1rem}}@media (max-width:576px){nav{padding:0 .5em}nav nav #nav .nav-search .nav-search__input{padding-right:.5rem}}nav #nav{display:-ms-flexbox;-ms-flex-align:center;align-items:center}nav #nav a{color:#ccc;margin-right:15px;align-items:center;padding:0 .5rem;font-size:1.1rem;white-space:nowrap}nav #nav a img{margin-right:5px}nav #nav a:hover{color:#fff;cursor:pointer;text-decoration:none}nav #nav .nav-item{text-align:left;margin-right:5px}@media (min-width:421px){nav #nav .nav-item{padding-left:0!important}}@media (max-width:575px){nav #nav .nav-item{width:unset!important}nav #nav .nav-item span{display:none}}@media (min-width:576px){nav #nav .nav-item{margin-right:15px}}nav #nav .nav-github{text-align:right;padding-right:0!important;margin-right:0!important}nav #nav .nav-github:hover img{filter:invert(.4)}nav #nav .nav-search{display:block;background-image:linear-gradient(to right,#3d4251,#3b3f4c,#393d46,#373a41,#35373c);width:100%;position:relative}nav #nav,nav #nav .nav-search form,nav #nav a{display:flex}nav #nav .nav-search .nav-search__input{border:0;background:0 0;color:#ddd;font-size:1.05rem;padding:.65rem .5rem;width:100%}nav #nav .nav-search .nav-search__input:focus{outline:0;border:0}nav #nav .nav-search #nav-search__result-container{position:absolute;max-height:80vh;overflow:auto;width:100%;background:#35373c;border-bottom-right-radius:5px;border-bottom-left-radius:5px;padding:0;filter:drop-shadow(2px 4px 6px #000)}@media (max-width:767px){nav #nav .nav-search #nav-search__result-container{position:fixed;left:0;right:0;border-radius:0}}nav #nav .nav-search #nav-search__result-container ul#nav-search__ul{padding:0;margin:0;list-style:none}nav #nav .nav-search #nav-search__result-container ul#nav-search__ul li{display:flex;padding:10px;align-items:center;justify-content:space-between;overflow:hidden}nav #nav .nav-search #nav-search__result-container ul#nav-search__ul li .item__icon{width:20px}nav #nav .nav-search #nav-search__result-container ul#nav-search__ul li .item__content{padding:0 10px;width:100%;overflow:hidden;text-overflow:ellipsis}nav #nav .nav-search #nav-search__result-container ul#nav-search__ul li .item__content h3{margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}nav #nav .nav-search #nav-search__result-container ul#nav-search__ul li .item__content h3 a{color:#efb232;padding:0;text-align:left;font-weight:400;font-size:16.5px;line-height:1.5;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}nav #nav .nav-search #nav-search__result-container ul#nav-search__ul li .item__content h3 a:hover{border-bottom:none;color:#8cc8ff}nav #nav .nav-search #nav-search__result-container ul#nav-search__ul li .item__content p{text-align:left;margin:0;line-height:1.5;font-size:.95rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}nav #nav .nav-search #nav-search__result-container ul#nav-search__ul li .enter{width:20px;display:none}nav #nav .nav-search #nav-search__result-container ul#nav-search__ul li.selected{background:#282a36}nav #nav .nav-search #nav-search__result-container ul#nav-search__ul li.selected .enter{display:block}nav #nav .nav-search #nav-search__result-container ul#nav-search__ul mark{background:0 0;color:inherit;box-shadow:inset 0 -3px 0 0 #fff}nav #nav .nav-search #nav-search__result-container #nav-search__no-result{padding:0 10px}nav #nav .nav-search #nav-search__result-container #nav-search__no-result p{text-align:left}footer{font-size:1rem;background:#35373c;padding:.75rem 1rem;text-align:center;margin-top:3rem}footer a{color:#ccc}footer a:hover{color:#fff}.info,.success{position:relative;padding:16.5px;margin-bottom:24.75px;border:1px solid transparent;border-radius:.25rem;color:#eee;border-left-width:15px}.info :last-child,.success :last-child{margin-bottom:0}.info{border-color:#8cc8ff}.success{border-color:#86f7a2}@media (min-width:768px){.col-2-equal{display:flex;align-items:stretch;flex-wrap:wrap}.col-2-equal>*{flex:0 0 50%;max-width:50%;overflow:auto}.col-2-equal>:nth-child(even){padding-left:5px}.col-2-equal>:nth-child(odd){padding-right:5px}.col-2-equal>*>code{height:100%}.col-2-equal+h2,.col-2-equal+h3,.col-2-equal+h4{margin-top:12.375px}}.hsbox{margin-bottom:24.75px;border:1px solid #969696;padding:1rem;border-radius:3px}.hsbox .hs__title{cursor:pointer}.hsbox .hs__title::before{content:" ";display:inline-block;border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:7px solid currentColor;vertical-align:middle;margin-right:.7rem;transform:translateY(-2px);transition:transform .2s ease-out}.hsbox .hs__title.show{padding-bottom:15px;border-bottom:.5px solid #666;margin-bottom:1rem}.hsbox .hs__title.show+.hs__content{display:block;opacity:1;padding:5px 0;transition:all .25s 0s cubic-bezier(.4,0,.2,1)}.hsbox .hs__title.show::before{transform:rotate(90deg) translateX(-3px)}.hsbox .hs__content{display:none;transition:all .2s 0s ease}.hsbox .hs__content>:last-child,.page-note .list-item>:last-child{margin-bottom:0}input[type=text]::-ms-clear{display:none;width:0;height:0}input[type=text]::-ms-reveal{display:none;width:0;height:0}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{display:none}.eq{display:inline-block}.page-note .p-list>*{margin-bottom:1rem}.page-note .list-item{border:1px solid #424242;border-radius:3px;padding:1rem;margin-bottom:24.75px}.page-note .text-center{text-align:center}.page-note ol,.page-note p,.page-note ul{margin-top:0;margin-bottom:24.75px}.page-note ol li,.page-note ul li,div.toc ol li{margin-bottom:5px}.page-note ol li ol,.page-note ol li ul,.page-note ul li ol,.page-note ul li ul{margin-bottom:5px;margin-top:5px;padding-left:20px}.page-note ol li>:not(span),.page-note ul li>:not(span){margin-bottom:5px}.page-note p.noindent{display:none;padding-left:20px}.page-note p.noindent+ol,.page-note p.noindent+ul{padding-left:20px;margin-top:0}.page-note p.indent{display:none;padding-left:40px}.page-note ol.indent,.page-note p.indent+ol,.page-note p.indent+ul,.page-note ul.indent{padding-left:40px}.page-note ol.noindent,.page-note ul.noindent{padding-left:20px}.page-note hr{border-bottom:1px solid #525252;margin-bottom:24.75px;margin-right:auto;margin-left:0;width:200px}.page-note p.katex-block{overflow-x:auto;overflow-y:hidden}.page-note p.katex-block .katex-display{margin:0!important}#reading-list .item .author{font-style:italic}#reading-list .item .intro{color:#999}code[class*=language-],pre[class*=language-]{color:#eee;font-size:16px;text-shadow:none;font-family:Menlo,Monaco,Consolas,"Andale Mono","Ubuntu Mono","Courier New",monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#75a7ca}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}.token.comment{color:#6a9955}.language-html .language-css .token.punctuation,.token.punctuation{color:#eee}.token.inserted,.token.number{color:#b5cea8}.token.builtin,.token.string{color:#ce9178}.language-css .token.string.url{text-decoration:underline}.token.operator{color:#eee}.token.atrule{color:#ce9178}.token.atrule .token.url{color:#9cdcfe}.token.atrule .token.url .token.function{color:#efefac}.token.atrule .token.url .token.punctuation,.token.attr-value .token.punctuation.attr-equals{color:#eee}.token.keyword{color:#90cdff}.token.keyword.module{color:#c586c0}.token.function{color:#efefac}.token.regex{color:#d16969}.token.important{color:#90cdff}.token.constant{color:#9cdcfe}.token.class-name{color:#4ec9b0}.token.parameter{color:#9cdcfe}.token.boolean{color:#90cdff}.token.property,.token.variable{color:#9cdcfe}.token.escape,.token.selector{color:#d7ba7d}.token.tag{color:#90cdff}.language-html .token.punctuation,.token.tag .token.punctuation{color:gray}.token.attr-name{color:#9cdcfe}.token.attr-value,.token.attr-value .token.punctuation,code[class*=language-css],pre[class*=language-css]{color:#ce9178}code[class*=language-html],pre[class*=language-html]{color:#eee}pre[class*=language-]>code[class*=language-]{position:relative;z-index:1}code,pre{font-family:Consolas,Menlo,Monaco,"Andale Mono WT","Andale Mono","Lucida Console","Lucida Sans Typewriter","DejaVu Sans Mono","Bitstream Vera Sans Mono","Liberation Mono","Nimbus Mono L","Courier New",Courier,monospace;line-height:1.5}h2>code{font-size:21.78px!important}h3>code{font-size:18.9486px!important}h4>code{font-size:17.05374px!important}:not(pre)>code{border:1px solid #444;background:#6b444245;padding:2px 4px;margin:0 1px;border-radius:3px;font-size:.9rem;color:#fff;word-break:break-word}h2>code,h3>code,h4>code{color:#ddd;padding-right:6px}a>code{color:#ffd479}a:hover>code{color:#ccc}pre,pre[class*=language-]{margin:0 0 27.225px;overflow:auto}pre>code,pre[class*=language-]>code{display:block;padding:14.5px 16.5px 16.5px;background:#2f3240;border:.5px solid #3b3e54;overflow:auto;border-radius:3px;max-height:450px}div.toc{margin-bottom:24.75px;border:1px solid #3b3e54;border-radius:7px;height:fit-content;background:#2f3240;padding:15px 15px 10px 0}div.toc>ol::before{content:"In this note";display:block;padding-bottom:5px;border-bottom:1px solid #555;margin:0 0 15px;font-size:1.18rem;font-family:"Recoleta",Arial,Helvetica,sans-serif}div.toc ol{padding-left:20px;font-size:14.85px;margin-bottom:0;counter-reset:item;list-style-type:none}div.toc ol>li:first-child{margin-top:0}div.toc ol li code{font-size:.85rem;background:#ececec;padding:0 4px 2px}div.toc ol li ol{padding-left:10px}div.toc ol ol{counter-reset:item;list-style-type:none}div.toc ol li::before{content:counters(item,".") ". ";counter-increment:item}div.toc>ol>li ol>li::before{opacity:.7}div.toc>ol>li::before{color:#8cc8ff}@media (min-width:1300px){div.toc{float:right;margin-right:-210px;border-left:none;width:200px;position:-webkit-sticky;position:sticky;top:60px;max-height:70vh;overflow:auto}div.toc ol{margin-top:0;margin-bottom:0}}@media (min-width:1360px){div.toc{margin-right:-230px;width:220px}}@media (min-width:1373px){div.toc{margin-right:-240px;width:220px}}@media (min-width:1400){div.toc{margin-right:-250px;width:230px}}@media (min-width:1450px){div.toc{margin-right:-280px;width:250px}}@media (min-width:1550px){div.toc{margin-right:-310px;width:280px}}.toc-active>a{color:#fff!important}.toc-active::before{opacity:1!important}.page-note img{height:auto;width:100%}.page-note p>img+br{display:none}.page-note p>img+br+em{display:block;text-align:center;margin-top:10px;font-size:.9rem}</style></head><body><header><nav><div id="nav"><a href="/" class="nav-item no-effect"><img alt="home" class="keep-original" src="/img/nav/home.svg" height="18" width="18"> <span>Thi</span> </a><a href="/about/" class="nav-item no-effect"><img alt="about" class="keep-original" src="/img/nav/about.svg" height="15" width="15"> <span>About</span></a><div class="nav-search" id="nav-search"><form><input aria-label="search notes (press &quot;/&quot; to focus &amp; &quot;ESC&quot; to lose)" class="nav-search__input" id="nav-search__input" onfocusin="inFocus(this)" placeholder="search notes (press &quot;/&quot; to focus &amp; &quot;ESC&quot; to lose)" type="search"></form><div id="nav-search__result-container" style="display: none;"><ul id="nav-search__ul"></ul><div id="nav-search__no-result" style="display: none;"><p>No results found.</p></div></div></div><a href="https://github.com/dinhanhthi" class="nav-item no-effect nav-github" target="_blank"><img alt="github" class="keep-original" src="/img/nav/github.svg" height="20" width="20"></a></div><div id="reading-progress" aria-hidden="true"></div></nav><script src="/js/search.js?hash=1aae822ef9" async="" defer=""></script><div class="header-logo"><img alt="11ty + Nunjucks" class="keep-original" src="/img/header/11ty.jpg"></div><h1>11ty + Nunjucks</h1><div id="more-info"><div id="note-tag"><a href="/tags/web-dev">Web Dev</a> <a href="/tags/static-site-generators">Static Site Generators</a> <a href="/tags/11ty">11ty</a></div><div id="last-modified">25-02-2021 / <a href="https://github.com/dinhanhthi/dinhanhthi.com/edit/dev/./posts/web-dev/2020-10-16-11ty-nunjucks.md">Edit on Github</a></div></div></header><main><article><div class="container mt-2 normal page-note"><div class="toc"><ol><li><a href="#installation">Installation #</a><ol><li><a href="#setting-up-with-netlify">Setting up with Netlify #</a></li></ol></li><li><a href="#templating">Templating #</a><ol><li><a href="#scss-to-css">SCSS to CSS #</a></li><li><a href="#nunjucks-inside-css">Nunjucks inside css #</a></li><li><a href="#bootstrap-%2B-11ty">Bootstrap + 11ty #</a></li></ol></li><li><a href="#google-fonts">Google Fonts #</a><ol><li><a href="#layout">Layout #</a><ol><li><a href="#includes">Includes #</a></li><li><a href="#template-inheritance">Template inheritance #</a></li></ol></li><li><a href="#post's-components">Post's components #</a></li><li><a href="#frontmatter">Frontmatter #</a></li><li><a href="#list-of-post">List of post #</a><ol><li><a href="#sort-posts-by-title">Sort posts by title #</a></li></ol></li><li><a href="#posts-by-categories-%2F-tags">Posts by categories / tags #</a><ol><li><a href="#external-posts">External posts #</a></li></ol></li><li><a href="#next-%2F-previous-post">Next / Previous post #</a></li></ol></li><li><a href="#custom-js-scripts">Custom js scripts #</a></li><li><a href="#last-modified-date">Last modified date #</a></li><li><a href="#insert-code-highlight">Insert code highlight #</a><ol><li><a href="#insert-liquid-%2F-nunjuck-code">Insert liquid / nunjuck code #</a></li></ol></li><li><a href="#math-equations">Math equations #</a></li><li><a href="#figures">Figures #</a></li><li><a href="#markdown">Markdown #</a><ol><li><a href="#markdown-it-%26-its-plugins">markdown-it &amp; its plugins #</a></li><li><a href="#custom-container">Custom container #</a></li><li><a href="#markdown-inside-.njk">Markdown inside .njk #</a></li><li><a href="#html%2Fnunjucks-tags-inside-.md">HTML/nunjucks tags inside .md #</a></li><li><a href="#custom-block-shortcodes">Custom block shortcodes #</a></li><li><a href="#custom-inline-shortcodes">Custom inline shortcodes #</a></li></ol></li><li><a href="#search">Search #</a></li><li><a href="#data-files">Data files #</a><ol><li><a href="#local-data-files">Local data files #</a></li><li><a href="#fetched-json-from-an-external-source">Fetched JSON from an external source #</a></li></ol></li><li><a href="#working-style">Working style #</a><ol><li><a href="#custom-environment">Custom environment #</a></li><li><a href="#incremental-build">Incremental build #</a></li></ol></li><li><a href="#nunjucks-things">Nunjucks things #</a></li><li><a href="#errors">Errors #</a></li><li><a href="#references">References #</a></li></ol></div><div class="info"><p>This is not a tutorial to create an 11ty website, this's a note! You can find some <strong>very new and useful</strong> techniques on this note alongside <a href="https://www.11ty.dev/docs/">the official documentation</a>.</p></div><div class="success"><p>This note will be always updated!</p></div><h2 id="installation">Installation <a href="#installation" class="direct-link">#</a></h2><p>ðŸ‘‰ First, install <a href="/nodejs-npm">nodejs</a>.<br>ðŸ‘‰ Using <a href="https://github.com/11ty/eleventy-base-blog">this starter template</a> or <a href="https://github.com/google/eleventy-high-performance-blog">Google's high performance statrer theme</a> (recommended).</p><pre class="language-bash"><code class="language-bash"><span class="token comment"># Install dependencies</span><br><span class="token function">npm</span> <span class="token function">install</span></code></pre><p>Depend on each theme, you should follow the installation steps given in that theme.</p><h3 id="setting-up-with-netlify">Setting up with Netlify <a href="#setting-up-with-netlify" class="direct-link">#</a></h3><p>Sometimes, 11ty takes too much time to build (especially on the task of optimizing images. On my site, it takes almost 10 minutes). You shouldn't use branch <code>master</code> to build you site because every time you make a push, Netlify will rebuild your whole site. You should create and use a new branch, so-called <code>prod</code> instead.</p><div class="hsbox"><div class="hs__title"><strong>Idea 1</strong> -- manually build but should not use many times</div><div class="hs__content"><p>On Netlify, go to <strong>Site settings</strong> &gt; <strong>Build &amp; deploy</strong>:</p><p indent=""></p><ul><li><strong>Build settings</strong>:<ul><li><em>Build command</em>: <code>npm run build</code> (depends on your site)</li><li><em>Publish directory</em>: <strong>_site</strong> (depends on your site)</li><li><em>Builds</em>: <strong>Active builds</strong></li></ul></li><li><strong>Deploy contexts</strong>:<ul><li><em>Production branch</em>: <strong>prod</strong> (the same as the your created branch)</li><li><em>Deploy previews</em>: <strong>Don't deploy pull requests</strong> (you don't want someone pull request and it auto make a deploy)</li><li><em>Branch deploys</em>: <strong>Deploy only the production branch</strong>.</li></ul></li></ul></div></div><p>The weakness of <em>Idea 1</em> is that you let netlify build again your whole site with its resources. That's why it takes too much time! Remember that, you have only 300 free minutes to build.</p><div class="hsbox"><div class="hs__title"><strong>Idea 2</strong> -- build locally and push <code>_site</code> only</div><div class="hs__content"><p>You should know that, even if your site contains only html files, netlify is able to make it live as usual.</p><ol><li><p>Working mainly on branch <code>dev</code> like in Idea 1.</p></li><li><p>Create a branch, so-called <code>_site</code> from <code>dev</code>. In this branch, delete all folders except <code>_site</code>, <code>node_modules</code>, <code>.git</code>, <code>.gitignore</code>.</p></li><li><p>Modify <code>.gitignore</code> (exclude all except <code>_site</code> folder to push to github),</p><pre class="language-bash"><code class="language-bash">/*<br>/*/<br><span class="token operator">!</span>/_site/</code></pre></li><li><p>Now, we tell netlify build our site from branch <code>_site</code> (which contains html files only so it doesn't take time to build anything, it's really fast!)</p><ul><li><strong>Build settings</strong>:<ul><li><em>Base directory</em>: Not set.</li><li><em>Build command</em>: Not set.</li><li><em>Publish directory</em>: _site/</li><li><em>Builds</em>: Active.</li></ul></li><li><strong>Deploy context</strong>:<ul><li><em>Production branch</em>: <em>site</em></li><li><em>Deploy previews</em>: Donâ€™t deploy pull requests</li><li><em>Branch deploys</em>: Deploy only the production branch</li></ul></li></ul></li></ol></div></div><div class="hsbox"><div class="hs__title">Example workflow with <a href="http://dinhanhthi.com">dinhanhthi.com</a></div><div class="hs__content"><p>From the <a href="https://github.com/dinhanhthi/dinhanhthi.com">main repo</a>, I clone to 2 different folders</p><pre class="language-bash"><code class="language-bash"><span class="token operator">|</span>- dinhanhthi.com <span class="token comment"># &lt;- branch "dev"</span><br><span class="token operator">|</span>- dat.com 				<span class="token comment"># &lt;- branch "_site"</span></code></pre><p>On <code>dat.com</code>, I create a script called <code>ud_site.sh</code> which contains,</p><pre class="language-bash"><code class="language-bash"><span class="token class-name builtin">echo</span> <span class="token string">"Start building site"</span><br><span class="token class-name builtin">cd</span> <span class="token punctuation">..</span>/dinhanhthi.com/<br><span class="token function">npm</span> run build<br><span class="token class-name builtin">cd</span> <span class="token punctuation">..</span>/dat.com/<br><span class="token class-name builtin">echo</span> <span class="token string">"Start copying...."</span><br><span class="token function">cp</span> -Rf <span class="token punctuation">..</span>/dinhanhthi.com/_site/* _site/<br><span class="token class-name builtin">echo</span> <span class="token string">"End copying"</span><br><span class="token function">git</span> <span class="token function">add</span> <span class="token class-name builtin">.</span><br><span class="token function">git</span> commit -m <span class="token string">"Updated: <span class="token variable"><span class="token variable">`</span><span class="token function">date</span> +<span class="token string">'%Y-%m-%d %H:%M:%S'</span><span class="token variable">`</span></span>"</span><br><span class="token function">git</span> push</code></pre><p>For covenience, I create an alias in bash shell,</p><pre class="language-bash"><code class="language-bash"><span class="token class-name builtin">alias</span> <span class="token variable assign-left">update_dat</span><span class="token operator">=</span><span class="token string">'cd ~/git/dat.com &amp;&amp; sh ud_site.sh &amp;&amp; cd -1'</span></code></pre><p>From now, whenever I wanna build and deploy my site on netlify, I just run,</p><pre class="language-bash"><code class="language-bash">update_dat</code></pre><p>I saved from 1h of building to 2m of building on netlify with this method!</p></div></div><h2 id="templating">Templating <a href="#templating" class="direct-link">#</a></h2><h3 id="scss-to-css">SCSS to CSS <a href="#scss-to-css" class="direct-link">#</a></h3><div class="hsbox"><div class="hs__title">If you use <a href="https://www.npmjs.com/package/node-sass">node-sass</a></div><div class="hs__content"><div class="col-2-equal"><pre class="language-bash"><code class="language-bash"><span class="token comment"># Folder's structure</span><br>css/main.scss<br>css/components/_fonts.scss <span class="token comment"># with _</span><br>css/components/<span class="token punctuation">..</span><span class="token punctuation">..</span></code></pre><pre class="language-json"><code class="language-json"><span class="token comment">// in main.scss</span><br>@import <span class="token string">"./components/font"</span>; <span class="token comment">// without extension</span><br><br><span class="token comment">// package.json</span><br><span class="token punctuation">{</span><br>  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"js-build"</span><span class="token operator">:</span> <span class="token string">"node-sass css/main.scss -o css"</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre></div><pre class="language-html"><code class="language-html"><span class="token comment">&lt;!-- in &lt;head&gt; --&gt;</span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>css/main.css<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></code></pre></div></div><div class="hsbox"><div class="hs__title">If you use <a href="https://rollupjs.org/guide/en/">rollup</a> (like this site)</div><div class="hs__content"><div class="col-2-equal"><pre class="language-bash"><code class="language-bash"><span class="token comment"># Folder's structure</span><br>css/main.scss<br>css/components/_fonts.scss<br>css/components/<span class="token punctuation">..</span><span class="token punctuation">..</span><br>css/main_input.js</code></pre><pre class="language-json"><code class="language-json"><span class="token comment">// in main.scss</span><br>@import <span class="token string">"./components/font"</span>; <span class="token comment">// without extension</span><br><br><span class="token comment">// package.json</span><br><span class="token punctuation">{</span><br>  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"js-build"</span><span class="token operator">:</span> <span class="token string">"rollup -c rollup.config.js"</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre></div><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> scss <span class="token keyword">from</span> <span class="token string">'rollup-plugin-scss'</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">[</span><br>  <span class="token punctuation">{</span><br>    <span class="token comment">// plugin 1</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token punctuation">{</span><br>    input<span class="token operator">:</span> <span class="token string">'css/main_input.js'</span><span class="token punctuation">,</span> <span class="token comment">// where the input file containing import of main.scss</span><br>    output<span class="token operator">:</span> <span class="token punctuation">{</span><br>      file<span class="token operator">:</span> <span class="token string">'css/main.js'</span><span class="token punctuation">,</span> <span class="token comment">// intermediate file which can be translated to css/main.css</span><br>      format<span class="token operator">:</span> <span class="token string">'esm'</span> <span class="token comment">// still not know</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    plugins<span class="token operator">:</span> <span class="token punctuation">[</span><br>      <span class="token function">scss</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// there are other configs</span><br>    <span class="token punctuation">]</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><pre class="language-html"><code class="language-html"><span class="token comment">&lt;!-- in &lt;head&gt; --&gt;</span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>css/main.css<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></code></pre></div></div><div class="hsbox"><div class="hs__title">If you use <a href="https://parceljs.org">parcel</a></div><div class="hs__content"><div class="col-2-equal"><pre class="language-bash"><code class="language-bash"><span class="token comment"># install</span><br><span class="token function">npm</span> i parcel-bundler<br><span class="token function">npm</span> i npm-run-all -D</code></pre><pre class="language-bash"><code class="language-bash"><span class="token comment"># folder structure</span><br>_assets/css/main.scss<br>___________/_bootstrap.scss<br>_______/js/main.js</code></pre></div><div class="col-2-equal"><pre class="language-bash"><code class="language-bash"><span class="token comment"># main.scss</span><br>@import <span class="token string">"./bootstrap"</span><span class="token punctuation">;</span></code></pre><pre class="language-bash"><code class="language-bash"><span class="token comment"># main.js</span><br><span class="token function">import</span> <span class="token string">"./../css/main.scss"</span><span class="token punctuation">;</span></code></pre></div><pre class="language-bash"><code class="language-bash"><span class="token comment"># package.json</span><br><span class="token string">"scripts"</span><span class="token class-name builtin">:</span> <span class="token punctuation">{</span><br>    <span class="token string">"start"</span><span class="token class-name builtin">:</span> <span class="token string">"npm-run-all --parallel dev:*"</span>,<br>    <span class="token string">"build"</span><span class="token class-name builtin">:</span> <span class="token string">"run-s prod:*"</span>,<br>    <span class="token string">"dev:eleventy"</span><span class="token class-name builtin">:</span> <span class="token string">"eleventy --serve"</span>,<br>    <span class="token string">"dev:parcel"</span><span class="token class-name builtin">:</span> <span class="token string">"parcel watch ./_assets/js/main.js --out-dir ./_site/assets"</span>,<br>    <span class="token string">"prod:eleventy"</span><span class="token class-name builtin">:</span> <span class="token string">"eleventy"</span>,<br>    <span class="token string">"prod:parcel"</span><span class="token class-name builtin">:</span> <span class="token string">"parcel build ./_assets/js/main.js --out-dir ./_site/assets"</span>,<br><span class="token punctuation">}</span>,</code></pre><pre class="language-bash"><code class="language-bash"><span class="token comment"># run</span><br><span class="token function">npm</span> start</code></pre></div></div><h3 id="nunjucks-inside-css">Nunjucks inside css <a href="#nunjucks-inside-css" class="direct-link">#</a></h3><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css"><br><span class="token selector">.bg</span> <span class="token punctuation">{</span><br>  <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span><br><br><span class="token comment">&lt;!-- or --&gt;</span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token language-css style"><span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre><h3 id="bootstrap-%2B-11ty">Bootstrap + 11ty <a href="#bootstrap-%2B-11ty" class="direct-link">#</a></h3><p>ðŸ‘‰ <a href="https://getbootstrap.com">Bootstrap's homepage</a><br>ðŸ‘‰ <a href="https://formden.com/blog/isolate-bootstrap">How to Isolate Bootstrap CSS to Avoid Conflicts (using LESS)</a></p><pre class="language-bash"><code class="language-bash"><span class="token comment"># install</span><br><span class="token function">npm</span> i bootstrap jquery popper.js</code></pre><p>Using alongside with section "<a href="#scss-to-css">SCSS to CSS</a>".</p><div class="col-2-equal"><pre class="language-bash"><code class="language-bash"><span class="token comment"># folder structure</span><br>_assets/css/main.scss<br>_______/vender/_bootstrap.scss</code></pre><pre class="language-scss"><code class="language-scss"><span class="token comment">// main.scss</span><br><span class="token keyword">@import</span> <span class="token string">"./vender/bootstrap"</span><span class="token punctuation">;</span></code></pre></div><pre class="language-scss"><code class="language-scss"><span class="token comment">// _bootstrap.scss</span><br><span class="token comment">// all components</span><br><span class="token comment">// @import "./../../../node_modules/bootstrap/scss/bootstrap.scss";</span><br><br><span class="token comment">// Required</span><br><span class="token comment">// check more: https://getbootstrap.com/docs/4.5/getting-started/theming/#importing</span><br><span class="token keyword">@import</span> <span class="token string">"./../../../node_modules/bootstrap/scss/functions"</span><span class="token punctuation">;</span><br><span class="token keyword">@import</span> <span class="token string">"./../../../node_modules/bootstrap/scss/variables"</span><span class="token punctuation">;</span><br><span class="token keyword">@import</span> <span class="token string">"./../../../node_modules/bootstrap/scss/mixins"</span><span class="token punctuation">;</span></code></pre><h2 id="google-fonts">Google Fonts <a href="#google-fonts" class="direct-link">#</a></h2><ul><li>Put fonts in <code>fonts/</code> and use <a href="http://google-webfonts-helper.herokuapp.com/fonts/open-sans?subsets=latin">this tool</a> to generate <code>.woff</code>, <code>woff2</code> from Google Fonts. <strong>Be careful on the location will be used on your site</strong>.</li><li>Copy and paste to <code>css/main.scss</code>.</li><li>If you have a problem with <code>Content-Security-Policy</code>, check <a href="/for-me-only/#errors%3F">this section</a>.</li></ul><h3 id="layout">Layout <a href="#layout" class="direct-link">#</a></h3><div class="col-2-equal"><pre class="language-bash"><code class="language-bash"><span class="token function">mkdir</span> _includes/layouts<br><span class="token function">touch</span> _includes/layouts/post.njk</code></pre><pre class="language-js"><code class="language-js"><span class="token comment">// create an alias</span><br>module<span class="token punctuation">.</span><span class="token function function-variable">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    eleventyConfig<span class="token punctuation">.</span><span class="token function">addLayoutAlias</span><span class="token punctuation">(</span><span class="token string">'post'</span><span class="token punctuation">,</span> <span class="token string">'layouts/post.njk'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><pre class="language-bash"><code class="language-bash"><span class="token comment"># update changes</span><br><span class="token function">touch</span> .eleventy.js</code></pre><pre class="language-yml"><code class="language-yml"><span class="token comment"># then use</span><br><span class="token punctuation">---</span><br><span class="token atrule key">layout</span><span class="token punctuation">:</span> post<br><span class="token punctuation">---</span></code></pre></div><h4 id="includes">Includes <a href="#includes" class="direct-link">#</a></h4><p>Split layout into parts and include them in the main file.</p><pre class="language-js"><code class="language-js"><span class="token comment">// in _includes/components/head.njk</span><br><span class="token punctuation">{</span><span class="token operator">%</span> include <span class="token string">"components/head.njk"</span> <span class="token operator">%</span><span class="token punctuation">}</span><br><br><span class="token comment">// custom parameter</span><br><span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">set</span> customClass <span class="token operator">=</span> <span class="token string">'list-homepage'</span> <span class="token operator">%</span><span class="token punctuation">}</span><br><span class="token punctuation">{</span><span class="token operator">%</span> include <span class="token string">"postslist.njk"</span> <span class="token operator">%</span><span class="token punctuation">}</span><br><span class="token comment">// inside postlist.njk, just use {{ customClass }}</span><br></code></pre><h4 id="template-inheritance">Template inheritance <a href="#template-inheritance" class="direct-link">#</a></h4><p>Read this <a href="https://mozilla.github.io/nunjucks/templating.html#template-inheritance">tutorial</a>.</p><div class="col-2-equal"><pre class="language-html"><code class="language-html"><span class="token comment">&lt;!-- _includes/layouts/base.njk --&gt;</span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">&gt;</span></span><br>    <br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">&gt;</span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span></code></pre><pre class="language-html"><code class="language-html"><span class="token comment">&lt;!-- _includes/layouts/post.njk --&gt;</span><br>---<br>---<br>{% extends "layouts/base.njk" %}<br><br>{% block headerLogo%}<br>  <span class="token comment">&lt;!-- only appear on post layout --&gt;</span><br>{% endblock %}<br></code></pre></div><h3 id="post's-components">Post's components <a href="#post's-components" class="direct-link">#</a></h3><p>ðŸ‘‰ <a href="https://www.11ty.dev/docs/data-eleventy-supplied/#page-variable-contents">Page variable components</a>.</p><pre class="language-js"><code class="language-js"><span class="token comment">// URL can be used in &lt;a href&gt; to link to other templates</span><br>url<span class="token operator">:</span> <span class="token string">"/current/page/myFile/"</span><span class="token punctuation">,</span><br><br><span class="token comment">// For permalinks: inputPath filename minus template file extension (New in v0.3.4)</span><br>fileSlug<span class="token operator">:</span> <span class="token string">"myFile"</span><span class="token punctuation">,</span><br><br><span class="token comment">// For permalinks: inputPath minus template file extension (New in v0.9.0)</span><br>filePathStem<span class="token operator">:</span> <span class="token string">"/current/page/myFile"</span><span class="token punctuation">,</span><br><br><span class="token comment">// JS Date Object for current page (used to sort collections)</span><br>date<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br><br><span class="token comment">// The path to the original source file for the template</span><br><span class="token comment">// Note: this will include your input directory path!</span><br>inputPath<span class="token operator">:</span> <span class="token string">"./current/page/myFile.md"</span><span class="token punctuation">,</span><br><br><span class="token comment">// Depends on your output directory (the default is _site)</span><br><span class="token comment">// You probably wonâ€™t use this: `url` is better.</span><br>outputPath<span class="token operator">:</span> <span class="token string">"./_site/current/page/myFile/index.html"</span><br><br>templateContent<span class="token operator">:</span> <span class="token comment">//the rendered content of this template. This does not include layout wrappers.</span><br><br>data<span class="token operator">:</span> <span class="token comment">// all data for this piece of content (includes any data inherited from layouts)</span><br><span class="token comment">// self-defined frontmatter tags can be found here</span></code></pre><div class="info"><p>For ones who wanna get only the content (escape HTML tags and special characters) of the post:</p><pre class="language-bash"><code class="language-bash"><span class="token punctuation">{</span><span class="token punctuation">{</span> page.templateContent <span class="token operator">|</span> dump <span class="token operator">|</span> safe <span class="token operator">|</span> striptags<span class="token punctuation">(</span>true<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><br></code></pre></div><h3 id="frontmatter">Frontmatter <a href="#frontmatter" class="direct-link">#</a></h3><div class="col-2-equal"><pre class="language-yml"><code class="language-yml"><span class="token punctuation">---</span><br><span class="token atrule key">title</span><span class="token punctuation">:</span> Title of the post<br><span class="token atrule key">description</span><span class="token punctuation">:</span> description of the post<br><span class="token atrule key">date</span><span class="token punctuation">:</span> <span class="token number datetime">2020-09-11</span><br><span class="token atrule key">layout</span><span class="token punctuation">:</span> layouts/post.njk<br><span class="token punctuation">---</span></code></pre><pre class="language-yml"><code class="language-yml"><span class="token punctuation">---</span><br><span class="token atrule key">tags</span><span class="token punctuation">:</span><br>  <span class="token punctuation">-</span> default<br><span class="token comment"># or</span><br><span class="token atrule key">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>tag 1<span class="token punctuation">,</span> tag 2<span class="token punctuation">]</span><br><span class="token punctuation">---</span></code></pre></div><h3 id="list-of-post">List of post <a href="#list-of-post" class="direct-link">#</a></h3><p>Normal,</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><br>{% for post in collections.posts %}<br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{ post.url | url }}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br>      {{ post.data.title }}<br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><br>{% endfor %}<br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span><br></code></pre><div class="info"><p>Other default variable (like <code>post.url</code>) can be found <a href="https://www.11ty.dev/docs/data-eleventy-supplied/#page-variable-contents">here</a>. Note that, you can use <code>page.templateContent</code> for the content of a page in some collections (not tested yet but you can try!<sup><a href="https://www.11ty.dev/docs/collections/" target="_blank" rel="noopener noreferrer">[ref]</a></sup>).</p></div><h4 id="sort-posts-by-title">Sort posts by title <a href="#sort-posts-by-title" class="direct-link">#</a></h4><pre class="language-html"><code class="language-html"><span class="token comment">&lt;!-- Create a new list --&gt;</span><br>{% set newPostList = [] %}<br>{% for post in collections.posts %}<br>  {% set newPostList = (newPostList.push({title: post.data.title, url: post.url}), newPostList) %}<br>{% endfor %}<br><br><span class="token comment">&lt;!-- list of post by alphabet --&gt;</span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><br>{% for post in newPostList|sort(attribute='title') %}<br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{ post.url | url }}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br>      {{ post.title }}<br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><br>{% endfor %}<br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span><br></code></pre><h3 id="posts-by-categories-%2F-tags">Posts by categories / tags <a href="#posts-by-categories-%2F-tags" class="direct-link">#</a></h3><p>In this case, <mark>we consider a category as the first tag</mark> of a post. For example, if a post has tags <code>tags: [tag 1, tag 2, tag 3]</code>, then <code>tag 1</code> will be its category!</p><div class="col-2-equal"><pre class="language-json"><code class="language-json"><span class="token comment">// _data/categories.json</span><br><span class="token punctuation">[</span><br>	<span class="token punctuation">{</span><br>		<span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Cat 1"</span><span class="token punctuation">,</span><br>		<span class="token property">"icon"</span><span class="token operator">:</span> <span class="token string">"/img/cats/cat_1.svg"</span><br>	<span class="token punctuation">}</span><span class="token punctuation">,</span><br>	<span class="token punctuation">{</span><br>		<span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Cat 2"</span><span class="token punctuation">,</span><br>		<span class="token property">"icon"</span><span class="token operator">:</span> <span class="token string">"/img/cats/cat_2.svg"</span><br>	<span class="token punctuation">}</span><br><span class="token punctuation">]</span></code></pre><pre class="language-html"><code class="language-html">{% for item in categories %}<br>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>category-wrapper<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>{{ item.icon }} {{ item.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><br>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post-list<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br>			{% for post in collections[item.name] %}<br>				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post-item<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br>					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{ post.url }}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>{{ post.data.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><br>				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><br>			{% endfor %}<br>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span><br>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><br>{% endfor %}<br></code></pre></div><h4 id="external-posts">External posts <a href="#external-posts" class="direct-link">#</a></h4><p>If you wanna add external posts (not generated by 11ty from <code>.md</code> files), do below steps. For example, on this site, I cretae some pages created by <a href="https://www.notion.so/">Notion</a> and I wanna add them to category <code>MOOC</code>.</p><p><strong>Remark</strong>: This section is used with <a href="#posts-by-categories-%2F-tags">section "posts by categories"</a> and <a href="#sort-posts-by-title">section "sort posts by title"</a>.</p><pre class="language-json"><code class="language-json"><span class="token comment">// _data/cat_ex_posts.json</span><br><span class="token punctuation">[</span><br>	<span class="token punctuation">{</span><br>		<span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"DL4 - Convolutional Neural Network (CNN)"</span><span class="token punctuation">,</span><br>		<span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://www.notion.so/dinhanhthi/CNN-by-deeplearning-ai-a081d253fc2c4c0b99edd2757c759b9e"</span><span class="token punctuation">,</span><br>		<span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"MOOC"</span><span class="token punctuation">,</span> <span class="token string">"Deep Learning"</span><span class="token punctuation">]</span><br>	<span class="token punctuation">}</span><span class="token punctuation">,</span><br>	<span class="token punctuation">{</span><br>		<span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"DL5 - Sequence models"</span><span class="token punctuation">,</span><br>		<span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://www.notion.so/dinhanhthi/CNN-by-deeplearning-ai-a081d253fc2c4c0b99edd2757c759b9e"</span><span class="token punctuation">,</span><br>		<span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"MOOC"</span><span class="token punctuation">,</span> <span class="token string">"Deep Learning"</span><span class="token punctuation">]</span><br>	<span class="token punctuation">}</span><span class="token punctuation">,</span><br>	<span class="token punctuation">{</span><br>		<span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"NLP by HSE"</span><span class="token punctuation">,</span><br>		<span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://www.notion.so/dinhanhthi/NLP-by-HSE-20cec3e92201475eb4d48787954f3aa4"</span><span class="token punctuation">,</span><br>		<span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"MOOC"</span><span class="token punctuation">,</span> <span class="token string">"NLP"</span><span class="token punctuation">]</span><br>	<span class="token punctuation">}</span><br><span class="token punctuation">]</span></code></pre><pre class="language-html"><code class="language-html">{% for item in categories %}<br>	{% set postslist = collections[item.name] %}<br><br>	{% set newPostListCat = [] %}<br>	{% for post in cat_ex_posts %}<br>		{% for tg in post.tags %}<br>			{% if tg == item.name %}<br>				{% set more_post = true %}<br>				{% set newPostListCat = (newPostListCat.push({title: post.title, url: post.url, tags: post.tags}), newPostListCat) %}<br>			{% endif %}<br>		{% endfor %}<br>	{% endfor %}<br><br>	{% set newPostList = [] %}<br><br>	{% for post in postslist %}<br>		{% set newPostList = (newPostList.push({title: post.data.title, url: post.url}), newPostList) %}<br>	{% endfor %}<br><br>	{% if more_post %}<br>		{% for post in newPostListCat %}<br>			{% set newPostList = (newPostList.push({title: post.title, url: post.url, tags: post.tags}), newPostList) %}<br>		{% endfor %}<br>	{% endif %}<br><br>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>category-wrapper<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>{{ item.icon }} {{ item.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><br>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post-list<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br>		{% for post in newPostList %}<br>			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post-item<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br>				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{ post.url }}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>{{ post.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><br>			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><br>		{% endfor %}<br>		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span><br>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><br>{% endfor %}<br></code></pre><h3 id="next-%2F-previous-post">Next / Previous post <a href="#next-%2F-previous-post" class="direct-link">#</a></h3><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><br>  {%- set nextPost = collections.posts | getNextCollectionItem(page) %}<br>  {%- if nextPost %}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Next: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{ nextPost.url | url }}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>{{ nextPost.data.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>{% endif %}<br>  {%- set previousPost = collections.posts | getPreviousCollectionItem(page) %}<br>  {%- if previousPost %}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Previous: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{ previousPost.url | url }}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>{{ previousPost.data.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>{% endif %}<br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span><br></code></pre><h2 id="custom-js-scripts">Custom js scripts <a href="#custom-js-scripts" class="direct-link">#</a></h2><div class="col-2-equal"><pre class="language-bash"><code class="language-bash"><span class="token comment"># Put scripts in</span><br><span class="token comment"># /src/main.js</span></code></pre><pre class="language-html"><code class="language-html"><span class="token comment">&lt;!-- in &lt;head&gt; --&gt;</span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">async</span> <span class="token attr-name">defer</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{ <span class="token punctuation">'</span>/js/min.js<span class="token punctuation">'</span> | addHash }}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><br></code></pre></div><p>Using <a href="https://rollupjs.org/">rollupjs</a>,</p><pre class="language-js"><code class="language-js"><span class="token comment">// rollup.config.js</span><br><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">[</span><br>  <span class="token punctuation">{</span><br>    input<span class="token operator">:</span> <span class="token string">"src/main.js"</span><span class="token punctuation">,</span><br>    output<span class="token operator">:</span> <span class="token punctuation">[</span><br>      <span class="token punctuation">{</span><br>        file<span class="token operator">:</span> <span class="token string">"js/min.js"</span><span class="token punctuation">,</span><br>        format<span class="token operator">:</span> <span class="token string">"iife"</span><span class="token punctuation">,</span><br>        sourcemap<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>        plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">terser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>      <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><h2 id="last-modified-date">Last modified date <a href="#last-modified-date" class="direct-link">#</a></h2><pre class="language-js"><code class="language-js"><span class="token comment">// .eleventy.js</span><br><span class="token keyword">const</span> <span class="token punctuation">{</span> DateTime <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"luxon"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>module<span class="token punctuation">.</span><span class="token function function-variable">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  eleventyConfig<span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token string">"readableDate"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">dateObj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> DateTime<span class="token punctuation">.</span><span class="token function">fromJSDate</span><span class="token punctuation">(</span>dateObj<span class="token punctuation">,</span> <span class="token punctuation">{</span> zone<span class="token operator">:</span> <span class="token string">"utc"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFormat</span><span class="token punctuation">(</span><br>      <span class="token string">"dd LLL yyyy"</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token comment">// https://html.spec.whatwg.org/multipage/common-microsyntaxes.html#valid-date-string</span><br>  eleventyConfig<span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token string">"htmlDateString"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">dateObj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> DateTime<span class="token punctuation">.</span><span class="token function">fromJSDate</span><span class="token punctuation">(</span>dateObj<span class="token punctuation">,</span> <span class="token punctuation">{</span> zone<span class="token operator">:</span> <span class="token string">"utc"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFormat</span><span class="token punctuation">(</span><span class="token string">"dd-LL-yyyy"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  eleventyConfig<span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token string">"sitemapDateTimeString"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">dateObj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> dt <span class="token operator">=</span> DateTime<span class="token punctuation">.</span><span class="token function">fromJSDate</span><span class="token punctuation">(</span>dateObj<span class="token punctuation">,</span> <span class="token punctuation">{</span> zone<span class="token operator">:</span> <span class="token string">"utc"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>dt<span class="token punctuation">.</span>isValid<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">return</span> dt<span class="token punctuation">.</span><span class="token function">toISO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><p>Last modified date,</p><pre class="language-html"><code class="language-html">{{ page.inputPath | lastModifiedDate  | htmlDateString }}<br></code></pre><h2 id="insert-code-highlight">Insert code highlight <a href="#insert-code-highlight" class="direct-link">#</a></h2><p><strong>Code syntax highlight</strong>: Need <a href="https://www.11ty.dev/docs/plugins/syntaxhighlight/">this plugin</a>. List of <a href="https://prismjs.com/#languages-list">supported languages</a>.</p><div class="col-2-equal"><pre class="language-markdown"><code class="language-markdown"><span class="token important title"><span class="token punctuation">#</span> Highlight line 2</span><br><span class="token code"><span class="token punctuation">```</span><span class="token code-language"> js/2</span><br><span class="token code-block language-js"><span class="token comment">// lines of codes</span></span><br><span class="token punctuation">```</span></span></code></pre><pre class="language-markdown"><code class="language-markdown"><span class="token important title"><span class="token punctuation">#</span> Highlight line 2 to 4</span><br><span class="token code"><span class="token punctuation">```</span><span class="token code-language"> js/2-4</span><br><span class="token code-block language-js"><span class="token comment">// lines of codes</span></span><br><span class="token punctuation">```</span></span></code></pre><pre class="language-markdown"><code class="language-markdown"><span class="token important title"><span class="token punctuation">#</span> Highlight line 2, 4</span><br><span class="token code"><span class="token punctuation">```</span><span class="token code-language"> js/2,4</span><br><span class="token code-block language-js"><span class="token comment">// lines of codes</span></span><br><span class="token punctuation">```</span></span></code></pre><pre class="language-markdown"><code class="language-markdown"><span class="token important title"><span class="token punctuation">#</span> Delete line 2 (red highlight)</span><br><span class="token important title"><span class="token punctuation">#</span> and add line 4 (green highlight)</span><br><span class="token code"><span class="token punctuation">```</span><span class="token code-language"> js/4/2</span><br><span class="token code-block language-js"><span class="token comment">// lines of codes</span></span><br><span class="token punctuation">```</span></span></code></pre></div><h3 id="insert-liquid-%2F-nunjuck-code">Insert liquid / nunjuck code <a href="#insert-liquid-%2F-nunjuck-code" class="direct-link">#</a></h3><p>Inline code, put <code>{% raw %}</code> and <code>{% endraw %}</code> around the keyword.</p><p>Code block,</p><pre class="language-js"><code class="language-js"><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span> js <span class="token punctuation">{</span><span class="token operator">%</span> raw <span class="token operator">%</span><span class="token punctuation">}</span><br><span class="token comment">// line of codes</span><br><span class="token punctuation">{</span><span class="token operator">%</span> endraw <span class="token operator">%</span><span class="token punctuation">}</span><br><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span></code></pre><h2 id="math-equations">Math equations <a href="#math-equations" class="direct-link">#</a></h2><div class="hsbox"><div class="hs__title">KaTeX: Use <code>markdown-it-katex</code></div><div class="hs__content"><p>Using <a href="https://github.com/iktakahiro/markdown-it-katex/">markdown-it-katex</a> (use this version only),</p><pre class="language-js"><code class="language-js"><span class="token comment">// .eleventy.js</span><br><span class="token keyword">const</span> markdownIt <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"markdown-it"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> markdownItKatex <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@iktakahiro/markdown-it-katex'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">let</span> markdownLibrary <span class="token operator">=</span> <span class="token function">markdownIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>markdownLibrary<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>markdownItKatex<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class="language-html"><code class="language-html"><span class="token comment">&lt;!-- inside &lt;head&gt; --&gt;</span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></code></pre><p>ðŸ’¡ <strong>Some tips</strong>: working with KaTeX</p><div class="col-2-equal"><pre class="language-bash"><code class="language-bash"><span class="token comment"># working</span><br><span class="token variable">$$</span><br><span class="token punctuation">\</span>dfrac<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span><br><span class="token variable">$$</span></code></pre><pre class="language-bash"><code class="language-bash"><span class="token comment"># not working</span><br>- Item<br><br>	<span class="token variable">$$</span><br>	<span class="token punctuation">\</span>dfrac<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span><br>	<span class="token variable">$$</span><br>- Item</code></pre><pre class="language-bash"><code class="language-bash"><span class="token comment"># working again</span><br>- Item<br><br>  <span class="token variable">$$</span><span class="token punctuation">\</span>dfrac<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token variable">$$</span> <span class="token comment"># without \n</span><br>- Item<br></code></pre></div></div></div><p>In this site, I use <a href="https://www.npmjs.com/package/markdown-it-texmath"><code>markdown-it-texmath</code></a>. I choose this because we can overcome the weakness of <code>markdown-it-katex</code> in case of breaking lines in list mode &amp; it's <a href="https://goessner.github.io/markdown-it-texmath/index.html">more flexible</a> (you can try it online <a href="https://goessner.github.io/markdown-it-texmath/markdown-it-texmath-demo.html">here</a>).</p><p><strong>An important note</strong>: the original version has a problem of whitespace before and after <code>&lt;eq&gt;</code> tag in the inline mode. That why instead of seeing <code>aaa x aaa</code> with <code>aaa $x$ aaa</code>, we see <code>aaaxaaa</code>. I've changed (and reported <a href="https://github.com/goessner/markdown-it-texmath/issues/25">an issue</a>). For a moment, I use a modified version <a href="https://github.com/dinhanhthi/markdown-it-texmath">here</a>.</p><pre class="language-bash"><code class="language-bash"><span class="token comment"># Install</span><br><span class="token comment"># npm i markdown-it-texmath --save-dev # original, whitespace problem</span><br><span class="token function">npm</span> i git+https://github.com/dinhanhthi/markdown-it-texmath.git --save-dev</code></pre><pre class="language-js"><code class="language-js"><span class="token comment">// .eleventy.js</span><br>tm <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'markdown-it-texmath'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>md <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'markdown-it'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>tm<span class="token punctuation">,</span> <span class="token punctuation">{</span> engine<span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'katex'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>										delimiters<span class="token operator">:</span><span class="token string">'dollars'</span><span class="token punctuation">,</span><br>										katexOptions<span class="token operator">:</span> <span class="token punctuation">{</span> macros<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">"\\RR"</span><span class="token operator">:</span> <span class="token string">"\\mathbb{R}"</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><br>										<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="hsbox"><div class="hs__title">ðŸ’¡ If you wanna modify yourself <code>markdown-it-texmath</code></div><div class="hs__content"><p>Copy the cloned folder <code>markdown-it-temath</code> (except <code>.git</code>, <code>.gitignore</code>, <code>test/</code>, <code>package-lock.json</code>) to a so-called <code>/third-party/</code> folder in your project. In <code>.eleventy.js</code>, you import it as</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> tm <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./third_party/markdown-it-texmath'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div><pre class="language-html"><code class="language-html"><span class="token comment">&lt;!-- Add in &lt;head&gt; --&gt;</span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span>  <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br><br><span class="token comment">&lt;!-- Save to local and modify (or just use) --&gt;</span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></code></pre><p><strong>Mathjax</strong>: using <a href="https://github.com/classeur/markdown-it-mathjax">markdown-it-mathjax</a></p><h2 id="figures">Figures <a href="#figures" class="direct-link">#</a></h2><div class="col-2-equal"><pre class="language-bash"><code class="language-bash"><span class="token comment"># Insert normally,</span><br><span class="token operator">!</span><span class="token punctuation">[</span>description<span class="token punctuation">]</span><span class="token punctuation">(</span>/path/to/image<span class="token punctuation">)</span><br><span class="token punctuation">{</span>% enraw %<span class="token punctuation">}</span></code></pre><pre class="language-bash"><code class="language-bash"><span class="token comment"># With custom classes (using markdown-it-attrs)</span><br><span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>:.custom-class<span class="token punctuation">}</span></code></pre></div><h2 id="markdown">Markdown <a href="#markdown" class="direct-link">#</a></h2><h3 id="markdown-it-%26-its-plugins">markdown-it &amp; its plugins <a href="#markdown-it-%26-its-plugins" class="direct-link">#</a></h3><p>We use <a href="https://github.com/markdown-it/markdown-it">markdown-it</a> and <a href="https://www.npmjs.com/search?q=keywords:markdown-it-plugin">its plugins</a>.</p><div class="hsbox"><div class="hs__title">My choices of useful plugins</div><div class="hs__content"><p>Just use <code>npm i &lt;plugin-name&gt; --save-dev</code> to install.</p><pre class="language-js"><code class="language-js"><span class="token comment">// .eleventy.js</span><br><span class="token keyword">const</span> markdownIt <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"markdown-it"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>module<span class="token punctuation">.</span><span class="token function function-variable">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">let</span> markdownLibrary <span class="token operator">=</span> <span class="token function">markdownIt</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>    html<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// html tag inside source</span><br>    breaks<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// use '\n' as &lt;br&gt;</span><br>    linkify<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Autoconvert URL-like text to links</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"markdown-it-anchor"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><br>      permalink<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>      permalinkClass<span class="token operator">:</span> <span class="token string">"direct-link"</span><span class="token punctuation">,</span><br>      permalinkSymbol<span class="token operator">:</span> <span class="token string">"#"</span><span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'markdown-it-mark'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// ==mark==</span><br>    <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'markdown-it-attrs'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">// use {:} options</span><br>      leftDelimiter<span class="token operator">:</span> <span class="token string">'{:'</span><span class="token punctuation">,</span><br>      rightDelimiter<span class="token operator">:</span> <span class="token string">'}'</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"markdown-it-emoji"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// emoji</span><br>    <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"markdown-it-table-of-contents"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [[toc]] (no spaces)</span><br>    <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@iktakahiro/markdown-it-katex'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// katex</span><br>    <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"markdown-it-task-lists"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// tasks [x]</span><br>    <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'markdown-it-container'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'success'</span><span class="token punctuation">)</span> <span class="token comment">// use `::: success` bock to create a custom div</span><br>    <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'markdown-it-kbd'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [[Ctrl]]</span><br>    <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'markdown-it-footnote'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@gerhobbelt/markdown-it-inline-text-color'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>    <span class="token punctuation">;</span><br>  eleventyConfig<span class="token punctuation">.</span><span class="token function">setLibrary</span><span class="token punctuation">(</span><span class="token string">"md"</span><span class="token punctuation">,</span> markdownLibrary<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre></div></div><div class="hsbox"><div class="hs__title">How to use markdown-it's plugins in 11ty?</div><div class="hs__content"><p>Below are an example of inserting 2 plugins,</p><pre class="language-js"><code class="language-js"><span class="token comment">// .eleventy.js</span><br><span class="token comment">// An example of using plugins</span><br><span class="token keyword">const</span> markdownIt <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"markdown-it"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">var</span> markdownItp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'markdown-it'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>module<span class="token punctuation">.</span><span class="token function function-variable">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">let</span> markdownLibrary <span class="token operator">=</span> <span class="token function">markdownIt</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>    html<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// html tag inside source</span><br>    breaks<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// use '\n' as &lt;br&gt;</span><br>    linkify<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Autoconvert URL-like text to links</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"markdown-it-emoji"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// emoji</span><br>    <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"markdown-it-table-of-contents"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [[toc]] (no spaces)</span><br>    <span class="token punctuation">;</span><br>  eleventyConfig<span class="token punctuation">.</span><span class="token function">setLibrary</span><span class="token punctuation">(</span><span class="token string">"md"</span><span class="token punctuation">,</span> markdownLibrary<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre></div></div><h3 id="custom-container">Custom container <a href="#custom-container" class="direct-link">#</a></h3><p>If you wanna create an <strong>advanced custom container</strong>, use plugin <code>markdown-it-container</code>. For example, you want export something like,</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hsbox<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hs__title<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br>    <span class="token comment">&lt;!-- Custom Title --&gt;</span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hs__content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br>    <span class="token comment">&lt;!-- Custom markdown texts --&gt;</span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre><p>Just by using,</p><pre class="language-html"><code class="language-html">::: hsbox Custom Title<br>Custom markdown texts<br>:::<br></code></pre><p>You can put in <code>.eleventy.js</code> like,</p><pre class="language-js"><code class="language-js"><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'markdown-it-container'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'hsbox'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><br>  <span class="token function function-variable">validate</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> params<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token language-regex regex-source">^hsbox\s+(.*)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token function function-variable">render</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">tokens<span class="token punctuation">,</span> idx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">var</span> m <span class="token operator">=</span> tokens<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">.</span>info<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token language-regex regex-source">^hsbox\s+(.*)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>tokens<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">.</span>nesting <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token comment">// opening tag</span><br>      <span class="token keyword">return</span> <span class="token string">'&lt;div class="hsbox"&gt;&lt;div class="hs__title"&gt;'</span><br>        <span class="token operator">+</span> markdownItp<span class="token punctuation">.</span><span class="token function">renderInline</span><span class="token punctuation">(</span>m<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br>        <span class="token operator">+</span> <span class="token string">'&lt;/div&gt;&lt;div class="hs__content"&gt;'</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>      <span class="token comment">// closing tag</span><br>      <span class="token keyword">return</span> <span class="token string">'&lt;/div&gt;&lt;/div&gt;'</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h3 id="markdown-inside-.njk">Markdown inside <code>.njk</code> <a href="#markdown-inside-.njk" class="direct-link">#</a></h3><div class="col-2-equal"><pre class="language-js"><code class="language-js"><span class="token comment">// .eleventy.js</span><br><br>module<span class="token punctuation">.</span><span class="token function function-variable">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  eleventyConfig<span class="token punctuation">.</span><span class="token function">addPairedShortcode</span><span class="token punctuation">(</span><span class="token string">"markdown"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span> inline <span class="token operator">=</span> <span class="token keyword">null</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> inline<br>      <span class="token operator">?</span> markdownLibrary<span class="token punctuation">.</span><span class="token function">renderInline</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><br>      <span class="token operator">:</span> markdownLibrary<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><pre class="language-html"><code class="language-html">{% markdown %}<br><span class="token comment">&lt;!-- html tags --&gt;</span><br><span class="token comment">&lt;!-- no need spaces before/after --&gt;</span><br>{% endmarkdown %}<br></code></pre></div><h3 id="html%2Fnunjucks-tags-inside-.md">HTML/nunjucks tags inside <code>.md</code> <a href="#html%2Fnunjucks-tags-inside-.md" class="direct-link">#</a></h3><div class="col-2-equal"><pre class="language-html"><code class="language-html"><span class="token comment">&lt;!-- not working --&gt;</span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><br>  __abc__<br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre><pre class="language-html"><code class="language-html"><span class="token comment">&lt;!-- working --&gt;</span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><br><br>  __abc__<br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre><pre class="language-html"><code class="language-html"><span class="token comment">&lt;!-- not working --&gt;</span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-of<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br>  <br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre><pre class="language-html"><code class="language-html"><span class="token comment">&lt;!-- working --&gt;</span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-of<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre></div><h3 id="custom-block-shortcodes">Custom block shortcodes <a href="#custom-block-shortcodes" class="direct-link">#</a></h3><div class="col-2-equal"><div><p>To creata the same code block like above, i.e.,</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hsbox<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hs__title<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br>    <span class="token comment">&lt;!-- Custom Title --&gt;</span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hs__content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br>    <span class="token comment">&lt;!-- Custom markdown texts --&gt;</span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre></div><div><p>Just by using,</p><pre class="language-html"><code class="language-html">{% hsbox "Custom Title" %}<br><span class="token comment">&lt;!-- Custom markdown texts --&gt;</span><br>{% endhsbox %}<br></code></pre></div></div><pre class="language-js"><code class="language-js"><span class="token comment">// .eleventy.js</span><br><br>module<span class="token punctuation">.</span><span class="token function function-variable">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  eleventyConfig<span class="token punctuation">.</span><span class="token function">addPairedShortcode</span><span class="token punctuation">(</span><span class="token string">"hsbox"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span> title</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token string">'&lt;div class="hsbox"&gt;&lt;div class="hs__title"&gt;'</span><br>      <span class="token operator">+</span> markdownLibrary<span class="token punctuation">.</span><span class="token function">renderInline</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'&lt;/div&gt;&lt;div class="hs__content"&gt;'</span><br>      <span class="token operator">+</span> markdownLibrary<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'&lt;/div&gt;&lt;/div&gt;'</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><h3 id="custom-inline-shortcodes">Custom inline shortcodes <a href="#custom-inline-shortcodes" class="direct-link">#</a></h3><p>If you wanna export something like,</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>custom-url<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>ref<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span></code></pre><p>by using <code>{% ref "custom-url" %}</code> (<code>""</code> is required). You can set,</p><pre class="language-js"><code class="language-js"><span class="token comment">// .eleventy.js</span><br><br>module<span class="token punctuation">.</span><span class="token function function-variable">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  eleventyConfig<span class="token punctuation">.</span><span class="token function">addShortcode</span><span class="token punctuation">(</span><span class="token string">"ref"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token string">'&lt;sup&gt;&lt;a href="'</span><br>      <span class="token operator">+</span> url<br>      <span class="token operator">+</span> <span class="token string">'" rel="noopener noreferrer" target="_blank"&gt;[ref]&lt;/a&gt;&lt;/sup&gt;'</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><h2 id="search">Search <a href="#search" class="direct-link">#</a></h2><p>For me, the best choice for search feature in 11ty is using <a href="http://elasticlunr.com/">Elasticlunr</a> with some customizations.</p><div class="hsbox"><div class="hs__title">Why not others?</div><div class="hs__content"><p>Based on the purpose of <strong>free</strong>, <strong>quick</strong>, <strong>full text</strong> search:</p><ul><li>We don't choose Google's <a href="https://programmablesearchengine.google.com/">Programmable Search</a> because: it contains ads, not index as we want, difficult to customize with personal theme,...</li><li>We don't choose paid options like <a href="https://www.algolia.com/">Agolia</a> because the free option contains very few units. It's absolutely not enough for your need. In case you still want to use it with less consumption, read <a href="https://www.kizu.ru/algolia-search/">this article</a>.</li></ul></div></div><p>Because your site becomes bigger in future, you cannot index the whole text of your site (every time you build). <strong>My idea</strong> is to create a custom frontmatter tag called "keywords" which contains all of the important keywords used to determine the content of your posts. Of course, the cons is that you have to put the keywords manually!!</p><p>Check <a href="https://github.com/dinhanhthi/eleventy-search-demo">this repository</a>, I've pulled and modified from <a href="https://github.com/duncanmcdougall/eleventy-search-demo">this one</a> (The author takes so long to check my pull request ^^). My customization supports:</p><ul><li>Index your customizable keywords.</li><li>Fix UX bugs in the main repo.</li><li>Highlight found keywords in the search result.</li><li>Limit the max number of texts in the result (show around the found keywords).</li><li>Adapt to the newest version of 11ty.</li></ul><h2 id="data-files">Data files <a href="#data-files" class="direct-link">#</a></h2><h3 id="local-data-files">Local data files <a href="#local-data-files" class="direct-link">#</a></h3><pre class="language-js"><code class="language-js"><span class="token comment">// .eleventy.js</span><br>module<span class="token punctuation">.</span><span class="token function function-variable">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><br>  <span class="token keyword">return</span> <span class="token punctuation">{</span><br>    dir<span class="token operator">:</span> <span class="token punctuation">{</span><br>      input<span class="token operator">:</span> <span class="token string">"."</span><span class="token punctuation">,</span><br>      includes<span class="token operator">:</span> <span class="token string">"_includes"</span><span class="token punctuation">,</span><br>      data<span class="token operator">:</span> <span class="token string">"_data"</span><span class="token punctuation">,</span><br>      output<span class="token operator">:</span> <span class="token string">"_site"</span><span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>You put all your data files (<code>.js</code> or <code>.json</code>) in <code>_data</code>, e.g.,</p><div class="col-2-equal"><pre class="language-json"><code class="language-json"><span class="token comment">// _data/dataUrls.json</span><br><span class="token punctuation">[</span><br>  <span class="token punctuation">{</span><br>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"abc"</span><span class="token punctuation">,</span><br>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"http://abc.com"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token punctuation">{</span><br>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"xyz"</span><span class="token punctuation">,</span><br>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"http://xyz.com"</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">]</span></code></pre><pre class="language-html"><code class="language-html"><span class="token comment">&lt;!-- in a .njk file --&gt;</span><br>{% for item in dataUrls %}<br>  {{ item.name }}<br>  {{ item.url }}<br>{% endfor %}<br></code></pre></div><div class="col-2-equal"><pre class="language-json"><code class="language-json"><span class="token comment">// _data/cat_icon.json</span><br><span class="token punctuation">{</span><br>	<span class="token property">"Project-based Learning"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>		<span class="token property">"svg"</span><span class="token operator">:</span> <span class="token string">"/img/cats/project.svg"</span><br>	<span class="token punctuation">}</span><span class="token punctuation">,</span><br>	<span class="token property">"MOOC"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>		<span class="token property">"svg"</span><span class="token operator">:</span> <span class="token string">"/img/cats/mooc.svg"</span><br>	<span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token comment">// .eleventy.js</span><br><span class="token keyword">const</span> catIcon <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"./_data/cat_icon.json"</span><span class="token punctuation">)</span><br><span class="token comment">// usage</span><br>catIcon<span class="token punctuation">[</span>page<span class="token punctuation">.</span>data<span class="token punctuation">.</span>tags<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>svg<span class="token punctuation">,</span><br><br><span class="token comment">// .njk</span><br>catIcon<span class="token punctuation">[</span>page<span class="token punctuation">.</span>data<span class="token punctuation">.</span>tags<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>svg<span class="token punctuation">,</span></code></pre></div><p>For example, export a <strong>current year</strong> on site,</p><div class="col-2-equal"><pre class="language-js"><code class="language-js"><span class="token comment">// _data/helpers.js</span><br>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><br>  <span class="token function">currentYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> today <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">return</span> today<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><pre class="language-html"><code class="language-html"><span class="token comment">&lt;!-- in a .njk file --&gt;</span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ helpers.currentYear() }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><br></code></pre></div><h3 id="fetched-json-from-an-external-source">Fetched JSON from an external source <a href="#fetched-json-from-an-external-source" class="direct-link">#</a></h3><p>For example, <a href="/good-github-repositories/">this post</a> displays a list of starred github repositories (by me) which is fetched from <code>https://api.github.com/users/dinhanhthi/starred</code>.</p><pre class="language-js"><code class="language-js"><span class="token comment">// in .eleventy.js</span><br>module<span class="token punctuation">.</span><span class="token function function-variable">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>	eleventyConfig<span class="token punctuation">.</span><span class="token function">addShortcode</span><span class="token punctuation">(</span><span class="token string">"list_repos"</span><span class="token punctuation">,</span> getLiList<span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getRepoData</span><span class="token punctuation">(</span><span class="token parameter">_url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>		<span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>_url<span class="token punctuation">)</span><span class="token punctuation">;</span><br>		<span class="token keyword">return</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token punctuation">}</span><br>	<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getLiList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>		<span class="token keyword">function</span> <span class="token function">compare</span><span class="token punctuation">(</span> <span class="token parameter">a<span class="token punctuation">,</span> b</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			<span class="token keyword">if</span> <span class="token punctuation">(</span> a<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span><br>				<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><br>			<span class="token punctuation">}</span><br>			<span class="token keyword">if</span> <span class="token punctuation">(</span> a<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> b<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span><br>				<span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span><br>			<span class="token punctuation">}</span><br>			<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><br>		<span class="token punctuation">}</span><br>		<span class="token comment">// escape HTML tags</span><br>		<span class="token keyword">function</span> <span class="token function">htmlEntities</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>				<span class="token keyword">return</span> <span class="token function">String</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token language-regex regex-source">&amp;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'&amp;amp;'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token language-regex regex-source">&lt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'&amp;lt;'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token language-regex regex-source">&gt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'&amp;gt;'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token language-regex regex-source">"</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'&amp;quot;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>		<span class="token punctuation">}</span><br>		<span class="token keyword">var</span> repos <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span><br>		<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getRepoData</span><span class="token punctuation">(</span><span class="token string">"https://api.github.com/users/dinhanhthi/starred?page=1&amp;per_page=10000"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>		data<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>compare<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">obj</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br>			repos <span class="token operator">+=</span> <span class="token string">'&lt;li&gt;'</span><br>				<span class="token operator">+</span> <span class="token string">'&lt;a href="'</span> <span class="token operator">+</span> obj<span class="token punctuation">.</span>html_url <span class="token operator">+</span> <span class="token string">'" target="_blank"&gt;'</span><span class="token operator">+</span> obj<span class="token punctuation">.</span>name <span class="token operator">+</span><span class="token string">'&lt;/a&gt;'</span><br>				<span class="token operator">+</span> <span class="token string">' by &lt;i&gt;'</span> <span class="token operator">+</span> obj<span class="token punctuation">.</span>owner<span class="token punctuation">.</span>login <span class="token operator">+</span> <span class="token string">'&lt;/i&gt; â€” '</span> <span class="token operator">+</span> <span class="token function">htmlEntities</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>description<span class="token punctuation">)</span><br>				<span class="token operator">+</span> <span class="token string">'&lt;/li&gt;'</span><span class="token punctuation">;</span><br>		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>		<span class="token keyword">return</span> <span class="token string">'&lt;ol&gt;'</span> <span class="token operator">+</span> repos <span class="token operator">+</span> <span class="token string">'&lt;/ol&gt;'</span><span class="token punctuation">;</span><br>	<span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><pre class="language-js"><code class="language-js"><span class="token comment">// in post</span><br><span class="token punctuation">{</span><span class="token operator">%</span> list_repos <span class="token operator">%</span><span class="token punctuation">}</span><br></code></pre><h2 id="working-style">Working style <a href="#working-style" class="direct-link">#</a></h2><h3 id="custom-environment">Custom environment <a href="#custom-environment" class="direct-link">#</a></h3><p>More info, read <a href="https://www.11ty.dev/docs/data-js/#example-exposing-environment-variables">official doc</a>. For example, we only perform something differently on local.</p><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"local-build"</span><span class="token operator">:</span> <span class="token string">"ELEVENTY_ENV=local eleventy"</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>An example of using in <code>.eleventy.js</code>,</p><pre class="language-js"><code class="language-js"><span class="token comment">// .eleventy.js</span><br>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><br>  environment<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">ELEVENTY_ENV</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>module<span class="token punctuation">.</span><span class="token function function-variable">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">ELEVENTY_ENV</span> <span class="token operator">==</span> <span class="token string">"local"</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>    <span class="token comment">// do something locally</span><br>  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>    <span class="token comment">// do something on server</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><p>Or using in the template,</p><div class="col-2-equal"><pre class="language-js"><code class="language-js"><span class="token comment">// _data/myProject.js</span><br>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><br>  environment<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">ELEVENTY_ENV</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><pre class="language-js"><code class="language-js"><span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">if</span> myProject<span class="token punctuation">.</span>environment <span class="token operator">==</span> <span class="token string">"local"</span> <span class="token operator">%</span><span class="token punctuation">}</span><br>  <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> css <span class="token operator">|</span> cssmin <span class="token operator">|</span> safe <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><br><span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">else</span> <span class="token operator">%</span><span class="token punctuation">}</span><br>  <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> css <span class="token operator">|</span> safe <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><br><span class="token punctuation">{</span><span class="token operator">%</span> endif <span class="token operator">%</span><span class="token punctuation">}</span><br></code></pre></div><h3 id="incremental-build">Incremental build <a href="#incremental-build" class="direct-link">#</a></h3><p>It's impossible for the current version (<code>^0.11.0</code>)! (Follow <a href="https://github.com/orgs/11ty/projects/3#card-33546621">the main project</a>).</p><p><strong>Weakness of 11ty</strong>:</p><p class="indent"></p><ol><li>There is some change in files, 11ty rebuilds the whole site. It's painful if we work with markdown files and save them regularly!</li><li>Cannot access the site while the building processing.</li></ol><p><strong>Idea</strong>:</p><p class="indent"></p><ol><li>Build manually, e.g. <code>npm run build-local</code> to <code>_site</code> folder.</li><li>Copy all files in <code>_site</code> to a so-called folder <code>_live</code></li><li>Run a custom server on folder <code>_site</code> (install <code>npm i http-server -g</code> first)</li></ol><p>An example of scripts,</p><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"local-build"</span><span class="token operator">:</span> <span class="token string">"ELEVENTY_ENV=local eleventy &amp;&amp; mkdir -p _live &amp;&amp; cp -Rf _site/* _live/"</span><span class="token punctuation">,</span><br>    <span class="token property">"local-serve"</span><span class="token operator">:</span> <span class="token string">"mkdir -p _live &amp;&amp; cp -Rf _site/* _live/ &amp;&amp; http-server _live"</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre><h2 id="nunjucks-things">Nunjucks things <a href="#nunjucks-things" class="direct-link">#</a></h2><p>Add a new item to a list,</p><pre class="language-js"><code class="language-js"><span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">set</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">%</span><span class="token punctuation">}</span><br><span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">set</span> a <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>a<span class="token punctuation">)</span> <span class="token operator">%</span><span class="token punctuation">}</span><br></code></pre><hr><p>Create a dictionary with nunjucks</p><pre class="language-js"><code class="language-js"><span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">set</span> items <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'a'</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span> <span class="token operator">%</span><span class="token punctuation">}</span><br></code></pre><hr><p>Add a new key-value to a dictionary,</p><pre class="language-js"><code class="language-js"><span class="token comment">// .eleventy.js -&gt; create a new filter</span><br>eleventyConfig<span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token string">'setAttribute'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">dictionary<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>	dictionary<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span><br>	<span class="token keyword">return</span> dictionary<span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// usage</span><br><span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">set</span> myDict <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"key1"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"key2"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"key3"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token operator">%</span><span class="token punctuation">}</span><br><span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">set</span> myDict <span class="token operator">=</span> myDict<span class="token operator">|</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'key2'</span><span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">)</span> <span class="token operator">%</span><span class="token punctuation">}</span><br><span class="token punctuation">{</span><span class="token punctuation">{</span>myDict<span class="token punctuation">[</span><span class="token string">'key2'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token comment">// pring "123" as expected</span><br></code></pre><h2 id="errors">Errors <a href="#errors" class="direct-link">#</a></h2><pre class="language-bash"><code class="language-bash"><span class="token comment"># TypeError: Cannot read property 'type' of undefined</span><br><span class="token comment"># =&gt; Class comes before ![]() of an image!</span></code></pre><pre class="language-bash"><code class="language-bash"><span class="token comment"># EISDIR: illegal operation on a directory</span><br><span class="token comment"># Solution:</span><br><span class="token comment"># Delete _site/ and rebuild!</span></code></pre><pre class="language-bash"><code class="language-bash"><span class="token comment"># ENOTDIR: not a directory...</span><br><span class="token comment"># Solution:</span><br><span class="token comment"># Delete _site/ and rebuild!</span></code></pre><pre class="language-bash"><code class="language-bash"><span class="token comment"># Invalid DateTime</span><br><span class="token comment"># Just for new posts =&gt; try to commit (on branch "dev") before building!</span></code></pre><h2 id="references">References <a href="#references" class="direct-link">#</a></h2><p class="indent"></p><ol><li><a href="https://www.11ty.dev/">Official website.</a></li><li><a href="https://mozilla.github.io/nunjucks/templating.html">Nunjucks Documentation</a></li><li><a href="https://www.mattnortham.com/blog/2020/moving-from-wordpress-to-eleventy/">Moving from WordPress to Eleventy</a></li><li><a href="https://www.webstoemp.com/blog/from-jekyll-to-eleventy/">From Jekyll to Eleventy - Webstoemp</a></li><li><a href="https://bryanlrobinson.com/blog/creating-11ty-plugin-embed-svg-contents/">Creating an 11ty Plugin - SVG Embed Tool - bryanlrobinson.com</a></li></ol></div><script type="application/ld+json">{
        "@context": "https://schema.org",
        "@type": "Article",
        "headline": "11ty + Nunjucks",
        "image": [],
        "author": "Anh-Thi DINH",
        "genre": "Insert a schema.org genre",
        "url": "https://dinhanhthi.com/11ty-nunjucks/",
        "mainEntityOfPage": "https://dinhanhthi.com/11ty-nunjucks/",
        "datePublished": "15-10-2020",
        "dateModified": "25-02-2021",
        "description": "This is not a tutorial to create an 11ty website, this&#39;s a note! You can find some very new and useful techniques on this note alongside the..."
      }</script></article></main><footer><a href="/" target="_blank">Thi &nbsp;Â©&nbsp; 2021 </a>&nbsp;â€¢&nbsp; <a href="/about-the-notes/">About the notes </a>&nbsp;â€¢&nbsp; <a href="/about/">About me </a>&nbsp;â€¢&nbsp; <a href="https://photos.app.goo.gl/9OVEkdTjmtRPg7vC3" target="_blank">My sketches </a>&nbsp;â€¢&nbsp; <a href="https://goo.gl/photos/yQXdQws1LLS16x5v5" target="_blank">I cook </a>&nbsp;â€¢&nbsp; <a href="/for-me-only/">For me only </a>&nbsp;â€¢&nbsp; <a href="/donate/">Support Thi</a></footer><script src="https://cdnjs.cloudflare.com/ajax/libs/elasticlunr/0.9.6/elasticlunr.min.js"></script><script src="https://www.googletagmanager.com/gtag/js?id=G-K3YRSB918B" async=""></script><script>window.dataLayer = window.dataLayer || [];
		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());
		gtag('config', 'G-K3YRSB918B');</script><script src="/js/min.js?hash=51c2dec01a" async="" defer=""></script></body></html>