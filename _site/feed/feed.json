{
  "version": "https://jsonfeed.org/version/1",
  "title": "🔥 Anh-Thi DINH",
  "home_page_url": "https://dinhanhthi.com",
  "feed_url": "https://dinhanhthi.com/feed/feed.json",
  "description": "I failed my way to success!",
  "author": {
    "name": "Anh-Thi DINH",
    "url": "https://dinhanhthi.com"
  },
  "items": [{
      "id": "https://dinhanhthi.com/angular-4-forms/",
      "url": "https://dinhanhthi.com/angular-4-forms/",
      "title": "Angular 4 - Forms",
      "content_html": "<p>This is my note for the course &quot;<a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/13914134#overview\">Angular - The Complete Guide (2021 Edition)</a>&quot; which is taught by Maximilian Schwarzmüller on Udemy. This is an incredible course for you to start to learn Angular from basic. The official Angular docs is good but it's not for the beginner.</p>\n<p>🍄 <strong>PART 1</strong> — <a href=\"/angular-1-basics-components-databinding-directives/\">Angular  1 - Basics &amp; Components &amp; Databinding &amp; Directives</a><br>\n🍄 <strong>PART 2</strong> — <a href=\"/angular-2-service-dependency-injection-routing/\">Angular 2 - Services &amp; Dependency Injection &amp; Routing</a><br>\n🍄 <strong>PART 3</strong> — <a href=\"/angular-3-observable/\">Angular 3 - Observable</a><br>\n🍄 <strong>PART 4</strong> —  <a href=\"/angular-4-forms/\">Angular 4 - Forms</a><br>\n👉 <a href=\"https://github.com/dinhanhthi/learn-angular-complete-guide\">Github repo</a><br>\n👉 <strong>Other note</strong> (taken before this course): <a href=\"https://www.notion.so/Angular-101-fcbd5683f8e941f89c709595792b62d2\">Angular 101</a></p>\n<div class=\"warning\">\n<p>This note contains only the important things which can be look back later, it cannot replace either <a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/13914134#overview\">the course</a> nor <a href=\"https://angular.io/start\">the official document</a>!</p>\n</div>\n<h2 id=\"tips\"><strong>TIPS</strong> <a class=\"direct-link\" href=\"#tips\">#</a></h2>\n<p>👉  <a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/12982454#questions\">Assignment example of using Forms in Angular</a>  (video)+ <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/15-forms/3-forms-reactive-assignment-solution/src/app\">codes</a>.<br>\n👉  Project using Form : <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/15-forms/4-prj-forms-final/src/app\">codes</a>.</p>\n<h2 id=\"why-forms-in-angular%3F\">Why Forms in Angular? <a class=\"direct-link\" href=\"#why-forms-in-angular%3F\">#</a></h2>\n<p>Because your app is SVC (single-view-component) → when you submit a form, how can web do it? → that's why angular need a special &quot;things&quot; for forms.</p>\n<ul>\n<li>Get input values by the users</li>\n<li>Check the valid of input</li>\n<li>Styling conditionally the form</li>\n</ul>\n<p><img src=\"/img/post/angular/angular-4/Untitled.png\" alt=\"Angular_4_-_Forms_4258fc3ce29b46deb5f5b0492c50c7bb/Untitled.png\"><br>\n<em>Left: HTML form → Right: key-value object can be submitted with the form.</em></p>\n<h2 id=\"2-approaches-with-forms\">2 approaches with forms <a class=\"direct-link\" href=\"#2-approaches-with-forms\">#</a></h2>\n<ul>\n<li>Template driven ← inferred from DOM (html)</li>\n<li>Reactive ← form created programmatically and synchronized with the DOM → more controls</li>\n</ul>\n<h2 id=\"template-driven-form\">Template-driven form <a class=\"direct-link\" href=\"#template-driven-form\">#</a></h2>\n<p>👉 <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/15-forms/1-forms-template-driven-final/src/app\">Codes for this section</a>.</p>\n<p>Everything you wanna do → do it in the template ← template-driven!!!!</p>\n<h3 id=\"create-a-td-form\">Create a TD form <a class=\"direct-link\" href=\"#create-a-td-form\">#</a></h3>\n<p>The form here don't make any HTML request. ← <code>&lt;form&gt;</code> has no attribute!</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// make sure</span><br><span class=\"token comment\">// app.module.ts</span><br><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> FormsModule <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/forms'</span><span class=\"token punctuation\">;</span><br><br>@<span class=\"token function\">NgModule</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><br>\timports<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><br>\t\tFormsModule <span class=\"token comment\">// with this, angular will auto create form based on &lt;form> in html</span><br>\t<span class=\"token punctuation\">]</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">export</span> <span class=\"token operator\">...</span></code></pre>\n<p>Angular doesn't recognize auto elements of <code>&lt;form&gt;</code> (label, input,...) because there may be some inputs which aren't served when submitting a form (their functions are different from a function of a form but they're inside <code>&lt;form&gt;</code>) → need to tell angular which ones to be extra controlled?</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- app.component.ts --></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span><span class=\"token punctuation\">></span></span><br>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>        <span class=\"token comment\">&lt;!-- normal input (without \"ngModel\") --></span><br>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>                     <span class=\"token attr-name\">&lt;!--</span> <span class=\"token attr-name\">tell</span> <span class=\"token attr-name\">angular</span> <span class=\"token attr-name\">to</span> <span class=\"token attr-name\">control</span> <span class=\"token attr-name\">this</span> <span class=\"token attr-name\">input</span> <span class=\"token attr-name\">--</span><span class=\"token punctuation\">></span></span><br>\t\ttype=\"text\"<br>\t\tngModel   <span class=\"token comment\">&lt;!-- looks like 2-way binding, ie. [(ngModel)] --></span><br>\t\tname=\"username\">  <span class=\"token comment\">&lt;!-- must have &lt;- registered in JS representation of the form --></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span></code></pre>\n<h3 id=\"submitting-%26-using-the-form\">Submitting &amp; Using the Form <a class=\"direct-link\" href=\"#submitting-%26-using-the-form\">#</a></h3>\n<p>👉 <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/15-forms/1-forms-template-driven-final/src/app\">Codes for this section</a>.</p>\n<p>We can actually see what users entered.</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// If we use normal form</span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Submit</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> // normal behavior - sending http request<br></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// We use ngSubmit</span><br><span class=\"token operator\">&lt;</span><span class=\"token function\">form</span> <span class=\"token punctuation\">(</span>ngSubmit<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token string\">\"onSubmit(f)\"</span> #f<span class=\"token operator\">=</span><span class=\"token string\">\"\"</span><span class=\"token operator\">></span><br>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//   ^Hey, get me access to this form you created</span><br>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//        automatically</span><br>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Submit</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// app.component.ts</span><br><span class=\"token function\">onSubmit</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">form<span class=\"token operator\">:</span> HTMLFormElement</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>form<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token comment\">// Get the values user entered: form.value</span><br><span class=\"token punctuation\">}</span></code></pre>\n<p><img src=\"/img/post/angular/angular-4/Untitled_1.png\" alt=\"Angular_4_-_Forms_4258fc3ce29b46deb5f5b0492c50c7bb/Untitled_1.png\"></p>\n<p>Get the values user entered: <code>form.value</code></p>\n<h3 id=\"form-state\">Form State <a class=\"direct-link\" href=\"#form-state\">#</a></h3>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// .html</span><br><span class=\"token operator\">&lt;</span><span class=\"token function\">form</span> <span class=\"token punctuation\">(</span>ngSubmit<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token string\">\"onSubmit(f)\"</span> #f<span class=\"token operator\">=</span><span class=\"token string\">\"\"</span><span class=\"token operator\">></span><span class=\"token operator\">...</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span><br><br><span class=\"token comment\">// .component.ts</span><br><span class=\"token function\">onSubmit</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">form<span class=\"token operator\">:</span> HTMLFormElement</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>form<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre>\n<ul>\n<li><code>form.controls</code> → several properties to control the form.</li>\n<li><code>form.dirty</code>: <code>true</code> if we changed something in the form.</li>\n<li><code>form.invalid</code> / <code>form.valid</code>: if we add some invalidator  / validator (to check the fields), this can be true or false.</li>\n<li>Read more <a href=\"https://angular.io/api/forms/NgForm\">in official doc</a>.</li>\n</ul>\n<h3 id=\"access-form-via-%40viewchild()\">Access Form via <code>@ViewChild()</code> <a class=\"direct-link\" href=\"#access-form-via-%40viewchild()\">#</a></h3>\n<p>👉 <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/15-forms/1-forms-template-driven-final/src/app\">Codes for this section</a>.</p>\n<p>With <code>#f</code> (local ref), we can use <code>@ViewChild</code>. ⇒ Useful when you wanna access the form not only at the time you submit it but also earlier!</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// .html</span><br><span class=\"token operator\">&lt;</span><span class=\"token function\">form</span> <span class=\"token punctuation\">(</span>ngSubmit<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token string\">\"onSubmit()\"</span> #f<span class=\"token operator\">=</span><span class=\"token string\">\"ngForm\"</span><span class=\"token operator\">></span><span class=\"token operator\">...</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span><br>\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//  ^don't have \"f\" here</span><br><br><span class=\"token comment\">// .component.ts</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></span> <span class=\"token punctuation\">{</span><br>\t@<span class=\"token function\">ViewChild</span><span class=\"token punctuation\">(</span><span class=\"token string\">'f'</span><span class=\"token punctuation\">)</span> signupForm<span class=\"token operator\">:</span> NgForm<span class=\"token punctuation\">;</span><br><br>\t<span class=\"token function\">onSubmit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>signupForm<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<h3 id=\"validation\">Validation <a class=\"direct-link\" href=\"#validation\">#</a></h3>\n<p>👉 <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/blob/master/15-forms/1-forms-template-driven-final/src/app/app.component.html\">Codes for this section</a>.</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">(ngSubmit)</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>onSubmit()<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">#f</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ngForm<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span><br>\t\t<span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span><br>\t\t<span class=\"token attr-name\">ngModel</span><br>\t\t<span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span><br>\t\t<span class=\"token attr-name\">required</span><span class=\"token punctuation\">></span></span><br><span class=\"token comment\">&lt;!--    ^default HTML attribute &lt;- angular see it as a built-in directive --></span><br><br>\t&lt;input<br>\t\ttype=\"email\"<br>\t\tngModel<br>\t\trequired<br>\t\temail  // angular's directive, not html attribute -> make sure it's a valid email<br>\t\t#email=\"ngModel\"><br>\t\t   <span class=\"token comment\">&lt;!-- ^ expose some additional info abt the controls --></span><br><br>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">*ngIf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>!email.valid &amp;&amp; email.touched<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Please enter valid email!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><br><br>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><br>\t\t<span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span><br>\t\t<span class=\"token attr-name\">[disabled]</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>!f.valid<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Submit<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>👉 <a href=\"https://angular.io/api/forms/Validators\">List of all built-in validators</a>.<br>\n👉 <a href=\"https://angular.io/api?type=directive\">List of directives which can be added to your template</a>.</p>\n<p>There are 2 places for <code>.valid</code> information ← <code>form.valid</code> and <code>form.controls.email.valid</code></p>\n<p>When it's invalid (after clicking on submit) or valid → angular auto add classes to the html element ← we can use these class to style our element!</p>\n<p>Enable HTML5 validation (by default, Angular disables it)  → <code>ngNativeValidate</code></p>\n<div class=\"col-2-equal\">\n<pre class=\"language-scss\"><code class=\"language-scss\"><span class=\"token comment\">// if user touched in input and leave</span><br><span class=\"token comment\">//   it but it's invalid</span><br><span class=\"token selector\">input.ng-invalid.ng-touched</span><span class=\"token punctuation\">{</span><br>\t...<br><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// patterns (eg. number > 0)</span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span><br>\t<span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>number<span class=\"token punctuation\">\"</span></span><br>\t<span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>amount<span class=\"token punctuation\">\"</span></span><br>\t<span class=\"token attr-name\">ngModel</span><br>\t<span class=\"token attr-name\">pattern</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>^[1-9]+[0-9]*$<span class=\"token punctuation\">\"</span></span><br><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></code></pre>\n</div>\n<h3 id=\"set-default-values\">Set default values <a class=\"direct-link\" href=\"#set-default-values\">#</a></h3>\n<p>👉 <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/15-forms/1-forms-template-driven-final/src/app\">Codes for this section</a>.</p>\n<p>Using 1-way binding / property binding (<code>[ngModel]</code>) to set the default value.</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token operator\">&lt;</span>select<br>  id<span class=\"token operator\">=</span><span class=\"token string\">\"secret\"</span><br>  <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"form-control\"</span><br>  <span class=\"token punctuation\">[</span>ngModel<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token string\">\"defaultQuestion\"</span><br>  name<span class=\"token operator\">=</span><span class=\"token string\">\"secret\"</span><span class=\"token operator\">></span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>pet<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Your first Pet?</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">></span></span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>teacher<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Your first teacher?</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>select</span><span class=\"token punctuation\">></span></span><br><br><span class=\"token comment\">// component.ts</span><br>defaultQuestion <span class=\"token operator\">=</span> <span class=\"token string\">\"pet\"</span><span class=\"token punctuation\">;</span></code></pre>\n<h3 id=\"instantly-react-to-changes\">Instantly react to changes <a class=\"direct-link\" href=\"#instantly-react-to-changes\">#</a></h3>\n<p>Before, the check only performed after clicking &quot;Submit&quot; → If you wanna check &quot;lively&quot; → Using two-way binding <code>[(NgModel)]</code></p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>form-group<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>textarea</span><br>    <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>questionAnswer<span class=\"token punctuation\">\"</span></span><br>    <span class=\"token attr-name\">rows</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>3<span class=\"token punctuation\">\"</span></span><br>    <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>form-control<span class=\"token punctuation\">\"</span></span><br>    <span class=\"token attr-name\">[(ngModel)]</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>answer<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>textarea</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>Your reply: <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></code></pre>\n<h3 id=\"binding-with-ngmodel\">Binding with <code>NgModel</code> <a class=\"direct-link\" href=\"#binding-with-ngmodel\">#</a></h3>\n<ul>\n<li><strong>0-way binding</strong>, <code>NgModel</code> → tell angular that this input is a control</li>\n<li><strong>1-way binding</strong>, <code>[NgModel]</code> → get this control a default value</li>\n<li><strong>2-way binding</strong>, <code>[(NgModel)]</code> → Instantly out / do whatever you want with that value</li>\n</ul>\n<h3 id=\"grouping-form-controls\">Grouping Form Controls <a class=\"direct-link\" href=\"#grouping-form-controls\">#</a></h3>\n<p>In a big form, we need to &quot;group&quot; some values into a group  / validate some specific group of inputs.</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><br>\t<span class=\"token attr-name\">ngModelGroup</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>userData<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">&lt;!--</span>  <span class=\"token attr-name\">^the</span> <span class=\"token attr-name\">key</span> <span class=\"token attr-name\">name</span> <span class=\"token attr-name\">for</span> <span class=\"token attr-name\">this</span> <span class=\"token attr-name\">group</span> <span class=\"token attr-name\">--</span><span class=\"token punctuation\">></span></span><br>\t#userData=\"NgModelGroup\"><br>\t<span class=\"token comment\">&lt;!-- input fields --></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">*ngIf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>!userData.valid &amp;&amp; userData.touched<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>User data is invalid!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>After submit: instead of getting <code>form.value.email</code>, but getting <code>form.value.userData.email</code> (and also <code>form.controls.userData</code>)</p>\n<h3 id=\"radio-buttons\">Radio buttons <a class=\"direct-link\" href=\"#radio-buttons\">#</a></h3>\n<p>👉 <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/15-forms/1-forms-template-driven-final/src/app\">Codes for this section</a>.</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>radio<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">*ngFor</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>let gender of genders<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span><br>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span><br>      <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>radio<span class=\"token punctuation\">\"</span></span><br>      <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>gender<span class=\"token punctuation\">\"</span></span><br>      <span class=\"token attr-name\">ngModel</span><br>      <span class=\"token attr-name\">[value]</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>gender<span class=\"token punctuation\">\"</span></span><br>      <span class=\"token attr-name\">required</span><span class=\"token punctuation\">></span></span><br>    <br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><br><br><span class=\"token comment\">&lt;!-- .component.ts --></span><br>genders = ['male', 'female'];</code></pre>\n<h3 id=\"set-values-to-input-fields\">Set values to input fields <a class=\"direct-link\" href=\"#set-values-to-input-fields\">#</a></h3>\n<p>(<a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656488#questions/10535928\">video</a>) With <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/15-forms/1-forms-template-driven-final/src/app\">this HTML file</a>,</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// .component.ts</span><br><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>signupForm<span class=\"token punctuation\">.</span><span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><br>\tuserData<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>\t  username<span class=\"token operator\">:</span> suggestedName<span class=\"token punctuation\">,</span><br>\t  email<span class=\"token operator\">:</span> <span class=\"token string\">''</span><br>\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\tsecret<span class=\"token operator\">:</span> <span class=\"token string\">'pet'</span><span class=\"token punctuation\">,</span><br>\tquestionAnswer<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span><br>\tgender<span class=\"token operator\">:</span> <span class=\"token string\">'male'</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token comment\">// down side -> overwrite all fields whenever we click \"Suggest an Username\".</span><br><br><span class=\"token comment\">// If we wanna set value TO A SINGLE ONE FIELD?</span><br><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>signupForm<span class=\"token punctuation\">.</span>form<span class=\"token punctuation\">.</span><span class=\"token function\">patchValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><br>\t\t\t\t\t\t<span class=\"token comment\">//  ^patchValue is only available with .form</span><br>  userData<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>    username<span class=\"token operator\">:</span> suggestedName<br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<h3 id=\"using-form-data\">Using Form Data <a class=\"direct-link\" href=\"#using-form-data\">#</a></h3>\n<p>👉 <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/15-forms/1-forms-template-driven-final/src/app\">Codes for this section</a>.</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// html</span><br><span class=\"token operator\">&lt;</span>div <span class=\"token operator\">*</span>ngIf<span class=\"token operator\">=</span><span class=\"token string\">\"submitted\"</span><span class=\"token operator\">></span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Your Data</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Username: </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Mail: </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Secret Question: Your first </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Answer: </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Gender: </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// .component.ts</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppComponent</span> <span class=\"token punctuation\">{</span><br>\tuser <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><br>    username<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span><br>    email<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span><br>    secretQuestion<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span><br>    answer<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span><br>    gender<span class=\"token operator\">:</span> <span class=\"token string\">''</span><br>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span><br>  submitted <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span><br><br>\t<span class=\"token function\">onSubmit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>submitted <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span><br>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span>username <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>signupForm<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span>userData<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">;</span><br>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span>email <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>signupForm<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span>userData<span class=\"token punctuation\">.</span>email<span class=\"token punctuation\">;</span><br>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span>secretQuestion <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>signupForm<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span>secret<span class=\"token punctuation\">;</span><br>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span>answer <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>signupForm<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span>questionAnswer<span class=\"token punctuation\">;</span><br>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span>gender <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>signupForm<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span>gender<span class=\"token punctuation\">;</span><br><br>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>signupForm<span class=\"token punctuation\">.</span><span class=\"token function\">reset</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// to reset the form</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<h2 id=\"reactive-form\">Reactive Form <a class=\"direct-link\" href=\"#reactive-form\">#</a></h2>\n<p>Create the form programmatically (not from scratch).</p>\n<p>👉 <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/15-forms/2-forms-reactive-final/src/app\">Codes for this section</a>.</p>\n<h3 id=\"setting-up\">Setting up <a class=\"direct-link\" href=\"#setting-up\">#</a></h3>\n<p>👉 <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/15-forms/2-forms-reactive-final/src/app\">Codes for this section</a>.</p>\n<ul>\n<li><code>FormGroup</code> → a form, in the end, it's just a group of controls.</li>\n<li>We don't need <code>FormsModule</code> in <code>app.module.ts</code> (it's for template-driven form) → NEED <code>ReactiveFormsModule</code></li>\n<li>We don't need local reference anymore.</li>\n<li>We configure all things in the typescript code (component.ts)</li>\n<li><a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656502#questions/10535928\">Video</a></li>\n</ul>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// app.module.ts</span><br><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ReactiveFormsModule <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/forms'</span><span class=\"token punctuation\">;</span><br><br>@<span class=\"token function\">NgModule</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><br>  imports<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><br>    ReactiveFormsModule<br>  <span class=\"token punctuation\">]</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">export</span> <span class=\"token operator\">...</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// html</span><br><span class=\"token operator\">&lt;</span>form <span class=\"token punctuation\">[</span>formGroup<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token string\">\"signupForm\"</span><span class=\"token operator\">></span><br><span class=\"token comment\">//     ^hey, don't treat this form as normal or create form for me, just</span><br><span class=\"token comment\">//        use my formgroup \"signupForm\" (in component.ts)</span><br>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span><br>\t\t<span class=\"token attr-name\">formControlName</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>//  ^the name given in component.ts of this input field<br></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// app.component.ts</span><br><span class=\"token keyword\">export</span> <span class=\"token operator\">...</span> OnInit <span class=\"token punctuation\">{</span><br>\tsignupForm<span class=\"token operator\">:</span> FormGroup<span class=\"token punctuation\">;</span><br><br>\t<span class=\"token function\">ngOnInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>signupForm <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormGroup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><br>      <span class=\"token string\">'username'</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormControl</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t\t<span class=\"token comment\">// |      \t\t\t\t|\t\t\t\t    ^initial value</span><br>\t\t<span class=\"token comment\">// |              ^each field is a FormControl</span><br>\t\t<span class=\"token comment\">// ^the same name for \"formControlName\" in .html &lt;- that's the link</span><br>    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<h3 id=\"grouping-controls\">Grouping Controls <a class=\"direct-link\" href=\"#grouping-controls\">#</a></h3>\n<p>👉 <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/15-forms/2-forms-reactive-final/src/app\">Codes for this section</a>.</p>\n<p><code>FormGroup</code> inside <code>FormGroup</code>.</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// .component.ts</span><br><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>signupForm <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormGroup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><br>  <span class=\"token string\">'userData'</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormGroup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><br>    <span class=\"token string\">'username'</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormControl</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    <span class=\"token string\">'email'</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormControl</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">)</span><br>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>  <span class=\"token string\">'gender'</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormControl</span><span class=\"token punctuation\">(</span><span class=\"token string\">'male'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// html</span><br><span class=\"token comment\">// need to put 'username' and 'email' inside a div</span><br><span class=\"token operator\">&lt;</span>form <span class=\"token punctuation\">[</span>formGroup<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token string\">\"signupForm\"</span><span class=\"token operator\">></span><br>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">formGroupName</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>userData<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span><br>\t\t<span class=\"token attr-name\">formControlName</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br><br>\t\t&lt;span *ngIf=\"!signupForm.get('userData.username').valid><br>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//  ^new here<br>\t\t\tPlease enter a valid username!<br>\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br><br>\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span><br>\t\t<span class=\"token attr-name\">formControlName</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></code></pre>\n<h3 id=\"formarray\"><code>FormArray</code> <a class=\"direct-link\" href=\"#formarray\">#</a></h3>\n<p>👉 <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/15-forms/2-forms-reactive-final/src/app\">Codes for this section</a>.</p>\n<p>Let the user dynamically add their form controls (we don't know yet there are how many controls there) → using an array of form.</p>\n<p>Get access to <code>FormArray</code>,</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// .component.ts</span><br><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>signupForm <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormGroup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><br>  <span class=\"token operator\">...</span><br>  <span class=\"token string\">'hobbies'</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormArray</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// html</span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">formArrayName</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hobbies<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>  &lt;button<br>    (click)=\"onAddHobby()\">Add Hobby</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>  &lt;div<br>    *ngFor=\"let hobbyControl of signupForm.get('hobbies').controls; let i = index\"><br>    &lt;input type=\"text\" class=\"form-control\" [formControlName]=\"i\"><br>  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 1st way</span><br><span class=\"token comment\">// .ts</span><br><span class=\"token function\">getControls</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">FormArray</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">this.signupForm.get('hobbies')).controls;<br>}<br><br>// .html<br>*ngFor=\"let hobbyControl of getControls(); let i = index\"</code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 2nd way (using getter)</span><br><span class=\"token comment\">// .ts</span><br><span class=\"token keyword\">get</span> <span class=\"token function\">controls</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>signupForm<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hobbies'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> FormArray<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>controls<span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span><br><br><span class=\"token comment\">// .html</span><br><span class=\"token operator\">*</span>ngFor<span class=\"token operator\">=</span><span class=\"token string\">\"let hobbyControl of controls; let i = index\"</span></code></pre>\n<h3 id=\"validation-2\">Validation <a class=\"direct-link\" href=\"#validation-2\">#</a></h3>\n<p>👉 <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/15-forms/2-forms-reactive-final/src/app\">Codes for this section</a>.</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>signupForm <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormGroup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><br>  <span class=\"token string\">'username'</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormControl</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> Validators<span class=\"token punctuation\">.</span>required<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//   ^it's actually .required() but in</span><br>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//    this case, we wanna add a ref</span><br>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//    to this method, angular'll know</span><br>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//    to call it whenever we make changes</span><br>\t<span class=\"token string\">'email'</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormControl</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Validators<span class=\"token punctuation\">.</span>required<span class=\"token punctuation\">,</span> Validators<span class=\"token punctuation\">.</span>email<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">// ^multiple validations</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Get access directly to the FormControl using <code>.get()</code></p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token operator\">&lt;</span>span<br>\t<span class=\"token operator\">*</span>ngIf<span class=\"token operator\">=</span><span class=\"token string\">\"!signupForm.get('username').valid &amp;&amp; signupForm.get('username').touched\"</span><span class=\"token operator\">></span><br>\tPlease enter a valid username<span class=\"token operator\">!</span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// for the overall form</span><br><span class=\"token operator\">&lt;</span>span<br>\t<span class=\"token operator\">*</span>ngIf<span class=\"token operator\">=</span><span class=\"token string\">\"!signupForm.valid &amp;&amp; signupForm.touched\"</span><span class=\"token operator\">></span><br>\tPlease enter valid data<span class=\"token operator\">!</span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span></code></pre>\n<h3 id=\"custom-validation\">Custom validation <a class=\"direct-link\" href=\"#custom-validation\">#</a></h3>\n<p>👉 <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/15-forms/2-forms-reactive-final/src/app\">Codes for this section</a>.</p>\n<p>Suppose that we don't want users use some specific names.</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// .ts</span><br>forbiddenUsernames <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Chris'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Anna'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><br><br><span class=\"token function\">ngOnInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>signupForm <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormGroup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><br>\t\t<span class=\"token string\">'username'</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormControl</span><span class=\"token punctuation\">(</span><br>\t\t\t<span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><br>\t\t\t\tValidators<span class=\"token punctuation\">.</span>required<span class=\"token punctuation\">,</span><br>\t\t\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">forbiddenNames</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//   ^need this 'cause angular will call .forbiddenNames()</span><br>\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//    (not current class -> cannot use only \"this.\" directly</span><br>\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//    -> let angular knows (binds) to current class as \"this\"</span><br>\t<span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span><br><br><span class=\"token function\">forbiddenNames</span><span class=\"token punctuation\">(</span>control<span class=\"token operator\">:</span> FormControl<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span>s<span class=\"token operator\">:</span> string<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> boolean<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">{</span><br>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">// ^a return type</span><br>  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>forbiddenUsernames<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>control<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span> <span class=\"token operator\">!==</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//     ^return of .indexOf</span><br>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//      (if not contains) is \"-1\"</span><br>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'nameIsForbidden'</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span><br>  <span class=\"token punctuation\">}</span><br>  <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span><br>\t\t<span class=\"token comment\">//   ^we don't return ... \"false\" here because for angular, returning null</span><br>\t\t<span class=\"token comment\">//      means \"valid\"</span><br><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// use error message with \"nameIsForbidden\"</span><br><span class=\"token comment\">// can use Inspect of the browser to check the location of \"nameISForbidden\"</span><br><span class=\"token operator\">&lt;</span>span <span class=\"token operator\">*</span>ngIf<span class=\"token operator\">=</span><span class=\"token string\">\"signupForm.get('userData.username').errors['nameIsForbidden']\"</span><span class=\"token operator\">></span><br>\tThis name is invalid<span class=\"token operator\">!</span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span></code></pre>\n<h3 id=\"custom-async-validation\">Custom async validation <a class=\"direct-link\" href=\"#custom-async-validation\">#</a></h3>\n<p>👉 <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/15-forms/2-forms-reactive-final/src/app\">Codes for this section</a>.</p>\n<p>(<a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656522#questions\">video</a>) Suppose we wanna check &quot;already-taken&quot; emails from the server.</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>signupForm <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormGroup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><br>  <span class=\"token string\">'email'</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormControl</span><span class=\"token punctuation\">(</span><br>\t\t<span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Validators<span class=\"token punctuation\">.</span>required<span class=\"token punctuation\">,</span> Validators<span class=\"token punctuation\">.</span>email<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>forbiddenEmails<span class=\"token punctuation\">)</span><br>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">// ^can be an array,</span><br>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">// this position is for async</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><br><span class=\"token function\">forbiddenEmails</span><span class=\"token punctuation\">(</span>control<span class=\"token operator\">:</span> FormControl<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Promise<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>any</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> | Observable</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>any</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> </span><span class=\"token punctuation\">{</span><br>  <span class=\"token keyword\">const</span> promise <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>any</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">((resolve, reject) => </span><span class=\"token punctuation\">{</span><br>    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>control<span class=\"token punctuation\">.</span>value <span class=\"token operator\">===</span> <span class=\"token string\">'test@test.com'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>        <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">'emailIsForbidden'</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span><br>        <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>      <span class=\"token punctuation\">}</span><br>    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>  <span class=\"token punctuation\">}</span><span class=\"token plain-text\">);<br>  return promise;<br>}</code></pre>\n<h3 id=\"form-status%3A-statuschanges%2C-valuechanges\">Form Status: <code>statusChanges</code>, <code>valueChanges</code> <a class=\"direct-link\" href=\"#form-status%3A-statuschanges%2C-valuechanges\">#</a></h3>\n<p><code>.statusChanges</code> → change something in the form (eg. typing something).</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">ngOnInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>signupForm<span class=\"token punctuation\">.</span>valueChanges<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><br>\t\t<span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre>\n<p><code>.statusChanges</code> → gives the status of the form (<em>INVALID, VALID, PENDING,...</em>)</p>\n<h3 id=\"set-values-to-input-fields-2\">Set values to input fields <a class=\"direct-link\" href=\"#set-values-to-input-fields-2\">#</a></h3>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>signupForm<span class=\"token punctuation\">.</span><span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><br>  <span class=\"token string\">'userData'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token string\">'username'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Max'</span><span class=\"token punctuation\">,</span><br>    <span class=\"token string\">'email'</span><span class=\"token operator\">:</span> <span class=\"token string\">'max@test.com'</span><br>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>  <span class=\"token string\">'gender'</span><span class=\"token operator\">:</span> <span class=\"token string\">'male'</span><span class=\"token punctuation\">,</span><br>  <span class=\"token string\">'hobbies'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token comment\">// down side -> overwrite all fields whenever we click \"Suggest an Username\".</span><br><br><span class=\"token comment\">// If we wanna set value TO A SINGLE ONE FIELD?</span><br><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>signupForm<span class=\"token punctuation\">.</span><span class=\"token function\">patchValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><br>  <span class=\"token string\">'userData'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token string\">'username'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Anna'</span><span class=\"token punctuation\">,</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Reset the form,</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">onSubmit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>signupForm<span class=\"token punctuation\">.</span><span class=\"token function\">reset</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//  ^you can put object to reset specific values</span><br><span class=\"token punctuation\">}</span></code></pre>\n",
      "date_published": "2021-03-03T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/angular-3-observable/",
      "url": "https://dinhanhthi.com/angular-3-observable/",
      "title": "Angular 3 - Observable",
      "content_html": "<p>This is my note for the course &quot;<a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/13914134#overview\">Angular - The Complete Guide (2021 Edition)</a>&quot; which is taught by Maximilian Schwarzmüller on Udemy. This is an incredible course for you to start to learn Angular from basic. The official Angular docs is good but it's not for the beginner.</p>\n<p>🍄 <strong>PART 1</strong> — <a href=\"/angular-1-basics-components-databinding-directives/\">Angular  1 - Basics &amp; Components &amp; Databinding &amp; Directives</a><br>\n🍄 <strong>PART 2</strong> — <a href=\"/angular-2-service-dependency-injection-routing/\">Angular 2 - Services &amp; Dependency Injection &amp; Routing</a><br>\n🍄 <strong>PART 3</strong> — <a href=\"/angular-3-observable/\">Angular 3 - Observable</a><br>\n🍄 <strong>PART 4</strong> —  <a href=\"/angular-4-forms/\">Angular 4 - Forms</a><br>\n👉 <a href=\"https://github.com/dinhanhthi/learn-angular-complete-guide\">Github repo</a><br>\n👉 <strong>Other note</strong> (taken before this course): <a href=\"https://www.notion.so/Angular-101-fcbd5683f8e941f89c709595792b62d2\">Angular 101</a><br>\n👉 Other note: <a href=\"https://www.notion.so/RxJS-b4bc7e2d1f7d49b79d4cb701785e355f\">RxJS</a>.</p>\n<div class=\"warning\">\n<p>This note contains only the important things which can be look back later, it cannot replace either <a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/13914134#overview\">the course</a> nor <a href=\"https://angular.io/start\">the official document</a>!</p>\n</div>\n<h2 id=\"docs\">Docs <a class=\"direct-link\" href=\"#docs\">#</a></h2>\n<ul>\n<li><a href=\"https://www.learnrxjs.io/\">Learn RxJS</a></li>\n</ul>\n<h2 id=\"what's-observable%3F\">What's Observable? <a class=\"direct-link\" href=\"#what's-observable%3F\">#</a></h2>\n<p>👉 Codes: <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/14-observable/obs-03-complete-custom-observable/src/app\">finish custom observables</a>.</p>\n<ul>\n<li>An observable = a data source.</li>\n<li>Observable patterns → <em>observable</em> —- stream —- <em>observer</em></li>\n<li><em>Observer</em> (in previous codes, you subscribe something to the event from observable) → 3 type of data received (3 hooks): Handle data, Handle error, Handle completion.</li>\n<li>Observables are contracts to which you subscribe to be informed about the changes in data.</li>\n</ul>\n<p><img src=\"/img/post/angular/angular-3/Untitled.png\" alt=\"Angular_3_-_Observable_f0445b12735d4542956fd4f2eefca8e4/Untitled.png\"></p>\n<h2 id=\"create-observable\">Create observable <a class=\"direct-link\" href=\"#create-observable\">#</a></h2>\n<p>There are several ways to create an observable from rxjs package.</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// home.component.ts</span><br><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> interval<span class=\"token punctuation\">,</span> Subscription <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'rxjs'</span><span class=\"token punctuation\">;</span><br><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">OnInit</span><span class=\"token punctuation\">,</span> OnDestroy <span class=\"token punctuation\">{</span><br>\t<span class=\"token keyword\">private</span> firstObsSub<span class=\"token operator\">:</span> Subscription<span class=\"token punctuation\">;</span><br><br>\t<span class=\"token function\">ngOnInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>firstObsSub <span class=\"token operator\">=</span> <span class=\"token function\">interval</span><span class=\"token punctuation\">(</span> <span class=\"token number\">1000</span> <span class=\"token punctuation\">)</span> <span class=\"token comment\">// every seconds, a new event will be emitted</span><br>\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span> <span class=\"token parameter\">count</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>\t\t\t\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// log to the console</span><br>\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><br>\t<span class=\"token punctuation\">}</span><br><br>\t<span class=\"token comment\">// we have to .unsubscribe() -> if not, we get more and more observables</span><br>\t<span class=\"token comment\">//   whenever we get back to home</span><br>\t<span class=\"token function\">ngOnDestroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span> <span class=\"token punctuation\">{</span><br><span class=\"token comment\">//|\t\t\t\t\t\t// ^return nothing</span><br><span class=\"token comment\">//^whenever we leave the component</span><br>\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>firstObsSub<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// prevent memory leak</span><br>\t<span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<p>All observables provided by Angular → no need to import from &quot;rxjs&quot; + no need to unsubscribe().</p>\n<h3 id=\".subscribe()\"><code>.subscribe()</code> <a class=\"direct-link\" href=\"#.subscribe()\">#</a></h3>\n<pre class=\"language-jsx\"><code class=\"language-jsx\">customIntervalObs<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><br>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>function_for_next</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">, // performed when get an emit<br>\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>function_for_error</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">, // performed when there is error<br>\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>function_for_complete</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> // perform when finish getting emit<br>);</code></pre>\n<p>You rarely build your own observable → use the ones given by angular or somewhere else. Below are just for more understanding how to do so if you want!</p>\n<h3 id=\".create()\"><code>.create()</code> <a class=\"direct-link\" href=\"#.create()\">#</a></h3>\n<p>Create manually <code>interval()</code>,</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Observable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'rxjs'</span><span class=\"token punctuation\">;</span><br><br><span class=\"token keyword\">export</span> <span class=\"token operator\">...</span> <span class=\"token punctuation\">{</span><br>\t<span class=\"token keyword\">private</span> customObsSub<span class=\"token operator\">:</span> Subscription<span class=\"token punctuation\">;</span><br><br>\t<span class=\"token function\">ngOnInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\t<span class=\"token keyword\">const</span> customIntervalObs <span class=\"token operator\">=</span> Observable<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">observer</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>\t\t\t<span class=\"token keyword\">let</span> count <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span><br>\t\t\t<span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>\t\t\t\tobserver<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t\t\t\t\t\t<span class=\"token comment\">//  ^method to emit a new value, there are also: .error(), .complete()</span><br>\t\t\t\tcount<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span><br>\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><br>\t\tcustomObsSub <span class=\"token operator\">=</span> customIntervalObs<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>\t\t\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token punctuation\">}</span><br><br>\t<span class=\"token function\">ngOnDestroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span> <span class=\"token punctuation\">{</span><br>\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>customObsSub<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<h3 id=\".error()\"><code>.error()</code> <a class=\"direct-link\" href=\"#.error()\">#</a></h3>\n<p>If we send HTTP request → we usually get .</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// using the same structure of code as previous code box</span><br><span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>\tobserver<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>count <span class=\"token operator\">></span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\tobserver<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Count is greater than 3!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token punctuation\">}</span> <span class=\"token comment\">// stop subscription -> observer ends at \"4\"</span><br>\tcount<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><br>customObsSub <span class=\"token operator\">=</span> customIntervalObs<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// or you could send error to backend</span><br>\t<span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"Count is greater than 3!\"</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<h3 id=\".complete()\"><code>.complete()</code> <a class=\"direct-link\" href=\"#.complete()\">#</a></h3>\n<p>There are some observables can be completed → what we will do when it happens?</p>\n<p>Cancled due to an error IS DIFFERENT than it completes! → complete function in <code>.subscribe()</code> is not executed when there is an error!</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>\tobserver<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>count <span class=\"token operator\">===</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\tobserver<span class=\"token punctuation\">.</span><span class=\"token function\">complete</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// complete observable before count=3</span><br>\t<span class=\"token punctuation\">}</span><br>\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>count <span class=\"token operator\">></span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\tobserver<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Count is greater than 3!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token punctuation\">}</span><br>\tcount<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><br>customObsSub <span class=\"token operator\">=</span> customIntervalObs<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// or you could send error to backend</span><br>\t<span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"Count is greater than 3!\"</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Completed!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// you don't need to unsubscribe if your observable</span><br>\t\t\t\t\t\t\t\t\t\t\t\t\t\t <span class=\"token comment\">//   did complete BUT there nothing wrong if you</span><br>\t\t\t\t\t\t\t\t\t\t\t\t\t\t <span class=\"token comment\">//   keep using .unsubcribe()</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<h2 id=\"operators\">Operators <a class=\"direct-link\" href=\"#operators\">#</a></h2>\n<p>👉 <a href=\"https://www.learnrxjs.io/learn-rxjs/operators/\">Operators - Learn RxJS</a><br>\n👉 <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/blob/master/14-observable/obs-04-operators/src/app/home/home.component.ts\">Codes for this section</a>.</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> map <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'rxjs/operators'</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Operators are the magic features of the RxJS library turn observables → awesome construct!</p>\n<p><img src=\"/img/post/angular/angular-3/Untitled_1.png\" alt=\"Angular_3_-_Observable_f0445b12735d4542956fd4f2eefca8e4/Untitled_1.png\"></p>\n<p>Example: we wanna add &quot;Round&quot; before the number emiited (Round 1, Round 2,....) → an old option is to add &quot;Round&quot; in the <code>.subscribe()</code> function. → We can do that before theh subscription using Operators! ← <code>.pipe()</code> comes in!</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>firstObsSubscription <span class=\"token operator\">=</span> customIntervalObservable<span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>    <span class=\"token keyword\">return</span> data <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span><br>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data<span class=\"token operator\">:</span> number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>    <span class=\"token keyword\">return</span> <span class=\"token string\">'Round: '</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>data <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>We need a transformation of the received data before you subscribe → using operators.</p>\n<p>With <code>.pipe()</code>, we can apply 1 or more operators inside it!</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// import operators from rxjs/operators first!</span><br><span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>operator</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">, </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>operator</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">, ...)</code></pre>\n<h2 id=\"subjects\">Subjects <a class=\"direct-link\" href=\"#subjects\">#</a></h2>\n<p>👉 <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/blob/master/14-observable/obs-05-finished/src/app/user.service.ts\">Codes for this section</a>.</p>\n<p>Instead of using <code>EventEmitter</code> (from <code>@angular/core</code>), to emit and subscribe event between components, we can use a subject!</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// user.service.ts</span><br><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Subject <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'rxjs'</span><span class=\"token punctuation\">;</span><br><br>@<span class=\"token function\">Injectable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>providedIn<span class=\"token operator\">:</span> <span class=\"token string\">'root'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UserService</span> <span class=\"token punctuation\">{</span><br>  activatedEmitter <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Subject</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>boolean</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">();<br>}<br><br>// compare with using EventEmitter<br>@Injectable()<br>export ... </span><span class=\"token punctuation\">{</span><br>\tactivatedEmitter <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">EventEmitter</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>boolean</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">();<br>}</code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// user.component.ts</span><br><span class=\"token function\">onActivate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>userService<span class=\"token punctuation\">.</span>activatedEmitter<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span><br><br><span class=\"token comment\">// compare with EventEmitter</span><br><span class=\"token function\">onActivate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>userService<span class=\"token punctuation\">.</span>activatedEmitter<span class=\"token punctuation\">.</span><span class=\"token function\">emit</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// app.component.ts</span><br><span class=\"token comment\">// we use the same for both EventEmitter and Subject</span><br><span class=\"token function\">ngOnInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>userService<span class=\"token punctuation\">.</span>activateEmitter<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre>\n<p>Unlike normal observable (you can created) → <code>.next()</code> is used INSIDE the observable (when you created it) ← subject is different: we can call <code>.next()</code> outside the observable!</p>\n<p><img src=\"/img/post/angular/angular-3/Untitled_2.png\" alt=\"Angular_3_-_Observable_f0445b12735d4542956fd4f2eefca8e4/Untitled_2.png\"></p>\n<p>There are also other subclasses for Subjects: <code>BehaviorSubject</code>, <code>ReplaySubject</code>,...</p>\n<p><strong>GOOD PRACTICE</strong>:</p>\n<ul>\n<li>Don't use <code>EventEmitter</code>, use <code>Subject</code>!!!! ← don't forget to unsubcribe to Subect when you don't need them. ← by storing the subscription + then unsubscribe().\n<ul>\n<li>Only use Subject to communicate across components through services/mechanisms where you in the end subscribe to somewhere!\n<ul>\n<li>Not subscribe to an event which probably is an output if you do plan to subscribe manually!</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>ONLY USE <code>EventEmitter</code> on the <code>@Output</code> property!! ← EventEmitter gets cleaned auto (no need unsubscribe)</li>\n</ul>\n",
      "date_published": "2021-03-03T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/angular-2-service-dependency-injection-routing/",
      "url": "https://dinhanhthi.com/angular-2-service-dependency-injection-routing/",
      "title": "Angular 2 - Services &amp; DI &amp; Routing",
      "content_html": "<p>This is my note for the course &quot;<a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/13914134#overview\">Angular - The Complete Guide (2021 Edition)</a>&quot; which is taught by Maximilian Schwarzmüller on Udemy. This is an incredible course for you to start to learn Angular from basic. The official Angular docs is good but it's not for the beginner.</p>\n<p>🍄 <strong>PART 1</strong> — <a href=\"/angular-1-basics-components-databinding-directives/\">Angular  1 - Basics &amp; Components &amp; Databinding &amp; Directives</a><br>\n🍄 <strong>PART 2</strong> — <a href=\"/angular-2-service-dependency-injection-routing/\">Angular 2 - Services &amp; Dependency Injection &amp; Routing</a><br>\n🍄 <strong>PART 3</strong> — <a href=\"/angular-3-observable/\">Angular 3 - Observable</a><br>\n🍄 <strong>PART 4</strong> —  <a href=\"/angular-4-forms/\">Angular 4 - Forms</a><br>\n👉 <a href=\"https://github.com/dinhanhthi/learn-angular-complete-guide\">Github repo</a><br>\n👉 <strong>Other note</strong> (taken before this course): <a href=\"https://www.notion.so/Angular-101-fcbd5683f8e941f89c709595792b62d2\">Angular 101</a></p>\n<div class=\"warning\">\n<p>This note contains only the important things which can be look back later, it cannot replace either <a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/13914134#overview\">the course</a> nor <a href=\"https://angular.io/start\">the official document</a>!</p>\n</div>\n<h2 id=\"tips\"><strong>TIPS</strong> <a class=\"direct-link\" href=\"#tips\">#</a></h2>\n<p>Get a copy, not access directly,</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// for example</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></span> <span class=\"token punctuation\">{</span><br>\t<span class=\"token keyword\">private</span> recipes<span class=\"token operator\">:</span> Recipe<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><br><br>\t<span class=\"token function\">getRecipes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\t<span class=\"token comment\">// get a copy from outside, not access the original recipes</span><br>\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>recipes<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<p>👉 <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax\">Spread operator</a>. (<code>...var</code>)</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// ES6's feature (spread operator): tranform \"[a, b, c]\" to \"a, b, c\"</span><br><span class=\"token comment\">// because we cannot .push([]), but we can .push(a,b,c)</span><br><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>ingredients<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>ingredients<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- if we just bind a string --></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">abcXyz</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>abc<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">[abcXyz]</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">'</span>abc<span class=\"token punctuation\">'</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">[abcXyz]</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>[<span class=\"token punctuation\">'</span>abc<span class=\"token punctuation\">'</span>]<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br><br><span class=\"token comment\">&lt;!-- if we bind objects --></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">abcXyz</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// convert from string to number</span><br><span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> <span class=\"token operator\">+</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>abc<span class=\"token punctuation\">[</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// just add \"+\" before it!</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// an optional param in a method</span><br><span class=\"token function\">abc</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">required_1<span class=\"token punctuation\">,</span> required_2<span class=\"token punctuation\">,</span> optional<span class=\"token operator\">?</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// with \"?\"</span><br>\t<span class=\"token operator\">...</span><br><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// When creating a new service (example.service.ts), you wanna add it in</span><br><span class=\"token comment\">// app.module.ts in the section \"providers\"</span><br><br><span class=\"token comment\">// You can make a shortcut right in the file example.service.ts</span><br><span class=\"token comment\">// and no need to give it name in app.module.ts</span><br>@<span class=\"token function\">Injectable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>providedIn<span class=\"token operator\">:</span> <span class=\"token string\">'root'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// inject a service in a component</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></span> <span class=\"token punctuation\">{</span><br>\t<span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">private</span> serviceName<span class=\"token operator\">:</span> ServiceName</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span><br>\t<span class=\"token comment\">// then you can use it here!</span><br><span class=\"token punctuation\">}</span></code></pre>\n<h2 id=\"services-%26-dependency-injection\">Services &amp; Dependency Injection <a class=\"direct-link\" href=\"#services-%26-dependency-injection\">#</a></h2>\n<h3 id=\"service%3F\">Service? <a class=\"direct-link\" href=\"#service%3F\">#</a></h3>\n<ul>\n<li>Don't duplicate tasks.</li>\n<li>Access data and used in somewhere.</li>\n<li>Just another class which help centralize your codes.</li>\n</ul>\n<p><img src=\"/img/post/angular/angular-2/Untitled.png\" alt=\"Angular_2_-Services&amp;Dependency_Injection&amp;_Rout_fb1390f6e4ee48849ae39feb665bdf1b/Untitled.png\"></p>\n<p>Why we need services? If we don't use, just use what we have (binding, emit,...) → more components and they need to communicate to each other → too complicated!</p>\n<h3 id=\"di-%26-logging-service\">DI &amp; Logging service <a class=\"direct-link\" href=\"#di-%26-logging-service\">#</a></h3>\n<ul>\n<li><a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656208#questions/7884774\">Course video</a>.</li>\n<li>Naming: <code>logging.service.ts</code></li>\n<li>There is NO DECORATOR like @Service() → just a normal typescript class!</li>\n</ul>\n<p>DI injects class (of a service) into our component automatically. ← we need to inform angular that we need to add this instant → add a constructor</p>\n<p>👉 <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/09-services-final/src/app\">Codes for this section</a>.</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// new-account.component.ts</span><br><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> LoggingService <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../logging.service'</span><span class=\"token punctuation\">;</span><br><br>@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><br>\tproviders<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>LoggingService<span class=\"token punctuation\">]</span> <span class=\"token comment\">// 2) angular know how to gives us this instan</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></span> <span class=\"token punctuation\">{</span><br><br>\t<span class=\"token comment\">// 1) tell angular: we need an instance of LoggingService class</span><br>\t<span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">private</span> loggingService<span class=\"token operator\">:</span> LoggingService</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><br>\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//  ^ custom name</span><br><br>\t<span class=\"token comment\">// use it</span><br>\t<span class=\"token function\">onCreateAccount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\t<span class=\"token operator\">...</span><br>\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>loggingService<span class=\"token punctuation\">.</span><span class=\"token function\">logStatusChange</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// angular created this for us auto</span><br><span class=\"token comment\">//  ^ reuse this line multiple times in multiple components</span><br>\t<span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<h3 id=\"data-service\">Data Service <a class=\"direct-link\" href=\"#data-service\">#</a></h3>\n<p>Service: store and manage our data → exchange property &amp; event binding → get event to app component.</p>\n<p>👉 <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/09-services-final/src/app\">Codes for this section</a>.</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// reference pointing</span><br><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>accounts <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>accountsService<span class=\"token punctuation\">.</span>accounts<span class=\"token punctuation\">;</span><br><span class=\"token comment\">// they are actually the same object (ie. this.accountsService.accounts)</span></code></pre>\n<p>Without account services, we have to emit &amp; output our data and event (add acc for example). However, with services, we don't need them anymore, just inject the service and put the account into it!</p>\n<h3 id=\"hierarchical-injector\">Hierarchical injector <a class=\"direct-link\" href=\"#hierarchical-injector\">#</a></h3>\n<p>Inject a service to father → all its child component get the same instance of the service! ⇒ only go down in the tree components → if there is a duplicate in child, it will overwrite the father's.</p>\n<p><img src=\"/img/post/angular/angular-2/Untitled_1.png\" alt=\"Angular_2_-Services&amp;Dependency_Injection&amp;_Rout_fb1390f6e4ee48849ae39feb665bdf1b/Untitled_1.png\"></p>\n<p>[<a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656222#overview\">video</a>] If don't want create A NEW INSTANCE IN CHILD (which will overwrite the one coming from father) → just remove the service in <code>providers</code>! → it will use the service of the father.</p>\n<h3 id=\"inject-services-into-services\">Inject Services into Services <a class=\"direct-link\" href=\"#inject-services-into-services\">#</a></h3>\n<ul>\n<li>\n<p>Normally, if service A doesn't contain (inject) any service → no need <code>@Injectable()</code></p>\n</li>\n<li>\n<p>If we wanna inject service B into service A → we need to add <code>@Injectable()</code> into A (not B!!!!)</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// service B</span><br><br><span class=\"token comment\">// service A</span><br>@<span class=\"token function\">Injectable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ServiceA</span> <span class=\"token punctuation\">{</span><br>\t<span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">private</span> serviceB<span class=\"token operator\">:</span> ServiceB</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><br>\t<span class=\"token comment\">// something using serviceB</span><br><span class=\"token punctuation\">}</span></code></pre>\n</li>\n</ul>\n<p><strong>GOOD PRACTICE</strong>: ALWAYS ADD <code>@Injectable()</code> for all services!</p>\n<h3 id=\"services-with-cross-components\">Services with cross-components <a class=\"direct-link\" href=\"#services-with-cross-components\">#</a></h3>\n<p>With services, we don't have to build complex inputs, outputs chanes where you pass events and properties to get data from component A to B,... → much cleaner!</p>\n<p>👉 <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/09-services-final/src/app\">Codes for this section</a>.</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// accounts.service.ts</span><br>@<span class=\"token function\">Injectable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AccountsService</span> <span class=\"token punctuation\">{</span><br>\tstatusUpdated <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">EventEmitter</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>string</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">();<br>}<br><br>// account.component.ts<br>@Component(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">)<br>export class AccountComponent </span><span class=\"token punctuation\">{</span><br>  @<span class=\"token function\">Input</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> account<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>name<span class=\"token operator\">:</span> string<span class=\"token punctuation\">,</span> status<span class=\"token operator\">:</span> string<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span><br>  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">private</span> accountsService<span class=\"token operator\">:</span> AccountsService</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><br>\t\t\t\t\t <span class=\"token comment\">// ^ a shorthand to create a property with the same name as</span><br>\t\t\t\t\t <span class=\"token comment\">//   \"accountService\" &lt;- we can \"this.accountService\".</span><br>  <span class=\"token function\">onSetTo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">status<span class=\"token operator\">:</span> string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token operator\">...</span><br>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>accountsService<span class=\"token punctuation\">.</span>statusUpdated<span class=\"token punctuation\">.</span><span class=\"token function\">emit</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// emit an event</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span><span class=\"token plain-text\"><br><br>// new-account.component.ts<br>@Component(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">)<br>export class NewAccountComponent </span><span class=\"token punctuation\">{</span><br>\t<span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">private</span> accountsService<span class=\"token operator\">:</span> AccountsService</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>accountsService<span class=\"token punctuation\">.</span>statusUpdated<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span> <span class=\"token comment\">// event is observable!</span><br>      <span class=\"token punctuation\">(</span><span class=\"token parameter\">status<span class=\"token operator\">:</span> string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'New Status: '</span> <span class=\"token operator\">+</span> status<span class=\"token punctuation\">)</span> <span class=\"token comment\">// capture that event!</span><br>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></code></pre>\n<p>👉 Example: <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/10-services-assignment-solution/src/app\">exchange active / inactive users</a>.<br>\n👉 <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/11-prj-services-final/src/app/recipes\">Project with recipes and shopping-list</a>. (change from using EventEmitter to service) — <a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656236#overview\">videos</a></p>\n<h3 id=\"service---pushing-data-from-a-b\">Service - pushing data from A-B <a class=\"direct-link\" href=\"#service---pushing-data-from-a-b\">#</a></h3>\n<p>When we use <code>.slice()</code> to copy a list (to work on this), there may be some event cannot access the original one (eg. when using <code>addIngredients</code>) → we need to emit an event containing the original list.</p>\n<p>👉 <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/11-prj-services-final/src/app/shopping-list\">Codes for this section</a></p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// shopping-list.service.ts</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></span> <span class=\"token punctuation\">{</span><br>\tingredientsChanged <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">EventEmitter</span><span class=\"token operator\">&lt;</span>Ingredient<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token keyword\">private</span> ingredients<span class=\"token operator\">:</span> Ingredient<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token operator\">...</span><br>\t<span class=\"token function\">addIngredient</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ingredient<span class=\"token operator\">:</span> Ingredient</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>ingredients<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>ingredient<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>ingredientsChanged<span class=\"token punctuation\">.</span><span class=\"token function\">emit</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>ingredients<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// shopping-list.component.ts</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">OnInit</span> <span class=\"token punctuation\">{</span><br>\tingredients<span class=\"token operator\">:</span> Ingredient<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">private</span> slService<span class=\"token operator\">:</span> ShoppingListService</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span><br>\t<span class=\"token function\">ngOnInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t  <span class=\"token operator\">...</span><br>\t  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>slService<span class=\"token punctuation\">.</span>ingredientsChanged<br>\t    <span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><br>\t      <span class=\"token punctuation\">(</span><span class=\"token parameter\">ingredients<span class=\"token operator\">:</span> Ingredient<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>\t        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>ingredients <span class=\"token operator\">=</span> ingredients<span class=\"token punctuation\">;</span><br>\t      <span class=\"token punctuation\">}</span><br>\t    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<h2 id=\"routing-%E2%86%92-change-pages\">Routing → change pages <a class=\"direct-link\" href=\"#routing-%E2%86%92-change-pages\">#</a></h2>\n<p>👉 <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/12-routing-final/src/app\">Codes for this section</a><br>\n👉 <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/13-prj-routing-final/src/app\">Example of final project using routing</a>.</p>\n<h3 id=\"adding-routes\">Adding Routes <a class=\"direct-link\" href=\"#adding-routes\">#</a></h3>\n<p>Angular ships its own <em>router</em> which allows to change URLs of our application.</p>\n<p>Where? ⇒ Because the router controls URLs of all things in our apps, the place we can put it is in <code>app.module.ts</code></p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// app-routing.module.ts</span><br><span class=\"token comment\">//----------------------</span><br><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Routes<span class=\"token punctuation\">,</span> RouterModule <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/router'</span><span class=\"token punctuation\">;</span><br><br><span class=\"token keyword\">const</span> appRoutes<span class=\"token operator\">:</span> Routes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><br>\t<span class=\"token punctuation\">{</span> path<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> component<span class=\"token operator\">:</span> HomeComponent <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token punctuation\">{</span> path<span class=\"token operator\">:</span> <span class=\"token string\">'users'</span><span class=\"token punctuation\">,</span> component<span class=\"token operator\">:</span> UsersComponent <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// something: http//localhost:4200/users</span><br>\t\t\t\t<span class=\"token comment\">//^ without \"/\"</span><br>\t<span class=\"token punctuation\">{</span> path<span class=\"token operator\">:</span> <span class=\"token string\">'servers'</span><span class=\"token punctuation\">,</span> component<span class=\"token operator\">:</span> ServersComponent <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">]</span><br><br>@<span class=\"token function\">NgModule</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><br>\t<span class=\"token keyword\">import</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><br>\t\tRouterModule<span class=\"token punctuation\">.</span><span class=\"token function\">forRoot</span><span class=\"token punctuation\">(</span>appRoutes<span class=\"token punctuation\">)</span><br>\t\t\t\t\t\t\t<span class=\"token comment\">// ^ register our routes to the RouterModule of our app</span><br>\t<span class=\"token punctuation\">]</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// where to display component after click?</span><br><span class=\"token comment\">// app.component.html</span><br><span class=\"token comment\">//----------------------</span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>router-outlet</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>router-outlet</span><span class=\"token punctuation\">></span></span> <span class=\"token comment\">// &lt;- a directive shipped by angular!!!</span></code></pre>\n<h3 id=\"routerlink\"><code>routerLink</code> <a class=\"direct-link\" href=\"#routerlink\">#</a></h3>\n<p>Add some links to app (<a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656284#overview\">video</a>)</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- if we add links to a normal &lt;a> => it will reload the app! --></span><br><span class=\"token comment\">&lt;!-- => USE A SPECIAL DIRECTIVE \"rounterLink\" --></span><br><span class=\"token comment\">&lt;!-- app.component.html --></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">routerLink</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">routerLink</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/servers<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">[routerLink]</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>[<span class=\"token punctuation\">'</span>/users<span class=\"token punctuation\">'</span>]<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br>\t\t\t<span class=\"token comment\">&lt;!-- ^ we can use \"'/users'\" &lt;- has to have '' because without it, --></span><br>\t\t\t<span class=\"token comment\">&lt;!-- |   angular will look for a property \"/users\" instead of a string --></span><br>\t\t\t<span class=\"token comment\">&lt;!-- ^ we use [] to add more complicated path here --></span><br>\t\t\t<span class=\"token comment\">&lt;!--   for example, ['/users', 'something'] &lt;- /users/something --></span><br><br><span class=\"token comment\">&lt;!-- routerLink capture the click event + prevent the default behavior (which reloads --></span><br><span class=\"token comment\">&lt;!-- entire our app) --></span></code></pre>\n<h3 id=\"understand-paths\">Understand paths <a class=\"direct-link\" href=\"#understand-paths\">#</a></h3>\n<p>(<a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656286#overview\">video</a>) Why we need <code>&quot;/&quot;</code> before <code>&quot;/servers&quot;</code>? → if we on home page, it't normal, but if we in subpage (eg. /servers), if there is another link to &quot;servers&quot; (eg. <code>&lt;a routerLink='servers'&gt;</code>), it will be &quot;<code>/servers/servers</code>&quot; ← error!!!</p>\n<p>We can <em>relative / absolute paths</em> inside <code>routerLink</code>.</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\">routerLink<span class=\"token operator\">=</span><span class=\"token string\">\"/abc\"</span> <span class=\"token comment\">// abs path: localhost:4200/abc</span><br>routerLink<span class=\"token operator\">=</span><span class=\"token string\">\"abc\"</span> <span class=\"token comment\">// if you are in localhost:4200/xyz -> localhost:4200/xyz/abc</span><br>routerLink<span class=\"token operator\">=</span><span class=\"token string\">\"./abc\"</span> <span class=\"token comment\">// relative path: current position + /abc</span><br>routerLink<span class=\"token operator\">=</span><span class=\"token string\">\"../abc\"</span> <span class=\"token comment\">// relative path: father path + /abc</span></code></pre>\n<h3 id=\"routerlinkactive\"><code>routerLinkActive</code> <a class=\"direct-link\" href=\"#routerlinkactive\">#</a></h3>\n<p>We use <code>&lt;a class=&quot;active&quot;&gt;</code> for current tab. ← how to use angular to add/remove this class auto?</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// don't forget to add \"routerLinkActive\" to ALL \"li\"</span><br><span class=\"token operator\">&lt;</span>li routerLinkActive<span class=\"token operator\">=</span><span class=\"token string\">\"active\"</span> <span class=\"token punctuation\">[</span>routerLinkActiveOptions<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token string\">\"{exact: true}\"</span><span class=\"token operator\">></span><br>\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//  ^css class                      //  ^only active if it's exactly the FULL path</span><br>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">routerLink</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/servers<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Servers</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><br><br><span class=\"token comment\">// we add \"routerLinkAcitve\" inside &lt;a> if we want</span></code></pre>\n<p>(<a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656288#overview\">video</a>) <code>routerLinkActive</code> will check if the current path contains the path given in <code>routerLink</code> ← the empty path, ie. <code>&quot;/&quot;</code> is in all paths!!! → this may lead to a problem in which &quot;Home&quot; tab is always &quot;active&quot; ⇒ we need <code>routerLinkActiveOptions</code></p>\n<h3 id=\"navigating-programmatically\">Navigating programmatically <a class=\"direct-link\" href=\"#navigating-programmatically\">#</a></h3>\n<p>Perform navigation after users click on some button, for example.</p>\n<p>👉 <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/12-routing-final/src/app\">Codes for this section</a></p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// home.component.html</span><br><span class=\"token operator\">&lt;</span><span class=\"token function\">button</span> <span class=\"token punctuation\">(</span>click<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token string\">\"onLoadServers()\"</span><span class=\"token operator\">></span>Load servers<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><br><br><span class=\"token comment\">// home.component.ts</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></span> <span class=\"token punctuation\">{</span><br>\t<span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">private</span> router<span class=\"token operator\">:</span> Router</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span><br>\t<span class=\"token function\">onLoadServers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\t<span class=\"token comment\">// complex calculations</span><br>\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>router<span class=\"token punctuation\">.</span><span class=\"token function\">navigate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'/servers'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<p>If we want <code>.navigate()</code> knows where we are,</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// servers.component.html</span><br><span class=\"token operator\">&lt;</span><span class=\"token function\">button</span> <span class=\"token punctuation\">(</span>click<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token string\">\"onReload()\"</span><span class=\"token operator\">></span>Reload page<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><br><br><span class=\"token comment\">// servers.component.html</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></span> <span class=\"token punctuation\">{</span><br>\t<span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">private</span> router<span class=\"token operator\">:</span> Router<span class=\"token punctuation\">,</span><br>\t\t\t\t\t\t\t<span class=\"token keyword\">private</span> route<span class=\"token operator\">:</span> ActivatedRoute</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">// ^simply inject current route which load the component</span><br>\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">// a route => simply a javascript object</span><br><span class=\"token punctuation\">}</span><br><br>\t<span class=\"token function\">onReload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>router<span class=\"token punctuation\">.</span><span class=\"token function\">navigate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'/servers'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t\t\t\t\t\t<span class=\"token comment\">// ^with this method, we don't get the problem of</span><br>\t\t\t\t\t\t<span class=\"token comment\">// /servers/servers like in routerLink if we use ['servers']</span><br>\t\t\t\t\t\t<span class=\"token comment\">// REASON: .navigate() doesn't know where we currently are, it just</span><br>\t\t\t\t\t\t<span class=\"token comment\">//   know the path of template -> '/servers' is the same as 'servers'</span><br><br>\t\t<span class=\"token comment\">// If we wanna use relative path with .navigate()?</span><br>\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>router<span class=\"token punctuation\">.</span><span class=\"token function\">navigate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'/servers'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>relativeTo<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>route<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//  ^             ^with this, angular knows what is currenty</span><br>\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//  |                active route</span><br>\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//  | we can use ['../'] (like a relative path)</span><br>\t<span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<h3 id=\"add-params-to-route\">Add params to Route <a class=\"direct-link\" href=\"#add-params-to-route\">#</a></h3>\n<p>(Videos: <a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656296#overview\">Passing params to Routes</a> + <a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656298#overview\">Fetching Route params</a> + <a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656302#overview\">fetch reactively</a>) For example we wanna navigate to users, each user a path → change with ids. ← <code>id</code> will be the param of the Route.</p>\n<p>👉 <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/12-routing-final/src/app\">Codes for this section</a>.</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// app-routing.module.ts</span><br><span class=\"token keyword\">const</span> appRoutes<span class=\"token operator\">:</span> Routes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><br>\t<span class=\"token punctuation\">{</span> path<span class=\"token operator\">:</span> <span class=\"token string\">'users/:id/:name'</span><span class=\"token punctuation\">,</span> component<span class=\"token operator\">:</span> UserComponent <span class=\"token punctuation\">}</span><br>\t\t\t\t\t<span class=\"token comment\">//     ^without this, localhost/users/something will get error!</span><br><span class=\"token punctuation\">]</span></code></pre>\n<p>Get the <code>id</code> from the router,</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// user.component.ts</span><br><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ActivatedRoute<span class=\"token punctuation\">,</span> Params <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/router'</span><span class=\"token punctuation\">;</span><br><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Subscription <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'rxjs/Subscription'</span><span class=\"token punctuation\">;</span><br><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></span> <span class=\"token punctuation\">{</span><br>\tuser<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>id<span class=\"token operator\">:</span> number<span class=\"token punctuation\">,</span> name<span class=\"token operator\">:</span> string<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span><br>\tparamsSubscription<span class=\"token operator\">:</span> Subscription<span class=\"token punctuation\">;</span><br><br>\t<span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">private</span> route<span class=\"token operator\">:</span> ActivatedRoute</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span><br>\t\t\t\t\t<span class=\"token comment\">//  ^ gives us access to the id passed in the URL -> selected user</span><br><br>\t<span class=\"token function\">ngOninit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\t<span class=\"token comment\">// OPTION 1: INITIAL ONLY</span><br>\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>user <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><br>\t\t\tid<span class=\"token operator\">:</span> <span class=\"token operator\">+</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>route<span class=\"token punctuation\">.</span>snapshot<span class=\"token punctuation\">.</span>params<span class=\"token punctuation\">[</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// &lt;- from 'users/:id'</span><br>\t\t\t\t\t\t\t\t<span class=\"token comment\">//   ^it's just a snapshot of the 1st initialization</span><br>\t\t\tname<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>route<span class=\"token punctuation\">.</span>snapshot<span class=\"token punctuation\">.</span>params<span class=\"token punctuation\">[</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">// &lt;- from 'users/:id/:name'</span><br>\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//     if we change url dynamically, it won't work!</span><br>\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span><br><br>\t\t<span class=\"token comment\">// OPTION 2: subscribe to the change of url (whenever we click)</span><br>\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>paramsSubscription<br>\t\t\t<span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>route<span class=\"token punctuation\">.</span>params<br>\t\t\t\t\t\t\t <span class=\"token comment\">// ^it's an observable -> help you work with async tasks</span><br>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t <span class=\"token comment\">//   ^in the future, users perform some tasks</span><br>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t <span class=\"token comment\">//   -> you don't know where, when, how long,...</span><br>\t      <span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><br>\t        <span class=\"token punctuation\">(</span><span class=\"token parameter\">params<span class=\"token operator\">:</span> Params</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>\t          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> <span class=\"token operator\">+</span>params<span class=\"token punctuation\">[</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"+\" to convert to number</span><br>\t          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><br>\t        <span class=\"token punctuation\">}</span><br>\t      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token punctuation\">}</span><br><br>\t<span class=\"token function\">ngOnDestroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>paramsSubscription<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// end of subscription!</span><br>\t\t<span class=\"token comment\">// in fact, for this router, you don't have to do this because</span><br>\t\t<span class=\"token comment\">//   angular will destroy the subscription for you</span><br>\t\t<span class=\"token comment\">//   but in general case for OBSERVABLE THAT YOU CREATED,</span><br>\t\t<span class=\"token comment\">//   you should .unsubcribe() it!</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// user.component.html</span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">User with ID </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">User with name </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></code></pre>\n<p><strong>GOOD PRACTICE:</strong> Always <code>.unsubscribe()</code> the observable has been created!</p>\n<h3 id=\"query-params-(%3F...)\">Query params (?...) <a class=\"direct-link\" href=\"#query-params-(%3F...)\">#</a></h3>\n<p>👉 <a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656308#overview\">Video for this section</a>.</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// inside an a tag in html</span><br><span class=\"token operator\">&lt;</span>a<br>  <span class=\"token punctuation\">[</span>routerLink<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token string\">\"['/servers', server.id]\"</span> <span class=\"token comment\">// locahost/servers/3</span><br>  <span class=\"token punctuation\">[</span>queryParams<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token string\">\"{allowEdit: server.id === 3 ? '1' : '0'}\"</span> <span class=\"token comment\">// .../3?allowEdit=1</span><br>  fragment<span class=\"token operator\">=</span><span class=\"token string\">\"loading\"</span> <span class=\"token comment\">// ...?allowEdit=1#loading</span><br>  <span class=\"token operator\">></span><br>  <br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// navigate from a button?</span><br><span class=\"token comment\">// servers.component.html</span><br><span class=\"token operator\">&lt;</span><span class=\"token function\">button</span> <span class=\"token punctuation\">(</span>click<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token string\">\"onReload()\"</span><span class=\"token operator\">></span>Reload page<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// servers.component.html</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></span> <span class=\"token punctuation\">{</span><br>\t<span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">private</span> router<span class=\"token operator\">:</span> Router</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span><br><br>\t<span class=\"token function\">onReload</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">id<span class=\"token operator\">:</span> number</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\t<span class=\"token comment\">// localhost/servers/1/edit?allowEdit=1#loading</span><br>\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>router<span class=\"token punctuation\">.</span><span class=\"token function\">navigate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'/servers'</span><span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">,</span> <span class=\"token string\">'edit'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><br>\t\t\t<span class=\"token punctuation\">{</span><br>\t\t\t\tqueryParams<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>allowEdit<span class=\"token operator\">:</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t\t\t\tfragment<span class=\"token operator\">:</span> <span class=\"token string\">'loading'</span><br>\t\t\t<span class=\"token punctuation\">}</span><br>\t\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<p>How to retrieve the informatoin from the URLs? ⇒ check <a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656314#overview\">video</a>.</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// edit-server.component.ts</span><br><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">private</span> route<span class=\"token operator\">:</span> ActivatedRoute</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span><br>\t\t\t\t\t\t\t\t <span class=\"token comment\">// ^simply inject current route which load the component</span><br><br><span class=\"token comment\">// 1st approach -> only get the ones created on init</span><br><span class=\"token function\">ngOnInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>route<span class=\"token punctuation\">.</span>snapshot<span class=\"token punctuation\">.</span>queryParams<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>route<span class=\"token punctuation\">.</span>snapshot<span class=\"token punctuation\">.</span>fragment<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span><br><br><span class=\"token comment\">// 2nd approach -> allow you to react to the change of query params</span><br><span class=\"token function\">ngOnInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>route<span class=\"token punctuation\">.</span>queryParams<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>route<span class=\"token punctuation\">.</span>fragement<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre>\n<h3 id=\"nested-%2F-child-router\">Nested / Child router <a class=\"direct-link\" href=\"#nested-%2F-child-router\">#</a></h3>\n<p>(<a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656322#overview\">video</a> + <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/12-routing-final/src/app\">codes</a>) No need to change to a new page for each child component, just display them on a sidebar (a part of the view) when we click on the navigator.</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// app-routing.module.ts</span><br><span class=\"token keyword\">const</span> appRoutes<span class=\"token operator\">:</span> Routes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><br>\t<span class=\"token punctuation\">{</span> path<span class=\"token operator\">:</span> <span class=\"token string\">'servers'</span><span class=\"token punctuation\">,</span> component<span class=\"token operator\">:</span> ServersComponent<span class=\"token punctuation\">,</span> children<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><br>\t\t<span class=\"token punctuation\">{</span>path<span class=\"token operator\">:</span> <span class=\"token string\">':id'</span><span class=\"token punctuation\">,</span> component<span class=\"token operator\">:</span> ServerComponent<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token punctuation\">{</span>path<span class=\"token operator\">:</span> <span class=\"token string\">':id/edit'</span><span class=\"token punctuation\">,</span> component<span class=\"token operator\">:</span> EditServerComponent <span class=\"token punctuation\">}</span><br>\t<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">]</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// servers.component.html</span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>router-outlet</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>router-outlet</span><span class=\"token punctuation\">></span></span> <span class=\"token comment\">// replace \"old\" &lt;app-server> and &lt;app-edit-server></span><br><span class=\"token comment\">//^ all the child routes inside this component will be shipped by angular</span><br><span class=\"token comment\">//  -> that's why we have several \"the same\" &lt;router-outlet> in our app</span></code></pre>\n<h3 id=\"preserve-query-params-between-paths\">Preserve query params between paths <a class=\"direct-link\" href=\"#preserve-query-params-between-paths\">#</a></h3>\n<p>Before enter to edit-server, there is <code>?allowEdit=1</code>, however, after navigate to edit-server, this info is gone. How to preserve it?</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// server.component.ts</span><br><span class=\"token function\">onEdit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>router<span class=\"token punctuation\">.</span><span class=\"token function\">navigate</span><span class=\"token punctuation\">(</span><br>\t\t<span class=\"token punctuation\">[</span><span class=\"token string\">'edit'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token punctuation\">{</span><br>\t\t\trelativeTo<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>route<span class=\"token punctuation\">,</span><br>\t\t\tqueryParamsHandling<span class=\"token operator\">:</span> <span class=\"token string\">'preserve'</span><br>\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//   ^keep the old + overwrite to the new one</span><br>\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//   ^'merge' if you wanna merge old + new</span><br>\t\t<span class=\"token punctuation\">}</span><br>\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre>\n<h3 id=\"redirect-%26-wildcat-routes\">Redirect &amp; wildcat routes <a class=\"direct-link\" href=\"#redirect-%26-wildcat-routes\">#</a></h3>\n<p>For example: building 404 page.</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> appRoutes<span class=\"token operator\">:</span> Routes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><br>\t<span class=\"token punctuation\">{</span> path<span class=\"token operator\">:</span> <span class=\"token string\">'not-found'</span><span class=\"token punctuation\">,</span> component<span class=\"token operator\">:</span> PageNoteFoundComponent <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token comment\">// a specific path</span><br>\t<span class=\"token punctuation\">{</span> path<span class=\"token operator\">:</span> <span class=\"token string\">'something'</span><span class=\"token punctuation\">,</span> redirectTo<span class=\"token operator\">:</span> <span class=\"token string\">'/not-found'</span>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// redirect /something to /not-found</span><br>\t<span class=\"token comment\">// all the paths (performed after THE ABOVE &lt;- order makes sense!!!!)</span><br>\t<span class=\"token punctuation\">{</span> path<span class=\"token operator\">:</span> <span class=\"token string\">'**'</span><span class=\"token punctuation\">,</span> redirectTo<span class=\"token operator\">:</span> <span class=\"token string\">'/not-found'</span> <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">]</span></code></pre>\n<p>Error of <code>path: ''</code> (nothing) ← default behavior to check in angular is &quot;prefix&quot; (check from beginning) → every urls contains this &quot;nothing&quot; (<code>''</code>)</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// errors</span><br><span class=\"token punctuation\">{</span> path<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> redirectTo<span class=\"token operator\">:</span> <span class=\"token string\">'/somewhere-else'</span> <span class=\"token punctuation\">}</span><br><br><span class=\"token comment\">// fix</span><br><span class=\"token punctuation\">{</span> path<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> redirectTo<span class=\"token operator\">:</span> <span class=\"token string\">'/somewhere-else'</span><span class=\"token punctuation\">,</span> pathMatch<span class=\"token operator\">:</span> <span class=\"token string\">'full'</span> <span class=\"token punctuation\">}</span></code></pre>\n<h3 id=\"app-routing.module.ts\"><code>app-routing.module.ts</code> <a class=\"direct-link\" href=\"#app-routing.module.ts\">#</a></h3>\n<p>Store all routing tasks in a single file. → no need to stored in <code>app.module.ts</code>.</p>\n<p>👉 <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/blob/master/12-routing-final/src/app/app-routing.module.ts\">Example file</a>.</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// app-routing.module.ts</span><br><span class=\"token comment\">// no need to re-declare components like already done in app.module.ts</span><br><span class=\"token keyword\">const</span> appRoutes<span class=\"token operator\">:</span> Routes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><br><br>@<span class=\"token function\">NgModule</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><br>\timports<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><br>\t\tRouterModule<span class=\"token punctuation\">.</span><span class=\"token function\">forRoot</span><span class=\"token punctuation\">(</span>appRoutes<span class=\"token punctuation\">)</span><br>\t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><br>\texports<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>RouterModule<span class=\"token punctuation\">]</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppRoutingModule</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// app.module.ts</span><br><span class=\"token operator\">...</span><br>@<span class=\"token function\">NgModule</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><br>\t<span class=\"token operator\">...</span><br>\timports<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><br>\t\tAppRoutingModule<br>\t<span class=\"token punctuation\">]</span><br>\t<span class=\"token operator\">...</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"login-%26-guards-%26-authentication\">Login &amp; Guards &amp; Authentication <a class=\"direct-link\" href=\"#login-%26-guards-%26-authentication\">#</a></h3>\n<p>(<a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656342#overview\">video</a>) Create <code>auth-guard.service.ts</code> (<a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/blob/master/12-routing-final/src/app/auth-guard.service.ts\">file</a>) containing the service to control the authentication. → use <code>CanActivate</code> ← <mark>angular executes this before router loaded!</mark></p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// auth-guard.service.ts</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AuthGuard</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">{</span><br>\t<span class=\"token function\">canActivate</span><span class=\"token punctuation\">(</span><br>\t  state<span class=\"token operator\">:</span> RouterStateSnapshot<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Observable<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>boolean</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> | Promise</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>boolean</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> | boolean </span><span class=\"token punctuation\">{</span><br><br>\t<span class=\"token comment\">// Obersvable / Promise -> some tasks need auth from server/databse &lt;- async</span><br>\t<span class=\"token comment\">// boolean -> some tasks completely on client &lt;- sync</span><br><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></code></pre>\n<p>Example: <code>auth.service.ts</code> → a fake service for the testing. In real app, we use this file to get the info / confirmation from the server about the authentication!</p>\n<p>Apply to routes?</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// app-routing.module.ts</span><br><span class=\"token punctuation\">{</span>path<span class=\"token operator\">:</span> <span class=\"token string\">'...'</span><span class=\"token punctuation\">,</span> canActivate<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>AuthGuard<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> component<span class=\"token operator\">:</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">,</span> children<span class=\"token operator\">:</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">}</span> <span class=\"token comment\">// apply also for children</span><br><span class=\"token comment\">//            ^add this to the path you wanna apply auth</span></code></pre>\n<p>(<a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656356#overview\">video</a>) Show the father route list, only protect child routes? → use <code>CanActivateChild</code></p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// auth-guard.service.ts</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AuthGuard</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">{</span><br>\t<span class=\"token function\">canActivate</span><span class=\"token punctuation\">(</span><br>\t  state<span class=\"token operator\">:</span> RouterStateSnapshot<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Observable<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>boolean</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> | Promise</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>boolean</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> | boolean </span><span class=\"token punctuation\">{</span><br><br>\t<span class=\"token function\">canActivateChild</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token operator\">...</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span><span class=\"token plain-text\"><br><br>// app-routing.module.ts<br></span><span class=\"token punctuation\">{</span>path<span class=\"token operator\">:</span> <span class=\"token string\">'...'</span><span class=\"token punctuation\">,</span> canActivateChild<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>AuthGuard<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> component<span class=\"token operator\">:</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">,</span> children<span class=\"token operator\">:</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></code></pre>\n<p>(<a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656346#overview\">video</a> + <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/blob/master/12-routing-final/src/app/servers/edit-server/can-deactivate-guard.service.ts\">file</a>) Control whether you are allowed to leave a route or not ← <mark>Confirm to leave the input/changes</mark>!!! solve the problem of user accidentially navigating away!!!</p>\n<p><strong>Idea</strong>: angular router can execute <code>canDeactivate()</code> in a service (<code>can-deactivate-guard.service.ts</code>) &gt; component we are currently on has <code>canDeactivate()</code> ← how guard communicates with our components.</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// can-deactivate-guard.service.ts</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">CanComponentDeactivate</span> <span class=\"token punctuation\">{</span><br>\t<span class=\"token function-variable function\">canDeactivate</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Observable<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>boolean</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> | Promise</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>boolean</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> | boolean;<br>}<br><br>export class CanDeactivateGuard implements canDeactivate</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CanComponentDeactivate</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> </span><span class=\"token punctuation\">{</span><br>\t<span class=\"token function\">canDeactivate</span><span class=\"token punctuation\">(</span>component<span class=\"token operator\">:</span> CanComponentDeactivate<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token operator\">...</span> <span class=\"token punctuation\">{</span><br>\t\t<span class=\"token keyword\">return</span> component<span class=\"token punctuation\">.</span><span class=\"token function\">canDeactivate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// app-routing.module.ts</span><br><span class=\"token punctuation\">{</span>path<span class=\"token operator\">:</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">,</span> canDeactivate<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>CanDeactivateGuard<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><br><br><span class=\"token comment\">// app.module.ts</span><br>providers<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>CanDeactivate<span class=\"token punctuation\">]</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// edit-server.component.ts</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">CanComponentDeactivate</span> <span class=\"token punctuation\">{</span><br>\t<span class=\"token function\">canDeactivate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span><span class=\"token operator\">...</span> <span class=\"token punctuation\">{</span><br>\t\t<span class=\"token comment\">// check if there are some changes and return true/false</span><br>\t<span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<h3 id=\"parsing-static-data-to-route\">Parsing static data to route <a class=\"direct-link\" href=\"#parsing-static-data-to-route\">#</a></h3>\n<p>(<a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656358#overview\">video</a> + <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/12-routing-final/src/app\">code</a>) Navigate to an error page with custom message from route.</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// error-page.component.html</span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h4</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h4</span><span class=\"token punctuation\">></span></span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// error-page.component.ts</span><br><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ErrorPageComponent</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">OnInit</span> <span class=\"token punctuation\">{</span><br>\terrorMessage<span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span><br><br>\t<span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">private</span> route<span class=\"token operator\">:</span> ActivatedRoute</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span><br>\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//  ^simply inject current route which load the component</span><br><br>\t<span class=\"token function\">ngOnInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>errorMessage <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>route<span class=\"token punctuation\">.</span>snapshot<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">[</span><span class=\"token string\">'message'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><br>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//  ^ there is \"data\" in app-routing.module.ts</span><br>\t\t<span class=\"token comment\">// or subscribe to the changes</span><br>\t\t<span class=\"token comment\">// (including the init snapshot)</span><br>\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>route<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><br>      <span class=\"token punctuation\">(</span><span class=\"token parameter\">data<span class=\"token operator\">:</span> Data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>errorMessage <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span><span class=\"token string\">'message'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><br>      <span class=\"token punctuation\">}</span><br>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// app-routing.module.ts</span><br><span class=\"token punctuation\">{</span> path<span class=\"token operator\">:</span> <span class=\"token string\">'not-found'</span><span class=\"token punctuation\">,</span> component<span class=\"token operator\">:</span> ErrorPageComponent<span class=\"token punctuation\">,</span> data<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>message<span class=\"token operator\">:</span> <span class=\"token string\">'Page not found!'</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span></code></pre>\n<h3 id=\"parsing-dynamic-data-(server)-to-route\">Parsing dynamic data (server) to route <a class=\"direct-link\" href=\"#parsing-dynamic-data-(server)-to-route\">#</a></h3>\n<p>(<a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656360#overview\">video</a> + <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/12-routing-final/src/app/servers\">codes</a>) Display the component after fetch from the server (async data) → should watch the videos + below notes:</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// server-resolver.service.ts</span><br><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>route<span class=\"token operator\">:</span> ActivatedRouteSnapshot<span class=\"token punctuation\">,</span> state<span class=\"token operator\">:</span> RouterStateSnapshot<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Observable<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Server</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> | Promise</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Server</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> | Server </span><span class=\"token punctuation\">{</span><br>  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>serversService<span class=\"token punctuation\">.</span><span class=\"token function\">getServer</span><span class=\"token punctuation\">(</span><span class=\"token operator\">+</span>route<span class=\"token punctuation\">.</span>params<span class=\"token punctuation\">[</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">// ^this service here will rerendered whenever we</span><br>\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">// rerender the route</span><br><span class=\"token punctuation\">}</span><span class=\"token plain-text\"><br>// unlike the component itself, this is executed each time, so no need to set<br>// up an observable or something like that</code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// app-routing.module.ts</span><br><span class=\"token punctuation\">{</span> path<span class=\"token operator\">:</span><span class=\"token operator\">...</span><span class=\"token punctuation\">,</span> component<span class=\"token operator\">:</span><span class=\"token operator\">...</span><span class=\"token punctuation\">,</span> resolver<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>server<span class=\"token operator\">:</span> ServerResolver<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><br>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//  ^choose a name you like</span><br><span class=\"token comment\">// but make sure \"server\" is set the same in</span><br><span class=\"token comment\">// server.component.ts_____________________</span><br><span class=\"token function\">ngOnInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>                         <span class=\"token comment\">//    |</span><br>\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>route<span class=\"token punctuation\">.</span>data                  <span class=\"token comment\">//      |</span><br>\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span>                  <span class=\"token comment\">//        |</span><br>\t\t\t<span class=\"token punctuation\">(</span><span class=\"token parameter\">data<span class=\"token operator\">:</span> Data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>server <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span><span class=\"token string\">'server'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><br>\t\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre>\n<h3 id=\"location-strategies\">Location strategies <a class=\"direct-link\" href=\"#location-strategies\">#</a></h3>\n<p>(<a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656364#overview\">video</a>) When deployment, all URLs are parsed by the server (which hosts your app) first → then angular → route of angular (eg. nagivate something strange page to not found) may not work like on localhost. → need to make sure your web server return html file you want!</p>\n<p>Hash mode routing → informs your web server on care the part of URL before &quot;#&quot;! → all things behind will be ignored by webserver.</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\">localhost<span class=\"token operator\">:</span><span class=\"token operator\">/</span>users <span class=\"token operator\">-</span><span class=\"token operator\">></span> localhost<span class=\"token operator\">:</span><span class=\"token operator\">/</span>#<span class=\"token operator\">/</span>users<br>\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//   ^from this to end: ignored by webserver</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// app-routing.module.ts</span><br>@<span class=\"token function\">NgModule</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><br>\timports<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><br>\t\tRouterModule<span class=\"token punctuation\">.</span><span class=\"token function\">forRoot</span><span class=\"token punctuation\">(</span>appRoutes<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>useHash<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><br>\t<span class=\"token punctuation\">]</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">export</span> <span class=\"token operator\">...</span></code></pre>\n",
      "date_published": "2021-03-03T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/angular-1-basics-components-databinding-directives/",
      "url": "https://dinhanhthi.com/angular-1-basics-components-databinding-directives/",
      "title": "Angular 1 - Basics &amp; Components &amp; Databinding &amp; Directives",
      "content_html": "<p>This is my note for the course &quot;Angular - The Complete Guide (2021 Edition)&quot; which is taught by Maximilian Schwarzmüller on Udemy. This is an incredible course for you to start to learn Angular from basic. The official Angular docs is good but it's not for the beginner.</p>\n<p>🍄 <strong>PART 1</strong> — <a href=\"/angular-1-basics-components-databinding-directives/\">Angular  1 - Basics &amp; Components &amp; Databinding &amp; Directives</a><br>\n🍄 <strong>PART 2</strong> — <a href=\"/angular-2-service-dependency-injection-routing/\">Angular 2 - Services &amp; Dependency Injection &amp; Routing</a><br>\n🍄 <strong>PART 3</strong> — <a href=\"/angular-3-observable/\">Angular 3 - Observable</a><br>\n🍄 <strong>PART 4</strong> —  <a href=\"/angular-4-forms/\">Angular 4 - Forms</a><br>\n👉 <a href=\"https://github.com/dinhanhthi/learn-angular-complete-guide\">Github repo</a><br>\n👉 <strong>Other note</strong> (taken before this course): <a href=\"https://www.notion.so/Angular-101-fcbd5683f8e941f89c709595792b62d2\">Angular 101</a></p>\n<div class=\"warning\">\n<p>This note contains only the important things which can be look back later, it cannot replace either <a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/13914134#overview\">the course</a> nor <a href=\"https://angular.io/start\">the official document</a>!</p>\n</div>\n<h2 id=\"docs\">Docs <a class=\"direct-link\" href=\"#docs\">#</a></h2>\n<ol>\n<li><a href=\"https://angular.io/docs\">Angular - Introduction to the Angular Docs</a></li>\n<li><a href=\"https://www.learnrxjs.io/\">Learn RxJS</a></li>\n</ol>\n<h2 id=\"installation\">Installation <a class=\"direct-link\" href=\"#installation\">#</a></h2>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// install nodejs</span><br><br><span class=\"token comment\">// install angular CLI</span><br>sudo npm install <span class=\"token operator\">-</span>g @angular<span class=\"token operator\">/</span>cli@latest</code></pre>\n<h3 id=\"problems-of-version%3F\">Problems of version? <a class=\"direct-link\" href=\"#problems-of-version%3F\">#</a></h3>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// npm version 7.5.4 detected.</span><br><span class=\"token comment\">// The Angular CLI currently requires npm version 6.</span><br><br><span class=\"token comment\">// SOLUTION</span><br><span class=\"token comment\">// using nvm</span><br>https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>github<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>nvm<span class=\"token operator\">-</span>sh<span class=\"token operator\">/</span>nvm<br><br><span class=\"token comment\">// Check the corresponding versions between nodejs - npm</span><br>https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>nodejs<span class=\"token punctuation\">.</span>org<span class=\"token operator\">/</span>en<span class=\"token operator\">/</span>download<span class=\"token operator\">/</span>releases<span class=\"token operator\">/</span></code></pre>\n<div class=\"col-2-equal\">\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// install a specific version</span><br>nvm install <span class=\"token number\">14</span><br><span class=\"token comment\">// check installed versions</span><br>nvm ls<br><span class=\"token comment\">// use</span><br>nvm use <span class=\"token number\">14</span> <span class=\"token comment\">// node version</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// check version</span><br>npm <span class=\"token operator\">-</span>v<br><span class=\"token comment\">// if npm version is greater than usual? -> downgrade it</span><br>npm install <span class=\"token operator\">-</span>g npm@<span class=\"token number\">6</span> <span class=\"token comment\">// eg. for node 14</span><br><span class=\"token comment\">// check where npm installed</span><br>which npm <span class=\"token comment\">// should return /Users/thi/.nvm/versions/node/v14.15.5/bin/npm</span></code></pre>\n</div>\n<h2 id=\"cli\">CLI <a class=\"direct-link\" href=\"#cli\">#</a></h2>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// new app</span><br>ng <span class=\"token keyword\">new</span> <span class=\"token class-name\">my</span><span class=\"token operator\">-</span><span class=\"token keyword\">new</span><span class=\"token operator\">-</span>app<br><br><span class=\"token comment\">// serve</span><br>ng serve<br>ng serve <span class=\"token operator\">--</span>port <span class=\"token number\">4300</span><br><br><span class=\"token comment\">// create component</span><br>ng generate component <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>ng g c </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> # shorthand<br>ng g c </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> --skipTests true # without test files<br>ng g c </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> --selector </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>app-name</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> # with selector<br><br>// create directive<br>ng generate directive </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>ng g d </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></code></pre>\n<h2 id=\"my-first-app\">My first app <a class=\"direct-link\" href=\"#my-first-app\">#</a></h2>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// crate an app / project</span><br><span class=\"token comment\">// for a moment, choose \"No\" for first 2 options + CSS</span><br>ng <span class=\"token keyword\">new</span> <span class=\"token class-name\">my</span><span class=\"token operator\">-</span>first<span class=\"token operator\">-</span>app<br>cd my<span class=\"token operator\">-</span>first<span class=\"token operator\">-</span>app<br>ng serve <span class=\"token comment\">// port 4200</span><br>ng serve <span class=\"token operator\">--</span>port <span class=\"token number\">4300</span> <span class=\"token comment\">// custom</span></code></pre>\n<p>Input changes → name changes ⇒ <a href=\"https://github.com/dinhanhthi/learn-angular-complete-guide/commit/bd06059814773ad8564204181a5e94c057620e9f\">check commit</a> → need <code>[(ngModule)]</code> ← from <code>FormsModule</code><br>\n⇒ two-way binding!</p>\n<h2 id=\"course-structure\">Course Structure <a class=\"direct-link\" href=\"#course-structure\">#</a></h2>\n<p>Getting started → The basics → Components &amp; Databinding → Directives → Services &amp; Dependency Injection → Routing → Observables → Forms → Pipes → Http → Authentication → Optimizations &amp; NgModules → Deployment → Animations &amp; Testing</p>\n<p><img src=\"/img/post/angular/angular-1/Untitled.png\" alt=\"Angular_1_-Basics&amp;Components&amp;Databinding&amp;_Di_f1de7de43bbb4feebe9a09eb3a27a117/Untitled.png\"></p>\n<h2 id=\"typescript\">TypeScript <a class=\"direct-link\" href=\"#typescript\">#</a></h2>\n<ul>\n<li>Superset for JS → define type as you want + check when coding</li>\n<li>TS doesn't run in the browser → compiled to JS before that</li>\n</ul>\n<h2 id=\"integrate-bootstrap\">Integrate Bootstrap <a class=\"direct-link\" href=\"#integrate-bootstrap\">#</a></h2>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// cd to project</span><br>npm i <span class=\"token operator\">--</span>save bootstrap<br><br><span class=\"token comment\">// angular.json</span><br><span class=\"token comment\">// -> changes \"styles\"</span><br><span class=\"token string\">\"styles\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><br>\t<span class=\"token string\">\"node_modules/bootstrap/dist/css/bootstrap.min.css\"</span><span class=\"token punctuation\">,</span><br>  <span class=\"token string\">\"src/styles.css\"</span><br><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><br><br><span class=\"token comment\">// rerun</span><br>ng serve <span class=\"token operator\">--</span>port <span class=\"token number\">4300</span><br><span class=\"token comment\">// Check?</span><br><span class=\"token comment\">// Open page > Inspect > Sources > styles.css -> there is bootstrap there!</span></code></pre>\n<h2 id=\"strict-mode\">Strict mode <a class=\"direct-link\" href=\"#strict-mode\">#</a></h2>\n<p>Strict mode forces you to write more verbose code in some places (especially when it comes to class properties). ⇒ Disable it!!!!</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// Disable \"strict mode\"</span><br><span class=\"token comment\">// tsconfig.json</span><br>strict<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span></code></pre>\n<h2 id=\"basics\">Basics <a class=\"direct-link\" href=\"#basics\">#</a></h2>\n<p><em>Things I understand more from the course!</em></p>\n<h3 id=\"how-angular-loaded-and-started%3F\">How Angular loaded and started? <a class=\"direct-link\" href=\"#how-angular-loaded-and-started%3F\">#</a></h3>\n<ul>\n<li>All things are in <code>/index.html</code> ← Single Page Application!!!</li>\n<li>After <code>ng serve</code>, there will be a script at the end of the page will be injected by CLI automatically!</li>\n<li>First code is executed → <code>main.ts</code> → <code>bootstrapModule(AppModule)</code> ← from <code>app.module.ts</code> ← there is <code>bootstrap: []</code> (this one is only in app root)</li>\n</ul>\n<h3 id=\"components\">Components <a class=\"direct-link\" href=\"#components\">#</a></h3>\n<ul>\n<li>\n<p>Key feature in angular!</p>\n</li>\n<li>\n<p>After creating a new component ⇒ Don't forget to add it in module!!!! (if using <code>ng generate component &lt;module-name&gt;</code>, we don't need to do that manually)</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">ng generate component <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span><br>ng g c <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span> <span class=\"token comment\"># shorthand</span><br>ng g c <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span> --skipTests <span class=\"token boolean\">true</span> <span class=\"token comment\"># without test files</span><br>ng g c <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span> --selector <span class=\"token operator\">&lt;</span>app-name<span class=\"token operator\">></span> <span class=\"token comment\"># with selector</span></code></pre>\n</li>\n<li>\n<p>Split up your complex app into <strong>reusable</strong> components.</p>\n</li>\n<li>\n<p>Good practice: having folder name = component name</p>\n</li>\n<li>\n<p>(Convention) Name of component <code>ServerComponent</code> ← normal typescript class with decorator <code>@Component()</code></p>\n<ul>\n<li>Make sure unique selector <code>&lt;app-server&gt;</code></li>\n</ul>\n</li>\n<li>\n<p>Can use <strong>inline</strong> in <code>selector, template, styles</code> of <code>@Component()</code> → using backtick ``` for multiple lines.</p>\n<pre class=\"language-tsx\"><code class=\"language-tsx\">template<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"><br>\t&lt;app-server>&lt;/app-server><br>\t&lt;p>abc&lt;/p><br></span><span class=\"token template-punctuation string\">`</span></span></code></pre>\n</li>\n<li>\n<p>For <code>selector</code></p>\n<pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// as a selector</span><br>selector<span class=\"token operator\">:</span> <span class=\"token string\">\"app-servers\"</span><br><span class=\"token comment\">// then</span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>app-servers</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>app-servers</span><span class=\"token punctuation\">></span></span><br><br><span class=\"token comment\">// as a class</span><br><span class=\"token class-name\">selector</span><span class=\"token operator\">:</span> <span class=\"token string\">\".app-servers\"</span><br><span class=\"token comment\">// then</span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>app-servers<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><br><br><span class=\"token comment\">// as an attribute</span><br>selector<span class=\"token operator\">:</span> <span class=\"token string\">\"[app-server]\"</span><br><span class=\"token comment\">// then</span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">app-servers</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n</li>\n<li>\n<p><code>constructor</code>  in class → called whenever component created ← a function of TypeScript!</p>\n</li>\n</ul>\n<h3 id=\"databinding\">Databinding <a class=\"direct-link\" href=\"#databinding\">#</a></h3>\n<p>Databinding = communication</p>\n<p><img src=\"/img/post/angular/angular-1/Untitled_1.png\" alt=\"Angular_1_-Basics&amp;Components&amp;Databinding&amp;_Di_f1de7de43bbb4feebe9a09eb3a27a117/Untitled_1.png\"></p>\n<pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// the same</span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Server with ID...</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Server with ID...</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Dynamic binding DOM's properties</p>\n<pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token operator\">&lt;</span>button<br>\t<span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"btn\"</span><br>\t<span class=\"token punctuation\">[</span>disabled<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token string\">\"allowNewServer\"</span><span class=\"token operator\">></span>Add Server<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><br><span class=\"token comment\">// disabled is a DOM property</span></code></pre>\n<pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// the same</span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><br><span class=\"token operator\">&lt;</span>p <span class=\"token punctuation\">[</span>innerText<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token string\">\"allowNewServer\"</span><span class=\"token operator\">></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Event binding</p>\n<pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token operator\">&lt;</span><span class=\"token function\">button</span><br>\t<span class=\"token punctuation\">(</span>click<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token string\">\"onCreateServer()\"</span><span class=\"token operator\">></span>Add Server<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><br><span class=\"token comment\">// we don't use usual JS onclick event!</span><br><br><span class=\"token operator\">&lt;</span>input<br>\t<span class=\"token keyword\">type</span><span class=\"token operator\">=</span><span class=\"token string\">\"text\"</span><br>\t<span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"form-control\"</span> <span class=\"token comment\">// bootstrap's class</span><br>\t<span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token string\">\"onUpdateServerName($event)\"</span><span class=\"token operator\">></span><br>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//^ event created by (input)</span><br><br><span class=\"token comment\">// .component.ts</span><br><span class=\"token function\">onUpdateServerName</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event<span class=\"token operator\">:</span> Event</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span> <span class=\"token comment\">// \"Event\" can by \"any\" but in this case we know it \"Event\"</span><br>\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>serverName <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">HTMLInputElement</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">event.target).value // can use Inspect to check these child element<br>\t\t\t\t\t\t\t\t\t// ^Just tell typescript that our event will be HTMLInputElement<br>}</code></pre>\n<p>Two-way binding → enable <code>ngModel</code> directive!!!</p>\n<pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> FormsModule <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/forms'</span></code></pre>\n<h3 id=\"directives\">Directives <a class=\"direct-link\" href=\"#directives\">#</a></h3>\n<p>Go to <a href=\"#directives-2\">this section</a>.</p>\n<h3 id=\"model\">Model <a class=\"direct-link\" href=\"#model\">#</a></h3>\n<ul>\n<li>Model = a type of file, eg. <code>recipe.model.ts</code></li>\n<li>Can be used multiple times → write a class → can be extended later!</li>\n<li>Những type chung chung về cái gì đó thì nên làm thành 1 model</li>\n</ul>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// recipe.model.ts</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Recipe</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// &lt;- TYPE!!!</span><br>\t<span class=\"token keyword\">public</span> name<span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span><br>\t<span class=\"token keyword\">public</span> description<span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span><br>\t<span class=\"token keyword\">public</span> imagePath<span class=\"token operator\">:</span><br><br>\t<span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name<span class=\"token operator\">:</span> string<span class=\"token punctuation\">,</span> desc<span class=\"token operator\">:</span> string<span class=\"token punctuation\">,</span> imagePath<span class=\"token operator\">:</span> string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span><br>\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>description <span class=\"token operator\">=</span> des<span class=\"token punctuation\">;</span><br>\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>imagePath <span class=\"token operator\">=</span> imagePath<span class=\"token punctuation\">;</span><br>\t<span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span><br><br><span class=\"token comment\">// use it?</span><br><span class=\"token comment\">// .component.ts</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RecipeListComponent</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">OnInit</span> <span class=\"token punctuation\">{</span><br>\trecipes<span class=\"token operator\">:</span> Recipe<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span> <span class=\"token comment\">// using our model \"Recipe\" but array of Recipe(s)</span><br>\t\t\t\t<span class=\"token comment\">// ^ just a type</span><br>\t\t<span class=\"token keyword\">new</span> <span class=\"token class-name\">Recipe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Test'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'A test recipe'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'http//img/url'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token comment\">// there can be more...</span><br>\t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span><br><br><span class=\"token comment\">// then use in .html</span><br><span class=\"token punctuation\">,</span>  <span class=\"token operator\">...</span> <span class=\"token comment\">// with *ngFor</span><br><br><span class=\"token comment\">// below are the same</span><br><span class=\"token operator\">&lt;</span>img<br>\tsrc<span class=\"token operator\">=</span>\"  <span class=\"token comment\">// string interpolationing</span><br>\t<span class=\"token punctuation\">[</span>src<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token string\">\"recipe.imagePath\"</span>     <span class=\"token comment\">// property binding</span><br><span class=\"token operator\">></span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// ANOTHER WAY OF DECLARING MODEL</span><br><span class=\"token comment\">// Typescript Constructor Shorthand</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Recipe</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// &lt;- TYPE!!!</span><br>\t<span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">public</span> name<span class=\"token operator\">:</span> string<span class=\"token punctuation\">,</span> <span class=\"token keyword\">public</span> description<span class=\"token operator\">:</span> string<span class=\"token punctuation\">,</span> <span class=\"token keyword\">public</span> imagePath<span class=\"token operator\">:</span> string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<h3 id=\"%22shared%22-folder\">&quot;shared&quot; folder <a class=\"direct-link\" href=\"#%22shared%22-folder\">#</a></h3>\n<p>Containing elements can be used across different features in the project!</p>\n<h2 id=\"debugging\">Debugging <a class=\"direct-link\" href=\"#debugging\">#</a></h2>\n<ul>\n<li>Read and understand the error messgaes.</li>\n<li><strong>Sourcemaps ⇒</strong> Open debugger tool in browser (Chrome) &gt; <code>main.bundle.js</code> &gt; click some checkpoint &gt; jump/open a new file containing the line of code (eg. <code>app.component.ts</code>) ⇒ however, if bundle gets bigger → hard to find</li>\n<li>Go to <strong>webpack//</strong> &gt; ./ &gt; src &gt; all your files with the same structure on your project!!!</li>\n<li>Using <strong><a href=\"https://augury.rangle.io/\">Angular Augury</a></strong> (browser extension) &gt; Add another tab in Browser Inspect tool.\n<ul>\n<li>Don't forget to click on &quot;refresh&quot; button on the top-right bar!</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"components-%26-databinding-deep-dive\">Components &amp; Databinding deep dive <a class=\"direct-link\" href=\"#components-%26-databinding-deep-dive\">#</a></h2>\n<ul>\n<li>From  a big app → how could we split this app (<a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/6656060#overview\">vid</a>)? → We wanna exchange info between child components with parent components.</li>\n</ul>\n<h3 id=\"binding-to-custom-properties\">Binding to custom properties <a class=\"direct-link\" href=\"#binding-to-custom-properties\">#</a></h3>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></span> <span class=\"token punctuation\">{</span><br>\telement<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>\t\ttype<span class=\"token operator\">:</span> string<span class=\"token punctuation\">,</span><br>\t\tname<span class=\"token operator\">:</span> string<span class=\"token punctuation\">,</span><br>\t\tcontent<span class=\"token operator\">:</span> string<br>\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// :{} -> not value, it's define a type -> make sure element may only have this type</span><br><span class=\"token punctuation\">}</span><br><br><span class=\"token comment\">// and if</span><br>element <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">}</span> <span class=\"token comment\">// this's assign value (like normal JS syntax)</span></code></pre>\n<p>By default, all properties of a components can be only used by this component only (not the outside) → That's why we need <code>@Input()</code></p>\n<pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token operator\">...</span> <span class=\"token punctuation\">{</span><br>\t@Input element<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span><br><span class=\"token comment\">// then</span><br><span class=\"token operator\">&lt;</span>app<span class=\"token operator\">-</span>server<span class=\"token operator\">-</span>element<br>\t<span class=\"token punctuation\">[</span>element<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token string\">\"serverElement\"</span><span class=\"token operator\">></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>app-server-element</span><span class=\"token punctuation\">></span></span></code></pre>\n<pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// USING ALIAS?</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token operator\">...</span> <span class=\"token punctuation\">{</span><br>\t@<span class=\"token function\">Input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'srvElement'</span><span class=\"token punctuation\">)</span> element<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span><br><span class=\"token comment\">// then</span><br><span class=\"token operator\">&lt;</span>app<span class=\"token operator\">-</span>server<span class=\"token operator\">-</span>element<br>\t<span class=\"token punctuation\">[</span>srvElement<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token string\">\"serverElement\"</span><span class=\"token operator\">></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>app-server-element</span><span class=\"token punctuation\">></span></span><br><span class=\"token comment\">// ^has to be \"srv...\", \"element\" not working now!</span></code></pre>\n<h3 id=\"binding-to-custom-events\">Binding to custom events <a class=\"direct-link\" href=\"#binding-to-custom-events\">#</a></h3>\n<p>👉 If the communication between components (by using <code>EventEmitter</code>, input, output,..) are too complicated → check <a href=\"https://www.notion.so/Angular-2-Services-Dependency-Injection-Routing-33ea25f32a84436ca5f306b84b615eba\">the use of Service</a>! (section &quot;Services with cross-components&quot;)</p>\n<p>Something changes in the child, we wanna inform parent to know about them.</p>\n<pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// parent .html</span><br><span class=\"token operator\">&lt;</span>app<span class=\"token operator\">-</span><span class=\"token function\">cockpit</span><br>\t<span class=\"token punctuation\">(</span>serverCreated<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token string\">\"onServerAdded($event)\"</span><span class=\"token operator\">></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>app-cockpit</span><span class=\"token punctuation\">></span></span></code></pre>\n<pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// parent .component</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token operator\">...</span> <span class=\"token punctuation\">{</span><br>\tserverElements <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><br><br>\t<span class=\"token function\">onServerAdded</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">serverData<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>serverName<span class=\"token operator\">:</span> string<span class=\"token punctuation\">,</span> serverContent<span class=\"token operator\">:</span> string<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\t<span class=\"token operator\">...</span><br>\t<span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// child component -> need to EMIT our event</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token operator\">...</span> <span class=\"token punctuation\">{</span><br>\t@<span class=\"token function\">Output</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> serverCreated <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">EventEmitter<span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span>serverName<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> serverContent<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">;</span><br>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//  ^just defind the type of event</span><br><br>\t<span class=\"token function\">onAddServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>serverCreated<span class=\"token punctuation\">.</span><span class=\"token function\">emit</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// .emit is called with EventEmitter object!</span><br>\t<span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">new</span> <span class=\"token class-name\">EventEmitter</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>void</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">(); // event without any information to emit!<br><br>onSelected() </span><span class=\"token punctuation\">{</span><br>\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>recipeSelected<span class=\"token punctuation\">.</span><span class=\"token function\">emit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// without element to emit</span><br><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></code></pre>\n<pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// USING ALIAS?</span><br><span class=\"token comment\">// parent .html</span><br><span class=\"token operator\">&lt;</span>app<span class=\"token operator\">-</span><span class=\"token function\">cockpit</span><br>\t<span class=\"token punctuation\">(</span>srvCreated<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token string\">\"onServerAdded($event)\"</span><span class=\"token operator\">></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>app-cockpit</span><span class=\"token punctuation\">></span></span><br><span class=\"token comment\">// child component</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token operator\">...</span> <span class=\"token punctuation\">{</span><br>\t@<span class=\"token function\">Output</span><span class=\"token punctuation\">(</span><span class=\"token string\">'srvCreated'</span><span class=\"token punctuation\">)</span> serverCreated <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">EventEmitter<span class=\"token operator\">&lt;</span><span class=\"token operator\">...</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span><br><span class=\"token comment\">// Only alias can be used outside the component!!!</span><br><span class=\"token comment\">// Inside the component, 'serverCreated' can be used as usual!</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// Receive an event and then assign directly (no need any method)?</span><br><span class=\"token operator\">&lt;</span>app<span class=\"token operator\">-</span>recipe<span class=\"token operator\">-</span><span class=\"token function\">list</span><br>\t<span class=\"token punctuation\">(</span>recipeWasSelected<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token string\">\"selectedRecipe = $event\"</span><span class=\"token operator\">></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>app-recipe-list</span><span class=\"token punctuation\">></span></span><br><span class=\"token comment\">// event comes from \"recipeWasSelected\" will be assigned to \"selectedRecipe\"</span></code></pre>\n<h3 id=\"view-encapsulation\">View Encapsulation <a class=\"direct-link\" href=\"#view-encapsulation\">#</a></h3>\n<ul>\n<li>\n<p>Encapsulation = súc tích / ngắn gọn!</p>\n</li>\n<li>\n<p>CSS classed defined in parent can be used only in parent → they are not applied to child components! ← behavior enforce by angular (not by browser)</p>\n<pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// When inspect element, we can see some \"strange\" attribute</span><br><span class=\"token comment\">// auto added to tag</span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">_ngcontent-eoj-0</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">....</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><br><span class=\"token comment\">// make sure this style belongs only to this component</span></code></pre>\n</li>\n<li>\n<p>Every styles in css file can be applied to the component they belong to!</p>\n</li>\n<li>\n<p>Turn off &quot;Encapsulation&quot;? → so classes in parent can affect child component as usual css behavior, i.e. classes defined are applied globally! ← there is no &quot;strange&quot; attribut like <code>_ngcontent-eoj-0</code> anymore.</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ViewEncapsulation <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span><br>@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><br>\tencapsulation<span class=\"token operator\">:</span> ViewEncapsulation<span class=\"token punctuation\">.</span>None <span class=\"token comment\">// turn off capsulation</span><br>\t_______________ViewEncapsulation<span class=\"token punctuation\">.</span>ShadowDom <span class=\"token comment\">// read more on Mozilla</span><br>  _______________ViewEncapsulation<span class=\"token punctuation\">.</span>Emulated <span class=\"token comment\">// default, only used inside component</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n</li>\n</ul>\n<h3 id=\"local-references-in-template\">Local References in template <a class=\"direct-link\" href=\"#local-references-in-template\">#</a></h3>\n<p>Sometimes, we don't need 2-way binding (<code>[(ngModel)]</code>) → using local reference (eg. <code>#input</code>)</p>\n<p>Local references can be use with any type of element (not only input) + anywhere in your template (only the template!!!).</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// with ngModel</span><br><span class=\"token operator\">&lt;</span>input <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>ngModel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token string\">\"newServerName\"</span><span class=\"token operator\">></span><br><span class=\"token operator\">&lt;</span><span class=\"token function\">button</span> <span class=\"token punctuation\">(</span>click<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token string\">\"onAddServer()\"</span><span class=\"token operator\">></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><br><span class=\"token comment\">// component.ts</span><br><span class=\"token function\">onAddServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><br><br><span class=\"token comment\">// with local reference</span><br><span class=\"token operator\">&lt;</span>input #serverNameInput<span class=\"token operator\">></span><br><span class=\"token operator\">&lt;</span><span class=\"token function\">button</span> <span class=\"token punctuation\">(</span>click<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token string\">\"onAddServer(serverNameInput)\"</span><span class=\"token operator\">></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><br><span class=\"token comment\">// component.ts</span><br><span class=\"token function\">onAddServer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nameInput<span class=\"token operator\">:</span> HTMLInputElement</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre>\n<h3 id=\"%40viewchild()\"><code>@ViewChild()</code> <a class=\"direct-link\" href=\"#%40viewchild()\">#</a></h3>\n<p>We can access local reference from component.ts by using this decorator!</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// in .html</span><br><span class=\"token operator\">&lt;</span>input #serverContentInput<span class=\"token operator\">></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>input</span><span class=\"token punctuation\">></span></span><br><br><span class=\"token comment\">// in component.ts</span><br><br><span class=\"token comment\">// if wanna access selected element inside ngOnInit()</span><br>@<span class=\"token function\">ViewChild</span><span class=\"token punctuation\">(</span><span class=\"token string\">'serverContentInput'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token keyword\">static</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> serverContentInput<span class=\"token operator\">:</span> ElementRef<span class=\"token punctuation\">;</span><br><br><span class=\"token comment\">// if DON'T wanna ... ngOnInit()</span><br>@<span class=\"token function\">ViewChild</span><span class=\"token punctuation\">(</span><span class=\"token string\">'serverContentInput'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token keyword\">static</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> serverContentInput<span class=\"token operator\">:</span> ElementRef<span class=\"token punctuation\">;</span><br><span class=\"token comment\">// in Angular 9+, no need to add {static: false} in this case!</span><br><br><span class=\"token comment\">// Then we can use property \"serverContentInput\" in other place in .component.ts</span></code></pre>\n<p>DON'T manipulate the DOM from the component.ts!!!, like</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>serverContentInput<span class=\"token punctuation\">.</span>nativeElement<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token string\">'something'</span><span class=\"token punctuation\">;</span></code></pre>\n<p>⇒ Use string interpolation or property binding if you wanna output something to the DOM!</p>\n<h3 id=\"ng-content\"><code>ng-content</code> <a class=\"direct-link\" href=\"#ng-content\">#</a></h3>\n<ul>\n<li>Project content into component.</li>\n<li>Everything between <code>&lt;app-server&gt;Text&lt;/app-server&gt;</code> will be lost → angular will not take care about it! → using <code>ng-content</code></li>\n</ul>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// child html</span><br><span class=\"token comment\">// put where you wanna to display \"Text\"</span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ng-content</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ng-content</span><span class=\"token punctuation\">></span></span><br><br><span class=\"token comment\">// parent html</span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>app-server</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Text</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>app-server</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>USING MULTIPLE <code>ng-content</code>?</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// parent html</span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>app-child</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">header</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Text for header</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">body</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Text for body</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>app-child</span><span class=\"token punctuation\">></span></span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// child html</span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ng-content</span> <span class=\"token attr-name\">select</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>[header]<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ng-content</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ng-content</span> <span class=\"token attr-name\">select</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>[body]<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ng-content</span><span class=\"token punctuation\">></span></span><br><br><span class=\"token comment\">// => Think of using ng-container</span></code></pre>\n</div>\n<h3 id=\"component-lifecycle\">Component lifecycle <a class=\"direct-link\" href=\"#component-lifecycle\">#</a></h3>\n<ul>\n<li>A new component created → Angular go into some phases (processes) ← we can hook into these phases</li>\n</ul>\n<p><img src=\"/img/post/angular/angular-1/Untitled_2.png\" alt=\"Angular_1_-Basics&amp;Components&amp;Databinding&amp;_Di_f1de7de43bbb4feebe9a09eb3a27a117/Untitled_2.png\"></p>\n<ul>\n<li><code>ngOnChanges</code> → called after bound input property changes (remember <code>@Input()</code>) ← listen to the changes</li>\n<li><code>ngOnInit</code> → called once component is initialized (after <code>constructor</code>)</li>\n<li><code>ngDoCheck</code> → called during every change detection run → useful when you wanna do something on evert change detection cycle</li>\n<li>&quot;Content&quot; in above life cycle hooks ← comes from <code>&lt;ng-content&gt;&lt;/ng-content&gt;</code></li>\n<li>Rarely need to use all of them!</li>\n<li><code>ngAfterViewinit</code> → before that, there is no some view, we cannot do anything with it. Using this hook to make sure that some component is presented in DOM (View)!</li>\n<li>We have different &quot;ContentInit&quot; and &quot;ViewInit&quot; here because &quot;Content&quot; and &quot;View&quot; are different. Check more on section &quot;<a href=\"#%40viewchild()\">ViewChild</a>&quot; and &quot;<a href=\"#%40contentchild()\">@ContentChild</a>&quot; to see the different!</li>\n</ul>\n<p>Order on starting</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\">constructor <span class=\"token operator\">></span> ngOnChanges <span class=\"token operator\">></span> ngOnInit <span class=\"token operator\">></span> ngDoCheck<br><span class=\"token operator\">></span> ngAfterContentInit <span class=\"token operator\">></span> ngAfterContentChecked<br><span class=\"token operator\">></span> ngAfterViewInit <span class=\"token operator\">></span> ngAfterViewChecked<br><span class=\"token comment\">// whenever input changes -> ngOnchanges</span><br><span class=\"token comment\">// whenever there are changes -> ngDoCheck</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// How to use?</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">OnInit</span><span class=\"token punctuation\">,</span> OnChanges<span class=\"token punctuation\">,</span> OnDestroy <span class=\"token punctuation\">{</span><br>\t<span class=\"token function\">ngOnInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><br>\t<span class=\"token function\">ngOnChanges</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><br>\t<span class=\"token function\">ngOnDestroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// testing ngOnChanges</span><br><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> OnChanges<span class=\"token punctuation\">,</span> SimpleChanges <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">OnChanges</span> <span class=\"token punctuation\">{</span><br>\t@<span class=\"token function\">Input</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> element<span class=\"token operator\">:</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">.</span><br><br>\t<span class=\"token function\">OnChanges</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">changes<span class=\"token operator\">:</span> SimpleChanges</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ngOnChanges called!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>changes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span><br><br><span class=\"token comment\">// then open Inspect</span><br><span class=\"token comment\">// in object element: SimpleChange</span><br><span class=\"token comment\">// there are \"currentValue\", \"firstChange\", \"previousValue\",...</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// DoCheck</span><br><span class=\"token comment\">// -> wanna do something on evert change detection cycle</span><br><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> DoCheck <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">DoCheck</span> <span class=\"token punctuation\">{</span><br>\t<span class=\"token function\">ngDoCheck</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br><br>\t<span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<p>Whenever there are changes!!!! (event when clicked / Promise back from loaded data,....) &gt; <code>ngDoCheck</code></p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// onDestroy()</span><br><span class=\"token comment\">// Called when component is destroyed -> when removed from the DOM</span><br><span class=\"token comment\">// Wanna make a test?</span><br><br><span class=\"token comment\">// in child component.ts</span><br><span class=\"token function\">ngOnDestroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ngOnDestroy called!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span><br><br><span class=\"token comment\">// in parent html</span><br><span class=\"token operator\">&lt;</span><span class=\"token function\">button</span> <span class=\"token punctuation\">(</span>click<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span>\"<span class=\"token function\">onDestroyFirst</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">></span>Destroy component<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><br><br><span class=\"token comment\">// in parent component.ts</span><br><span class=\"token function\">onDestroyFirst</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>serverElements<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre>\n<h3 id=\"%40contentchild()\"><code>@ContentChild()</code> <a class=\"direct-link\" href=\"#%40contentchild()\">#</a></h3>\n<p><code>@ViewChild()</code> is used to access to &quot;local reference&quot; in the same component.</p>\n<p>If you wanna access &quot;local reference&quot; in a content → use <code>@ContentChild()</code> (It's not part of the view, it's a part of the content)</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// parent html</span><br><span class=\"token operator\">&lt;</span>app<span class=\"token operator\">-</span>server<span class=\"token operator\">-</span>element<br>\t<span class=\"token operator\">&lt;</span>p #contentParagraph<span class=\"token operator\">></span>Text<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><br><span class=\"token operator\">></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>app-server-element</span><span class=\"token punctuation\">></span></span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// child html</span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ng-content</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ng-content</span><span class=\"token punctuation\">></span></span></code></pre>\n</div>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// child component.ts</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></span><span class=\"token punctuation\">{</span><br>\t@<span class=\"token function\">ContentChild</span><span class=\"token punctuation\">(</span><span class=\"token string\">'contentParagraph'</span><span class=\"token punctuation\">)</span> paragraph<span class=\"token operator\">:</span> ElementRef<span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span><br><br><span class=\"token comment\">// In case you wanna call \"contentParagraph\" in parent component.ts</span><br><span class=\"token comment\">// => use @ViewChild() in parent component.ts as usual!</span></code></pre>\n<h2 id=\"directives-2\">Directives <a class=\"direct-link\" href=\"#directives-2\">#</a></h2>\n<ul>\n<li>Directives = instructionms in the DOM</li>\n<li>You could/should create a separated folder containing all your custom directives.</li>\n</ul>\n<h3 id=\"attribute-vs-structural\">Attribute vs Structural <a class=\"direct-link\" href=\"#attribute-vs-structural\">#</a></h3>\n<p><img src=\"/img/post/angular/angular-1/Untitled_3.png\" alt=\"Angular_1_-Basics&amp;Components&amp;Databinding&amp;_Di_f1de7de43bbb4feebe9a09eb3a27a117/Untitled_3.png\"></p>\n<h3 id=\"structural-directives\">Structural directives <a class=\"direct-link\" href=\"#structural-directives\">#</a></h3>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- else --></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">*ngIf</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>serverCreated; else noServer<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Text<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ng-template</span> <span class=\"token attr-name\">#noServer</span><span class=\"token punctuation\">></span></span><br>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>Other text<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ng-template</span><span class=\"token punctuation\">></span></span></code></pre>\n<pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// toggle show button</span><br><span class=\"token operator\">&lt;</span><span class=\"token function\">button</span> <span class=\"token punctuation\">(</span>click<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token string\">\"showSecret = !showSecret\"</span><span class=\"token operator\">></span>Show password<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><br><span class=\"token operator\">&lt;</span>p <span class=\"token operator\">*</span>ngIf<span class=\"token operator\">=</span><span class=\"token string\">\"showSecret\"</span><span class=\"token operator\">></span>Password<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>We cannot have more than 2 structurual directives on the same element!</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// WRONG</span><br><span class=\"token operator\">&lt;</span>li <span class=\"token operator\">*</span>ngFor<span class=\"token operator\">=</span><span class=\"token string\">\"...\"</span> <span class=\"token operator\">*</span>ngIf<span class=\"token operator\">=</span><span class=\"token string\">\"...\"</span><span class=\"token operator\">></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span></code></pre>\n<div class=\"col-2-equal\">\n<pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// *ngFor</span><br><span class=\"token operator\">&lt;</span>div <span class=\"token operator\">*</span>ngFor<span class=\"token operator\">=</span><span class=\"token string\">\"let logItem of log\"</span><span class=\"token operator\">></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><br><span class=\"token comment\">// log has type array, is in .component.ts</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">//index of for</span><br><span class=\"token operator\">&lt;</span>div <span class=\"token operator\">*</span>ngFor<span class=\"token operator\">=</span><span class=\"token string\">\"let i = index\"</span><span class=\"token operator\">></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n</div>\n<p>Behind the scene of <code>*</code>? ← let angular know it's a structural directive → it will transform them into something else (different from <em>property binding, event binding, 2-way binding, string interpolation</em>) ← without *, it cannot separate!</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// instead of using * like</span><br><span class=\"token operator\">&lt;</span>div <span class=\"token operator\">*</span>ngIf<span class=\"token operator\">=</span><span class=\"token string\">\"!onlyOdd\"</span><span class=\"token operator\">></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><br><br><span class=\"token comment\">// we can use (angular will translate *ngIf to something like that)</span><br><span class=\"token operator\">&lt;</span>ng<span class=\"token operator\">-</span>template <span class=\"token punctuation\">[</span>ngIf<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token string\">\"!onlyOdd\"</span><span class=\"token operator\">></span><br>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ng-template</span><span class=\"token punctuation\">></span></span></code></pre>\n<h3 id=\"attribute-directives\">Attribute directives <a class=\"direct-link\" href=\"#attribute-directives\">#</a></h3>\n<p>Unlike structural directive, <strong>attribute directives</strong> don't add or remove elements. They only change the element they were placed on!</p>\n<pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token operator\">&lt;</span>p <span class=\"token punctuation\">[</span>ngStyle<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token string\">\"{backgroundColor: getColor()}\"</span><span class=\"token operator\">></span>Text<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><br> <span class=\"token comment\">// ^\t  \t\t// ^we can use background-color</span><br> <span class=\"token comment\">// | \"[]\" is not a part of directive -> it just tell us that we wanna bind</span><br> <span class=\"token comment\">//        some property on this directive!</span><br><br><span class=\"token operator\">&lt;</span>p <span class=\"token punctuation\">[</span>ngClass<span class=\"token operator\">=</span><span class=\"token string\">\"{online: serverStatus == 'online'}\"</span><span class=\"token operator\">></span>Text<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><br><span class=\"token comment\">//            ^.online class</span></code></pre>\n<p>Unlike structural directives, we can use ngStyle and ngClass in the same element (with another structural directive)</p>\n<h3 id=\"custom-attribute-directive\">Custom attribute directive <a class=\"direct-link\" href=\"#custom-attribute-directive\">#</a></h3>\n<p>👉 Using <a href=\"https://angular.io/api/core/Renderer2\">Renderer2</a></p>\n<p>In this section, we learn a way to access/modify DOM element inside a directive (or component, class,...)</p>\n<pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// CUSTOM DIRECTIVE</span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">appHighlight</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Text</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><br><br><span class=\"token comment\">// .component.ts</span><br><span class=\"token comment\">// or something.directive.ts (and then import it in .component.ts)</span><br><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Directive<span class=\"token punctuation\">,</span> OnInit<span class=\"token punctuation\">,</span> ELementRef<span class=\"token punctuation\">,</span> Renderer2<span class=\"token punctuation\">,</span> HostListener <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span><br>\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//  ^important: use this to not touch directly on the DOM</span><br>\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//   elements ('cause it's bad practice!)</span><br>@<span class=\"token function\">Directive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><br>\tselector<span class=\"token operator\">:</span> <span class=\"token string\">'[appHighlight]'</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HighlightDirective</span> implement OnInit <span class=\"token punctuation\">{</span><br>\t<span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">private</span> elRef<span class=\"token operator\">:</span> ELementRef<span class=\"token punctuation\">,</span> <span class=\"token keyword\">private</span> renderer<span class=\"token operator\">:</span> Renderer2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span><br><br>\t<span class=\"token function\">ngOnInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>renderer<span class=\"token punctuation\">.</span><span class=\"token function\">setStyle</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>elRef<span class=\"token punctuation\">.</span>nativeElement<span class=\"token punctuation\">,</span> <span class=\"token string\">'background-color'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'blue'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token punctuation\">}</span><br><br>\t<span class=\"token comment\">// or listen to some event</span><br>\t@<span class=\"token function\">HostListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'mouseenter'</span><span class=\"token punctuation\">)</span> <span class=\"token function\">mouseover</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">eventData<span class=\"token operator\">:</span> Event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\t\t\t\t\t\t<span class=\"token comment\">// ^JS event    ^custom name</span><br>\t\t<span class=\"token operator\">...</span><br>\t<span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// then add it in .module.ts</span><br>@<span class=\"token function\">NgModule</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><br>\tdeclarations<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>appHighlight<span class=\"token punctuation\">]</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre>\n<p>Don't wanna use Renderer2?</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\">@<span class=\"token function\">Directive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><br>\tselector<span class=\"token operator\">:</span> <span class=\"token string\">'[appHighlight]'</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></span> <span class=\"token punctuation\">{</span><br>\t@<span class=\"token function\">HostBinding</span><span class=\"token punctuation\">(</span><span class=\"token string\">'style.backgroundColor'</span><span class=\"token punctuation\">)</span> bgColor<span class=\"token operator\">:</span> string <span class=\"token operator\">=</span> <span class=\"token string\">'transparent'</span><span class=\"token punctuation\">;</span><br>\t\t\t\t\t\t<span class=\"token comment\">//\t^like normal JS\t\t\t\t\t^custom var\t\t  ^ gives it initial value</span><br><br>\t<span class=\"token comment\">// then access it likes</span><br>\t<span class=\"token function\">ngOnInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>bgColor <span class=\"token operator\">=</span> <span class=\"token string\">'blue'</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token punctuation\">}</span><br><br><span class=\"token punctuation\">}</span></code></pre>\n<p>For example, we can let the users choose the color they want instead of <code>'blue'</code> like above!</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// if we wanna use input for custom directive?</span><br><span class=\"token operator\">&lt;</span>p appHighlight <span class=\"token punctuation\">[</span>defaultColor<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token string\">\"'yellow'\"</span><span class=\"token operator\">></span>Text<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><br><span class=\"token comment\">// |            ^ we could use defaultColor=\"yellow\" but be careful, we must</span><br><span class=\"token comment\">// |              be sure that there is no conflict with already-have attributes!</span><br><span class=\"token comment\">// ^ we could use [appHighlight]=\"'red'\" if there is any alias in the directive</span><br><br><span class=\"token comment\">// in .directive.ts</span><br>@<span class=\"token function\">Directive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">export</span> <span class=\"token operator\">...</span> <span class=\"token punctuation\">{</span><br>\t@<span class=\"token function\">Input</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> defaultColor<span class=\"token operator\">:</span> string <span class=\"token operator\">=</span> <span class=\"token string\">'transparent'</span><span class=\"token punctuation\">;</span><br>\t@<span class=\"token function\">Input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'appHighlight'</span><span class=\"token punctuation\">)</span> highlightColor<span class=\"token operator\">:</span> string <span class=\"token operator\">=</span> <span class=\"token string\">'blue'</span><span class=\"token punctuation\">;</span><br><br>\t<span class=\"token comment\">// some commands using above 2 inputs.</span><br><span class=\"token punctuation\">}</span></code></pre>\n<p>How angular knows <code>defaultColor</code> is an input of directive <code>appHighlight</code> or property of <code>&lt;p&gt;</code>? →   it checks your custom directives first, then check the native properties after that.</p>\n<h3 id=\"custom-structure-directive\">Custom structure directive <a class=\"direct-link\" href=\"#custom-structure-directive\">#</a></h3>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// unless directive</span><br><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Directive<span class=\"token punctuation\">,</span> Input<span class=\"token punctuation\">,</span> TemplateRef<span class=\"token punctuation\">,</span> ViewContainerRef <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span><br><br>@<span class=\"token function\">Directive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><br>\tselector<span class=\"token operator\">:</span> <span class=\"token string\">'[appUnless]'</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UnlessDirective</span> <span class=\"token punctuation\">{</span><br>\t@<span class=\"token function\">Input</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">set</span> <span class=\"token function\">appUnless</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">condition<span class=\"token operator\">:</span> boolean</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\t\t\t<span class=\"token comment\">// |   ^make sure the same as the selector!</span><br>\t\t\t\t<span class=\"token comment\">// ^a setter of a property which is a method which get executed whenever</span><br>\t\t\t\t<span class=\"token comment\">//  the property changes</span><br>\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>condition<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>vcRef<span class=\"token punctuation\">.</span><span class=\"token function\">createEmbeddedView</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>templateRef<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span><br>\t\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>vcRef<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// remove everything from this place in the DOM</span><br>\t\t<span class=\"token punctuation\">}</span><br>\t<span class=\"token punctuation\">}</span><br><br>\t<span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">private</span> templateRef<span class=\"token operator\">:</span> TemplateRef<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>any</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">, private vcRef: ViewContainerRef </span><span class=\"token punctuation\">{</span><br>\t\t\t\t\t\t   <span class=\"token comment\">//     ^ what to be applied?                  ^ where to be applied?</span><br>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"token comment\">//     ^ look like ElementRef but for ng-template</span><br>\t<span class=\"token punctuation\">}</span><span class=\"token plain-text\"><br>}<br><br>// don't forget to add it to declaration in module.ts</code></pre>\n<p>Use <code>*appUnless</code>,</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// if using *ngIf</span><br><span class=\"token operator\">&lt;</span>div <span class=\"token operator\">*</span>ngIf<span class=\"token operator\">=</span><span class=\"token string\">\"!onlyOdd\"</span><span class=\"token operator\">></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// if using *appUnless</span><br><span class=\"token operator\">&lt;</span>div <span class=\"token operator\">*</span>appUnless<span class=\"token operator\">=</span><span class=\"token string\">\"onlyOdd\"</span><span class=\"token operator\">></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n</div>\n<h3 id=\"*ngswitch\"><code>*ngSwitch</code> <a class=\"direct-link\" href=\"#*ngswitch\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token operator\">&lt;</span>div <span class=\"token punctuation\">[</span>ngSwitch<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token string\">\"value\"</span><span class=\"token operator\">></span><br>\t<span class=\"token operator\">&lt;</span>div <span class=\"token operator\">*</span>ngSwitchCase<span class=\"token operator\">=</span><span class=\"token string\">\"5\"</span><span class=\"token operator\">></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><br>\t<span class=\"token operator\">&lt;</span>div <span class=\"token operator\">*</span>ngSwitchCase<span class=\"token operator\">=</span><span class=\"token string\">\"10\"</span><span class=\"token operator\">></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><br>\t<span class=\"token operator\">&lt;</span>div <span class=\"token operator\">*</span>ngSwitchDefault<span class=\"token operator\">></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// in component.ts</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></span> <span class=\"token punctuation\">{</span><br>\tvalue <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre>\n</div>\n<h3 id=\"project%3A-dropdown\">Project: Dropdown <a class=\"direct-link\" href=\"#project%3A-dropdown\">#</a></h3>\n<p>👉 Check <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/8-prj-directives-final\">this</a>.</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\">@<span class=\"token function\">Directive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><br>\tselector<span class=\"token operator\">:</span> <span class=\"token string\">'[appDropdown]'</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DropdownDirective</span> <span class=\"token punctuation\">{</span><br>\t@<span class=\"token function\">HostBinding</span><span class=\"token punctuation\">(</span><span class=\"token string\">'class.open'</span><span class=\"token punctuation\">)</span> isOpen <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span><br>\t@<span class=\"token function\">HostListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">)</span> <span class=\"token function\">toggleOpen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isOpen <span class=\"token operator\">=</span> <span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isOpen<span class=\"token punctuation\">;</span><br>\t<span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// closing dropdown from anywhere</span><br>@<span class=\"token function\">Directive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><br>\tselector<span class=\"token operator\">:</span> <span class=\"token string\">'[appDropdown]'</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DropdownDirective</span> <span class=\"token punctuation\">{</span><br>\t@<span class=\"token function\">HostBinding</span><span class=\"token punctuation\">(</span><span class=\"token string\">'class.open'</span><span class=\"token punctuation\">)</span> isOpen <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span><br>\t@<span class=\"token function\">HostListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'document:click'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'$event'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token function\">toggleOpen</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event<span class=\"token operator\">:</span> Event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isOpen <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>elRef<span class=\"token punctuation\">.</span>nativeElement<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">)</span><br>\t\t\t\t<span class=\"token operator\">?</span> <span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isOpen <span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token punctuation\">}</span><br>\t<span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token keyword\">private</span> elRef<span class=\"token operator\">:</span> ElementRef</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<h2 id=\"dynamic-components\">Dynamic Components <a class=\"direct-link\" href=\"#dynamic-components\">#</a></h2>\n<p>This part is vert later than above parts. However, it talks about components, I put it here. For example, we wanna show error, modal, ....</p>\n<p>👉 <a href=\"https://github1s.com/dinhanhthi/learn-angular-complete-guide/tree/master/16-dyn-cmp-finished/src/app\">Codes for this section</a>.</p>\n<p>(Video) → <a href=\"https://www.udemy.com/course/the-complete-guide-to-angular-2/learn/lecture/14466464#questions\">what are &quot;dynamic components&quot;?</a> → it means that they are not always there but they will be there if there are something happens with your codes.</p>\n",
      "date_published": "2021-03-03T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/fresh-install-macos/",
      "url": "https://dinhanhthi.com/fresh-install-macos/",
      "title": "Fresh MacOS installation",
      "content_html": "<p>This is my personal list of to-do things for a new Macbook.</p>\n<p>👉 Note: <a href=\"/fresh-installation-ubuntu\">Ubuntu / Pop!_OS fresh start</a>.<br>\n👉 Note: <a href=\"/fresh-install-windows\">Windows fresh start</a>.</p>\n<h2 id=\"check-info\">Check info <a class=\"direct-link\" href=\"#check-info\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Current version of MacOSX</span><br>sw_vers -productVersion</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Check if XCode Command Line Tools is installed</span><br>xcode-select --install<br><span class=\"token comment\"># should return \"/usr/bin/xcrun\"</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># check if running on ARM or Intel</span><br>arch<br><span class=\"token comment\"># arm64 -> ARM</span><br><span class=\"token comment\"># i386 -> Intel (running with Rosetta)</span></code></pre>\n</div>\n<h2 id=\"basic-controls\">Basic controls <a class=\"direct-link\" href=\"#basic-controls\">#</a></h2>\n<p>This is not the first things to do!</p>\n<h3 id=\"keyboards\">Keyboards <a class=\"direct-link\" href=\"#keyboards\">#</a></h3>\n<div class=\"hsbox\"><div class=\"hs__title\">Finder</div><div class=\"hs__content\"><ol>\n<li>Delete: <kbd>⌘</kbd> + <kbd>⌫</kbd></li>\n<li>Show hidden files/folders: <kbd>⇧</kbd> + <kbd>⌘</kbd> + <kbd>.</kbd></li>\n<li>Move: <kbd>⌘</kbd> +n <kbd>C</kbd> (Copy) &gt; <kbd>⌘</kbd> + <kbd>⌥</kbd> + <kbd>V</kbd> (Paste as moving).</li>\n<li><kbd>↩</kbd> to rename a folder/file.</li>\n</ol>\n</div></div>\n<div class=\"hsbox\"><div class=\"hs__title\">Terminal</div><div class=\"hs__content\"><ol>\n<li><kbd>⌃</kbd> + <kbd>L</kbd> : clear screen (use <kbd>⌃</kbd> as <kbd>Ctrl</kbd> key on Windows/Linux system!).</li>\n</ol>\n</div></div>\n<div class=\"hsbox\"><div class=\"hs__title\">Chrome</div><div class=\"hs__content\"><ol>\n<li>Focus to the adress bar: <kbd>⌘</kbd> + <kbd>L</kbd></li>\n<li>History: <kbd>⌘</kbd> + <kbd>Y</kbd></li>\n</ol>\n</div></div>\n<div class=\"hsbox\"><div class=\"hs__title\">Capture Screen</div><div class=\"hs__content\"><ol>\n<li>All screen + saved to clipboard: <kbd>⌃</kbd> + <kbd>⌘</kbd> + <kbd>⇧</kbd> + <kbd>3</kbd></li>\n<li>All screen + saved to file: <kbd>⌘</kbd> + <kbd>⇧</kbd> + <kbd>3</kbd></li>\n<li>Selected area + saved to clipboard: <kbd>⌘</kbd> + <kbd>⇧</kbd> + <kbd>4</kbd></li>\n<li>Selected area + saved to file: <kbd>⌃</kbd> + <kbd>⌘</kbd> + <kbd>⇧</kbd> + <kbd>4</kbd></li>\n<li>Screenshot + recording option: <kbd>⌘</kbd> + <kbd>⇧</kbd> + <kbd>5</kbd></li>\n<li>Screenshot + recording option: <kbd>⌘</kbd> + <kbd>⇧</kbd> + <kbd>5</kbd></li>\n</ol>\n</div></div>\n<div class=\"hsbox\"><div class=\"hs__title\">Others</div><div class=\"hs__content\"><ul>\n<li><strong>Lock screen</strong>: <kbd>⌃</kbd> + <kbd>⌘</kbd> + <kbd>Q</kbd></li>\n<li>Hide window app on dock: <kbd>⌥</kbd> + click or <kbd>⌘</kbd> + <kbd>H</kbd></li>\n<li>Emoji: <kbd>⌘</kbd> + <kbd>⌃</kbd> + <kbd>⎵</kbd></li>\n<li>Normal delete key: <kbd>⌃</kbd> + <kbd>D</kbd>.</li>\n</ul>\n</div></div>\n<h3 id=\"trackpad\">Trackpad <a class=\"direct-link\" href=\"#trackpad\">#</a></h3>\n<div class=\"hsbox\"><div class=\"hs__title\">1 finger</div><div class=\"hs__content\"><ol>\n<li>Tap to click.</li>\n</ol>\n</div></div>\n<div class=\"hsbox\"><div class=\"hs__title\">2 fingers</div><div class=\"hs__content\"><ol>\n<li>Swipe up/down to scroll.</li>\n<li>Single tap to right click.</li>\n<li>Swipe left/right to switch between pages.</li>\n<li>Swipe from right edge to open notification section.</li>\n<li>Double tap to smart zoom.</li>\n</ol>\n</div></div>\n<div class=\"hsbox\"><div class=\"hs__title\">3 fingers</div><div class=\"hs__content\"><ol>\n<li>Touch and move left/right to drag the content of texts.</li>\n<li>Tap to search for definition of selected text.</li>\n</ol>\n</div></div>\n<div class=\"hsbox\"><div class=\"hs__title\">4 fingers</div><div class=\"hs__content\"><ol>\n<li>Swipe between opening fullscreen apps.</li>\n<li>Swipe up to show all opening windows.</li>\n<li>Swipe down to show all opening windows of current applications (app expose).</li>\n</ol>\n</div></div>\n<div class=\"hsbox\"><div class=\"hs__title\">All fingers</div><div class=\"hs__content\"><ol>\n<li>Pinch to open launchpad.</li>\n<li>Spread to show desktop.</li>\n</ol>\n</div></div>\n<h2 id=\"keyboard-%26-trackpad-settings\">Keyboard &amp; Trackpad settings <a class=\"direct-link\" href=\"#keyboard-%26-trackpad-settings\">#</a></h2>\n<p>Go to <strong>Keyboard Settings</strong> and then,</p>\n<div class=\"list-item\">\n<p>Choosen the language and input source:  <strong>Input Sources</strong>.</p>\n<ol>\n<li>Should choose &quot;U.S.&quot; instead of &quot;U.S. International&quot; because with the latter, we have underline score below special symbols like <code>&quot;</code></li>\n<li>For Vietnamese input method, DON'T choose built-in VNese input options. Use <a href=\"https://www.trankynam.com/gotv/\">GoTiengViet</a> instead! (Because there will be unconfortable underline when we type if we)</li>\n</ol>\n</div>\n<div class=\"list-item\">\n<p>Disbale auto correcting words when typing in <strong>Text</strong>. Untick all first 3 boxes!</p>\n</div>\n<div class=\"list-item\">\n<p>Add more dictation (speed to text) languages: Vietnamese and French, choose VNese as default language.</p>\n</div>\n<div class=\"list-item\">\n<p><strong>Keyboard</strong>:</p>\n<ol>\n<li>\n<p>Touch Bar shows: <strong>F1, F2, etc Keys</strong>.</p>\n</li>\n<li>\n<p>Press ... to: <strong>Do Nothing</strong>.</p>\n</li>\n<li>\n<p>Press and hold ... to: <strong>Show Control Srip</strong>.</p>\n</li>\n<li>\n<p>Tick on &quot;Use F1, F2...&quot;</p>\n</li>\n<li>\n<p>Click on <strong>Customize Control Strip</strong> and change. Below are my customization.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">Brightness - Keyboard Brightness -- Media -- Volume -- Screen Lock -- Night Shift -- Screen Capture -- Dictation -- Siri</code></pre>\n</li>\n</ol>\n</div>\n<div class=\"list-item\">\n<p>Map top-left keyboard to backslash/tilde symbols. Install <a href=\"https://karabiner-elements.pqrs.org/\">Karabiner-Elements</a> and setting up &quot;non_us_backslash&quot; to &quot;grave_accent_and_tilde (`)&quot;. If you don't know the names of some keys, you can use installed Karabiner Viewer.</p>\n</div>\n<div class=\"list-item\">\n<p><strong>System Preferences</strong> &gt; <strong>Trackpad</strong>: Choose all for all.</p>\n</div>\n<div class=\"list-item\">\n<p>3 fingers to drag (choose texts): <strong>System Preferences</strong> &gt; <strong>Accessibility</strong> &gt; <strong>Pointer Control</strong> &gt; <strong>Trackpad Options...</strong> &gt; Enable dragging (three fingers drag).</p>\n</div>\n<div class=\"list-item\">\n<p>Install <a href=\"https://alt-tab-macos.netlify.app/\">alt-tab</a> (and use <kbd>⌘</kbd> + <kbd>⇥</kbd> which replaces the default method on mac, be careful!!!) to switch between windows (instead of apps) like on Windows/Linux: <code>brew install --cask alt-tab</code></p>\n<p>Open its preferences (We wanna show windows only on the screen containing the cursor):</p>\n<ul>\n<li>General &gt; tick on &quot;Start at login&quot;.</li>\n<li>Controls &gt; Show windows from: &quot;Screen showing AltTab&quot; (on the 3rd option).</li>\n<li>Appearance &gt; Show on &quot;Screen including mouse&quot;.</li>\n</ul>\n</div>\n<h2 id=\"installation-unknown-softwares\">Installation unknown softwares <a class=\"direct-link\" href=\"#installation-unknown-softwares\">#</a></h2>\n<div class=\"list-item\">\n<p>Sometimes, you cannot install some app from the internet, just go to <strong>System Preferences</strong> &gt; <strong>Security &amp; Privacy</strong> &gt; There will be some warning line at below of &quot;App Store and identified developers&quot;, just click &quot;Open anyway&quot;!</p>\n</div>\n<div class=\"list-item\">\n<p>If you have some issue with <code>.dmg</code> file like &quot;resource busy&quot;, open <strong>Disk Utility</strong>, then <strong>Images</strong> &gt; <strong>Verify...</strong> &gt; Choose the image file you cannot open then click &quot;Verify&quot;!</p>\n</div>\n<h2 id=\"git-%26-dev\">Git &amp; Dev <a class=\"direct-link\" href=\"#git-%26-dev\">#</a></h2>\n<div class=\"list-item\">\n<p>Install <a href=\"/git/\">git</a> (may be prompted automatically by the system to install it) and <strong>setting up git</strong>. Below are short things,</p>\n<div class=\"hsbox\"><div class=\"hs__title\">Codes</div><div class=\"hs__content\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">eval</span> <span class=\"token string\">\"<span class=\"token variable\"><span class=\"token variable\">$(</span>ssh-agent -s<span class=\"token variable\">)</span></span>\"</span><br>ssh-add -l <span class=\"token comment\"># list current keys</span><br><br><span class=\"token comment\"># create ssh keys</span><br>ssh-keygen -t rsa -b <span class=\"token number\">4096</span> -C <span class=\"token string\">\"dinhanhthi@gmail.com\"</span> <span class=\"token comment\"># /Users/thi/.ssh/id_rsa.thi</span><br>ssh-add /Users/thi/.ssh/id_rsa.thi<br><br>ssh-keygen -t rsa -b <span class=\"token number\">4096</span> -C <span class=\"token string\">\"thi@ideta.io\"</span> <span class=\"token comment\"># /Users/thi/.ssh/id_rsa.ideta</span><br>ssh-add /Users/thi/.ssh/id_rsa.ideta<br><br><span class=\"token comment\"># list the current keys again</span><br>ssh-add -l<br><br><span class=\"token comment\"># Add public keys to Github or something else!</span></code></pre>\n</div></div></div>\n<div class=\"list-item\">\n<p>Clone repositories to <code>/Users/thi/git/</code>.</p>\n</div>\n<div class=\"list-item\">\n<p>Install NodeJS, consider to install <a href=\"https://github.com/nvm-sh/nvm#installing-and-updating\">nvm</a> before. <strong>Remark</strong> (2/2021), currently only v15 works native on Apple M1 chip.</p>\n</div>\n<div class=\"list-item\">\n<p>Install <a href=\"https://brew.sh/\">Hombrew</a> (missing package control for mac).</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># after install, don't forget to add to PATH</span><br><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'eval <span class=\"token variable\"><span class=\"token variable\">$(</span>/opt/homebrew/bin/brew shellenv<span class=\"token variable\">)</span></span>'</span> <span class=\"token operator\">>></span> /Users/thi/.zprofile<br><span class=\"token builtin class-name\">eval</span> <span class=\"token variable\"><span class=\"token variable\">$(</span>/opt/homebrew/bin/brew shellenv<span class=\"token variable\">)</span></span> <span class=\"token comment\"># refresh</span><br><br><span class=\"token comment\"># problem with \"old\" cask</span><br><span class=\"token comment\"># instead of</span><br>brew cask something<br><span class=\"token comment\"># use</span><br>brew <span class=\"token function\">install</span> --cask something</code></pre>\n</div>\n<div class=\"list-item\">\n<p>Install Miniconda (python): download <a href=\"https://docs.conda.io/en/latest/miniconda.html\">bash version</a> and then</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">bash</span> <span class=\"token operator\">&lt;</span>downloaded file<span class=\"token operator\">></span><br><span class=\"token comment\"># remember to run conda init after being asked</span></code></pre>\n</div>\n<h2 id=\"printers-%26-scanners\">Printers &amp; Scanners <a class=\"direct-link\" href=\"#printers-%26-scanners\">#</a></h2>\n<div class=\"list-item\">\n<p>Setting up <strong>printers</strong> (if available). You may need <a href=\"http://gimp-print.sourceforge.net/MacOSX.php\">Gutenprint</a> for an alternative driver for printers on chip M1. After installing the drivers, turn on your printer (connect to a common wifi or via an usb cable), then <em>System Preferences</em> &gt; <em>Printers &amp; Scanners</em> &gt; Add printer and choose your own printer, don't forget to choose Gutenprint as driver!</p>\n</div>\n<div class=\"list-item\">\n<p>For <strong>scanner</strong> app: you can use VueScan (paid) if the current version of app doesn't support chip M1 yet!</p>\n</div>\n<div class=\"list-item\">\n<p>For <strong>Canon MG2900</strong> printer/scanner + apps: you may need to download and install drivers from <a href=\"https://brothersupportdownloads.blogspot.com/2020/06/canon-pixma-mg2900-scanner-driver.html\">this site</a>. A backup files are <a href=\"https://mega.nz/file/U0RwBR6T#qa50uOyhlAEiRtrMm_zBkXPtPufJD2Wa1gtbtkw5W_w\">here</a>. You may find other useful drivers for other types of printers on this site also.</p>\n<p><strong>Scanner app</strong>: use <strong>Image Capture</strong> (built-in app on Mac) or install <strong>Canon IJ Scan Utility2</strong>.</p>\n</div>\n<h2 id=\"finder\">Finder <a class=\"direct-link\" href=\"#finder\">#</a></h2>\n<ol>\n<li>Add necessary folder shortcuts to sidebar.</li>\n<li>Add recycle Bin to sidebar: <kbd>⇧</kbd> + <kbd>⌘</kbd> + <kbd>.</kbd> to show hidden folders &gt; drag <strong>Bin</strong> folder to sidebar &gt; <kbd>⇧</kbd> + <kbd>⌘</kbd> + <kbd>.</kbd> to hide hidden folders again.</li>\n<li>Customize some options in Preferences.</li>\n<li>Show status bar: View &gt; Show status bar.</li>\n</ol>\n<h3 id=\"copy-files-between-linux-and-macos\">Copy files between Linux and MacOS <a class=\"direct-link\" href=\"#copy-files-between-linux-and-macos\">#</a></h3>\n<p><strong>Require</strong>: the same wifi network!</p>\n<ol>\n<li><strong>On MacOS</strong>: System Preferences &gt; Sharing &gt; Tick on &quot;File Sharing&quot; &gt; choose &quot;Shared Folders&quot; &gt; on &quot;Everyon&quot;, change to &quot;Write &amp; Read&quot;.</li>\n<li><strong>On Linux</strong>: Nautilus, click on &quot;Other Locations&quot; &gt; &quot;Networks&quot; &gt; choose the Macbook (and type macos profile password) &gt; choose the shared folders in previous step &gt; Exchange files/folders you want.</li>\n</ol>\n<h2 id=\"screen-recorder\">Screen recorder <a class=\"direct-link\" href=\"#screen-recorder\">#</a></h2>\n<div class=\"hsbox\"><div class=\"hs__title\">Using QuickTime? (heavy output size)</div><div class=\"hs__content\"><p>Using <strong>QuickTime</strong> / built-in function. Open QuickTime or <kbd>⌘</kbd> + <kbd>⇧</kbd> + <kbd>5</kbd> to open screenshot/recording options. <strong>Weakness</strong>: big size + impossible (or possible??) to record system sounds.</p>\n</div></div><div class=\"hsbox\"><div class=\"hs__title\">Using OBS? (Free, suitable for streaming)</div><div class=\"hs__content\"><p>Using <a href=\"https://obsproject.com/\">OBS</a> (for recording app) + <a href=\"https://github.com/ExistentialAudio/BlackHole\">BlackHole</a> (for bypassing system audio recorder, I chose <strong>2ch</strong> to download).</p>\n<ol>\n<li>Check <a href=\"https://obsproject.com/forum/resources/os-x-capture-audio-with-ishowu-audio-capture.505/\">this article</a> for setting up with OBS (not that, in this article, they use a different tool than BlackHold)</li>\n<li>Check <a href=\"https://streamlabs.com/content-hub/post/capturing-desktop-audio-in-streamlabs-obs-for-mac\">this article</a> for using BlackHole to capture system audio on Mac.</li>\n<li>Open <strong>Audio MIDI Setup</strong> &gt; Click on &quot;+&quot; &gt; &quot;Create Multi-Output Device&quot; &gt; Check on (Use side) current using Speaker (ex. External Headphones) + BlackHole 2ch. Check also (Drift Correction) for &quot;External Headphones&quot;. Rename to something to remember, e.g. &quot;Screen Recorder&quot;. We wanna listen the system audio via 2 output, one is external heaphones, 1 is &quot;virtual&quot; BlackHole (so that it can recorder the sound).</li>\n<li>Open <strong>Sound</strong> setting and choose &quot;Screen Recorder&quot;. <strong>Tip</strong>: you should adjust the sound before change to &quot;Screen Recorder&quot; because you will not be able to change sound level in this option.</li>\n<li>In <strong>OBS</strong>, Add screen, add 2 microphones, one for real mic, one for device BlackHole 2ch.\n<ol>\n<li>Open Preferences &gt; Audio: Mic/Aux 1, choose &quot;External microphone&quot;, Mic/Aux 2, choose &quot;BlackHole 2ch&quot; &gt; OK.</li>\n</ol>\n</li>\n<li>Some settings for OBS:\n<ol>\n<li>Turn off preview for screen (for comfortable)</li>\n<li><strong>Video</strong> &gt; Common FPS Values = 20</li>\n</ol>\n</li>\n</ol>\n</div></div><p>👉 <strong>My best choice</strong>: using <a href=\"https://www.araelium.com/screenflick-mac-screen-recorder\">Screenflick</a> (paid, 35$).</p>\n<h2 id=\"dictionary\">Dictionary <a class=\"direct-link\" href=\"#dictionary\">#</a></h2>\n<div class=\"list-item\">\n<p><strong>Dictionary</strong>: <a href=\"https://mega.nz/file/x0RgTbhK#1rz1mpsbXXxLmLs1blVk9zLEmI0d5FXk7Bora4Rm9Y0\">install Viettien</a> (I use version 5.0b for Mac Big Sur chip M1). Alternative dictionaries can be downloaded from this link (I backed it up for personally using).</p>\n<ol>\n<li>Don't forget to open <strong>Security &amp; Privacy</strong> and click on <strong>Open anyway</strong> many times!</li>\n<li>Another option is to install Tinhte's dictionary from this link, copy extracted folder (<code>Tinhe_anh-viet.dictionary</code>) to <code>/Users/thi/Library/Dictionaries/</code>.</li>\n<li>After installing successfully, open Dictionary app &gt; Preferences... &gt; Tick on the names which are corresponding to the installed/copied dictionaries.</li>\n<li>There are built-in LacViet dictionaries but they are not activated yet, don't forget them!</li>\n</ol>\n</div>\n<div class=\"list-item\">\n<p><strong>Goldendict</strong>: download installation <a href=\"https://github.com/goldendict/goldendict/wiki/Early-Access-Builds-for-Mac-OS-X\">here</a> + dictionaries <a href=\"https://drive.google.com/drive/folders/1jna8_grA-wyhPrq8BiB7ypadvW3tTlIv\">here</a>.</p>\n</div>\n<h2 id=\"applications\">Applications <a class=\"direct-link\" href=\"#applications\">#</a></h2>\n<ol>\n<li><a href=\"https://code.visualstudio.com/download\">VSCode</a> + sign in to sync using Github account.</li>\n<li><a href=\"https://www.google.com/chrome/\">Google Chrome</a> and sign in to sync.</li>\n<li>Disable Tab Hover Cards: navigate to <code>chrome://flags/</code>, search for &quot;tab hover&quot; and choose &quot;Disable&quot;.</li>\n<li>Add a site to use cookies (enable third-party cookies for downloading files on Google Drive): Go to <code>chrome://settings/cookies</code> and then &quot;Add&quot; <code>drive.google.com</code> (tick on third-party...) in &quot;Sites that can always use cookies&quot; section.</li>\n<li>Password manager.</li>\n<li><a href=\"https://www.dropbox.com/downloading\">Dropbox</a>. We can &quot;quit&quot; the app on dock, the icon on menu still there!</li>\n<li><a href=\"https://iterm2.com/\">iTerm2</a> (check more in other section)</li>\n<li><a href=\"https://ytmusic.app/\">Youtube Music App</a> for Mac (unofficial)</li>\n<li><s><a href=\"https://www.trankynam.com/xtrafinder/\">XtraFinder</a> (additional settings for Finder)</s></li>\n<li>Communication: <a href=\"https://www.skype.com/en/get-skype/\">Skype</a>, <a href=\"https://zoom.us/download\">Zoom</a>, <a href=\"https://slack.com/intl/en-fr/downloads/mac\">Slack</a>.</li>\n<li><a href=\"https://www.videolan.org/vlc/download-macosx.html\">VLC Player</a> -- video player.</li>\n<li><a href=\"https://www.gitkraken.com/\">GitKraken</a> + sign in + clone some repos.</li>\n<li><a href=\"https://macpaw.com/cleanmymac\">CleanMyMac</a> (paid) -- uninstaller + optimize your mac.</li>\n<li><a href=\"https://www.paragon-software.com/home/ntfs-mac/\">Paragon NTFS</a> (paid, 20$) -- Do everything with Windows drives on your Mac.</li>\n<li><a href=\"https://www.macbartender.com/Bartender4/\">Bartender 4</a> (paid, 15.37$) -- hide some icons on menu bar.</li>\n<li>Dropdown calendar with agenda: <a href=\"https://www.mowglii.com/itsycal/\">Itsycal</a>. After installing, you have to choose manually the agenda profiles you wanna show.</li>\n<li><s><a href=\"https://brawersoftware.com/products/ubar\">uBar</a> (paid) -- disable default dock and make a windows-like taskbar. <strong>Be careful</strong>, it takes too much RAM!</s></li>\n<li><a href=\"https://sourceforge.net/projects/xdman/files/XDMSetup.dmg/download\">XDM Download Manager</a>.</li>\n<li><a href=\"https://docs.docker.com/docker-for-mac/apple-m1/\">Docker</a></li>\n<li><a href=\"https://selfcontrolapp.com/\">SelfControl</a> -- A free Mac application to help you avoid distracting websites.</li>\n</ol>\n<h3 id=\"appstore\">Appstore <a class=\"direct-link\" href=\"#appstore\">#</a></h3>\n<ol>\n<li><strong>The Unarchiver</strong></li>\n<li><strong>Communication</strong>: Whatsapp Desktop + Messenger App</li>\n<li><strong>Skitch</strong> -- annotation for photos on Mac.</li>\n<li><strong>Word</strong> and <strong>Powerpoint</strong> (in Office 365 suit, paid). You can buy a lifetime license on ebay (not your own email but you can integrate yours later).</li>\n<li><strong>Magnet</strong> -- arrange window workspace (stick to edge like on Windows).</li>\n<li><strong>Amphetamine</strong> -- Keep-awake your mac, an alternative to caffein on linux.</li>\n<li><strong>TaskTab</strong> -- List of tasks right on menu bar.</li>\n<li><strong>Bitwarden</strong> -- need to install desktop application to enable fingerprint unlock for browser extension. Restart both application and follow the instruction on extension to enable this feature.</li>\n</ol>\n<h2 id=\"terminal\">Terminal <a class=\"direct-link\" href=\"#terminal\">#</a></h2>\n<div class=\"list-item\">\n<p>(For chip M1 only)</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># check if running on ARM or Intel</span><br>arch<br><span class=\"token comment\"># arm64 -> ARM</span><br><span class=\"token comment\"># i386 -> Intel (running with Rosetta)</span></code></pre>\n<p>Copy <code>/Applications/Utilities/Terminal.app</code> to Download folder, rename it to <strong>Terminal-Rosetta.app</strong>. Move the new to /Applications/Utilities/ again. Right click on Terminal-Rosetta.app &gt; Get Info &gt; Click on &quot;Open using Rosetta&quot;.</p>\n<ul>\n<li>If you wanna run commands in Intel environment, use <strong>Terminal-Rosseta</strong>.</li>\n<li>If you wanna run commands in ARM environment, use <strong>Terminal.app</strong>.</li>\n</ul>\n</div>\n<div class=\"list-item\">\n<p>Dropdown terminal with <strong>iTerm2</strong>.</p>\n<ol>\n<li>Create a new profile and make it default. Download my customized profile <a href=\"https://github.com/dinhanhthi/scripts/blob/master/settings/macos/DropDown.json\">here</a>.</li>\n<li>Click on new profile &gt; Keys &gt; Tick on &quot;A hotkey...&quot; &gt; Set <kbd>⌘</kbd> + <kbd>`</kbd> for opening window.</li>\n<li>For &quot;non profile settings&quot;: Keep default with,\n<ol>\n<li>General &gt; Window: Tick on &quot;Smart...&quot;.</li>\n<li>Appearance &gt; general &gt; Tab bar location: bottom.</li>\n<li>Advanced: search &quot;animation&quot; &gt; Hotkey: 0.05;</li>\n</ol>\n</li>\n</ol>\n</div>\n<div class=\"list-item\">\n<p><strong>Zsh terminal</strong>: 👉 Note: <a href=\"/terminal\">Terminal</a>.</p>\n<div class=\"hsbox\"><div class=\"hs__title\">Code</div><div class=\"hs__content\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># By default, iTerm2 comes with pre-installed zsh</span><br><span class=\"token comment\"># You can check current shell</span><br><span class=\"token builtin class-name\">echo</span> <span class=\"token environment constant\">$SHELL</span> <span class=\"token comment\"># should returns /bin/zsh</span><br><span class=\"token comment\"># Check zsh version</span><br><span class=\"token function\">zsh</span> --version<br><br><span class=\"token comment\"># install oh-my-zsh</span><br><span class=\"token function\">sh</span> -c <span class=\"token string\">\"<span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">curl</span> -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh<span class=\"token variable\">)</span></span>\"</span><br><br><span class=\"token comment\"># install spaceship theme</span><br><span class=\"token function\">git</span> clone https://github.com/denysdovhan/spaceship-prompt.git <span class=\"token string\">\"<span class=\"token variable\">$ZSH_CUSTOM</span>/themes/spaceship-prompt\"</span><br><span class=\"token function\">ln</span> -s <span class=\"token string\">\"<span class=\"token variable\">$ZSH_CUSTOM</span>/themes/spaceship-prompt/spaceship.zsh-theme\"</span> <span class=\"token string\">\"<span class=\"token variable\">$ZSH_CUSTOM</span>/themes/spaceship.zsh-theme\"</span><br><span class=\"token comment\"># Make spaceship as default</span><br><span class=\"token comment\"># Set ZSH_THEME=\"spaceship\" in your .zshrc.</span><br><span class=\"token comment\"># Follow this (optional): https://gist.github.com/kevin-smets/8568070</span><br><span class=\"token comment\"># Download (then open and install) font Source Code Pro:</span><br><span class=\"token comment\"># https://github.com/powerline/fonts/blob/master/SourceCodePro/Source%20Code%20Pro%20for%20Powerline.otf</span><br><span class=\"token comment\"># Open iTerm2 Preferences > Profile > Text > change font!</span><br><br><span class=\"token comment\"># If you wanna see the changes</span><br><span class=\"token builtin class-name\">source</span> ~/.zshrc</code></pre>\n</div></div></div>\n<h2 id=\"macbook-keyboard-symbols\">Macbook keyboard symbols <a class=\"direct-link\" href=\"#macbook-keyboard-symbols\">#</a></h2>\n<div class=\"hsbox\"><div class=\"hs__title\">ALl symbols</div><div class=\"hs__content\"><pre class=\"language-bash\"><code class=\"language-bash\">HTML Entity     GLYPH  NAME<br><span class=\"token operator\">&amp;</span><span class=\"token comment\">#63743;              Apple</span><br><span class=\"token operator\">&amp;</span><span class=\"token comment\">#8984;         ⌘      Command, Cmd, Clover, (formerly) Apple</span><br><span class=\"token operator\">&amp;</span><span class=\"token comment\">#8963;         ⌃      Control, Ctl, Ctrl</span><br><span class=\"token operator\">&amp;</span><span class=\"token comment\">#8997;         ⌥      Option, Opt, (Windows) Alt</span><br><span class=\"token operator\">&amp;</span><span class=\"token comment\">#8679;         ⇧      Shift</span><br><span class=\"token operator\">&amp;</span><span class=\"token comment\">#8682;         ⇪      Caps lock</span><br><span class=\"token operator\">&amp;</span><span class=\"token comment\">#9167;         ⏏      Eject</span><br><span class=\"token operator\">&amp;</span><span class=\"token comment\">#8617;         ↩      Return, Carriage Return</span><br><span class=\"token operator\">&amp;</span><span class=\"token comment\">#8629; &amp;crarr; ↵      Return, Carriage Return</span><br><span class=\"token operator\">&amp;</span><span class=\"token comment\">#9166;         ⏎      Return, Carriage Return</span><br><span class=\"token operator\">&amp;</span><span class=\"token comment\">#8996;         ⌤      Enter</span><br><span class=\"token operator\">&amp;</span><span class=\"token comment\">#9003;         ⌫      Delete, Backspace</span><br><span class=\"token operator\">&amp;</span><span class=\"token comment\">#8998;         ⌦      Forward Delete</span><br><span class=\"token operator\">&amp;</span><span class=\"token comment\">#9099;         ⎋      Escape, Esc</span><br><span class=\"token operator\">&amp;</span><span class=\"token comment\">#8594; &amp;rarr;  →      Right arrow</span><br><span class=\"token operator\">&amp;</span><span class=\"token comment\">#8592; &amp;larr;  ←      Left arrow</span><br><span class=\"token operator\">&amp;</span><span class=\"token comment\">#8593; &amp;uarr;  ↑      Up arrow</span><br><span class=\"token operator\">&amp;</span><span class=\"token comment\">#8595; &amp;darr;  ↓      Down arrow</span><br><span class=\"token operator\">&amp;</span><span class=\"token comment\">#8670;         ⇞      Page Up, PgUp</span><br><span class=\"token operator\">&amp;</span><span class=\"token comment\">#8671;         ⇟      Page Down, PgDn</span><br><span class=\"token operator\">&amp;</span><span class=\"token comment\">#8598;         ↖      Home</span><br><span class=\"token operator\">&amp;</span><span class=\"token comment\">#8600;         ↘      End</span><br><span class=\"token operator\">&amp;</span><span class=\"token comment\">#8999;         ⌧      Clear</span><br><span class=\"token operator\">&amp;</span><span class=\"token comment\">#8677;         ⇥      Tab, Tab Right, Horizontal Tab</span><br><span class=\"token operator\">&amp;</span><span class=\"token comment\">#8676;         ⇤      Shift Tab, Tab Left, Back-tab</span><br><span class=\"token operator\">&amp;</span><span class=\"token comment\">#9250;         ␢      Space, Blank</span><br><span class=\"token operator\">&amp;</span><span class=\"token comment\">#9251;         ⎵      Space, Blank</span></code></pre>\n</div></div><h2 id=\"others\">Others <a class=\"direct-link\" href=\"#others\">#</a></h2>\n<div class=\"list-item\">\n<p>Log into email accounts on Mail app.</p>\n</div>\n",
      "date_published": "2021-02-07T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/the-legend-of-zelda-breath-of-the-wild/",
      "url": "https://dinhanhthi.com/the-legend-of-zelda-breath-of-the-wild/",
      "title": "The Lengend of Zelda: Breath of the wild",
      "content_html": "<div class=\"warning\">\n<p>This is a very personal note. It may (or may not) contain solutions to the trials in game. I use this note for not diving in an empty space of direction.</p>\n</div>\n<h2 id=\"tips\">Tips <a class=\"direct-link\" href=\"#tips\">#</a></h2>\n<h3 id=\"collecting\">Collecting <a class=\"direct-link\" href=\"#collecting\">#</a></h3>\n<ol>\n<li>Find a hammer (or something to hew down a tree) around some <strong>Stable</strong>.</li>\n<li>Treasure chest shrine indicator on the map (right on the right of a shrine's name) where you forgot to collect all of them.</li>\n<li><strong>Grab fairies</strong> (used to revive): find them near any of the <strong>Great Fairy Fountain</strong> or hiding in tall grass.\n<ol>\n<li><strong>Find Great Fairy Fountain</strong>: using <a href=\"https://www.zeldadungeon.net/breath-of-the-wild-interactive-map/\">this interactive map</a>.</li>\n</ol>\n</li>\n<li><strong>Change the element of Chuchu Jelly</strong>: <em>hitting a chuchu by a fire arrow</em> / <em>drop them on fire</em> makes a red chuchu, for example! + <strong>Use chuhu</strong> to trap enemies.</li>\n<li>Fight <strong>silver enemies</strong> to get more valuable items.</li>\n<li>Using wood shield to <strong>collect arrows</strong> from enemies (when they shoot you).</li>\n</ol>\n<h3 id=\"moving\">Moving <a class=\"direct-link\" href=\"#moving\">#</a></h3>\n<ol>\n<li>You can make a <strong>shield surfing</strong> with holding a shiled (<kbd>ZL</kbd>) then <kbd>X</kbd> then <kbd>A</kbd>.</li>\n<li>Feed your <strong>horse</strong> with a increasing-stamina food, you can temporarily expand your horse's stamina.</li>\n<li><strong>Type of horses</strong>: spotted (slower + easier to tame), one colored (quicker + harder to tame).</li>\n<li><strong>Create an updraft</strong> by lighting grass on fire.</li>\n<li>Using the final breath when climbing (press <kbd>X</kbd>).</li>\n<li><strong>Revive a horse</strong>: seek Malanya Spring &gt; Highland Stable head south east towards the horse god bridge &gt; the end of the path &gt; find something looks like a Great Fairy but not. <strong>Cost</strong>: 1000 rubies.</li>\n</ol>\n<h3 id=\"upgrading\">Upgrading <a class=\"direct-link\" href=\"#upgrading\">#</a></h3>\n<ol>\n<li><strong>Expand inventory space</strong>: talk to <strong>Hestu</strong> and pay him <strong>korok</strong>.\n<ol>\n<li><strong>Find korok seeds</strong>: using <a href=\"https://www.zeldadungeon.net/breath-of-the-wild-interactive-map/\">this interactive map</a></li>\n<li><strong>Find Hestu</strong>: first time in the south of Kakariko village (solve <em>The Priceless Maracas quest</em>.), check more <a href=\"https://www.ign.com/wikis/the-legend-of-zelda-breath-of-the-wild/Hestu#Where_Can_You_Find_Hestu.3F\">in this guide</a>).</li>\n<li><strong>Cost</strong> (for each stash, it'll be reset for each of stash): 1 for the first upgrade, 2 for 2nd, 3 for 3rd, 5 for 4th and so on.</li>\n</ol>\n</li>\n<li>Reassign heat container and stamina vessels: in <strong>Hatano village</strong>, status at the bottom of the hill on the other side of the village entrance.</li>\n</ol>\n<h3 id=\"battling\">Battling <a class=\"direct-link\" href=\"#battling\">#</a></h3>\n<ol>\n<li>You can use <strong>Stasis</strong> to freeze an enemy for a short time and then hit it.</li>\n<li>Master sword beam: full health + <kbd>R</kbd> (not throwing your sword).</li>\n<li>You can use shield t\to counter-attack (deflect) to enemies' blow (including Guardians): press <kbd>A</kbd> right before it lands for a <strong>Perfect guard</strong>.</li>\n<li><strong>Perfect dodge</strong>: jump out of the way of an attack right before it's about to hit you and then <kbd>Y</kbd> to perform the attack flurry.</li>\n</ol>\n<h2 id=\"materials\">Materials <a class=\"direct-link\" href=\"#materials\">#</a></h2>\n<h3 id=\"food-%26-ingredients\">Food &amp; Ingredients <a class=\"direct-link\" href=\"#food-%26-ingredients\">#</a></h3>\n<p><img src=\"/img/post/gaming/zelda/food_ingredient.png\" alt=\"Food &amp; Ingredients\" class=\"img-100\"></p>\n<h3 id=\"hearty-%26-energizing-%26-enduring\">Hearty &amp; Energizing &amp; Enduring <a class=\"direct-link\" href=\"#hearty-%26-energizing-%26-enduring\">#</a></h3>\n<p><img src=\"/img/post/gaming/zelda/hearty_energizing_enduring.png\" alt=\"Hearty &amp; Energizing &amp; Enduring\" class=\"img-100\"></p>\n<h3 id=\"spicy-%26-chilly-%26-electro-%26-fireproof\">Spicy &amp; Chilly &amp; Electro &amp; Fireproof <a class=\"direct-link\" href=\"#spicy-%26-chilly-%26-electro-%26-fireproof\">#</a></h3>\n<p><img src=\"/img/post/gaming/zelda/spicy_chilly_electro_fireproof.png\" alt=\"Spicy &amp; Chilly &amp; Electro &amp; Fireproof\" class=\"img-100\"></p>\n<h3 id=\"hasty-%26-sneaky-%26-mighty-%26-tough\">Hasty &amp; Sneaky &amp; Mighty &amp; Tough <a class=\"direct-link\" href=\"#hasty-%26-sneaky-%26-mighty-%26-tough\">#</a></h3>\n<p><img src=\"/img/post/gaming/zelda/hasty_sneaky_mighty_tough.png\" alt=\"Hasty &amp; Sneaky &amp; Mighty &amp; Tough\" class=\"img-100\"></p>\n<h3 id=\"monster-parts\">Monster Parts <a class=\"direct-link\" href=\"#monster-parts\">#</a></h3>\n<p><img src=\"/img/post/gaming/zelda/monster_parts.png\" alt=\"Monster Parts\" class=\"img-100\"></p>\n<h3 id=\"dragon-parts\">Dragon Parts <a class=\"direct-link\" href=\"#dragon-parts\">#</a></h3>\n<p><img src=\"/img/post/gaming/zelda/dragon_parts.png\" alt=\"Dragon Parts\" class=\"img-100\"></p>\n<h2 id=\"location\">Location <a class=\"direct-link\" href=\"#location\">#</a></h2>\n<div class=\"info\">\n<p>Use below info with <a href=\"https://www.zeldadungeon.net/breath-of-the-wild-interactive-map/\">this interactive map</a>.</p>\n</div>\n<h3 id=\"weapons\">Weapons <a class=\"direct-link\" href=\"#weapons\">#</a></h3>\n<ul>\n<li><strong>Fire Rod</strong> (to make fire): Dropped by a Fire Wizzrobe. There is one near Woodland Tower.<br>\nnhung game ban phai choi it nhat 1 lan trong doi</li>\n</ul>\n<h2 id=\"status\">Status <a class=\"direct-link\" href=\"#status\">#</a></h2>\n<ul>\n<li>Status to change heart and stamina containers: south west of Hateno village.</li>\n<li>Status to get more heart / stamina container: use <a href=\"https://www.zeldadungeon.net/breath-of-the-wild-interactive-map/\">this interactive map</a>.</li>\n</ul>\n<h2 id=\"references\">References <a class=\"direct-link\" href=\"#references\">#</a></h2>\n<ol>\n<li><a href=\"https://www.zeldadungeon.net/breath-of-the-wild-interactive-map/\">Breath of the Wild Interactive Map</a>.</li>\n<li><a href=\"https://strategywiki.org/wiki/The_Legend_of_Zelda:_Breath_of_the_Wild/Controls\">The Legend of Zelda: Breath of the Wild/Controls — StrategyWiki, the video game walkthrough and strategy guide wiki</a>.</li>\n<li><a href=\"https://zelda.fandom.com/wiki/Zeldapedia\">Zeldapedia | Fandom</a></li>\n</ol>\n",
      "date_published": "2021-01-24T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/web-dev-tools-resources/",
      "url": "https://dinhanhthi.com/web-dev-tools-resources/",
      "title": "Web Dev tools &amp; resources",
      "content_html": "<p>👉 Site: <a href=\"https://dinhanhthi.github.io/tools/\" target=\"_blank\">Collection of quick js/html tools.</a><br>\n👉 Note: <a href=\"/data-ml-tools-resources/\">Resources for DS &amp; ML &amp; DL.</a><br>\n👉 Note: <a href=\"/good-applications-useful-tools/\">Useful tools for working &amp; studying.</a></p>\n<h2 id=\"urls\">URLs <a class=\"direct-link\" href=\"#urls\">#</a></h2>\n<ul>\n<li><a href=\"https://cssbattle.dev/\">CSS Battle</a> -- take challenge to create CSS objects.</li>\n</ul>\n<h2 id=\"tools-for-web-dev\">Tools for Web Dev <a class=\"direct-link\" href=\"#tools-for-web-dev\">#</a></h2>\n<ul>\n<li><a href=\"http://appium.io/\">appium</a> — Automation for Apps (used to testing UX on different devices, more exact than Browser Inspector).</li>\n<li><a href=\"https://developers.facebook.com/tools/debug/\">Facebook Sharing Debugger tool</a> — check if your urls display correctly or not on facebook.</li>\n<li><a href=\"https://fontello.com/\">Fontello</a> — make an icon as a font (there are also Awesomefont).</li>\n<li><a href=\"https://en.bestfonts.pro/\">BestFonts.pro</a> — Free fonts for WEB and Photoshop (may be illegal).</li>\n<li><a href=\"https://google-webfonts-helper.herokuapp.com/fonts\">google-webfonts-helper</a> — A Hassle-Free Way to Self-Host Google Fonts — giving us font files and font-face declarations based on the fonts, charsets, styles, and browser support you select.</li>\n<li><a href=\"https://www.happyhues.co/palettes/17\">Happy Hues</a> — Not sure what colors to use in your designs or where to use them? Happy Hues is a color palette inspiration site that acts as a real world example as to how the colors could be used in your design projects.</li>\n<li><a href=\"https://www.key-shortcut.com/en/writing-systems/35-symbols/arrows\">HTML characters</a>: copy &amp; paste HTML characters.</li>\n<li><a href=\"https://keycode.info/\">JavaScript Event KeyCodes</a> — get the keycode of any key when you press.</li>\n<li><a href=\"https://regex101.com/\">Regular Expression 101</a> — rules and transform directly.</li>\n<li><a href=\"https://requestbin.com/\">RequestBin</a> — A modern request bin to collect, inspect and debug HTTP requests and webhooks.</li>\n<li><a href=\"https://github.com/responsively-org/responsively-app\">Responsively</a> -- A modified web browser that helps in responsive web development. A web developer's must have dev-tool.</li>\n<li><a href=\"https://github.com/stefanjudis/tiny-helpers\">Tiny helpers</a> — A collection of free single-purpose online tools for web developers.</li>\n<li><a href=\"https://web.archive.org/\">Wayback mahine</a> — an internet archive (to check old/dead websites).</li>\n<li><a href=\"https://www.fontsquirrel.com/tools/webfont-generator\">Webfont Generator</a></li>\n</ul>\n<h2 id=\"frameworks\">Frameworks <a class=\"direct-link\" href=\"#frameworks\">#</a></h2>\n<p>👉 Note: <a href=\"/good-applications-useful-tools/#illustration-tools\">Illustration tools.</a></p>\n<ul>\n<li><strong>For drawing / illustrating</strong>:\n<ul>\n<li><a href=\"https://www.chartjs.org/\">Chart.js</a> — Open source HTML5 Charts for your website.</li>\n<li><a href=\"https://excalidraw.com/\">Excalidraw</a> — Virtual whiteboard for sketching hand-drawn like diagrams.</li>\n<li><a href=\"http://jsxgraph.uni-bayreuth.de/wp/\">JSXGraph</a> — JSXGraph is a cross-browser JavaScript library for interactive geometry, function plotting, charting, and data visualization in the web browser.</li>\n<li><a href=\"https://roughjs.com/\">Rough.js</a></li>\n<li><a href=\"https://threejs.org/\">Three.js</a> – JavaScript 3D library</li>\n<li><a href=\"https://two.js.org/\">Two.js</a> — a two-dimensional drawing api geared towards modern web browsers. It is renderer agnostic enabling the same api to draw in multiple contexts: svg, canvas, and webgl.</li>\n<li><a href=\"https://vectorjs.org/examples/\">Vector.js</a> — Vector is an open source javascript library for creating interactive graphics.</li>\n<li><a href=\"https://zzz.dog/\">Zdog</a> — Round, flat, designer-friendly pseudo-3D engine for canvas and SVG.</li>\n</ul>\n</li>\n<li><strong>For visualizing data</strong>:\n<ul>\n<li><a href=\"https://d3js.org/\">D3.js</a> — a JavaScript library for manipulating documents based on data.</li>\n<li><a href=\"https://idyll-lang.org/\">idyll</a> — A toolkit for creating data-driven stories and explorable explanations.</li>\n<li><a href=\"https://plotly.com/javascript/\">Plotly</a> — JavaScript Open Source Graphing Library</li>\n</ul>\n</li>\n<li><a href=\"https://brm.io/matter-js/\">Matter.js</a> — a 2D physics engine for the web.</li>\n<li><a href=\"https://piqnt.com/stage.js/\">Stage.js</a> — 2D JavaScript library for cross-platform HTML5 game development.</li>\n<li><strong>Text &amp; Editor</strong>:\n<ul>\n<li><a href=\"https://github.com/markdown-it/markdown-it\">markdown-it</a> — Markdown parser, done right. 100% CommonMark support, extensions, syntax plugins &amp; high speed</li>\n<li><a href=\"https://quilljs.com/\">Quill</a> — Your powerful rich text editor.</li>\n</ul>\n</li>\n</ul>\n",
      "date_published": "2021-01-03T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/dynamic-time-warping-dtw/",
      "url": "https://dinhanhthi.com/dynamic-time-warping-dtw/",
      "title": "Dynamic Time Warping (DTW)",
      "content_html": "<h2 id=\"what-(idea)%3F\">What (idea)? <a class=\"direct-link\" href=\"#what-(idea)%3F\">#</a></h2>\n<p>Suppose that we need to compare 2 time series (quite <em>look-alike</em>),</p>\n<p><img src=\"/img/post/time-series/dtw-example.png\" alt=\"An example of 2 time series to be compared using DTW\" class=\"img-75\"><br>\n<em>An example of 2 time series to be compared using DTW. <a href=\"https://www.youtube.com/watch?v=v_WLX0fu_UE\">Source of the idea</a>.</em></p>\n<ul>\n<li>They're quite look-alike but if we compare point-to-point, they're clearly very different!</li>\n<li>With <strong>DTW</strong>, we compare:\n<ul>\n<li>hollows of series 1 with ones of series 2.</li>\n<li>cambers of series 1 with ones of series 2.</li>\n</ul>\n</li>\n<li><strong>Dynamic Time Warping</strong> is used to <mark>compare the similarity</mark> or <mark>calculate the distance</mark> between two arrays or time series with different length.</li>\n</ul>\n<p><img src=\"/img/post/time-series/Euclidean-distance-vs-DTW.png\" alt=\"Difference between DTW and Euclidian distance.\" class=\"img-80\"><br>\n<em>Difference between DTW and Euclidian distance. <a href=\"https://www.researchgate.net/figure/Euclidean-distance-vs-DTW_fig7_223966685\">Source</a>.</em></p>\n<h2 id=\"how-(idea)%3F\">How (idea)? <a class=\"direct-link\" href=\"#how-(idea)%3F\">#</a></h2>\n<p><img src=\"/img/post/time-series/dtw-example-how.jpg\" alt=\"An example of 2 time series to be compared using DTW\" class=\"img-80\"><br>\n<em>By using a <strong>distance matrix</strong>, we can find a good distance between 2 timeseries using DTW. Here, <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>8</mn><mo>=</mo><msup><mn>3</mn><mn>2</mn></msup><mo>−</mo><msup><mn>1</mn><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">8=3^2-1^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">8</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.897438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\">3</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span> and we choose the smallest distance in the nearest position. <a href=\"https://www.youtube.com/watch?v=v_WLX0fu_UE\">Source</a>.</em></p>\n<p><img src=\"/img/post/time-series/dtw-example-distance-matrix.png\" alt=\"More detailed of calculating the distance matrix using DTW\" class=\"img-60\"><br>\n<em>More detailed of calculating the distance matrix using DTW. <code>Ai</code>: element <code>i</code>th of <code>A</code>; <code>D[i-1, j-1]</code>: The DTW between element <code>i-1</code>th and <code>j-1</code>th. <a href=\"https://www.youtube.com/watch?v=_K1OsqCicBY\">Source</a>.</em></p>\n<h2 id=\"when-to-use%3F\">When to use? <a class=\"direct-link\" href=\"#when-to-use%3F\">#</a></h2>\n<ol>\n<li><strong>An example</strong>: Voice of a man. He can speak fast. He can speak slowly. However, the both voices are his. If we don't use DTW but Euclidian distance, the distance is very large <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> there are 2 voices <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> wrong prediction!</li>\n<li><strong>Sound Pattern Recognition</strong>: detect the same kind of sound pattern (like the above example).</li>\n<li><strong>Stock Market</strong>:</li>\n</ol>\n<h2 id=\"algorithm\">Algorithm <a class=\"direct-link\" href=\"#algorithm\">#</a></h2>\n<ol>\n<li>Divide 2 time series into equal points.</li>\n<li>Calculate distance between 1st point in TS1 with all points in TS2 and then <em>store the min</em>.</li>\n<li>Move to 2nd point.</li>\n<li>Repeat step 2 &amp; 3 but with 2nd point as a reference point.</li>\n<li>Add up all stored distances. <mark>This is a true measure between 2 time series</mark>.</li>\n</ol>\n<p>👉 Check <a href=\"https://www.youtube.com/watch?v=_K1OsqCicBY\">this video</a> fore a more explanation.</p>\n<h2 id=\"code\">Code <a class=\"direct-link\" href=\"#code\">#</a></h2>\n<p>👉 <a href=\"https://dtaidistance.readthedocs.io/en/latest/usage/installation.html\">dtaidistance</a></p>\n<pre class=\"language-bash\"><code class=\"language-bash\">pip <span class=\"token function\">install</span> dtaidistance</code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> dtaidistance <span class=\"token keyword\">import</span> dtw<br>s1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><br>s2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><br>distance <span class=\"token operator\">=</span> dtw<span class=\"token punctuation\">.</span>distance<span class=\"token punctuation\">(</span>s1<span class=\"token punctuation\">,</span> s2<span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># plot</span><br><span class=\"token keyword\">from</span> dtaidistance <span class=\"token keyword\">import</span> dtw_visualisation <span class=\"token keyword\">as</span> dtwvis<br><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np<br>path <span class=\"token operator\">=</span> dtw<span class=\"token punctuation\">.</span>warping_path<span class=\"token punctuation\">(</span>s1<span class=\"token punctuation\">,</span> s2<span class=\"token punctuation\">)</span><br>dtwvis<span class=\"token punctuation\">.</span>plot_warping<span class=\"token punctuation\">(</span>s1<span class=\"token punctuation\">,</span> s2<span class=\"token punctuation\">,</span> path<span class=\"token punctuation\">,</span> filename<span class=\"token operator\">=</span><span class=\"token string\">\"warp.png\"</span><span class=\"token punctuation\">)</span></code></pre>\n<p>👉 Another option: <a href=\"https://dynamictimewarping.github.io/python/\">dtw-python</a></p>\n<p>👉 <a href=\"https://github.com/slaypni/fastdtw\">fastdtw</a> (an approximate Dynamic Time Warping (DTW) algorithm that provides optimal or near-optimal alignments with an O(N) time and memory complexity)</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">pip <span class=\"token function\">install</span> fastdtw</code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np<br><span class=\"token keyword\">from</span> scipy<span class=\"token punctuation\">.</span>spatial<span class=\"token punctuation\">.</span>distance <span class=\"token keyword\">import</span> euclidean<br><br><span class=\"token keyword\">from</span> fastdtw <span class=\"token keyword\">import</span> fastdtw<br><br>x <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br>y <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br>distance<span class=\"token punctuation\">,</span> path <span class=\"token operator\">=</span> fastdtw<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> dist<span class=\"token operator\">=</span>euclidean<span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>distance<span class=\"token punctuation\">)</span></code></pre>\n",
      "date_published": "2020-12-29T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/umap-t-SNE/",
      "url": "https://dinhanhthi.com/umap-t-SNE/",
      "title": "Dimensionality Reduction: t-SNE &amp; UMAP",
      "content_html": "<p>👉 Note: <a href=\"/principal-component-analysis/\">Principal Component Analysis (PCA)</a></p>\n<h2 id=\"dimensionality-reduction\">Dimensionality Reduction <a class=\"direct-link\" href=\"#dimensionality-reduction\">#</a></h2>\n<h2 id=\"t-sne\">t-SNE <a class=\"direct-link\" href=\"#t-sne\">#</a></h2>\n<h2 id=\"umap\">UMAP <a class=\"direct-link\" href=\"#umap\">#</a></h2>\n<ul>\n<li><strong>UMAP</strong> = Uniform Manifold Approximation and Projection.</li>\n</ul>\n<h2 id=\"diff%3A-t-sne-vs-umap-vs-pca\">Diff: t-SNE vs UMAP vs PCA <a class=\"direct-link\" href=\"#diff%3A-t-sne-vs-umap-vs-pca\">#</a></h2>\n<p>👉 Check intuitively the difference between them with <a href=\"http://projector.tensorflow.org/\">Embedding Projector tool</a> from tensorflow.</p>\n",
      "date_published": "2020-12-29T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/word-embedding/",
      "url": "https://dinhanhthi.com/word-embedding/",
      "title": "Word Embedding",
      "content_html": "<h2 id=\"what-%26-why%3F\">What &amp; Why? <a class=\"direct-link\" href=\"#what-%26-why%3F\">#</a></h2>\n<ul>\n<li>ML needs vectors (array of numbers) as input <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇐</mo></mrow><annotation encoding=\"application/x-tex\">\\Leftarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇐</span></span></span></span></span> Texts need to be converted to (array of) numbers (or <strong>vectorize</strong> the texts).\n<ul>\n<li>One-hot encodings <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> inefficient (almost all elements of the sparse matrix are zeros)</li>\n<li>Encode each word with a unique number <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> more efficient than one-hot but not capturing the relationship between words.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> That's why we think of <em>Word embedding</em> which helps:\n<ul>\n<li>Dense representation.</li>\n<li>There are relationships between similar words.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><strong>Word embedding</strong> = the idea in which words and associated words are <em>clustered as vectors in a multi-dimensional space</em>. That allows words with similar meaning to have a similar representation.\n<ul>\n<li>a dense vector of floating point values.</li>\n<li>similar words have a similar encoding.</li>\n<li>like a &quot;lookup table&quot;</li>\n<li>values are trainable parameters.</li>\n</ul>\n</li>\n<li>Dimensional?\n<ul>\n<li>Small dataset: commonly 8.</li>\n<li>Big dataset: commonly up to 1024.</li>\n</ul>\n</li>\n<li>The meaning of the words can come from labeling of the dataset.\n<ul>\n<li><em>Example</em>: &quot;dull&quot; and &quot;boring&quot; show up a lot in negative reviews <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> they have similar sentiments <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> they are close to each other in the sentence <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> thus their vectors will be similar <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> NN train + learn these vectors + associating them with the labels to come up with what's called in embedding.</li>\n</ul>\n</li>\n<li>The purpose of <em>embedding dimension</em> is the number of dimensions for the vector representing the word encoding.</li>\n</ul>\n<p><img src=\"/img/post/nlp/word-embedding-example.png\" alt=\"Word embedding examples\" class=\"img-40\"><br>\n<em>An example of 4-dimensional embedding. <a href=\"https://www.tensorflow.org/tutorials/text/word_embeddings\">Source</a> of the idea.</em></p>\n<h2 id=\"how%3F\">How? <a class=\"direct-link\" href=\"#how%3F\">#</a></h2>\n<h3 id=\"tensorflow\">Tensorflow <a class=\"direct-link\" href=\"#tensorflow\">#</a></h3>\n<p>👉 <a href=\"https://www.tensorflow.org/tutorials/text/word_embeddings\">Word embeddings | TensorFlow Core</a><br>\n👉 <a href=\"/deeplearning-ai-tensorflow-course-3/#word-embeddings\">Note about Word embeddings</a> from the course of <a href=\"http://deeplearning.ai\">deeplearning.ai</a>.<br>\n👉 <a href=\"http://projector.tensorflow.org/\">Embedding projector</a> -- visualization of high-dimensional data</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Embed a 1,000 word vocabulary into 5 dimensions.</span><br>embedding_layer <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Embedding<span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span></code></pre>\n",
      "date_published": "2020-12-27T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/domain-dns/",
      "url": "https://dinhanhthi.com/domain-dns/",
      "title": "Domain &amp; DNS",
      "content_html": "<h2 id=\"dns-%26-github-pages\">DNS &amp; Github Pages <a class=\"direct-link\" href=\"#dns-%26-github-pages\">#</a></h2>\n<p>🔅 Point <code>tool.dinhanhthi.com</code> to <code>dinhanhthi.github.io/tools</code></p>\n<ul>\n<li>On Github repository's setting (<code>github.com/dinhanhthi/tools/settings</code>), in the <strong>Custom domain</strong> section: <code>tool.dinhanhthi.com</code>.</li>\n<li>On DNS manager: create a <code>CNAME</code> record pointing from <code>tool</code> (Name section) to <code>dinhanhthi.github.io</code> (Content section).</li>\n</ul>\n<p>💡 For other github projects pages (e.g. others than <code>/tools</code>), you do the same things.</p>\n<h2 id=\"dns-%26-netlify-sites\">DNS &amp; Netlify sites <a class=\"direct-link\" href=\"#dns-%26-netlify-sites\">#</a></h2>\n<ul>\n<li>On Netlify site, go to <strong>Domain Settings</strong>, in <strong>Custom domains</strong>, click on <strong>Add domain alias</strong>, fill in your custom domain and <strong>Save</strong> (Ignore the warnings).</li>\n<li>In DNS setting:\n<ul>\n<li>From <code>sub.domain.com</code> to <code>app-name.netlify.com</code>: create a <code>CNAME</code> record with <code>sub</code> as <strong>Name</strong> and <code>app-name.netlify.com</code> as <strong>Content</strong>.</li>\n<li>From <code>domain.com</code> to <code>app-name.netlify.com</code>:\n<ul>\n<li>Create a <code>A</code> record with <code>domain.com</code> as <strong>Name</strong> and <code>104.198.14.52</code> as <strong>Content</strong>.</li>\n<li>Create a <code>CNAME</code> record with <code>www</code> as <strong>Name</strong> and <code>app-name.netlify.com</code> as <strong>Content</strong>.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"dns-settings\">DNS settings <a class=\"direct-link\" href=\"#dns-settings\">#</a></h2>\n<p>🔅 Forward all sites in <code>note.dinhanhthi.com</code> to <code>dinhanhthi.com</code>: create a <code>CNAME</code> record with <code>note</code> as <strong>Name</strong> and <code>dinhanhthi.com</code> as <strong>Content</strong>.</p>\n",
      "date_published": "2020-12-21T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/metrics-for-clustering/",
      "url": "https://dinhanhthi.com/metrics-for-clustering/",
      "title": "Metrics for clustering",
      "content_html": "<p>In order to group points into clusters, we need to know about their distance between each other.</p>\n<h2 id=\"intercluster-%26-intracluster\">Intercluster &amp; intracluster <a class=\"direct-link\" href=\"#intercluster-%26-intracluster\">#</a></h2>\n<ul>\n<li><strong>Intracluster distance</strong>: Distance between two point in the same cluster.</li>\n<li><strong>Intercluster distance</strong>: Distance between two points in the different clusters.</li>\n</ul>\n<p><img src=\"/img/post/ML/clustering/intercluster-intracluster.png\" alt=\"Intercluster &amp; intracluster distance\" class=\"img-60\"><br>\n<em>An illustraction of intercluster and intracluster distance.</em></p>\n<div class=\"success\">\n<p>Best clustering <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> min intracluster &amp; max intercluster.</p>\n</div>\n<h2 id=\"distances-used\">Distances used <a class=\"direct-link\" href=\"#distances-used\">#</a></h2>\n<h3 id=\"intracluster-types\">Intracluster types <a class=\"direct-link\" href=\"#intracluster-types\">#</a></h3>\n<p><strong>Intracluster</strong> -- Measuring distance between points in a cluster.</p>\n<div class=\"columns-2 size-2-1\" markdown=\"1\">\n<div>\n<p>🔅 <strong>Complete Diameter Distance</strong>: the <mark>farthest distance</mark> between two points in a cluster.</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>δ</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo><mo>=</mo><munder><mo><mi>max</mi><mo>⁡</mo></mo><mrow><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo>∈</mo><mi>S</mi></mrow></munder><mi>d</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\n\\delta (S) = \\max_{x, y\\in S} d(x,y)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03785em;\">δ</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.630439em;vertical-align:-0.880439em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.43055999999999994em;\"><span style=\"top:-2.3556690000000002em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">y</span><span class=\"mrel mtight\">∈</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\">max</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.880439em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span></span></span></span></span></eqn></section></math>\n</div>\n<p><img src=\"/img/post/ML/clustering/distance-complete-diameter.png\" alt=\"Complete Diameter Distance\" class=\"img-100\"></p>\n</div>\n<!--  -->\n<div class=\"columns-2 size-2-1\" markdown=\"1\">\n<div>\n<p>🔅 <strong>Average Diameter Distance</strong>: the <mark>average distance</mark> between ALL points in a clusters.</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>δ</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mfrac><mn>1</mn><mrow><mi mathvariant=\"normal\">∣</mi><mi>S</mi><mi mathvariant=\"normal\">∣</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"normal\">∣</mi><mi>S</mi><mi mathvariant=\"normal\">∣</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow></mfrac><munder><mo>∑</mo><mrow><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo>∈</mo><mi>S</mi><mo separator=\"true\">,</mo><mi>x</mi><mo mathvariant=\"normal\">≠</mo><mi>y</mi></mrow></munder><mi>d</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\n\\delta (S) = \\dfrac{1}{\\vert S\\vert (\\vert S\\vert-1)} \\sum_{x, y\\in S, x\\ne y} d(x,y)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03785em;\">δ</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.759661em;vertical-align:-1.438221em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord\">∣</span><span class=\"mopen\">(</span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord\">∣</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.936em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.050005em;\"><span style=\"top:-1.8478869999999998em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">y</span><span class=\"mrel mtight\">∈</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">x</span><span class=\"mrel mtight\"><span class=\"mrel mtight\"><span class=\"mord vbox mtight\"><span class=\"thinbox mtight\"><span class=\"rlap mtight\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"inner\"><span class=\"mrel mtight\"></span></span><span class=\"fix\"></span></span></span></span></span><span class=\"mrel mtight\">=</span></span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">y</span></span></span></span><span style=\"top:-3.0500049999999996em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.438221em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span></span></span></span></span></eqn></section></math>\n<p>where <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∣</mi><mi>S</mi><mi mathvariant=\"normal\">∣</mi></mrow><annotation encoding=\"application/x-tex\">\\vert S\\vert</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord\">∣</span></span></span></span></span> is the number of points in <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span>.</p>\n</div>\n<p><img src=\"/img/post/ML/clustering/distance-average-diameter.png\" alt=\"Average Diameter Distance\" class=\"img-100\"></p>\n</div>\n<!--  -->\n<div class=\"columns-2 size-2-1\" markdown=\"1\">\n<div>\n<p>🔅 <strong>Centroid Diameter Distance</strong>: the double of average distance between points and the center of a cluster.</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>δ</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mn>2</mn><mrow><mo fence=\"true\">(</mo><mfrac><mrow><munder><mo>∑</mo><mrow><mi>x</mi><mo>∈</mo><mi>S</mi></mrow></munder><mi>d</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><msub><mi>c</mi><mi>S</mi></msub><mo stretchy=\"false\">)</mo></mrow><mrow><mi mathvariant=\"normal\">∣</mi><mi>S</mi><mi mathvariant=\"normal\">∣</mi></mrow></mfrac><mo fence=\"true\">)</mo></mrow></mrow><annotation encoding=\"application/x-tex\">\n\\delta (S) = 2 \\left( \\dfrac{\\sum_{x\\in S}d(x, c_S)}{\\vert S\\vert} \\right)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03785em;\">δ</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.41711em;vertical-align:-0.95003em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">(</span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.4670800000000002em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord\">∣</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.71708em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.17862099999999992em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"mrel mtight\">∈</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32708000000000004em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.936em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">)</span></span></span></span></span></span></span></eqn></section></math>\n<p>where <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>c</mi><mi>S</mi></msub></mrow><annotation encoding=\"application/x-tex\">c_S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> (can be calculated as <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><msub><mi mathvariant=\"normal\">Σ</mi><mrow><mi>x</mi><mo>∈</mo><mi>S</mi></mrow></msub><mi>x</mi></mrow><mrow><mi mathvariant=\"normal\">∣</mi><mi>S</mi><mi mathvariant=\"normal\">∣</mi></mrow></mfrac><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">∣</mi><mi>S</mi><mi mathvariant=\"normal\">∣</mi></mrow><annotation encoding=\"application/x-tex\">\\frac{\\Sigma_{x\\in S}x}{\\vert S\\vert}), \\vert S\\vert</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.428186em;vertical-align:-0.52em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9081859999999999em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">∣</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mtight\">∣</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.429855em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">Σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3567071428571427em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"mrel mtight\">∈</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1712214285714286em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal mtight\">x</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.52em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord\">∣</span></span></span></span></span> are the center and the number of points in <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span>.</p>\n</div>\n<p><img src=\"/img/post/ML/clustering/distance-centroid-diameter.png\" alt=\"Centroid Diameter Distance\" class=\"img-100\"></p>\n</div>\n<h3 id=\"intercluster-types\">Intercluster types <a class=\"direct-link\" href=\"#intercluster-types\">#</a></h3>\n<p><strong>Intercluster</strong> -- Measuring distance between 2 clusters. They can be used in <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.cluster.AgglomerativeClustering.html#sklearn.cluster.AgglomerativeClustering\">Agglomerative clustering</a>.</p>\n<div class=\"columns-2\" markdown=\"1\">\n<div>\n<p>🔅 <strong>Single Linkage Distance</strong>: the <mark>closest distance</mark> between two objects in 2 clusters.</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>δ</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><mi>T</mi><mo stretchy=\"false\">)</mo><mo>=</mo><munder><mo><mi>min</mi><mo>⁡</mo></mo><mrow><mi>x</mi><mo>∈</mo><mi>S</mi><mo separator=\"true\">,</mo><mi>y</mi><mo>∈</mo><mi>T</mi></mrow></munder><mi>d</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\n\\delta (S, T) = \\min_{x\\in S, y\\in T} d(x,y)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03785em;\">δ</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.630439em;vertical-align:-0.880439em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.66786em;\"><span style=\"top:-2.3556690000000002em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"mrel mtight\">∈</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">y</span><span class=\"mrel mtight\">∈</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\">min</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.880439em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span></span></span></span></span></eqn></section></math>\n</div>\n<p><img src=\"/img/post/ML/clustering/distance-single-linkage.png\" alt=\"Single linkage distance\" class=\"img-100\"></p>\n</div>\n<!--  -->\n<div class=\"columns-2\" markdown=\"1\">\n<div>\n<p>🔅 <strong>Complete (maximum) Linkage Distance</strong>: the <mark>farthest distance</mark> between two objects in 2 clusters.</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>δ</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><mi>T</mi><mo stretchy=\"false\">)</mo><mo>=</mo><munder><mo><mi>max</mi><mo>⁡</mo></mo><mrow><mi>x</mi><mo>∈</mo><mi>S</mi><mo separator=\"true\">,</mo><mi>y</mi><mo>∈</mo><mi>T</mi></mrow></munder><mi>d</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\n\\delta (S, T) = \\max_{x\\in S, y\\in T} d(x,y)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03785em;\">δ</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.630439em;vertical-align:-0.880439em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.43055999999999994em;\"><span style=\"top:-2.3556690000000002em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"mrel mtight\">∈</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">y</span><span class=\"mrel mtight\">∈</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\">max</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.880439em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span></span></span></span></span></eqn></section></math>\n</div>\n<p><img src=\"/img/post/ML/clustering/distance-complete-linkage.png\" alt=\"Complete linkage distance\" class=\"img-100\"></p>\n</div>\n<!--  -->\n<div class=\"columns-2\" markdown=\"1\">\n<div>\n<p>🔅 <strong>Centroid Linkage Distance</strong>: the distance <mark>between 2 centers</mark> of 2 clusters.</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>δ</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><mi>T</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>d</mi><mrow><mo fence=\"true\">(</mo><msub><mi>c</mi><mi>S</mi></msub><mo separator=\"true\">,</mo><msub><mi>c</mi><mi>T</mi></msub><mo fence=\"true\">)</mo></mrow></mrow><annotation encoding=\"application/x-tex\">\n\\delta (S, T) = d\\left( c_S, c_T \\right)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03785em;\">δ</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\">)</span></span></span></span></span></span></eqn></section></math>\n<p>where <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>c</mi><mi>S</mi></msub><mo separator=\"true\">,</mo><msub><mi>c</mi><mi>T</mi></msub></mrow><annotation encoding=\"application/x-tex\">c_S, c_T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> are centers of <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mo separator=\"true\">,</mo><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">S, T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span>. They can be calculated as <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><msub><mi mathvariant=\"normal\">Σ</mi><mrow><mi>x</mi><mo>∈</mo><mi>S</mi></mrow></msub><mi>x</mi></mrow><mrow><mi mathvariant=\"normal\">∣</mi><mi>S</mi><mi mathvariant=\"normal\">∣</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\Sigma_{x\\in S} x}{\\vert S\\vert}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.428186em;vertical-align:-0.52em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9081859999999999em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">∣</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mtight\">∣</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.429855em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">Σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3567071428571427em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"mrel mtight\">∈</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1712214285714286em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal mtight\">x</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.52em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span> and <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><msub><mi mathvariant=\"normal\">Σ</mi><mrow><mi>x</mi><mo>∈</mo><mi>T</mi></mrow></msub><mi>x</mi></mrow><mrow><mi mathvariant=\"normal\">∣</mi><mi>T</mi><mi mathvariant=\"normal\">∣</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\Sigma_{x\\in T} x}{\\vert T\\vert}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.428186em;vertical-align:-0.52em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9081859999999999em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">∣</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mtight\">∣</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.429855em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">Σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3567071428571427em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"mrel mtight\">∈</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1712214285714286em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal mtight\">x</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.52em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span> where <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∣</mi><mi>S</mi><mi mathvariant=\"normal\">∣</mi><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">∣</mi><mi>T</mi><mi mathvariant=\"normal\">∣</mi></mrow><annotation encoding=\"application/x-tex\">\\vert S\\vert, \\vert T\\vert</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord\">∣</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord\">∣</span></span></span></span></span> is the number of elements in <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mo separator=\"true\">,</mo><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">S, T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span>.</p>\n<div class=\"hsbox\"><div class=\"hs__title\">More about <em>centroid</em> and <em>center</em></div><div class=\"hs__content\"><p>Don't be confused between these two. <strong>Center</strong> means the point in the interior of a circle that is equidistant from all points on the circumference, whereas <strong>centroid</strong> means the point at the centre of any shape.</p>\n</div></div>\n</div>\n<p><img src=\"/img/post/ML/clustering/distance-centroid-linkage.png\" alt=\"Centroid linkage distance\" class=\"img-100\"></p>\n</div>\n<!--  -->\n<div class=\"columns-2\" markdown=\"1\">\n<div>\n<p>🔅 <strong>Average Linkage Distance</strong>: the <mark>average distance</mark> between ALL objects in 2 clusters.</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>δ</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><mi>T</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mfrac><mn>1</mn><mrow><mi mathvariant=\"normal\">∣</mi><mi>S</mi><mi mathvariant=\"normal\">∣</mi><mi mathvariant=\"normal\">∣</mi><mi>T</mi><mi mathvariant=\"normal\">∣</mi></mrow></mfrac><munder><mo>∑</mo><mrow><mi>x</mi><mo>∈</mo><mi>S</mi><mo separator=\"true\">,</mo><mi>y</mi><mo>∈</mo><mi>T</mi></mrow></munder><mi>d</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\n\\delta (S, T) = \\dfrac{1}{\\vert S\\vert \\vert T\\vert} \\sum_{x\\in S, y\\in T} d(x,y)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03785em;\">δ</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.751884em;vertical-align:-1.430444em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord\">∣</span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord\">∣</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.936em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.050005em;\"><span style=\"top:-1.8556639999999998em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"mrel mtight\">∈</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">y</span><span class=\"mrel mtight\">∈</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span style=\"top:-3.0500049999999996em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.430444em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span></span></span></span></span></eqn></section></math>\n</div>\n<p><img src=\"/img/post/ML/clustering/distance-average-linkage.png\" alt=\"Average linkage distance\" class=\"img-100\"></p>\n</div>\n<p>where <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∣</mi><mi>S</mi><mi mathvariant=\"normal\">∣</mi><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">∣</mi><mi>T</mi><mi mathvariant=\"normal\">∣</mi></mrow><annotation encoding=\"application/x-tex\">\\vert S\\vert, \\vert T\\vert</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord\">∣</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord\">∣</span></span></span></span></span> is the number of elements in <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mo separator=\"true\">,</mo><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">S, T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span>.</p>\n<!--  -->\n<div class=\"columns-2\" markdown=\"1\">\n<div>\n<p>🔅 <strong>Ward's method</strong> (<em>Minimum variance method</em>): the <mark>different deviation</mark> between a group of 2 considered clusters and a &quot;reputed&quot; cluster joining those 2 clusters.</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>δ</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><mi>T</mi><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><munder><mo>∑</mo><mrow><mi>x</mi><mo>∈</mo><mi>S</mi><mo>∪</mo><mi>T</mi></mrow></munder><mi mathvariant=\"normal\">∥</mi><mi>x</mi><mo>−</mo><msub><mi>c</mi><mrow><mi>S</mi><mo>∪</mo><mi>T</mi></mrow></msub><msup><mi mathvariant=\"normal\">∥</mi><mn>2</mn></msup><mo>−</mo><mrow><mo fence=\"true\">(</mo><munder><mo>∑</mo><mrow><mi>x</mi><mo>∈</mo><mi>S</mi></mrow></munder><mi mathvariant=\"normal\">∥</mi><mi>x</mi><mo>−</mo><msub><mi>c</mi><mi>S</mi></msub><msup><mi mathvariant=\"normal\">∥</mi><mn>2</mn></msup><mo>+</mo><munder><mo>∑</mo><mrow><mi>x</mi><mo>∈</mo><mi>T</mi></mrow></munder><mi mathvariant=\"normal\">∥</mi><mi>x</mi><mo>−</mo><msub><mi>c</mi><mi>T</mi></msub><msup><mi mathvariant=\"normal\">∥</mi><mn>2</mn></msup><mo fence=\"true\">)</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mfrac><mrow><mi mathvariant=\"normal\">∣</mi><mi>S</mi><mi mathvariant=\"normal\">∣</mi><mi mathvariant=\"normal\">∣</mi><mi>T</mi><mi mathvariant=\"normal\">∣</mi></mrow><mrow><mi mathvariant=\"normal\">∣</mi><mi>S</mi><mi mathvariant=\"normal\">∣</mi><mo>+</mo><mi mathvariant=\"normal\">∣</mi><mi>T</mi><mi mathvariant=\"normal\">∣</mi></mrow></mfrac><mi mathvariant=\"normal\">∥</mi><msub><mi>c</mi><mi>S</mi></msub><mo>−</mo><msub><mi>c</mi><mi>T</mi></msub><msup><mi mathvariant=\"normal\">∥</mi><mn>2</mn></msup></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\n\\begin{aligned}\n\\delta (S, T) &amp;= \\sum_{x\\in S\\cup T} \\Vert x - c_{S\\cup T} \\Vert^2 - \\left( \\sum_{x\\in S} \\Vert x - c_S \\Vert^2 + \\sum_{x\\in T} \\Vert x - c_T \\Vert^2 \\right) \\\\\n&amp;= \\dfrac{\\vert S\\vert \\vert T\\vert}{\\vert S\\vert + \\vert T\\vert}\\Vert c_S - c_T \\Vert^2\n\\end{aligned}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:6.034706em;vertical-align:-2.767353em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.267353em;\"><span style=\"top:-5.267353em;\"><span class=\"pstrut\" style=\"height:3.75em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03785em;\">δ</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span></span></span><span style=\"top:-2.2186470000000003em;\"><span class=\"pstrut\" style=\"height:3.75em;\"></span><span class=\"mord\"></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.767353em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.267353em;\"><span style=\"top:-5.267353em;\"><span class=\"pstrut\" style=\"height:3.75em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.050005em;\"><span style=\"top:-1.8556639999999998em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"mrel mtight\">∈</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"mbin mtight\">∪</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span style=\"top:-3.0500049999999996em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.321706em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">∥</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"mbin mtight\">∪</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\">∥</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size4\">(</span></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.050005em;\"><span style=\"top:-1.8556639999999998em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"mrel mtight\">∈</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span></span></span></span><span style=\"top:-3.0500049999999996em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.321706em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">∥</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\">∥</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.050005em;\"><span style=\"top:-1.8556639999999998em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"mrel mtight\">∈</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span style=\"top:-3.0500049999999996em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.321706em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">∥</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\">∥</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size4\">)</span></span></span></span></span><span style=\"top:-2.2186470000000003em;\"><span class=\"pstrut\" style=\"height:3.75em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.427em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord\">∣</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord\">∣</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord\">∣</span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord\">∣</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.936em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\">∥</span><span class=\"mord\"><span class=\"mord mathnormal\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\">∥</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.767353em;\"><span></span></span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n<p>where <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>c</mi><mi>S</mi></msub><mo separator=\"true\">,</mo><msub><mi>c</mi><mi>T</mi></msub></mrow><annotation encoding=\"application/x-tex\">c_S, c_T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> are centers of <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mo separator=\"true\">,</mo><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">S, T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span> and <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∣</mi><mi>S</mi><mi mathvariant=\"normal\">∣</mi><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">∣</mi><mi>T</mi><mi mathvariant=\"normal\">∣</mi></mrow><annotation encoding=\"application/x-tex\">\\vert S\\vert, \\vert T\\vert</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord\">∣</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord\">∣</span></span></span></span></span> is the number of elements in <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mo separator=\"true\">,</mo><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">S, T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span>.</p>\n</div>\n<p><img src=\"/img/post/ML/clustering/distance-ward.png\" alt=\"Ward's method\" class=\"img-100\"></p>\n</div>\n<h4 id=\"difference\">Difference <a class=\"direct-link\" href=\"#difference\">#</a></h4>\n<p>👉 <a href=\"https://scikit-learn.org/stable/modules/clustering.html#different-linkage-type-ward-complete-average-and-single-linkage\">Different linkage type: Ward, complete, average, and single linkage</a></p>\n<p><img src=\"/img/post/ML/clustering/sphx_glr_plot_linkage_comparison_0011.png\" alt=\"\" class=\"img-100\"><br>\n<em>Different clustering results using different linkages on some special datasets. <a href=\"https://scikit-learn.org/stable/modules/clustering.html#different-linkage-type-ward-complete-average-and-single-linkage\">Source of image</a>.</em></p>\n<h4 id=\"code\">Code <a class=\"direct-link\" href=\"#code\">#</a></h4>\n<p>Linkages can be called via <code>linkage</code> parameter from sklearn's <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.cluster.AgglomerativeClustering.html#sklearn.cluster.AgglomerativeClustering\">AgglomerativeClustering</a></p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>cluster <span class=\"token keyword\">import</span> AgglomerativeClustering<br>clustering <span class=\"token operator\">=</span> AgglomerativeClustering<span class=\"token punctuation\">(</span>linkage<span class=\"token operator\">=</span><span class=\"token string\">\"ward\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">)</span><br><span class=\"token comment\"># There are others: \"ward\" (default), \"complete\", \"average\", \"single\"</span></code></pre>\n<h2 id=\"silhouette-analysis\">Silhouette analysis <a class=\"direct-link\" href=\"#silhouette-analysis\">#</a></h2>\n<p>Silhouette analysys (SA) is used to determine the <mark>degree of separation between clusters</mark>. It measure how close each point in one cluster is to points in the neighboring clusters and thus <mark>gives an idea of number of clusters</mark> visually.</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>S</mi><msub><mi>A</mi><mi>i</mi></msub><mo>=</mo><mfrac><mrow><msub><mi>b</mi><mi>i</mi></msub><mo>−</mo><msub><mi>a</mi><mi>i</mi></msub></mrow><mrow><mi>max</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><msub><mi>a</mi><mi>i</mi></msub><mo separator=\"true\">,</mo><msub><mi>b</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\nSA_i = \\dfrac{b_i-a_i}{\\max (a_i, b_i)}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.30744em;vertical-align:-0.936em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.37144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mop\">max</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.936em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></eqn></section></math>\n<p><img src=\"/img/post/ML/clustering/silhouette-score.png\" alt=\"Illustration of  and \" class=\"img-50\"><br>\n<em>Illustration of mean <mark>intra-cluster distance</mark> <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">a</span></span></span></span></span> (average distance between considered sample to all its neighboring in the same cluster) and <mark>nearest-cluster distance</mark> <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></span> (average distance between considered sample to all samples in the closest cluster of its cluster).</em></p>\n<ul>\n<li>SA = <strong>+1</strong> : a sample is far away from its neighboring clusters. (For clustering algorithm) Clusters are <strong>dense &amp; well-separated</strong>.</li>\n<li>SA = <strong>0</strong> : a sample is near decision boundary. (For clustering algorithm) There are <strong>overlapped clusters</strong>.</li>\n<li>SA = <strong>-1</strong> : a sample is assigned to a <strong>wrong cluster</strong>.</li>\n</ul>\n<h3 id=\"used-for%3F\">Used for? <a class=\"direct-link\" href=\"#used-for%3F\">#</a></h3>\n<ul>\n<li>Better than <a href=\"/k-means-clustering/#how-to-choose-k%3F\">Elbow method</a> to find <mark>the number of clusters</mark>.<sup><a href=\"https://towardsdatascience.com/silhouette-method-better-than-elbow-method-to-find-optimal-clusters-378d62ff6891\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></li>\n<li>Check if a clustering algorithm is well performed.</li>\n<li>Can be used to find outliers (-1 scores)</li>\n</ul>\n<h3 id=\"silhouette-plot\">Silhouette plot <a class=\"direct-link\" href=\"#silhouette-plot\">#</a></h3>\n<p>👉 <a href=\"https://scikit-learn.org/stable/auto_examples/cluster/plot_kmeans_silhouette_analysis.html\">Selecting the number of clusters with silhouette analysis on KMeans clustering</a></p>\n<p><img src=\"/img/post/ML/clustering/sphx_glr_plot_kmeans_silhouette_analysis_001.png\" alt=\"Silhouette plot with \" class=\"img-100\"><br>\n<em>Silhouette plot with <code>n_clusters=2</code>. <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">Oy</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span></span>: all samples in the dataset sorted in a given cluster. <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">Ox</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mord mathnormal\">x</span></span></span></span></span>: The Silhouette scores w.r.t. these samples. The red dotted line is the mean <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">SA</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">A</span></span></span></span></span>.</em></p>\n<p><mark>What we wanna</mark> see for a good number of clusters?</p>\n<ol>\n<li>Red dotted lines <strong>approaches 1</strong>.</li>\n<li>Plot of each cluster should be <strong>above red dotted</strong> line as much as possible.</li>\n<li>The width of plot of each cluster should be as <strong>uniform</strong> as possible.</li>\n</ol>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> yellowbrick<span class=\"token punctuation\">.</span>cluster <span class=\"token keyword\">import</span> SilhouetteVisualizer<br><br>model <span class=\"token operator\">=</span> KMeans<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> random_state<span class=\"token operator\">=</span><span class=\"token number\">42</span><span class=\"token punctuation\">)</span><br>visualizer <span class=\"token operator\">=</span> SilhouetteVisualizer<span class=\"token punctuation\">(</span>model<span class=\"token punctuation\">,</span> colors<span class=\"token operator\">=</span><span class=\"token string\">'yellowbrick'</span><span class=\"token punctuation\">)</span><br><br>visualizer<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">)</span>        <span class=\"token comment\"># Fit the data to the visualizer</span><br>visualizer<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>        <span class=\"token comment\"># Finalize and render the figure</span></code></pre>\n<p>For original scikit-learn's functions, check <a href=\"https://scikit-learn.org/stable/auto_examples/cluster/plot_kmeans_silhouette_analysis.html\">this example</a>.</p>\n<h3 id=\"code-2\">Code <a class=\"direct-link\" href=\"#code-2\">#</a></h3>\n<p>👉 Ref to <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.metrics.silhouette_score.html#sklearn-metrics-silhouette-score\">silhouette_score</a>, <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.metrics.silhouette_score.html#sklearn-metrics-silhouette-score\">silhouette_samples</a>.</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># MEAN Silhouette Coefficient over all samples</span><br><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>metrics <span class=\"token keyword\">import</span> silhouette_score<br>silhouette_score<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">,</span> labels<span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Silhouette Coefficient of EACH SAMPLE</span><br><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>metrics <span class=\"token keyword\">import</span> silhouette_samples<br>scores <span class=\"token operator\">=</span> silhouette_samples<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">,</span> cluster_labels<span class=\"token punctuation\">)</span><br><span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>n_clusters<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>\tith_cluster_silhouette_values <span class=\"token operator\">=</span> scores<span class=\"token punctuation\">[</span>cluster_labels <span class=\"token operator\">==</span> i<span class=\"token punctuation\">]</span></code></pre>\n",
      "date_published": "2020-12-16T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/reading/",
      "url": "https://dinhanhthi.com/reading/",
      "title": "My reading list",
      "content_html": "\n<p>I like to read books in <strong>applied maths</strong>, <strong>sciences</strong>, <strong>biography</strong>, <strong>history</strong> and <strong>psychology</strong>. Check <a href=\"https://www.goodreads.com/user/show/19630622-thi-dinh\">my activities on Goodreads</a> (to-read books, comments, ratings,...) for more information.</p>\n\n\n<ol id=\"reading-list\" class=\"indent\">\n  \n    <li class=\"item\">\n      \n        <span class=\"badge badge-green\">I'm reading</span>\n      \n      \n        <a class=\"title\" href=\"https://www.goodreads.com/book/show/40363665-hands-on-machine-learning-with-scikit-learn-keras-and-tensorflow\" target=\"_blank\">Hands-On Machine Learning with Scikit-Learn, Keras, and Tensorflow: Concepts, Tools, and Techniques to Build Intelligent Systems</a>\n      \n      <span class=\"author\"> &mdash; Aurélien Géron.</span>\n      \n    </li>\n  \n    <li class=\"item\">\n      \n        <span class=\"badge badge-green\">I'm reading</span>\n      \n      \n        <a class=\"title\" href=\"https://www.goodreads.com/book/show/34890015-factfulness\" target=\"_blank\">Factfulness: Ten Reasons We&#39;re Wrong About the World – and Why Things Are Better Than You Think</a>\n      \n      <span class=\"author\"> &mdash; Hans Rosling, Ola Rosling, Anna Rosling Rönnlund.</span>\n      \n    </li>\n  \n    <li class=\"item\">\n      \n      \n        <span class=\"badge badge-blue\">my choice</span>\n      \n        <a class=\"title\" href=\"https://www.goodreads.com/review/show/3578853694\" target=\"_blank\">The Godfather</a>\n      \n      <span class=\"author\"> &mdash; Mario Puzo.</span>\n      \n    </li>\n  \n    <li class=\"item\">\n      \n      \n      \n        <a class=\"title\" href=\"https://www.goodreads.com/book/show/16322.The_A_B_C_Murders\" target=\"_blank\">The ABC Murders</a>\n      \n      <span class=\"author\"> &mdash; Agatha Christie.</span>\n      \n        <span class=\"intro\">When Alice Asher is murdered in Andover, Hercule Poirot is already on to the clues. Alphabetically speaking, it&#39;s one down, twenty-five to go.</span>\n    </li>\n  \n    <li class=\"item\">\n      \n      \n      \n        <a class=\"title\" href=\"https://www.goodreads.com/book/show/421369.Inside_the_Minds_of_Serial_Killers\" target=\"_blank\">Inside the Minds of Serial Killers: Why They Kill</a>\n      \n      <span class=\"author\"> &mdash; Katherine Ramsland.</span>\n      \n    </li>\n  \n    <li class=\"item\">\n      \n      \n      \n        <a class=\"title\" href=\"https://www.goodreads.com/book/show/39999.The_Boy_in_the_Striped_Pajamas\" target=\"_blank\">The Boy in the Striped Pajamas</a>\n      \n      <span class=\"author\"> &mdash; Jostein Gaarder.</span>\n      \n    </li>\n  \n    <li class=\"item\">\n      \n      \n        <span class=\"badge badge-blue\">my choice</span>\n      \n        <a class=\"title\" href=\"https://www.goodreads.com/review/show/3027338701?book_show_action=false&amp;from_review_page=1\" target=\"_blank\">Con đường Hồi giáo</a>\n      \n      <span class=\"author\"> &mdash; Nguyễn Phương Mai.</span>\n      \n    </li>\n  \n    <li class=\"item\">\n      \n      \n      \n        <a class=\"title\" href=\"https://www.goodreads.com/review/show/3009102301\" target=\"_blank\">South of the Border, West of the Sun</a>\n      \n      <span class=\"author\"> &mdash; Haruki Murakami.</span>\n      \n    </li>\n  \n    <li class=\"item\">\n      \n      \n      \n        <a class=\"title\" href=\"https://www.goodreads.com/review/show/2956625007\" target=\"_blank\">Think like a freak</a>\n      \n      <span class=\"author\"> &mdash; Steven D. Levitt.</span>\n      \n        <span class=\"intro\">The New York Times bestselling Freakonomics changed the way we see the world, exposing the hidden side of just about everything.</span>\n    </li>\n  \n    <li class=\"item\">\n      \n      \n      \n        <a class=\"title\" href=\"https://www.goodreads.com/review/show/2643302498\" target=\"_blank\">Homo Deus: A Brief History of Tomorrow</a>\n      \n      <span class=\"author\"> &mdash; Yuval Noah Harari.</span>\n      \n        <span class=\"intro\">The next book of Harari after his Sapiens.</span>\n    </li>\n  \n    <li class=\"item\">\n      \n      \n      \n        <a class=\"title\" href=\"https://www.goodreads.com/book/show/11843183-oxford-th-ng-y-u\" target=\"_blank\">Oxford thương yêu</a>\n      \n      <span class=\"author\"> &mdash; Dương Thụy.</span>\n      \n    </li>\n  \n    <li class=\"item\">\n      \n      \n        <span class=\"badge badge-blue\">my choice</span>\n      \n        <a class=\"title\" href=\"https://www.goodreads.com/review/show/2029179832\" target=\"_blank\">Sapiens: A Brief History of Humankind</a>\n      \n      <span class=\"author\"> &mdash; Yuval Noah Harari.</span>\n      \n        <span class=\"intro\">Go through the history of human from the first individuals to walk the earth to the radical.</span>\n    </li>\n  \n    <li class=\"item\">\n      \n      \n      \n        <a class=\"title\" href=\"https://www.goodreads.com/review/show/2049756022?book_show_action=false&amp;from_review_page=1\" target=\"_blank\">Tâm nguyện cuối cùng</a>\n      \n      <span class=\"author\"> &mdash; Mi Lei.</span>\n      \n        <span class=\"intro\">The newest detective novel from Mi Lei. This time, he focused heavily on the stories of each character. There are still twists but they&#39;re quite easy to guess.</span>\n    </li>\n  \n    <li class=\"item\">\n      \n      \n      \n        <a class=\"title\" href=\"https://www.goodreads.com/review/show/2680538787?book_show_action=false&amp;from_review_page=1\" target=\"_blank\">Hiệu ứng chim mồi</a>\n      \n      <span class=\"author\"> &mdash; Quốc Khánh, Hạo Nhiên.</span>\n      \n        <span class=\"intro\">With a simple and witty writing style, the authors show us some useful psychological techniques for business.</span>\n    </li>\n  \n    <li class=\"item\">\n      \n      \n      \n        <a class=\"title\" href=\"https://www.goodreads.com/review/show/2666678371?book_show_action=false&amp;from_review_page=1\" target=\"_blank\">Papillon</a>\n      \n      <span class=\"author\"> &mdash; Henri Charrière.</span>\n      \n        <span class=\"intro\">An awesome adventure of Charrière when he tried to escape from all prisons he is confined.</span>\n    </li>\n  \n    <li class=\"item\">\n      \n      \n      \n        <a class=\"title\" href=\"https://www.goodreads.com/review/show/2666680825?book_show_action=false&amp;from_review_page=1\" target=\"_blank\">Hắn và thằng bạn</a>\n      \n      <span class=\"author\"> &mdash; Quốc Khánh, Hạo Nhiên.</span>\n      \n    </li>\n  \n    <li class=\"item\">\n      \n      \n      \n        <a class=\"title\" href=\"https://www.goodreads.com/review/show/2666657989?book_show_action=false&amp;from_review_page=1\" target=\"_blank\">Edison as I know him</a>\n      \n      <span class=\"author\"> &mdash; Henry Ford, Samuel Crowther.</span>\n      \n    </li>\n  \n    <li class=\"item\">\n      \n      \n        <span class=\"badge badge-blue\">my choice</span>\n      \n        <a class=\"title\" href=\"https://www.goodreads.com/review/show/2429856389\" target=\"_blank\">To Kill a Mockingbird</a>\n      \n      <span class=\"author\"> &mdash; Harper Lee.</span>\n      \n    </li>\n  \n    <li class=\"item\">\n      \n      \n      \n        <a class=\"title\" href=\"https://www.goodreads.com/review/show/2049809738?book_show_action=false&amp;from_review_page=1\" target=\"_blank\">Predictably Irrational: The Hidden Forces That Shape Our Decisions</a>\n      \n      <span class=\"author\"> &mdash; Dan Ariely.</span>\n      \n    </li>\n  \n    <li class=\"item\">\n      \n      \n      \n        <a class=\"title\" href=\"https://www.goodreads.com/review/show/2792757668\" target=\"_blank\">Blink: The Power of Thinking Without Thinking</a>\n      \n      <span class=\"author\"> &mdash; Malcolm Gladwell.</span>\n      \n    </li>\n  \n    <li class=\"item\">\n      \n      \n      \n        <a class=\"title\" href=\"https://www.goodreads.com/review/show/2427641664?book_show_action=false&amp;from_review_page=1\" target=\"_blank\">Bức xúc không làm ta vô can</a>\n      \n      <span class=\"author\"> &mdash; Đặng Hoàng Giang.</span>\n      \n    </li>\n  \n    <li class=\"item\">\n      \n      \n      \n        <a class=\"title\" href=\"https://www.goodreads.com/review/show/2427643959?book_show_action=false&amp;from_review_page=1\" target=\"_blank\">The Murder of Roger Ackroyd</a>\n      \n      <span class=\"author\"> &mdash; Agatha Christie.</span>\n      \n    </li>\n  \n    <li class=\"item\">\n      \n      \n      \n        <a class=\"title\" href=\"https://www.goodreads.com/review/show/2427642128?book_show_action=false&amp;from_review_page=1\" target=\"_blank\">Le Petit Nicolas</a>\n      \n      <span class=\"author\"> &mdash; Sempé - Goscinny.</span>\n      \n    </li>\n  \n    <li class=\"item\">\n      \n      \n      \n        <a class=\"title\" href=\"https://www.goodreads.com/review/show/2427642679?book_show_action=false&amp;from_review_page=1\" target=\"_blank\">When he comes, close your eyes</a>\n      \n      <span class=\"author\"> &mdash; Ding Mo.</span>\n      \n    </li>\n  \n    <li class=\"item\">\n      \n      \n        <span class=\"badge badge-blue\">my choice</span>\n      \n        <a class=\"title\" href=\"https://www.goodreads.com/review/show/2049757982\" target=\"_blank\">Einstein: His Life and Universe</a>\n      \n      <span class=\"author\"> &mdash; Walter Isaacson.</span>\n      \n    </li>\n  \n    <li class=\"item\">\n      \n      \n      \n        <a class=\"title\" href=\"https://www.goodreads.com/review/show/2120557368\" target=\"_blank\">Man&#39;s Search for Meaning</a>\n      \n      <span class=\"author\"> &mdash; Viktor Emil Frankl.</span>\n      \n    </li>\n  \n    <li class=\"item\">\n      \n      \n        <span class=\"badge badge-blue\">my choice</span>\n      \n        <a class=\"title\" href=\"https://www.goodreads.com/review/show/2048880101\" target=\"_blank\">The Code Book: The Science of Secrecy from Ancient Egypt to Quantum Cryptography</a>\n      \n      <span class=\"author\"> &mdash; Simon Singh.</span>\n      \n    </li>\n  \n    <li class=\"item\">\n      \n      \n      \n        <a class=\"title\" href=\"https://www.goodreads.com/review/show/2047915450?book_show_action=false&amp;from_review_page=1\" target=\"_blank\">How to stop Worrying and start living</a>\n      \n      <span class=\"author\"> &mdash; Dale Carnegie.</span>\n      \n    </li>\n  \n    <li class=\"item\">\n      \n      \n      \n        <a class=\"title\" href=\"https://www.goodreads.com/review/show/2029181991?book_show_action=false&amp;from_review_page=1\" target=\"_blank\">Lần đầu thấy trăng</a>\n      \n      <span class=\"author\"> &mdash; Võ Diệu Thanh.</span>\n      \n    </li>\n  \n    <li class=\"item\">\n      \n      \n      \n        <a class=\"title\" href=\"https://www.goodreads.com/review/show/2029182902?book_show_action=false&amp;from_review_page=1\" target=\"_blank\">The Alchemist</a>\n      \n      <span class=\"author\"> &mdash; Paulo Coelho.</span>\n      \n    </li>\n  \n    <li class=\"item\">\n      \n      \n      \n        <a class=\"title\" href=\"https://www.goodreads.com/review/show/2029183832?book_show_action=false&amp;from_review_page=1\" target=\"_blank\">Letters to a young mathematician</a>\n      \n      <span class=\"author\"> &mdash; Ian Stewart.</span>\n      \n    </li>\n  \n    <li class=\"item\">\n      \n      \n        <span class=\"badge badge-blue\">my choice</span>\n      \n        <a class=\"title\" href=\"https://www.goodreads.com/review/show/2029184341?book_show_action=false&amp;from_review_page=1\" target=\"_blank\">The Power of Habit: Why We Do What We Do in Life and Business</a>\n      \n      <span class=\"author\"> &mdash; Charles Duhigg.</span>\n      \n    </li>\n  \n    <li class=\"item\">\n      \n      \n      \n        <a class=\"title\" href=\"https://www.goodreads.com/review/show/2029185191?book_show_action=false&amp;from_review_page=1\" target=\"_blank\">Love and Math: The Heart of Hidden Reality</a>\n      \n      <span class=\"author\"> &mdash; Edward Frenkel.</span>\n      \n    </li>\n  \n    <li class=\"item\">\n      \n      \n      \n        <a class=\"title\" href=\"https://www.goodreads.com/review/show/2792766531?book_show_action=false&amp;from_review_page=1\" target=\"_blank\">The call of the wild</a>\n      \n      <span class=\"author\"> &mdash; Jack London.</span>\n      \n    </li>\n  \n    <li class=\"item\">\n      \n      \n      \n        <a class=\"title\" href=\"https://www.goodreads.com/book/show/43035.White_Fang\" target=\"_blank\">White Fang</a>\n      \n      <span class=\"author\"> &mdash; Jack London.</span>\n      \n    </li>\n  \n    <li class=\"item\">\n      \n      \n      \n        <a class=\"title\" href=\"https://www.goodreads.com/review/show/2792767857\" target=\"_blank\">The housekeeper and the professor</a>\n      \n      <span class=\"author\"> &mdash; Yoko Ogawa.</span>\n      \n    </li>\n  \n    <li class=\"item\">\n      \n      \n      \n        <a class=\"title\" href=\"https://www.goodreads.com/book/show/862041.Harry_Potter_Series_Box_Set?from_search=true\" target=\"_blank\">Harry Potter (7 books)</a>\n      \n      <span class=\"author\"> &mdash; J.K. Rowling.</span>\n      \n    </li>\n  \n</ol>",
      "date_published": "2020-12-01T00:00:00Z"
    },{
      "id": "https://dinhanhthi.com/for-me-only/",
      "url": "https://dinhanhthi.com/for-me-only/",
      "title": "For me only",
      "content_html": "<p>This post is for me only. It contains shortcodes to create this website.</p>\n<p>👉  Note: <a href=\"/11ty-nunjucks/\">11ty</a>.</p>\n<h2 id=\"frontmatter\">Frontmatter <a class=\"direct-link\" href=\"#frontmatter\">#</a></h2>\n<pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">layout</span><span class=\"token punctuation\">:</span> post <span class=\"token comment\"># or `page` or `base`</span><br><span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"For me only\"</span><br><span class=\"token key atrule\">descriptopm</span><span class=\"token punctuation\">:</span> description of the post<br><span class=\"token key atrule\">tags</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>Others<span class=\"token punctuation\">]</span> <span class=\"token comment\"># base: Project-based Learning, MOOC, Machine Learning,</span><br>               <span class=\"token comment\">#       Data Science, Deep Learning, Time Series,</span><br>               <span class=\"token comment\">#       NLP, MLOps, Python, R Lang, Linear Algebra,</span><br>               <span class=\"token comment\">#       Prob &amp; Stats, JavaScript, Web Dev, Algorithms</span><br>               <span class=\"token comment\">#       Skills, Others</span><br><span class=\"token key atrule\">icon</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/img/header/customize.svg\"</span> <span class=\"token comment\"># can be \"customize.svg\"</span><br>                                  <span class=\"token comment\"># if it's in /img/header/</span><br><span class=\"token key atrule\">keywords</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"for me only customize edit this site box font blocks\"</span> <span class=\"token comment\"># used for searching</span><br><span class=\"token key atrule\">toc</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># `false` to hide toc</span><br><span class=\"token key atrule\">notfull</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># if the post is not good enough</span><br><span class=\"token key atrule\">hide</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># if don't want to show it on index</span><br><span class=\"token key atrule\">private</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># (if the post comes from external source) a private link</span></code></pre>\n<h2 id=\"other-components\">Other components <a class=\"direct-link\" href=\"#other-components\">#</a></h2>\n<ul>\n<li>\n<p>Mark: <code>==Text==</code>.</p>\n</li>\n<li>\n<p>Keyboard: <code>[[Ctrl]]</code>.</p>\n</li>\n<li>\n<p>Reference: <code>{% ref &quot;url&quot; %}</code> (mush have <code>&quot;&quot;</code>).</p>\n</li>\n<li>\n<p>Inline text color: <code>{color:red}text{color}</code> (without space)</p>\n</li>\n<li>\n<p><code>{:.noindent}</code> before a list, not indent a list.</p>\n</li>\n<li>\n<p><code>{:.indent}</code> before a list, indent a list.</p>\n</li>\n<li>\n<p><code>{:target=&quot;_blank&quot;}</code> after an url.</p>\n</li>\n<li>\n<p>Using emoji: use <a href=\"https://github.com/markdown-it/markdown-it-emoji/blob/master/lib/data/full.json\">this site</a>.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">👉 :point_right:<br>🔅 :low_brightness:<br>❓ :qusetion:<br>❗ :exclamation:<br>🇻🇳 :vietnam:</code></pre>\n</li>\n</ul>\n<h2 id=\"external-post\">External post <a class=\"direct-link\" href=\"#external-post\">#</a></h2>\n<p>In case you wanna add external posts to an existing category (e.g. post from Notion), just modify file <code>_data/cat_ex_posts.json</code>.</p>\n<p>Files need to be changed for this sections:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">_data/cat_ex_position.json <span class=\"token comment\"># posts (must have enough tags for each post)</span><br>index.njk <span class=\"token comment\"># links to below file</span><br>_includes/postslist.njk<br>pages/tags.njk <span class=\"token comment\"># tag page, also link to above file</span><br>pages/search-index.json <span class=\"token comment\"># search-index.json, may change also .eleventy.js</span></code></pre>\n<h2 id=\"insert-figures\">Insert figures <a class=\"direct-link\" href=\"#insert-figures\">#</a></h2>\n<p>👉 Exclude from <code>img-dim</code> transform (when <code>update_dat</code>): add class <code>.keep-original</code> to the <code>img</code> tag!</p>\n<pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"token title important\"><span class=\"token punctuation\">#</span> NORMAL WITH CUSTOM CLASS</span><br><span class=\"token url\"><span class=\"token operator\">!</span>[<span class=\"token content\">description</span>](<span class=\"token url\">/path/to/figure</span>)</span>{:.img-full-100}<br><span class=\"token title important\"><span class=\"token punctuation\">#</span> There are class .img-full-{number}</span><br><span class=\"token title important\"><span class=\"token punctuation\">#</span> where, {number} are 30 to 100, step 5.</span></code></pre>\n<pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"token title important\"><span class=\"token punctuation\">#</span> WITH DESCRIPTION</span><br><span class=\"token url\"><span class=\"token operator\">!</span>[<span class=\"token content\">description</span>](<span class=\"token url\">/path/</span>)</span>{:.custom-class}<br><span class=\"token bold\"><span class=\"token punctuation\">__</span><span class=\"token content\">Description texts</span><span class=\"token punctuation\">__</span></span></code></pre>\n<h3 id=\"background-white\">Background white <a class=\"direct-link\" href=\"#background-white\">#</a></h3>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">!</span><span class=\"token punctuation\">[</span>Description<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>/path/to<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>:.bg-white<span class=\"token punctuation\">}</span><br><span class=\"token comment\"># with other classes?</span><br><span class=\"token punctuation\">{</span>:.bg-white .custom-class<span class=\"token punctuation\">}</span></code></pre>\n<h3 id=\"default-img-path\">Default img path <a class=\"direct-link\" href=\"#default-img-path\">#</a></h3>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">{</span>% assign img-url <span class=\"token operator\">=</span> <span class=\"token string\">'/img/post/python'</span> %<span class=\"token punctuation\">}</span><br></code></pre>\n<h2 id=\"inser-codes\">Inser codes <a class=\"direct-link\" href=\"#inser-codes\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"token title important\"><span class=\"token punctuation\">#</span> Highlight line 2</span><br><span class=\"token code\"><span class=\"token punctuation\">```</span><span class=\"token code-language\"> js/2</span><br><span class=\"token code-block language-js\"><span class=\"token comment\">// lines of codes</span></span><br><span class=\"token punctuation\">```</span></span></code></pre>\n<pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"token title important\"><span class=\"token punctuation\">#</span> Highlight line 2 to 4</span><br><span class=\"token code\"><span class=\"token punctuation\">```</span><span class=\"token code-language\"> js/2-4</span><br><span class=\"token code-block language-js\"><span class=\"token comment\">// lines of codes</span></span><br><span class=\"token punctuation\">```</span></span></code></pre>\n<pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"token title important\"><span class=\"token punctuation\">#</span> Highlight line 2, 4</span><br><span class=\"token code\"><span class=\"token punctuation\">```</span><span class=\"token code-language\"> js/2,4</span><br><span class=\"token code-block language-js\"><span class=\"token comment\">// lines of codes</span></span><br><span class=\"token punctuation\">```</span></span></code></pre>\n</div>\n<pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"token title important\"><span class=\"token punctuation\">#</span> Delete line 2 (red highlight) and add line 4 (green highlight)</span><br><span class=\"token code\"><span class=\"token punctuation\">```</span><span class=\"token code-language\"> js/4/2</span><br><span class=\"token code-block language-js\"><span class=\"token comment\">// lines of codes</span></span><br><span class=\"token punctuation\">```</span></span></code></pre>\n<h3 id=\"raw-code\">Raw code <a class=\"direct-link\" href=\"#raw-code\">#</a></h3>\n<pre class=\"language-bash\"><code class=\"language-bash\">~~~ js <span class=\"token punctuation\">{</span>% raw %<span class=\"token punctuation\">}</span><br><span class=\"token comment\"># line of codes</span><br><span class=\"token punctuation\">{</span>% endraw %<span class=\"token punctuation\">}</span><br>~~~</code></pre>\n<h3 id=\"code-inside-a-list\">Code inside a list <a class=\"direct-link\" href=\"#code-inside-a-list\">#</a></h3>\n<p>For problems with tab/spaces in markdown rendering.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token number\">1</span>. Item <span class=\"token comment\"># below is a blank line</span><br><br>  ``<span class=\"token variable\"><span class=\"token variable\">`</span> <span class=\"token function\">bash</span><br>  <span class=\"token comment\"># codes with 2 spaces (as tab indented)</span><br>  <span class=\"token variable\">`</span></span>`<span class=\"token variable\"><span class=\"token variable\">`</span><br><span class=\"token number\">2</span>. Another item.<br><br>  <span class=\"token variable\">`</span></span>`<span class=\"token variable\"><span class=\"token variable\">`</span> <span class=\"token function\">bash</span><br>  <span class=\"token comment\"># code</span><br>  <span class=\"token variable\">`</span></span>``<br></code></pre>\n<h2 id=\"columns\">Columns <a class=\"direct-link\" href=\"#columns\">#</a></h2>\n<h3 id=\"content---figure-%2F-table\">Content - figure / table <a class=\"direct-link\" href=\"#content---figure-%2F-table\">#</a></h3>\n<p>Using class <code>columns-2</code>,</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>columns-2<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">markdown</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><br><br>Content containing markdown blocks<br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><br><br>![Description](/path/to/figure){:.custom-class}<br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>There are also others: <code>.columns-2.size-2-1</code> (<code>1-2</code>, <code>3-2</code>, <code>2-3</code>, <code>1-1</code>).</p>\n<h3 id=\"two-cols-list\">Two cols list <a class=\"direct-link\" href=\"#two-cols-list\">#</a></h3>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>col-2-list<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br><br><span class=\"token comment\">&lt;!-- list (a line break above is required!) --></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n<h3 id=\"code-%26-output\">Code &amp; output <a class=\"direct-link\" href=\"#code-%26-output\">#</a></h3>\n<ul>\n<li>Equal widths: <code>::: code-output-equal</code>.</li>\n<li>Flexible widths: <code>::: code-output-flex</code>.</li>\n</ul>\n<h3 id=\"two-columns\">Two columns <a class=\"direct-link\" href=\"#two-columns\">#</a></h3>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- flexible width --></span><br>::: col-2-flex</code></pre>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- 2 equal colmuns --></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>col-2-equal<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br><br>Content<br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><br><br><span class=\"token comment\">&lt;!-- or use (not recommended) --></span><br>::: col-2-equal<br>Content<br>:::</code></pre>\n<h2 id=\"boxes\">Boxes <a class=\"direct-link\" href=\"#boxes\">#</a></h2>\n<h3 id=\"hide-%2F-show-box\">Hide / Show box <a class=\"direct-link\" href=\"#hide-%2F-show-box\">#</a></h3>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// The box must have a title</span><br><span class=\"token operator\">:</span><span class=\"token operator\">:</span><span class=\"token operator\">:</span> hsbox Title Name<br>Content<br><span class=\"token operator\">:</span><span class=\"token operator\">:</span><span class=\"token operator\">:</span></code></pre>\n<p>Or using liquid tag,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">{</span>% hsbox <span class=\"token string\">\"Long title\"</span> %<span class=\"token punctuation\">}</span><br><span class=\"token comment\"># content</span><br><span class=\"token punctuation\">{</span>% endhsbox %<span class=\"token punctuation\">}</span><br></code></pre>\n<h4 id=\"hsbox-with-indent\">HSBox with indent <a class=\"direct-link\" href=\"#hsbox-with-indent\">#</a></h4>\n<pre class=\"language-html\"><code class=\"language-html\">{% hsbox %}<br>- Item 1<br>- Item 2<br><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hsbox<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hs__title<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br>\t\tMore detail<br>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><br>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hs__content<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br><br>  //code<br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><br><br>  - Sub item.<br>- Item<br>{% endhsbox %}<br></code></pre>\n<h3 id=\"alert-boxes\">Alert boxes <a class=\"direct-link\" href=\"#alert-boxes\">#</a></h3>\n<div class=\"code-2cols\">\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// info</span><br><span class=\"token operator\">:</span><span class=\"token operator\">:</span><span class=\"token operator\">:</span> info<br>Content<br><span class=\"token operator\">:</span><span class=\"token operator\">:</span><span class=\"token operator\">:</span></code></pre>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// warning</span><br><span class=\"token operator\">:</span><span class=\"token operator\">:</span><span class=\"token operator\">:</span> warning<br>Content<br><span class=\"token operator\">:</span><span class=\"token operator\">:</span><span class=\"token operator\">:</span></code></pre>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// danger</span><br><span class=\"token operator\">:</span><span class=\"token operator\">:</span><span class=\"token operator\">:</span> danger<br>Content<br><span class=\"token operator\">:</span><span class=\"token operator\">:</span><span class=\"token operator\">:</span></code></pre>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// success</span><br><span class=\"token operator\">:</span><span class=\"token operator\">:</span><span class=\"token operator\">:</span> success<br>Content<br><span class=\"token operator\">:</span><span class=\"token operator\">:</span><span class=\"token operator\">:</span></code></pre>\n</div>\n<h2 id=\"math\">Math <a class=\"direct-link\" href=\"#math\">#</a></h2>\n<p>If using with list and indent -&gt; DON'T break line in math formulas,</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># instead of</span><br>- Item<br><br>  <span class=\"token variable\">$$</span><br>  <span class=\"token punctuation\">\\</span>dfrac<span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">{</span><span class=\"token number\">2</span><span class=\"token punctuation\">}</span><br>  <span class=\"token variable\">$$</span><br>- Item</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># use</span><br>- Item<br><br>  <span class=\"token variable\">$$</span><span class=\"token punctuation\">\\</span>dfrac<span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">{</span><span class=\"token number\">2</span><span class=\"token punctuation\">}</span><span class=\"token variable\">$$</span> <span class=\"token comment\"># ALl in 1 line</span><br>- Item</code></pre>\n</div>\n<h2 id=\"dev\">Dev <a class=\"direct-link\" href=\"#dev\">#</a></h2>\n<h3 id=\"locally-developing-mode\">Locally developing mode <a class=\"direct-link\" href=\"#locally-developing-mode\">#</a></h3>\n<p>We can use a different config file (instead of <code>.eleventy.js</code>).</p>\n<pre class=\"language-js\"><code class=\"language-js\">npm run eleventy <span class=\"token operator\">--</span>config<span class=\"token operator\">=</span><span class=\"token punctuation\">.</span>eleventy<span class=\"token punctuation\">.</span>dev<span class=\"token punctuation\">.</span>js</code></pre>\n<p>Other command lines can be found <a href=\"https://www.11ty.dev/docs/usage/#command-line-usage\">here</a> or using <code>npx @11ty/eleventy --help</code>.</p>\n<h3 id=\"purgecss\">PurgeCSS <a class=\"direct-link\" href=\"#purgecss\">#</a></h3>\n<p>Becare full on <a href=\"https://purgecss.com/\">PurgeCSS</a>,</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token comment\">/*! purgecss start ignore */</span><br>// css classes<br><span class=\"token comment\">/*! purgecss end ignore */</span></code></pre>\n<h3 id=\"custom-tags-%2F-shortcodes\">Custom tags / shortcodes <a class=\"direct-link\" href=\"#custom-tags-%2F-shortcodes\">#</a></h3>\n<p>The main guide is <a href=\"https://www.11ty.dev/docs/shortcodes/\">here</a>.</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// In .eleventy.js</span><br>module<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">eleventyConfig</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\televentyConfig<span class=\"token punctuation\">.</span><span class=\"token function\">addShortcode</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ref\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">url</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token keyword\">return</span> <span class=\"token string\">'&lt;a href=\"'</span> <span class=\"token operator\">+</span> url <span class=\"token operator\">+</span> <span class=\"token string\">'\">[ref]&lt;/a'</span><span class=\"token punctuation\">;</span><br>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre>\n<p>Usage,</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> ref https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>dinhanhthi<span class=\"token punctuation\">.</span>com <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span><br></code></pre>\n<h3 id=\"custom-classes\">Custom classes <a class=\"direct-link\" href=\"#custom-classes\">#</a></h3>\n<p>Usage,</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># paragraph</span><br>A pragraph <span class=\"token punctuation\">{</span>:.custom-class<span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># image</span><br><span class=\"token operator\">!</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>:.custom-class<span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># table</span><br><span class=\"token punctuation\">{</span>:.custom-class<span class=\"token punctuation\">}</span><br>table</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># heading</span><br><span class=\"token comment\"># Heading{:#heading-id}</span></code></pre>\n</div>\n<p><strong>Multi-classes</strong>: <code>{:.custom-1 .custom-2}</code> (with spaces)!</p>\n<p>We define CSS like that,</p>\n<pre class=\"language-scss\"><code class=\"language-scss\"><span class=\"token selector\">p.custom-class + table</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><br><span class=\"token comment\">// and</span><br><span class=\"token selector\">p.custom-class</span><span class=\"token punctuation\">{</span><span class=\"token property\">display</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span><br><span class=\"token comment\">// instead of</span><br><span class=\"token selector\">table.custom-class</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre>\n<hr>\n<p>If using list based on &quot;🔅&quot;,</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>p-list<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n<hr>\n<p>Is using list of things (like in <a href=\"/fresh-install-macos/#applications\">MacOS fresh installation note</a>), use <code>.list-item</code> class or,</p>\n<pre class=\"language-html\"><code class=\"language-html\">::: list-item<br>Things<br>:::</code></pre>\n<h3 id=\".eleventy.dev.js-vs-.main.js\"><code>.eleventy.dev.js</code> vs <code>.main.js</code> <a class=\"direct-link\" href=\"#.eleventy.dev.js-vs-.main.js\">#</a></h3>\n<p>The only difference is the line</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// comment out in .dev.js</span><br>eleventyConfig<span class=\"token punctuation\">.</span><span class=\"token function\">addPlugin</span><span class=\"token punctuation\">(</span><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./_11ty/img-dim.js\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<h3 id=\"building-index-for-search\">Building index for search <a class=\"direct-link\" href=\"#building-index-for-search\">#</a></h3>\n<p>If there is new post / keywords in some old posts -&gt; remove line of <code>pages/search-index.json.njk</code> in <code>.eleventyignore</code>.</p>\n<h3 id=\"using-markdown-inside-njk\">Using markdown inside njk <a class=\"direct-link\" href=\"#using-markdown-inside-njk\">#</a></h3>\n<p>Using <code>{% markdown %}{% endmarkdown %}</code> (no need spaces between content).</p>\n<h3 id=\"other-vars-of-page\">Other vars of <code>page</code> <a class=\"direct-link\" href=\"#other-vars-of-page\">#</a></h3>\n<p>Besise <code>page.url</code>, there are others at <a href=\"https://www.11ty.dev/docs/data-eleventy-supplied/#page-variable-contents\">here</a>.</p>\n<h3 id=\"errors%3F\">Errors? <a class=\"direct-link\" href=\"#errors%3F\">#</a></h3>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Problem of \"Content-Security-Policy\" (CSP)</span><br><span class=\"token comment\">// _data/csp.js</span><br><span class=\"token keyword\">const</span> <span class=\"token constant\">CSP</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><br>  regular<span class=\"token operator\">:</span> <span class=\"token function\">serialize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><br>    <span class=\"token comment\">// Inline CSS is allowed.</span><br>    <span class=\"token punctuation\">[</span><span class=\"token string\">\"style-src\"</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">SELF</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"https://fonts.googleapis.com/\"</span><span class=\"token punctuation\">,</span> <span class=\"token function\">quote</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"unsafe-inline\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><br>    <span class=\"token punctuation\">[</span><span class=\"token string\">\"font-src\"</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">SELF</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"https://fonts.gstatic.com/\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><br>  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span><br><br><span class=\"token comment\">// equivalent phrase (put in &lt;head>)</span><br><span class=\"token operator\">&lt;</span>meta http<span class=\"token operator\">-</span>equiv<span class=\"token operator\">=</span><span class=\"token string\">\"Content-Security-Policy\"</span> content<span class=\"token operator\">=</span><span class=\"token string\">\"default-src 'self'; font-src 'self' https://fonts.gstatic.com/; style-src 'self' https://fonts.googleapis.com/ 'unsafe-inline';\"</span><span class=\"token operator\">></span><br><span class=\"token comment\">// quote() -> for '', e.g. 'self'</span><br><span class=\"token comment\">// \"abc\" -> doesn't mean 'abc' in &lt;meta></span></code></pre>\n<hr>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// json-ld problem with latex code (math equations)</span></code></pre>\n<hr>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// ./pages/search-index.json.njk</span><br><span class=\"token comment\">// TypeError: Cannot read property 'svg' of undefined</span><br><span class=\"token comment\">// Idea: actually, there are some posts which don't have the right front matter</span><br><span class=\"token comment\">// Solution: try with below in .eleventy.js</span><br>eleventyConfig<span class=\"token punctuation\">.</span><span class=\"token function\">addCollection</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"onlyMarkdown\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">collectionApi</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t<span class=\"token keyword\">return</span> collectionApi<span class=\"token punctuation\">.</span><span class=\"token function\">getFilteredByGlob</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"posts/*.*\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"posts/others/*.md\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token comment\">// and change in ./pages/search-index.json.njk</span><br><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> collections<span class=\"token punctuation\">.</span>onlyMarkdown <span class=\"token operator\">|</span> search <span class=\"token operator\">|</span> dump <span class=\"token operator\">|</span> safe <span class=\"token operator\">|</span> <span class=\"token function\">striptags</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span> escape <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><br></code></pre>\n<p><strong>Reason</strong>: <code>json-ld.js</code> takes some beginning words to convert to json formats! If there are equation (latex likes <code>$\\Rightarrow$</code>) at the very beginning of the notes, there will be error like this!</p>\n<p>The err comes from <code>src/json-ld.js</code> and the codes at the bottom of file <code>_includes/layouts/post.njk</code> <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> <code>truncate(140)</code> <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> If math equations start at character 141, it will be fine!</p>\n<p><strong>Solution</strong>: Add <code>| dump</code> to the <code>description</code> tag!</p>\n<h3 id=\"search-full-content\">Search full content <a class=\"direct-link\" href=\"#search-full-content\">#</a></h3>\n<ol>\n<li><code>.eleventy.js</code>: uncomment line <code>//&quot;content&quot;: page.templateContent,</code>.</li>\n<li><code>src/main.js</code>: uncomment lines below <code>// use content??? </code> &amp; below <code>-- uncomment below if ...</code></li>\n</ol>\n",
      "date_published": "2020-11-23T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/docker-gpu/",
      "url": "https://dinhanhthi.com/docker-gpu/",
      "title": "Docker + GPUs",
      "content_html": "<p>👉 Note: <a href=\"/docker\">Docker 101</a><br>\n👉 Note: <a href=\"/wordpress-docker\">Wordpress Docker</a><br>\n👉 Note: <a href=\"/airflow-k8s-101\">Airflow + Kubernetes 101</a><br>\n👉 Note: <a href=\"/tensorflow\">Tensorflow extra</a></p>\n<h2 id=\"wsl-%2B-windows\">WSL + Windows <a class=\"direct-link\" href=\"#wsl-%2B-windows\">#</a></h2>\n<p>👉 Note: <a href=\"/docker-wsl2-windows/#wsl-%2B-windows\">WSL + Windows</a></p>\n<h2 id=\"with-tensorflow-or-pytorch\">With Tensorflow or PyTorch <a class=\"direct-link\" href=\"#with-tensorflow-or-pytorch\">#</a></h2>\n<p>👉 <a href=\"https://www.tensorflow.org/install/docker\">Official doc for TF + docker</a><br>\n👉 Note: <a href=\"/tensorflow#installation-with-docker\">Docker + TF</a>.<br>\n👉 <a href=\"https://github.com/dinhanhthi/git_dataswati/tree/master/docker-thi\">An example of docker pytorch with gpu support</a>.</p>\n<h2 id=\"basic-installation\">Basic installation <a class=\"direct-link\" href=\"#basic-installation\">#</a></h2>\n<div class=\"warning\">\n<p>You have to install (successfully) GPU driver on your (linux) machine before continuing the steps in this note. Go to &quot;<a href=\"#check-info\">Check info</a>&quot; section to check the availability of your drivers.</p>\n</div>\n<p>It works perfectly on Pop!_OS 20.04,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update<br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> -y nvidia-container-runtime<br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> -y nvidia-container-toolkit<br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> -y nvidia-cuda-toolkit<br><span class=\"token comment\"># restard required</span></code></pre>\n<h2 id=\"check-info\">Check info <a class=\"direct-link\" href=\"#check-info\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># verify that your computer has a graphic card</span><br>lspci -nn <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token string\">'\\[03'</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># First, install drivers and check</span><br>nvidia-smi<br><span class=\"token comment\"># output: NVIDIA-SMI 450.80.02 Driver Version: 450.80.02    CUDA Version: 11.0</span><br><span class=\"token comment\"># it's maximum CUDA version that your driver supports</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># check current version of cuda</span><br>nvcc --version<br><span class=\"token comment\"># If there is not nvcc, it may be in /usr/local/cuda/bin/</span><br><span class=\"token comment\"># Add this location to PATH</span><br><span class=\"token comment\"># modify ~/.zshrc or ~/.bashrc</span><br><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span>/usr/local/cuda/bin:<span class=\"token environment constant\">$PATH</span><br><br><span class=\"token comment\"># You may need to install</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> -y nvidia-cuda-toolkit</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install and check nvidia-docker</span><br>dpkg -l <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> nvidia-docker<br><span class=\"token comment\"># or</span><br>nvidia-docker version</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Verifying –gpus option under docker run</span><br>docker run --help <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> -i gpus<br><span class=\"token comment\"># output: --gpus gpu-request GPU devices to add to the container ('all' to pass all GPUs)</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Listing out GPU devices</span><br>docker run -it --rm --gpus all ubuntu nvidia-smi -L<br><span class=\"token comment\"># output: GPU 0: GeForce GTX 1650 (...)</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Verifying again with nvidia-smi</span><br>docker run -it --rm --gpus all ubuntu nvidia-smi</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># test a working setup container-toolkit</span><br>docker run --rm --gpus all nvidia/cuda nvidia-smi</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># test a working setup container-runtime</span><br>docker run --runtime<span class=\"token operator\">=</span>nvidia --rm nvidia/cuda nvidia-smi<br><br><span class=\"token comment\"># Error response from daemon: Unknown runtime specified nvidia.</span><br><span class=\"token comment\"># Search below for \"/etc/docker/daemon.json\"</span><br><span class=\"token comment\"># Maybe it helps.</span></code></pre>\n<h2 id=\"install-nvidia-docker2\">Install <code>nvidia-docker2</code> <a class=\"direct-link\" href=\"#install-nvidia-docker2\">#</a></h2>\n<div class=\"hsbox\"><div class=\"hs__title\">More information (<a href=\"https://github.com/NVIDIA/nvidia-docker/issues/1268\">ref</a>)</div><div class=\"hs__content\"><blockquote>\n<p>This package is the only docker-specific package of any of them. It takes the script associated with the <code>nvidia-container-runtime</code> and installs it into docker's <code>/etc/docker/daemon.json</code> file for you. This then allows you to run (for example) <code>docker run --runtime=nvidia ...</code> to automatically add GPU support to your containers. It also installs a wrapper script around the native docker CLI called <code>nvidia-docker</code> which lets you invoke docker without needing to specify <code>--runtime=nvidia</code> every single time. It also lets you set an environment variable on the host (NV_GPU) to specify which GPUs should be injected into a container.</p>\n</blockquote>\n</div></div>\n<p>👉 <a href=\"https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/install-guide.html#docker\">Officicial guide to install</a>.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token assign-left variable\">distribution</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token builtin class-name\">.</span> /etc/os-release<span class=\"token punctuation\">;</span><span class=\"token builtin class-name\">echo</span> $ID$VERSION_ID<span class=\"token variable\">)</span></span><br><span class=\"token function\">curl</span> -s -L https://nvidia.github.io/nvidia-docker/gpgkey <span class=\"token operator\">|</span> <span class=\"token function\">sudo</span> apt-key <span class=\"token function\">add</span> -<br><span class=\"token function\">curl</span> -s -L https://nvidia.github.io/nvidia-docker/<span class=\"token variable\">$distribution</span>/nvidia-docker.list <span class=\"token operator\">|</span> <span class=\"token function\">sudo</span> <span class=\"token function\">tee</span> /etc/apt/sources.list.d/nvidia-docker.list<br><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update<br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> -y nvidia-docker2<br><br><span class=\"token comment\"># restart docker</span><br><span class=\"token function\">sudo</span> systemctl restart docker</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># check version</span><br>nvidia-docker version</code></pre>\n<h2 id=\"difference%3A-nvidia-container-toolkit-vs-nvidia-container-runtime\">Difference: <code>nvidia-container-toolkit</code> vs <code>nvidia-container-runtime</code> <a class=\"direct-link\" href=\"#difference%3A-nvidia-container-toolkit-vs-nvidia-container-runtime\">#</a></h2>\n<p>👉 <a href=\"https://github.com/NVIDIA/nvidia-docker/issues/1268\">What's the difference between the lastest nvidia-docker and nvidia container runtime？</a></p>\n<blockquote>\n<p>In this note, with Docker 19.03+ (<code>docker --version</code>), he says that <code>nvidia-container-toolkit</code> is used for <code>--gpus</code> (in <code>docker run ...</code>), <code>nvidia-container-runtime</code> is used for <code>--runtime=nvidia</code> (can also be used in <code>docker-compose</code> file).</p>\n</blockquote>\n<blockquote>\n<p>However, <mark markdown=\"span\">if you want to use Kubernetes with Docker 19.03, you actually <strong>need to continue using nvidia-docker2</strong></mark> because Kubernetes doesn't support passing GPU information down to docker through the <code>--gpus</code> flag yet. It still relies on the nvidia-container-runtime to pass GPU information down the stack via a set of environment variables.</p>\n</blockquote>\n<p>👉 <a href=\"https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/install-guide.html#docker\">Installation Guide — NVIDIA Cloud Native Technologies documentation</a></p>\n<h2 id=\"using-docker-compose%3F\">Using docker-compose? <a class=\"direct-link\" href=\"#using-docker-compose%3F\">#</a></h2>\n<p>Purpose?</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># instead of using</span><br>docker run <span class=\"token punctuation\">\\</span><br>    --gpus all<span class=\"token punctuation\">\\</span><br>    --name docker_thi_test<span class=\"token punctuation\">\\</span><br>    --rm<span class=\"token punctuation\">\\</span><br>    -v abc:abc<span class=\"token punctuation\">\\</span><br>    -p <span class=\"token number\">8888</span>:8888</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># we use this with docker-compose.yml</span><br>docker-compose up</code></pre>\n</div>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># check version of docker-compose</span><br>docker-compose --version</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># If \"version\" in docker-compose.yml &lt; 2.3</span><br><span class=\"token comment\"># Modify: /etc/docker/daemon.json</span><br><span class=\"token punctuation\">{</span><br>    <span class=\"token string\">\"default-runtime\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"nvidia\"</span>,<br>    <span class=\"token string\">\"runtimes\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span><br>        <span class=\"token string\">\"nvidia\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span><br>            <span class=\"token string\">\"path\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"nvidia-container-runtime\"</span>,<br>            <span class=\"token string\">\"runtimeArgs\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><br>        <span class=\"token punctuation\">}</span><br>    <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># restart our docker daemon</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">pkill</span> -SIGHUP dockerd</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># If \"version\" in docker-compose.yml >=2.3</span><br><span class=\"token comment\"># docker-compose.yml => able to use \"runtime\"</span><br>version: <span class=\"token string\">'2.3'</span> <span class=\"token comment\"># MUST BE >=2.3 AND &lt;3</span><br>services:<br>  testing:<br>    ports:<br>      - <span class=\"token string\">\"8000:8000\"</span><br>    runtime: nvidia<br>    volumes:<br>      - ./object_detection:/object_detection</code></pre>\n<p>👉 Check more in my repo <a href=\"https://github.com/dinhanhthi/my-dockerfiles\">my-dockerfiles</a> on Github.</p>\n<p>Run the test,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">docker pull tensorflow/tensorflow:latest-gpu-jupyter<br><span class=\"token function\">mkdir</span> ~/Downloads/test/notebooks</code></pre>\n<p>Without using <code>docker-compose.yml</code> (tensorflow) (cf. <a href=\"/tensorflow#without-docker-compose\">this note</a> for more)</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">docker run --name docker_thi_test -it --rm -v <span class=\"token variable\"><span class=\"token variable\">$(</span>realpath ~/Downloads/test/notebooks<span class=\"token variable\">)</span></span>:/tf/notebooks -p <span class=\"token number\">8888</span>:8888 tensorflow/tensorflow:latest-gpu-jupyter</code></pre>\n<p>With <code>docker-compose.yml</code>?</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ~/Download/test/Dockerfile</span><br>FROM tensorflow/tensorflow:latest-gpu-jupyter</code></pre>\n<pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># ~/Download/test/docker-compose.yml</span><br><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'2'</span><br><span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span><br>  <span class=\"token key atrule\">jupyter</span><span class=\"token punctuation\">:</span><br>    <span class=\"token key atrule\">container_name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'docker_thi_test'</span><br>    <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span> .<br>    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span><br>        <span class=\"token punctuation\">-</span> ./notebooks<span class=\"token punctuation\">:</span>/tf/notebooks <span class=\"token comment\"># notebook directory</span><br>    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span><br>        <span class=\"token punctuation\">-</span> 8888<span class=\"token punctuation\">:</span><span class=\"token number\">8888</span> <span class=\"token comment\"># exposed port for jupyter</span><br>    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span><br>        <span class=\"token punctuation\">-</span> NVIDIA_VISIBLE_DEVICES=0 <span class=\"token comment\"># which gpu do you want to use for this container</span><br>        <span class=\"token punctuation\">-</span> PASSWORD=12345</code></pre>\n<p>Then run,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">docker-compose run --rm jupyter</code></pre>\n<h2 id=\"check-usage-of-gpu\">Check usage of GPU <a class=\"direct-link\" href=\"#check-usage-of-gpu\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Linux only</span><br>nvidia-smi<br><br><span class=\"token comment\"># |===============================+======================+======================|</span><br><span class=\"token comment\"># |   0  GeForce GTX 1650    Off  | 00000000:01:00.0 Off |                  N/A |</span><br><span class=\"token comment\"># | N/A   53C    P8     2W /  N/A |   3861MiB /  3914MiB |      2%      Default |</span><br><span class=\"token comment\"># |                               |                      |                  N/A |</span><br><span class=\"token comment\"># +-------------------------------+----------------------+----------------------+</span><br><br><span class=\"token comment\"># => 3861MB / 3914MB is used!</span><br><br><span class=\"token comment\"># +-----------------------------------------------------------------------------+</span><br><span class=\"token comment\"># | Processes:                                                       GPU Memory |</span><br><span class=\"token comment\"># |  GPU       PID   Type   Process name                             Usage      |</span><br><span class=\"token comment\"># |=============================================================================|</span><br><span class=\"token comment\"># |    0      3019      C   ...e/scarter/anaconda3/envs/tf1/bin/python  3812MiB |</span><br><span class=\"token comment\"># +-----------------------------------------------------------------------------+</span><br><br><span class=\"token comment\"># => Process 3019 is using the GPU</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># All processes that use GPU</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">fuser</span> -v /dev/nvidia*</code></pre>\n<h3 id=\"kill-process\">Kill process <a class=\"direct-link\" href=\"#kill-process\">#</a></h3>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Kill a single process</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">kill</span> -9 <span class=\"token number\">3019</span></code></pre>\n<h2 id=\"reset-gpu\">Reset GPU <a class=\"direct-link\" href=\"#reset-gpu\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># all</span><br><span class=\"token function\">sudo</span> nvidia-smi --gpu-reset</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># single</span><br><span class=\"token function\">sudo</span> nvidia-smi --gpu-reset -i <span class=\"token number\">0</span></code></pre>\n</div>\n<h2 id=\"errors-with-gpu\">Errors with GPU <a class=\"direct-link\" href=\"#errors-with-gpu\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Failed to get convolution algorithm. This is probably because cuDNN failed to initialize, so try looking to see if a warning log message was printed above.</span><br><span class=\"token comment\"># Function call stack:</span><br><span class=\"token comment\"># train_function</span></code></pre>\n<p>Check <a href=\"https://stackoverflow.com/a/56511889/1323473\">this answer</a> as a reference!</p>\n<hr>\n<p>Problems with pytorch versions: <a href=\"/pytorch#errors\">check this</a>.</p>\n<hr>\n<p><em>RuntimeError: cuda runtime error (804) : forward compatibility was attempted on non supported HW at /pytorch/aten/src/THC/THCGeneral.cpp:47</em> (after update system including nvdia-cli, maybe) =&gt; The same problem with below, need to restart the computer.</p>\n<hr>\n<p><code>nvidia-smi</code>: <em>Failed to initialize NVML: Driver/library version mismatch</em>.</p>\n<p><a href=\"https://stackoverflow.com/questions/43022843/nvidia-nvml-driver-library-version-mismatch\">This thread</a>: just restart the computer.</p>\n<h2 id=\"make-nvidia-work-in-docker-(linux)\">Make NVIDIA work in docker (Linux) <a class=\"direct-link\" href=\"#make-nvidia-work-in-docker-(linux)\">#</a></h2>\n<div class=\"danger\">\n<p>This section is still working (on 26-Oct-2020) but it's old for newer methods.</p>\n</div>\n<p><strong>Idea</strong>: Using NVIDIA driver of the base machine, don't install anything in docker!</p>\n<div class=\"hsbox\"><div class=\"hs__title\">Detail of steps</div><div class=\"hs__content\"><p class=\"noindent\"></p>\n<ol>\n<li>\n<p>First, <a href=\"/pytorch#installation\">maker sure</a> your base machine has an NVIDIA driver.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># list all gpus</span><br>lspci -nn <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token string\">'\\[03'</span><br><br><span class=\"token comment\"># check nvidia &amp; cuda versions</span><br>nvidia-smi</code></pre>\n</li>\n<li>\n<p>Install <a href=\"https://github.com/NVIDIA/nvidia-container-runtime\"><code>nvidia-container-runtime</code></a></p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> -s -L https://nvidia.github.io/nvidia-container-runtime/gpgkey <span class=\"token operator\">|</span> <span class=\"token function\">sudo</span> apt-key <span class=\"token function\">add</span> -<br><span class=\"token assign-left variable\">distribution</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token builtin class-name\">.</span> /etc/os-release<span class=\"token punctuation\">;</span><span class=\"token builtin class-name\">echo</span> $ID$VERSION_ID<span class=\"token variable\">)</span></span><br><br><span class=\"token function\">curl</span> -s -L https://nvidia.github.io/nvidia-container-runtime/<span class=\"token variable\">$distribution</span>/nvidia-container-runtime.list <span class=\"token operator\">|</span> <span class=\"token function\">sudo</span> <span class=\"token function\">tee</span> /etc/apt/sources.list.d/nvidia-container-runtime.list<br><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update<br><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> nvidia-container-runtime</code></pre>\n</li>\n<li>\n<p>Note that, <mark markdown='span'>we cannot use <code>docker-compose.yml</code> in this case!!!</mark></p>\n</li>\n<li>\n<p>Create an image <code>img_datas</code> with <code>Dockerfile</code> is</p>\n<pre class=\"language-docker\"><code class=\"language-docker\"><span class=\"token keyword\">FROM</span> nvidia/cuda<span class=\"token punctuation\">:</span>10.2<span class=\"token punctuation\">-</span>base<br><br><span class=\"token keyword\">RUN</span> apt<span class=\"token punctuation\">-</span>get update &amp;&amp; \\<br>\tapt<span class=\"token punctuation\">-</span>get <span class=\"token punctuation\">-</span>y upgrade &amp;&amp; \\<br>\tapt<span class=\"token punctuation\">-</span>get install <span class=\"token punctuation\">-</span>y python3<span class=\"token punctuation\">-</span>pip python3<span class=\"token punctuation\">-</span>dev locales git<br><br><span class=\"token comment\"># install dependencies</span><br><span class=\"token keyword\">COPY</span> requirements.txt requirements.txt<br><span class=\"token keyword\">RUN</span> python3 <span class=\"token punctuation\">-</span>m pip install <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>upgrade pip &amp;&amp; \\<br>\tpython3 <span class=\"token punctuation\">-</span>m pip install <span class=\"token punctuation\">-</span>r requirements.txt<br><span class=\"token keyword\">COPY</span> . .<br><br><span class=\"token comment\"># default command</span><br><span class=\"token keyword\">CMD</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"jupyter\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"lab\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"--no-browser\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"--allow-root\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"--ip=0.0.0.0\"</span>  <span class=\"token punctuation\">]</span></code></pre>\n</li>\n<li>\n<p>Create a container,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">docker run --name docker_thi --gpus all -v /home/thi/folder_1/:/srv/folder_1/ -v /home/thi/folder_1/git/:/srv/folder_2 -dp <span class=\"token number\">8888</span>:8888 -w<span class=\"token operator\">=</span><span class=\"token string\">\"/srv\"</span> -it img_datas<br><br><span class=\"token comment\"># -v: volumes</span><br><span class=\"token comment\"># -w: working dir</span><br><span class=\"token comment\"># --gpus all: using all gpus on base machine</span></code></pre>\n</li>\n</ol>\n<p><a href=\"https://towardsdatascience.com/how-to-properly-use-the-gpu-within-a-docker-container-4c699c78c6d1\">This article</a> is also very interesting and helpful in some cases.</p>\n</div></div>\n<h2 id=\"references\">References <a class=\"direct-link\" href=\"#references\">#</a></h2>\n<ol>\n<li><a href=\"https://github.com/NVIDIA/nvidia-docker/wiki/CUDA\">Difference between <code>base</code>, <code>runtime</code> and <code>devel</code> in <code>Dockerfile</code> of CUDA</a>.</li>\n<li><a href=\"https://github.com/tensorflow/tensorflow/tree/master/tensorflow/tools/dockerfiles/dockerfiles\">Dockerfile on Github</a> of Tensorflow.</li>\n</ol>\n",
      "date_published": "2020-10-21T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/tensorflow/",
      "url": "https://dinhanhthi.com/tensorflow/",
      "title": "Tensorflow extra",
      "content_html": "<h2 id=\"gpu%3F\">GPU? <a class=\"direct-link\" href=\"#gpu%3F\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># check if GPU available?</span><br><span class=\"token keyword\">import</span> tensorflow <span class=\"token keyword\">as</span> tf<br>tf<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>list_physical_devices<span class=\"token punctuation\">(</span><span class=\"token string\">'GPU'</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># prevent tf uses gpu</span><br><span class=\"token comment\"># add below before any tf import</span><br><span class=\"token keyword\">import</span> os<br>os<span class=\"token punctuation\">.</span>environ<span class=\"token punctuation\">[</span><span class=\"token string\">\"CUDA_VISIBLE_DEVICES\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"-1\"</span></code></pre>\n</div>\n<h2 id=\"installation-with-docker\">Installation with docker <a class=\"direct-link\" href=\"#installation-with-docker\">#</a></h2>\n<p>👉 <a href=\"https://www.tensorflow.org/install/docker\">Official guide</a>.<br>\n👉 Note: <a href=\"/docker-gpu\">Docker &amp; GPU</a>.</p>\n<p>The advantage of this method is that you <mark>only have to install GPU driver on the host machine</mark>.</p>\n<div class=\"hsbox\"><div class=\"hs__title\">Note about docker version</div><div class=\"hs__content\"><p>Check docker version: <code>docker --version</code>:</p>\n<ul>\n<li><code>&lt;19.03</code>: requires <a href=\"/docker-gpu#install-nvidia-docker2\"><code>nvidia-docker2</code></a> (check by <code>nvidia-docker version</code>) and <code>--runtime=nvidia</code>.</li>\n<li><code>&gt;=19.03</code>: requires <code>nvidia-container-toolkit</code> (check by <code>which nvidia-container-toolkit</code>) and <code>--gpus all</code>.</li>\n</ul>\n</div></div><h3 id=\"without-docker-compose\">Without docker-compose <a class=\"direct-link\" href=\"#without-docker-compose\">#</a></h3>\n<p>👉 <a href=\"https://www.tensorflow.org/install/docker#download_a_tensorflow_docker_image\">Different types of images for tensorflow</a>.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># pull the image</span><br>docker pull tensorflow/tensorflow:latest-gpu-jupyter<br><br><span class=\"token comment\"># run a container</span><br><span class=\"token function\">mkdir</span> ~/Downloads/test/notebooks<br>docker run --name docker_thi_test -it --rm -v <span class=\"token variable\"><span class=\"token variable\">$(</span>realpath ~/Downloads/test/notebooks<span class=\"token variable\">)</span></span>:/tf/notebooks -p <span class=\"token number\">8888</span>:8888 tensorflow/tensorflow:latest-gpu-jupyter</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># check if gpu available?</span><br>nvidia-smi<br><br><span class=\"token comment\"># check if tf2 working?</span><br>docker <span class=\"token builtin class-name\">exec</span> -it docker_thi_test <span class=\"token function\">bash</span><br>python</code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> tensorflow <span class=\"token keyword\">as</span> tf<br>tf<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>list_physical_devices<span class=\"token punctuation\">(</span><span class=\"token string\">'GPU'</span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"with-docker-compose%3F\">With docker-compose? <a class=\"direct-link\" href=\"#with-docker-compose%3F\">#</a></h3>\n<p>👉 Read <a href=\"/docker-gpu#using-docker-compose%3F\">this note</a> instead.</p>\n<h3 id=\"on-windows-wsl2\">On Windows WSL2 <a class=\"direct-link\" href=\"#on-windows-wsl2\">#</a></h3>\n<h2 id=\"install-directly-on-linux-(without-docker)\">Install directly on Linux (without docker) <a class=\"direct-link\" href=\"#install-directly-on-linux-(without-docker)\">#</a></h2>\n<p>On my computer, <a href=\"https://www.dell.com/fr-fr/work/shop/laptops/15-7590/spd/xps-15-7590-laptop\">Dell XPS 15 7590</a> - NVIDIA® GeForce® GTX 1650 Mobile.</p>\n<div class=\"danger\">\n<p>This section is not complete, the guide is still not working!</p>\n</div>\n<h3 id=\"installation\">Installation <a class=\"direct-link\" href=\"#installation\">#</a></h3>\n<p>👉 <a href=\"https://www.tensorflow.org/install/gpu\">GPU support : TensorFlow</a></p>\n<p>This guide is specific for:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">pip show tensorflow <span class=\"token comment\"># 2.3.1</span><br>pip show tensorflow-gpu <span class=\"token comment\"># 2.3.1</span><br>nvidia-smi <span class=\"token comment\"># NVIDIA-SMI 450.80.02 Driver Version: 450.80.02 CUDA Version: 11.0</span></code></pre>\n<p>👉 Note: <a href=\"/pytorch#installation\">PyTorch</a>.<br>\n👉 Note: <a href=\"/fresh-installation-ubuntu\">Ubuntu</a>.<br>\n👉 Note: <a href=\"/linux-tips#gpu-nvdia-problems\">Linux</a>.</p>\n<p><em>CUDA Toolkit</em>:</p>\n<ul>\n<li>If you meet <em>Existing package manager installation of the driver found</em>, try <a href=\"https://askubuntu.com/questions/1211919/error-installing-cuda-toolkit-existing-package-manager-installation-of-the-driv\">this method</a> to remove some already-installed packages before continuing.</li>\n<li>Or you can download cuda toolkit <code>.run</code> and then run</li>\n</ul>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">sh</span> cuda_11.1.0_*.run --toolkit --silent --override</code></pre>\n<h3 id=\"errors%3F\">Errors? <a class=\"direct-link\" href=\"#errors%3F\">#</a></h3>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Could not load dynamic library 'libcudart.so.10.1'; dlerror: libcudart.so.10.1: cannot open shared object file: No such file or directory</span></code></pre>\n<p>Need to install new <strong>cuda</strong> &amp; <strong>CUDNN libraries</strong> and <strong>tensorflow</strong>. (This note is for <code>tensorflow==2.3.1</code> and <a href=\"https://developer.nvidia.com/cuda-downloads?target_os=Linux&amp;target_arch=x86_64&amp;target_distro=Ubuntu&amp;target_version=2004&amp;target_type=deblocal\"><code>CUDA 11.1</code></a>). <sup><a href=\"https://medium.com/@cwbernards/tensorflow-2-3-on-ubuntu-20-04-lts-with-cuda-11-0-and-cudnn-8-0-fb136a829e7f\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># update path</span><br><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span>/usr/local/cuda-11.1/bin<span class=\"token variable\">${<span class=\"token environment constant\">PATH</span><span class=\"token operator\">:+</span><span class=\"token operator\">:</span>${<span class=\"token environment constant\">PATH</span>}</span><span class=\"token punctuation\">}</span><br><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">LD_LIBRARY_PATH</span><span class=\"token operator\">=</span>/usr/local/cuda-11.1/lib<span class=\"token punctuation\">\\</span><br>                         <span class=\"token variable\">${LD_LIBRARY_PATH<span class=\"token operator\">:+</span><span class=\"token operator\">:</span>${LD_LIBRARY_PATH}</span><span class=\"token punctuation\">}</span><br><br><span class=\"token comment\"># quickly test cuda version</span><br>nvcc --version</code></pre>\n<hr>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># WARNING:tensorflow:Your input ran out of data; interrupting training. Make sure that your dataset or generator can generate at least `steps_per_epoch * epochs` batches (in this case, 2000 batches). You may need to use the repeat() function when building your dataset.</span></code></pre>\n<p>Problem come from you don't have enough images!</p>\n<pre class=\"language-python\"><code class=\"language-python\">train_generator <span class=\"token operator\">=</span> train_datagen<span class=\"token punctuation\">.</span>flow_from_directory<span class=\"token punctuation\">(</span>batch_size <span class=\"token operator\">=</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span><br>validation_generator <span class=\"token operator\">=</span>  test_datagen<span class=\"token punctuation\">.</span>flow_from_directory<span class=\"token punctuation\">(</span>batch_size  <span class=\"token operator\">=</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># Found 1027 images belonging to 2 classes.</span><br><span class=\"token comment\"># Found 256 images belonging to 2 classes.</span><br><br>model<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span><br>    validation_data <span class=\"token operator\">=</span> validation_generator<span class=\"token punctuation\">,</span><br>    steps_per_epoch <span class=\"token operator\">=</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span><br>    epochs <span class=\"token operator\">=</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span><br>    validation_steps <span class=\"token operator\">=</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span><br>    verbose <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span></code></pre>\n<p>We must have <code>steps_per_epoch * batch_size &lt;= #of images</code>, in this case <code>100*20 = 2000 &gt; 1027</code>. Check <a href=\"https://github.com/fizyr/keras-retinanet/issues/1449#issuecomment-691867911\">this answer</a> for more information.</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># correct</span><br>model<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span><br>    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><br>    steps_per_epoch <span class=\"token operator\">=</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># batches in the generator are 20, so it takes 1027//20 batches to get to 1027 images</span><br>    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><br>    validation_steps <span class=\"token operator\">=</span> <span class=\"token number\">12</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># batches in the generator are 20, so it takes 256//20 batches to get to 256 images</span><br>    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span></code></pre>\n<hr>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Not found: No algorithm worked!</span><br><br><span class=\"token comment\"># OR</span><br><span class=\"token comment\"># This is probably because cuDNN failed to initialize</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\">nvidia-smi<br><span class=\"token comment\"># check and kill the process that uses GPU much</span><br><span class=\"token comment\"># restart the task</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># OR: add the following to your code</span><br><span class=\"token keyword\">from</span> tensorflow<span class=\"token punctuation\">.</span>compat<span class=\"token punctuation\">.</span>v1 <span class=\"token keyword\">import</span> ConfigProto<br><span class=\"token keyword\">from</span> tensorflow<span class=\"token punctuation\">.</span>compat<span class=\"token punctuation\">.</span>v1 <span class=\"token keyword\">import</span> InteractiveSession<br><br>config <span class=\"token operator\">=</span> ConfigProto<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>config<span class=\"token punctuation\">.</span>gpu_options<span class=\"token punctuation\">.</span>allow_growth <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span><br>session <span class=\"token operator\">=</span> InteractiveSession<span class=\"token punctuation\">(</span>config<span class=\"token operator\">=</span>config<span class=\"token punctuation\">)</span></code></pre>\n",
      "date_published": "2020-10-20T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/11ty-nunjucks/",
      "url": "https://dinhanhthi.com/11ty-nunjucks/",
      "title": "11ty + Nunjucks",
      "content_html": "<div class=\"info\">\n<p>This is not a tutorial to create an 11ty website, this's a note! You can find some <strong>very new and useful</strong> techniques on this note alongside <a href=\"https://www.11ty.dev/docs/\">the official documentation</a>.</p>\n</div>\n<div class=\"success\">\n<p>This note will be always updated!</p>\n</div>\n<h2 id=\"installation\">Installation <a class=\"direct-link\" href=\"#installation\">#</a></h2>\n<p>👉 First, install <a href=\"/nodejs-npm\">nodejs</a>.<br>\n👉 Using <a href=\"https://github.com/11ty/eleventy-base-blog\">this starter template</a> or <a href=\"https://github.com/google/eleventy-high-performance-blog\">Google's high performance statrer theme</a> (recommended).</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Install dependencies</span><br><span class=\"token function\">npm</span> <span class=\"token function\">install</span></code></pre>\n<p>Depend on each theme, you should follow the installation steps given in that theme.</p>\n<h3 id=\"setting-up-with-netlify\">Setting up with Netlify <a class=\"direct-link\" href=\"#setting-up-with-netlify\">#</a></h3>\n<p>Sometimes, 11ty takes too much time to build (especially on the task of optimizing images. On my site, it takes almost 10 minutes). You shouldn't use branch <code>master</code> to build you site because every time you make a push, Netlify will rebuild your whole site. You should create and use a new branch, so-called <code>prod</code> instead.</p>\n<div class=\"hsbox\"><div class=\"hs__title\"><strong>Idea 1</strong> -- manually build but should not use many times</div><div class=\"hs__content\"><p>On Netlify, go to <strong>Site settings</strong> &gt; <strong>Build &amp; deploy</strong>:</p>\n<p indent=\"\"></p>\n<ul>\n<li><strong>Build settings</strong>:\n<ul>\n<li><em>Build command</em>: <code>npm run build</code> (depends on your site)</li>\n<li><em>Publish directory</em>: <strong>_site</strong> (depends on your site)</li>\n<li><em>Builds</em>: <strong>Active builds</strong></li>\n</ul>\n</li>\n<li><strong>Deploy contexts</strong>:\n<ul>\n<li><em>Production branch</em>: <strong>prod</strong> (the same as the your created branch)</li>\n<li><em>Deploy previews</em>: <strong>Don't deploy pull requests</strong> (you don't want someone pull request and it auto make a deploy)</li>\n<li><em>Branch deploys</em>: <strong>Deploy only the production branch</strong>.</li>\n</ul>\n</li>\n</ul>\n</div></div>\n<p>The weakness of <em>Idea 1</em> is that you let netlify build again your whole site with its resources. That's why it takes too much time! Remember that, you have only 300 free minutes to build.</p>\n<div class=\"hsbox\"><div class=\"hs__title\"><strong>Idea 2</strong> -- build locally and push <code>_site</code> only</div><div class=\"hs__content\"><p>You should know that, even if your site contains only html files, netlify is able to make it live as usual.</p>\n<ol>\n<li>\n<p>Working mainly on branch <code>dev</code> like in Idea 1.</p>\n</li>\n<li>\n<p>Create a branch, so-called <code>_site</code> from <code>dev</code>. In this branch, delete all folders except <code>_site</code>, <code>node_modules</code>, <code>.git</code>, <code>.gitignore</code>.</p>\n</li>\n<li>\n<p>Modify <code>.gitignore</code> (exclude all except <code>_site</code> folder to push to github),</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">/*<br>/*/<br><span class=\"token operator\">!</span>/_site/</code></pre>\n</li>\n<li>\n<p>Now, we tell netlify build our site from branch <code>_site</code> (which contains html files only so it doesn't take time to build anything, it's really fast!)</p>\n<ul>\n<li><strong>Build settings</strong>:\n<ul>\n<li><em>Base directory</em>: Not set.</li>\n<li><em>Build command</em>: Not set.</li>\n<li><em>Publish directory</em>: _site/</li>\n<li><em>Builds</em>: Active.</li>\n</ul>\n</li>\n<li><strong>Deploy context</strong>:\n<ul>\n<li><em>Production branch</em>: <em>site</em></li>\n<li><em>Deploy previews</em>: Don’t deploy pull requests</li>\n<li><em>Branch deploys</em>: Deploy only the production branch</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n</div></div>\n<div class=\"hsbox\"><div class=\"hs__title\">Example workflow with <a href=\"http://dinhanhthi.com\">dinhanhthi.com</a></div><div class=\"hs__content\"><p>From the <a href=\"https://github.com/dinhanhthi/dinhanhthi.com\">main repo</a>, I clone to 2 different folders</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">|</span>- dinhanhthi.com <span class=\"token comment\"># &lt;- branch \"dev\"</span><br><span class=\"token operator\">|</span>- dat.com \t\t\t\t<span class=\"token comment\"># &lt;- branch \"_site\"</span></code></pre>\n<p>On <code>dat.com</code>, I create a script called <code>ud_site.sh</code> which contains,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Start building site\"</span><br><span class=\"token builtin class-name\">cd</span> <span class=\"token punctuation\">..</span>/dinhanhthi.com/<br><span class=\"token function\">npm</span> run build<br><span class=\"token builtin class-name\">cd</span> <span class=\"token punctuation\">..</span>/dat.com/<br><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Start copying....\"</span><br><span class=\"token function\">cp</span> -Rf <span class=\"token punctuation\">..</span>/dinhanhthi.com/_site/* _site/<br><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"End copying\"</span><br><span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span><br><span class=\"token function\">git</span> commit -m <span class=\"token string\">\"Updated: <span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token function\">date</span> +<span class=\"token string\">'%Y-%m-%d %H:%M:%S'</span><span class=\"token variable\">`</span></span>\"</span><br><span class=\"token function\">git</span> push</code></pre>\n<p>For covenience, I create an alias in bash shell,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">alias</span> <span class=\"token assign-left variable\">update_dat</span><span class=\"token operator\">=</span><span class=\"token string\">'cd ~/git/dat.com &amp;&amp; sh ud_site.sh &amp;&amp; cd -1'</span></code></pre>\n<p>From now, whenever I wanna build and deploy my site on netlify, I just run,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">update_dat</code></pre>\n<p>I saved from 1h of building to 2m of building on netlify with this method!</p>\n</div></div>\n<h2 id=\"templating\">Templating <a class=\"direct-link\" href=\"#templating\">#</a></h2>\n<h3 id=\"scss-to-css\">SCSS to CSS <a class=\"direct-link\" href=\"#scss-to-css\">#</a></h3>\n<div class=\"hsbox\"><div class=\"hs__title\">If you use <a href=\"https://www.npmjs.com/package/node-sass\">node-sass</a></div><div class=\"hs__content\"><div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Folder's structure</span><br>css/main.scss<br>css/components/_fonts.scss <span class=\"token comment\"># with _</span><br>css/components/<span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span></code></pre>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// in main.scss</span><br>@import <span class=\"token string\">\"./components/font\"</span>; <span class=\"token comment\">// without extension</span><br><br><span class=\"token comment\">// package.json</span><br><span class=\"token punctuation\">{</span><br>  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token property\">\"js-build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node-sass css/main.scss -o css\"</span><span class=\"token punctuation\">,</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n</div>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- in &lt;head> --></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>css/main.css<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></code></pre>\n</div></div>\n<div class=\"hsbox\"><div class=\"hs__title\">If you use <a href=\"https://rollupjs.org/guide/en/\">rollup</a> (like this site)</div><div class=\"hs__content\"><div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Folder's structure</span><br>css/main.scss<br>css/components/_fonts.scss<br>css/components/<span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span><br>css/main_input.js</code></pre>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// in main.scss</span><br>@import <span class=\"token string\">\"./components/font\"</span>; <span class=\"token comment\">// without extension</span><br><br><span class=\"token comment\">// package.json</span><br><span class=\"token punctuation\">{</span><br>  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token property\">\"js-build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"rollup -c rollup.config.js\"</span><span class=\"token punctuation\">,</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n</div>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> scss <span class=\"token keyword\">from</span> <span class=\"token string\">'rollup-plugin-scss'</span><span class=\"token punctuation\">;</span><br><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">[</span><br>  <span class=\"token punctuation\">{</span><br>    <span class=\"token comment\">// plugin 1</span><br>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>  <span class=\"token punctuation\">{</span><br>    input<span class=\"token operator\">:</span> <span class=\"token string\">'css/main_input.js'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// where the input file containing import of main.scss</span><br>    output<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>      file<span class=\"token operator\">:</span> <span class=\"token string\">'css/main.js'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// intermediate file which can be translated to css/main.css</span><br>      format<span class=\"token operator\">:</span> <span class=\"token string\">'esm'</span> <span class=\"token comment\">// still not know</span><br>    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>    plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><br>      <span class=\"token function\">scss</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// there are other configs</span><br>    <span class=\"token punctuation\">]</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- in &lt;head> --></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>css/main.css<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></code></pre>\n</div></div>\n<div class=\"hsbox\"><div class=\"hs__title\">If you use <a href=\"https://parceljs.org\">parcel</a></div><div class=\"hs__content\"><div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install</span><br><span class=\"token function\">npm</span> i parcel-bundler<br><span class=\"token function\">npm</span> i npm-run-all -D</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># folder structure</span><br>_assets/css/main.scss<br>___________/_bootstrap.scss<br>_______/js/main.js</code></pre>\n</div>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># main.scss</span><br>@import <span class=\"token string\">\"./bootstrap\"</span><span class=\"token punctuation\">;</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># main.js</span><br><span class=\"token function\">import</span> <span class=\"token string\">\"./../css/main.scss\"</span><span class=\"token punctuation\">;</span></code></pre>\n</div>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># package.json</span><br><span class=\"token string\">\"scripts\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token string\">\"start\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"npm-run-all --parallel dev:*\"</span>,<br>    <span class=\"token string\">\"build\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"run-s prod:*\"</span>,<br>    <span class=\"token string\">\"dev:eleventy\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"eleventy --serve\"</span>,<br>    <span class=\"token string\">\"dev:parcel\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"parcel watch ./_assets/js/main.js --out-dir ./_site/assets\"</span>,<br>    <span class=\"token string\">\"prod:eleventy\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"eleventy\"</span>,<br>    <span class=\"token string\">\"prod:parcel\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"parcel build ./_assets/js/main.js --out-dir ./_site/assets\"</span>,<br><span class=\"token punctuation\">}</span>,</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># run</span><br><span class=\"token function\">npm</span> start</code></pre>\n</div></div>\n<h3 id=\"nunjucks-inside-css\">Nunjucks inside css <a class=\"direct-link\" href=\"#nunjucks-inside-css\">#</a></h3>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\"><br><span class=\"token selector\">.bg</span> <span class=\"token punctuation\">{</span><br>  <span class=\"token property\">background-image</span><span class=\"token punctuation\">:</span> <span class=\"token url\"><span class=\"token function\">url</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span><br></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span><br><br><span class=\"token comment\">&lt;!-- or --></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token style-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token style language-css\"><span class=\"token property\">background-image</span><span class=\"token punctuation\">:</span> <span class=\"token url\"><span class=\"token function\">url</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n<h3 id=\"bootstrap-%2B-11ty\">Bootstrap + 11ty <a class=\"direct-link\" href=\"#bootstrap-%2B-11ty\">#</a></h3>\n<p>👉 <a href=\"https://getbootstrap.com\">Bootstrap's homepage</a><br>\n👉 <a href=\"https://formden.com/blog/isolate-bootstrap\">How to Isolate Bootstrap CSS to Avoid Conflicts (using LESS)</a></p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install</span><br><span class=\"token function\">npm</span> i bootstrap jquery popper.js</code></pre>\n<p>Using alongside with section &quot;<a href=\"#scss-to-css\">SCSS to CSS</a>&quot;.</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># folder structure</span><br>_assets/css/main.scss<br>_______/vender/_bootstrap.scss</code></pre>\n<pre class=\"language-scss\"><code class=\"language-scss\"><span class=\"token comment\">// main.scss</span><br><span class=\"token keyword\">@import</span> <span class=\"token string\">\"./vender/bootstrap\"</span><span class=\"token punctuation\">;</span></code></pre>\n</div>\n<pre class=\"language-scss\"><code class=\"language-scss\"><span class=\"token comment\">// _bootstrap.scss</span><br><span class=\"token comment\">// all components</span><br><span class=\"token comment\">// @import \"./../../../node_modules/bootstrap/scss/bootstrap.scss\";</span><br><br><span class=\"token comment\">// Required</span><br><span class=\"token comment\">// check more: https://getbootstrap.com/docs/4.5/getting-started/theming/#importing</span><br><span class=\"token keyword\">@import</span> <span class=\"token string\">\"./../../../node_modules/bootstrap/scss/functions\"</span><span class=\"token punctuation\">;</span><br><span class=\"token keyword\">@import</span> <span class=\"token string\">\"./../../../node_modules/bootstrap/scss/variables\"</span><span class=\"token punctuation\">;</span><br><span class=\"token keyword\">@import</span> <span class=\"token string\">\"./../../../node_modules/bootstrap/scss/mixins\"</span><span class=\"token punctuation\">;</span></code></pre>\n<h2 id=\"google-fonts\">Google Fonts <a class=\"direct-link\" href=\"#google-fonts\">#</a></h2>\n<ul>\n<li>Put fonts in <code>fonts/</code> and use <a href=\"http://google-webfonts-helper.herokuapp.com/fonts/open-sans?subsets=latin\">this tool</a> to generate <code>.woff</code>, <code>woff2</code> from Google Fonts. <strong>Be careful on the location will be used on your site</strong>.</li>\n<li>Copy and paste to <code>css/main.scss</code>.</li>\n<li>If you have a problem with <code>Content-Security-Policy</code>, check <a href=\"/for-me-only/#errors%3F\">this section</a>.</li>\n</ul>\n<h3 id=\"layout\">Layout <a class=\"direct-link\" href=\"#layout\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> _includes/layouts<br><span class=\"token function\">touch</span> _includes/layouts/post.njk</code></pre>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// create an alias</span><br>module<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">eleventyConfig</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>    eleventyConfig<span class=\"token punctuation\">.</span><span class=\"token function\">addLayoutAlias</span><span class=\"token punctuation\">(</span><span class=\"token string\">'post'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'layouts/post.njk'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># update changes</span><br><span class=\"token function\">touch</span> .eleventy.js</code></pre>\n<pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token comment\"># then use</span><br><span class=\"token punctuation\">---</span><br><span class=\"token key atrule\">layout</span><span class=\"token punctuation\">:</span> post<br><span class=\"token punctuation\">---</span></code></pre>\n</div>\n<h4 id=\"includes\">Includes <a class=\"direct-link\" href=\"#includes\">#</a></h4>\n<p>Split layout into parts and include them in the main file.</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// in _includes/components/head.njk</span><br><span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> include <span class=\"token string\">\"components/head.njk\"</span> <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span><br><br><span class=\"token comment\">// custom parameter</span><br><span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> <span class=\"token keyword\">set</span> customClass <span class=\"token operator\">=</span> <span class=\"token string\">'list-homepage'</span> <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> include <span class=\"token string\">\"postslist.njk\"</span> <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span><br><span class=\"token comment\">// inside postlist.njk, just use {{ customClass }}</span><br></code></pre>\n<h4 id=\"template-inheritance\">Template inheritance <a class=\"direct-link\" href=\"#template-inheritance\">#</a></h4>\n<p>Read this <a href=\"https://mozilla.github.io/nunjucks/templating.html#template-inheritance\">tutorial</a>.</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- _includes/layouts/base.njk --></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>header</span><span class=\"token punctuation\">></span></span><br>    <br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>header</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></code></pre>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- _includes/layouts/post.njk --></span><br>---<br>---<br>{% extends \"layouts/base.njk\" %}<br><br>{% block headerLogo%}<br>  <span class=\"token comment\">&lt;!-- only appear on post layout --></span><br>{% endblock %}<br></code></pre>\n</div>\n<h3 id=\"post's-components\">Post's components <a class=\"direct-link\" href=\"#post's-components\">#</a></h3>\n<p>👉 <a href=\"https://www.11ty.dev/docs/data-eleventy-supplied/#page-variable-contents\">Page variable components</a>.</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// URL can be used in &lt;a href> to link to other templates</span><br>url<span class=\"token operator\">:</span> <span class=\"token string\">\"/current/page/myFile/\"</span><span class=\"token punctuation\">,</span><br><br><span class=\"token comment\">// For permalinks: inputPath filename minus template file extension (New in v0.3.4)</span><br>fileSlug<span class=\"token operator\">:</span> <span class=\"token string\">\"myFile\"</span><span class=\"token punctuation\">,</span><br><br><span class=\"token comment\">// For permalinks: inputPath minus template file extension (New in v0.9.0)</span><br>filePathStem<span class=\"token operator\">:</span> <span class=\"token string\">\"/current/page/myFile\"</span><span class=\"token punctuation\">,</span><br><br><span class=\"token comment\">// JS Date Object for current page (used to sort collections)</span><br>date<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br><br><span class=\"token comment\">// The path to the original source file for the template</span><br><span class=\"token comment\">// Note: this will include your input directory path!</span><br>inputPath<span class=\"token operator\">:</span> <span class=\"token string\">\"./current/page/myFile.md\"</span><span class=\"token punctuation\">,</span><br><br><span class=\"token comment\">// Depends on your output directory (the default is _site)</span><br><span class=\"token comment\">// You probably won’t use this: `url` is better.</span><br>outputPath<span class=\"token operator\">:</span> <span class=\"token string\">\"./_site/current/page/myFile/index.html\"</span><br><br>templateContent<span class=\"token operator\">:</span> <span class=\"token comment\">//the rendered content of this template. This does not include layout wrappers.</span><br><br>data<span class=\"token operator\">:</span> <span class=\"token comment\">// all data for this piece of content (includes any data inherited from layouts)</span><br><span class=\"token comment\">// self-defined frontmatter tags can be found here</span></code></pre>\n<div class=\"info\">\n<p>For ones who wanna get only the content (escape HTML tags and special characters) of the post:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> page.templateContent <span class=\"token operator\">|</span> dump <span class=\"token operator\">|</span> safe <span class=\"token operator\">|</span> striptags<span class=\"token punctuation\">(</span>true<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><br></code></pre>\n</div>\n<h3 id=\"frontmatter\">Frontmatter <a class=\"direct-link\" href=\"#frontmatter\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token punctuation\">---</span><br><span class=\"token key atrule\">title</span><span class=\"token punctuation\">:</span> Title of the post<br><span class=\"token key atrule\">description</span><span class=\"token punctuation\">:</span> description of the post<br><span class=\"token key atrule\">date</span><span class=\"token punctuation\">:</span> <span class=\"token datetime number\">2020-09-11</span><br><span class=\"token key atrule\">layout</span><span class=\"token punctuation\">:</span> layouts/post.njk<br><span class=\"token punctuation\">---</span></code></pre>\n<pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token punctuation\">---</span><br><span class=\"token key atrule\">tags</span><span class=\"token punctuation\">:</span><br>  <span class=\"token punctuation\">-</span> default<br><span class=\"token comment\"># or</span><br><span class=\"token key atrule\">tags</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>tag 1<span class=\"token punctuation\">,</span> tag 2<span class=\"token punctuation\">]</span><br><span class=\"token punctuation\">---</span></code></pre>\n</div>\n<h3 id=\"list-of-post\">List of post <a class=\"direct-link\" href=\"#list-of-post\">#</a></h3>\n<p>Normal,</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><br>{% for post in collections.posts %}<br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><br>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{ post.url | url }}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br>      {{ post.data.title }}<br>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><br>{% endfor %}<br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><br></code></pre>\n<div class=\"info\">\n<p>Other default variable (like <code>post.url</code>) can be found <a href=\"https://www.11ty.dev/docs/data-eleventy-supplied/#page-variable-contents\">here</a>. Note that, you can use <code>page.templateContent</code> for the content of a page in some collections (not tested yet but you can try!<sup><a href=\"https://www.11ty.dev/docs/collections/\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup>).</p>\n</div>\n<h4 id=\"sort-posts-by-title\">Sort posts by title <a class=\"direct-link\" href=\"#sort-posts-by-title\">#</a></h4>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- Create a new list --></span><br>{% set newPostList = [] %}<br>{% for post in collections.posts %}<br>  {% set newPostList = (newPostList.push({title: post.data.title, url: post.url}), newPostList) %}<br>{% endfor %}<br><br><span class=\"token comment\">&lt;!-- list of post by alphabet --></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><br>{% for post in newPostList|sort(attribute='title') %}<br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><br>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{ post.url | url }}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br>      {{ post.title }}<br>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><br>{% endfor %}<br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><br></code></pre>\n<h3 id=\"posts-by-categories-%2F-tags\">Posts by categories / tags <a class=\"direct-link\" href=\"#posts-by-categories-%2F-tags\">#</a></h3>\n<p>In this case, <mark>we consider a category as the first tag</mark> of a post. For example, if a post has tags <code>tags: [tag 1, tag 2, tag 3]</code>, then <code>tag 1</code> will be its category!</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// _data/categories.json</span><br><span class=\"token punctuation\">[</span><br>\t<span class=\"token punctuation\">{</span><br>\t\t<span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Cat 1\"</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token property\">\"icon\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/img/cats/cat_1.svg\"</span><br>\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token punctuation\">{</span><br>\t\t<span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Cat 2\"</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token property\">\"icon\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/img/cats/cat_2.svg\"</span><br>\t<span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">]</span></code></pre>\n<pre class=\"language-html\"><code class=\"language-html\">{% for item in categories %}<br>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>category-wrapper<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span>{{ item.icon }} {{ item.name }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><br>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>post-list<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br>\t\t\t{% for post in collections[item.name] %}<br>\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>post-item<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br>\t\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{ post.url }}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span>{{ post.data.title }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><br>\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><br>\t\t\t{% endfor %}<br>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><br>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><br>{% endfor %}<br></code></pre>\n</div>\n<h4 id=\"external-posts\">External posts <a class=\"direct-link\" href=\"#external-posts\">#</a></h4>\n<p>If you wanna add external posts (not generated by 11ty from <code>.md</code> files), do below steps. For example, on this site, I cretae some pages created by <a href=\"https://www.notion.so/\">Notion</a> and I wanna add them to category <code>MOOC</code>.</p>\n<p><strong>Remark</strong>: This section is used with <a href=\"#posts-by-categories-%2F-tags\">section &quot;posts by categories&quot;</a> and <a href=\"#sort-posts-by-title\">section &quot;sort posts by title&quot;</a>.</p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// _data/cat_ex_posts.json</span><br><span class=\"token punctuation\">[</span><br>\t<span class=\"token punctuation\">{</span><br>\t\t<span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"DL4 - Convolutional Neural Network (CNN)\"</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://www.notion.so/dinhanhthi/CNN-by-deeplearning-ai-a081d253fc2c4c0b99edd2757c759b9e\"</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token property\">\"tags\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"MOOC\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Deep Learning\"</span><span class=\"token punctuation\">]</span><br>\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token punctuation\">{</span><br>\t\t<span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"DL5 - Sequence models\"</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://www.notion.so/dinhanhthi/CNN-by-deeplearning-ai-a081d253fc2c4c0b99edd2757c759b9e\"</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token property\">\"tags\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"MOOC\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Deep Learning\"</span><span class=\"token punctuation\">]</span><br>\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token punctuation\">{</span><br>\t\t<span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"NLP by HSE\"</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://www.notion.so/dinhanhthi/NLP-by-HSE-20cec3e92201475eb4d48787954f3aa4\"</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token property\">\"tags\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"MOOC\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"NLP\"</span><span class=\"token punctuation\">]</span><br>\t<span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">]</span></code></pre>\n<pre class=\"language-html\"><code class=\"language-html\">{% for item in categories %}<br>\t{% set postslist = collections[item.name] %}<br><br>\t{% set newPostListCat = [] %}<br>\t{% for post in cat_ex_posts %}<br>\t\t{% for tg in post.tags %}<br>\t\t\t{% if tg == item.name %}<br>\t\t\t\t{% set more_post = true %}<br>\t\t\t\t{% set newPostListCat = (newPostListCat.push({title: post.title, url: post.url, tags: post.tags}), newPostListCat) %}<br>\t\t\t{% endif %}<br>\t\t{% endfor %}<br>\t{% endfor %}<br><br>\t{% set newPostList = [] %}<br><br>\t{% for post in postslist %}<br>\t\t{% set newPostList = (newPostList.push({title: post.data.title, url: post.url}), newPostList) %}<br>\t{% endfor %}<br><br>\t{% if more_post %}<br>\t\t{% for post in newPostListCat %}<br>\t\t\t{% set newPostList = (newPostList.push({title: post.title, url: post.url, tags: post.tags}), newPostList) %}<br>\t\t{% endfor %}<br>\t{% endif %}<br><br>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>category-wrapper<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span>{{ item.icon }} {{ item.name }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><br>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>post-list<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br>\t\t{% for post in newPostList %}<br>\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>post-item<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br>\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{ post.url }}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span>{{ post.title }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><br>\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><br>\t\t{% endfor %}<br>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><br>\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><br>{% endfor %}<br></code></pre>\n<h3 id=\"next-%2F-previous-post\">Next / Previous post <a class=\"direct-link\" href=\"#next-%2F-previous-post\">#</a></h3>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><br>  {%- set nextPost = collections.posts | getNextCollectionItem(page) %}<br>  {%- if nextPost %}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span>Next: <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{ nextPost.url | url }}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{{ nextPost.data.title }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>{% endif %}<br>  {%- set previousPost = collections.posts | getPreviousCollectionItem(page) %}<br>  {%- if previousPost %}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span>Previous: <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{ previousPost.url | url }}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{{ previousPost.data.title }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>{% endif %}<br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><br></code></pre>\n<h2 id=\"custom-js-scripts\">Custom js scripts <a class=\"direct-link\" href=\"#custom-js-scripts\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Put scripts in</span><br><span class=\"token comment\"># /src/main.js</span></code></pre>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- in &lt;head> --></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">async</span> <span class=\"token attr-name\">defer</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{ <span class=\"token punctuation\">'</span>/js/min.js<span class=\"token punctuation\">'</span> | addHash }}<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span><br></code></pre>\n</div>\n<p>Using <a href=\"https://rollupjs.org/\">rollupjs</a>,</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// rollup.config.js</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">[</span><br>  <span class=\"token punctuation\">{</span><br>    input<span class=\"token operator\">:</span> <span class=\"token string\">\"src/main.js\"</span><span class=\"token punctuation\">,</span><br>    output<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><br>      <span class=\"token punctuation\">{</span><br>        file<span class=\"token operator\">:</span> <span class=\"token string\">\"js/min.js\"</span><span class=\"token punctuation\">,</span><br>        format<span class=\"token operator\">:</span> <span class=\"token string\">\"iife\"</span><span class=\"token punctuation\">,</span><br>        sourcemap<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><br>        plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token function\">terser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><br>      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre>\n<h2 id=\"last-modified-date\">Last modified date <a class=\"direct-link\" href=\"#last-modified-date\">#</a></h2>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// .eleventy.js</span><br><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> DateTime <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"luxon\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>module<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">eleventyConfig</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>  eleventyConfig<span class=\"token punctuation\">.</span><span class=\"token function\">addFilter</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"readableDate\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">dateObj</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>    <span class=\"token keyword\">return</span> DateTime<span class=\"token punctuation\">.</span><span class=\"token function\">fromJSDate</span><span class=\"token punctuation\">(</span>dateObj<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> zone<span class=\"token operator\">:</span> <span class=\"token string\">\"utc\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFormat</span><span class=\"token punctuation\">(</span><br>      <span class=\"token string\">\"dd LLL yyyy\"</span><br>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><br>  <span class=\"token comment\">// https://html.spec.whatwg.org/multipage/common-microsyntaxes.html#valid-date-string</span><br>  eleventyConfig<span class=\"token punctuation\">.</span><span class=\"token function\">addFilter</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"htmlDateString\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">dateObj</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>    <span class=\"token keyword\">return</span> DateTime<span class=\"token punctuation\">.</span><span class=\"token function\">fromJSDate</span><span class=\"token punctuation\">(</span>dateObj<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> zone<span class=\"token operator\">:</span> <span class=\"token string\">\"utc\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFormat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dd-LL-yyyy\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><br>  eleventyConfig<span class=\"token punctuation\">.</span><span class=\"token function\">addFilter</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sitemapDateTimeString\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">dateObj</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>    <span class=\"token keyword\">const</span> dt <span class=\"token operator\">=</span> DateTime<span class=\"token punctuation\">.</span><span class=\"token function\">fromJSDate</span><span class=\"token punctuation\">(</span>dateObj<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> zone<span class=\"token operator\">:</span> <span class=\"token string\">\"utc\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>dt<span class=\"token punctuation\">.</span>isValid<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>      <span class=\"token keyword\">return</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span><br>    <span class=\"token punctuation\">}</span><br>    <span class=\"token keyword\">return</span> dt<span class=\"token punctuation\">.</span><span class=\"token function\">toISO</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre>\n<p>Last modified date,</p>\n<pre class=\"language-html\"><code class=\"language-html\">{{ page.inputPath | lastModifiedDate  | htmlDateString }}<br></code></pre>\n<h2 id=\"insert-code-highlight\">Insert code highlight <a class=\"direct-link\" href=\"#insert-code-highlight\">#</a></h2>\n<p><strong>Code syntax highlight</strong>: Need <a href=\"https://www.11ty.dev/docs/plugins/syntaxhighlight/\">this plugin</a>. List of <a href=\"https://prismjs.com/#languages-list\">supported languages</a>.</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"token title important\"><span class=\"token punctuation\">#</span> Highlight line 2</span><br><span class=\"token code\"><span class=\"token punctuation\">```</span><span class=\"token code-language\"> js/2</span><br><span class=\"token code-block language-js\"><span class=\"token comment\">// lines of codes</span></span><br><span class=\"token punctuation\">```</span></span></code></pre>\n<pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"token title important\"><span class=\"token punctuation\">#</span> Highlight line 2 to 4</span><br><span class=\"token code\"><span class=\"token punctuation\">```</span><span class=\"token code-language\"> js/2-4</span><br><span class=\"token code-block language-js\"><span class=\"token comment\">// lines of codes</span></span><br><span class=\"token punctuation\">```</span></span></code></pre>\n<pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"token title important\"><span class=\"token punctuation\">#</span> Highlight line 2, 4</span><br><span class=\"token code\"><span class=\"token punctuation\">```</span><span class=\"token code-language\"> js/2,4</span><br><span class=\"token code-block language-js\"><span class=\"token comment\">// lines of codes</span></span><br><span class=\"token punctuation\">```</span></span></code></pre>\n<pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"token title important\"><span class=\"token punctuation\">#</span> Delete line 2 (red highlight)</span><br><span class=\"token title important\"><span class=\"token punctuation\">#</span> and add line 4 (green highlight)</span><br><span class=\"token code\"><span class=\"token punctuation\">```</span><span class=\"token code-language\"> js/4/2</span><br><span class=\"token code-block language-js\"><span class=\"token comment\">// lines of codes</span></span><br><span class=\"token punctuation\">```</span></span></code></pre>\n</div>\n<h3 id=\"insert-liquid-%2F-nunjuck-code\">Insert liquid / nunjuck code <a class=\"direct-link\" href=\"#insert-liquid-%2F-nunjuck-code\">#</a></h3>\n<p>Inline code, put <code>{% raw %}</code> and <code>{% endraw %}</code> around the keyword.</p>\n<p>Code block,</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span> js <span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> raw <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span><br><span class=\"token comment\">// line of codes</span><br><span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> endraw <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span><br><span class=\"token operator\">~</span><span class=\"token operator\">~</span><span class=\"token operator\">~</span></code></pre>\n<h2 id=\"math-equations\">Math equations <a class=\"direct-link\" href=\"#math-equations\">#</a></h2>\n<div class=\"hsbox\"><div class=\"hs__title\">KaTeX: Use <code>markdown-it-katex</code></div><div class=\"hs__content\"><p>Using <a href=\"https://github.com/iktakahiro/markdown-it-katex/\">markdown-it-katex</a> (use this version only),</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// .eleventy.js</span><br><span class=\"token keyword\">const</span> markdownIt <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"markdown-it\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token keyword\">const</span> markdownItKatex <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'@iktakahiro/markdown-it-katex'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><br><span class=\"token keyword\">let</span> markdownLibrary <span class=\"token operator\">=</span> <span class=\"token function\">markdownIt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>markdownLibrary<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>markdownItKatex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- inside &lt;head> --></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></code></pre>\n<p>💡 <strong>Some tips</strong>: working with KaTeX</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># working</span><br><span class=\"token variable\">$$</span><br><span class=\"token punctuation\">\\</span>dfrac<span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">{</span><span class=\"token number\">2</span><span class=\"token punctuation\">}</span><br><span class=\"token variable\">$$</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># not working</span><br>- Item<br><br>\t<span class=\"token variable\">$$</span><br>\t<span class=\"token punctuation\">\\</span>dfrac<span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">{</span><span class=\"token number\">2</span><span class=\"token punctuation\">}</span><br>\t<span class=\"token variable\">$$</span><br>- Item</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># working again</span><br>- Item<br><br>  <span class=\"token variable\">$$</span><span class=\"token punctuation\">\\</span>dfrac<span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">{</span><span class=\"token number\">2</span><span class=\"token punctuation\">}</span><span class=\"token variable\">$$</span> <span class=\"token comment\"># without \\n</span><br>- Item<br></code></pre>\n</div>\n</div></div>\n<p>In this site, I use <a href=\"https://www.npmjs.com/package/markdown-it-texmath\"><code>markdown-it-texmath</code></a>. I choose this because we can overcome the weakness of <code>markdown-it-katex</code> in case of breaking lines in list mode &amp; it's <a href=\"https://goessner.github.io/markdown-it-texmath/index.html\">more flexible</a> (you can try it online <a href=\"https://goessner.github.io/markdown-it-texmath/markdown-it-texmath-demo.html\">here</a>).</p>\n<p><strong>An important note</strong>: the original version has a problem of whitespace before and after <code>&lt;eq&gt;</code> tag in the inline mode. That why instead of seeing <code>aaa x aaa</code> with <code>aaa $x$ aaa</code>, we see <code>aaaxaaa</code>. I've changed (and reported <a href=\"https://github.com/goessner/markdown-it-texmath/issues/25\">an issue</a>). For a moment, I use a modified version <a href=\"https://github.com/dinhanhthi/markdown-it-texmath\">here</a>.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Install</span><br><span class=\"token comment\"># npm i markdown-it-texmath --save-dev # original, whitespace problem</span><br><span class=\"token function\">npm</span> i git+https://github.com/dinhanhthi/markdown-it-texmath.git --save-dev</code></pre>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// .eleventy.js</span><br>tm <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'markdown-it-texmath'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>md <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'markdown-it'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>tm<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> engine<span class=\"token operator\">:</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'katex'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>\t\t\t\t\t\t\t\t\t\tdelimiters<span class=\"token operator\">:</span><span class=\"token string\">'dollars'</span><span class=\"token punctuation\">,</span><br>\t\t\t\t\t\t\t\t\t\tkatexOptions<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> macros<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"\\\\RR\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\\\\mathbb{R}\"</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><br>\t\t\t\t\t\t\t\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<div class=\"hsbox\"><div class=\"hs__title\">💡 If you wanna modify yourself <code>markdown-it-texmath</code></div><div class=\"hs__content\"><p>Copy the cloned folder <code>markdown-it-temath</code> (except <code>.git</code>, <code>.gitignore</code>, <code>test/</code>, <code>package-lock.json</code>) to a so-called <code>/third-party/</code> folder in your project. In <code>.eleventy.js</code>, you import it as</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> tm <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./third_party/markdown-it-texmath'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n</div></div><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- Add in &lt;head> --></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span>  <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br><br><span class=\"token comment\">&lt;!-- Save to local and modify (or just use) --></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></code></pre>\n<p><strong>Mathjax</strong>: using <a href=\"https://github.com/classeur/markdown-it-mathjax\">markdown-it-mathjax</a></p>\n<h2 id=\"figures\">Figures <a class=\"direct-link\" href=\"#figures\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Insert normally,</span><br><span class=\"token operator\">!</span><span class=\"token punctuation\">[</span>description<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>/path/to/image<span class=\"token punctuation\">)</span><br><span class=\"token punctuation\">{</span>% enraw %<span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># With custom classes (using markdown-it-attrs)</span><br><span class=\"token operator\">!</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>:.custom-class<span class=\"token punctuation\">}</span></code></pre>\n</div>\n<h2 id=\"markdown\">Markdown <a class=\"direct-link\" href=\"#markdown\">#</a></h2>\n<h3 id=\"markdown-it-%26-its-plugins\">markdown-it &amp; its plugins <a class=\"direct-link\" href=\"#markdown-it-%26-its-plugins\">#</a></h3>\n<p>We use <a href=\"https://github.com/markdown-it/markdown-it\">markdown-it</a> and <a href=\"https://www.npmjs.com/search?q=keywords:markdown-it-plugin\">its plugins</a>.</p>\n<div class=\"hsbox\">\n<div class=\"hs__title\">My choices of useful plugins</div>\n<div class=\"hs__content\">\n<p>Just use <code>npm i &lt;plugin-name&gt; --save-dev</code> to install.</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// .eleventy.js</span><br><span class=\"token keyword\">const</span> markdownIt <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"markdown-it\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><br>module<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">eleventyConfig</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>  <span class=\"token keyword\">let</span> markdownLibrary <span class=\"token operator\">=</span> <span class=\"token function\">markdownIt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><br>    html<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// html tag inside source</span><br>    breaks<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// use '\\n' as &lt;br></span><br>    linkify<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// Autoconvert URL-like text to links</span><br>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><br>    <span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"markdown-it-anchor\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><br>      permalink<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><br>      permalinkClass<span class=\"token operator\">:</span> <span class=\"token string\">\"direct-link\"</span><span class=\"token punctuation\">,</span><br>      permalinkSymbol<span class=\"token operator\">:</span> <span class=\"token string\">\"#\"</span><span class=\"token punctuation\">,</span><br>    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><br>    <span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'markdown-it-mark'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// ==mark==</span><br>    <span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'markdown-it-attrs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// use {:} options</span><br>      leftDelimiter<span class=\"token operator\">:</span> <span class=\"token string\">'{:'</span><span class=\"token punctuation\">,</span><br>      rightDelimiter<span class=\"token operator\">:</span> <span class=\"token string\">'}'</span><br>    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><br>    <span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"markdown-it-emoji\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// emoji</span><br>    <span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"markdown-it-table-of-contents\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// [[toc]] (no spaces)</span><br>    <span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'@iktakahiro/markdown-it-katex'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// katex</span><br>    <span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"markdown-it-task-lists\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// tasks [x]</span><br>    <span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'markdown-it-container'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'success'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// use `::: success` bock to create a custom div</span><br>    <span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'markdown-it-kbd'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// [[Ctrl]]</span><br>    <span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'markdown-it-footnote'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>    <span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'@gerhobbelt/markdown-it-inline-text-color'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>    <span class=\"token punctuation\">;</span><br>  eleventyConfig<span class=\"token punctuation\">.</span><span class=\"token function\">setLibrary</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"md\"</span><span class=\"token punctuation\">,</span> markdownLibrary<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre>\n</div>\n</div>\n<div class=\"hsbox\">\n<div class=\"hs__title\">How to use markdown-it's plugins in 11ty?</div>\n<div class=\"hs__content\">\n<p>Below are an example of inserting 2 plugins,</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// .eleventy.js</span><br><span class=\"token comment\">// An example of using plugins</span><br><span class=\"token keyword\">const</span> markdownIt <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"markdown-it\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token keyword\">var</span> markdownItp <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'markdown-it'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><br>module<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">eleventyConfig</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>  <span class=\"token keyword\">let</span> markdownLibrary <span class=\"token operator\">=</span> <span class=\"token function\">markdownIt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><br>    html<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// html tag inside source</span><br>    breaks<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// use '\\n' as &lt;br></span><br>    linkify<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// Autoconvert URL-like text to links</span><br>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><br>    <span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"markdown-it-emoji\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// emoji</span><br>    <span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"markdown-it-table-of-contents\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// [[toc]] (no spaces)</span><br>    <span class=\"token punctuation\">;</span><br>  eleventyConfig<span class=\"token punctuation\">.</span><span class=\"token function\">setLibrary</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"md\"</span><span class=\"token punctuation\">,</span> markdownLibrary<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre>\n</div>\n</div>\n<h3 id=\"custom-container\">Custom container <a class=\"direct-link\" href=\"#custom-container\">#</a></h3>\n<p>If you wanna create an <strong>advanced custom container</strong>, use plugin <code>markdown-it-container</code>. For example, you want export something like,</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hsbox<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hs__title<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br>    <span class=\"token comment\">&lt;!-- Custom Title --></span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hs__content<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br>    <span class=\"token comment\">&lt;!-- Custom markdown texts --></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Just by using,</p>\n<pre class=\"language-html\"><code class=\"language-html\">::: hsbox Custom Title<br>Custom markdown texts<br>:::<br></code></pre>\n<p>You can put in <code>.eleventy.js</code> like,</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'markdown-it-container'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'hsbox'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><br>  <span class=\"token function-variable function\">validate</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">params</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token keyword\">return</span> params<span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^hsbox\\s+(.*)$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>  <span class=\"token function-variable function\">render</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">tokens<span class=\"token punctuation\">,</span> idx</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token keyword\">var</span> m <span class=\"token operator\">=</span> tokens<span class=\"token punctuation\">[</span>idx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>info<span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^hsbox\\s+(.*)$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tokens<span class=\"token punctuation\">[</span>idx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>nesting <span class=\"token operator\">===</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>      <span class=\"token comment\">// opening tag</span><br>      <span class=\"token keyword\">return</span> <span class=\"token string\">'&lt;div class=\"hsbox\">&lt;div class=\"hs__title\">'</span><br>        <span class=\"token operator\">+</span> markdownItp<span class=\"token punctuation\">.</span><span class=\"token function\">renderInline</span><span class=\"token punctuation\">(</span>m<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br>        <span class=\"token operator\">+</span> <span class=\"token string\">'&lt;/div>&lt;div class=\"hs__content\">'</span><span class=\"token punctuation\">;</span><br>    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span><br>      <span class=\"token comment\">// closing tag</span><br>      <span class=\"token keyword\">return</span> <span class=\"token string\">'&lt;/div>&lt;/div>'</span><span class=\"token punctuation\">;</span><br>    <span class=\"token punctuation\">}</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"markdown-inside-.njk\">Markdown inside <code>.njk</code> <a class=\"direct-link\" href=\"#markdown-inside-.njk\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// .eleventy.js</span><br><br>module<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">eleventyConfig</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>  eleventyConfig<span class=\"token punctuation\">.</span><span class=\"token function\">addPairedShortcode</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"markdown\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">content<span class=\"token punctuation\">,</span> inline <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>    <span class=\"token keyword\">return</span> inline<br>      <span class=\"token operator\">?</span> markdownLibrary<span class=\"token punctuation\">.</span><span class=\"token function\">renderInline</span><span class=\"token punctuation\">(</span>content<span class=\"token punctuation\">)</span><br>      <span class=\"token operator\">:</span> markdownLibrary<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>content<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-html\"><code class=\"language-html\">{% markdown %}<br><span class=\"token comment\">&lt;!-- html tags --></span><br><span class=\"token comment\">&lt;!-- no need spaces before/after --></span><br>{% endmarkdown %}<br></code></pre>\n</div>\n<h3 id=\"html%2Fnunjucks-tags-inside-.md\">HTML/nunjucks tags inside <code>.md</code> <a class=\"direct-link\" href=\"#html%2Fnunjucks-tags-inside-.md\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- not working --></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><br>  __abc__<br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- working --></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><br><br>  __abc__<br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- not working --></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>list-of<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br>  <br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- working --></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>list-of<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n</div>\n<h3 id=\"custom-block-shortcodes\">Custom block shortcodes <a class=\"direct-link\" href=\"#custom-block-shortcodes\">#</a></h3>\n<div class=\"col-2-equal\">\n<div>\n<p>To creata the same code block like above, i.e.,</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hsbox<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hs__title<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br>    <span class=\"token comment\">&lt;!-- Custom Title --></span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hs__content<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br>    <span class=\"token comment\">&lt;!-- Custom markdown texts --></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n</div>\n<div>\n<p>Just by using,</p>\n<pre class=\"language-html\"><code class=\"language-html\">{% hsbox \"Custom Title\" %}<br><span class=\"token comment\">&lt;!-- Custom markdown texts --></span><br>{% endhsbox %}<br></code></pre>\n</div>\n</div>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// .eleventy.js</span><br><br>module<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">eleventyConfig</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>  eleventyConfig<span class=\"token punctuation\">.</span><span class=\"token function\">addPairedShortcode</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hsbox\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">content<span class=\"token punctuation\">,</span> title</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>    <span class=\"token keyword\">return</span> <span class=\"token string\">'&lt;div class=\"hsbox\">&lt;div class=\"hs__title\">'</span><br>      <span class=\"token operator\">+</span> markdownLibrary<span class=\"token punctuation\">.</span><span class=\"token function\">renderInline</span><span class=\"token punctuation\">(</span>title<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">'&lt;/div>&lt;div class=\"hs__content\">'</span><br>      <span class=\"token operator\">+</span> markdownLibrary<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>content<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">'&lt;/div>&lt;/div>'</span><span class=\"token punctuation\">;</span><br>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre>\n<h3 id=\"custom-inline-shortcodes\">Custom inline shortcodes <a class=\"direct-link\" href=\"#custom-inline-shortcodes\">#</a></h3>\n<p>If you wanna export something like,</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>custom-url<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>ref<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>by using <code>{% ref &quot;custom-url&quot; %}</code> (<code>&quot;&quot;</code> is required). You can set,</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// .eleventy.js</span><br><br>module<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">eleventyConfig</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>  eleventyConfig<span class=\"token punctuation\">.</span><span class=\"token function\">addShortcode</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ref\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">url</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token keyword\">return</span> <span class=\"token string\">'&lt;sup>&lt;a href=\"'</span><br>      <span class=\"token operator\">+</span> url<br>      <span class=\"token operator\">+</span> <span class=\"token string\">'\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]&lt;/a>&lt;/sup>'</span><span class=\"token punctuation\">;</span><br>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre>\n<h2 id=\"search\">Search <a class=\"direct-link\" href=\"#search\">#</a></h2>\n<p>For me, the best choice for search feature in 11ty is using <a href=\"http://elasticlunr.com/\">Elasticlunr</a> with some customizations.</p>\n<div class=\"hsbox\"><div class=\"hs__title\">Why not others?</div><div class=\"hs__content\"><p>Based on the purpose of <strong>free</strong>, <strong>quick</strong>, <strong>full text</strong> search:</p>\n<ul>\n<li>We don't choose Google's <a href=\"https://programmablesearchengine.google.com/\">Programmable Search</a> because: it contains ads, not index as we want, difficult to customize with personal theme,...</li>\n<li>We don't choose paid options like <a href=\"https://www.algolia.com/\">Agolia</a> because the free option contains very few units. It's absolutely not enough for your need. In case you still want to use it with less consumption, read <a href=\"https://www.kizu.ru/algolia-search/\">this article</a>.</li>\n</ul>\n</div></div>\n<p>Because your site becomes bigger in future, you cannot index the whole text of your site (every time you build). <strong>My idea</strong> is to create a custom frontmatter tag called &quot;keywords&quot; which contains all of the important keywords used to determine the content of your posts. Of course, the cons is that you have to put the keywords manually!!</p>\n<p>Check <a href=\"https://github.com/dinhanhthi/eleventy-search-demo\">this repository</a>, I've pulled and modified from <a href=\"https://github.com/duncanmcdougall/eleventy-search-demo\">this one</a> (The author takes so long to check my pull request ^^). My customization supports:</p>\n<ul>\n<li>Index your customizable keywords.</li>\n<li>Fix UX bugs in the main repo.</li>\n<li>Highlight found keywords in the search result.</li>\n<li>Limit the max number of texts in the result (show around the found keywords).</li>\n<li>Adapt to the newest version of 11ty.</li>\n</ul>\n<h2 id=\"data-files\">Data files <a class=\"direct-link\" href=\"#data-files\">#</a></h2>\n<h3 id=\"local-data-files\">Local data files <a class=\"direct-link\" href=\"#local-data-files\">#</a></h3>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// .eleventy.js</span><br>module<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">eleventyConfig</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br><br>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><br>    dir<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>      input<span class=\"token operator\">:</span> <span class=\"token string\">\".\"</span><span class=\"token punctuation\">,</span><br>      includes<span class=\"token operator\">:</span> <span class=\"token string\">\"_includes\"</span><span class=\"token punctuation\">,</span><br>      data<span class=\"token operator\">:</span> <span class=\"token string\">\"_data\"</span><span class=\"token punctuation\">,</span><br>      output<span class=\"token operator\">:</span> <span class=\"token string\">\"_site\"</span><span class=\"token punctuation\">,</span><br>    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<p>You put all your data files (<code>.js</code> or <code>.json</code>) in <code>_data</code>, e.g.,</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// _data/dataUrls.json</span><br><span class=\"token punctuation\">[</span><br>  <span class=\"token punctuation\">{</span><br>    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"abc\"</span><span class=\"token punctuation\">,</span><br>    <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http://abc.com\"</span><br>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>  <span class=\"token punctuation\">{</span><br>    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"xyz\"</span><span class=\"token punctuation\">,</span><br>    <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http://xyz.com\"</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">]</span></code></pre>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- in a .njk file --></span><br>{% for item in dataUrls %}<br>  {{ item.name }}<br>  {{ item.url }}<br>{% endfor %}<br></code></pre>\n</div>\n<div class=\"col-2-equal\">\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// _data/cat_icon.json</span><br><span class=\"token punctuation\">{</span><br>\t<span class=\"token property\">\"Project-based Learning\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>\t\t<span class=\"token property\">\"svg\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/img/cats/project.svg\"</span><br>\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"MOOC\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>\t\t<span class=\"token property\">\"svg\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/img/cats/mooc.svg\"</span><br>\t<span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// .eleventy.js</span><br><span class=\"token keyword\">const</span> catIcon <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./_data/cat_icon.json\"</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\">// usage</span><br>catIcon<span class=\"token punctuation\">[</span>page<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>tags<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>svg<span class=\"token punctuation\">,</span><br><br><span class=\"token comment\">// .njk</span><br>catIcon<span class=\"token punctuation\">[</span>page<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>tags<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>svg<span class=\"token punctuation\">,</span></code></pre>\n</div>\n<p>For example, export a <strong>current year</strong> on site,</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// _data/helpers.js</span><br>module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><br>  <span class=\"token function\">currentYear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token keyword\">const</span> today <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>    <span class=\"token keyword\">return</span> today<span class=\"token punctuation\">.</span><span class=\"token function\">getFullYear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- in a .njk file --></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>{{ helpers.currentYear() }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><br></code></pre>\n</div>\n<h3 id=\"fetched-json-from-an-external-source\">Fetched JSON from an external source <a class=\"direct-link\" href=\"#fetched-json-from-an-external-source\">#</a></h3>\n<p>For example, <a href=\"/good-github-repositories/\">this post</a> displays a list of starred github repositories (by me) which is fetched from <code>https://api.github.com/users/dinhanhthi/starred</code>.</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// in .eleventy.js</span><br>module<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">eleventyConfig</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\televentyConfig<span class=\"token punctuation\">.</span><span class=\"token function\">addShortcode</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"list_repos\"</span><span class=\"token punctuation\">,</span> getLiList<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getRepoData</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">_url</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\t<span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>_url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">await</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token punctuation\">}</span><br>\t<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getLiList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><br>\t\t<span class=\"token keyword\">function</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span> <span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> a<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> b<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><br>\t\t\t\t<span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span><br>\t\t\t<span class=\"token punctuation\">}</span><br>\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> a<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> b<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><br>\t\t\t\t<span class=\"token keyword\">return</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span><br>\t\t\t<span class=\"token punctuation\">}</span><br>\t\t\t<span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span><br>\t\t<span class=\"token punctuation\">}</span><br>\t\t<span class=\"token comment\">// escape HTML tags</span><br>\t\t<span class=\"token keyword\">function</span> <span class=\"token function\">htmlEntities</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">str</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\t\t\t<span class=\"token keyword\">return</span> <span class=\"token function\">String</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">&amp;</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'&amp;amp;'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">&lt;</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'&amp;lt;'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">></span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'&amp;gt;'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\"</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'&amp;quot;'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t\t<span class=\"token punctuation\">}</span><br>\t\t<span class=\"token keyword\">var</span> repos <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span><br>\t\t<span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">getRepoData</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"https://api.github.com/users/dinhanhthi/starred?page=1&amp;per_page=10000\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t\tdata<span class=\"token punctuation\">.</span><span class=\"token function\">sort</span><span class=\"token punctuation\">(</span>compare<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">obj</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>\t\t\trepos <span class=\"token operator\">+=</span> <span class=\"token string\">'&lt;li>'</span><br>\t\t\t\t<span class=\"token operator\">+</span> <span class=\"token string\">'&lt;a href=\"'</span> <span class=\"token operator\">+</span> obj<span class=\"token punctuation\">.</span>html_url <span class=\"token operator\">+</span> <span class=\"token string\">'\" target=\"_blank\">'</span><span class=\"token operator\">+</span> obj<span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span><span class=\"token string\">'&lt;/a>'</span><br>\t\t\t\t<span class=\"token operator\">+</span> <span class=\"token string\">' by &lt;i>'</span> <span class=\"token operator\">+</span> obj<span class=\"token punctuation\">.</span>owner<span class=\"token punctuation\">.</span>login <span class=\"token operator\">+</span> <span class=\"token string\">'&lt;/i> — '</span> <span class=\"token operator\">+</span> <span class=\"token function\">htmlEntities</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span>description<span class=\"token punctuation\">)</span><br>\t\t\t\t<span class=\"token operator\">+</span> <span class=\"token string\">'&lt;/li>'</span><span class=\"token punctuation\">;</span><br>\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t\t<span class=\"token keyword\">return</span> <span class=\"token string\">'&lt;ol>'</span> <span class=\"token operator\">+</span> repos <span class=\"token operator\">+</span> <span class=\"token string\">'&lt;/ol>'</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// in post</span><br><span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> list_repos <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span><br></code></pre>\n<h2 id=\"working-style\">Working style <a class=\"direct-link\" href=\"#working-style\">#</a></h2>\n<h3 id=\"custom-environment\">Custom environment <a class=\"direct-link\" href=\"#custom-environment\">#</a></h3>\n<p>More info, read <a href=\"https://www.11ty.dev/docs/data-js/#example-exposing-environment-variables\">official doc</a>. For example, we only perform something differently on local.</p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span><br>  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token property\">\"local-build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ELEVENTY_ENV=local eleventy\"</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<p>An example of using in <code>.eleventy.js</code>,</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// .eleventy.js</span><br>module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><br>  environment<span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">ELEVENTY_ENV</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span><br><br>module<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">eleventyConfig</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">ELEVENTY_ENV</span> <span class=\"token operator\">==</span> <span class=\"token string\">\"local\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><br>    <span class=\"token comment\">// do something locally</span><br>  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token comment\">// do something on server</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<p>Or using in the template,</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// _data/myProject.js</span><br>module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><br>  environment<span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">ELEVENTY_ENV</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> <span class=\"token keyword\">if</span> myProject<span class=\"token punctuation\">.</span>environment <span class=\"token operator\">==</span> <span class=\"token string\">\"local\"</span> <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span><br>  <span class=\"token operator\">&lt;</span>style<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> css <span class=\"token operator\">|</span> cssmin <span class=\"token operator\">|</span> safe <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>style<span class=\"token operator\">></span><br><span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> <span class=\"token keyword\">else</span> <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span><br>  <span class=\"token operator\">&lt;</span>style<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> css <span class=\"token operator\">|</span> safe <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>style<span class=\"token operator\">></span><br><span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> endif <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span><br></code></pre>\n</div>\n<h3 id=\"incremental-build\">Incremental build <a class=\"direct-link\" href=\"#incremental-build\">#</a></h3>\n<p>It's impossible for the current version (<code>^0.11.0</code>)! (Follow <a href=\"https://github.com/orgs/11ty/projects/3#card-33546621\">the main project</a>).</p>\n<p><strong>Weakness of 11ty</strong>:</p>\n<p class=\"indent\"></p>\n<ol>\n<li>There is some change in files, 11ty rebuilds the whole site. It's painful if we work with markdown files and save them regularly!</li>\n<li>Cannot access the site while the building processing.</li>\n</ol>\n<p><strong>Idea</strong>:</p>\n<p class=\"indent\"></p>\n<ol>\n<li>Build manually, e.g. <code>npm run build-local</code> to <code>_site</code> folder.</li>\n<li>Copy all files in <code>_site</code> to a so-called folder <code>_live</code></li>\n<li>Run a custom server on folder <code>_site</code> (install <code>npm i http-server -g</code> first)</li>\n</ol>\n<p>An example of scripts,</p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span><br>  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token property\">\"local-build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ELEVENTY_ENV=local eleventy &amp;&amp; mkdir -p _live &amp;&amp; cp -Rf _site/* _live/\"</span><span class=\"token punctuation\">,</span><br>    <span class=\"token property\">\"local-serve\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"mkdir -p _live &amp;&amp; cp -Rf _site/* _live/ &amp;&amp; http-server _live\"</span><span class=\"token punctuation\">,</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<h2 id=\"nunjucks-things\">Nunjucks things <a class=\"direct-link\" href=\"#nunjucks-things\">#</a></h2>\n<p>Add a new item to a list,</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> <span class=\"token keyword\">set</span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> <span class=\"token keyword\">set</span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>a<span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span><br></code></pre>\n<hr>\n<p>Create a dictionary with nunjucks</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> <span class=\"token keyword\">set</span> items <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'a'</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span><br></code></pre>\n<hr>\n<p>Add a new key-value to a dictionary,</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// .eleventy.js -> create a new filter</span><br>eleventyConfig<span class=\"token punctuation\">.</span><span class=\"token function\">addFilter</span><span class=\"token punctuation\">(</span><span class=\"token string\">'setAttribute'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">dictionary<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">,</span> value</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\tdictionary<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span><br>\t<span class=\"token keyword\">return</span> dictionary<span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><br><span class=\"token comment\">// usage</span><br><span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> <span class=\"token keyword\">set</span> myDict <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"key1\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"key2\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"key3\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">}</span><span class=\"token operator\">%</span><span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> <span class=\"token keyword\">set</span> myDict <span class=\"token operator\">=</span> myDict<span class=\"token operator\">|</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'key2'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">123</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>myDict<span class=\"token punctuation\">[</span><span class=\"token string\">'key2'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token comment\">// pring \"123\" as expected</span><br></code></pre>\n<h2 id=\"errors\">Errors <a class=\"direct-link\" href=\"#errors\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># TypeError: Cannot read property 'type' of undefined</span><br><span class=\"token comment\"># => Class comes before ![]() of an image!</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># EISDIR: illegal operation on a directory</span><br><span class=\"token comment\"># Solution:</span><br><span class=\"token comment\"># Delete _site/ and rebuild!</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ENOTDIR: not a directory...</span><br><span class=\"token comment\"># Solution:</span><br><span class=\"token comment\"># Delete _site/ and rebuild!</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Invalid DateTime</span><br><span class=\"token comment\"># Just for new posts => try to commit (on branch \"dev\") before building!</span></code></pre>\n<h2 id=\"references\">References <a class=\"direct-link\" href=\"#references\">#</a></h2>\n<p class=\"indent\"></p>\n<ol>\n<li><a href=\"https://www.11ty.dev/\">Official website.</a></li>\n<li><a href=\"https://mozilla.github.io/nunjucks/templating.html\">Nunjucks Documentation</a></li>\n<li><a href=\"https://www.mattnortham.com/blog/2020/moving-from-wordpress-to-eleventy/\">Moving from WordPress to Eleventy</a></li>\n<li><a href=\"https://www.webstoemp.com/blog/from-jekyll-to-eleventy/\">From Jekyll to Eleventy - Webstoemp</a></li>\n<li><a href=\"https://bryanlrobinson.com/blog/creating-11ty-plugin-embed-svg-contents/\">Creating an 11ty Plugin - SVG Embed Tool - bryanlrobinson.com</a></li>\n</ol>\n",
      "date_published": "2020-10-15T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/nodejs-npm/",
      "url": "https://dinhanhthi.com/nodejs-npm/",
      "title": "NodeJS &amp; NPM",
      "content_html": "<h2 id=\"install-nodejs-%26-npm\">Install NodeJS &amp; NPM <a class=\"direct-link\" href=\"#install-nodejs-%26-npm\">#</a></h2>\n<h3 id=\"install-multiple-versions\">Install multiple versions <a class=\"direct-link\" href=\"#install-multiple-versions\">#</a></h3>\n<p>First, need to <a href=\"https://github.com/nvm-sh/nvm\">install nvm</a>.</p>\n<div class=\"warning\">\n<p>Below commands are mostly for Linux/MacOS users.</p>\n</div>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install a specific version</span><br>nvm <span class=\"token function\">install</span> <span class=\"token number\">12.13</span>.0</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install latest version</span><br>nvm <span class=\"token function\">install</span> node</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install the most recent lts release</span><br>nvm <span class=\"token function\">install</span> --lts</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># list all installed versions</span><br>nvm <span class=\"token function\">ls</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># set default version of node</span><br>nvm <span class=\"token builtin class-name\">alias</span> default <span class=\"token number\">12.13</span>.0</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># full list of available versions</span><br><span class=\"token comment\"># be careful, it's too long!!!</span><br>nvm ls-remote</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># switch between versions</span><br>nvm use <span class=\"token number\">12.13</span>.0<br><span class=\"token comment\"># or (more quickly)</span><br>nvm use v15</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># uninstall some version</span><br>nvm uninstall <span class=\"token number\">12.13</span>.0</code></pre>\n</div>\n<h3 id=\"single-version\">Single version <a class=\"direct-link\" href=\"#single-version\">#</a></h3>\n<p>👉 Install NodeJS and NPM: <a href=\"https://nodejs.org/en/download\">Windows &amp; MacOS</a>, <a href=\"https://github.com/nodesource/distributions/blob/master/README.md#installation-instructions\">Linux</a>.</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># UPDATE npm</span><br><span class=\"token function\">npm</span> cache clean -f <span class=\"token comment\"># clear the cache first</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g <span class=\"token function\">npm</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># UPDATE node</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g n<br><span class=\"token function\">sudo</span> n stable<br><span class=\"token comment\"># refresh the shell</span><br><span class=\"token builtin class-name\">source</span> ~/.zshrc <span class=\"token comment\"># if using zsh</span><br><span class=\"token builtin class-name\">source</span> ~/.bashrc <span class=\"token comment\"># is using bash</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Check version</span><br><span class=\"token function\">npm</span> -v<br>node -v</code></pre>\n</div>\n<h3 id=\"shorthand-cli-options\">Shorthand CLI options <a class=\"direct-link\" href=\"#shorthand-cli-options\">#</a></h3>\n<div class=\"two-columns-list\" markdown=\"1\">\n<ul>\n<li><code>i</code>: <code>install</code></li>\n<li><code>-D</code>: <code>--save-dev</code> (<code>devDependencies</code>)</li>\n<li><code>-P</code>: <code>--save-prod</code> (default), <code>--save</code></li>\n<li><code>-g</code>: <code>--global</code></li>\n<li><code>-f</code>: <code>--force</code></li>\n<li><code>ls</code>: <code>list</code></li>\n</ul>\n</div>\n<h2 id=\"install-package\">Install package <a class=\"direct-link\" href=\"#install-package\">#</a></h2>\n<p>👉 <a href=\"https://docs.npmjs.com/cli/install#:~:text=Install%20the%20dependencies%20in%20the,json%20.\">Official documentation</a>.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> package_name <span class=\"token comment\"># if it's in package.json, the indicated version will be installed</span><br>                         <span class=\"token comment\"># otherwise, the newsest version will be installed</span><br><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --global package_name <span class=\"token comment\"># global package</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install all package in package.json</span><br><span class=\"token function\">npm</span> <span class=\"token function\">install</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install + save to package.json</span><br><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save package_name <span class=\"token comment\"># save to package.json</span><br><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save-dev package_name <span class=\"token comment\"># save to package.json, in devDependencies</span><br><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --no-save package_name <span class=\"token comment\"># don't save</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install with version</span><br><span class=\"token function\">npm</span> <span class=\"token function\">install</span> express@4.16.1</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install a local package</span><br><span class=\"token function\">npm</span> <span class=\"token function\">install</span> /path/to/package</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># from github repository</span><br><span class=\"token function\">npm</span> i git+https://github.com/abc/xyz.git <span class=\"token comment\"># https</span><br><span class=\"token comment\"># or</span><br><span class=\"token function\">npm</span> i git+ssh://git@github.com/abc/xyz.git <span class=\"token comment\"># ssh</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># list all installed packages (current project only)</span><br><span class=\"token function\">ls</span> node_modules</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># list all local (installed) packages</span><br><span class=\"token function\">npm</span> list <span class=\"token comment\"># -g for globel # or use \"ls\"</span><br><span class=\"token function\">npm</span> list --depth<span class=\"token operator\">=</span><span class=\"token number\">0</span> <span class=\"token comment\"># without dependencies</span><br><br><span class=\"token comment\"># Check the current version of a (installed) package</span><br><span class=\"token function\">npm</span> list package_name <span class=\"token comment\"># with \"-g\" for global</span><br><br><span class=\"token comment\"># Check the latest (not current) version of a package</span><br><span class=\"token function\">npm</span> view package_name version</code></pre>\n<h2 id=\"update-package\">Update package <a class=\"direct-link\" href=\"#update-package\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># which global packages need to be updated?</span><br><span class=\"token function\">npm</span> outdated -g --depth<span class=\"token operator\">=</span><span class=\"token number\">0</span><br><br><span class=\"token comment\"># update all global packages</span><br><span class=\"token function\">npm</span> update -g</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># update a package</span><br><span class=\"token function\">npm</span> update package_name <span class=\"token comment\"># -g for global</span></code></pre>\n</div>\n<h2 id=\"remove-package\">Remove package <a class=\"direct-link\" href=\"#remove-package\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> uninstall package</code></pre>\n<h2 id=\"run-scritps\">Run scritps <a class=\"direct-link\" href=\"#run-scritps\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Install first</span><br><span class=\"token function\">npm</span> i --save npm-run-all</code></pre>\n<div class=\"col-2-equal\">\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// Run sequentially,</span><br><span class=\"token comment\">// package.json</span><br><span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>\t<span class=\"token property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"run-s prod:*\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// \"run-s\" = \"npm-run-all -s\"</span><br>\t<span class=\"token property\">\"prod:eleventy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"eleventy\"</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"prod:parcel\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"parcel build ./ -o ./\"</span><span class=\"token punctuation\">,</span><br><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// Run parallely,</span><br><span class=\"token comment\">// package.json</span><br><span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>\t<span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm-run-all --parallel dev:*\"</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"dev:eleventy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"eleventy --serve\"</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"dev:parcel\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"parcel watch ./ -o ./\"</span><span class=\"token punctuation\">,</span><br><span class=\"token punctuation\">}</span></code></pre>\n</div>\n",
      "date_published": "2020-10-15T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/docker-wsl2-windows/",
      "url": "https://dinhanhthi.com/docker-wsl2-windows/",
      "title": "WSL 2 on Windows",
      "content_html": "<h2 id=\"installation\">Installation <a class=\"direct-link\" href=\"#installation\">#</a></h2>\n<p>👉 Ref: <a href=\"https://docs.microsoft.com/en-us/windows/wsl/install-win10\">Main tutorial from Microsoft</a>.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Eanble Windows Subsystem for Linux</span><br><span class=\"token comment\"># PowerShell as Admin</span><br>dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart<br><br><span class=\"token comment\"># Enable Virtual Machine Platform (for WSL2)</span><br>dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart<br><br><span class=\"token comment\"># restart required</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Download and install WSL2 Linux kernel update package for x64 machines</span><br>https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Set WSL2 as default version</span><br><span class=\"token comment\"># PowerShell as Admin</span><br>wsl --set-default-version <span class=\"token number\">2</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Go to Windows Store</span><br><span class=\"token comment\"># Choose a Linux Distro and install it</span><br><br><span class=\"token comment\"># After installing, run Ubuntu app from Start menu</span><br><span class=\"token comment\"># Follow the instruction on screen</span><br><br><span class=\"token comment\"># Update system</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update<br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> upgrade <span class=\"token comment\"># be careful, it takes time!</span><br><br><span class=\"token comment\"># Install dependencies (it takes time)</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> git-core <span class=\"token function\">curl</span> <span class=\"token function\">wget</span> fontconfig zlib1g-dev build-essential libssl-dev libreadline-dev libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt1-dev libcurl4-openssl-dev software-properties-common libffi-dev</code></pre>\n<p>👉 Note: <a href=\"/linux-tips/\">Linux</a><br>\n👉 Note: <a href=\"/fresh-installation-ubuntu/\">Fresh Ubuntu / Pop!_OS Installation</a><br>\n👉 Note: <a href=\"/bash-command-line/\">Bash</a></p>\n<h2 id=\"location\">Location <a class=\"direct-link\" href=\"#location\">#</a></h2>\n<ul>\n<li>The <code>C</code> drive is located in <code>/mnt/c/</code>.</li>\n<li>The Download folder is located in <code>/mnt/c/Users/dinha/Downloads/</code>.</li>\n<li>Open current folder (in WSL2) with Windows Explorer: <code>explorer.exe .</code>.</li>\n<li>If you wanna create a drive (eg. <code>Z</code>): click on Linux icon in Explorer &gt; Right click on Ubuntu folder &gt; &quot;Map network drive..&quot;</li>\n</ul>\n<h2 id=\"terminal%3F\">Terminal? <a class=\"direct-link\" href=\"#terminal%3F\">#</a></h2>\n<p>I use <a href=\"https://cmder.net\">cmder</a>. Read more in <a href=\"/terminal#windows\">this note</a>.</p>\n<h2 id=\"docker-%2B-gpu-%2B-wsl\">Docker + GPU + WSL <a class=\"direct-link\" href=\"#docker-%2B-gpu-%2B-wsl\">#</a></h2>\n<ol>\n<li>Make WSL2 recognize GPU on Windows 10 👉 Check <a href=\"https://docs.nvidia.com/cuda/wsl-user-guide/index.html\">this tut</a> with some remarks:</li>\n<li>Microsoft's: <a href=\"https://docs.microsoft.com/en-us/windows/win32/direct3d12/gpu-tensorflow-wsl\">Enable TensorFlow with DirectML in WSL 2</a>. <strong>Note that</strong>, you have to use the version of python look like exactly in the guide (mine, it's 3.6), otherwise, it won't work!</li>\n</ol>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># check if gpu available with docker on wsl2</span><br>docker run --rm -it --gpus<span class=\"token operator\">=</span>all nvcr.io/nvidia/k8s/cuda-sample:nbody nbody -gpu -benchmark<br><br><span class=\"token comment\"># should see something like this</span><br><span class=\"token operator\">></span> Windowed mode<br><span class=\"token operator\">></span> Simulation data stored <span class=\"token keyword\">in</span> video memory<br><span class=\"token operator\">></span> Single precision floating point simulation<br><span class=\"token operator\">></span> <span class=\"token number\">1</span> Devices used <span class=\"token keyword\">for</span> simulation<br>GPU Device <span class=\"token number\">0</span>: <span class=\"token string\">\"GeForce GTX 1070\"</span> with compute capability <span class=\"token number\">6.1</span><br><br><span class=\"token operator\">></span> Compute <span class=\"token number\">6.1</span> CUDA device: <span class=\"token punctuation\">[</span>GeForce GTX <span class=\"token number\">1070</span><span class=\"token punctuation\">]</span><br><span class=\"token number\">15360</span> bodies, total <span class=\"token function\">time</span> <span class=\"token keyword\">for</span> <span class=\"token number\">10</span> iterations: <span class=\"token number\">11.949</span> ms<br><span class=\"token operator\">=</span> <span class=\"token number\">197.446</span> billion interactions per second<br><span class=\"token operator\">=</span> <span class=\"token number\">3948.925</span> single-precision GFLOP/s at <span class=\"token number\">20</span> flops per interaction</code></pre>\n<p>👉 Check some tests in <a href=\"https://docs.nvidia.com/cuda/wsl-user-guide/index.html#running-containers\">this section</a>.</p>\n<div class=\"hsbox\"><div class=\"hs__title\">Problems with Windows 10 Insider Preview</div><div class=\"hs__content\"><ul>\n<li>If you meet error &quot;<em>Your insider preview build settings need attention</em>&quot;, restart many times don't solve the problem. 👉 Go to Account setting, then choose &quot;Verify&quot;.</li>\n<li>If you cannot install Windows 10 Insider Preview in any case, just abandon, wait for some next regular update and try again. It work for me with no reason!</li>\n</ul>\n</div></div>\n<h2 id=\"jekyll-on-wsl2\">Jekyll on WSL2 <a class=\"direct-link\" href=\"#jekyll-on-wsl2\">#</a></h2>\n<p><strong>Remark</strong>: We should clone a new version from Github to the local (inside wsl) machine.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> -y ruby-full build-essential zlib1g-dev<br><span class=\"token function\">which</span> ruby<br><br><span class=\"token comment\"># Make sure we don't use gem on Windows system</span><br><span class=\"token function\">which</span> gem <span class=\"token comment\"># /usr/bin/ruby</span><br><br><span class=\"token builtin class-name\">source</span> ~/.zshrc<br><span class=\"token comment\"># restart Windows Terminal</span><br><br><span class=\"token function\">sudo</span> gem <span class=\"token function\">install</span> bundler<br><br><span class=\"token comment\"># cd to jekyll theme folder</span><br>bundle <span class=\"token function\">install</span><br><br><span class=\"token comment\"># continue as usual</span><br>bundle <span class=\"token builtin class-name\">exec</span> jekyll build <span class=\"token comment\"># 1st time after installing</span><br>bundle <span class=\"token builtin class-name\">exec</span> jekyll serve<br>bundle <span class=\"token builtin class-name\">exec</span> jekyll serve -I</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Troubleshoot: Could not find a JavaScript runtime</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> libv8-dev<br>bundle update<br><span class=\"token comment\"># install nodejs</span><br><span class=\"token function\">curl</span> -sL https://deb.nodesource.com/setup_14.x <span class=\"token operator\">|</span> <span class=\"token function\">bash</span> -<br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> -y nodejs</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Troubleshoot: wsl2 jekyll auto generation windows</span><br><span class=\"token comment\"># Clone a repo to wsl local, not clone by git on Windows!</span></code></pre>\n<h3 id=\"vscode-%2B-wsl2-%2B-jekyll\">VSCode + WSL2 + jekyll <a class=\"direct-link\" href=\"#vscode-%2B-wsl2-%2B-jekyll\">#</a></h3>\n<ol>\n<li>Install extension <a href=\"https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl\">Remote-WSL</a></li>\n<li>Connect via Debian instead! (<code>&gt;&lt;SWL: Debian</code>)</li>\n</ol>\n<h2 id=\"wsl-with-cmder\">WSL with cmder <a class=\"direct-link\" href=\"#wsl-with-cmder\">#</a></h2>\n<p><strong>Settings</strong> &gt; <strong>Startup</strong> &gt; <strong>Tasks</strong> &gt; <strong>+</strong></p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># for debian</span><br><span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span><span class=\"token string\">\"%ConEmuBaseDirShort%\\wsl\"</span><span class=\"token punctuation\">;</span>%<span class=\"token environment constant\">PATH</span>% <span class=\"token operator\">&amp;</span> wsl -d debian<br><span class=\"token comment\"># for ubuntu</span><br><span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span><span class=\"token string\">\"%ConEmuBaseDirShort%\\wsl\"</span><span class=\"token punctuation\">;</span>%<span class=\"token environment constant\">PATH</span>% <span class=\"token operator\">&amp;</span> wsl -d ubuntu</code></pre>\n<p>Choose font <em>Cascadia Code</em> in General &gt; Fonts.</p>\n",
      "date_published": "2020-10-14T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/deeplearning-ai-tensorflow-course-4/",
      "url": "https://dinhanhthi.com/deeplearning-ai-tensorflow-course-4/",
      "title": "TF 4 - Sequences, TS and Prediction",
      "content_html": "<p>This is my note for the <a href=\"https://www.coursera.org/learn/tensorflow-sequences-time-series-and-prediction/\">4th course</a> of <a href=\"https://www.coursera.org/specializations/tensorflow-in-practice\">TensorFlow in Practice Specialization</a> given by <a href=\"http://deeplearning.ai/\">deeplearning.ai</a> and taught by Laurence Moroney on Coursera.</p>\n<p>👉 Check the codes <a href=\"https://github.com/dinhanhthi/deeplearning.ai-courses/tree/master/TensorFlow%20in%20Practice\">on my Github</a>.<br>\n👉 Official <a href=\"https://github.com/lmoroney/dlaicourse\">notebooks</a> on Github.</p>\n<p>👉 Go to <a href=\"/deeplearning-ai-tensorflow-course-1\">course 1 - Intro to TensorFlow for AI, ML, DL</a>.<br>\n👉 Go to <a href=\"/deeplearning-ai-tensorflow-course-2\">course 2 - CNN in TensorFlow</a>.<br>\n👉 Go to <a href=\"/deeplearning-ai-tensorflow-course-3\">course 3 - NLP in Tensorflow</a>.</p>\n<p class=\"noindent\"></p>\n<ul>\n<li><strong>Sequence models</strong>: focus on <em>time series</em> (there are others) -- stock, weather,...</li>\n<li>At the end, we wanna model <strong>sunspot actitivity cycles</strong> which is important to NASA and other space agencies.</li>\n<li>Using RNN on time series data.</li>\n</ul>\n<h2 id=\"sequences-and-prediction\">Sequences and prediction <a class=\"direct-link\" href=\"#sequences-and-prediction\">#</a></h2>\n<h3 id=\"time-series\">Time Series <a class=\"direct-link\" href=\"#time-series\">#</a></h3>\n<p>📙 Notebook: <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-4/week-1/notebook_1_introduction_to_time_series.html\">introduction to time series</a>. + <a href=\"https://www.coursera.org/learn/tensorflow-sequences-time-series-and-prediction/lecture/Pzp5K/introduction-to-time-series\">explaining video</a>. =&gt; How to create synthetic time series data + plot them.</p>\n<p class=\"noindent\"></p>\n<ul>\n<li>Time series is everywhere: stock prices, weather focasts, historical trends (Moore's law),...</li>\n<li><strong>Univariate</strong> TS and <strong>Miltivariate</strong> TS.</li>\n<li>Type of things can we do with ML over TS:\n<ul>\n<li>Any thing has a time factor can be analysed using TS.</li>\n<li>Predicting a forecasting (eg. birth &amp; death in Japan -&gt; predict future for retirement, immigration, impacts...).</li>\n<li><strong>Imputation</strong>: project back into the past.</li>\n<li>Fill holes in the data.</li>\n<li>Nomalies detecction (website attacks).</li>\n<li>Spot patterns (eg. speed recognition).</li>\n</ul>\n</li>\n<li>Common patterns in TS:\n<ul>\n<li>\n<p><strong>Trend</strong>: a specific direcion that they're moving in.</p>\n<p><img src=\"/img/post/mooc/tf/trend.png\" alt=\"Trend\" class=\"img-50\"></p>\n</li>\n<li>\n<p><strong>Seasonality</strong>: patterns repeat at predictable intervals (eg. active users for a website).</p>\n<p><img src=\"/img/post/mooc/tf/seasonality.png\" alt=\"seasonality\" class=\"img-100\"></p>\n</li>\n<li>\n<p>Combinition of both <strong>trend</strong> and <strong>seasonality</strong>.</p>\n<p><img src=\"/img/post/mooc/tf/trend_seasonality.png\" alt=\"trend+seasonality\" class=\"img-50\"></p>\n</li>\n<li>\n<p><strong>Stationary</strong> TS.</p>\n<p><img src=\"/img/post/mooc/tf/stationality.png\" alt=\"stationality\" class=\"img-50\"></p>\n</li>\n<li>\n<p><strong>Autocorrelated</strong> TS: a time series is linearly related to a <em>lagged</em> version of itself.. There is no trend, no seasonality.</p>\n<p><img src=\"/img/post/mooc/tf/autocorrelation.png\" alt=\"autocorrelation\" class=\"img-60\"></p>\n</li>\n<li>\n<p><strong>Multiple auto correlation</strong>.</p>\n<p><img src=\"/img/post/mooc/tf/multiple_autocorrelation.png\" alt=\"multiple_autocorrelation\" class=\"img-60\"></p>\n</li>\n<li>\n<p>May be <strong>trend</strong> + <strong>seasonality</strong> + <strong>autorrelation</strong> + <strong>noise</strong>.</p>\n<p><img src=\"/img/post/mooc/tf/trend_seasonality_autocorrelation_noise.png\" alt=\"trend_seasonality_autocorrelation_noise\" class=\"img-60\"></p>\n</li>\n<li>\n<p><strong>Non-stationary</strong> TS:</p>\n<p><img src=\"/img/post/mooc/tf/non_stationary.png\" alt=\"non_stationary\" class=\"img-60\"><br>\n<em>In this case, we base just on the later data to predict the future (not on the whole data).</em></p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"train-%2F-validation-%2F-test\">Train / Validation / Test <a class=\"direct-link\" href=\"#train-%2F-validation-%2F-test\">#</a></h3>\n<ul>\n<li>\n<p><strong>Fixed partitioning</strong> (this course focuses on) =  splitting TS data into <strong>training period</strong>, <strong>validation period</strong> and <strong>test period</strong>.</p>\n<ul>\n<li>\n<p>If TS is seasonal, we want each period contains the whole number of seasons.</p>\n<p><img src=\"/img/post/mooc/tf/fixed_partitioning.png\" alt=\"Fixed partitioning\" class=\"img-70\"></p>\n</li>\n</ul>\n</li>\n<li>\n<p>We can split + train + test to get a model and then <strong>re-train</strong> with the data <strong>containing also the test period</strong> so that the model is optimized! In that case, the test set comes from the future.</p>\n<p><img src=\"/img/post/mooc/tf/fixed_partitioning_future_test.png\" alt=\"Fixed partitioning with test period comes from the future\" class=\"img-70\"></p>\n</li>\n<li>\n<p><strong>Roll-forward partitioning</strong>: we start with a short training period and we gradually increase it (1 day at a time or 1 week at a time). At each iteration, we train the model on training period, use it to focast the following day/week in the validation period. = Fixed partitioning in a number of times!</p>\n<p><img src=\"/img/post/mooc/tf/roll_forward_partitioning.png\" alt=\"Roll-forward partitioning\" class=\"img-70\"></p>\n</li>\n</ul>\n<h3 id=\"metrics\">Metrics <a class=\"direct-link\" href=\"#metrics\">#</a></h3>\n<p>For evaluating models:</p>\n<pre class=\"language-python\"><code class=\"language-python\">errors <span class=\"token operator\">=</span> forecasts <span class=\"token operator\">-</span> actual<br><br><span class=\"token comment\"># Mean squared error (square to get rid of negative values)</span><br><span class=\"token comment\"># Eg. Used if large errors are potentially dangerous</span><br>mse <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>square<span class=\"token punctuation\">(</span>errors<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\"># Get back to the same scale to error</span><br>rmse <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>sqrt<span class=\"token punctuation\">(</span>mse<span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># Mean absolute error (his favorite)</span><br><span class=\"token comment\"># this doesn't penalize large errs as much as mse does,</span><br><span class=\"token comment\"># used if loss is proportional to the size of err</span><br>mae <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span><span class=\"token builtin\">abs</span><span class=\"token punctuation\">(</span>errors<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># Mean abs percentage err</span><br><span class=\"token comment\"># idea of the size of err compared to the values</span><br>mape <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span><span class=\"token builtin\">abs</span><span class=\"token punctuation\">(</span>errors <span class=\"token operator\">/</span> x_valid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># MAE with TF</span><br>keras<span class=\"token punctuation\">.</span>metrics<span class=\"token punctuation\">.</span>mean_absolute_error<span class=\"token punctuation\">(</span>x_valid<span class=\"token punctuation\">,</span> naive_forecast<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>numpy<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"moving-average-and-differencing\">Moving average and differencing <a class=\"direct-link\" href=\"#moving-average-and-differencing\">#</a></h3>\n<p>📙 Notebook: <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-4/week-1/notebook_2_forecasting.html\">Forecasting</a>. + <a href=\"https://www.coursera.org/learn/tensorflow-sequences-time-series-and-prediction/lecture/KVWrR/forecasting\">explaining video</a>.</p>\n<p><strong>Moving average</strong>: a simple forecasting method. Calculate the average of blue lines within a fixed &quot;averaging windows&quot;.</p>\n<ul>\n<li>This can eliminate noises and doesn't anticipate trend or seasonality.</li>\n<li>Depend on the &quot;averaging window&quot;, it can give worse result than naive forecast.</li>\n</ul>\n<p><img src=\"/img/post/mooc/tf/moving_average.png\" alt=\"Moving average\" class=\"img-70\"><br>\n<em>Take the average on each yellow window. MAE=7.14 (optimal is 4).</em></p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">moving_average_forecast</span><span class=\"token punctuation\">(</span>series<span class=\"token punctuation\">,</span> window_size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token triple-quoted-string string\">\"\"\"Forecasts the mean of the last few values.<br>        If window_size=1, then this is equivalent to naive forecast\"\"\"</span><br>    forecast <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><br>    <span class=\"token keyword\">for</span> time <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>series<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> window_size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    forecast<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>series<span class=\"token punctuation\">[</span>time<span class=\"token punctuation\">:</span>time <span class=\"token operator\">+</span> window_size<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">return</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span>forecast<span class=\"token punctuation\">)</span></code></pre>\n<p><strong>Differencing</strong>: remove the trend and seasonality from the TS. We study on the differences between points and their previous neighbor in period.</p>\n<p><img src=\"/img/post/mooc/tf/moving_avg_on_differenced_ts.jpg\" alt=\"Moving average on differenced time series\" class=\"img-100\"><br>\n<em>Left image: we find the differencing of original values, then we find the average (orange line). Right image: restore the trend and seasonality. MAE=5.8 (optimal is 4).</em></p>\n<p>Above method still get the noises (because we add the differencing to the previous noise). If we remove past noise using moving average on that.</p>\n<p><img src=\"/img/post/mooc/tf/smoothing_both_past_present_values.png\" alt=\"Smoothing both past and present values\" class=\"img-70\"><br>\n<em>Smoothing both past and present values. MAE=4.5 (optimal is 4).</em></p>\n<p>Keep in mind before using Deep Learning, <mark>sometimes simple approaches just work fine!</mark></p>\n<h2 id=\"deep-nn-for-time-series\">Deep NN for Time Series <a class=\"direct-link\" href=\"#deep-nn-for-time-series\">#</a></h2>\n<h3 id=\"preparing-features-and-labels\">Preparing features and labels <a class=\"direct-link\" href=\"#preparing-features-and-labels\">#</a></h3>\n<ul>\n<li>We need to split our TS data into features and labels so that we can use them in ML algos.</li>\n<li>In this case: features=#values in TS, label=next_value.\n<ul>\n<li>Feature: window size and train to predict next value.</li>\n<li>Ex: 30 days of values as features and next value as label.</li>\n<li>Overtime, train ML to match 30 features to match a single label.</li>\n</ul>\n</li>\n</ul>\n<p>📙 Notebook: <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-4/week-2/notebook_1_preparing_features_and_labels.html\">Preparing features and labels</a>.<br>\n👉 <a href=\"https://www.coursera.org/learn/tensorflow-sequences-time-series-and-prediction/lecture/TYErD/preparing-features-and-labels\">Video explains how to split to features and labels from dataset</a>.</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">windowed_dataset</span><span class=\"token punctuation\">(</span>series<span class=\"token punctuation\">,</span> window_size<span class=\"token punctuation\">,</span> batch_size<span class=\"token punctuation\">,</span> shuffle_buffer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    dataset <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>Dataset<span class=\"token punctuation\">.</span>from_tensor_slices<span class=\"token punctuation\">(</span>series<span class=\"token punctuation\">)</span><br>    dataset <span class=\"token operator\">=</span> dataset<span class=\"token punctuation\">.</span>window<span class=\"token punctuation\">(</span>window_size <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> shift<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> drop_remainder<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><br>    dataset <span class=\"token operator\">=</span> dataset<span class=\"token punctuation\">.</span>flat_map<span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> window<span class=\"token punctuation\">:</span> window<span class=\"token punctuation\">.</span>batch<span class=\"token punctuation\">(</span>window_size <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>    dataset <span class=\"token operator\">=</span> dataset<span class=\"token punctuation\">.</span>shuffle<span class=\"token punctuation\">(</span>shuffle_buffer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> window<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> window<span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>    dataset <span class=\"token operator\">=</span> dataset<span class=\"token punctuation\">.</span>batch<span class=\"token punctuation\">(</span>batch_size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>prefetch<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">return</span> dataset</code></pre>\n<div class=\"hsbox\"><div class=\"hs__title\">Explain the codes</div><div class=\"hs__content\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># create a very simple dataset</span><br>dataset <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>Dataset<span class=\"token punctuation\">.</span><span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><br>arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>val<span class=\"token punctuation\">.</span>numpy<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> val <span class=\"token keyword\">in</span> dataset<span class=\"token punctuation\">]</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">)</span><br><span class=\"token comment\"># [0, 1, 2, 3, 4, 5]</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># make equal (drop_remaninder) windows</span><br>dataset <span class=\"token operator\">=</span> dataset<span class=\"token punctuation\">.</span>window<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> shift<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> drop_remainder<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><br>dataset <span class=\"token operator\">=</span> dataset<span class=\"token punctuation\">.</span>flat_map<span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> window<span class=\"token punctuation\">:</span> window<span class=\"token punctuation\">.</span>batch<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>    <span class=\"token comment\"># instead of val.numpy for each val in each window</span><br><span class=\"token keyword\">for</span> window <span class=\"token keyword\">in</span> dataset<span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>numpy<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\"># [0 1 2 3 4]</span><br><span class=\"token comment\"># [1 2 3 4 5]</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># split the last value to be label</span><br>dataset <span class=\"token operator\">=</span> dataset<span class=\"token punctuation\">.</span><span class=\"token builtin\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> window<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> window<span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\"># [0 1 2 3] [4]</span><br><span class=\"token comment\"># [1 2 3 4] [5]</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># shuffle</span><br>dataset <span class=\"token operator\">=</span> dataset<span class=\"token punctuation\">.</span>shuffle<span class=\"token punctuation\">(</span>buffer_size<span class=\"token operator\">=</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\"># construct batch of 2</span><br>dataset <span class=\"token operator\">=</span> dataset<span class=\"token punctuation\">.</span>batch<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>prefetch<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\"># x =  [[1 2 3 4], [0 1 2 3]]</span><br><span class=\"token comment\"># y =  [[5], [4]]</span></code></pre>\n</div></div>\n<h2 id=\"sequence-bias\">Sequence bias <a class=\"direct-link\" href=\"#sequence-bias\">#</a></h2>\n<p>Sequence bias is when the order of things can impact the selection of things. <mark>It's ok to shuffle!</mark></p>\n<h2 id=\"feeding-windowed-datasets-into-nn\">Feeding windowed datasets into NN <a class=\"direct-link\" href=\"#feeding-windowed-datasets-into-nn\">#</a></h2>\n<p>📙 Notebook: <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-4/week-2/notebook_2_1layer_NN_linear_reg.html\">Single layer NN</a> + <a href=\"https://www.coursera.org/learn/tensorflow-sequences-time-series-and-prediction/lecture/YERBd/more-on-single-layer-neural-network\">video explains it</a>.</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Simple linear regression (1 layer NN)</span><br>dataset <span class=\"token operator\">=</span> windowed_dataset<span class=\"token punctuation\">(</span>x_train<span class=\"token punctuation\">,</span> window_size<span class=\"token punctuation\">,</span> batch_size<span class=\"token punctuation\">,</span> shuffle_buffer_size<span class=\"token punctuation\">)</span><br>l0 <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> input_shape<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>window_size<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br>model <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>models<span class=\"token punctuation\">.</span>Sequential<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>l0<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br>model<span class=\"token punctuation\">.</span><span class=\"token builtin\">compile</span><span class=\"token punctuation\">(</span>loss<span class=\"token operator\">=</span><span class=\"token string\">\"mse\"</span><span class=\"token punctuation\">,</span> optimizer<span class=\"token operator\">=</span>tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>optimizers<span class=\"token punctuation\">.</span>SGD<span class=\"token punctuation\">(</span>lr<span class=\"token operator\">=</span><span class=\"token number\">1e</span><span class=\"token operator\">-</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span> momentum<span class=\"token operator\">=</span><span class=\"token number\">0.9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>model<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>dataset<span class=\"token punctuation\">,</span>epochs<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span>verbose<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Layer weights {}\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>l0<span class=\"token punctuation\">.</span>get_weights<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><br>forecast <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><br><br><span class=\"token keyword\">for</span> time <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>series<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> window_size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    forecast<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>model<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span>series<span class=\"token punctuation\">[</span>time<span class=\"token punctuation\">:</span>time <span class=\"token operator\">+</span> window_size<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>np<span class=\"token punctuation\">.</span>newaxis<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>    <span class=\"token comment\"># np.newaxis: reshape X to input dimension that used by the model</span><br><br>forecast <span class=\"token operator\">=</span> forecast<span class=\"token punctuation\">[</span>split_time<span class=\"token operator\">-</span>window_size<span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span><br>results <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span>forecast<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span></code></pre>\n<p>📙 Notebook: <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-4/week-2/notebook_3_DNN_TS.html\">DNN with TS</a> + <a href=\"https://www.coursera.org/learn/tensorflow-sequences-time-series-and-prediction/lecture/HecKT/deep-neural-network-training-tuning-and-prediction\">video explains it</a>.</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># A way to choose an optimal learning rate</span><br>lr_schedule <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>callbacks<span class=\"token punctuation\">.</span>LearningRateScheduler<span class=\"token punctuation\">(</span><br>    <span class=\"token keyword\">lambda</span> epoch<span class=\"token punctuation\">:</span> <span class=\"token number\">1e</span><span class=\"token operator\">-</span><span class=\"token number\">8</span> <span class=\"token operator\">*</span> <span class=\"token number\">10</span><span class=\"token operator\">**</span><span class=\"token punctuation\">(</span>epoch <span class=\"token operator\">/</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>optimizer <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>optimizers<span class=\"token punctuation\">.</span>SGD<span class=\"token punctuation\">(</span>lr<span class=\"token operator\">=</span><span class=\"token number\">1e</span><span class=\"token operator\">-</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span> momentum<span class=\"token operator\">=</span><span class=\"token number\">0.9</span><span class=\"token punctuation\">)</span><br>model<span class=\"token punctuation\">.</span><span class=\"token builtin\">compile</span><span class=\"token punctuation\">(</span>loss<span class=\"token operator\">=</span><span class=\"token string\">\"mse\"</span><span class=\"token punctuation\">,</span> optimizer<span class=\"token operator\">=</span>optimizer<span class=\"token punctuation\">)</span><br>history <span class=\"token operator\">=</span> model<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>dataset<span class=\"token punctuation\">,</span> epochs<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> callbacks<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>lr_schedule<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> verbose<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></code></pre>\n<div class=\"columns-2\">\n<pre class=\"language-python\"><code class=\"language-python\">lrs <span class=\"token operator\">=</span> <span class=\"token number\">1e</span><span class=\"token operator\">-</span><span class=\"token number\">8</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token number\">10</span> <span class=\"token operator\">**</span> <span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>arange<span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>semilogx<span class=\"token punctuation\">(</span>lrs<span class=\"token punctuation\">,</span> history<span class=\"token punctuation\">.</span>history<span class=\"token punctuation\">[</span><span class=\"token string\">\"loss\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>axis<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1e</span><span class=\"token operator\">-</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1e</span><span class=\"token operator\">-</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">300</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n<p><img src=\"/img/post/mooc/tf/c4_w2_lr.png\" alt=\"Loss w.r.t different learning rates.\" class=\"img-100 bg-white\"><br>\n<em>Loss w.r.t different learning rates. We choose the lowest one, around 8e-6.</em></p>\n</div>\n<p>📙 Notebook: <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-4/week-2/notebook_4_DNN_synthetic_data.html\">DNN with synthetic TS</a>.</p>\n<h2 id=\"rnn-for-ts\">RNN for TS <a class=\"direct-link\" href=\"#rnn-for-ts\">#</a></h2>\n<p class=\"noindent\"></p>\n<ul>\n<li>RRN is a NN containing Recurrent layer.</li>\n<li>The different from DNN is the input shape is <strong>3 dimensional</strong> (<code>batch_size x #time_step x dims_input_at each_timestep</code>).</li>\n<li>Re-use 1 cell multiple times in different layers (in this course).</li>\n</ul>\n<p><img src=\"/img/post/mooc/tf/rnn_ts_idea.png\" alt=\"Idea of how RNN works with TS data.\" class=\"img-100\"><br>\n<em>Idea of how RNN works with TS data. The current location can be impacted more by the nearby locations.</em></p>\n<h3 id=\"shape-of-input-to-rnn\">Shape of input to RNN <a class=\"direct-link\" href=\"#shape-of-input-to-rnn\">#</a></h3>\n<p>👉 <a href=\"https://www.coursera.org/learn/tensorflow-sequences-time-series-and-prediction/lecture/fP3ND/shape-of-the-inputs-to-the-rnn\">Video explains the dimensional and sequence-to-vector RNN</a>.</p>\n<p class=\"noindent\"></p>\n<ul>\n<li>Suppose: <em>window size</em> of 30 time steps, <em>batch size</em> of 4: Shape will be 4x30x1 and the <em>memory cell</em> input will be 4x1 matrix.</li>\n<li>If the memory cell comprises 3 neurons then the <em>output matrix</em> will be 4x3. Therefore, the full output of the layer will be 4x30x3.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>H</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">H_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> is just a copy of <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>Y</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">Y_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>.</li>\n<li>Below figure: input and also output a sequence.</li>\n</ul>\n<p><img src=\"/img/post/mooc/tf/rnn_ts_dim.png\" alt=\"Dimension of input to RNN.\" class=\"img-100\"><br>\n<em>Dimension of input to RNN.</em></p>\n<h3 id=\"sequence-to-vector-rnn\">Sequence to vector RNN <a class=\"direct-link\" href=\"#sequence-to-vector-rnn\">#</a></h3>\n<p class=\"noindent\"></p>\n<ul>\n<li>Sometimes, we want only input a sequence but not output. This called <strong>sequence-to-vector RNN</strong>. I.E., <mark>ignore all of the outputs except the last one!</mark>. In <code>tf.keras</code>, it's default setting!</li>\n</ul>\n<p><img src=\"/img/post/mooc/tf/rnn_ts_sequence_to_vector.png\" alt=\"Sequence to vector RNN.\" class=\"img-100\"><br>\n<em>Sequence to vector RNN.</em></p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Check the figure below as an illustration</span><br>model <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>models<span class=\"token punctuation\">.</span>Sequential<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><br>tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>SimpleRNN<span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span> return_sequences<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> input_shape<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    <span class=\"token comment\"># input_shape:</span><br>    <span class=\"token comment\">#   TF assumes that 1st dim is batch size -> any size at all -> no need to define</span><br>    <span class=\"token comment\">#   None -> number of time steps, None means RNN can handle sequence of any length</span><br>    <span class=\"token comment\">#   1 -> univariate TS</span><br>tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>SimpleRNN<span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    <span class=\"token comment\"># if there is `return_sequences=True` -> sequence-to-sequence RNN</span><br>tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n<p><img src=\"/img/post/mooc/tf/rnn_ts_illustraction_with_keras.png\" alt=\"Illustration with keras.\" class=\"img-80\"><br>\n<em>Illustration with keras.</em></p>\n<h3 id=\"lambda-layer\">Lambda layer <a class=\"direct-link\" href=\"#lambda-layer\">#</a></h3>\n<p>👉 <a href=\"https://www.coursera.org/learn/tensorflow-sequences-time-series-and-prediction/lecture/I0K6b/lambda-layers\">Video explains the use of lambda layer in RNN.</a>.</p>\n<pre class=\"language-python\"><code class=\"language-python\">model <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>models<span class=\"token punctuation\">.</span>Sequential<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Lambda<span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> tf<span class=\"token punctuation\">.</span>expand_dims<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> axis<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># expand to 1 dim (from 2) so that we have 3 dims: batch size x #timesteps x series dim</span><br>                        input_shape<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># can use any size of sequences</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>SimpleRNN<span class=\"token punctuation\">(</span><span class=\"token number\">40</span><span class=\"token punctuation\">,</span> return_sequences<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>SimpleRNN<span class=\"token punctuation\">(</span><span class=\"token number\">40</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Lambda<span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> x <span class=\"token operator\">*</span> <span class=\"token number\">100.0</span><span class=\"token punctuation\">)</span><br>        <span class=\"token comment\"># default activation in RNN is tanh -> (-1, 1) -> scale to -100, 100</span><br><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"simple-rnn\">Simple RNN <a class=\"direct-link\" href=\"#simple-rnn\">#</a></h3>\n<p class=\"noindent\"></p>\n<ul>\n<li>Loss function <strong>Huber</strong> (<a href=\"https://en.wikipedia.org/wiki/Huber_loss\">wiki</a>): less sensitive to outliers. =&gt; we use this because our data in this case get a little bit noisy!</li>\n</ul>\n<p>📙 Notebook: <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-4/week-3/notebook_1_simple_RNN_with_TS.html\">Simple RNN with a TS data</a> + <a href=\"https://www.coursera.org/learn/tensorflow-sequences-time-series-and-prediction/lecture/5W1Rw/rnn\">videos explains it</a>.</p>\n<h3 id=\"lstm\">LSTM <a class=\"direct-link\" href=\"#lstm\">#</a></h3>\n<p>📙 Notebook: <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-4/week-3/notebook_2_LSTM_with_TS.html\">LSTM with a TS data</a> + <a href=\"https://www.coursera.org/learn/tensorflow-sequences-time-series-and-prediction/lecture/IqcpX/more-on-lstm\">videos explains it</a>.</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># clear internal variables</span><br>tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>backend<span class=\"token punctuation\">.</span>clear_session<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>dataset <span class=\"token operator\">=</span> windowed_dataset<span class=\"token punctuation\">(</span>x_train<span class=\"token punctuation\">,</span> window_size<span class=\"token punctuation\">,</span> batch_size<span class=\"token punctuation\">,</span> shuffle_buffer_size<span class=\"token punctuation\">)</span><br><br>model <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>models<span class=\"token punctuation\">.</span>Sequential<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Lambda<span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> tf<span class=\"token punctuation\">.</span>expand_dims<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> axis<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>                        input_shape<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    <span class=\"token comment\"># LSTM here</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Bidirectional<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>LSTM<span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">,</span> return_sequences<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Bidirectional<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>LSTM<span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">,</span> return_sequences<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Bidirectional<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>LSTM<span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    <span class=\"token comment\">#</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Lambda<span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> x <span class=\"token operator\">*</span> <span class=\"token number\">100.0</span><span class=\"token punctuation\">)</span><br><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n<p>📙 Notebook: <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-4/week-3/notebook_3_LSTM_synthetic_data.html\">LSTM with synthetic TS</a>.</p>\n<h2 id=\"real-world-time-series-data\">Real-world time series data <a class=\"direct-link\" href=\"#real-world-time-series-data\">#</a></h2>\n<p class=\"noindent\"></p>\n<ul>\n<li>We are going to predict the <strong>sunspot actitivity cycles</strong> (<a href=\"https://www.kaggle.com/robervalt/sunspots\">download dataset</a>).</li>\n<li>Combine CNN + LSTM.</li>\n</ul>\n<p>👉 Andrew's <a href=\"https://www.youtube.com/watch?v=4qJaSmvhxi8\">video on Optimization Algo: Mini-batch gradient descent</a>.<br>\n📙 Notebook: <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-4/week-4/notebook_1_sunspot_cnn_lstm.html\">Sunspot dataset with CNN+LSTM</a>. + <a href=\"https://www.coursera.org/learn/tensorflow-sequences-time-series-and-prediction/lecture/zAaeD/combining-our-tools-for-analysis\">video explains it</a>.<br>\n📙 Notebook: <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-4/week-4/notebook_2_sunspot_DNN_only.html\">Sunspot dataset with DNN only</a> + <a href=\"https://www.coursera.org/learn/tensorflow-sequences-time-series-and-prediction/lecture/EPaeW/sunspots\">explaining video</a>.<br>\n👉 <a href=\"https://www.coursera.org/learn/tensorflow-sequences-time-series-and-prediction/lecture/LYbcx/train-and-tune-the-model\">Video explains train &amp; tune the model</a> (how to choose suitable values for sizes)</p>\n",
      "date_published": "2020-10-13T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/deeplearning-ai-tensorflow-course-3/",
      "url": "https://dinhanhthi.com/deeplearning-ai-tensorflow-course-3/",
      "title": "TF 3 - NLP in TensorFlow",
      "content_html": "<p>This is my note for the <a href=\"https://www.coursera.org/learn/natural-language-processing-tensorflow\">3rd course</a> of <a href=\"https://www.coursera.org/specializations/tensorflow-in-practice\">TensorFlow in Practice Specialization</a> given by <a href=\"http://deeplearning.ai/\">deeplearning.ai</a> and taught by Laurence Moroney on Coursera.</p>\n<p>👉 Check the codes <a href=\"https://github.com/dinhanhthi/deeplearning.ai-courses/tree/master/TensorFlow%20in%20Practice\">on my Github</a>.<br>\n👉 Official <a href=\"https://github.com/lmoroney/dlaicourse\">notebooks</a> on Github.</p>\n<p>👉 Go to <a href=\"/deeplearning-ai-tensorflow-course-1\">course 1 - Intro to TensorFlow for AI, ML, DL</a>.<br>\n👉 Go to <a href=\"/deeplearning-ai-tensorflow-course-2\">course 2 - CNN in TensorFlow</a>.<br>\n👉 Go to <a href=\"/deeplearning-ai-tensorflow-course-4\">course 4 - Sequences, Time Series and Prediction</a>.</p>\n<h2 id=\"tokenizing-%2B-padding\">Tokenizing + padding <a class=\"direct-link\" href=\"#tokenizing-%2B-padding\">#</a></h2>\n<p>📙 Notebook: <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-3/week-1/notebook_1_tokenizer_basic_examples.html\">Tokenizer basic examples.</a><br>\n📙 Notebook: <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-3/week-1/notebook_2_sarcasm_detection.html\">Sarcasm detection</a>.</p>\n<p class=\"noindent\"></p>\n<ul>\n<li>A common simple character encoding is ASCII,</li>\n<li>We can encode each word as a number (token) -- <a href=\"https://www.tensorflow.org/api_docs/python/tf/keras/preprocessing/text/Tokenizer\"><code>Tokenizer</code></a>.</li>\n<li>Tokenize words &gt; build all the words to make a corpus &gt; turn your sentences into lists of values based on these tokens. &gt; manipulate these lists (make the same length, for example)</li>\n</ul>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> tensorflow<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>preprocessing<span class=\"token punctuation\">.</span>text <span class=\"token keyword\">import</span> Tokenizer<br><br>sentences <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><br>    <span class=\"token string\">'i love my dog'</span><span class=\"token punctuation\">,</span><br>    <span class=\"token string\">'I, love my cat'</span><span class=\"token punctuation\">,</span><br>    <span class=\"token string\">'You love my dog so much!'</span><br><span class=\"token punctuation\">]</span><br><br>tokenizer <span class=\"token operator\">=</span> Tokenizer<span class=\"token punctuation\">(</span>num_words <span class=\"token operator\">=</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> oov_token<span class=\"token operator\">=</span><span class=\"token string\">\"&lt;OOV>\"</span><span class=\"token punctuation\">)</span><br>            <span class=\"token comment\"># num_words: max of words to be tokenized &amp; pick</span><br>            <span class=\"token comment\">#   the most common 100 words.</span><br>            <span class=\"token comment\"># More words, more accuracy, more time to train</span><br>            <span class=\"token comment\"># oov_token: replace unseen words by \"&lt;OOV>\"</span><br>tokenizer<span class=\"token punctuation\">.</span>fit_on_texts<span class=\"token punctuation\">(</span>sentences<span class=\"token punctuation\">)</span> <span class=\"token comment\"># fix texts based on tokens</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># indexing words</span><br>word_index <span class=\"token operator\">=</span> tokenizer<span class=\"token punctuation\">.</span>word_index<br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>word_index<span class=\"token punctuation\">)</span><br><span class=\"token comment\"># {'&lt;OOV>': 1, 'love': 2, 'my': 3, 'i': 4, 'dog': 5, 'cat': 6, 'you': 7, 'so': 8, 'much': 9}</span><br><span class=\"token comment\"># \"!\", \",\", capital, ... are removed</span></code></pre>\n<p>👉 <a href=\"https://www.tensorflow.org/api_docs/python/tf/keras/preprocessing/text/Tokenizer\">tf.keras.preprocessing.text.Tokenizer</a></p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># encode sentences</span><br>sequences <span class=\"token operator\">=</span> tokenizer<span class=\"token punctuation\">.</span>texts_to_sequences<span class=\"token punctuation\">(</span>sentences<span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>sequences<span class=\"token punctuation\">)</span><br><span class=\"token comment\"># [[4, 2, 3, 5],</span><br><span class=\"token comment\">#  [4, 2, 3, 6],</span><br><span class=\"token comment\">#  [7, 2, 3, 5, 8, 9]]</span><br><span class=\"token comment\"># if a word is not in the word index, it will be lost in the text_to_sequences()</span></code></pre>\n<p>👉 <a href=\"https://www.tensorflow.org/api_docs/python/tf/keras/preprocessing/sequence/pad_sequences\">tf.keras.preprocessing.sequence.pad_sequences</a></p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># make encoded sentences equal</span><br><span class=\"token keyword\">from</span> tensorflow<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>preprocessing<span class=\"token punctuation\">.</span>sequence <span class=\"token keyword\">import</span> pad_sequences<br><br>padded <span class=\"token operator\">=</span> pad_sequences<span class=\"token punctuation\">(</span>sequences<span class=\"token punctuation\">,</span> value<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><br>                       maxlen<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> padding<span class=\"token operator\">=</span><span class=\"token string\">\"post\"</span><span class=\"token punctuation\">,</span> truncating<span class=\"token operator\">=</span><span class=\"token string\">\"post\"</span><span class=\"token punctuation\">)</span><br>         <span class=\"token comment\"># maxlen: max len of encoded sentence</span><br>         <span class=\"token comment\"># value: value to be filld (default 0)</span><br>         <span class=\"token comment\"># padding: add missing values at beginning or ending of sentence?</span><br>         <span class=\"token comment\"># truncating: longer than maxlen? cut at beginning or ending?</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>padded<span class=\"token punctuation\">)</span><br><span class=\"token comment\"># [[ 4  2  3  5 -1]</span><br><span class=\"token comment\">#  [ 4  2  3  6 -1]</span><br><span class=\"token comment\">#  [ 7  2  3  5  8]]</span></code></pre>\n<p>👉 <a href=\"https://rishabhmisra.github.io/publications/\">Sarcasm detection dataset.</a></p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># read json text</span><br><span class=\"token keyword\">import</span> json<br><span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/tmp/sarcasm.json\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'r'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span><br>    datastore <span class=\"token operator\">=</span> json<span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span><br><br>sentences <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><br>labels <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><br>urls <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><br><span class=\"token keyword\">for</span> item <span class=\"token keyword\">in</span> datastore<span class=\"token punctuation\">:</span><br>    sentences<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">[</span><span class=\"token string\">'headline'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br>    labels<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">[</span><span class=\"token string\">'is_sarcastic'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br>    urls<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">[</span><span class=\"token string\">'article_link'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"word-embeddings\">Word embeddings <a class=\"direct-link\" href=\"#word-embeddings\">#</a></h2>\n<p>👉 <a href=\"https://projector.tensorflow.org/\">Embedding projector - visualization of high-dimensional data</a><br>\n👉 <a href=\"http://ai.stanford.edu/~amaas/data/sentiment/\">Large Movie Review Dataset</a></p>\n<h3 id=\"imdb-review-dataset\">IMDB review dataset <a class=\"direct-link\" href=\"#imdb-review-dataset\">#</a></h3>\n<p>📙 Notebook: <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-3/week-2/notebook_1_IMDB_reviews.html\">Train IMDB review dataset</a>.<br>\n👉 <a href=\"https://www.coursera.org/lecture/natural-language-processing-tensorflow/notebook-for-lesson-1-Q1Ln5\">Video explain the code</a>.</p>\n<p class=\"noindent\"></p>\n<ul>\n<li><strong>Word embeddings</strong> = the idea in which words and associated words are <em>clustered as vectors</em> in a multi-dimensional space. That allows words with similar meaning to have a similar representation.</li>\n<li>The meaning of the words can come from labeling of the dataset.\n<ul>\n<li><em>Example</em>: &quot;dull&quot; and &quot;boring&quot; show up a lot in negative reviews <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> they have similar sentiments <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> they are close to each other in the sentence <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> thus their vectors will be similar <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> NN train + learn these vectors + associating them with the labels to come up with what's called in embedding.</li>\n</ul>\n</li>\n<li>The purpose of <em>embedding dimension</em> is the number of dimensions for the vector representing the word encoding.</li>\n</ul>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> tensorflow <span class=\"token keyword\">as</span> tf<br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>__version__<span class=\"token punctuation\">)</span> <span class=\"token comment\"># check version of tensorflow</span><br><br><span class=\"token comment\"># If you are using tf1, you need below code</span><br>tf<span class=\"token punctuation\">.</span>enable_eager_execution<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># IMDB reviews dataset</span><br><span class=\"token keyword\">import</span> tensorflow_datasets <span class=\"token keyword\">as</span> tfds<br>imdb<span class=\"token punctuation\">,</span> info <span class=\"token operator\">=</span> tfds<span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">(</span><span class=\"token string\">\"imdb_reviews\"</span><span class=\"token punctuation\">,</span> with_info<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> as_supervised<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><br><br>train_data<span class=\"token punctuation\">,</span> test_data <span class=\"token operator\">=</span> imdb<span class=\"token punctuation\">[</span><span class=\"token string\">'train'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> imdb<span class=\"token punctuation\">[</span><span class=\"token string\">'test'</span><span class=\"token punctuation\">]</span><br><br><span class=\"token keyword\">for</span> s<span class=\"token punctuation\">,</span>l <span class=\"token keyword\">in</span> train_data<span class=\"token punctuation\">:</span> <span class=\"token comment\"># \"s\" for sentences \"l\" for labels</span><br>    <span class=\"token comment\"># The values for \"s\" and \"l\" are tensors</span><br>    <span class=\"token comment\"># so we need to extracr their values</span><br>    training_sentences<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span>numpy<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>    training_labels<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">.</span>numpy<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Prepare for the NN</span><br>vocab_size <span class=\"token operator\">=</span> <span class=\"token number\">10000</span><br>embedding_dim <span class=\"token operator\">=</span> <span class=\"token number\">16</span> <span class=\"token comment\"># embedding to dim 16</span><br>max_length <span class=\"token operator\">=</span> <span class=\"token number\">120</span> <span class=\"token comment\"># of each sentence</span><br>trunc_type<span class=\"token operator\">=</span><span class=\"token string\">'post'</span> <span class=\"token comment\"># cut the last words</span><br>oov_tok <span class=\"token operator\">=</span> <span class=\"token string\">\"&lt;OOV>\"</span> <span class=\"token comment\"># replace not-encoded words by this</span><br><br><span class=\"token keyword\">from</span> tensorflow<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>preprocessing<span class=\"token punctuation\">.</span>text <span class=\"token keyword\">import</span> Tokenizer<br><span class=\"token keyword\">from</span> tensorflow<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>preprocessing<span class=\"token punctuation\">.</span>sequence <span class=\"token keyword\">import</span> pad_sequences<br><br>tokenizer <span class=\"token operator\">=</span> Tokenizer<span class=\"token punctuation\">(</span>num_words <span class=\"token operator\">=</span> vocab_size<span class=\"token punctuation\">,</span> oov_token<span class=\"token operator\">=</span>oov_tok<span class=\"token punctuation\">)</span><br>tokenizer<span class=\"token punctuation\">.</span>fit_on_texts<span class=\"token punctuation\">(</span>training_sentences<span class=\"token punctuation\">)</span><br>    <span class=\"token comment\"># encoding the words</span><br>word_index <span class=\"token operator\">=</span> tokenizer<span class=\"token punctuation\">.</span>word_index<br>    <span class=\"token comment\"># list of word index (built based on training set)</span><br>    <span class=\"token comment\"># there may be many oov_tok in test set</span><br>sequences <span class=\"token operator\">=</span> tokenizer<span class=\"token punctuation\">.</span>texts_to_sequences<span class=\"token punctuation\">(</span>training_sentences<span class=\"token punctuation\">)</span><br>    <span class=\"token comment\"># apply on sentences</span><br>padded <span class=\"token operator\">=</span> pad_sequences<span class=\"token punctuation\">(</span>sequences<span class=\"token punctuation\">,</span>maxlen<span class=\"token operator\">=</span>max_length<span class=\"token punctuation\">,</span> truncating<span class=\"token operator\">=</span>trunc_type<span class=\"token punctuation\">)</span><br>    <span class=\"token comment\"># padding the sentences</span><br><br><span class=\"token comment\"># apply to the test set</span><br>testing_sequences <span class=\"token operator\">=</span> tokenizer<span class=\"token punctuation\">.</span>texts_to_sequences<span class=\"token punctuation\">(</span>testing_sentences<span class=\"token punctuation\">)</span><br>testing_padded <span class=\"token operator\">=</span> pad_sequences<span class=\"token punctuation\">(</span>testing_sequences<span class=\"token punctuation\">,</span>maxlen<span class=\"token operator\">=</span>max_length<span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Simple NN</span><br>model <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>Sequential<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Embedding<span class=\"token punctuation\">(</span>vocab_size<span class=\"token punctuation\">,</span> embedding_dim<span class=\"token punctuation\">,</span> input_length<span class=\"token operator\">=</span>max_length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>                              <span class=\"token comment\"># The result of embedding will be a 2D array:</span><br>                              <span class=\"token comment\"># length of sentence x embedding_dim</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Flatten<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    <span class=\"token comment\"># Alternatively (a little diff on speed and accuracy):</span><br>    <span class=\"token comment\"># tf.keras.layers.GlobalAveragePooling1D()</span><br>    <span class=\"token comment\">#   average across the vectors to flatten it out</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'relu'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'sigmoid'</span><span class=\"token punctuation\">)</span><br><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br>model<span class=\"token punctuation\">.</span><span class=\"token builtin\">compile</span><span class=\"token punctuation\">(</span>loss<span class=\"token operator\">=</span><span class=\"token string\">'binary_crossentropy'</span><span class=\"token punctuation\">,</span>optimizer<span class=\"token operator\">=</span><span class=\"token string\">'adam'</span><span class=\"token punctuation\">,</span>metrics<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'accuracy'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br>model<span class=\"token punctuation\">.</span>summary<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Training</span><br>model<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>padded<span class=\"token punctuation\">,</span> training_labels_final<span class=\"token punctuation\">,</span> epochs<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> validation_data<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>testing_padded<span class=\"token punctuation\">,</span> testing_labels_final<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># the result</span><br>e <span class=\"token operator\">=</span> model<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># get the result of the embedding layers</span><br>weights <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span>get_weights<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>weights<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">)</span> <span class=\"token comment\"># shape: (vocab_size, embedding_dim)</span></code></pre>\n<p>If you wanna visualize the result (in 3D) with <a href=\"https://projector.tensorflow.org/\">Embedding projector</a>,</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> io<br><br>out_v <span class=\"token operator\">=</span> io<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'vecs.tsv'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'w'</span><span class=\"token punctuation\">,</span> encoding<span class=\"token operator\">=</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><br>out_m <span class=\"token operator\">=</span> io<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'meta.tsv'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'w'</span><span class=\"token punctuation\">,</span> encoding<span class=\"token operator\">=</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">for</span> word_num <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> vocab_size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>  word <span class=\"token operator\">=</span> reverse_word_index<span class=\"token punctuation\">[</span>word_num<span class=\"token punctuation\">]</span><br>  embeddings <span class=\"token operator\">=</span> weights<span class=\"token punctuation\">[</span>word_num<span class=\"token punctuation\">]</span><br>  out_m<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span>word <span class=\"token operator\">+</span> <span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">)</span><br>  out_v<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span><span class=\"token string\">'\\t'</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> embeddings<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">)</span><br>out_v<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>out_m<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br><br><span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span><br>  <span class=\"token keyword\">from</span> google<span class=\"token punctuation\">.</span>colab <span class=\"token keyword\">import</span> files<br><span class=\"token keyword\">except</span> ImportError<span class=\"token punctuation\">:</span><br>  <span class=\"token keyword\">pass</span><br><span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span><br>  files<span class=\"token punctuation\">.</span>download<span class=\"token punctuation\">(</span><span class=\"token string\">'vecs.tsv'</span><span class=\"token punctuation\">)</span><br>  files<span class=\"token punctuation\">.</span>download<span class=\"token punctuation\">(</span><span class=\"token string\">'meta.tsv'</span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"sarcasm-dataset\">Sarcasm dataset <a class=\"direct-link\" href=\"#sarcasm-dataset\">#</a></h3>\n<p>📙 Notebook: <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-3/week-2/notebook_2_sacarsm.html\">Train Sacarsm dataset</a>.</p>\n<ul>\n<li>In text data, it usually happens that the accuracy increase over the number of training but the loss increase sharply also. We can &quot;play&quot; with hyperparameter to see the effect.</li>\n</ul>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Run this to ensure TensorFlow 2.x is used</span><br><span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span><br>  <span class=\"token comment\"># %tensorflow_version only exists in Colab.</span><br>  <span class=\"token operator\">%</span>tensorflow_version <span class=\"token number\">2.</span>x<br><span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span><br>  <span class=\"token keyword\">pass</span></code></pre>\n<h2 id=\"pre-tokenized-datasets\">Pre-tokenized datasets <a class=\"direct-link\" href=\"#pre-tokenized-datasets\">#</a></h2>\n<p>👉 <a href=\"https://github.com/tensorflow/datasets/blob/master/docs/catalog/imdb_reviews.md\">datasets/imdb_reviews.md at master · tensorflow/datasets</a><br>\n👉 <a href=\"https://www.tensorflow.org/datasets/api_docs/python/tfds/features/text/SubwordTextEncoder\">tfds.features.text.SubwordTextEncoder  |  TensorFlow Datasets</a><br>\n📙 Notebook: <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-3/week-2/notebook_3_pre-tokenizer.html\">Pre-tokenizer example</a>.<br>\n👉 <a href=\"https://www.coursera.org/lecture/natural-language-processing-tensorflow/notebook-for-lesson-3-piQXt\">Video exaplain the codes</a>.</p>\n<ul>\n<li>There are someones who did the work (tokenization) for you.</li>\n<li>Try on IMDB dataset that has been pre-tokenized.</li>\n<li>The tokenization is done on <strong>subwords</strong>!</li>\n<li>The sequence of words can be just important as their existence.</li>\n</ul>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># load imdb dataset from tensorflow</span><br><span class=\"token keyword\">import</span> tensorflow_datasets <span class=\"token keyword\">as</span> tfds<br>imdb<span class=\"token punctuation\">,</span> info <span class=\"token operator\">=</span> tfds<span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">(</span><span class=\"token string\">\"imdb_reviews/subwords8k\"</span><span class=\"token punctuation\">,</span> with_info<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> as_supervised<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># extract train/test sets</span><br>train_data<span class=\"token punctuation\">,</span> test_data <span class=\"token operator\">=</span> imdb<span class=\"token punctuation\">[</span><span class=\"token string\">'train'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> imdb<span class=\"token punctuation\">[</span><span class=\"token string\">'test'</span><span class=\"token punctuation\">]</span><br><br><span class=\"token comment\"># take the tokernizer</span><br>tokenizer <span class=\"token operator\">=</span> info<span class=\"token punctuation\">.</span>features<span class=\"token punctuation\">[</span><span class=\"token string\">'text'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>encoder<br><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>tokenizer<span class=\"token punctuation\">.</span>subwords<span class=\"token punctuation\">)</span><br><span class=\"token comment\"># ['the_', ', ', '. ', 'a_', 'and_', 'of_', 'to_', 's_', 'is_',...</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\">sample_string <span class=\"token operator\">=</span> <span class=\"token string\">'TensorFlow, from basics to mastery'</span><br><br>tokenized_string <span class=\"token operator\">=</span> tokenizer<span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span>sample_string<span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'Tokenized string is {}'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>tokenized_string<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\"># Tokenized string is [6307, 2327, 4043, 2120, 2, 48, 4249, 4429, 7, 2652, 8050]</span><br><br>original_string <span class=\"token operator\">=</span> tokenizer<span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span>tokenized_string<span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'The original string: {}'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>original_string<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\"># The original string: TensorFlow, from basics to mastery</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># take a look on tokenized string</span><br><span class=\"token comment\"># case sensitive + punctuation maintained</span><br><span class=\"token keyword\">for</span> ts <span class=\"token keyword\">in</span> tokenized_string<span class=\"token punctuation\">:</span><br>  <span class=\"token keyword\">print</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'{} ----> {}'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>ts<span class=\"token punctuation\">,</span> tokenizer<span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>ts<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># 6307 ----> Ten</span><br><span class=\"token comment\"># 2327 ----> sor</span><br><span class=\"token comment\"># 4043 ----> Fl</span><br><span class=\"token comment\"># ...</span></code></pre>\n<ul>\n<li>The code run quite long (4 minutes each epoch if using GPU on colab) because there are a lot of hyperparameters and sub-words.</li>\n<li>Result: 50% acc &amp; loss is decreasing but very small.\n<ul>\n<li>Because we are using sub-words, not for-words -&gt; they (sub-words) are nonsensical. -&gt; they are only when we put them together in sequences -&gt; <strong>learning from sequences would be a great way forward</strong> -&gt; <strong>RNN</strong> (Recurrent Neural Networks)</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"sequence-models\">Sequence models <a class=\"direct-link\" href=\"#sequence-models\">#</a></h2>\n<ul>\n<li>The relative ordering, the sequence of words, matters for the meaning of the sentence .</li>\n<li>For NN to take into account for the <strong>ordering of the words</strong>: <strong>RNN</strong> (Recurrent Neural Networks), <strong>LSTM</strong> (Long short-term memory).</li>\n<li><strong>Why not RNN but LSTM ?</strong> With RNN, the context is preserved from timstamp to timestamp BUT that may get lost in longer sentences <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> LSTM gets better because it has cell state.</li>\n<li><strong>Example of using LSTM</strong>: &quot;<em>I grew up in Ireland, I went to school and at school, they made me learn how to speak...</em>&quot; <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> &quot;speak&quot; is the context and we go back to the beginning to catch &quot;Ireland&quot;, then the next word could be &quot;leanr how to speak <strong>Gaelic</strong>&quot;!</li>\n</ul>\n<h3 id=\"rnn-idea\">RNN idea <a class=\"direct-link\" href=\"#rnn-idea\">#</a></h3>\n<p>👉 <a href=\"https://www.notion.so/dinhanhthi/Sequence-models-by-deeplearning-ai-427774f7b31846fdb17ac09cd2353fbe\">Note of the course of sequence model</a>.</p>\n<p class=\"noindent\"></p>\n<ul>\n<li>The usual NN, something like &quot;f(data, labels)=rules&quot; cannot take into account of sequences.</li>\n<li><strong>An example of using sequences</strong>: Fibonacci sequence <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> the result of current function is the input of next function itself,...</li>\n</ul>\n<p><img src=\"/img/post/mooc/tf/rnn-basic-idea.png\" alt=\"RNN basic idea\" class=\"img-70 pop\"><br>\n<em>RNN basic idea (<a href=\"https://medium.com/@kangeugine/long-short-term-memory-lstm-concept-cb3283934359\">source</a>).</em></p>\n<h3 id=\"lstm-idea\">LSTM idea <a class=\"direct-link\" href=\"#lstm-idea\">#</a></h3>\n<p>👉 (Video) <a href=\"https://www.youtube.com/watch?v=8HyCNIVRbSU&amp;feature=emb_title\">Illustrated Guide to LSTM's and GRU's: A step by step explanation</a> &amp; <a href=\"https://towardsdatascience.com/illustrated-guide-to-lstms-and-gru-s-a-step-by-step-explanation-44e9eb85bf21\">its article</a>.</p>\n<p class=\"noindent\"></p>\n<ul>\n<li>Sometimes, the sequence context leads to lose information like the example of &quot;Ireland&quot; and &quot;Gaelic&quot; before.</li>\n<li>LSTM has an additional pipeline called <strong>Cell State</strong>. It can pass through the network to impact it + help to keep context from earlier tokens relevance.</li>\n</ul>\n<p><img src=\"/img/post/mooc/tf/lstm-basic-idea.png\" alt=\"LSTM basic idea\" class=\"img-75 pop\"><br>\n<em>LSTM basic idea (image from the course).</em></p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># SINGLE LAYER LSTM</span><br>model <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>Sequential<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Embedding<span class=\"token punctuation\">(</span>tokenizer<span class=\"token punctuation\">.</span>vocab_size<span class=\"token punctuation\">,</span> <span class=\"token number\">64</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Bidirectional<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>LSTM<span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>      <span class=\"token comment\"># 64: #oututs desired (but the result may be different)</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'relu'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'sigmoid'</span><span class=\"token punctuation\">)</span><br><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n<p>📙 Notebook: <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-3/week-3/notebook_1_IMDB_subwords_8K_with_single_layer_LSTM.html\">IMDB Subwords 8K with Single Layer LSTM</a></p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># MULTI PLAYER LSTM</span><br>model <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>Sequential<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Embedding<span class=\"token punctuation\">(</span>tokenizer<span class=\"token punctuation\">.</span>vocab_size<span class=\"token punctuation\">,</span> <span class=\"token number\">64</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Bidirectional<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>LSTM<span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">,</span> return_sequences<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>      <span class=\"token comment\"># return_sequences=True: required if we wanna feed LSTM into another one</span><br>      <span class=\"token comment\"># It ensures that the output of LSTM match the desired inputs of the next one</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Bidirectional<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>LSTM<span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'relu'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'sigmoid'</span><span class=\"token punctuation\">)</span><br><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n<p>📙 Notebook: <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-3/week-3/notebook_2_IMDB_subwords_8K_with_multi_layer_LSTM.html\">IMDB Subwords 8K with Multi Layer LSTM</a></p>\n<p><img src=\"/img/post/mooc/tf/1layer-vs-2layer-lstm.png\" alt=\"1layer vs 2 later LSTM acc\" class=\"img-90 pop\"><br>\n<em>1 layer vs 2 layer LSTM accuracy after 50 epochs (image from the course). 2 layer is better (smoother) which makes us more confident about the model. The validation acc is sticked to 80% because we used 8000 sub-words taken from training set, so there may be many tokens from the test set that would be out of vocabulary.</em></p>\n<h3 id=\"with-vs-without-lstm\">With vs without LSTM <a class=\"direct-link\" href=\"#with-vs-without-lstm\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># WITHOUT LSTM (like previous section)</span><br>model <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>Sequential<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Embedding<span class=\"token punctuation\">(</span>vocab_size<span class=\"token punctuation\">,</span> embedding_dim<span class=\"token punctuation\">,</span><br>                              input_length<span class=\"token operator\">=</span>max_length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    <span class=\"token comment\">#</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Flatten<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>GlobalmaxPooling1D<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    <span class=\"token comment\">#</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'relu'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'sigmoid'</span><span class=\"token punctuation\">)</span><br><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># WITH LSTM</span><br>model <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>Sequential<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Embedding<span class=\"token punctuation\">(</span>vocab_size<span class=\"token punctuation\">,</span> embedding_dim<span class=\"token punctuation\">,</span><br>                              input_length<span class=\"token operator\">=</span>max_length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    <span class=\"token comment\">#</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Bidirectional<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>LSTM<span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    <span class=\"token comment\">#</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'relu'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'sigmoid'</span><span class=\"token punctuation\">)</span><br><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n<p><img src=\"/img/post/mooc/tf/with-vs-without-lstm.png\" alt=\"With vs without LSTM\" class=\"img-90 pop\"><br>\n<em>With vs without LSTM (image from the course). With LSTM is really better but there is still overfitting here.</em></p>\n<h3 id=\"using-a-convnet\">Using a ConvNet <a class=\"direct-link\" href=\"#using-a-convnet\">#</a></h3>\n<p>👉 <a href=\"https://www.coursera.org/lecture/natural-language-processing-tensorflow/using-a-convolutional-network-fSE8o\">Video explains the dimension</a>.<br>\n📙 Notebook: <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-3/week-3/notebook_3_IMDB_subwords_8K_with_Conv.html\">IMDB Subwords 8K with 1D Convolutional Layer</a>.</p>\n<pre class=\"language-python\"><code class=\"language-python\">model <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>Sequential<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Embedding<span class=\"token punctuation\">(</span>tokenizer<span class=\"token punctuation\">.</span>vocab_size<span class=\"token punctuation\">,</span> <span class=\"token number\">64</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    <span class=\"token comment\">#</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Conv1D<span class=\"token punctuation\">(</span><span class=\"token number\">128</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'relu'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    <span class=\"token comment\">#</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>GlobalAveragePooling1D<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'relu'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'sigmoid'</span><span class=\"token punctuation\">)</span><br><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n<p><img src=\"/img/post/mooc/tf/using-conv-net.png\" alt=\"Using Convolution network.\" class=\"img-90 pop\"><br>\n<em>Using Convolution network. (image from the course). It's really better but there is overfitting there.</em></p>\n<h3 id=\"imdb-dataset\">IMDB dataset <a class=\"direct-link\" href=\"#imdb-dataset\">#</a></h3>\n<p>📙 Notebook: <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-3/week-3/notebook_4_IMDB_review_with_GRU.html\">IMDB Reviews with GRU (and optional LSTM and Conv1D)</a>.<br>\n👉 <a href=\"https://www.coursera.org/learn/natural-language-processing-tensorflow/lecture/NFvFd/going-back-to-the-imdb-dataset\">Video compares the results</a>.</p>\n<p>Try with 3 different choices:</p>\n<p class=\"indent\"></p>\n<ul>\n<li><strong>Simple NN</strong>: 5s/epoch, 170K params, nice acc, overfitting.</li>\n<li><strong>LSTM</strong>: 43s/epoch, 30K params, acc better, overfitting.</li>\n<li><strong>GRU</strong> (Gated Recurrent Unit layer, a different type of RNN): 20s/epoch, 169K params, very good acc, overfitting.</li>\n<li><strong>Conv1D</strong>: 6s/epoch, 171K params, good acc, overfitting.</li>\n</ul>\n<p><strong>Remark</strong>: <mark>With the texts, you'll probably get a bit more overfitting than you would have done with images.</mark> Because we have out of voca words in validation data.</p>\n<h2 id=\"sequence-models-and-literature\">Sequence models and literature <a class=\"direct-link\" href=\"#sequence-models-and-literature\">#</a></h2>\n<p>One application of sequence models: read text then <strong>generate another look-alike text</strong>.</p>\n<p>📙 <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-3/week-4/notebook_1_find_the_next_word_trained_from_a_song.html\">Notebook 1</a> &amp; <a href=\"https://www.coursera.org/learn/natural-language-processing-tensorflow/lecture/B80b0/notebook-for-lesson-1\">explaining video</a>.</p>\n<ul>\n<li>How they predict a new word in the notebook? -&gt; Check <a href=\"https://www.coursera.org/learn/natural-language-processing-tensorflow/lecture/LGBS2/predicting-a-word\">this video</a>.</li>\n</ul>\n<pre class=\"language-python\"><code class=\"language-python\">input_sequences <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><br><span class=\"token keyword\">for</span> line <span class=\"token keyword\">in</span> corpus<span class=\"token punctuation\">:</span><br>\t<span class=\"token comment\"># convert each sentence to list of numbers</span><br>\ttoken_list <span class=\"token operator\">=</span> tokenizer<span class=\"token punctuation\">.</span>texts_to_sequences<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>line<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><br>\t<span class=\"token comment\"># convert each list to n-gram sequence</span><br>\t<span class=\"token comment\"># eg. from [1,2,3,4,5]</span><br>\t<span class=\"token comment\"># \t\tto [1,2], [1,2,3], [1,2,3,4], [1,2,3,4,5]</span><br>\t<span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>token_list<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>\t\tn_gram_sequence <span class=\"token operator\">=</span> token_list<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span>i<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><br>\t\tinput_sequences<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>n_gram_sequence<span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># pad sequences to the maximum length of all sentences</span><br>max_sequence_len <span class=\"token operator\">=</span> <span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> input_sequences<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br>input_sequences <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span>pad_sequences<span class=\"token punctuation\">(</span>input_sequences<span class=\"token punctuation\">,</span> maxlen<span class=\"token operator\">=</span>max_sequence_len<span class=\"token punctuation\">,</span> padding<span class=\"token operator\">=</span><span class=\"token string\">'pre'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># create predictors and label</span><br><span class=\"token comment\"># [0,0,1,2] -> 2 is label</span><br><span class=\"token comment\"># [0,1,2,3] -> 3 is label</span><br><span class=\"token comment\"># [1,2,3,4] -> 4 is label</span><br>xs<span class=\"token punctuation\">,</span> labels <span class=\"token operator\">=</span> input_sequences<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">:</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>input_sequences<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><br><br><span class=\"token comment\"># one-hot encoding the labels (classification problem)</span><br>ys <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>utils<span class=\"token punctuation\">.</span>to_categorical<span class=\"token punctuation\">(</span>labels<span class=\"token punctuation\">,</span> num_classes<span class=\"token operator\">=</span>total_words<span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\">model <span class=\"token operator\">=</span> Sequential<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>model<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span>Embedding<span class=\"token punctuation\">(</span>total_words<span class=\"token punctuation\">,</span> <span class=\"token number\">64</span><span class=\"token punctuation\">,</span> input_length<span class=\"token operator\">=</span>max_sequence_len<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>model<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span>Bidirectional<span class=\"token punctuation\">(</span>LSTM<span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># take only 20 units (bi-direction) to train</span><br>model<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span>Dense<span class=\"token punctuation\">(</span>total_words<span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'softmax'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>model<span class=\"token punctuation\">.</span><span class=\"token builtin\">compile</span><span class=\"token punctuation\">(</span>loss<span class=\"token operator\">=</span><span class=\"token string\">'categorical_crossentropy'</span><span class=\"token punctuation\">,</span> optimizer<span class=\"token operator\">=</span><span class=\"token string\">'adam'</span><span class=\"token punctuation\">,</span> metrics<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'accuracy'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br>history <span class=\"token operator\">=</span> model<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>xs<span class=\"token punctuation\">,</span> ys<span class=\"token punctuation\">,</span> epochs<span class=\"token operator\">=</span><span class=\"token number\">500</span><span class=\"token punctuation\">,</span> verbose<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\">seed_text <span class=\"token operator\">=</span> <span class=\"token string\">\"Laurence went to dublin\"</span><br>next_words <span class=\"token operator\">=</span> <span class=\"token number\">100</span><br><br><span class=\"token keyword\">for</span> _ <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>next_words<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>\ttoken_list <span class=\"token operator\">=</span> tokenizer<span class=\"token punctuation\">.</span>texts_to_sequences<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>seed_text<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><br>\t<span class=\"token comment\"># \"went to dublin\" -> [134, 13, 59]</span><br>\ttoken_list <span class=\"token operator\">=</span> pad_sequences<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>token_list<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> maxlen<span class=\"token operator\">=</span>max_sequence_len<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> padding<span class=\"token operator\">=</span><span class=\"token string\">'pre'</span><span class=\"token punctuation\">)</span><br>\t<span class=\"token comment\">#  [0, 0, 0, 0, 0, 0, 0, 134, 13, 59]</span><br>\tpredicted <span class=\"token operator\">=</span> model<span class=\"token punctuation\">.</span>predict_classes<span class=\"token punctuation\">(</span>token_list<span class=\"token punctuation\">,</span> verbose<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><br>\toutput_word <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><br>\t<span class=\"token comment\"># revert an index back to the word</span><br>\t<span class=\"token keyword\">for</span> word<span class=\"token punctuation\">,</span> index <span class=\"token keyword\">in</span> tokenizer<span class=\"token punctuation\">.</span>word_index<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>\t\t<span class=\"token keyword\">if</span> index <span class=\"token operator\">==</span> predicted<span class=\"token punctuation\">:</span><br>\t\t\toutput_word <span class=\"token operator\">=</span> word<br>\t\t\t<span class=\"token keyword\">break</span><br>\t<span class=\"token comment\"># add predicted word to the seed text and make another prediction</span><br>\tseed_text <span class=\"token operator\">+=</span> <span class=\"token string\">\" \"</span> <span class=\"token operator\">+</span> output_word<br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>seed_text<span class=\"token punctuation\">)</span><br><span class=\"token comment\"># all the words are predicted based on the probability</span><br><span class=\"token comment\"># next one will be less certain than the previous</span><br><span class=\"token comment\"># -> less meaningful</span></code></pre>\n<ul>\n<li>Using more words will help.</li>\n</ul>\n<p>📙 <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-3/week-4/notebook_3_more_data_on_train.html\">Notebook 3 (more data)</a></p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># read from a file</span><br>tokenizer <span class=\"token operator\">=</span> Tokenizer<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>data <span class=\"token operator\">=</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/tmp/irish-lyrics-eof.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>corpus <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>lower<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">)</span></code></pre>\n<p>A little changes from the previous,</p>\n<pre class=\"language-python\"><code class=\"language-python\">model <span class=\"token operator\">=</span> Sequential<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>model<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span>Embedding<span class=\"token punctuation\">(</span>total_words<span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> input_length<span class=\"token operator\">=</span>max_sequence_len<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>model<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span>Bidirectional<span class=\"token punctuation\">(</span>LSTM<span class=\"token punctuation\">(</span><span class=\"token number\">150</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>model<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span>Dense<span class=\"token punctuation\">(</span>total_words<span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'softmax'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>adam <span class=\"token operator\">=</span> Adam<span class=\"token punctuation\">(</span>lr<span class=\"token operator\">=</span><span class=\"token number\">0.01</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># customized optimizer</span><br>model<span class=\"token punctuation\">.</span><span class=\"token builtin\">compile</span><span class=\"token punctuation\">(</span>loss<span class=\"token operator\">=</span><span class=\"token string\">'categorical_crossentropy'</span><span class=\"token punctuation\">,</span> optimizer<span class=\"token operator\">=</span>adam<span class=\"token punctuation\">,</span> metrics<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'accuracy'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\">#earlystop = EarlyStopping(monitor='val_loss', min_delta=0, patience=5, verbose=0, mode='auto')</span><br>history <span class=\"token operator\">=</span> model<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>xs<span class=\"token punctuation\">,</span> ys<span class=\"token punctuation\">,</span> epochs<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> verbose<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code></pre>\n<ul>\n<li>Different convernges can create different poetry.</li>\n<li>If we use one-hot for a very big corpus -&gt; take a lot of RAM -&gt; use <strong>character-based prediction</strong> -&gt; #unique characters is far less than #unique words. -&gt; <a href=\"https://www.tensorflow.org/tutorials/text/text_generation\">notebook &quot;Text generation with RNN&quot;</a></li>\n</ul>\n<p>📙 Notebook <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-3/week-4/notebook_4_using_lstm_write_shakespeare.html\">Using LSTMs, see if you can write Shakespeare!</a></p>\n",
      "date_published": "2020-09-13T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/deeplearning-ai-tensorflow-course-2/",
      "url": "https://dinhanhthi.com/deeplearning-ai-tensorflow-course-2/",
      "title": "TF 2 - CNN in TensorFlow",
      "content_html": "<p>This is my note for the <a href=\"https://www.coursera.org/learn/convolutional-neural-networks-tensorflow\">2nd course</a> of <a href=\"https://www.coursera.org/specializations/tensorflow-in-practice\">TensorFlow in Practice Specialization</a> given by <a href=\"http://deeplearning.ai/\">deeplearning.ai</a> and taught by Laurence Moroney on Coursera.</p>\n<p>👉 Check the codes <a href=\"https://github.com/dinhanhthi/deeplearning.ai-courses/tree/master/TensorFlow%20in%20Practice\">on my Github</a>.<br>\n👉 Official <a href=\"https://github.com/lmoroney/dlaicourse\">notebooks</a> on Github.</p>\n<p>👉 Go to <a href=\"/deeplearning-ai-tensorflow-course-1\">course 1 - Intro to TensorFlow for AI, ML, DL</a>.<br>\n👉 Go to <a href=\"/deeplearning-ai-tensorflow-course-3\">course 3 - NLP in Tensorflow</a>.<br>\n👉 Go to <a href=\"/deeplearning-ai-tensorflow-course-4\">course 4 - Sequences, Time Series and Prediction</a>.</p>\n<h2 id=\"larger-dataset\">Larger dataset <a class=\"direct-link\" href=\"#larger-dataset\">#</a></h2>\n<p class=\"noindent\"></p>\n<ul>\n<li><a href=\"https://www.kaggle.com/c/dogs-vs-cats\">Kaggle Dogs v Cats dataset</a> - very famous dataset on Kaggle.</li>\n<li>Crop an image make the predict better!</li>\n<li>Make a larger dataset by rotating, scaling, cropping,...</li>\n</ul>\n<p>📙 Notebook: <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-2/week-1/notebook_1%20-%20Using%20more%20sophisticated%20images%20with%20CNN.html\">Using more sophisticated images with CNN.</a></p>\n<h3 id=\"extract-zip-file-%2B-view-image\">Extract zip file + view image <a class=\"direct-link\" href=\"#extract-zip-file-%2B-view-image\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># extract zip file</span><br><span class=\"token keyword\">import</span> zipfile<br><br>local_zip <span class=\"token operator\">=</span> <span class=\"token string\">'file.zip'</span><br>zip_ref <span class=\"token operator\">=</span> zipfile<span class=\"token punctuation\">.</span>ZipFile<span class=\"token punctuation\">(</span>local_zip<span class=\"token punctuation\">,</span> <span class=\"token string\">'r'</span><span class=\"token punctuation\">)</span><br>zip_ref<span class=\"token punctuation\">.</span>extractall<span class=\"token punctuation\">(</span><span class=\"token string\">'/tmp'</span><span class=\"token punctuation\">)</span><br>zip_ref<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># show image</span><br><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>image <span class=\"token keyword\">as</span> mpimg<br><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt<br><br>img <span class=\"token operator\">=</span> mpimg<span class=\"token punctuation\">.</span>imread<span class=\"token punctuation\">(</span>img_path<span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n</div>\n<h3 id=\"image-to-np-array\">image to np array <a class=\"direct-link\" href=\"#image-to-np-array\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> keras<span class=\"token punctuation\">.</span>preprocessing <span class=\"token keyword\">import</span> image<br><br>path <span class=\"token operator\">=</span> <span class=\"token string\">'./image.png'</span><br>img <span class=\"token operator\">=</span> image<span class=\"token punctuation\">.</span>load_img<span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">,</span> target_size<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">150</span><span class=\"token punctuation\">,</span> <span class=\"token number\">150</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>x <span class=\"token operator\">=</span> image<span class=\"token punctuation\">.</span>img_to_array<span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">)</span><br>x <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>expand_dims<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> axis<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><br>images <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>vstack<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br><br>classes <span class=\"token operator\">=</span> model<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span>images<span class=\"token punctuation\">,</span> batch_size<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"plot-loss-and-acc\">Plot loss and acc <a class=\"direct-link\" href=\"#plot-loss-and-acc\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\">history <span class=\"token operator\">=</span> model<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span><br>acc      <span class=\"token operator\">=</span> history<span class=\"token punctuation\">.</span>history<span class=\"token punctuation\">[</span>     <span class=\"token string\">'accuracy'</span> <span class=\"token punctuation\">]</span><br>val_acc  <span class=\"token operator\">=</span> history<span class=\"token punctuation\">.</span>history<span class=\"token punctuation\">[</span> <span class=\"token string\">'val_accuracy'</span> <span class=\"token punctuation\">]</span><br>loss     <span class=\"token operator\">=</span> history<span class=\"token punctuation\">.</span>history<span class=\"token punctuation\">[</span>    <span class=\"token string\">'loss'</span> <span class=\"token punctuation\">]</span><br>val_loss <span class=\"token operator\">=</span> history<span class=\"token punctuation\">.</span>history<span class=\"token punctuation\">[</span><span class=\"token string\">'val_loss'</span> <span class=\"token punctuation\">]</span></code></pre>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># plot accuracy</span><br>plt<span class=\"token punctuation\">.</span>plot  <span class=\"token punctuation\">(</span> epochs<span class=\"token punctuation\">,</span>     acc <span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>plot  <span class=\"token punctuation\">(</span> epochs<span class=\"token punctuation\">,</span> val_acc <span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>title <span class=\"token punctuation\">(</span><span class=\"token string\">'Training and validation acc'</span><span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>figure<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># plot loss function</span><br>plt<span class=\"token punctuation\">.</span>plot  <span class=\"token punctuation\">(</span> epochs<span class=\"token punctuation\">,</span>     loss <span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>plot  <span class=\"token punctuation\">(</span> epochs<span class=\"token punctuation\">,</span> val_loss <span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>title <span class=\"token punctuation\">(</span><span class=\"token string\">'Training and validation loss'</span><span class=\"token punctuation\">)</span></code></pre>\n</div>\n<h2 id=\"cats-vs-dogs\">Cats vs dogs <a class=\"direct-link\" href=\"#cats-vs-dogs\">#</a></h2>\n<p>📙 Notebook: <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-2/week-1/notebook_2-cats-vs-dogs-question-final.html\">Cat vs Dog simple DNN.</a></p>\n<h3 id=\"os\">os <a class=\"direct-link\" href=\"#os\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\">base_dir <span class=\"token operator\">=</span> <span class=\"token string\">'/tmp/cats-v-dogs'</span><br>os<span class=\"token punctuation\">.</span>mkdir<span class=\"token punctuation\">(</span>base_dir<span class=\"token punctuation\">)</span><br><br>train_dir <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>base_dir<span class=\"token punctuation\">,</span> <span class=\"token string\">'training'</span><span class=\"token punctuation\">)</span><br>validation_dir <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>base_dir<span class=\"token punctuation\">,</span> <span class=\"token string\">'testing'</span><span class=\"token punctuation\">)</span><br>os<span class=\"token punctuation\">.</span>mkdir<span class=\"token punctuation\">(</span>train_dir<span class=\"token punctuation\">)</span><br>os<span class=\"token punctuation\">.</span>mkdir<span class=\"token punctuation\">(</span>validation_dir<span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\">os<span class=\"token punctuation\">.</span>listdir<span class=\"token punctuation\">(</span>DIRECTORY<span class=\"token punctuation\">)</span> <span class=\"token comment\"># gives you a listing of the contents of that directory</span><br>os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>getsize<span class=\"token punctuation\">(</span>PATH<span class=\"token punctuation\">)</span> <span class=\"token comment\"># gives you the size of the file</span><br>copyfile<span class=\"token punctuation\">(</span>source<span class=\"token punctuation\">,</span> destination<span class=\"token punctuation\">)</span> <span class=\"token comment\"># copies a file from source to destination</span><br>random<span class=\"token punctuation\">.</span>sample<span class=\"token punctuation\">(</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># shuffles a list</span></code></pre>\n<h3 id=\"split-data\">Split data <a class=\"direct-link\" href=\"#split-data\">#</a></h3>\n<p>Shuffle images and split/copy images to training/testing folder for each cat and dog.</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> os<br><span class=\"token keyword\">import</span> random<br><span class=\"token keyword\">from</span> shutil <span class=\"token keyword\">import</span> copyfile<br><span class=\"token keyword\">def</span> <span class=\"token function\">split_data</span><span class=\"token punctuation\">(</span>SOURCE<span class=\"token punctuation\">,</span> TRAINING<span class=\"token punctuation\">,</span> TESTING<span class=\"token punctuation\">,</span> SPLIT_SIZE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    lst_cat_imgs <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>listdir<span class=\"token punctuation\">(</span>SOURCE<span class=\"token punctuation\">)</span><br>    lst_cat_imgs <span class=\"token operator\">=</span> random<span class=\"token punctuation\">.</span>sample<span class=\"token punctuation\">(</span>lst_cat_imgs<span class=\"token punctuation\">,</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>lst_cat_imgs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">for</span> <span class=\"token builtin\">file</span> <span class=\"token keyword\">in</span> lst_cat_imgs<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>SPLIT_SIZE<span class=\"token operator\">*</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>lst_cat_imgs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span><br>        source_file <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>SOURCE<span class=\"token punctuation\">,</span> <span class=\"token builtin\">file</span><span class=\"token punctuation\">)</span><br>        destination_file <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>TRAINING<span class=\"token punctuation\">,</span> <span class=\"token builtin\">file</span><span class=\"token punctuation\">)</span><br>        <span class=\"token keyword\">if</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>getsize<span class=\"token punctuation\">(</span>source_file<span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span><br>            copyfile<span class=\"token punctuation\">(</span>source_file<span class=\"token punctuation\">,</span> destination_file<span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">for</span> <span class=\"token builtin\">file</span> <span class=\"token keyword\">in</span> lst_cat_imgs<span class=\"token punctuation\">[</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>SPLIT_SIZE<span class=\"token operator\">*</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>lst_cat_imgs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span><br>        source_file <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>SOURCE<span class=\"token punctuation\">,</span> <span class=\"token builtin\">file</span><span class=\"token punctuation\">)</span><br>        destination_file <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>TESTING<span class=\"token punctuation\">,</span> <span class=\"token builtin\">file</span><span class=\"token punctuation\">)</span><br>        <span class=\"token keyword\">if</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>getsize<span class=\"token punctuation\">(</span>source_file<span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span><br>            copyfile<span class=\"token punctuation\">(</span>source_file<span class=\"token punctuation\">,</span> destination_file<span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\">CAT_SOURCE_DIR <span class=\"token operator\">=</span> <span class=\"token string\">\"/tmp/PetImages/Cat/\"</span><br>TRAINING_CATS_DIR <span class=\"token operator\">=</span> <span class=\"token string\">\"/tmp/cats-v-dogs/training/cats/\"</span><br>TESTING_CATS_DIR <span class=\"token operator\">=</span> <span class=\"token string\">\"/tmp/cats-v-dogs/testing/cats/\"</span><br>split_size <span class=\"token operator\">=</span> <span class=\"token number\">.9</span><br>split_data<span class=\"token punctuation\">(</span>CAT_SOURCE_DIR<span class=\"token punctuation\">,</span> TRAINING_CATS_DIR<span class=\"token punctuation\">,</span> TESTING_CATS_DIR<span class=\"token punctuation\">,</span> split_size<span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"define-model\">Define model <a class=\"direct-link\" href=\"#define-model\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\">model <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>models<span class=\"token punctuation\">.</span>Sequential<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Conv2D<span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'relu'</span><span class=\"token punctuation\">,</span> input_shape<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">150</span><span class=\"token punctuation\">,</span> <span class=\"token number\">150</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>MaxPooling2D<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Conv2D<span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'relu'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>MaxPooling2D<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Conv2D<span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'relu'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>MaxPooling2D<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Flatten<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">512</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'relu'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'sigmoid'</span><span class=\"token punctuation\">)</span><br><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br><br>model<span class=\"token punctuation\">.</span><span class=\"token builtin\">compile</span><span class=\"token punctuation\">(</span>optimizer<span class=\"token operator\">=</span>RMSprop<span class=\"token punctuation\">(</span>lr<span class=\"token operator\">=</span><span class=\"token number\">0.001</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> loss<span class=\"token operator\">=</span><span class=\"token string\">'binary_crossentropy'</span><span class=\"token punctuation\">,</span> metrics<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'acc'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"generate-data\">Generate data <a class=\"direct-link\" href=\"#generate-data\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\">TRAINING_DIR <span class=\"token operator\">=</span> <span class=\"token string\">\"/tmp/cats-v-dogs/training/\"</span><br>train_datagen <span class=\"token operator\">=</span> ImageDataGenerator<span class=\"token punctuation\">(</span> rescale <span class=\"token operator\">=</span> <span class=\"token number\">1.0</span><span class=\"token operator\">/</span><span class=\"token number\">255</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">)</span><br><br>train_generator <span class=\"token operator\">=</span> train_datagen<span class=\"token punctuation\">.</span>flow_from_directory<span class=\"token punctuation\">(</span>TRAINING_DIR<span class=\"token punctuation\">,</span><br>                                                    batch_size<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span><br>                                                    class_mode<span class=\"token operator\">=</span><span class=\"token string\">'binary'</span><span class=\"token punctuation\">,</span><br>                                                    target_size<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">150</span><span class=\"token punctuation\">,</span> <span class=\"token number\">150</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># the same for validation</span><br><span class=\"token comment\"># output:</span><br><span class=\"token comment\"># Found 2700 images belonging to 2 classes (training).</span><br><span class=\"token comment\"># Found 500 images beloging to 2 classes (validation).</span></code></pre>\n<h3 id=\"train\">Train <a class=\"direct-link\" href=\"#train\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\">history <span class=\"token operator\">=</span> model<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>train_generator<span class=\"token punctuation\">,</span><br>\t\t\t\t\tepochs<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><br>\t\t\t\t\tsteps_per_epoch<span class=\"token operator\">=</span><span class=\"token number\">27</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># 2700 / 10 (batch_size)</span><br>\t\t\t\t\tverbose<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><br>\t\t\t\t\tvalidation_steps<span class=\"token operator\">=</span><span class=\"token number\">50</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># 500 / 10 (batch_size)</span><br>\t\t\t\t\tvalidation_data<span class=\"token operator\">=</span>validation_generator<span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"image-augmentation\">Image Augmentation <a class=\"direct-link\" href=\"#image-augmentation\">#</a></h2>\n<p>📙 Notebook: <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-2/week-2/notebook_1_Cats_v_Dogs_Augmentation.html\">Cats v Dogs using augmentation</a> &amp; <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-2/week-2/notebook_3_Cats_vs_Dogs_using_augmentation_Question-FINAL.html\">the final exercise</a> (more data).<br>\n📙 Notebook: <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-2/week-2/notebook_2_horse_human.html\">Human vs Horse using augmentation</a>.</p>\n<p class=\"noindent\"></p>\n<ul>\n<li>Create multiple &quot;other&quot; images from original images without saving them to the memory + quickly.</li>\n<li>Image augmentation helps you avoid overfitting.</li>\n<li>Meaning of params, check <a href=\"https://www.coursera.org/lecture/convolutional-neural-networks-tensorflow/coding-augmentation-with-imagedatagenerator-kiCPT\">this video</a>.</li>\n<li>Broad set of images for BOTH training and testing sets!</li>\n<li><a href=\"https://www.tensorflow.org/api_docs/python/tf/keras/preprocessing/image/ImageDataGenerator\">ImageDataGenerator on TF</a>.</li>\n</ul>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># The different from the code in the previous section!</span><br><br>train_datagen <span class=\"token operator\">=</span> ImageDataGenerator<span class=\"token punctuation\">(</span><br>    rescale<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">.</span><span class=\"token operator\">/</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span>             <span class=\"token comment\"># rescale</span><br>    rotation_range<span class=\"token operator\">=</span><span class=\"token number\">40</span><span class=\"token punctuation\">,</span>          <span class=\"token comment\"># rotate randomly between 0 &amp; 40 degrees (max 180)</span><br>    width_shift_range<span class=\"token operator\">=</span><span class=\"token number\">0.2</span><span class=\"token punctuation\">,</span>      <span class=\"token comment\"># offset horizontally 20%</span><br>    height_shift_range<span class=\"token operator\">=</span><span class=\"token number\">0.2</span><span class=\"token punctuation\">,</span>     <span class=\"token comment\"># offset vertically 20%</span><br>    shear_range<span class=\"token operator\">=</span><span class=\"token number\">0.2</span><span class=\"token punctuation\">,</span><br>    zoom_range<span class=\"token operator\">=</span><span class=\"token number\">0.2</span><span class=\"token punctuation\">,</span><br>    horizontal_flip<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span><br>    fill_mode<span class=\"token operator\">=</span><span class=\"token string\">'nearest'</span>         <span class=\"token comment\"># fill any pixel may be lost by the \"nearest\" ones</span><br><span class=\"token punctuation\">)</span><br><br>validation_datagen <span class=\"token operator\">=</span> ImageDataGenerator<span class=\"token punctuation\">(</span>rescale<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span></code></pre>\n<p><img src=\"/img/post/mooc/tf/image-augmentation.png\" alt=\"Image augmentation illustration\" class=\"img-100 pop\"><br>\n<em>An illustration of image augmentation <a href=\"https://developer.apple.com/documentation/createml/improving_your_model_s_accuracy\">from apple</a>.</em></p>\n<h2 id=\"transfer-learning\">Transfer learning <a class=\"direct-link\" href=\"#transfer-learning\">#</a></h2>\n<p>📙 Notebook: <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-2/week-3/notebook_1_Coding%20transfer%20learning%20from%20the%20inception%20mode.html\">Coding transfer learning from the inception mode</a>. ➪ <a href=\"https://www.coursera.org/lecture/convolutional-neural-networks-tensorflow/exploring-transfer-learning-with-inception-ZQ6dw\">Video</a> explains this notebook.<br>\n📙 Notebook: <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-2/week-3/notebook_2_Horses_vs_humans_using_Transfer_Learning_Question-FINAL.html\">Horses v Humans using callBack, Augmentation, transfer learning</a> (final exercise).</p>\n<p class=\"noindent\"></p>\n<ul>\n<li><strong>Transfer learning</strong> = Taking existing model that's trained on far more data + use the features that model learned.</li>\n<li>(Tensorflow tutorial) <a href=\"https://www.tensorflow.org/tutorials/images/transfer_learning\">Transfer learning and fine-tuning</a></li>\n<li><a href=\"https://static.googleusercontent.com/media/research.google.com/en//pubs/archive/43022.pdf\"><strong>Inception/GoogLeNet network</strong></a>: Inception Modules are used in CNN to allow for more efficient computation and deeper Networks through a dimensionality reduction with stacked 1x1 convolutions. The modules were designed to <mark>solve the problem of computational expense, as well as overfitting</mark>, among other issues. The solution, in short, is to <em>take multiple kernel filter sizes within the CNN, and rather than stacking them sequentially, ordering them to operate on the same level.</em> <sup><a href=\"https://www.analyticsvidhya.com/blog/2018/10/understanding-inception-network-from-scratch\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup> Check more in <a href=\"#references\">Refereces</a> 1, 2, 3.</li>\n<li><strong>Dropout</strong>: remove a random number of neurons in your NN. It works well because:\n<ul>\n<li>neighboring neurons often end up with similar weights, which can lead to overfitting.</li>\n<li>a neuron can over-weigh the input from a neuron in the previous layer</li>\n</ul>\n</li>\n</ul>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> tensorflow<span class=\"token punctuation\">.</span>keras <span class=\"token keyword\">import</span> layers<br><span class=\"token keyword\">from</span> tensorflow<span class=\"token punctuation\">.</span>keras <span class=\"token keyword\">import</span> Model<br><br><span class=\"token comment\"># download snapshot of weights</span><br><br><span class=\"token keyword\">from</span> tensorflow<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>applications<span class=\"token punctuation\">.</span>inception_v3 <span class=\"token keyword\">import</span> InceptionV3<br>local_weights_file <span class=\"token operator\">=</span> <span class=\"token string\">'/tmp/inception_v3_weights_notop.h5'</span><br><br>pre_trained_model <span class=\"token operator\">=</span> InceptionV3<span class=\"token punctuation\">(</span><br>    input_shape <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">150</span><span class=\"token punctuation\">,</span> <span class=\"token number\">150</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    include_top <span class=\"token operator\">=</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># Inception v3 has a fully-connected</span><br>                         <span class=\"token comment\"># layer at the top -> False to ignore</span><br>                         <span class=\"token comment\"># it and get straight to the convolution.</span><br>    weights <span class=\"token operator\">=</span> <span class=\"token boolean\">None</span> <span class=\"token comment\"># don't wana use built-in weights</span><br><span class=\"token punctuation\">)</span><br><br>pre_trained_model<span class=\"token punctuation\">.</span>load_weights<span class=\"token punctuation\">(</span>local_weights_file<span class=\"token punctuation\">)</span> <span class=\"token comment\"># but use the snapshot downloaded</span><br><br><span class=\"token keyword\">for</span> layer <span class=\"token keyword\">in</span> pre_trained_model<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">:</span><br>    layer<span class=\"token punctuation\">.</span>trainable <span class=\"token operator\">=</span> <span class=\"token boolean\">False</span> <span class=\"token comment\"># lock pretrained layers</span><br>                            <span class=\"token comment\"># they're not going to be trained</span><br>                            <span class=\"token comment\"># with this code</span><br><br><span class=\"token comment\"># pre_trained_model.summary()   # DON'T DO THAT, IT'S HUGE!!!</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># By default, the output of the last layer will be 3x3 but we wanna</span><br><span class=\"token comment\"># get more info, so we move up over the model and grap layer \"mixed7\" from</span><br><span class=\"token comment\"># inception and take its output mixed7: output of a lot of conv that are 7x7</span><br>last_layer <span class=\"token operator\">=</span> pre_trained_model<span class=\"token punctuation\">.</span>get_layer<span class=\"token punctuation\">(</span><span class=\"token string\">'mixed7'</span><span class=\"token punctuation\">)</span><br>last_output <span class=\"token operator\">=</span> last_layer<span class=\"token punctuation\">.</span>output</code></pre>\n<p>👉 <a href=\"https://stackoverflow.com/questions/50054938/why-do-we-need-to-include-top-false-if-we-need-to-change-the-input-shape\">Why do we need to <code>include_top=False</code> if we need to change the input_shape?</a></p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> tensorflow<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>optimizers <span class=\"token keyword\">import</span> RMSprop<br><br><span class=\"token comment\"># Define a new model</span><br><br>x <span class=\"token operator\">=</span> layers<span class=\"token punctuation\">.</span>Flatten<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>last_output<span class=\"token punctuation\">)</span> <span class=\"token comment\"># Take the output (mixed7) from inception model</span><br>                                  <span class=\"token comment\"># last_output: look like dense model</span><br>                                  <span class=\"token comment\">#     -> input of the new model</span><br>                                  <span class=\"token comment\"># Starting by flatting the input</span><br>x <span class=\"token operator\">=</span> layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">1024</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'relu'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><br>x <span class=\"token operator\">=</span> layers<span class=\"token punctuation\">.</span>Dropout<span class=\"token punctuation\">(</span><span class=\"token number\">0.2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># randomly remove 20% of neurons (avoid overfitting)</span><br>x <span class=\"token operator\">=</span> layers<span class=\"token punctuation\">.</span>Dense  <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'sigmoid'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><br><br>model <span class=\"token operator\">=</span> Model<span class=\"token punctuation\">(</span>pre_trained_model<span class=\"token punctuation\">.</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span><br>model<span class=\"token punctuation\">.</span><span class=\"token builtin\">compile</span><span class=\"token punctuation\">(</span>optimizer <span class=\"token operator\">=</span> RMSprop<span class=\"token punctuation\">(</span>lr<span class=\"token operator\">=</span><span class=\"token number\">0.0001</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>              loss <span class=\"token operator\">=</span> <span class=\"token string\">'binary_crossentropy'</span><span class=\"token punctuation\">,</span><br>              metrics <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'accuracy'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"multi-class-classification\">Multi-class classification <a class=\"direct-link\" href=\"#multi-class-classification\">#</a></h2>\n<p>📙 Notebook: <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-2/week-4/notebook_1_(RockPaperScissors).html\">Rock Paper Scissors</a>.<br>\n📙 Notebook: <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/deeplearning.ai-courses/blob/master/TensorFlow%20in%20Practice/course-2/week-4/notebook_2_Multi_class_classifier_MNIST_Question-FINAL.html\">MNIST Final Question</a>.</p>\n<p>👉 <a href=\"http://www.laurencemoroney.com/rock-paper-scissors-dataset/\">Rock-Paper-Scissors dataset</a> (generated using CGI techniques)</p>\n<p>The codes are quite the same as in the case of binary classification, the differences are</p>\n<pre class=\"language-python\"><code class=\"language-python\">train_generator <span class=\"token operator\">=</span> train_datagen<span class=\"token punctuation\">.</span>flow_from_directory<span class=\"token punctuation\">(</span><br>    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><br>    class_mode<span class=\"token operator\">=</span><span class=\"token string\">'categorical'</span> <span class=\"token comment\"># 'binary' for binary</span><br><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\">model <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>models<span class=\"token punctuation\">.</span>Sequential<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><br>    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'softmax'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 'sigmoid' for binary</span><br><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\">model<span class=\"token punctuation\">.</span><span class=\"token builtin\">compile</span><span class=\"token punctuation\">(</span><br>    loss<span class=\"token operator\">=</span><span class=\"token string\">'categorical_crossentropy'</span> <span class=\"token comment\"># 'binary_lossentropy' for binary</span><br><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"more\">More <a class=\"direct-link\" href=\"#more\">#</a></h2>\n<ul>\n<li>Applying Convolutions on top of our Deep neural network will make training ➪ It depends on many factors. It might make your training faster or slower, and a poorly designed Convolutional layer may even be less efficient than a plain DNN!</li>\n</ul>\n<h2 id=\"references\">References <a class=\"direct-link\" href=\"#references\">#</a></h2>\n<ol>\n<li><a href=\"https://www.analyticsvidhya.com/blog/2018/10/understanding-inception-network-from-scratch/\">Inception Network - Implementation Of GoogleNet In Keras</a></li>\n<li><a href=\"https://cv-tricks.com/cnn/understand-resnet-alexnet-vgg-inception/\">ResNet, AlexNet, VGGNet, Inception: Understanding various architectures of Convolutional Networks – CV-Tricks.com</a></li>\n<li><a href=\"https://medium.com/coinmonks/paper-review-of-googlenet-inception-v1-winner-of-ilsvlc-2014-image-classification-c2b3565a64e7\">Review: GoogLeNet (Inception v1)— Winner of ILSVRC 2014 (Image Classification)</a></li>\n<li><a href=\"https://www.tensorflow.org/tutorials/images/transfer_learning\">Transfer learning and fine-tuning  -  TensorFlow Core</a></li>\n</ol>\n",
      "date_published": "2020-08-23T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/r-installation/",
      "url": "https://dinhanhthi.com/r-installation/",
      "title": "R Installation",
      "content_html": "<h2 id=\"install-r\">Install R <a class=\"direct-link\" href=\"#install-r\">#</a></h2>\n<p>👉 <a href=\"https://cran.r-project.org/\">Home page</a>.</p>\n<h2 id=\"install-a-package-in-r\">Install a package in R <a class=\"direct-link\" href=\"#install-a-package-in-r\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-r\"><code class=\"language-r\"><span class=\"token comment\"># directly</span><br>install.packages<span class=\"token punctuation\">(</span><span class=\"token string\">\"slidify\"</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-r\"><code class=\"language-r\"><span class=\"token comment\"># from github repo</span><br>install.packages<span class=\"token punctuation\">(</span><span class=\"token string\">\"devtools\"</span><span class=\"token punctuation\">)</span><br>devtools<span class=\"token operator\">::</span>install_github<span class=\"token punctuation\">(</span><span class=\"token string\">\"twitter/AnomalyDetection\"</span><span class=\"token punctuation\">)</span><br>library<span class=\"token punctuation\">(</span>AnomalyDetection<span class=\"token punctuation\">)</span></code></pre>\n</div>\n<h2 id=\"r-with-jupyter-notebook\">R with jupyter notebook <a class=\"direct-link\" href=\"#r-with-jupyter-notebook\">#</a></h2>\n<p>👉 Read <a href=\"/jupyter-notebook#r-with-jupyter-notebook\">this note</a>.</p>\n<h2 id=\"error\">Error <a class=\"direct-link\" href=\"#error\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># installation of package ‘xml2’ had non-zero exit status</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> libxml2-dev</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># cannot install packages</span><br><span class=\"token comment\"># Setting LC_CTYPE failed, using \"C\"</span><br><span class=\"token comment\"># (or something like that)</span><br><br><span class=\"token comment\"># without root environnement</span><br><span class=\"token comment\"># exit R</span><br>defaults <span class=\"token function\">write</span> org.R-project.R force.<span class=\"token environment constant\">LANG</span> en_US.UTF-8<br><span class=\"token comment\"># start R again</span><br><br><span class=\"token comment\"># with root (in a docker bash, for example)</span><br><span class=\"token comment\"># start R by using</span><br><span class=\"token assign-left variable\"><span class=\"token environment constant\">LC_ALL</span></span><span class=\"token operator\">=</span>C.UTF-8 R</code></pre>\n",
      "date_published": "2020-07-29T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/deeplearning-ai-tensorflow-course-1/",
      "url": "https://dinhanhthi.com/deeplearning-ai-tensorflow-course-1/",
      "title": "TF 1 - Intro to TensorFlow for AI, ML, DL",
      "content_html": "<p>This is my note for the <a href=\"https://www.coursera.org/learn/introduction-tensorflow\">first course</a> of <a href=\"https://www.coursera.org/specializations/tensorflow-in-practice\">TensorFlow in Practice Specialization</a> given by <a href=\"http://deeplearning.ai/\">deeplearning.ai</a> and taught by Laurence Moroney on Coursera.</p>\n<p>👉 Check the codes <a href=\"https://github.com/dinhanhthi/deeplearning.ai-courses/tree/master/TensorFlow%20in%20Practice\">on my Github</a>.<br>\n👉 Official <a href=\"https://github.com/lmoroney/dlaicourse\">notebooks</a> on Github.</p>\n<p>👉 Go to <a href=\"/deeplearning-ai-tensorflow-course-2\">course 2 - CNN in Tensorflow</a>.<br>\n👉 Go to <a href=\"/deeplearning-ai-tensorflow-course-3\">course 3 - NLP in Tensorflow</a>.<br>\n👉 Go to <a href=\"/deeplearning-ai-tensorflow-course-4\">course 4 - Sequences, Time Series and Prediction</a>.</p>\n<h2 id=\"basic-dl-on-mnist\">Basic DL on MNIST <a class=\"direct-link\" href=\"#basic-dl-on-mnist\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> tensorflow <span class=\"token keyword\">as</span> tf<br><br><span class=\"token comment\"># stop the training with condition</span><br><span class=\"token keyword\">class</span> <span class=\"token class-name\">myCallback</span><span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>callbacks<span class=\"token punctuation\">.</span>Callback<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">def</span> <span class=\"token function\">on_epoch_end</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> epoch<span class=\"token punctuation\">,</span> logs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># compare at the end of each epoch</span><br>        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>logs<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'accuracy'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0.99</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>            self<span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">.</span>stop_training <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span><br><br>mnist <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>datasets<span class=\"token punctuation\">.</span>mnist<br><span class=\"token punctuation\">(</span>x_train<span class=\"token punctuation\">,</span> y_train<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span>x_test<span class=\"token punctuation\">,</span> y_test<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> mnist<span class=\"token punctuation\">.</span>load_data<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>x_train<span class=\"token punctuation\">,</span> x_test <span class=\"token operator\">=</span> x_train <span class=\"token operator\">/</span> <span class=\"token number\">255.0</span><span class=\"token punctuation\">,</span> x_test <span class=\"token operator\">/</span> <span class=\"token number\">255.0</span> <span class=\"token comment\"># normalize</span><br><br>callbacks <span class=\"token operator\">=</span> myCallback<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># define the callback</span><br><br>model <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>models<span class=\"token punctuation\">.</span>Sequential<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Flatten<span class=\"token punctuation\">(</span>input_shape<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">28</span><span class=\"token punctuation\">,</span> <span class=\"token number\">28</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># Takes that square and</span><br>                                                   <span class=\"token comment\"># turns it into a 1 dim</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">512</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span>tf<span class=\"token punctuation\">.</span>nn<span class=\"token punctuation\">.</span>relu<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span>tf<span class=\"token punctuation\">.</span>nn<span class=\"token punctuation\">.</span>softmax<span class=\"token punctuation\">)</span> <span class=\"token comment\"># 10 outputs</span><br><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br><br>model<span class=\"token punctuation\">.</span><span class=\"token builtin\">compile</span><span class=\"token punctuation\">(</span>optimizer<span class=\"token operator\">=</span><span class=\"token string\">'adam'</span><span class=\"token punctuation\">,</span><br>              loss<span class=\"token operator\">=</span><span class=\"token string\">'sparse_categorical_crossentropy'</span><span class=\"token punctuation\">,</span><br>              metrics<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'accuracy'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br><br>model<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>x_train<span class=\"token punctuation\">,</span> y_train<span class=\"token punctuation\">,</span> epochs<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> callbacks<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>callbacks<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n<p><strong>Comments</strong> (<a href=\"https://bit.ly/3jHSCYg\">notebook</a>):</p>\n<p class=\"indent\"></p>\n<ol>\n<li>Adding more Neurons we have to do more calculations, slowing down the process, but get more accurate.</li>\n<li>The first layer in your network should be the same shape as your data.</li>\n<li>The number of neurons in the last layer should match the number of classes you are classifying for.</li>\n<li>Extra layers are often necessary.</li>\n<li><strong>Flatten</strong> as the name implies, converts your multidimensional matrices (<code>Batch.Size x Img.W x Img.H x Kernel.Size</code>) to a nice single 2-dimensional matrix: (<code>Batch.Size x (Img.W x Img.H x Kernel.Size)</code>). During backpropagation it also converts back your delta of size (<code>Batch.Size x (Img.W x Img.H x Kernel.Size)</code>) to the original (<code>Batch.Size x Img.W x Img.H x Kernel.Size</code>).</li>\n<li><strong>Dense layer</strong> is of course the standard fully connected layer.</li>\n</ol>\n<p><img src=\"/img/post/mooc/tf/cnn-layers.png\" alt=\"CNN layers\" class=\"img-100 pop\"><br>\n<em>CNN layers, <a href=\"mdpi.com\">cource of image</a>.</em></p>\n<h2 id=\"basic-dl-on-fashion-mnist\">Basic DL on Fashion-MNIST <a class=\"direct-link\" href=\"#basic-dl-on-fashion-mnist\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># the same as in MINST</span><br><span class=\"token comment\"># different at below line of loading data</span><br>mnist <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>datasets<span class=\"token punctuation\">.</span>fashion_mnist</code></pre>\n<h2 id=\"basic-cnn-on-fashion-mnist\">Basic CNN on Fashion-MNIST <a class=\"direct-link\" href=\"#basic-cnn-on-fashion-mnist\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> tensorflow <span class=\"token keyword\">as</span> tf<br>mnist <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>datasets<span class=\"token punctuation\">.</span>fashion_mnist<br><br><span class=\"token keyword\">class</span> <span class=\"token class-name\">myCallback</span><span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>callbacks<span class=\"token punctuation\">.</span>Callback<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">def</span> <span class=\"token function\">on_epoch_end</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> epochs<span class=\"token punctuation\">,</span> logs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span><br>        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>logs<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'accuracy'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">is</span> <span class=\"token keyword\">not</span> <span class=\"token boolean\">None</span> <span class=\"token keyword\">and</span> logs<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'accuracy'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>=</span> <span class=\"token number\">0.998</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span><br>            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'\\nReached 99.8% accuracy so cancelling training!'</span><span class=\"token punctuation\">)</span><br>            self<span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">.</span>stop_training <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span><br><br><span class=\"token punctuation\">(</span>training_images<span class=\"token punctuation\">,</span> training_labels<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>test_images<span class=\"token punctuation\">,</span> test_labels<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> mnist<span class=\"token punctuation\">.</span>load_data<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\"># Why reshape?</span><br><span class=\"token comment\"># The first convolution expects a single tensor containing everything,</span><br><span class=\"token comment\"># so instead of 60000 28x28x1 items in a list, we have a single 4D list</span><br><span class=\"token comment\"># that is 60000x28x28x1</span><br><span class=\"token comment\">#</span><br><span class=\"token comment\"># training_images' shape (before reshape): (60000, 28, 28)</span><br><span class=\"token comment\"># training_images' shape (after reshape): (60000, 28, 28, 1)</span><br><span class=\"token comment\"># trainaing_labels' shape: (60000,)</span><br>training_images<span class=\"token operator\">=</span>training_images<span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span><span class=\"token number\">60000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">28</span><span class=\"token punctuation\">,</span> <span class=\"token number\">28</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><br>training_images<span class=\"token operator\">=</span>training_images <span class=\"token operator\">/</span> <span class=\"token number\">255.0</span><br>test_images <span class=\"token operator\">=</span> test_images<span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span><span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">28</span><span class=\"token punctuation\">,</span> <span class=\"token number\">28</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><br>test_images<span class=\"token operator\">=</span>test_images<span class=\"token operator\">/</span><span class=\"token number\">255.0</span><br><br>model <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>models<span class=\"token punctuation\">.</span>Sequential<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><br>  tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Conv2D<span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'relu'</span><span class=\"token punctuation\">,</span> input_shape<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">28</span><span class=\"token punctuation\">,</span> <span class=\"token number\">28</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>  tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>MaxPooling2D<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>  tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Conv2D<span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'relu'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>  tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>MaxPooling2D<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>  tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Flatten<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>  tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">128</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'relu'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>  tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>Dense<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'softmax'</span><span class=\"token punctuation\">)</span><br><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br><br>model<span class=\"token punctuation\">.</span><span class=\"token builtin\">compile</span><span class=\"token punctuation\">(</span>optimizer<span class=\"token operator\">=</span><span class=\"token string\">'adam'</span><span class=\"token punctuation\">,</span><br>              loss<span class=\"token operator\">=</span><span class=\"token string\">'sparse_categorical_crossentropy'</span><span class=\"token punctuation\">,</span><br>              metrics<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'accuracy'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br><br>callbacks <span class=\"token operator\">=</span> myCallback<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br><br>model<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>training_images<span class=\"token punctuation\">,</span> training_labels<span class=\"token punctuation\">,</span> epochs<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> callbacks<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>callbacks<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br>test_loss <span class=\"token operator\">=</span> model<span class=\"token punctuation\">.</span>evaluate<span class=\"token punctuation\">(</span>test_images<span class=\"token punctuation\">,</span> test_labels<span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\">model.summary<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># model detail</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\">Model: <span class=\"token string\">\"sequential_1\"</span><br>_________________________________________________________________<br>Layer <span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span>                 Output Shape              Param <span class=\"token comment\">#</span><br><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span><br>conv2d <span class=\"token punctuation\">(</span>Conv2D<span class=\"token punctuation\">)</span>              <span class=\"token punctuation\">(</span>None, <span class=\"token number\">26</span>, <span class=\"token number\">26</span>, <span class=\"token number\">64</span><span class=\"token punctuation\">)</span>        <span class=\"token number\">640</span><br>                             <span class=\"token comment\"># for every image, 64 convolution has been tried</span><br>                             <span class=\"token comment\"># 26 (=28-2) because we use 3x3 filter and we can't</span><br>                             <span class=\"token comment\"># count on edges, so the picture is 2 smaller on x and y.</span><br>                             <span class=\"token comment\"># if 5x5 filter => 4 smaller on x and y.</span><br>_________________________________________________________________<br>max_pooling2d <span class=\"token punctuation\">(</span>MaxPooling2D<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span>None, <span class=\"token number\">13</span>, <span class=\"token number\">13</span>, <span class=\"token number\">64</span><span class=\"token punctuation\">)</span>        <span class=\"token number\">0</span><br>_________________________________________________________________<br>conv2d_1 <span class=\"token punctuation\">(</span>Conv2D<span class=\"token punctuation\">)</span>            <span class=\"token punctuation\">(</span>None, <span class=\"token number\">11</span>, <span class=\"token number\">11</span>, <span class=\"token number\">64</span><span class=\"token punctuation\">)</span>        <span class=\"token number\">36928</span><br>_________________________________________________________________<br>max_pooling2d_1 <span class=\"token punctuation\">(</span>MaxPooling2 <span class=\"token punctuation\">(</span>None, <span class=\"token number\">5</span>, <span class=\"token number\">5</span>, <span class=\"token number\">64</span><span class=\"token punctuation\">)</span>          <span class=\"token number\">0</span><br>_________________________________________________________________<br>flatten_1 <span class=\"token punctuation\">(</span>Flatten<span class=\"token punctuation\">)</span>          <span class=\"token punctuation\">(</span>None, <span class=\"token number\">1600</span><span class=\"token punctuation\">)</span>              <span class=\"token number\">0</span><br>_________________________________________________________________<br>dense_2 <span class=\"token punctuation\">(</span>Dense<span class=\"token punctuation\">)</span>              <span class=\"token punctuation\">(</span>None, <span class=\"token number\">128</span><span class=\"token punctuation\">)</span>               <span class=\"token number\">204928</span><br>_________________________________________________________________<br>dense_3 <span class=\"token punctuation\">(</span>Dense<span class=\"token punctuation\">)</span>              <span class=\"token punctuation\">(</span>None, <span class=\"token number\">10</span><span class=\"token punctuation\">)</span>                <span class=\"token number\">1290</span><br><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span><br>Total params: <span class=\"token number\">243,786</span><br>Trainable params: <span class=\"token number\">243,786</span><br>Non-trainable params: <span class=\"token number\">0</span></code></pre>\n<p>Refs:</p>\n<p class=\"indent\"></p>\n<ol>\n<li><a href=\"https://en.wikipedia.org/wiki/Kernel_(image_processing)\">Kernel in image processing</a>: examples with images.</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Convolutional_neural_network#Pooling_layer\">Pooling layer</a>: non-linear down-sampling.</li>\n</ol>\n<p>More?</p>\n<p class=\"indent\"></p>\n<ol>\n<li>\n<p><a href=\"https://lodev.org/cgtutor/filtering.html\">Image Filtering</a> -- Lode's Computer Graphics Tutorial</p>\n</li>\n<li>\n<p>Applying Convolutions on top of our Deep neural network will make training =&gt; It depends on many factors. It might make your training faster or slower, and a poorly designed Convolutional layer may even be less efficient than a plain DNN!</p>\n</li>\n<li>\n<p><strong>What is a Convolution?</strong> =&gt; A technique to isolate features in images</p>\n</li>\n<li>\n<p><strong>What is a Pooling?</strong> =&gt; A technique to reduce the information in an image while maintaining features</p>\n</li>\n<li>\n<p>How do Convolutions improve image recognition? =&gt; They isolate features in images</p>\n</li>\n<li>\n<p>After passing a 3x3 conv filter over a 28x28 image, how big will the output be? =&gt; 26x26</p>\n<p><img src=\"/img/post/mooc/tf/conv_ker_3x3.gif\" alt=\"3x3 conv kernel\" class=\"img-30\"><br>\n<em>7x7 to 5x5 (<a href=\"https://iamaaditya.github.io/2016/03/one-by-one-convolution/\">source</a>)</em></p>\n</li>\n<li>\n<p>After max pooling a 26x26 image with a 2x2 filter, how big will the output be? =&gt; 13x13</p>\n<p><img src=\"/img/post/mooc/tf/max-pooling.jpg\" alt=\"max pooling idea\" class=\"img-40\"><br>\n<em>(<a href=\"https://deepai.org/machine-learning-glossary-and-terms/max-pooling\">source</a>)</em></p>\n</li>\n</ol>\n<h2 id=\"visualizing-the-convolutions-and-pooling\">Visualizing the Convolutions and Pooling <a class=\"direct-link\" href=\"#visualizing-the-convolutions-and-pooling\">#</a></h2>\n<p>Using layer API, something like below, check more in <a href=\"https://bit.ly/3f6wQtA\">the notebook</a>.</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt<br>f<span class=\"token punctuation\">,</span> axarr <span class=\"token operator\">=</span> plt<span class=\"token punctuation\">.</span>subplots<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br><br><span class=\"token keyword\">from</span> tensorflow<span class=\"token punctuation\">.</span>keras <span class=\"token keyword\">import</span> models<br>layer_outputs <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>layer<span class=\"token punctuation\">.</span>output <span class=\"token keyword\">for</span> layer <span class=\"token keyword\">in</span> model<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">]</span><br>activation_model <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">(</span>inputs <span class=\"token operator\">=</span> model<span class=\"token punctuation\">.</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">,</span> outputs <span class=\"token operator\">=</span> layer_outputs<span class=\"token punctuation\">)</span><br><br><span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    f1 <span class=\"token operator\">=</span> activation_model<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span>test_images<span class=\"token punctuation\">[</span>FIRST_IMAGE<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">28</span><span class=\"token punctuation\">,</span> <span class=\"token number\">28</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span><br>    axarr<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span>f1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">,</span> <span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> CONVOLUTION_NUMBER<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> cmap<span class=\"token operator\">=</span><span class=\"token string\">'inferno'</span><span class=\"token punctuation\">)</span><br>    axarr<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>grid<span class=\"token punctuation\">(</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><br>    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre>\n<h2 id=\"using-real-world-images\">Using real-world images <a class=\"direct-link\" href=\"#using-real-world-images\">#</a></h2>\n<p>An example of classifying horses and humans!</p>\n<h3 id=\"imagegenerator\">ImageGenerator <a class=\"direct-link\" href=\"#imagegenerator\">#</a></h3>\n<p>👉 <a href=\"https://www.coursera.org/lecture/introduction-tensorflow/understanding-imagegenerator-kqRHk\">Video explain ImageGenerator</a>.</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># make images more used for training</span><br><span class=\"token comment\"># (focus on object, split cleary objects, label images,...)</span><br><span class=\"token comment\"># also help to augmenting data (rotate, skew, flip,...)</span><br><span class=\"token keyword\">from</span> tensorflow<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>preprocessing<span class=\"token punctuation\">.</span>image <span class=\"token keyword\">import</span> ImageDataGenerator<br><br>train_datagen <span class=\"token operator\">=</span> ImageDataGenerator<span class=\"token punctuation\">(</span>rescale<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">.</span><span class=\"token operator\">/</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span><br>    <span class=\"token comment\"># normalize -> No need to convert images and then put in the training</span><br>    <span class=\"token comment\"># do the scaling on the fly</span><br>train_generator <span class=\"token operator\">=</span> train_datagen<span class=\"token punctuation\">.</span>flow_from_directory<span class=\"token punctuation\">(</span><br>    train_dir<span class=\"token punctuation\">,</span> <span class=\"token comment\"># dir contains the dir containing your images</span><br>               <span class=\"token comment\"># -> be careful!</span><br>    target_size<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">300</span><span class=\"token punctuation\">,</span> <span class=\"token number\">300</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># images will be resized when loaded, genial!</span><br>                            <span class=\"token comment\"># because NN always needs that!</span><br>                            <span class=\"token comment\"># -> experimenting with diff sizes without</span><br>                            <span class=\"token comment\"># impacting your source data</span><br>    batch_size<span class=\"token operator\">=</span><span class=\"token number\">128</span><span class=\"token punctuation\">,</span><br>    class_mode<span class=\"token operator\">=</span><span class=\"token string\">\"binary\"</span>     <span class=\"token comment\"># 2 diff things</span><br><span class=\"token punctuation\">)</span><br><br>test_datagen <span class=\"token operator\">=</span> ImageDataGenerator<span class=\"token punctuation\">(</span>rescale<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">.</span><span class=\"token operator\">/</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># normalize</span><br>validation_generator <span class=\"token operator\">=</span> test_datagen<span class=\"token punctuation\">.</span>flow_from_directory<span class=\"token punctuation\">(</span><br>    validation_dir<span class=\"token punctuation\">,</span> <span class=\"token comment\"># dir contains the dir containing your images</span><br>    target_size<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">300</span><span class=\"token punctuation\">,</span> <span class=\"token number\">300</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    batch_size<span class=\"token operator\">=</span><span class=\"token number\">32</span><span class=\"token punctuation\">,</span><br>    class_mode<span class=\"token operator\">=</span><span class=\"token string\">\"binary\"</span><br><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"convnet-with-imagegenerator\">ConvNet with ImageGenerator <a class=\"direct-link\" href=\"#convnet-with-imagegenerator\">#</a></h3>\n<p>More docs:</p>\n<p class=\"indent\"></p>\n<ul>\n<li><a href=\"https://gombru.github.io/2018/05/23/cross_entropy_loss/\">Understanding Categorical Cross-Entropy Loss, Binary Cross-Entropy Loss, Softmax Loss, Logistic Loss, Focal Loss and all those confusing names</a></li>\n<li><a href=\"http://www.cs.toronto.edu/~tijmen/csc321/slides/lecture_slides_lec6.pdf\">Overview of mini-batch gradient descent</a></li>\n</ul>\n",
      "date_published": "2020-07-25T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/data-ml-tools-resources/",
      "url": "https://dinhanhthi.com/data-ml-tools-resources/",
      "title": "Resources for DS &amp; ML &amp; DL",
      "content_html": "<p>👉 Note: <a href=\"/good-applications-useful-tools/\">Useful tools for working &amp; studying.</a><br>\n👉 Note: <a href=\"/web-dev-tools-resources/\">Web Dev tools &amp; resources.</a></p>\n<h2 id=\"blogs-%26-tuts\">Blogs &amp; Tuts <a class=\"direct-link\" href=\"#blogs-%26-tuts\">#</a></h2>\n<ul>\n<li><a href=\"https://medium.com/airbnb-engineering\">Airbnb</a> — Engineering &amp; Data Science – Medium.</li>\n<li><a href=\"https://aicurious.io/\">AI Curious</a> — Viet Anh's personal blog, in Vietnamese.</li>\n<li><a href=\"https://colah.github.io/\">Colah's blog</a> — personal blog.</li>\n<li><a href=\"https://ai.facebook.com/blog/\">Facebook AI Blog</a>.</li>\n<li><a href=\"https://aihub.cloud.google.com/\">Google's AI Hub</a> -- a platform that lets us centralize our code and knowledge in a way that can step up the pace of deployment and learnings globally, giving us the scale to deliver data-driven marketing excellence.</li>\n<li><a href=\"https://codelabs.developers.google.com/\">Google Codelabs</a> -- Google Developers Codelabs provide a guided, tutorial, hands-on coding experience. Most codelabs will step you through the process of building a small application, or adding a new feature to an existing application. They cover a wide range of topics such as Android Wear, Google Compute Engine, Project Tango, and Google APIs on iOS.</li>\n<li><a href=\"https://jeremykun.com/\">Math ∩ Programming</a> — personal blog.</li>\n<li><a href=\"https://netflixtechblog.com/\">Netflix TechBlog</a></li>\n<li><a href=\"https://ongxuanhong.wordpress.com/\">Ong Xuan Hong</a> — personal blog.</li>\n<li><a href=\"https://ruder.io/\">Sebastian Ruder</a> — personal blog.</li>\n</ul>\n<h2 id=\"books\">Books <a class=\"direct-link\" href=\"#books\">#</a></h2>\n<ul>\n<li><a href=\"https://www.manning.com/books/deep-learning-with-python\">Deep Learning with Python</a> — François Chollet.</li>\n<li><a href=\"https://www.oreilly.com/library/view/hands-on-machine-learning/9781492032632/\">Hands-On Machine Learning with Scikit-Learn, Keras, and TensorFlow</a> — Aurélien Géron.</li>\n</ul>\n<h2 id=\"services-%26-api\">Services &amp; API <a class=\"direct-link\" href=\"#services-%26-api\">#</a></h2>\n<ul>\n<li><a href=\"https://www.mapbox.com/\">Mapbox</a> — Precise location data and powerful developer tools to change the way we navigate the world.</li>\n<li><a href=\"https://foursquare.com/\">Foursquare</a> — the trusted location data.</li>\n<li><a href=\"https://www.openstreetmap.org/#map=6/46.449/2.210\">OpenStreetMap</a> —  a map of the world, created by people like you and free to use under an open license.</li>\n</ul>\n<h2 id=\"frameworks\">Frameworks <a class=\"direct-link\" href=\"#frameworks\">#</a></h2>\n<ul>\n<li><a href=\"https://caffe.berkeleyvision.org/\">Caffe</a> — deep learning framework.</li>\n<li><a href=\"https://d3js.org/\">D3js</a> — Data-Driven Documents.</li>\n<li><a href=\"https://hydra.cc/\">Hydra</a> — A framework for elegantly configuring complex applications. It's Facebook's.</li>\n</ul>\n<h2 id=\"python-libs\">Python libs <a class=\"direct-link\" href=\"#python-libs\">#</a></h2>\n<ul>\n<li><a href=\"https://docs.daft-pgm.org/en/latest/#\">daft</a> — a Python package that uses matplotlib to render pixel-perfect probabilistic graphical models for publication in a journal or on the internet.</li>\n<li><a href=\"https://github.com/espdev/csaps\">CSAPS</a> — a Python package for univariate, multivariate and n-dimensional grid data approximation using cubic smoothing splines. The package can be useful in practical engineering tasks for data approximation and smoothing.</li>\n</ul>\n<h2 id=\"for-vietnamese\">For Vietnamese <a class=\"direct-link\" href=\"#for-vietnamese\">#</a></h2>\n<p>👉 <a href=\"/dataset-collection/#vietnamese\">Dataset for Vietnamese</a>.</p>\n<ul>\n<li><a href=\"http://youtu.be/M1PHvJvv1Z8\">KbQAS</a> (ISWC 2013): Video demo of the knowledge-based Vietnamese question answering system KbQAS.</li>\n<li><a href=\"https://github.com/VinAIResearch/PhoBERT\">PhoBERT</a> (EMNLP 2020 Findings): Pre-trained language models for Vietnamese.</li>\n<li><a href=\"https://github.com/datquocnguyen/PhoW2V\">PhoW2V</a> (2020): Pre-trained Word2Vec syllable- and word-level embeddings for Vietnamese.</li>\n<li><a href=\"https://github.com/datquocnguyen/RDRsegmenter\">RDRsegmenter</a> (LREC 2018): A fast and accurate Vietnamese word segmenter.</li>\n<li><a href=\"https://github.com/VinAIResearch/ViText2SQL\">ViText2SQL</a> (EMNLP 2020 Findings): A dataset for Vietnamese Text2SQL semantic parsing.</li>\n<li><a href=\"https://github.com/vncorenlp/VnCoreNLP\">VnCoreNLP</a> (NAACL 2018): A Vietnamese NLP pipeline of word (and sentence) segmentation, POS tagging, named entity recognition and dependency parsing.</li>\n<li><a href=\"http://vndp.sourceforge.net/\">VnDT</a> (NLDB 2014): A Vietnamese dependency treebank.</li>\n<li><a href=\"https://github.com/datquocnguyen/VnMarMoT\">VnMarMoT</a> (ALTA 2017): A pre-trained Vietnamese POS tagging model.</li>\n</ul>\n<h2 id=\"tools\">Tools <a class=\"direct-link\" href=\"#tools\">#</a></h2>\n<ul>\n<li><a href=\"https://github.com/BVLC/caffe/wiki/Model-Zoo\">Caffe Model Zoo</a> -- reasearcher share their <em>Caffe</em> models.</li>\n<li><a href=\"https://www.chartjs.org/\">Chart.js | Open source HTML5 Charts for your website</a></li>\n<li><a href=\"https://github.com/deepkit/deepkit-ml\">DeepKit</a> -- The collaborative real-time open-source machine learning devtool and training suite: Experiment execution, tracking, and debugging. With server and project management tools.</li>\n<li><a href=\"http://projector.tensorflow.org/\">Embedding Projector tool</a> from tensorflow.</li>\n<li><a href=\"https://flourish.studio/\">Flourish</a> — Data Visualization &amp; Storytelling.</li>\n<li><a href=\"https://foursquare.com/\">Foursquare</a> — Put the most trusted, independent location data and technology platform to work for your business.</li>\n<li><a href=\"https://datastudio.google.com/u/0/navigation/reporting\">Google Data Studio</a>.</li>\n<li>Graphviz export\n<ul>\n<li>Download <strong>Graphviz</strong> <a href=\"https://graphviz.gitlab.io/download/\">here</a>.</li>\n<li>Its <a href=\"http://webgraphviz.com/\">online version</a>.</li>\n</ul>\n</li>\n<li><a href=\"https://teachablemachine.withgoogle.com/\">Teachable Machine</a> -- Train a computer to recognize your own images, sounds, &amp; poses.</li>\n<li><a href=\"https://idyll-lang.org/\">idyll</a> — A toolkit for creating data-driven stories and explorable explanations.</li>\n<li><a href=\"https://www.mapbox.com/\">Mapbox</a> — Maps and location for developers.</li>\n<li><a href=\"https://ml5js.org/\">ml5js</a> -- Friendly Machine Learning For The Web.</li>\n<li><a href=\"https://github.com/fastai/nbdev\">nbdev</a> — Create delightful python projects using Jupyter Notebooks.</li>\n<li><a href=\"https://observablehq.com/\">Observale</a> — Observable is the magic notebook for exploring data and thinking with code.</li>\n<li><a href=\"https://github.com/streamlit/streamlit\">Streamlit</a> — The fastest way to build data apps in Python.</li>\n<li><a href=\"https://replicate.ai/\">Replicate</a> — Version control for machine learning.</li>\n<li><a href=\"https://www.tensorflow.org/tensorboard\">TensorBoard</a> -- TensorFlow's visualization toolkit.</li>\n<li><a href=\"http://playground.tensorflow.org/\">TensorFlow Playground</a></li>\n<li><a href=\"https://travis-ci.org/\">Travis-CI</a> — a hosted continuous integration service used to build and test software projects hosted at GitHub and Bitbucket.</li>\n<li><a href=\"https://github.com/vaexio/vaex\">Vaex</a> — Handle huge dataframe.</li>\n</ul>\n",
      "date_published": "2020-07-14T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/k-shape-clustering/",
      "url": "https://dinhanhthi.com/k-shape-clustering/",
      "title": "K-Shape clustering",
      "content_html": "<h2 id=\"what%3F\">What? <a class=\"direct-link\" href=\"#what%3F\">#</a></h2>\n<p>K-Shape clustering method is a method for <mark>clustering time series</mark>.</p>\n<p>The main ideas of this algorithms are:</p>\n<p class=\"indent\"></p>\n<ul>\n<li>The distance measure is based on the cross-correlation of two time series.</li>\n<li>The clustering process uses iterative approaches.</li>\n<li>It is a raw-based method. It is fundamentally a variant of k-means with some interesting modification.\n<ul>\n<li>Define a distance between 2 time series.</li>\n<li>How to average multiple time series.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"references\">References <a class=\"direct-link\" href=\"#references\">#</a></h2>\n<ul>\n<li>(article) <a href=\"http://people.cs.uchicago.edu/~jopa/Papers/PaparrizosSIGMOD2015.pdf\">k-Shape: Efficient and Accurate Clustering of Time Series</a></li>\n<li><strong>Ryan's blog</strong> -- <a href=\"http://ryansiroiro.blogspot.com/2018/07/k-shape-clustering-algorithm.html\">K-Shape Clustering Algorithm</a></li>\n</ul>\n",
      "date_published": "2020-07-02T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/awesome-anomaly-detection-ts/",
      "url": "https://dinhanhthi.com/awesome-anomaly-detection-ts/",
      "title": "Anomaly Detection for TS Resources",
      "content_html": "<p>This note contains good resources for Time Series Anomaly Detection problems.</p>\n<h2 id=\"book-%26-tutorials\">Book &amp; tutorials <a class=\"direct-link\" href=\"#book-%26-tutorials\">#</a></h2>\n<ol>\n<li>Practical Machine Learning - A new look at Anomaly Detection - Ted Dunning &amp; Ellen Friedman -- clear explanation -- <a href=\"https://mapr.com/practical-machine-learning-new-look-anomaly-detection/assets/practical-machine-learning-new-look-anomaly-detection.pdf\">pdf</a></li>\n</ol>\n<h2 id=\"libraries\">Libraries <a class=\"direct-link\" href=\"#libraries\">#</a></h2>\n<ol>\n<li>Anomaly Detection Tool Kit (ADTK) -- many examples and cases with codes -- <a href=\"https://adtk.readthedocs.io/\">docs</a> -- <a href=\"https://github.com/arundo/adtk\">github</a>.</li>\n<li>PyODDS -- <a href=\"http://pyodds.com/\">docs</a> -- <a href=\"https://github.com/datamllab/pyodds\">github</a></li>\n</ol>\n<h2 id=\"other-resources\">Other resources <a class=\"direct-link\" href=\"#other-resources\">#</a></h2>\n<ol>\n<li><a href=\"https://github.com/rob-med/awesome-TS-anomaly-detection\">awesome-TS-anomaly-detection</a></li>\n<li><a href=\"https://github.com/sdukshis/awesome-ml\">Machine Learning Awesome List</a> - section &quot;Time Series Anomaly Detection&quot;.</li>\n<li><strong>Scitkit-learn</strong> -- <a href=\"https://scikit-learn.org/stable/auto_examples/miscellaneous/plot_anomaly_comparison.html#sphx-glr-auto-examples-miscellaneous-plot-anomaly-comparison-py\">Comparing anomaly detection algorithms for outlier detection on toy datasets</a></li>\n<li><a href=\"https://github.com/hoya012/awesome-anomaly-detection#time-series-anomaly-detection-need-to-survey-more\">awesome anomaly detection</a> - section &quot;Time-series anomaly detection&quot;</li>\n</ol>\n",
      "date_published": "2020-06-23T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/data-structure/",
      "url": "https://dinhanhthi.com/data-structure/",
      "title": "Data Structure",
      "content_html": "<h2 id=\"hierarchical-data-format-(hdf)\">Hierarchical Data Format (HDF) <a class=\"direct-link\" href=\"#hierarchical-data-format-(hdf)\">#</a></h2>\n<ul>\n<li>Designed to store and organize large amounts of data.</li>\n<li>Store multiple data files in <strong>a single data file</strong>!\n<ul>\n<li>Different types of information.</li>\n<li>Self describing (metadata included in the file)</li>\n</ul>\n</li>\n<li><strong>Properties</strong><sup><a href=\"https://www.youtube.com/watch?v=nddj5OA8LJo\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup>:\n<ul>\n<li><strong>Datasets</strong> (numpy arrays): fast slicing, compression.</li>\n<li><strong>Group</strong> (dictionaries): nesting, POSIX path syntax.</li>\n<li><strong>Attributrs</strong> (metadata): datasets/group, key-value.</li>\n</ul>\n</li>\n<li>HDF5 is row based and really effient than csv for very large file size<sup><a href=\"https://stackoverflow.com/questions/16639877/hdf5-taking-more-space-than-csv\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup>.</li>\n<li>Extensions: <code>.h5</code>, <code>.hdf</code>, <code>.hdf4</code>, ...</li>\n<li>Tool: <a href=\"https://www.hdfgroup.org/downloads/hdfview/\">HDFView</a></li>\n<li>Example<sup><a href=\"https://www.neonscience.org/about-hdf5\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup>:</li>\n</ul>\n<p><img src=\"/img/post/data/data-structure/hdf5_structure4.jpg\" alt=\"An example of HDF5 structure\" class=\"img-full-70\"><br>\n<em>An example HDF5 file structure which contains groups, datasets and associated metadata.</em></p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> h5py<br><br>f <span class=\"token operator\">=</span> h5py<span class=\"token punctuation\">.</span>File<span class=\"token punctuation\">(</span><span class=\"token string\">'mytestfile.hdf5'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'r'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># read a file</span><br><span class=\"token comment\"># h5py.File acts like Python dict</span><br>dset <span class=\"token operator\">=</span> f<span class=\"token punctuation\">[</span><span class=\"token string\">'mydataset'</span><span class=\"token punctuation\">]</span><br>dset<span class=\"token punctuation\">.</span>attrs <span class=\"token comment\"># attribute</span></code></pre>\n<h2 id=\"t-digest\">t-digest <a class=\"direct-link\" href=\"#t-digest\">#</a></h2>\n<p><em>later</em></p>\n",
      "date_published": "2020-06-22T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/type-of-time-series/",
      "url": "https://dinhanhthi.com/type-of-time-series/",
      "title": "Type of Time Series",
      "content_html": "<h2 id=\"univariate-vs-multivariate-ts\">Univariate vs Multivariate TS <a class=\"direct-link\" href=\"#univariate-vs-multivariate-ts\">#</a></h2>\n<p><strong>Univariate time series</strong>: Only one variable is varying over time.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># example of univariate dataset</span><br>index    Time                   value<br><span class=\"token number\">0</span>        <span class=\"token number\">2016</span>-04-01 06:00:10    <span class=\"token number\">1</span><br><span class=\"token number\">1</span>        <span class=\"token number\">2016</span>-04-01 06:00:20    <span class=\"token number\">2</span><br><span class=\"token number\">2</span>        <span class=\"token number\">2016</span>-04-01 06:00:30    <span class=\"token number\">3</span></code></pre>\n<p><strong>Multivariate time series</strong>: Multiple variables are varying over time.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># example of multivariate dataset</span><br>index    Time                   value_1   value_2   value_3<br><span class=\"token number\">0</span>        <span class=\"token number\">2016</span>-04-01 06:00:10    <span class=\"token number\">1</span>         <span class=\"token number\">5</span>         <span class=\"token number\">2</span><br><span class=\"token number\">1</span>        <span class=\"token number\">2016</span>-04-01 06:00:20    <span class=\"token number\">2</span>         <span class=\"token number\">9</span>         <span class=\"token number\">8</span><br><span class=\"token number\">2</span>        <span class=\"token number\">2016</span>-04-01 06:00:30    <span class=\"token number\">3</span>         <span class=\"token number\">5</span>         <span class=\"token number\">1</span></code></pre>\n",
      "date_published": "2020-06-21T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/data-visualization/",
      "url": "https://dinhanhthi.com/data-visualization/",
      "title": "Data Visualization",
      "content_html": "<p>👉 Note of <a href=\"/python-matplotlib-tips\">Matplotlib extra</a></p>\n<h2 id=\"dynamic-time-warping-(dtw)\">Dynamic Time Warping (DTW) <a class=\"direct-link\" href=\"#dynamic-time-warping-(dtw)\">#</a></h2>\n<p>Ref <a href=\"https://dtaidistance.readthedocs.io/en/latest/usage/dtw.html\">here</a>,</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> dtaidistance <span class=\"token keyword\">import</span> dtw<br><span class=\"token keyword\">from</span> dtaidistance <span class=\"token keyword\">import</span> dtw_visualisation <span class=\"token keyword\">as</span> dtwvis<br><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np<br>s1 <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br>s2 <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br>path <span class=\"token operator\">=</span> dtw<span class=\"token punctuation\">.</span>warping_path<span class=\"token punctuation\">(</span>s1<span class=\"token punctuation\">,</span> s2<span class=\"token punctuation\">)</span><br>dtwvis<span class=\"token punctuation\">.</span>plot_warping<span class=\"token punctuation\">(</span>s1<span class=\"token punctuation\">,</span> s2<span class=\"token punctuation\">,</span> path<span class=\"token punctuation\">,</span> filename<span class=\"token operator\">=</span><span class=\"token string\">\"warp.png\"</span><span class=\"token punctuation\">)</span></code></pre>\n<p>If meet err <code>The compiled dtaidistance C library is not available.</code>,</p>\n<ul>\n<li>\n<p>Try to reinstall the lib <a href=\"https://dtaidistance.readthedocs.io/en/latest/usage/installation.html#from-source\">from source</a>.</p>\n</li>\n<li>\n<p>Or</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">pip <span class=\"token function\">install</span> -v --force-reinstall --no-deps --no-binary dtaidistance dtaidistance</code></pre>\n</li>\n<li>\n<p>If you are running notebook, you have to restart the kernel!</p>\n</li>\n</ul>\n",
      "date_published": "2020-06-18T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/wasserstein-earth-mover-distance/",
      "url": "https://dinhanhthi.com/wasserstein-earth-mover-distance/",
      "title": "Earth mover’s distance",
      "content_html": "<h2 id=\"what-(general)%3F\">What (general)? <a class=\"direct-link\" href=\"#what-(general)%3F\">#</a></h2>\n<ul>\n<li>In statistics, the earth mover's distance (EMD) is a <mark>measure of the distance between two probability distributions</mark> over a region D.<sup><a href=\"https://en.wikipedia.org/wiki/Earth_mover%27s_distance\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></li>\n<li>In stats or computer science, it's &quot;<em>Earth mover's distance</em>&quot;.</li>\n<li>In maths, it's &quot;<em>Wasserstein metric</em>&quot;</li>\n<li><mark>The Wasserstein distance is the minimum cost of transporting mass in converting the data distribution q to the data distribution p.</mark></li>\n</ul>\n<h2 id=\"what-(math-way)%3F\">What (math way)? <a class=\"direct-link\" href=\"#what-(math-way)%3F\">#</a></h2>\n<p>The idea borrowed from <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.wasserstein_distance.html\">this</a>. The first Wasserstein distance between the distributions <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">u</span></span></span></span></span> and <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span></span></span></span></span> is:</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>l</mi><mn>1</mn></msub><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>=</mo><munder><mo><mi>inf</mi><mo>⁡</mo></mo><mrow><mi>π</mi><mo>∈</mo><mi mathvariant=\"normal\">Γ</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow></munder><msub><mo>∫</mo><mrow><mi mathvariant=\"double-struck\">R</mi><mo>×</mo><mi mathvariant=\"double-struck\">R</mi></mrow></msub><mi mathvariant=\"normal\">∣</mi><mi>x</mi><mo>−</mo><mi>y</mi><mi mathvariant=\"normal\">∣</mi><mi mathvariant=\"normal\">d</mi><mi>π</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\nl_1 (u, v) = \\inf_{\\pi \\in \\Gamma (u, v)} \\int_{\\mathbb{R} \\times\n        \\mathbb{R}} |x-y| \\mathrm{d} \\pi (x, y)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.3302810000000003em;vertical-align:-0.970281em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.69444em;\"><span style=\"top:-2.3089999999999997em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">π</span><span class=\"mrel mtight\">∈</span><span class=\"mord mtight\">Γ</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">u</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose mtight\">)</span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\">in<span style=\"margin-right:0.07778em;\">f</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.966em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span class=\"mop op-symbol large-op\" style=\"margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;\">∫</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:-0.42972699999999997em;\"><span style=\"top:-1.7880500000000001em;margin-left:-0.44445em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathbb mtight\">R</span></span><span class=\"mbin mtight\">×</span><span class=\"mord mtight\"><span class=\"mord mathbb mtight\">R</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.970281em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord mathrm\">d</span></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span></span></span></span></span></eqn></section></math>\n<p>where <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">Γ</mi><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\Gamma(u,v)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">Γ</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span></span></span></span></span> is the set of (probability) distributions on <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">R</mi><mo>×</mo><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}\\times \\mathbb{R}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.77222em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span></span></span></span></span></span> whose marginals are  and  on the first and second factors respectively.</p>\n<p>If <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>U</mi></mrow><annotation encoding=\"application/x-tex\">U</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span></span></span></span></span> and <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi></mrow><annotation encoding=\"application/x-tex\">V</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span></span></span></span></span> are the respective CDFs of <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">u</span></span></span></span></span> and <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span></span></span></span></span>, this distance also equals to:</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>l</mi><mn>1</mn></msub><mo stretchy=\"false\">(</mo><mi>u</mi><mo separator=\"true\">,</mo><mi>v</mi><mo stretchy=\"false\">)</mo><mo>=</mo><msubsup><mo>∫</mo><mrow><mo>−</mo><mi mathvariant=\"normal\">∞</mi></mrow><mrow><mo>+</mo><mi mathvariant=\"normal\">∞</mi></mrow></msubsup><mi mathvariant=\"normal\">∣</mi><mi>U</mi><mo>−</mo><mi>V</mi><mi mathvariant=\"normal\">∣</mi></mrow><annotation encoding=\"application/x-tex\">\nl_1(u, v) = \\int_{-\\infty}^{+\\infty} |U-V|\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.491512em;vertical-align:-0.970281em;\"></span><span class=\"mop\"><span class=\"mop op-symbol large-op\" style=\"margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;\">∫</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.5212310000000002em;\"><span style=\"top:-1.7880500000000001em;margin-left:-0.44445em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">∞</span></span></span></span><span style=\"top:-3.8129000000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">+</span><span class=\"mord mtight\">∞</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.970281em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord\">∣</span></span></span></span></span></eqn></section></math>\n<h2 id=\"example-of-metric\">Example of metric <a class=\"direct-link\" href=\"#example-of-metric\">#</a></h2>\n<p>Suppose we wanna move the blocks on the left to dotted-blocks on the right, we wanna find the &quot;energy&quot; (or metric) to do that.</p>\n<p class=\"text-center\"><em>Energy = <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">Σ</mi></mrow><annotation encoding=\"application/x-tex\">\\Sigma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord\">Σ</span></span></span></span></span> weight of block x distance to move that block</em>.</p>\n<p>Suppose that weight of each block is 1. All below figures are copied from <a href=\"https://medium.com/@jonathan_hui/gan-wasserstein-gan-wgan-gp-6a1a2aa1b490\">this</a>.</p>\n<p><img src=\"/img/post/stats/emd_1.png\" alt=\"EMD example\" class=\"img-50\"></p>\n<p>There are 2 ways to do that,</p>\n<p><img src=\"/img/post/stats/emd_2.jpeg\" alt=\"EMD example\" class=\"img-50\"><br>\n<em>2 ways of moving blocks from left to right.</em></p>\n<p>Above example gives the same energies (<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>42</mn></mrow><annotation encoding=\"application/x-tex\">42</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">4</span><span class=\"mord\">2</span></span></span></span></span>) but there are usually different as below example,</p>\n<p><img src=\"/img/post/stats/emd_3.png\" alt=\"EMD example\" class=\"img-50\"></p>\n<h2 id=\"coding\">Coding <a class=\"direct-link\" href=\"#coding\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> scipy<span class=\"token punctuation\">.</span>stats <span class=\"token keyword\">import</span> wasserstein_distance</code></pre>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\">arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span><br>arr2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span><br>wasserstein_distance<span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">,</span> arr2<span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token number\">0.0</span><br><span class=\"token comment\"># they are exactly the same!</span></code></pre>\n</div>\n<div class=\"columns-2\" markdown=\"1\">\n<pre class=\"language-python\"><code class=\"language-python\">arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><br>arr2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span><br>wasserstein_distance<span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">,</span> arr2<span class=\"token punctuation\">)</span><br><span class=\"token comment\"># 3.0000000000000004</span><br><br><span class=\"token keyword\">import</span> seaborn <span class=\"token keyword\">as</span> sns<br>sns<span class=\"token punctuation\">.</span>distplot<span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">,</span> kde<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> hist_kws<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"histtype\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"step\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"linewidth\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"alpha\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"color\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"b\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><br>sns<span class=\"token punctuation\">.</span>distplot<span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">,</span> kde<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> hist_kws<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"histtype\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"step\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"linewidth\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"alpha\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"color\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"r\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n<p><img src=\"/img/post/stats/emd_4.jpg\" alt=\"EMD example\" class=\"img-100\"></p>\n</div>\n<h2 id=\"references\">References <a class=\"direct-link\" href=\"#references\">#</a></h2>\n<ul>\n<li><a href=\"https://www.quora.com/What-is-an-intuitive-explanation-of-the-Wasserstein-distance\">What is an intuitive explanation of the Wasserstein distance?</a></li>\n<li><a href=\"https://medium.com/@jonathan_hui/gan-wasserstein-gan-wgan-gp-6a1a2aa1b490\">GAN — Wasserstein GAN &amp; WGAN-GP</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=U7xdiGc7IRU\">An example</a> of why we need to use EMD instead of <a href=\"/KS-test\">Kolmogorov–Smirnov distance</a> (video).</li>\n</ul>\n",
      "date_published": "2020-06-01T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/deeplearning-ai-course-3-bird-recognition-peacetopia/",
      "url": "https://dinhanhthi.com/deeplearning-ai-course-3-bird-recognition-peacetopia/",
      "title": "Deep Learning Coursera - Bird recognition in the city of Peacetopia",
      "content_html": "<p>The content in this note is copied exactly from the course. It's really helpful to be a separated note.</p>\n<p>👉 <strong>Course 3</strong> -- <a href=\"/deeplearning-ai-course-3\">Structuring Machine Learning Projects</a>.</p>\n<h2 id=\"problem-statement\">Problem Statement <a class=\"direct-link\" href=\"#problem-statement\">#</a></h2>\n<p>This example is adapted from a real production application, but with details disguised to protect confidentiality.</p>\n<p>You are a famous researcher in the City of Peacetopia. The people of Peacetopia have a common characteristic: they are afraid of birds. To save them, you have <strong>to build an algorithm that will detect any bird flying over Peacetopia</strong> and alert the population.</p>\n<p>The City Council gives you a dataset of 10,000,000 images of the sky above Peacetopia, taken from the city’s security cameras. They are labelled:</p>\n<p class=\"indent\"></p>\n<ul>\n<li>y = 0: There is no bird on the image.</li>\n<li>y = 1: There is a bird on the image.</li>\n</ul>\n<p>Your goal is to build an algorithm able to classify new images taken by security cameras from Peacetopia.</p>\n<p>There are a lot of decisions to make:</p>\n<p class=\"indent\"></p>\n<ul>\n<li>What is the evaluation metric?</li>\n<li>How do you structure your data into train/dev/test sets?</li>\n</ul>\n<h2 id=\"metric-of-success\">Metric of success <a class=\"direct-link\" href=\"#metric-of-success\">#</a></h2>\n<p>⭐ The City Council tells you that they want an algorithm that</p>\n<ol>\n<li>Has high accuracy</li>\n<li>Runs quickly and takes only a short time to classify a new image.</li>\n<li>Can fit in a small amount of memory, so that it can run in a small processor that the city will attach to many different security cameras.</li>\n</ol>\n<p><strong>Note</strong>: <em>Having three evaluation metrics makes it harder for you to quickly choose between two different algorithms, and will slow down the speed with which your team can iterate.</em></p>\n<p>⭐ After further discussions, the city narrows down its criteria to:</p>\n<p class=\"indent\"></p>\n<ul>\n<li>&quot;We need an algorithm that can let us know a bird is flying over Peacetopia as accurately as possible.&quot;</li>\n<li>&quot;We want the trained model to take no more than 10sec to classify a new image.”</li>\n<li>“We want the model to fit in 10MB of memory.”</li>\n</ul>\n<p>⭐ If you had the three following models, which one would you choose?</p>\n<p class=\"indent\"></p>\n<ul>\n<li>Test Accuracy\t98%</li>\n<li>Runtime 9 sec</li>\n<li>Memory size 9MB</li>\n</ul>\n<p><em>As soon as the runtime is less than 10 seconds you're good. So, you may simply maximize the test accuracy after you made sure the runtime is &lt;10sec.</em></p>\n<p>⭐ Based on the city’s requests: Accuracy is an optimizing metric; running time and memory size are a satisficing metrics.</p>\n<h2 id=\"structuring-your-data\">Structuring your data <a class=\"direct-link\" href=\"#structuring-your-data\">#</a></h2>\n<p>⭐ Before implementing your algorithm, you need to split your data into train/dev/test sets.</p>\n<p class=\"indent\"></p>\n<ul>\n<li>Train 9,500,000</li>\n<li>Dev 250,000</li>\n<li>Test 250,000</li>\n</ul>\n<p>After setting up your train/dev/test sets, the City Council comes across another 1,000,000 images, called the “citizens’ data”. Apparently the citizens of Peacetopia are so scared of birds that they volunteered to take pictures of the sky and label them, thus contributing these additional 1,000,000 images. These images are different from the distribution of images the City Council had originally given you, but you think it could help your algorithm.</p>\n<p><em>You should add the citizens’ data to the training set</em></p>\n<p>Sometimes we'll need to train the model on the data that is available, and its distribution may not be the same as the data that will occur in production. Also, adding training data that differs from the dev set may still help the model improve performance on the dev set. <mark>What matters is that the dev and test set have the same distribution.</mark></p>\n<p>⭐ One member of the City Council knows a little about machine learning, and thinks you should add the 1,000,000 citizens’ data images to the test set. You object because:</p>\n<p class=\"indent\"></p>\n<ul>\n<li>The test set no longer reflects the distribution of data (security cameras) you most care about.</li>\n<li>This would cause the dev and test set distributions to become different. This is a bad idea because you’re not aiming where you want to hit.</li>\n</ul>\n<p>⭐ You train a system, and its errors are as follows (error = 100%-Accuracy):</p>\n<p class=\"indent\"></p>\n<ul>\n<li>Training set error\t4.0%</li>\n<li>Dev set error\t4.5%</li>\n</ul>\n<p>This suggests that one good avenue for improving performance is to train a bigger network so as to drive down the 4.0% training error. Do you agree?</p>\n<p class=\"indent\"></p>\n<ul>\n<li>No, because there is insufficient information to tell.</li>\n</ul>\n<p>⭐ You ask a few people to label the dataset so as to find out what is human-level performance. You find the following levels of accuracy:</p>\n<p class=\"indent\"></p>\n<ul>\n<li>Bird watching expert #1\t0.3% error</li>\n<li>Bird watching expert #2\t0.5% error</li>\n<li>Normal person #1 (not a bird watching expert)\t1.0% error</li>\n<li>Normal person #2 (not a bird watching expert)\t1.2% error</li>\n</ul>\n<p>If your goal is to have “human-level performance” be a proxy (or estimate) for Bayes error, how would you define “human-level performance”?</p>\n<p class=\"indent\"></p>\n<ul>\n<li>0.3% (accuracy of expert #1)</li>\n</ul>\n<p>⭐ A learning algorithm’s performance can be better human-level performance but it can never be better than Bayes error.</p>\n<p>⭐ You find that a team of ornithologists debating and discussing an image gets an even better 0.1% performance, so you define that as “human-level performance.” After working further on your algorithm, you end up with the following:</p>\n<p class=\"indent\"></p>\n<ul>\n<li>Human-level performance\t0.1%</li>\n<li>Training set error\t2.0%</li>\n<li>Dev set error\t2.1%</li>\n</ul>\n<p>Based on the evidence you have, which two of the following four options seem the most promising to try?</p>\n<p class=\"indent\"></p>\n<ul>\n<li>Try decreasing regularization.</li>\n<li>Train a bigger model to try to do better on the training set.</li>\n</ul>\n<p>⭐ You also evaluate your model on the test set, and find the following:</p>\n<p class=\"indent\"></p>\n<ul>\n<li>Human-level performance\t0.1%</li>\n<li>Training set error\t2.0%</li>\n<li>Dev set error\t2.1%</li>\n<li>Test set error\t7.0%</li>\n</ul>\n<p>What does this mean?</p>\n<p class=\"indent\"></p>\n<ul>\n<li>You should try to get a bigger dev set.</li>\n<li>You have overfit to the dev set.</li>\n</ul>\n<p>⭐ After working on this project for a year, you finally achieve:</p>\n<p class=\"indent\"></p>\n<ul>\n<li>Human-level performance\t0.10%</li>\n<li>Training set error\t0.05%</li>\n<li>Dev set error\t0.05%</li>\n</ul>\n<p>What can you conclude?</p>\n<p class=\"indent\"></p>\n<ul>\n<li>It is now harder to measure avoidable bias, thus progress will be slower going forward.</li>\n<li>If the test set is big enough for the 0,05% error estimate to be accurate, this implies Bayes error is ≤0.05</li>\n</ul>\n<p>⭐ It turns out Peacetopia has hired one of your competitors to build a system as well. Your system and your competitor both deliver systems with about the same running time and memory size. However, your system has higher accuracy! However, when Peacetopia tries out your and your competitor’s systems, they conclude they actually like your competitor’s system better, because even though you have higher overall accuracy, you have more false negatives (failing to raise an alarm when a bird is in the air). What should you do?</p>\n<p class=\"indent\"></p>\n<ul>\n<li>Rethink the appropriate metric for this task, and ask your team to tune to the new metric.</li>\n</ul>\n<p>⭐ You’ve handily beaten your competitor, and your system is now deployed in Peacetopia and is protecting the citizens from birds! But over the last few months, a new species of bird has been slowly migrating into the area, so the performance of your system slowly degrades because your data is being tested on a new type of data.</p>\n<p class=\"indent\"></p>\n<ul>\n<li>Use the data you have to define a new evaluation metric (using a new dev/test set) taking into account the new species, and use that to drive further progress for your team.</li>\n</ul>\n<p>⭐ The City Council thinks that having more Cats in the city would help scare off birds. They are so happy with your work on the Bird detector that they also hire you to build a Cat detector. (Wow Cat detectors are just incredibly useful aren’t they.) Because of years of working on Cat detectors, you have such a huge dataset of 100,000,000 cat images that training on this data takes about two weeks. Which of the statements do you agree with?</p>\n<p class=\"indent\"></p>\n<ul>\n<li>If 100,000,000 examples is enough to build a good enough Cat detector, you might be better of training with just 10,000,000 examples to gain a ≈10x improvement in how quickly you can run experiments, even if each model performs a bit worse because it’s trained on less data.</li>\n<li>Buying faster computers could speed up your teams’ iteration speed and thus your team’s productivity.</li>\n<li>Needing two weeks to train will limit the speed at which you can iterate.</li>\n</ul>\n",
      "date_published": "2020-05-20T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/deeplearning-ai-course-3-autonomous-driving/",
      "url": "https://dinhanhthi.com/deeplearning-ai-course-3-autonomous-driving/",
      "title": "Deep Learning Coursera - Autonomous driving",
      "content_html": "<p>The content in this note is copied exactly from the course. It's really helpful to be a separated note.</p>\n<p>👉 <strong>Course 3</strong> -- <a href=\"/deeplearning-ai-course-3\">Structuring Machine Learning Projects</a>.</p>\n<ol>\n<li>\n<p>You are just getting started on this project. What is the first thing you do? Assume each of the steps below would take about an equal amount of time (a few days).</p>\n<ul>\n<li>Spend a few days training a basic model and see what mistakes it makes.</li>\n</ul>\n<blockquote>\n<p>As discussed in lecture, applied ML is a highly iterative process. If you train a basic model and carry out error analysis (see what mistakes it makes) it will help point you in more promising directions.</p>\n</blockquote>\n</li>\n<li>\n<p>Your goal is to detect road signs (stop sign, pedestrian crossing sign, construction ahead sign) and traffic signals (red and green lights) in images. The goal is to recognize which of these objects appear in each image. You plan to use a deep neural network with ReLU units in the hidden layers.</p>\n<p>For the output layer, a softmax activation would be a good choice for the output layer because this is a multi-task learning problem. True/False?</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" disabled=\"\" type=\"checkbox\"> True</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> False</li>\n</ul>\n<blockquote>\n<p>Softmax would be a good choice if one and only one of the possibilities (stop sign, speed bump, pedestrian crossing, green light and red light) was present in each image.</p>\n</blockquote>\n</li>\n<li>\n<p>You are carrying out error analysis and counting up what errors the algorithm makes. Which of these datasets do you think you should manually go through and carefully examine, one image at a time?</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" disabled=\"\" type=\"checkbox\"> 10,000 randomly chosen images</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" disabled=\"\" type=\"checkbox\"> 500 randomly chosen images</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 500 images on which the algorithm made a mistake</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" disabled=\"\" type=\"checkbox\"> 10,000 images on which the algorithm made a mistake</li>\n</ul>\n</li>\n<li>\n<p>After working on the data for several weeks, your team ends up with the following data:</p>\n<ul>\n<li>100,000 labeled images taken using the front-facing camera of your car.</li>\n<li>900,000 labeled images of roads downloaded from the internet.</li>\n</ul>\n<p>Each image’s labels precisely indicate the presence of any specific road signs and traffic signals or combinations of them. For example, y(i) = [1 0 0 1 0] means the image contains a stop sign and a red traffic light.<br>\nBecause this is a multi-task learning problem, you need to have all your y(i) vectors fully labeled. If one example is equal to [0 ? 1 1 ?] then the learning algorithm will not be able to use that example. True/False?</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" disabled=\"\" type=\"checkbox\"> True</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> False</li>\n</ul>\n<blockquote>\n<p>As seen in the lecture on multi-task learning, you can compute the cost such that it is not influenced by the fact that some entries haven’t been labeled.</p>\n</blockquote>\n</li>\n<li>\n<p>The distribution of data you care about contains images from your car’s front-facing camera; which comes from a different distribution than the images you were able to find and download off the internet. How should you split the dataset into train/dev/test sets?</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" disabled=\"\" type=\"checkbox\"> Mix all the 100,000 images with the 900,000 images you found online. Shuffle everything. Split the 1,000,000 images dataset into 600,000 for the training set, 200,000 for the dev set and 200,000 for the test set.</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" disabled=\"\" type=\"checkbox\"> Mix all the 100,000 images with the 900,000 images you found online. Shuffle everything. Split the 1,000,000 images dataset into 980,000 for the training set, 10,000 for the dev set and 10,000 for the test set.</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> Choose the training set to be the 900,000 images from the internet along with 80,000 images from your car’s front-facing camera. The 20,000 remaining images will be split equally in dev and test sets.</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" disabled=\"\" type=\"checkbox\"> Choose the training set to be the 900,000 images from the internet along with 20,000 images from your car’s front-facing camera. The 80,000 remaining images will be split equally in dev and test sets.</li>\n</ul>\n<blockquote>\n<p>As seen in lecture, it is important that your dev and test set have the closest possible distribution to “real”-data. It is also important for the training set to contain enough “real”-data to avoid having a data-mismatch problem.</p>\n</blockquote>\n</li>\n<li>\n<p>Assume you’ve finally chosen the following split between of the data:</p>\n<ul>\n<li>Training\t940,000 images randomly picked from (900,000 internet images + 60,000 car’s front-facing camera images)\t8.8%</li>\n<li>Training-Dev\t20,000 images randomly picked from (900,000 internet images + 60,000 car’s front-facing camera images)\t9.1%</li>\n<li>Dev\t20,000 images from your car’s front-facing camera\t14.3%</li>\n<li>Test\t20,000 images from the car’s front-facing camera\t14.8%</li>\n</ul>\n<p>You also know that human-level error on the road sign and traffic signals classification task is around 0.5%. Which of the following are True? (Check all that apply).</p>\n<ul>\n<li>You have a large avoidable-bias problem because your training error is quite a bit higher than the human-level error.</li>\n<li>You have a large data-mismatch problem because your model does a lot better on the training-dev set than on the dev set.</li>\n</ul>\n</li>\n<li>\n<p>Based on table from the previous question, a friend thinks that the training data distribution is much easier than the dev/test distribution. What do you think?</p>\n<ul>\n<li>There’s insufficient information to tell if your friend is right or wrong.</li>\n</ul>\n<blockquote>\n<p>The algorithm does better on the distribution of data it trained on. But you don’t know if it’s because it trained on that no distribution or if it really is easier. To get a better sense, measure human-level error separately on both distributions.</p>\n</blockquote>\n</li>\n<li>\n<p>You decide to focus on the dev set and check by hand what are the errors due to. Here is a table summarizing your discoveries:</p>\n<ul>\n<li>Overall dev set error\t14.3%</li>\n<li>Errors due to incorrectly labeled data\t4.1%</li>\n<li>Errors due to foggy pictures\t8.0%</li>\n<li>Errors due to rain drops stuck on your car’s front-facing camera\t2.2%</li>\n<li>Errors due to other causes\t1.0%</li>\n</ul>\n<p>In this table, 4.1%, 8.0%, etc.are a fraction of the total dev set (not just examples your algorithm mislabeled). I.e. about 8.0/14.3 = 56% of your errors are due to foggy pictures.</p>\n<p>The results from this analysis implies that the team’s highest priority should be to bring more foggy pictures into the training set so as to address the 8.0% of errors in that category. True/False?</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> False because this would depend on how easy it is to add this data and how much you think your team thinks it’ll help.</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" disabled=\"\" type=\"checkbox\"> True because it is the largest category of errors. As discussed in lecture, we should prioritize the largest category of error to avoid wasting the team’s time.</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" disabled=\"\" type=\"checkbox\"> True because it is greater than the other error categories added together (8.0 &gt; 4.1+2.2+1.0).</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" disabled=\"\" type=\"checkbox\"> False because data augmentation (synthesizing foggy images by clean/non-foggy images) is more efficient.</li>\n</ul>\n</li>\n<li>\n<p>You can buy a specially designed windshield wiper that help wipe off some of the raindrops on the front-facing camera. Based on the table from the previous question, which of the following statements do you agree with?</p>\n<ul>\n<li>2.2% would be a reasonable estimate of the maximum amount this windshield wiper could improve performance.</li>\n</ul>\n<blockquote>\n<p>You will probably not improve performance by more than 2.2% by solving the raindrops problem. If your dataset was infinitely big, 2.2% would be a perfect estimate of the improvement you can achieve by purchasing a specially designed windshield wiper that removes the raindrops.</p>\n</blockquote>\n</li>\n<li>\n<p>You decide to use data augmentation to address foggy images. You find 1,000 pictures of fog off the internet, and “add” them to clean images to synthesize foggy days, like this:</p>\n<p>Which of the following statements do you agree with? (Check all that apply.)</p>\n<ul>\n<li>So long as the synthesized fog looks realistic to the human eye, you can be confident that the synthesized data is accurately capturing the distribution of real foggy images, since human vision is very accurate for the problem you’re solving.</li>\n</ul>\n<blockquote>\n<p>If the synthesized images look realistic, then the model will just see them as if you had added useful data to identify road signs and traffic signals in a foggy weather. I will very likely help.</p>\n</blockquote>\n</li>\n<li>\n<p>After working further on the problem, you’ve decided to correct the incorrectly labeled data on the dev set. Which of these statements do you agree with? (Check all that apply).</p>\n<ul>\n<li>You should not correct incorrectly labeled data in the training set as well so as to avoid your training set now being even more different from your dev set.</li>\n</ul>\n<blockquote>\n<p>Deep learning algorithms are quite robust to having slightly different train and dev distributions.</p>\n</blockquote>\n<ul>\n<li>You should also correct the incorrectly labeled data in the test set, so that the dev and test sets continue to come from the same distribution</li>\n</ul>\n<blockquote>\n<p>Because you want to make sure that your dev and test data come from the same distribution for your algorithm to make your team’s iterative development process is efficient.</p>\n</blockquote>\n</li>\n<li>\n<p>So far your algorithm only recognizes red and green traffic lights. One of your colleagues in the startup is starting to work on recognizing a yellow traffic light. (Some countries call it an orange light rather than a yellow light; we’ll use the US convention of calling it yellow.) Images containing yellow lights are quite rare, and she doesn’t have enough data to build a good model. She hopes you can help her out using transfer learning.</p>\n<p>What do you tell your colleague?</p>\n<ul>\n<li>She should try using weights pre-trained on your dataset, and fine-tuning further with the yellow-light dataset.</li>\n</ul>\n<blockquote>\n<p>You have trained your model on a huge dataset, and she has a small dataset. Although your labels are different, the parameters of your model have been trained to recognize many characteristics of road and traffic images which will be useful for her problem. This is a perfect case for transfer learning, she can start with a model with the same architecture as yours, change what is after the last hidden layer and initialize it with your trained parameters.</p>\n</blockquote>\n</li>\n<li>\n<p>Another colleague wants to use microphones placed outside the car to better hear if there’re other vehicles around you. For example, if there is a police vehicle behind you, you would be able to hear their siren. However, they don’t have much to train this audio system. How can you help?</p>\n<ul>\n<li>Neither transfer learning nor multi-task learning seems promising.</li>\n</ul>\n<blockquote>\n<p>The problem he is trying to solve is quite different from yours. The different dataset structures make it probably impossible to use transfer learning or multi-task learning.</p>\n</blockquote>\n</li>\n<li>\n<p>To recognize red and green lights, you have been using this approach:</p>\n<ul>\n<li>(A) Input an image (x) to a neural network and have it directly learn a mapping to make a prediction as to whether there’s a red light and/or green light (y).</li>\n</ul>\n<p>A teammate proposes a different, two-step approach:</p>\n<ul class=\"contains-task-list\">\n<li>\n<p>(B) In this two-step approach, you would first (i) detect the traffic light in the image (if any), then (ii) determine the color of the illuminated lamp in the traffic light.<br>\nBetween these two, Approach B is more of an end-to-end approach because it has distinct steps for the input end and the output end. True/False?</p>\n</li>\n<li class=\"task-list-item\">\n<p><input class=\"task-list-item-checkbox\" disabled=\"\" type=\"checkbox\"> True</p>\n</li>\n<li class=\"task-list-item\">\n<p><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> False</p>\n</li>\n</ul>\n<blockquote>\n<p>(A) is an end-to-end approach as it maps directly the input (x) to the output (y).</p>\n</blockquote>\n</li>\n<li>\n<p>Approach A (in the question above) tends to be more promising than approach B if you have a ________ (fill in the blank).</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> Large training set</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" disabled=\"\" type=\"checkbox\"> Multi-task learning problem.</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" disabled=\"\" type=\"checkbox\"> Large bias problem.</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" disabled=\"\" type=\"checkbox\"> Problem with a high Bayes error.</li>\n</ul>\n<blockquote>\n<p>In many fields, it has been observed that end-to-end learning works better in practice, but requires a large amount of data.</p>\n</blockquote>\n</li>\n</ol>\n",
      "date_published": "2020-05-20T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/deeplearning-ai-course-3/",
      "url": "https://dinhanhthi.com/deeplearning-ai-course-3/",
      "title": "DL 3 - Structuring ML Projects",
      "content_html": "<p>This is my note for the course (<a href=\"https://www.coursera.org/learn/machine-learning-projects\">Structuring Machine Learning Projects</a>). The codes in this note are rewritten to be more clear and concise.</p>\n<p>👉 <strong>Course 1</strong> -- <a href=\"/deeplearning-ai-course-1\">Neural Networks and Deep Learning</a>.<br>\n👉 <strong>Course 2</strong> -- <a href=\"/deeplearning-ai-course-2\">Improving Deep Neural Networks: Hyperparameter tuning, Regularization and Optimization</a>.<br>\n👉 <strong>Course 3</strong> -- <a href=\"/deeplearning-ai-course-3\">Structuring Machine Learning Projects</a>.<br>\n👉 <strong>Course 4</strong> -- <a href=\"https://www.notion.so/dinhanhthi/CNN-by-deeplearning-ai-a081d253fc2c4c0b99edd2757c759b9e\">Convolutional Neural Networks</a>.<br>\n👉 <strong>Course 5</strong> -- <a href=\"https://www.notion.so/dinhanhthi/Sequence-models-by-deeplearning-ai-427774f7b31846fdb17ac09cd2353fbe\">Sequence Models</a>.</p>\n<p>⭐ <strong>Case study</strong> (should read): <a href=\"/deeplearning-ai-course-3-bird-recognition-peacetopia\">Bird recognition in the city of Peacetopia</a>.<br>\n⭐ <strong>Case study</strong> (should read): <a href=\"/deeplearning-ai-course-3-autonomous-driving\">Autonomous driving</a> (I copied it from <a href=\"https://github.com/Kulbear/deep-learning-coursera/blob/master/Structuring%20Machine%20Learning%20Projects/Week%202%20Quiz%20-%20Autonomous%20driving%20(case%20study).md\">this</a>).</p>\n<p>This course will give you some strategies to help analyze your problem to go in a direction that will help you get better results.</p>\n<h2 id=\"introduction-to-ml-strategy\">Introduction to ML Strategy <a class=\"direct-link\" href=\"#introduction-to-ml-strategy\">#</a></h2>\n<h3 id=\"why-ml-strategy%3F\">Why ML strategy? <a class=\"direct-link\" href=\"#why-ml-strategy%3F\">#</a></h3>\n<ul>\n<li>\n<p>&quot;<em>ML strategy</em>&quot; = How to structure your ML project?</p>\n</li>\n<li>\n<p><mark markdown='span'><strong>Ideas to improve your ML systems</strong></mark>:</p>\n<div class=\"two-columns-list\" markdown=\"1\">\n<ol>\n<li>Collect more data.</li>\n<li>Collect more diverse training set.</li>\n<li>Train algorithm longer with gradient descent.</li>\n<li>Try different optimization algorithm (e.g. Adam).</li>\n<li>Try bigger network.</li>\n<li>Try smaller network.</li>\n<li>Try dropout.</li>\n<li>Add L2 regularization.</li>\n<li>Change network architecture (activation functions, # of hidden units, etc.)</li>\n</ol>\n</div>\n</li>\n<li>\n<p>However, don't spend too much time to do one of above things, <mark>we need to go right direction!</mark></p>\n</li>\n</ul>\n<h3 id=\"orthogonalization\">Orthogonalization <a class=\"direct-link\" href=\"#orthogonalization\">#</a></h3>\n<ul>\n<li>In <strong>orthogonalization</strong>, you have some controls, but each control does a specific task and doesn't affect other controls.</li>\n<li><mark markdown='span'><strong>Chain of assumptions in ML</strong></mark>:\n<ol>\n<li>You'll have to fit training set well on cost function (near human level performance if possible).</li>\n</ol>\n<ul>\n<li>If it's not achieved you could try bigger network, another optimization algorithm (like Adam)...</li>\n</ul>\n<ol start=\"2\">\n<li>Fit dev set well on cost function.</li>\n</ol>\n<ul>\n<li>If its not achieved you could try regularization, bigger training set...</li>\n</ul>\n<ol start=\"3\">\n<li>Fit test set well on cost function.</li>\n</ol>\n<ul>\n<li>If its not achieved you could try bigger dev. set...</li>\n</ul>\n<ol start=\"4\">\n<li>Performs well in real world.</li>\n</ol>\n<ul>\n<li>If its not achieved you could try change dev. set, change cost function...</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"setting-up-your-goal\">Setting up your goal <a class=\"direct-link\" href=\"#setting-up-your-goal\">#</a></h2>\n<h3 id=\"single-number-evaluation-metric\">Single number evaluation metric <a class=\"direct-link\" href=\"#single-number-evaluation-metric\">#</a></h3>\n<ul>\n<li><mark markdown='span'><strong>Advice</strong></mark> : It's better and faster to set a single number evaluation metric for your project before you start it.</li>\n<li><strong>Example</strong>: instead of using both precision and recall, just use f1. Check <a href=\"/confusion-matrix-and-f1-score\">this note</a>.</li>\n<li>Dev set + single row number evaluation metric <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> enough to make a choice!</li>\n</ul>\n<h3 id=\"satisfying-and-optimizing-metric\">Satisfying and Optimizing metric <a class=\"direct-link\" href=\"#satisfying-and-optimizing-metric\">#</a></h3>\n<ul>\n<li>It's difficult to set all parameters to a single row number evaluation metric <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> set up (many) <strong>satisfying</strong> + (one) <strong>optimizing</strong> matrix.\n<ul>\n<li><strong>Satisfying</strong> (use threshold): satisfying this is enough.</li>\n<li><strong>Optimizing</strong>: more important, it's accuracy!</li>\n</ul>\n</li>\n<li><strong>Example</strong>: call &quot;Hi Siri&quot;,\n<ul>\n<li>Accuracy: is it awoken? <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇐</mo></mrow><annotation encoding=\"application/x-tex\">\\Leftarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇐</span></span></span></span></span> <strong>optimizing</strong></li>\n<li>False positive: it's awoken but we don't call it! <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇐</mo></mrow><annotation encoding=\"application/x-tex\">\\Leftarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇐</span></span></span></span></span> set the <strong>satisfying</strong> as less then 1 false positive per day!</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"train%2Fdev%2Ftest-distributions\">Train/dev/test distributions <a class=\"direct-link\" href=\"#train%2Fdev%2Ftest-distributions\">#</a></h3>\n<ul>\n<li>The way we set the distribution of train / dev / test sets can impact much on the running time.</li>\n<li>Dev set = developement set / hold out cross validation set.</li>\n<li><mark markdown='span'><strong>Advice</strong></mark>: Make dev set and test set come from the same distribution!</li>\n</ul>\n<h3 id=\"size-of-the-dev-and-test-sets\">Size of the dev and test sets <a class=\"direct-link\" href=\"#size-of-the-dev-and-test-sets\">#</a></h3>\n<ul>\n<li><strong>Old</strong> (less data, &lt;100000): 70% train - 30% test or something like that.</li>\n<li><strong>Now</strong> (big data): 98% - 1% - 1%.</li>\n<li><strong>Test set</strong>: set your <mark>test set to be big enough</mark> to give high confiance in the overall performance of your system.</li>\n</ul>\n<h3 id=\"when-to-change-dev%2Ftest-sets-and-metrics\">When to change dev/test sets and metrics <a class=\"direct-link\" href=\"#when-to-change-dev%2Ftest-sets-and-metrics\">#</a></h3>\n<ul>\n<li>Sometimes, we put our target a wrong place <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> should <mark>change metric!</mark></li>\n<li><strong>Example</strong>: cat classification,\n<ul>\n<li>\n<p><em>Algo A</em>: 3% error but contains porn <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇐</mo></mrow><annotation encoding=\"application/x-tex\">\\Leftarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇐</span></span></span></span></span> train / test error like this!</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mtext>Err (old metric)</mtext><mo>=</mo><mfrac><mn>1</mn><msub><mi>m</mi><mtext>dev</mtext></msub></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><msub><mi>m</mi><mtext>dev</mtext></msub></munderover><mi mathvariant=\"script\">L</mi><mo stretchy=\"false\">{</mo><msubsup><mi>y</mi><mtext>pred</mtext><mrow><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow></msubsup><mo mathvariant=\"normal\">≠</mo><msup><mi>y</mi><mrow><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow></msup><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">\\text{Err (old metric)} = \\dfrac{1}{m_{\\text{dev}}} \\sum_{i=1}^{m_{\\text{dev}}} \\mathcal{L} \\{ y^{(i)}_{\\text{pred}} \\ne y^{(i)} \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord text\"><span class=\"mord\">Err (old metric)</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.945926em;vertical-align:-1.277669em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.3139999999999996em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">dev</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8360000000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6682570000000003em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.316865em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">dev</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15122857142857138em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathcal\">L</span></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0448em;\"><span style=\"top:-2.3986920000000005em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">pred</span></span></span></span></span><span style=\"top:-3.2198em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4374159999999999em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord vbox\"><span class=\"thinbox\"><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"inner\"><span class=\"mrel\"></span></span><span class=\"fix\"></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.188em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span></span></eqn></section></math>\n</li>\n<li>\n<p><em>Algo B</em>: 5% error but no porn <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇐</mo></mrow><annotation encoding=\"application/x-tex\">\\Leftarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇐</span></span></span></span></span> human like this!</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mtext>Err (adapted metric)</mtext></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mfrac><mn>1</mn><mrow><msub><mi mathvariant=\"normal\">Σ</mi><mi>i</mi></msub><msup><mi>W</mi><mrow><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow></msup></mrow></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><msub><mi>m</mi><mtext>dev</mtext></msub></munderover><msup><mi>W</mi><mrow><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow></msup><mi mathvariant=\"script\">L</mi><mo stretchy=\"false\">{</mo><msubsup><mi>y</mi><mtext>pred</mtext><mrow><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow></msubsup><mo mathvariant=\"normal\">≠</mo><msup><mi>y</mi><mrow><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow></msup><mo stretchy=\"false\">}</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><msup><mi>W</mi><mrow><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow></msup></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mrow><mo fence=\"true\">{</mo><mtable rowspacing=\"0.3599999999999999em\" columnalign=\"left left\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mn>1</mn><mtext> if </mtext><msup><mi>X</mi><mrow><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow></msup><mtext> contains non-porn</mtext><mo separator=\"true\">,</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mn>10</mn><mtext> if </mtext><msup><mi>X</mi><mrow><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow></msup><mtext> contains porn</mtext><mi mathvariant=\"normal\">.</mi></mrow></mstyle></mtd></mtr></mtable></mrow></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}\\text{Err (adapted metric)} &amp;= \\dfrac{1}{\\Sigma_i W^{(i)}} \\sum_{i=1}^{m_{\\text{dev}}} W^{(i)} \\mathcal{L} \\{ y^{(i)}_{\\text{pred}} \\ne y^{(i)} \\} \\\\\n    W^{(i)} &amp;= \\begin{cases}1 \\text{ if } X^{(i)} \\text{ contains non-porn}, \\\\10 \\text{ if } X^{(i)} \\text{ contains porn}.\\end{cases}\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:6.545956em;vertical-align:-3.022978em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.522978em;\"><span style=\"top:-5.604721em;\"><span class=\"pstrut\" style=\"height:3.75em;\"></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">Err (adapted metric)</span></span></span></span><span style=\"top:-2.277052em;\"><span class=\"pstrut\" style=\"height:3.75em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.022978em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.522978em;\"><span style=\"top:-5.604721em;\"><span class=\"pstrut\" style=\"height:3.75em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.296em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord\">Σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.814em;\"><span style=\"top:-2.989em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.854em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6682570000000003em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.316865em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">dev</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15122857142857138em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathcal\">L</span></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0448em;\"><span style=\"top:-2.3986920000000005em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">pred</span></span></span></span></span><span style=\"top:-3.2198em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4374159999999999em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord vbox\"><span class=\"thinbox\"><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"inner\"><span class=\"mrel\"></span></span><span class=\"fix\"></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span><span style=\"top:-2.277052em;\"><span class=\"pstrut\" style=\"height:3.75em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size4\">{</span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.69em;\"><span style=\"top:-3.69em;\"><span class=\"pstrut\" style=\"height:3.008em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord text\"><span class=\"mord\"> if </span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span><span class=\"mord text\"><span class=\"mord\"> contains non-porn</span></span><span class=\"mpunct\">,</span></span></span><span style=\"top:-2.25em;\"><span class=\"pstrut\" style=\"height:3.008em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord text\"><span class=\"mord\"> if </span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span><span class=\"mord text\"><span class=\"mord\"> contains porn</span></span><span class=\"mord\">.</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.19em;\"><span></span></span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.022978em;\"><span></span></span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n</li>\n</ul>\n</li>\n<li>This is actually an example of an orthogonalization where you should take a machine learning problem and break it into distinct steps:\n<ol>\n<li>Figure out how to define a metric that captures what you want to do (place the target).</li>\n<li>Worry about how to actually do well on this metric (how to aim/shoot accurately at the target).</li>\n</ol>\n</li>\n<li><strong>Conclusion</strong>: if doing well on your metric + dev/test set doesn't correspond to doing well in your application, change your metric and/or dev/test set.</li>\n</ul>\n<h2 id=\"comparing-to-human-level-performance\">Comparing to human-level performance <a class=\"direct-link\" href=\"#comparing-to-human-level-performance\">#</a></h2>\n<h3 id=\"why-human-level-performance%3F\">Why human-level performance? <a class=\"direct-link\" href=\"#why-human-level-performance%3F\">#</a></h3>\n<ul>\n<li><strong>Reasons</strong>:\n<ol>\n<li>ML algos are now work better &amp; easier (than the past) <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> only them is not enough <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> need human-level performance (HLP).</li>\n<li>Workflow of building ML system <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> wanna more efficient? <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> try to do something that human can also do.</li>\n</ol>\n</li>\n<li><strong>Bayes error</strong> = best possible error (theory).</li>\n<li>After surpassing HLP, <em>it's slow down</em>, why?\n<ol>\n<li>HLP is very closed to Bayes optimal error. Ex: we can recognize things in blur.</li>\n<li>Whenever under HLP, there are certain tools to use to improve the performance but there is no tool to do after surpassing HLP.</li>\n</ol>\n</li>\n<li><mark>So long as ML is worse than HLP, you can:</mark>\n<ul>\n<li>Get labeled data from human.</li>\n<li>Gain insight from manual error analysis: why did a person get this right?</li>\n<li>Better analysis of bias / variance.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"avoidable-bias\">Avoidable bias <a class=\"direct-link\" href=\"#avoidable-bias\">#</a></h3>\n<ul>\n<li>\n<p>Sometimes we don't want algo works TOO WELL on the training set <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> use HLP.</p>\n</li>\n<li>\n<p><strong>Example</strong>: cat recognition gives 2 different results (but the same gap between train &amp; test)</p>\n<ol>\n<li><strong>Big gap</strong> between train and human. <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> focus on <mark>reducing bias</mark> (bigger NN, run training longer,...) <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇐</mo></mrow><annotation encoding=\"application/x-tex\">\\Leftarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇐</span></span></span></span></span> <strong>Underfitting</strong>!</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th>Humans</th>\n<th>1%</th>\n<th>1%</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>Training error</strong></td>\n<td>8%</td>\n<td>8%</td>\n</tr>\n<tr>\n<td><strong>Dev Error</strong></td>\n<td>10%</td>\n<td>10%</td>\n</tr>\n</tbody>\n</table>\n<ol start=\"2\">\n<li><strong>Small gap</strong> between train and human. <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> focus on <mark>reducing variance</mark> <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇐</mo></mrow><annotation encoding=\"application/x-tex\">\\Leftarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇐</span></span></span></span></span> <strong>Overfitting</strong>!</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th>Humans</th>\n<th>1%</th>\n<th>7.5%</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>Training error</strong></td>\n<td>8%</td>\n<td>8%</td>\n</tr>\n<tr>\n<td><strong>Dev Error</strong></td>\n<td>10%</td>\n<td>10%</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>\n<p>Based on the human error <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> decide whether high/low error <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> bias / variance reduction!</p>\n</li>\n<li>\n<p>Gap between human &amp; training <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> <strong>Avoidable bias</strong>.</p>\n</li>\n<li>\n<p>Gap between training &amp; test <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> <strong>Variance</strong>!</p>\n</li>\n</ul>\n<h3 id=\"understanding-human-level-performance\">Understanding human-level performance <a class=\"direct-link\" href=\"#understanding-human-level-performance\">#</a></h3>\n<ul>\n<li>Use the nearest value to Bayes error as a human level error! (the smallest)</li>\n<li>The way we choose HL error sometimes can impact the way we improve our algo (bias or variance reduction)</li>\n<li><mark markdown='span'>Use human level error as a <strong>proxy</strong> of Bayes error!</mark></li>\n</ul>\n<h3 id=\"surpassing-human-level-performance\">Surpassing human-level performance <a class=\"direct-link\" href=\"#surpassing-human-level-performance\">#</a></h3>\n<ul>\n<li>When training error <strong>less than</strong> human error, it's difficile to decide what's avoidable bias!</li>\n<li>In some problems, deep learning has surpassed human-level performance. Example: Online advertising, Product recommendation, Loan approval. <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇐</mo></mrow><annotation encoding=\"application/x-tex\">\\Leftarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇐</span></span></span></span></span> <strong>Structured data</strong>.</li>\n<li>In <strong>natural perception tasks</strong> (speech recognition, NLP,...): ML surpasses human!</li>\n<li><mark markdown='span'><strong>In short</strong></mark>:\n<ul>\n<li>Machine &gt; human <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇐</mo></mrow><annotation encoding=\"application/x-tex\">\\Leftarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇐</span></span></span></span></span> structured data.</li>\n<li>Machine &gt; <strong>One</strong> person <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇐</mo></mrow><annotation encoding=\"application/x-tex\">\\Leftarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇐</span></span></span></span></span> some natural perception tasks.</li>\n<li>Machine &gt; human <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇐</mo></mrow><annotation encoding=\"application/x-tex\">\\Leftarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇐</span></span></span></span></span> natural perception tasks.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"improving-your-model-performance\">Improving your model performance <a class=\"direct-link\" href=\"#improving-your-model-performance\">#</a></h3>\n<ul>\n<li><mark markdown='span'>The two fundamental asssumptions of supervised learning</mark>:\n<ol>\n<li>You can fit the training set pretty well. This is roughly saying that you can achieve low <strong>avoidable bias</strong>.</li>\n<li>The training set performance generalizes pretty well to the dev/test set. This is roughly saying that <strong>variance</strong> is not too bad.</li>\n</ol>\n</li>\n<li><mark markdown='span'>To improve your deep learning supervised system</mark> follow these guidelines:\n<ol>\n<li>Look at the difference between human level error and the training error - <strong>avoidable bias</strong>.</li>\n<li>Look at the difference between the dev/test set and training set error - <strong>Variance</strong>.</li>\n<li>If <strong>avoidable bias</strong> is large you have these options:\n<ul>\n<li>Train bigger model.</li>\n<li>Train longer/better optimization algorithm (like Momentum, RMSprop, Adam).</li>\n<li>Find better NN architecture/hyperparameters search.</li>\n</ul>\n</li>\n<li>If <strong>variance</strong> is large you have these options:\n<ul>\n<li>Get more training data.</li>\n<li>Regularization (L2, Dropout, data augmentation).</li>\n<li>Find better NN architecture/hyperparameters search.</li>\n</ul>\n</li>\n</ol>\n</li>\n</ul>\n<h2 id=\"error-analysis\">Error Analysis <a class=\"direct-link\" href=\"#error-analysis\">#</a></h2>\n<h3 id=\"carrying-out-error-analysis\">Carrying out error analysis <a class=\"direct-link\" href=\"#carrying-out-error-analysis\">#</a></h3>\n<ul>\n<li>\n<p><mark markdown='span'><strong>Error Analysis</strong></mark> = manually examining mistakes that your algorithm is making can give you insight what to do next.</p>\n</li>\n<li>\n<p><strong>Example</strong>: in cat recognition, there are some factors affecting <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> Consider a <mark markdown='span'>table <strong>ERROR ANALYSIS</strong></mark> <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> Evaluate multiple ideas in parallel,</p>\n<table>\n<thead>\n<tr>\n<th>Image</th>\n<th>Dog</th>\n<th>Great Cats</th>\n<th>blurry</th>\n<th>Instagram filters</th>\n<th>Comments</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>✓</td>\n<td></td>\n<td></td>\n<td>✓</td>\n<td>Pitbull</td>\n</tr>\n<tr>\n<td>2</td>\n<td>✓</td>\n<td></td>\n<td>✓</td>\n<td>✓</td>\n<td></td>\n</tr>\n<tr>\n<td>3</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td>Rainy day at zoo</td>\n</tr>\n<tr>\n<td>4</td>\n<td></td>\n<td>✓</td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>....</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td><strong>% totals</strong></td>\n<td><strong>8%</strong></td>\n<td><strong>43%</strong></td>\n<td><strong>61%</strong></td>\n<td><strong>12%</strong></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<p>We focus on <em>Great Cats</em> and <em>blurry</em> (have much influence).</p>\n</li>\n<li>\n<p><mark>To carry out error analysis</mark> <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> you should find a set of mislabeled examples in dev set <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> look at mislabeled: False Positive or False Negative (number of errors) <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> decide if to create a new category?</p>\n</li>\n</ul>\n<h3 id=\"cleaning-up-incorrectly-labaled-data\">Cleaning up incorrectly labaled data <a class=\"direct-link\" href=\"#cleaning-up-incorrectly-labaled-data\">#</a></h3>\n<ul>\n<li><strong>In training</strong>: DL algo is robust to random errors <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> we can ignore them!\n<ul>\n<li>However, DL algo is LESS robust to systematic errors.</li>\n</ul>\n</li>\n<li><strong>Solutions</strong>: Using table Error Analysis to decide what types of error to focus in the next step (base of their fraction of errors in the total of errors).</li>\n<li>(Recall) <mark markdown='span'>The purpose of <strong>dev set</strong> is to help you select between 2 classifier A and B</mark>.</li>\n<li><strong>If you decide to fix labels</strong>:\n<ol>\n<li>Apply the <mark>same process to dev and test sets</mark> and make sure they come from the same distribution!</li>\n<li>Examine <strong>also</strong> on examples got <strong>right</strong> (not only on the ones got wrong) <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> otherwise, we have overfitting problem!</li>\n<li>Train vs dev/test may have different distribution <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> <strong>No need</strong> to be corrected mislabeled on training set!</li>\n</ol>\n</li>\n</ul>\n<h3 id=\"when-starting-a-new-project%3F\">When starting a new project? <a class=\"direct-link\" href=\"#when-starting-a-new-project%3F\">#</a></h3>\n<p><mark markdown='span'><strong>Advice</strong></mark>: Build your first system <strong>quickly</strong> and then iterate!!</p>\n<p class=\"indent\"></p>\n<ol>\n<li>Quickly set up dev/test sets + metric.</li>\n<li>Build initial system quickly.</li>\n<li>Check bias analysis and Error analysis <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> Priopritize the next step!</li>\n</ol>\n<h2 id=\"mismatched-training-and-dev%2Ftest-set\">Mismatched training and dev/test set <a class=\"direct-link\" href=\"#mismatched-training-and-dev%2Ftest-set\">#</a></h2>\n<h3 id=\"training-%26-testing-on-different-distribution\">Training &amp; testing on different distribution <a class=\"direct-link\" href=\"#training-%26-testing-on-different-distribution\">#</a></h3>\n<ul>\n<li>Example: <strong>training</strong> (photos from internet, 200K), <strong>dev &amp; test</strong> (photos from phone, 4K).</li>\n<li><strong>Shouldn't</strong>: Shufflt all 204K and split into train/dev/test!</li>\n<li><mark markdown='span'><strong>Should</strong></mark>:\n<ul>\n<li>Train - 200K (web) + 2K (mobile).</li>\n<li>Dev = Test = 0.5K (mobile).</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"bias-and-variance-with-mismatched-data-dist\">Bias and Variance with mismatched data dist <a class=\"direct-link\" href=\"#bias-and-variance-with-mismatched-data-dist\">#</a></h3>\n<ul>\n<li>\n<p>Sometimes, <mark markdown='span'>dev err &gt; training err</mark> <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> (possibly) the data in dev is <strong>more difficult</strong> to predict than the data in training.</p>\n</li>\n<li>\n<p>When comming from training err to dev err:</p>\n<ol>\n<li>The algo saw data in training set but not in dev set.</li>\n<li>The distribution of data in dev set is different!</li>\n</ol>\n</li>\n<li>\n<p><strong>IDEA</strong>: create a new <mark>&quot;train-dev&quot; set</mark> which has the same distribution as training data but not used for training.</p>\n</li>\n<li>\n<p><mark markdown='span'><strong>Keys to be considered</strong></mark>: Human error, Train error, Train-dev error, Dev error, Test error:</p>\n<ul>\n<li><a href=\"#avoidable-bias\"><strong>Avoidable bias</strong></a> = <em>train</em> - <em>human</em>.</li>\n<li><strong>Variance problem</strong> = <em>train-dev</em> - <em>train</em></li>\n<li><strong>Data mismatch</strong> = <em>dev</em> - <em>train-dev</em></li>\n<li><strong>Overfitting to dev set</strong> = <em>test</em> - <em>dev</em></li>\n</ul>\n</li>\n<li>\n<p>If there is a <strong>huge gap between dev &amp; test err</strong> <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> overtune to the dev set <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> may need to find a bigger dev set!</p>\n</li>\n<li>\n<p><strong>Example 1</strong>: A high <em>variance problem</em>! (train/train-dev <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">\\to</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span></span> big, train-dev/dev <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">\\to</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span></span> small)</p>\n<ul>\n<li>Human error: 0%</li>\n<li>Train error: <strong>1%</strong></li>\n<li>Train-dev error: <strong>9%</strong></li>\n<li>Dev error: 10%</li>\n</ul>\n</li>\n<li>\n<p><strong>Example 2</strong>: <em>data mismatch problem</em> (train/train-dev <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">\\to</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span></span> small, train-dev/dev <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">\\to</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span></span> big)</p>\n<ul>\n<li>Human error: 0%</li>\n<li>Train error: <strong>1%</strong></li>\n<li>Train-dev error: <strong>1.5%</strong></li>\n<li>Dev error: <strong>10%</strong></li>\n</ul>\n</li>\n<li>\n<p><strong>Example 3</strong>: <em>avoidable bias problem</em> (because training err is much worse than human level, others are small)</p>\n<ul>\n<li>Human error: <strong>0%</strong></li>\n<li>Train error: <strong>10%</strong></li>\n<li>Train-dev error: 11%</li>\n<li>Dev error: 12%</li>\n</ul>\n</li>\n<li>\n<p><strong>Example 4</strong>: <em>Avoidable bias problem</em> and <em>mismatch problem</em>. (human/train <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">\\to</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span></span> big, train-dev/dev <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">\\to</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span></span> big)</p>\n<ul>\n<li>Human error: <strong>0%</strong></li>\n<li>Train error: <strong>1%</strong></li>\n<li>Train-dev error: <strong>1.5%</strong></li>\n<li>Dev error: <strong>10%</strong></li>\n</ul>\n</li>\n<li>\n<p><strong>Remark</strong>: most of the time, the errs are decreasing from <em>human</em> to <em>test</em>. However if (sometimes) <em>dev</em> &gt; <em>train-dev</em>, we rewrite all above errors in to a new table like this,</p>\n<p><img src=\"/img/post/mooc/dl/mismatch.jpg\" alt=\"Error table\" class=\"img-80 pop\"><br>\n<em>Error table. Image from the course.</em><br>\nWe find <strong>by hand</strong> 2 6% errors to consider the quality of dev/test err. In the figure, your figure is infact GOOD!</p>\n</li>\n</ul>\n<h3 id=\"addressing-data-mismatch\">Addressing data mismatch <a class=\"direct-link\" href=\"#addressing-data-mismatch\">#</a></h3>\n<ul>\n<li>Addressing data mismatch (<em>don't garantee it will work but you can try</em>):\n<ul>\n<li>Carry out manually error analysis <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> try to understand difference between training and dev/test errors.</li>\n<li>Make the training data more similar or collect more data similar to dev/test set.</li>\n</ul>\n</li>\n<li><mark markdown='span'><strong>Artificial data synthesis</strong></mark>:\n<ul>\n<li>&quot;<em>the quick brown fox jumps over the lazy dog</em>&quot; <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇐</mo></mrow><annotation encoding=\"application/x-tex\">\\Leftarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇐</span></span></span></span></span> shortest sentence contains all A-Z letters in English.</li>\n<li>Create manually data (combine 2 different types of data). However, BE CAREFUL if one of 2 data is much smaller to the other. It may be overfitting to the smaller!</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"learning-from-multiple-tasks\">Learning from multiple tasks <a class=\"direct-link\" href=\"#learning-from-multiple-tasks\">#</a></h2>\n<h3 id=\"transfer-learning\">Transfer learning <a class=\"direct-link\" href=\"#transfer-learning\">#</a></h3>\n<ul>\n<li>\n<p><strong>IDEA</strong>: already trained on 1 task (<em>Task A</em>) + don't have enough data on the current task (<em>Task B</em>) <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> we can apply the trained network on the current one.</p>\n<p><img src=\"/img/post/mooc/dl/transfer-learning.jpg\" alt=\"Transfer learning\" class=\"img-90 pop\"><br>\n<em>Transfer learning. Image from the course.</em></p>\n</li>\n<li>\n<p>To do transfer learning, delete the last layer of NN and it's weights and:</p>\n<ol>\n<li>Option 1: if you <strong>have a small data set</strong> - keep all the other weights as a fixed weights. Add a new last layer(-s) and initialize the new layer weights and feed the new data to the NN and learn the new weights.</li>\n<li>Option 2: if you <strong>have enough data</strong> you can retrain all the weights.</li>\n</ol>\n</li>\n<li>\n<p><strong>Pretraining</strong> = training on task A.</p>\n</li>\n<li>\n<p><strong>Fine-tuning</strong> = using pretrained weights + use new data to train task B.</p>\n</li>\n<li>\n<p>This idea is useful because some of layers of trained NN contain helpful information for the new problem.</p>\n</li>\n<li>\n<p><mark markdown='span'><strong>Transfer learning makes sense when</strong></mark> (e.g. from A to B):</p>\n<ol>\n<li>Task A and B have the same input X.</li>\n<li>You have a lot more data for task A than task B.</li>\n<li>Low level features from A could be helpful for learning B.</li>\n</ol>\n</li>\n</ul>\n<h3 id=\"multi-task-learning\">Multi-task learning <a class=\"direct-link\" href=\"#multi-task-learning\">#</a></h3>\n<ul>\n<li>\n<p>1 NN do several things at the same time and each of these tasks helps hopefully all of the other tasks!</p>\n</li>\n<li>\n<p><strong>Example</strong>: Autonomous driving example <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> Detect several things (not only 1) at the same time like: pedestrians, other cars, stop signs, traffic lights,...</p>\n<p><img src=\"/img/post/mooc/dl/multi-task.jpg\" alt=\"Multi-task learning\" class=\"img-80 pop\"><br>\n<em>Multi-task learning. Image from the course.</em></p>\n</li>\n<li>\n<p>We use <strong>Logistic Regression</strong> for the last layer. It's DIFFERENT from <strong>softmax regression</strong> because in this case, we need to determine more than 2 labels!</p>\n</li>\n<li>\n<p>If there are some infos unclear in Y (e.g. don't know if there is a traffic light or not?), we consider only the rest and just ignore the unclear!</p>\n</li>\n<li>\n<p><mark markdown='span'><strong>Multi-task makes sense when</strong></mark> (e.g. from A to B):</p>\n<ol>\n<li>Training on a set of tasks that could benefit from having shred lover-level features.</li>\n<li>Usually: amount of data you have for each task is quite similar.</li>\n<li>Can train a big enough NN to do well on all the task.</li>\n</ol>\n</li>\n<li>\n<p>In general (have ENOUGH DATA), multi-task gives better performances!</p>\n</li>\n<li>\n<p><strong>Other remarks</strong>:</p>\n<ul>\n<li>Multi-task learning (usually) works good in <strong>object detection</strong>.</li>\n<li>(Usually) transfer learning is USED MORE OFTEN (an better) than multi task learning!</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"end-to-end-deep-learning\">End-to-end deep learning <a class=\"direct-link\" href=\"#end-to-end-deep-learning\">#</a></h2>\n<ul>\n<li>\n<p>There have been some data processing system require multiple stages of processing. <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> <mark>End-to-end does take all of them into 1 NN</mark>.</p>\n</li>\n<li>\n<p><strong>Example</strong>: speech recognition from English to French: this case, end-to-end works better than separated problems because it has enough data!</p>\n<p><img src=\"/img/post/mooc/dl/end-to-end.jpg\" alt=\"End to end learning\" class=\"img-90 pop\"><br>\n<em>End-to-end learning. Image from the course.</em></p>\n</li>\n<li>\n<p><strong>Example</strong>: auto open gate system: in this case, separated task is better end-to-end.</p>\n<ol>\n<li>Determine the head.</li>\n<li>Determine the name.</li>\n</ol>\n</li>\n<li>\n<p><mark>When end-to-end works, it works very well!</mark></p>\n</li>\n<li>\n<p><strong>Pros &amp; Cons</strong>:</p>\n<ul>\n<li><strong>Pros</strong>:\n<ul>\n<li>Let the data speaks.</li>\n<li>Let hand-designing of components needed.</li>\n</ul>\n</li>\n<li><strong>Cons</strong>:\n<ul>\n<li>May need a lot of data.</li>\n<li>Excludes potentially useful hand-designing components.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>If having enough data <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> can think of using end-to-end!</p>\n</li>\n<li>\n<p><mark markdown='span'><strong>Advice</strong></mark>: carefully choose what type of <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding=\"application/x-tex\">X \\to Y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span></span></span></span></span> mapping <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇐</mo></mrow><annotation encoding=\"application/x-tex\">\\Leftarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇐</span></span></span></span></span> depends on what tasks you can get data for!</p>\n</li>\n</ul>\n",
      "date_published": "2020-05-15T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/terminal/",
      "url": "https://dinhanhthi.com/terminal/",
      "title": "Terminals",
      "content_html": "<p>A collection of console terminals in serveral operation systems.</p>\n<p>👉 Note: <a href=\"/bash-command-line\">Bash Command Lines</a>.</p>\n<h2 id=\"windows\">Windows <a class=\"direct-link\" href=\"#windows\">#</a></h2>\n<p>Install <a href=\"https://cmder.net\">cmder</a> (drop-down by <kbd>Ctr</kbd>+<kbd>`</kbd>) and use <a href=\"https://github.com/dinhanhthi/scripts/tree/master/settings/windows/cmder\">this setting files</a>. Files should be copied to,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># user-ConEmu.xml -> cmder/vendor/conemu-maximus5/ (or `cmder/config/`)</span><br><span class=\"token comment\"># user_aliases.cmd -> cmder/config/</span><br><span class=\"token comment\"># ubuntu.ico -> cmder/icons/</span></code></pre>\n<p>👉 Note: <a href=\"/docker-wsl2-windows/\">WSL2 on Windows</a>.</p>\n<div class=\"hsbox\"><div class=\"hs__title\">If you use WSL?</div><div class=\"hs__content\"><ul>\n<li>Open settings &gt; <strong>Startup</strong> &gt; <strong>Tasks</strong> &gt; ``. You can change icon by modify <code>%\\icons\\cmder.ico</code> to <code>%\\icons\\ubuntu.ico</code>.</li>\n<li>Using <em>Cascadia Code PL</em> font!</li>\n</ul>\n</div></div>\n<div class=\"hsbox\"><div class=\"hs__title\">Old options (using Windows Terminal)</div><div class=\"hs__content\"><p>I use <a href=\"https://github.com/microsoft/terminal\">Windows Terminal</a>: <a href=\"https://github.com/dinhanhthi/scripts/blob/master/settings/windows/windows_terminal/settings.json\">my setting file</a>, read <a href=\"https://docs.microsoft.com/en-us/windows/terminal/customize-settings/profile-settings\">this tut</a> for more.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># where windows terminal setting file locates?</span><br>C/Users/dinha/AppData/Local/Packages/Microsoft.WindowsTerminal_8wekyb3d8bbwe/LocalState/settings.json</code></pre>\n<p>👉 Dracular theme? Follow <a href=\"https://draculatheme.com/windows-terminal\">this tut</a>.</p>\n<p>Drop-down (quake style) whenever <kbd>Ctrl</kbd> + <kbd>~</kbd>? Using <a href=\"https://github.com/flyingpie/windows-terminal-quake\">this app</a> + this <a href=\"https://github.com/dinhanhthi/scripts/blob/master/settings/windows/windows_terminal/windows-terminal-quake.json\">setting file</a>. Don't forget to put it in a fixed location and make it starting with your windows</p>\n<p><strong>Why I don't use this anymore?</strong>: the flash on open the terminal is annoying. You have to open by yourself both of Windows Terminal and the plugin. It's better to use cmder.</p>\n</div></div>\n<div class=\"hsbox\"><div class=\"hs__title\">Windows Terminal + WSL?</div><div class=\"hs__content\"><p>👉 Install <a href=\"https://docs.microsoft.com/en-us/windows/terminal/get-started\">Windows Terminal</a>.</p>\n<p>Change default setting theme to Linux Distro!</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Install Zsh</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> <span class=\"token function\">zsh</span><br><span class=\"token function\">zsh</span> --version<br><br><span class=\"token comment\"># make default</span><br><span class=\"token function\">sh</span> -c <span class=\"token string\">\"<span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">curl</span> -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh<span class=\"token variable\">)</span></span>\"</span><br><span class=\"token comment\"># exit all windows and reopen</span><br><br><span class=\"token comment\"># check version</span><br><span class=\"token builtin class-name\">echo</span> <span class=\"token environment constant\">$SHELL</span> <span class=\"token comment\"># /usr/bin/zsh  or similar</span></code></pre>\n<p>Continue to <a href=\"/terminal#zsh-linux\">this note</a> with following remarks:</p>\n<ul>\n<li>You have to install all the fonts suggested in that note (just for sure).</li>\n<li>You have to install MS's <a href=\"https://github.com/microsoft/cascadia-code/releases\">cascadia-code font</a> (download zip and install all files there manually). Then you choose from Windows Terminal or cmder the font face is <code>Cascadia Code PL</code>.</li>\n<li><a href=\"https://docs.microsoft.com/en-us/windows/terminal/tutorials/powerline-setup\">This article</a> may be interesting also.</li>\n</ul>\n</div></div>\n<h2 id=\"linux\">Linux <a class=\"direct-link\" href=\"#linux\">#</a></h2>\n<h3 id=\"guake-terminal\">Guake terminal <a class=\"direct-link\" href=\"#guake-terminal\">#</a></h3>\n<ul>\n<li>\n<p><a href=\"http://guake-project.org\">Download guake terminal</a></p>\n</li>\n<li>\n<p>Install <a href=\"https://ohmyz.sh/\">Zsh</a>, follow <a href=\"#zsh\">this note</a>.</p>\n</li>\n<li>\n<p>Save/Restore settings:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># save settings</span><br>guake --save-preferences ~/Downloads/guake_prefs<br><span class=\"token comment\"># load settings</span><br>guake --restore-preferences ~/Downloads/guake_prefs</code></pre>\n</li>\n</ul>\n<h2 id=\"macos\">MacOS <a class=\"direct-link\" href=\"#macos\">#</a></h2>\n<p>Using <a href=\"https://www.iterm2.com/\"><strong>iTerms2</strong></a>. Download its settings. Below is the guide of making iTerms2 working like Guake.</p>\n<p class=\"indent\"></p>\n<ol>\n<li><em>Preferences</em> &gt; Tab <em>Keys</em> &gt; <em>Hotkey</em> &gt; tick on <em>Show/ hide all windows with a system-wide hotkey</em> &gt; choose key combination (<kbd>Cmd</kbd> + <kbd>~</kbd>).</li>\n<li><em>Preferences</em> &gt; <em>Profiles</em> &gt; <em>Default</em> &gt; tab <em>Windows</em> &gt; set <em>Style</em> to <em>Full-Width Top of Screen</em> and <em>Screen</em> to <em>Screen with Cursor</em>.</li>\n<li><em>Preferences</em> &gt; <em>Appearance</em> &gt; check <em>Exclude from Dock and ⌘-Tab Switcher</em></li>\n<li>Run on startup: <em>System Preferences</em> &gt; <em>Users and Groups</em> &gt; <em>Login Items</em> &gt; <em>[+]</em> &gt; choose <em>iTerm</em>.</li>\n</ol>\n<h3 id=\"zsh\">Zsh <a class=\"direct-link\" href=\"#zsh\">#</a></h3>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># CLI tools for Xcode</span><br>xcode-select -r<br>xcode-select —-install<br><br><span class=\"token comment\"># install hombrew</span><br>/bin/bash -c <span class=\"token string\">\"<span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">curl</span> -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh<span class=\"token variable\">)</span></span>\"</span></code></pre>\n<h2 id=\"zsh-(linux)\">Zsh (Linux) <a class=\"direct-link\" href=\"#zsh-(linux)\">#</a></h2>\n<p>👉 Check <a href=\"/docker-wsl2-windows\">WSL2 + Windows + Windows Terminal</a></p>\n<h3 id=\"install-zsh-%2B-oh-my-zsh\">Install Zsh + oh-my-zsh <a class=\"direct-link\" href=\"#install-zsh-%2B-oh-my-zsh\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># check is installed</span><br><span class=\"token function\">zsh</span> --version</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install (linux)</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> <span class=\"token function\">zsh</span><br><br><span class=\"token comment\"># install (macos - integrated)</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># make zsh default bash</span><br>chsh -s <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">which</span> <span class=\"token function\">zsh</span><span class=\"token variable\">)</span></span> <span class=\"token comment\"># log out &amp; log in</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># check</span><br><span class=\"token builtin class-name\">echo</span> <span class=\"token environment constant\">$SHELL</span> <span class=\"token comment\"># /bin/zsh  or similar</span></code></pre>\n</div>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install oh-my-zsh</span><br><span class=\"token function\">sh</span> -c <span class=\"token string\">\"<span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">curl</span> -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh<span class=\"token variable\">)</span></span>\"</span></code></pre>\n<h3 id=\"plugins\">Plugins <a class=\"direct-link\" href=\"#plugins\">#</a></h3>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># PLUGINS</span><br><span class=\"token comment\"># zsh-autosuggestions</span><br><span class=\"token function\">git</span> clone https://github.com/zsh-users/zsh-autosuggestions <span class=\"token variable\">${ZSH_CUSTOM<span class=\"token operator\">:-</span>~<span class=\"token operator\">/</span>.oh-my-zsh<span class=\"token operator\">/</span>custom}</span>/plugins/zsh-autosuggestions<br><br><span class=\"token comment\"># zsh-syntax-highlighting</span><br><span class=\"token function\">git</span> clone https://github.com/zsh-users/zsh-syntax-highlighting.git <span class=\"token variable\">${ZSH_CUSTOM<span class=\"token operator\">:-</span>~<span class=\"token operator\">/</span>.oh-my-zsh<span class=\"token operator\">/</span>custom}</span>/plugins/zsh-syntax-highlighting</code></pre>\n<p>After installing <a href=\"https://github.com/ohmyzsh/ohmyzsh/wiki/Plugins\">plugins</a>, put them in <code>~/.zshrc</code>,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token assign-left variable\">plugins</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>git docker docker-compose zsh-syntax-highlighting dnf <span class=\"token function\">npm</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\"># for me</span><br><span class=\"token comment\"># plugins=(git docker docker-compose npm ruby python emoji)</span></code></pre>\n<h3 id=\"spaceship-prompt-theme\">spaceship-prompt theme <a class=\"direct-link\" href=\"#spaceship-prompt-theme\">#</a></h3>\n<p>This is <mark>my choice</mark>. <a href=\"https://github.com/denysdovhan/spaceship-prompt\">Source code</a>. More settings can be found <a href=\"https://denysdovhan.com/spaceship-prompt/docs/Options.html#exit-code-exit_code\">here</a>.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># need to install oh-my-zsh first</span><br><span class=\"token function\">git</span> clone https://github.com/denysdovhan/spaceship-prompt.git <span class=\"token string\">\"<span class=\"token variable\">$ZSH_CUSTOM</span>/themes/spaceship-prompt\"</span><br><span class=\"token function\">ln</span> -s <span class=\"token string\">\"<span class=\"token variable\">$ZSH_CUSTOM</span>/themes/spaceship-prompt/spaceship.zsh-theme\"</span> <span class=\"token string\">\"<span class=\"token variable\">$ZSH_CUSTOM</span>/themes/spaceship.zsh-theme\"</span></code></pre>\n<p>Set <code>ZSH_THEME=&quot;spaceship&quot;</code> in your <code>.zshrc</code>.</p>\n<div class=\"hsbox\"><div class=\"hs__title\">powerlevel10k (I don't use it)</div><div class=\"hs__content\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># theme powerlevel10k</span><br><span class=\"token function\">git</span> clone https://github.com/romkatv/powerlevel10k.git <span class=\"token variable\">${ZSH_CUSTOM<span class=\"token operator\">:-</span>~<span class=\"token operator\">/</span>.oh-my-zsh<span class=\"token operator\">/</span>custom}</span>/themes/powerlevel10k<br><span class=\"token comment\"># after installing</span><br>p10k configure</code></pre>\n</div></div>\n<h3 id=\"fonts\">Fonts <a class=\"direct-link\" href=\"#fonts\">#</a></h3>\n<p>Install font <strong>Source Code Pro</strong>:</p>\n<div class=\"hsbox\"><div class=\"hs__title\">Show the code</div><div class=\"hs__content\"><ol>\n<li>\n<p>Follow instruction <a href=\"https://powerline.readthedocs.io/en/latest/installation/linux.html#fonts-installation\">here</a>. If some folders don't exist, create them!</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">wget</span> https://github.com/powerline/powerline/raw/develop/font/PowerlineSymbols.otf<br><span class=\"token function\">wget</span> https://github.com/powerline/powerline/raw/develop/font/10-powerline-symbols.conf<br><span class=\"token function\">mv</span> PowerlineSymbols.otf ~/.local/share/fonts/<br>fc-cache -vf ~/.local/share/fonts/<br><span class=\"token function\">mv</span> <span class=\"token number\">10</span>-powerline-symbols.conf ~/.config/fontconfig/conf.d/</code></pre>\n</li>\n<li>\n<p>Download <a href=\"https://github.com/adobe-fonts/source-code-pro\">Source Code Pro</a> and move all downloaded otf fonts to</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mv</span> SourceCode-* ~/.local/share/fonts/</code></pre>\n</li>\n</ol>\n</div></div>\n<p>Powerline font,</p>\n<pre><code>sudo apt-get install fonts-powerline\n</code></pre>\n<p>In terminal, choose the corresponding installed fonts.</p>\n<p>Add <strong>alias</strong> to <code>~/.zshrc</code> (search &quot;alias&quot; to find the place to put).</p>\n",
      "date_published": "2020-04-30T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/sphinx-restructuredtext/",
      "url": "https://dinhanhthi.com/sphinx-restructuredtext/",
      "title": "Sphinx &amp; reStructuredText &amp; docstring",
      "content_html": "<h2 id=\"install\">Install <a class=\"direct-link\" href=\"#install\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install python first</span><br>pip <span class=\"token function\">install</span> sphinx<br>pip <span class=\"token function\">install</span> sphinx-autobuild<br>pip <span class=\"token function\">install</span> sphinx_rtd_theme<br>pip <span class=\"token function\">install</span> sphinxcontrib-napoleon <span class=\"token comment\"># theme</span></code></pre>\n<h2 id=\"folder-structure\">Folder structure <a class=\"direct-link\" href=\"#folder-structure\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">|</span>-- project<br>    <span class=\"token operator\">|</span>-- custom_lib <span class=\"token comment\"># python package</span><br>    <span class=\"token operator\">|</span>-- custom_lib-doc<br>        <span class=\"token operator\">|</span>-- <span class=\"token builtin class-name\">source</span><br>            <span class=\"token operator\">|</span>-- conf.py</code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># conf.py</span><br><span class=\"token keyword\">import</span> os<span class=\"token punctuation\">,</span> sys<br><span class=\"token keyword\">import</span> sphinx_rtd_theme<br><span class=\"token keyword\">import</span> sphinxcontrib<br><br>path_custom_lib <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>abspath<span class=\"token punctuation\">(</span><span class=\"token string\">'../../'</span><span class=\"token punctuation\">)</span><br>sys<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>path_custom_lib<span class=\"token punctuation\">)</span><br><br>project <span class=\"token operator\">=</span> <span class=\"token string\">'My notes'</span><br>copyright <span class=\"token operator\">=</span> <span class=\"token string\">'2020, Math2IT'</span><br>author <span class=\"token operator\">=</span> <span class=\"token string\">'Anh-Thi DINH'</span><br>release <span class=\"token operator\">=</span> <span class=\"token string\">'0.2'</span><br><br>extensions <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><br>    <span class=\"token string\">'sphinxcontrib.napoleon'</span><span class=\"token punctuation\">,</span><br>    <span class=\"token string\">'sphinx_rtd_theme'</span><span class=\"token punctuation\">,</span><br>    <span class=\"token string\">'sphinx.ext.mathjax'</span><br><span class=\"token punctuation\">]</span><br><br>napoleon_include_init_with_doc <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span><br>napoleon_google_docstring <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span><br>napoleon_use_param <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span><br>napoleon_use_ivar <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span><br><br>html_theme <span class=\"token operator\">=</span> <span class=\"token string\">'sphinx_rtd_theme'</span><br><br>html_theme_options <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token string\">'display_version'</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span><br>    <span class=\"token string\">'prev_next_buttons_location'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'both'</span><span class=\"token punctuation\">,</span><br>    <span class=\"token string\">'style_external_links'</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span><br>    <span class=\"token string\">'style_nav_header_background'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'#F5A603'</span><span class=\"token punctuation\">,</span><br>    <span class=\"token string\">'sticky_navigation'</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span><br>    <span class=\"token string\">'navigation_depth'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span><br><span class=\"token punctuation\">}</span></code></pre>\n<h2 id=\"build\">Build <a class=\"direct-link\" href=\"#build\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># folder structure</span><br><span class=\"token operator\">|</span>-- project<br>    <span class=\"token operator\">|</span>-- custom_lib<br>    <span class=\"token operator\">|</span>-- custom_lib-doc<br>        <span class=\"token operator\">|</span>-- <span class=\"token builtin class-name\">source</span><br>            <span class=\"token operator\">|</span>-- conf.py</code></pre>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># build</span><br>sphinx-build <span class=\"token builtin class-name\">source</span> build</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># auto build + watch the change</span><br>sphinx-autobuild <span class=\"token builtin class-name\">source</span> _local -p <span class=\"token number\">8555</span><br><span class=\"token comment\"># http://127.0.0.1:8555/</span></code></pre>\n</div>\n<h2 id=\"format\">Format <a class=\"direct-link\" href=\"#format\">#</a></h2>\n<h3 id=\"headings\">Headings <a class=\"direct-link\" href=\"#headings\">#</a></h3>\n<pre class=\"language-bash\"><code class=\"language-bash\">H1 heading<br><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><br><br>H2 heading<br>----------<br><br>H3 heading<br><span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span><br><br>H4 heading<br>~~~~~~~~~~</code></pre>\n<h3 id=\"link\">Link <a class=\"direct-link\" href=\"#link\">#</a></h3>\n<p>Cross url (in the same document)<sup><a href=\"https://sublime-and-sphinx-guide.readthedocs.io/en/latest/references.html#links-to-sections-in-the-same-document\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># place to ref</span><br>:ref:<span class=\"token variable\"><span class=\"token variable\">`</span>custum text<span class=\"token operator\">&lt;</span>CSVLoader<span class=\"token operator\">></span><span class=\"token variable\">`</span></span><span class=\"token builtin class-name\">.</span><br><br><span class=\"token comment\"># Display \"CSV\"</span><br>:ref:<span class=\"token variable\"><span class=\"token variable\">`</span>CSVLoader<span class=\"token variable\">`</span></span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># somewhere</span><br><span class=\"token punctuation\">..</span> _CSVLoader:<br><br>CSV<br><span class=\"token operator\">==</span><span class=\"token operator\">=</span></code></pre>\n</div>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># if heading inside the same file as the caller</span><br>Call to <span class=\"token variable\"><span class=\"token variable\">`</span>Name of heading<span class=\"token variable\">`</span></span>_<br><br>Name of heading<br><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span></code></pre>\n<p>External urls:</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\">External hyperlinks, like Python_.<br><br><span class=\"token punctuation\">..</span> _Python: http://www.python.org/<br><br><span class=\"token comment\"># or inline</span><br><span class=\"token variable\"><span class=\"token variable\">`</span>Python <span class=\"token operator\">&lt;</span>http://www.python.org/<span class=\"token operator\">></span><span class=\"token variable\">`</span></span>_.</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\">External hyperlinks, like <span class=\"token variable\"><span class=\"token variable\">`</span>About Python<span class=\"token variable\">`</span></span>_.<br><br><span class=\"token punctuation\">..</span> _About Python: http://www.python.org/</code></pre>\n</div>\n<p>To a class, method,... in the python library (<a href=\"https://stackoverflow.com/questions/22700606/how-would-i-cross-reference-a-function-generated-by-autodoc-in-sphinx/22714510\">this question</a> -&gt; <a href=\"https://www.sphinx-doc.org/en/master/usage/restructuredtext/domains.html#cross-referencing-python-objects\">ref</a>),</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">:py:meth:<span class=\"token variable\"><span class=\"token variable\">`</span>mymodule.MyClass.mymethod<span class=\"token variable\">`</span></span><br><br><span class=\"token comment\"># or even shorter (if python is default)</span><br>:meth:<span class=\"token variable\"><span class=\"token variable\">`</span>mymodule.MyClass.mymethod<span class=\"token variable\">`</span></span><br><br><span class=\"token comment\"># custom text</span><br>:py:meth:<span class=\"token variable\"><span class=\"token variable\">`</span>custom text<span class=\"token operator\">&lt;</span>mymodule.MyClass.mymethod<span class=\"token operator\">></span><span class=\"token variable\">`</span></span></code></pre>\n<ul>\n<li><code>:class:</code>: for classes.</li>\n</ul>\n<h3 id=\"alert-boxes\">Alert boxes <a class=\"direct-link\" href=\"#alert-boxes\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># note</span><br><span class=\"token punctuation\">..</span> note:: First paragraph.<br><br>    Second paragraph.</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># warning</span><br><span class=\"token punctuation\">..</span> warning:: Content of the warning.</code></pre>\n</div>\n<h3 id=\"insert-images\">Insert images <a class=\"direct-link\" href=\"#insert-images\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># block</span><br><span class=\"token punctuation\">..</span> image:: images/ball1.gif</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># inline</span><br>The <span class=\"token operator\">|</span>biohazard<span class=\"token operator\">|</span> symbol.<br><br><span class=\"token punctuation\">..</span> <span class=\"token operator\">|</span>biohazard<span class=\"token operator\">|</span> image:: biohazard.png</code></pre>\n</div>\n<h3 id=\"insrt-code\">Insrt code <a class=\"direct-link\" href=\"#insrt-code\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># without syntax highlight</span><br>::<br><br>    def abc<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>:<br>        pass</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># with syntax highlight</span><br><span class=\"token punctuation\">..</span> code-block:: python<br><br>    def abc<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>:<br>        pass</code></pre>\n</div>\n<h2 id=\"autodoc-from-python-library\">Autodoc from python library <a class=\"direct-link\" href=\"#autodoc-from-python-library\">#</a></h2>\n<p>👉 <a href=\"https://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html\">Main ref</a>.</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># folder structure</span><br><span class=\"token operator\">|</span>-- project<br>    <span class=\"token operator\">|</span>-- custom_lib<br>    <span class=\"token operator\">|</span>-- custom_lib-doc<br>        <span class=\"token operator\">|</span>-- <span class=\"token builtin class-name\">source</span><br>            <span class=\"token operator\">|</span>-- conf.py</code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># conf.py</span><br><span class=\"token keyword\">import</span> os<br><span class=\"token keyword\">import</span> sys<br><br>path_custom_lib <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>abspath<span class=\"token punctuation\">(</span><span class=\"token string\">'../../'</span><span class=\"token punctuation\">)</span><br>sys<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>path_custom_lib<span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># all classes in classes.py</span><br><span class=\"token punctuation\">..</span> automodule:: custom_lib.folder.classes<br>   :members:<br><br><span class=\"token comment\"># in case `fit`, `predict` didn't show</span><br><span class=\"token punctuation\">..</span> automodule:: custom_lib.folder.classes<br>   :members:<br>   :undoc-members:</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># a specific class in classes.py</span><br><span class=\"token punctuation\">..</span> autoclass:: custom_lib.folder.classes.ClassA<br>   :members:</code></pre>\n</div>\n<h3 id=\"problem-of-%22attributes%22\">Problem of &quot;Attributes&quot; <a class=\"direct-link\" href=\"#problem-of-%22attributes%22\">#</a></h3>\n<ul>\n<li>When we use <code>&quot;Attributes&quot;</code> in docstring, the sphinx (<a href=\"https://github.com/readthedocs/sphinx_rtd_theme\">sphinx_rtd_theme</a> template) will render it as <code>&quot;Variables&quot;</code> if we indicate <code>napoleon_use_ivar = True</code> in the config. (check <a href=\"https://github.com/sphinx-doc/sphinx/issues/2115#issuecomment-314703605\">this issue</a>)</li>\n<li>List of <a href=\"https://www.sphinx-doc.org/en/master/usage/extensions/napoleon.html\">supported section headers</a> in docstring.</li>\n<li>Read <a href=\"https://michaelgoerz.net/notes/extending-sphinx-napoleon-docstring-sections.html\">this blog</a> as an option. <mark>It works for Google Docstring, not numpy docstring yet!</mark></li>\n</ul>\n<h3 id=\"problem-with-decorator\">Problem with decorator <a class=\"direct-link\" href=\"#problem-with-decorator\">#</a></h3>\n<p>Sphinx doesn't render docstring for classes coming with decorator, i.e. <code>@something</code> (before <code>def</code>). We can't use only <code>:members:</code>.</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> functools <span class=\"token keyword\">import</span> wraps<br><span class=\"token keyword\">def</span> <span class=\"token function\">my_decorator</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token decorator annotation punctuation\">@wraps</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">def</span> <span class=\"token function\">wrapper</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwds<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>        <span class=\"token triple-quoted-string string\">\"\"\"Doc from wrapper\"\"\"</span><br>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Calling decorated function'</span><span class=\"token punctuation\">)</span><br>        <span class=\"token keyword\">return</span> f<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwds<span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">return</span> wrapper</code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token decorator annotation punctuation\">@my_decorator</span><br><span class=\"token keyword\">def</span> <span class=\"token function\">example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token triple-quoted-string string\">\"\"\"Docstring\"\"\"</span><br>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Called example function'</span><span class=\"token punctuation\">)</span></code></pre>\n</div>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\">example<span class=\"token punctuation\">.</span>__doc__ <span class=\"token comment\"># with @wraps(f)</span><br><br>example<span class=\"token punctuation\">.</span>__doc__ <span class=\"token comment\"># without @wraps(f)</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token string\">'Docstring'</span><br><br><span class=\"token string\">'Doc from wrapper'</span></code></pre>\n</div>\n<h2 id=\"docstring\">Docstring <a class=\"direct-link\" href=\"#docstring\">#</a></h2>\n<h3 id=\"what%3F\">What? <a class=\"direct-link\" href=\"#what%3F\">#</a></h3>\n<p>If you wanna make a <a href=\"https://en.wikipedia.org/wiki/Docstring\">docstring</a> (showing the information of a function when using <code>help(&lt;func&gt;)</code> or <code>func.__doc__</code>).</p>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token triple-quoted-string string\">\"\"\"Reverse a text.<br>    Input the text.<br>    Return text reversed.<br>    \"\"\"</span><br>    <span class=\"token keyword\">return</span> text<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><br><br><span class=\"token builtin\">help</span><span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">)</span></code></pre>\n<pre><code>Help on function reverse in module __main__:\n\nreverse(text)\n    Reverse a text.\n    Input the text.\n    Return text reversed.\n</code></pre>\n</div>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\">reverse<span class=\"token punctuation\">.</span>__doc__<br><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">.</span>__doc__<span class=\"token punctuation\">)</span></code></pre>\n<pre><code>'Reverse a text.\\n    Input the text.\\n    Return text reversed.\\n    '\n\nReverse a text.\n    Input the text.\n    Return text reversed.\n</code></pre>\n</div>\n<h3 id=\"numpy-style\">Numpy Style <a class=\"direct-link\" href=\"#numpy-style\">#</a></h3>\n<p>👉 <a href=\"https://numpydoc.readthedocs.io/en/latest/\">Official docs</a>.<br>\n👉 <a href=\"https://sphinxcontrib-napoleon.readthedocs.io/en/latest/example_numpy.html\">Example of numpy docstring with sphinx</a>.</p>\n<p>An overview example,</p>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">ex_class</span><span class=\"token punctuation\">(</span>var1<span class=\"token punctuation\">,</span> var2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token triple-quoted-string string\">\"\"\"<br>    Quick description.<br>    Longer description with `keywords`.<br><br>    Parameters<br>    ----------<br>    var1 : int<br>        Desc for var1.<br>    var2 : {0 or 'index', 1 or 'columns'}, default 0<br>        Long desc for var2. It may take a long line and we can break<br>        this like that.<br><br>    Returns<br>    -------<br>    Resampler object<br><br>    See Also<br>    --------<br>    groupby : Group by mapping, function, label, or list of labels.<br>    Series.resample : Resample a Series.<br><br>    Notes<br>    -----<br>    See the `user guide<br>    &lt;https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#resampling>`_<br>    for more.<br><br>    Examples<br>    --------<br>    Start by creating a series with 9 one minute timestamps.<br>    >>> index = 1 +1<br>    2<br>    Description for this example.<br>    \"\"\"</span><br>    <span class=\"token comment\"># some commands</span><br>    <span class=\"token keyword\">return</span> return_values</code></pre>\n<pre><code>Quick description.\nLonger description with `keywords`.\n\nParameters\n----------\nvar1 : int\n    Desc for var1.\nvar2 : {0 or 'index', 1 or 'columns'}, default 0\n    Long desc for var2. It may take a long line and we can break\n    this like that.\n\nReturns\n-------\nResampler object\n\nSee Also\n--------\ngroupby : Group by mapping, function, label, or list of labels.\nSeries.resample : Resample a Series.\n\nNotes\n-----\nSee the `user guide\n&lt;https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#resampling&gt;`_\nfor more.\n\nExamples\n--------\nStart by creating a series with 9 one minute timestamps.\n&gt;&gt;&gt; index = 1 +1\n2\nDescription for this example.\n</code></pre>\n</div>\n<p>Math equations,</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># inline equation</span><br><span class=\"token triple-quoted-string string\">\"\"\"<br>.. math:: \\\\drac{1}{2}<br>\"\"\"</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># break very long equation</span><br><span class=\"token triple-quoted-string string\">\"\"\"<br>.. math::<br>    x_{\\\\text{min}} + \\\\dfrac{1}<br>    {2} # for a very long equation<br>\"\"\"</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># aligned</span><br><span class=\"token triple-quoted-string string\">\"\"\"<br>.. math::<br>    x+y &amp;= z<br><br>    1+2 &amp;= 3<br>\"\"\"</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># cases</span><br><span class=\"token triple-quoted-string string\">\"\"\"<br>.. math::<br>    f(x) = \\smash{<br>        \\\\begin{cases}<br>        0, &amp;\\\\text{ if } x &lt; 40, \\\\\\\\<br>        1, &amp; \\\\text{ if } 40 \\leq x &lt;60, \\\\\\\\<br>        \\\\end{cases}<br>    }<br>\"\"\"</span></code></pre>\n</div>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Methof, url.</span><br><span class=\"token triple-quoted-string string\">\"\"\"<br>Instantiate the class.<br><br>Parameters<br>----------<br>lst_comparison_type: str, default \"wasserstein\"<br>    Type of comparison. The supported types are in `dict_tests` which<br>    contains:<br><br>    - \"pearsonr\": `Pearson correlation coefficient<br>      &lt;https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.pearsonr.html>`_.<br><br>    - \"wasserstein\": Wasserstein distance (earth mover's distance). It<br>      measures the distance between 2 distributions.<br>      Check :meth:`popai.distribution_wasserstein_score`.<br>\"\"\"</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># long line url</span><br><span class=\"token triple-quoted-string string\">\"\"\"<br>- \"pearsonr\": `Pearson correlation coefficient<br>  &lt;https://docs.scipy.org/doc/scipy/reference/\\<br>generated/scipy.stats.pearsonr.html>`_.<br>\"\"\"</span></code></pre>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># single returns</span><br><span class=\"token triple-quoted-string string\">\"\"\"<br>Returns<br>-------<br>tuple (float, dict)<br>    Description.<br>\"\"\"</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># return a tuple</span><br><span class=\"token triple-quoted-string string\">\"\"\"<br>Returns<br>-------<br>reject : ndarray, boolean<br>    Description.<br>pvals_corrected : ndarray<br>    p-Description.<br>\"\"\"</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># break lines in itemize</span><br><span class=\"token triple-quoted-string string\">\"\"\"<br>Returns<br>-------<br>info: dict<br>    Description.<br><br>    - Item 1.<br>    - Item 2 very long lines<br>      can be broken here.<br>\"\"\"</span></code></pre>\n</div>\n<h3 id=\"google-style-python-docstring\">Google Style Python Docstring <a class=\"direct-link\" href=\"#google-style-python-docstring\">#</a></h3>\n<p>👉 <a href=\"https://sphinxcontrib-napoleon.readthedocs.io/en/latest/example_google.html\">Example Google Style Python Docstrings — napoleon 0.7 documentation</a><br>\n👉 <a href=\"https://google.github.io/styleguide/pyguide.html\">styleguide | Style guides for Google-originated open-source projects</a></p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># function</span><br><span class=\"token triple-quoted-string string\">\"\"\"<br>Args:<br>    param1 (int): The first parameter.<br>    param2 (str): The second parameter.<br><br>Returns:<br>    bool: The return value. True for success, False otherwise.<br>\"\"\"</span></code></pre>\n<h2 id=\"errors\">Errors <a class=\"direct-link\" href=\"#errors\">#</a></h2>\n<p>Problems with <a href=\"/visual-studio-code\">VSCode</a> which cannot run the preview:</p>\n<ul>\n<li>Select and activate an environment, <code>Ctrl + Shift + P</code> then choose <code>Python: Select Interpreter</code> then choose the right version of python you wanna run the docs on.</li>\n<li>Make sure the conda is already in <code>$PATH</code> + update the bashrc or zshrc (try <code>conda --version</code>).</li>\n<li>Make sure the right environement is activate in VSCode + all necessary libs are already istalled!</li>\n</ul>\n<h2 id=\"references\">References <a class=\"direct-link\" href=\"#references\">#</a></h2>\n<ul>\n<li><a href=\"https://rest-sphinx-memo.readthedocs.io/en/latest/intro.html\">Rest and Sphinx Memo</a>.</li>\n<li><strong>docutils</strong> -- <a href=\"https://docutils.sourceforge.io/docs/user/rst/quickref.html\">Quick ref to rst format</a>.</li>\n<li><strong>Thomas Cokelaer</strong> -- <a href=\"https://thomas-cokelaer.info/tutorials/sphinx/rest_syntax.html\">Sphinx and RST syntax guide</a></li>\n<li><strong>Sam Nicholls</strong> -- <a href=\"https://samnicholls.net/2016/06/15/how-to-sphinx-readthedocs/\">An idiot’s guide to Python documentation with Sphinx and ReadTheDocs</a></li>\n<li><strong>sphinx-doc</strong> -- <a href=\"https://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html\">Include documentation from docstrings</a></li>\n<li><a href=\"https://www.sphinx-doc.org/en/master/usage/configuration.html\">Sphinx configuration</a>.</li>\n</ul>\n",
      "date_published": "2020-04-29T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/deeplearning-ai-course-2/",
      "url": "https://dinhanhthi.com/deeplearning-ai-course-2/",
      "title": "DL 2 - Improving DNN: Tuning, Regularization and Optimization",
      "content_html": "<p>This is my note for the course (<a href=\"https://www.coursera.org/learn/deep-neural-network\">Improving Deep Neural Networks: Hyperparameter tuning, Regularization and Optimization</a>). The codes in this note are rewritten to be more clear and concise.</p>\n<p>👉 <strong>Course 1</strong> -- <a href=\"/deeplearning-ai-course-1\">Neural Networks and Deep Learning</a>.<br>\n👉 <strong>Course 2</strong> -- <a href=\"/deeplearning-ai-course-2\">Improving Deep Neural Networks: Hyperparameter tuning, Regularization and Optimization</a>.<br>\n👉 <strong>Course 3</strong> -- <a href=\"/deeplearning-ai-course-3\">Structuring Machine Learning Projects</a>.<br>\n👉 <strong>Course 4</strong> -- <a href=\"https://www.notion.so/dinhanhthi/CNN-by-deeplearning-ai-a081d253fc2c4c0b99edd2757c759b9e\">Convolutional Neural Networks</a>.<br>\n👉 <strong>Course 5</strong> -- <a href=\"https://www.notion.so/dinhanhthi/Sequence-models-by-deeplearning-ai-427774f7b31846fdb17ac09cd2353fbe\">Sequence Models</a>.</p>\n<p>This course will teach you the &quot;magic&quot; of getting deep learning to work well. Rather than the deep learning process being a black box, you will understand what drives performance, and be able to more systematically get good results. You will also learn TensorFlow.</p>\n<h2 id=\"initialization-step\">Initialization step <a class=\"direct-link\" href=\"#initialization-step\">#</a></h2>\n<p><code>layers_dims</code> contains the size of each layer from <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></span> to <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">L</span></span></span></span></span>.</p>\n<h3 id=\"zero-initialization\">zero initialization <a class=\"direct-link\" href=\"#zero-initialization\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\">parameters<span class=\"token punctuation\">[</span><span class=\"token string\">'W'</span><span class=\"token operator\">+</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>layers_dims<span class=\"token punctuation\">[</span>l<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> layers_dims<span class=\"token punctuation\">[</span>l<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>parameters<span class=\"token punctuation\">[</span><span class=\"token string\">'b'</span><span class=\"token operator\">+</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>layers_dims<span class=\"token punctuation\">[</span>l<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<ul>\n<li>The performance is really <strong>bad</strong>, and the <strong>cost</strong> does <strong>not</strong> really <strong>decrease</strong>.</li>\n<li>initializing all the weights to zero ⇒ failing to break symmetry ⇒ every neuron in each layer will learn the same thing ⇒ <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>n</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">n^{[l]}=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></span> for every layer ⇒ no more powerful than a linear classifier such as logistic regression.</li>\n</ul>\n<h3 id=\"random-initialization\">Random initialization <a class=\"direct-link\" href=\"#random-initialization\">#</a></h3>\n<p><mark>To break symmetry</mark>, lets intialize the weights randomly.</p>\n<pre class=\"language-python\"><code class=\"language-python\">parameters<span class=\"token punctuation\">[</span><span class=\"token string\">'W'</span><span class=\"token operator\">+</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randn<span class=\"token punctuation\">(</span>layers_dims<span class=\"token punctuation\">[</span>l<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> layers_dims<span class=\"token punctuation\">[</span>l<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">10</span> <span class=\"token comment\"># &lt;- LARGE (just an example of SHOULDN'T)</span><br>parameters<span class=\"token punctuation\">[</span><span class=\"token string\">'b'</span><span class=\"token operator\">+</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>layers_dims<span class=\"token punctuation\">[</span>l<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<ul>\n<li>High initial weights ⇒ The cost starts very high (near 0 or 1 or infinity).</li>\n<li>Poor initialization ⇒ vanishing/exploding gradients ⇒ slows down the optimization algorithm.</li>\n<li>If you train this network longer ⇒ better results, BUT initializing with overly large random numbers ⇒ slows down the optimization.</li>\n</ul>\n<h3 id=\"he-initialization\">He initialization <a class=\"direct-link\" href=\"#he-initialization\">#</a></h3>\n<p>Multiply randomly initial <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>W</mi></mrow><annotation encoding=\"application/x-tex\">W</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span></span></span></span></span> with <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msqrt><mfrac><mn>2</mn><msup><mi>n</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></msup></mfrac></msqrt></mrow><annotation encoding=\"application/x-tex\">\\sqrt{\\frac{2}{n^{[l-1]}}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.84em;vertical-align:-0.6251585em;\"></span><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.2148415000000001em;\"><span class=\"svg-align\" style=\"top:-3.8em;\"><span class=\"pstrut\" style=\"height:3.8em;\"></span><span class=\"mord\" style=\"padding-left:1em;\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.614575em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8220357142857143em;\"><span style=\"top:-2.8220357142857138em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.38542499999999996em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span><span style=\"top:-3.1748415em;\"><span class=\"pstrut\" style=\"height:3.8em;\"></span><span class=\"hide-tail\" style=\"min-width:1.02em;height:1.8800000000000001em;\"><svg width='400em' height='1.8800000000000001em' viewBox='0 0 400000 1944' preserveAspectRatio='xMinYMin slice'><path d='M983 90\nl0 -0\nc4,-6.7,10,-10,18,-10 H400000v40\nH1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7\ns-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744\nc-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30\nc26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722\nc56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5\nc53.7,-170.3,84.5,-266.8,92.5,-289.5z\nM1001 80h400000v40h-400000z'/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6251585em;\"><span></span></span></span></span></span></span></span></span></span>. It's similar to <strong>Xavier initialization</strong> in which multipler factor is <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msqrt><mfrac><mn>1</mn><msup><mi>n</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></msup></mfrac></msqrt></mrow><annotation encoding=\"application/x-tex\">\\sqrt{\\frac{1}{n^{[l-1]}}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.84em;vertical-align:-0.6251585em;\"></span><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.2148415000000001em;\"><span class=\"svg-align\" style=\"top:-3.8em;\"><span class=\"pstrut\" style=\"height:3.8em;\"></span><span class=\"mord\" style=\"padding-left:1em;\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.614575em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8220357142857143em;\"><span style=\"top:-2.8220357142857138em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.38542499999999996em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span><span style=\"top:-3.1748415em;\"><span class=\"pstrut\" style=\"height:3.8em;\"></span><span class=\"hide-tail\" style=\"min-width:1.02em;height:1.8800000000000001em;\"><svg width='400em' height='1.8800000000000001em' viewBox='0 0 400000 1944' preserveAspectRatio='xMinYMin slice'><path d='M983 90\nl0 -0\nc4,-6.7,10,-10,18,-10 H400000v40\nH1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7\ns-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744\nc-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30\nc26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722\nc56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5\nc53.7,-170.3,84.5,-266.8,92.5,-289.5z\nM1001 80h400000v40h-400000z'/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6251585em;\"><span></span></span></span></span></span></span></span></span></span></p>\n<pre class=\"language-python\"><code class=\"language-python\">parameters<span class=\"token punctuation\">[</span><span class=\"token string\">'W'</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randn<span class=\"token punctuation\">(</span>layers_dims<span class=\"token punctuation\">[</span>l<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> layers_dims<span class=\"token punctuation\">[</span>l<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> np<span class=\"token punctuation\">.</span>sqrt<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>layers_dims<span class=\"token punctuation\">[</span>l<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br>parameters<span class=\"token punctuation\">[</span><span class=\"token string\">'b'</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>layers_dims<span class=\"token punctuation\">[</span>l<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"regularization-step\">Regularization step <a class=\"direct-link\" href=\"#regularization-step\">#</a></h2>\n<p>To reduce the <strong>overfitting problem</strong>.</p>\n<h3 id=\"l2-regularization\">L2 regularization <a class=\"direct-link\" href=\"#l2-regularization\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\">L2_regularization_cost <span class=\"token operator\">=</span> <span class=\"token number\">0</span><br><span class=\"token keyword\">for</span> l <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> L<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    L2_regularization_cost <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token operator\">/</span>m <span class=\"token operator\">*</span> lambd<span class=\"token operator\">/</span><span class=\"token number\">2</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>square<span class=\"token punctuation\">(</span>W<span class=\"token punctuation\">[</span>l<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<ul>\n<li>\n<p>The standard way. Modify cost function from,</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>J</mi><mo>=</mo><mo>−</mo><mfrac><mn>1</mn><mi>m</mi></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><mstyle mathsize=\"1.2em\"><mo stretchy=\"false\" lspace=\"0em\" rspace=\"0em\">(</mo><mstyle mathsize=\"0.9em\"><msup><mi>y</mi><mrow><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow></msup><mi>log</mi><mo>⁡</mo><mrow><mo fence=\"true\">(</mo><msup><mi>a</mi><mrow><mo stretchy=\"false\">[</mo><mi>L</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow></msup><mo fence=\"true\">)</mo></mrow><mo>+</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><msup><mi>y</mi><mrow><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow></msup><mo stretchy=\"false\">)</mo><mi>log</mi><mo>⁡</mo><mrow><mo fence=\"true\">(</mo><mn>1</mn><mo>−</mo><msup><mi>a</mi><mrow><mo stretchy=\"false\">[</mo><mi>L</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow></msup><mo fence=\"true\">)</mo></mrow><mstyle mathsize=\"1.2em\"><mo stretchy=\"false\" lspace=\"0em\" rspace=\"0em\">)</mo></mstyle></mstyle></mstyle></mrow><annotation encoding=\"application/x-tex\">J = -\\frac{1}{m} \\sum\\limits_{i = 1}^{m} \\large{(}\\small  y^{(i)}\\log\\left(a^{[L](i)}\\right) + (1-y^{(i)})\\log\\left(1- a^{[L](i)}\\right) \\large{)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.929066em;vertical-align:-1.277669em;\"></span><span class=\"mord\">−</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">m</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6513970000000002em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">m</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord sizing reset-size6 size7\"><span class=\"mopen\">(</span></span><span class=\"mord sizing reset-size6 size5\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9129999999999999em;\"><span style=\"top:-3.013em;margin-right:0.05555555555555556em;\"><span class=\"pstrut\" style=\"height:2.6em;\"></span><span class=\"sizing reset-size5 size2 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop sizing reset-size6 size5\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner sizing reset-size6 size5\"><span class=\"mopen sizing reset-size5 size6 delimcenter\" style=\"top:0.024999999999999994em;\"><span class=\"delimsizing size1\">(</span></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9129999999999999em;\"><span style=\"top:-3.013em;margin-right:0.05555555555555556em;\"><span class=\"pstrut\" style=\"height:2.6em;\"></span><span class=\"sizing reset-size5 size2 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\">L</span><span class=\"mclose mtight\">]</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span><span class=\"mclose sizing reset-size5 size6 delimcenter\" style=\"top:0.024999999999999994em;\"><span class=\"delimsizing size1\">)</span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin sizing reset-size6 size5\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8999999999999999em;vertical-align:-0.22499999999999998em;\"></span><span class=\"mopen sizing reset-size6 size5\">(</span><span class=\"mord sizing reset-size6 size5\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin sizing reset-size6 size5\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.27251em;vertical-align:-0.37251000000000006em;\"></span><span class=\"mord sizing reset-size6 size5\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9129999999999999em;\"><span style=\"top:-3.013em;margin-right:0.05555555555555556em;\"><span class=\"pstrut\" style=\"height:2.6em;\"></span><span class=\"sizing reset-size5 size2 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span><span class=\"mclose sizing reset-size6 size5\">)</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop sizing reset-size6 size5\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner sizing reset-size6 size5\"><span class=\"mopen sizing reset-size5 size6 delimcenter\" style=\"top:0.024999999999999994em;\"><span class=\"delimsizing size1\">(</span></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9129999999999999em;\"><span style=\"top:-3.013em;margin-right:0.05555555555555556em;\"><span class=\"pstrut\" style=\"height:2.6em;\"></span><span class=\"sizing reset-size5 size2 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\">L</span><span class=\"mclose mtight\">]</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span><span class=\"mclose sizing reset-size5 size6 delimcenter\" style=\"top:0.024999999999999994em;\"><span class=\"delimsizing size1\">)</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord sizing reset-size6 size7\"><span class=\"mclose\">)</span></span></span></span></span></span></eqn></section></math>\n<p>to</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>J</mi><mrow><mi>r</mi><mi>e</mi><mi>g</mi><mi>u</mi><mi>l</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>z</mi><mi>e</mi><mi>d</mi></mrow></msub><mo>=</mo><mstyle mathsize=\"0.9em\"><munder><munder><mrow><mo>−</mo><mfrac><mn>1</mn><mi>m</mi></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><mstyle mathsize=\"1.2em\"><mo stretchy=\"false\" lspace=\"0em\" rspace=\"0em\">(</mo><mstyle mathsize=\"0.9em\"><msup><mi>y</mi><mrow><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow></msup><mi>log</mi><mo>⁡</mo><mrow><mo fence=\"true\">(</mo><msup><mi>a</mi><mrow><mo stretchy=\"false\">[</mo><mi>L</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow></msup><mo fence=\"true\">)</mo></mrow><mo>+</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><msup><mi>y</mi><mrow><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow></msup><mo stretchy=\"false\">)</mo><mi>log</mi><mo>⁡</mo><mrow><mo fence=\"true\">(</mo><mn>1</mn><mo>−</mo><msup><mi>a</mi><mrow><mo stretchy=\"false\">[</mo><mi>L</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow></msup><mo fence=\"true\">)</mo></mrow><mstyle mathsize=\"1.2em\"><mo stretchy=\"false\" lspace=\"0em\" rspace=\"0em\">)</mo></mstyle></mstyle></mstyle></mrow><mo stretchy=\"true\">⏟</mo></munder><mtext>cross-entropy cost</mtext></munder><mo>+</mo><munder><munder><mrow><mfrac><mn>1</mn><mi>m</mi></mfrac><mfrac><mi>λ</mi><mn>2</mn></mfrac><munder><mo>∑</mo><mi>l</mi></munder><munder><mo>∑</mo><mi>k</mi></munder><munder><mo>∑</mo><mi>j</mi></munder><msubsup><mi>W</mi><mrow><mi>k</mi><mo separator=\"true\">,</mo><mi>j</mi></mrow><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo><mn>2</mn></mrow></msubsup></mrow><mo stretchy=\"true\">⏟</mo></munder><mtext>L2 regularization cost</mtext></munder></mstyle></mrow><annotation encoding=\"application/x-tex\">J_{regularized} = \\small \\underbrace{-\\frac{1}{m} \\sum\\limits_{i = 1}^{m} \\large{(}\\small y^{(i)}\\log\\left(a^{[L](i)}\\right) + (1-y^{(i)})\\log\\left(1- a^{[L](i)}\\right) \\large{)} }_\\text{cross-entropy cost} + \\underbrace{\\frac{1}{m} \\frac{\\lambda}{2} \\sum\\limits_l\\sum\\limits_k\\sum\\limits_j W_{k,j}^{[l]2} }_\\text{L2 regularization cost}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.969438em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361079999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.09618em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal mtight\">e</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal mtight\">u</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">a</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.04398em;\">z</span><span class=\"mord mathnormal mtight\">e</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.8214234em;vertical-align:-2.3739165000000004em;\"></span><span class=\"mord munder sizing reset-size6 size5\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6083409999999996em;\"><span style=\"top:-1.1002826666666667em;\"><span class=\"pstrut\" style=\"height:3.6083410000000002em;\"></span><span class=\"sizing reset-size5 size2 mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">cross-entropy cost</span></span></span></span><span style=\"top:-3.608341em;\"><span class=\"pstrut\" style=\"height:3.6083410000000002em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.608341em;\"><span class=\"svg-align\" style=\"top:-1.710336em;\"><span class=\"pstrut\" style=\"height:3.6083410000000002em;\"></span><span class=\"stretchy\" style=\"height:0.548em;min-width:1.6em;\"><span class=\"brace-left\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMinYMin slice'><path d='M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z'/></svg></span><span class=\"brace-center\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMidYMin slice'><path d='M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z'/></svg></span><span class=\"brace-right\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMaxYMin slice'><path d='M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z'/></svg></span></span></span><span style=\"top:-3.6083410000000002em;\"><span class=\"pstrut\" style=\"height:3.6083410000000002em;\"></span><span class=\"mord\"><span class=\"mord\">−</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.256996em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size5\"><span class=\"mord\"><span class=\"mord mathnormal\">m</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size5\"><span class=\"mord\"><span class=\"mord\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6083410000000002em;\"><span style=\"top:-1.8999949999999999em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size2 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size2 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">m</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.250005em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord sizing reset-size6 size7\"><span class=\"mopen\">(</span></span><span class=\"mord sizing reset-size6 size5\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9129999999999999em;\"><span style=\"top:-3.013em;margin-right:0.05555555555555556em;\"><span class=\"pstrut\" style=\"height:2.6em;\"></span><span class=\"sizing reset-size5 size2 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop sizing reset-size6 size5\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner sizing reset-size6 size5\"><span class=\"mopen sizing reset-size5 size6 delimcenter\" style=\"top:0.024999999999999994em;\"><span class=\"delimsizing size1\">(</span></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9129999999999999em;\"><span style=\"top:-3.013em;margin-right:0.05555555555555556em;\"><span class=\"pstrut\" style=\"height:2.6em;\"></span><span class=\"sizing reset-size5 size2 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\">L</span><span class=\"mclose mtight\">]</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span><span class=\"mclose sizing reset-size5 size6 delimcenter\" style=\"top:0.024999999999999994em;\"><span class=\"delimsizing size1\">)</span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin sizing reset-size6 size5\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mopen sizing reset-size6 size5\">(</span><span class=\"mord sizing reset-size6 size5\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin sizing reset-size6 size5\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord sizing reset-size6 size5\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9129999999999999em;\"><span style=\"top:-3.013em;margin-right:0.05555555555555556em;\"><span class=\"pstrut\" style=\"height:2.6em;\"></span><span class=\"sizing reset-size5 size2 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span><span class=\"mclose sizing reset-size6 size5\">)</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop sizing reset-size6 size5\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner sizing reset-size6 size5\"><span class=\"mopen sizing reset-size5 size6 delimcenter\" style=\"top:0.024999999999999994em;\"><span class=\"delimsizing size1\">(</span></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9129999999999999em;\"><span style=\"top:-3.013em;margin-right:0.05555555555555556em;\"><span class=\"pstrut\" style=\"height:2.6em;\"></span><span class=\"sizing reset-size5 size2 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\">L</span><span class=\"mclose mtight\">]</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span><span class=\"mclose sizing reset-size5 size6 delimcenter\" style=\"top:0.024999999999999994em;\"><span class=\"delimsizing size1\">)</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord sizing reset-size6 size7\"><span class=\"mclose\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8980050000000002em;\"><span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.6376850000000003em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin sizing reset-size6 size5\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.6983265000000003em;vertical-align:-2.5265301em;\"></span><span class=\"mord munder sizing reset-size6 size5\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.301996em;\"><span style=\"top:-0.6243669999999998em;\"><span class=\"pstrut\" style=\"height:3.301996em;\"></span><span class=\"sizing reset-size5 size2 mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">L2 regularization cost</span></span></span></span><span style=\"top:-3.301996em;\"><span class=\"pstrut\" style=\"height:3.301996em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.301996em;\"><span class=\"svg-align\" style=\"top:-1.2873269999999999em;\"><span class=\"pstrut\" style=\"height:3.301996em;\"></span><span class=\"stretchy\" style=\"height:0.548em;min-width:1.6em;\"><span class=\"brace-left\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMinYMin slice'><path d='M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z'/></svg></span><span class=\"brace-center\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMidYMin slice'><path d='M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z'/></svg></span><span class=\"brace-right\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMaxYMin slice'><path d='M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z'/></svg></span></span></span><span style=\"top:-3.301996em;\"><span class=\"pstrut\" style=\"height:3.301996em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.256996em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size5\"><span class=\"mord\"><span class=\"mord mathnormal\">m</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size5\"><span class=\"mord\"><span class=\"mord\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.301996em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size5\"><span class=\"mord\"><span class=\"mord\">2</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size5\"><span class=\"mord\"><span class=\"mord mathnormal\">λ</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.050005em;\"><span style=\"top:-1.8999949999999999em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size2 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span></span></span><span style=\"top:-3.0500049999999996em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.250005em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.050005em;\"><span style=\"top:-1.8999949999999999em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size2 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span><span style=\"top:-3.0500049999999996em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.250005em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0500050000000003em;\"><span style=\"top:-1.899995em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size2 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.366669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9447999999999999em;\"><span style=\"top:-2.3681360000000002em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.6em;\"></span><span class=\"sizing reset-size6 size2 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span style=\"top:-3.0947999999999998em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.6em;\"></span><span class=\"sizing reset-size6 size2 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.34852799999999995em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.014669em;\"><span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.807255666666667em;\"><span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n</li>\n<li>\n<p>The value of <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>λ</mi></mrow><annotation encoding=\"application/x-tex\">\\lambda</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">λ</span></span></span></span></span> is a hyperparameter that you can tune using a dev set.</p>\n</li>\n<li>\n<p>L2 regularization makes your decision boundary smoother. If <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>λ</mi></mrow><annotation encoding=\"application/x-tex\">\\lambda</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">λ</span></span></span></span></span> is too large, it is also possible to &quot;oversmooth&quot;, resulting in a model with high bias.</p>\n</li>\n</ul>\n<h3 id=\"dropout\">Dropout <a class=\"direct-link\" href=\"#dropout\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># [Forward] An example at layer 3</span><br>D3 <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>rand<span class=\"token punctuation\">(</span>A3<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> A3<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> keep_drop<br>A3 <span class=\"token operator\">*=</span> D3<br>A3 <span class=\"token operator\">/=</span> keep_drop<br><span class=\"token comment\"># [Backprop]</span><br>dA3 <span class=\"token operator\">*=</span> D3<br>dA3 <span class=\"token operator\">/=</span> keep_drop</code></pre>\n<ul>\n<li><mark>Dropout is a widely used regularization technique that is specific to deep learning</mark>.</li>\n<li>Randomly shuts down some neurons in each iteration.</li>\n<li>When you shut some neurons down, you actually modify your model. <mark>The idea behind drop-out</mark> is that at each iteration, you train a different model that uses only a subset of your neurons.</li>\n<li>With dropout, your neurons thus become <mark>less sensitive to the activation</mark> of one other specific neuron, because that other neuron might be shut down at any time.</li>\n<li>Don't apply dropout to the input layer or output layer.</li>\n<li>Use dropout during training, not during test time.</li>\n<li>Apply dropout both during forward and backward propagation.</li>\n</ul>\n<h2 id=\"gradient-checking\">Gradient checking <a class=\"direct-link\" href=\"#gradient-checking\">#</a></h2>\n<ul>\n<li>\n<p>To answer <mark markdown=\"span\">&quot;<em>Give me a proof that your backpropagation is actually working!&quot;</em></mark></p>\n</li>\n<li>\n<p>We are confident on computing <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>J</mi></mrow><annotation encoding=\"application/x-tex\">J</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span></span></span></span></span> but <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>J</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>θ</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial J}{\\partial\\theta}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.2251079999999999em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801079999999999em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">θ</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.09618em;\">J</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>.</p>\n</li>\n<li>\n<p>Use <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>J</mi></mrow><annotation encoding=\"application/x-tex\">J</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span></span></span></span></span> to compute an approximation of <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>J</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>θ</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial J}{\\partial\\theta}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.2251079999999999em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801079999999999em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">θ</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.09618em;\">J</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span> and compare with <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>J</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>θ</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial J}{\\partial\\theta}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.2251079999999999em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801079999999999em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">θ</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.09618em;\">J</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>.</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi>J</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>θ</mi></mrow></mfrac><mo>=</mo><munder><mo><mi>lim</mi><mo>⁡</mo></mo><mrow><mi>ε</mi><mo>→</mo><mn>0</mn></mrow></munder><mfrac><mrow><mi>J</mi><mo stretchy=\"false\">(</mo><mi>θ</mi><mo>+</mo><mi>ε</mi><mo stretchy=\"false\">)</mo><mo>−</mo><mi>J</mi><mo stretchy=\"false\">(</mo><mi>θ</mi><mo>−</mo><mi>ε</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mn>2</mn><mi>ε</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\"> \\frac{\\partial J}{\\partial \\theta} = \\lim_{\\varepsilon \\to 0} \\frac{J(\\theta + \\varepsilon) - J(\\theta - \\varepsilon)}{2 \\varepsilon}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.05744em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.37144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.144108em;vertical-align:-0.717108em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.69444em;\"><span style=\"top:-2.382892em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">ε</span><span class=\"mrel mtight\">→</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\">lim</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.717108em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.427em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"mord mathnormal\">ε</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\">ε</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\">ε</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></eqn></section></math>\n</li>\n</ul>\n<h2 id=\"optimization-algorithms\">Optimization algorithms <a class=\"direct-link\" href=\"#optimization-algorithms\">#</a></h2>\n<p><strong>Intuition</strong>:</p>\n<ul>\n<li><strong>Gradient Descent</strong>: go down the hill.</li>\n<li><strong>Momentum</strong> / <strong>RMSprop</strong> / <strong>Adam</strong>: which direction?</li>\n</ul>\n<h3 id=\"mini-batch-gradient-descent\">Mini-batch gradient descent <a class=\"direct-link\" href=\"#mini-batch-gradient-descent\">#</a></h3>\n<ul>\n<li><strong>Problem</strong>: NN works great on big data but many data leads to slow the training ⇒ We need to optimize!</li>\n<li><strong>Solution</strong>: Divide into smaller &quot;mini-batches&quot; (for example, from 5M to 5K of 1K each).</li>\n</ul>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><msub><mi>X</mi><mrow><mo stretchy=\"false\">(</mo><msub><mi>n</mi><mi>X</mi></msub><mo separator=\"true\">,</mo><mi>m</mi><mo>=</mo><mn>5</mn><mi>M</mi><mo stretchy=\"false\">)</mo></mrow></msub></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mo stretchy=\"false\">[</mo><munder><munder><mrow><msup><mi>X</mi><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow></msup><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msup><mi>X</mi><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mi>K</mi><mo stretchy=\"false\">)</mo></mrow></msup></mrow><mo stretchy=\"true\">⏟</mo></munder><msubsup><mi>X</mi><mrow><mo stretchy=\"false\">(</mo><msub><mi>n</mi><mi>X</mi></msub><mo separator=\"true\">,</mo><mn>1</mn><mi>K</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">{</mo><mn>1</mn><mo stretchy=\"false\">}</mo></mrow></msubsup></munder><mo separator=\"true\">,</mo><munder><munder><mrow><msup><mi>X</mi><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mi>K</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow></msup><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msup><mi>X</mi><mrow><mo stretchy=\"false\">(</mo><mn>2</mn><mi>K</mi><mo stretchy=\"false\">)</mo></mrow></msup></mrow><mo stretchy=\"true\">⏟</mo></munder><msubsup><mi>X</mi><mrow><mo stretchy=\"false\">(</mo><msub><mi>n</mi><mi>X</mi></msub><mo separator=\"true\">,</mo><mn>1</mn><mi>K</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">{</mo><mn>2</mn><mo stretchy=\"false\">}</mo></mrow></msubsup></munder><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><munder><munder><mrow><msup><mi>X</mi><mrow><mo stretchy=\"false\">(</mo><mi>m</mi><mo>−</mo><mn>1</mn><mi>K</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow></msup><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msup><mi>X</mi><mrow><mo stretchy=\"false\">(</mo><mi>m</mi><mo stretchy=\"false\">)</mo></mrow></msup></mrow><mo stretchy=\"true\">⏟</mo></munder><msubsup><mi>X</mi><mrow><mo stretchy=\"false\">(</mo><msub><mi>n</mi><mi>X</mi></msub><mo separator=\"true\">,</mo><mn>1</mn><mi>K</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">{</mo><mn>5</mn><mi>K</mi><mo stretchy=\"false\">}</mo></mrow></msubsup></munder><mo stretchy=\"false\">]</mo><mo separator=\"true\">,</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><msub><mi>Y</mi><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo separator=\"true\">,</mo><mi>m</mi><mo>=</mo><mn>5</mn><mi>M</mi><mo stretchy=\"false\">)</mo></mrow></msub></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mo stretchy=\"false\">[</mo><munder><munder><mrow><msup><mi>y</mi><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow></msup><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msup><mi>y</mi><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mi>K</mi><mo stretchy=\"false\">)</mo></mrow></msup></mrow><mo stretchy=\"true\">⏟</mo></munder><msubsup><mi>Y</mi><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>1</mn><mi>K</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">{</mo><mn>1</mn><mo stretchy=\"false\">}</mo></mrow></msubsup></munder><mo separator=\"true\">,</mo><munder><munder><mrow><msup><mi>y</mi><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mi>K</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow></msup><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msup><mi>y</mi><mrow><mo stretchy=\"false\">(</mo><mn>2</mn><mi>K</mi><mo stretchy=\"false\">)</mo></mrow></msup></mrow><mo stretchy=\"true\">⏟</mo></munder><msubsup><mi>Y</mi><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>1</mn><mi>K</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">{</mo><mn>2</mn><mo stretchy=\"false\">}</mo></mrow></msubsup></munder><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><munder><munder><mrow><msup><mi>y</mi><mrow><mo stretchy=\"false\">(</mo><mi>m</mi><mo>−</mo><mn>1</mn><mi>K</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow></msup><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msup><mi>y</mi><mrow><mo stretchy=\"false\">(</mo><mi>m</mi><mo stretchy=\"false\">)</mo></mrow></msup></mrow><mo stretchy=\"true\">⏟</mo></munder><msubsup><mi>Y</mi><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>1</mn><mi>K</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mo stretchy=\"false\">{</mo><mn>5</mn><mi>K</mi><mo stretchy=\"false\">}</mo></mrow></msubsup></munder><mo stretchy=\"false\">]</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\n\\begin{aligned}\nX_{(n_X, m=5M)} &amp;= [\\underbrace{X^{(1)},\\ldots,X^{(1K)}}_{X^{\\{1\\}}_{(n_X,1K)}}, \\underbrace{X^{(1K+1)},\\ldots,X^{(2K)}}_{X^{\\{2\\}}_{(n_X,1K)}}, \\ldots, \\underbrace{X^{(m-1K+1)},\\ldots,X^{(m)}}_{X^{\\{5K\\}}_{(n_X,1K)}}], \\\\\nY_{(1, m=5M)} &amp;= [\\underbrace{y^{(1)},\\ldots,y^{(1K)}}_{Y^{\\{1\\}}_{(1,1K)}}, \\underbrace{y^{(1K+1)},\\ldots,y^{(2K)}}_{Y^{\\{2\\}}_{(1,1K)}}, \\ldots, \\underbrace{y^{(m-1K+1)},\\ldots,y^{(m)}}_{Y^{\\{5K\\}}_{(1,1K)}}]\n\\end{aligned}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:6.879545em;vertical-align:-3.1897725em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.6897725em;\"><span style=\"top:-5.7517724999999995em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.34480000000000005em;\"><span style=\"top:-2.5198em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3567071428571427em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\">X</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.14329285714285717em;\"><span></span></span></span></span></span></span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">m</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">5</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">M</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3551999999999999em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-2.2898674999999997em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.34480000000000005em;\"><span style=\"top:-2.5198em;margin-left:-0.22222em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">1</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">m</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">5</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">M</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3551999999999999em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.1897725em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.6897725em;\"><span style=\"top:-5.7517724999999995em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mopen\">[</span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9380000000000002em;\"><span style=\"top:-1.2162000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0590857142857142em;\"><span style=\"top:-2.1487999999999996em;margin-left:-0.07847em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3447999999999998em;margin-left:0em;margin-right:0.1em;\"><span class=\"pstrut\" style=\"height:2.6833299999999998em;\"></span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\">X</span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33853em;\"><span></span></span></span></span></span></span><span class=\"mpunct mtight\">,</span><span class=\"mord mtight\">1</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span><span class=\"mclose mtight\">)</span></span></span></span><span style=\"top:-3.059085714285714em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">{</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">}</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6287214285714287em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9379999999999998em;\"><span class=\"svg-align\" style=\"top:-2.15756em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"stretchy\" style=\"height:0.548em;min-width:1.6em;\"><span class=\"brace-left\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMinYMin slice'><path d='M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z'/></svg></span><span class=\"brace-center\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMidYMin slice'><path d='M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z'/></svg></span><span class=\"brace-right\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMaxYMin slice'><path d='M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z'/></svg></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">1</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8424400000000001em;\"><span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.223905em;\"><span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9380000000000002em;\"><span style=\"top:-1.2162000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0590857142857142em;\"><span style=\"top:-2.1487999999999996em;margin-left:-0.07847em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3447999999999998em;margin-left:0em;margin-right:0.1em;\"><span class=\"pstrut\" style=\"height:2.6833299999999998em;\"></span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\">X</span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33853em;\"><span></span></span></span></span></span></span><span class=\"mpunct mtight\">,</span><span class=\"mord mtight\">1</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span><span class=\"mclose mtight\">)</span></span></span></span><span style=\"top:-3.059085714285714em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">{</span><span class=\"mord mtight\">2</span><span class=\"mclose mtight\">}</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6287214285714287em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9379999999999998em;\"><span class=\"svg-align\" style=\"top:-2.15756em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"stretchy\" style=\"height:0.548em;min-width:1.6em;\"><span class=\"brace-left\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMinYMin slice'><path d='M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z'/></svg></span><span class=\"brace-center\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMidYMin slice'><path d='M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z'/></svg></span><span class=\"brace-right\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMaxYMin slice'><path d='M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z'/></svg></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">1</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">2</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8424400000000001em;\"><span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.223905em;\"><span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9380000000000002em;\"><span style=\"top:-1.2162000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0590857142857142em;\"><span style=\"top:-2.1487999999999996em;margin-left:-0.07847em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3447999999999998em;margin-left:0em;margin-right:0.1em;\"><span class=\"pstrut\" style=\"height:2.6833299999999998em;\"></span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\">X</span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33853em;\"><span></span></span></span></span></span></span><span class=\"mpunct mtight\">,</span><span class=\"mord mtight\">1</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span><span class=\"mclose mtight\">)</span></span></span></span><span style=\"top:-3.059085714285714em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">{</span><span class=\"mord mtight\">5</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span><span class=\"mclose mtight\">}</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6287214285714287em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9379999999999998em;\"><span class=\"svg-align\" style=\"top:-2.15756em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"stretchy\" style=\"height:0.548em;min-width:1.6em;\"><span class=\"brace-left\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMinYMin slice'><path d='M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z'/></svg></span><span class=\"brace-center\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMidYMin slice'><path d='M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z'/></svg></span><span class=\"brace-right\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMaxYMin slice'><path d='M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z'/></svg></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">m</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">m</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8424400000000001em;\"><span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.223905em;\"><span></span></span></span></span></span><span class=\"mclose\">]</span><span class=\"mpunct\">,</span></span></span><span style=\"top:-2.2898674999999997em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mopen\">[</span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-1.2162em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.22222em;\">Y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0590857142857142em;\"><span style=\"top:-2.1487999999999996em;margin-left:-0.22222em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">1</span><span class=\"mpunct mtight\">,</span><span class=\"mord mtight\">1</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span><span class=\"mclose mtight\">)</span></span></span></span><span style=\"top:-3.059085714285714em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">{</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">}</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5654857142857144em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9379999999999998em;\"><span class=\"svg-align\" style=\"top:-2.15756em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"stretchy\" style=\"height:0.548em;min-width:1.6em;\"><span class=\"brace-left\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMinYMin slice'><path d='M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z'/></svg></span><span class=\"brace-center\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMidYMin slice'><path d='M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z'/></svg></span><span class=\"brace-right\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMaxYMin slice'><path d='M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z'/></svg></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">1</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8424400000000001em;\"><span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.17964em;\"><span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-1.2162em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.22222em;\">Y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0590857142857142em;\"><span style=\"top:-2.1487999999999996em;margin-left:-0.22222em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">1</span><span class=\"mpunct mtight\">,</span><span class=\"mord mtight\">1</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span><span class=\"mclose mtight\">)</span></span></span></span><span style=\"top:-3.059085714285714em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">{</span><span class=\"mord mtight\">2</span><span class=\"mclose mtight\">}</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5654857142857144em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9379999999999998em;\"><span class=\"svg-align\" style=\"top:-2.15756em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"stretchy\" style=\"height:0.548em;min-width:1.6em;\"><span class=\"brace-left\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMinYMin slice'><path d='M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z'/></svg></span><span class=\"brace-center\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMidYMin slice'><path d='M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z'/></svg></span><span class=\"brace-right\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMaxYMin slice'><path d='M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z'/></svg></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">1</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">2</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8424400000000001em;\"><span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.17964em;\"><span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-1.2162em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.22222em;\">Y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0590857142857142em;\"><span style=\"top:-2.1487999999999996em;margin-left:-0.22222em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">1</span><span class=\"mpunct mtight\">,</span><span class=\"mord mtight\">1</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span><span class=\"mclose mtight\">)</span></span></span></span><span style=\"top:-3.059085714285714em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">{</span><span class=\"mord mtight\">5</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span><span class=\"mclose mtight\">}</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5654857142857144em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9379999999999998em;\"><span class=\"svg-align\" style=\"top:-2.15756em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"stretchy\" style=\"height:0.548em;min-width:1.6em;\"><span class=\"brace-left\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMinYMin slice'><path d='M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z'/></svg></span><span class=\"brace-center\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMidYMin slice'><path d='M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z'/></svg></span><span class=\"brace-right\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMaxYMin slice'><path d='M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z'/></svg></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">m</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">m</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8424400000000001em;\"><span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.17964em;\"><span></span></span></span></span></span><span class=\"mclose\">]</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.1897725em;\"><span></span></span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n<p><img src=\"/img/post/mooc/dl/batch-vs-mini-batch.png\" alt=\"Different between mini-batch and normal batch\" class=\"img-80\"><br>\n<em>Different between mini-batch and normal batch on the cost function. It's oscillated for mini-batch because the cost may be large for this mini-batch but small for the others. Image from the course.</em></p>\n<h4 id=\"notations\">Notations <a class=\"direct-link\" href=\"#notations\">#</a></h4>\n<ul>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>X</mi><mrow><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">X^{(i)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span></span></span></span></span>: <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span></span>th training example.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>z</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">z^{[l]}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span></span></span>: <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>z</mi></mrow><annotation encoding=\"application/x-tex\">z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span></span></span></span></span> value in <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi></mrow><annotation encoding=\"application/x-tex\">l</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span></span></span></span></span>th layer.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>X</mi><mrow><mo stretchy=\"false\">{</mo><mi>t</mi><mo stretchy=\"false\">}</mo></mrow></msup><mo separator=\"true\">,</mo><msup><mi>Y</mi><mrow><mo stretchy=\"false\">{</mo><mi>t</mi><mo stretchy=\"false\">}</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">X^{\\{t\\}}, Y^{\\{t\\}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0824399999999998em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">{</span><span class=\"mord mathnormal mtight\">t</span><span class=\"mclose mtight\">}</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">{</span><span class=\"mord mathnormal mtight\">t</span><span class=\"mclose mtight\">}</span></span></span></span></span></span></span></span></span></span></span></span></span>: index of different mini-batches.</li>\n</ul>\n<h4 id=\"algorithm\">Algorithm <a class=\"direct-link\" href=\"#algorithm\">#</a></h4>\n<pre class=\"language-python\"><code class=\"language-python\">X <span class=\"token operator\">=</span> data_input<br>Y <span class=\"token operator\">=</span> labels<br>parameters <span class=\"token operator\">=</span> initialize_parameters<span class=\"token punctuation\">(</span>layers_dims<span class=\"token punctuation\">)</span><br><span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> num_iterations<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># loop through epoches: to get the convergence</span><br>  <span class=\"token keyword\">for</span> t <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> num_batches<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># loop through the batches</span><br>    <span class=\"token comment\"># Forward propagation</span><br>    a<span class=\"token punctuation\">,</span> caches <span class=\"token operator\">=</span> forward_propagation<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span>t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> parameters<span class=\"token punctuation\">)</span><br>    <span class=\"token comment\"># Compute cost</span><br>    cost <span class=\"token operator\">+=</span> compute_cost<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> Y<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span>t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br>    <span class=\"token comment\"># Backward propagation</span><br>    grads <span class=\"token operator\">=</span> backward_propagation<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> caches<span class=\"token punctuation\">,</span> parameters<span class=\"token punctuation\">)</span><br>    <span class=\"token comment\"># Update parameters.</span><br>    parameters <span class=\"token operator\">=</span> update_parameters<span class=\"token punctuation\">(</span>parameters<span class=\"token punctuation\">,</span> grads<span class=\"token punctuation\">)</span></code></pre>\n<h4 id=\"how-to-build-mini-batches%3F\">How to build mini-batches? <a class=\"direct-link\" href=\"#how-to-build-mini-batches%3F\">#</a></h4>\n<p>We need 2 steps:</p>\n<p class=\"indent\"></p>\n<ol>\n<li><strong>Shuffle</strong>: shuffle columns (training examples) correspondingly between <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span></span> and <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Y</mi></mrow><annotation encoding=\"application/x-tex\">Y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span></span></span></span></span>. The shuffling step ensures that examples will be split randomly into different mini-batches.</li>\n<li><strong>Partition</strong>: choose a batch size and take mini-batches. Note that, the last batch may be smaller than the others.</li>\n</ol>\n<h4 id=\"type-of-mini-batch\">Type of mini-batch <a class=\"direct-link\" href=\"#type-of-mini-batch\">#</a></h4>\n<p>There are 3 types based on the size of batches:</p>\n<p class=\"indent\"></p>\n<ol>\n<li><strong>Batch Gradient Descent</strong> (<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>n</mi><mi>t</mi></msub><mo>=</mo><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">n_t = m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">m</span></span></span></span></span>) : entire training examples, i.e. <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><msup><mi>X</mi><mrow><mo stretchy=\"false\">{</mo><mn>1</mn><mo stretchy=\"false\">}</mo></mrow></msup><mo separator=\"true\">,</mo><msup><mi>Y</mi><mrow><mo stretchy=\"false\">{</mo><mn>1</mn><mo stretchy=\"false\">}</mo></mrow></msup><mo stretchy=\"false\">)</mo><mo>=</mo><mo stretchy=\"false\">(</mo><mi>X</mi><mo separator=\"true\">,</mo><mi>Y</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(X^{\\{1\\}}, Y^{\\{1\\}}) = (X,Y)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.138em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">{</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">}</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">{</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">}</span></span></span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"mclose\">)</span></span></span></span></span>.</li>\n<li><strong>Stochastic Gradient Descent</strong> (<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>n</mi><mi>t</mi></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">n_t = 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></span>) : every training example is it own a mini-batch (<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">m</span></span></span></span></span> mini batches).</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mo>&lt;</mo><msub><mi>n</mi><mi>t</mi></msub><mo>&lt;</mo><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">1&lt;n_t&lt;m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68354em;vertical-align:-0.0391em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6891em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">m</span></span></span></span></span>.</li>\n</ol>\n<p><img src=\"/img/post/mooc/dl/batch-vs-mini-batch-2.png\" alt=\"Different between 3 types of mini-batch.\" class=\"img-70\"><br>\n<em>Different between 3 types of mini-batch. Image from the course.</em></p>\n<p><mark markdown='span'><strong>Guideline</strong></mark>:</p>\n<p class=\"indent\"></p>\n<ul>\n<li>If small training set (<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi><mo>≤</mo><mn>2000</mn></mrow><annotation encoding=\"application/x-tex\">m \\le 2000</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mord mathnormal\">m</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span></span></span></span></span>): using batch gradient descent.</li>\n<li>Typical mini-batch sizes: <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>64</mn><mo separator=\"true\">,</mo><mn>128</mn><mo separator=\"true\">,</mo><mn>256</mn><mo separator=\"true\">,</mo><mn>512</mn><mo separator=\"true\">,</mo><mo>…</mo></mrow><annotation encoding=\"application/x-tex\">64, 128, 256, 512, \\ldots</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">6</span><span class=\"mord\">4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mord\">2</span><span class=\"mord\">8</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span><span class=\"mord\">5</span><span class=\"mord\">6</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">5</span><span class=\"mord\">1</span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span></span></span></span></span></li>\n<li>Make sure mibi-batch size in CPU/GPU memory!</li>\n</ul>\n<h3 id=\"exponentially-weighted-averages\">Exponentially weighted averages <a class=\"direct-link\" href=\"#exponentially-weighted-averages\">#</a></h3>\n<ul>\n<li>\n<p>It's faster than Gradient Descent!</p>\n</li>\n<li>\n<p><strong>Example</strong> (temperature in London):</p>\n<ul>\n<li>\n<p><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mi>t</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>: the temperature on day <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.61508em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">t</span></span></span></span></span>.</p>\n</li>\n<li>\n<p><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>v</mi><mi>t</mi></msub></mrow><annotation encoding=\"application/x-tex\">v_t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>: the average temp of each day. It's called exponential average over <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mn>1</mn><mrow><mn>1</mn><mo>−</mo><mi>β</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{1}{1-\\beta}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.326216em;vertical-align:-0.481108em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mbin mtight\">−</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05278em;\">β</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.481108em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span> days temperature.</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>v</mi><mi>t</mi></msub><mo>=</mo><mi>β</mi><msub><mi>v</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>+</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><mi>β</mi><mo stretchy=\"false\">)</mo><msub><mi>θ</mi><mi>t</mi></msub></mrow><annotation encoding=\"application/x-tex\">v_t = \\beta v_{t-1} + (1-\\beta)\\theta_t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.902771em;vertical-align:-0.208331em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mclose\">)</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n</li>\n<li>\n<p>E.g. <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>β</mi><mo>=</mo><mn>0.9</mn><mo>⇒</mo><msub><mi>v</mi><mi>t</mi></msub><mo>≃</mo><mn>10</mn></mrow><annotation encoding=\"application/x-tex\">\\beta=0.9 \\Rightarrow v_t \\simeq 10</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">9</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.61375em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≃</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span></span></span></span></span> days temperature; <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>β</mi><mo>=</mo><mn>0.98</mn><mo>⇒</mo><msub><mi>v</mi><mi>t</mi></msub><mo>≃</mo><mn>50</mn></mrow><annotation encoding=\"application/x-tex\">\\beta=0.98 \\Rightarrow v_t \\simeq 50</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">9</span><span class=\"mord\">8</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.61375em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≃</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">5</span><span class=\"mord\">0</span></span></span></span></span> days temperature.</p>\n</li>\n</ul>\n</li>\n<li>\n<p><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>β</mi></mrow><annotation encoding=\"application/x-tex\">\\beta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span></span></span></span></span> larger ⇒ smoother average line because we consider more days. However, curve is now shifted further to the right.</p>\n<p><img src=\"/img/post/mooc/dl/exponentially-weighted-average.png\" alt=\"Exponentially weighted average curves.\" class=\"img-50\"><br>\n<em>Exponentially weighted average curves: red line (<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>β</mi><mo>=</mo><mn>0.9</mn></mrow><annotation encoding=\"application/x-tex\">\\beta=0.9</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">9</span></span></span></span></span>), green line (<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>β</mi><mo>=</mo><mn>0.98</mn></mrow><annotation encoding=\"application/x-tex\">\\beta=0.98</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">9</span><span class=\"mord\">8</span></span></span></span></span>). Image from the course.</em></p>\n</li>\n<li>\n<p>When <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>β</mi></mrow><annotation encoding=\"application/x-tex\">\\beta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span></span></span></span></span> is so large ⇒ <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>v</mi><mi>t</mi></msub></mrow><annotation encoding=\"application/x-tex\">v_t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> adapts slowly to the changes of temperature  (more latency).</p>\n</li>\n<li>\n<p>Why we call &quot;exponentially&quot;?</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><msub><mi>v</mi><mn>100</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mn>0.9</mn><mo>×</mo><msub><mi>v</mi><mn>99</mn></msub><mo>+</mo><mn>0.1</mn><mo>×</mo><msub><mi>θ</mi><mn>100</mn></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mn>0.1</mn><mo>×</mo><msub><mi>θ</mi><mn>100</mn></msub><mo>+</mo><mn>0.1</mn><mo>×</mo><mn>0.99</mn><mo>×</mo><msub><mi>θ</mi><mn>99</mn></msub><mo>+</mo><mn>0.1</mn><mo>×</mo><mn>0.9</mn><msup><mn>9</mn><mn>2</mn></msup><mo>×</mo><msub><mi>θ</mi><mn>99</mn></msub><mo>+</mo><mo>…</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}v_{100} &amp;= 0.9\\times v_{99} + 0.1\\times \\theta_{100}\\\\&amp;= 0.1\\times \\theta_{100} + 0.1\\times 0.99\\times\\theta_{99} + 0.1\\times 0.99^2 \\times\\theta_{99} + \\ldots\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:3.024108em;vertical-align:-1.262054em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.762054em;\"><span style=\"top:-3.922054em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mord mtight\">0</span><span class=\"mord mtight\">0</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-2.397946em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.262054em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.762054em;\"><span style=\"top:-3.922054em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">9</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">9</span><span class=\"mord mtight\">9</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mord mtight\">0</span><span class=\"mord mtight\">0</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-2.397946em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mord mtight\">0</span><span class=\"mord mtight\">0</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">9</span><span class=\"mord\">9</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">9</span><span class=\"mord mtight\">9</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">9</span><span class=\"mord\"><span class=\"mord\">9</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">9</span><span class=\"mord mtight\">9</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"minner\">…</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.262054em;\"><span></span></span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n</li>\n</ul>\n<h4 id=\"bias-correction\">Bias correction <a class=\"direct-link\" href=\"#bias-correction\">#</a></h4>\n<ul>\n<li>\n<p><strong>Problem</strong>: the value of <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>v</mi><mi>t</mi></msub></mrow><annotation encoding=\"application/x-tex\">v_t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> at the beginning of exp ave curves may be lower than what we expect. For example, with <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>v</mi><mn>0</mn></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">v_0=0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></span>, we have <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>v</mi><mn>1</mn></msub><mo>=</mo><mn>0.02</mn><msub><mi>θ</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">v_1 = 0.02\\theta_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mord\">2</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> instead of <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>v</mi><mn>1</mn></msub><mo>=</mo><msub><mi>v</mi><mn>0</mn></msub><mo>+</mo><mn>0.02</mn><msub><mi>θ</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">v_1 = v_0 + 0.02\\theta_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mord\">2</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>.</p>\n</li>\n<li>\n<p><strong>Solution</strong>: Instead of using <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>v</mi><mi>t</mi></msub></mrow><annotation encoding=\"application/x-tex\">v_t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>, we take</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mfrac><msub><mi>v</mi><mi>t</mi></msub><mrow><mn>1</mn><mo>−</mo><msub><mi>β</mi><mi>t</mi></msub></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\dfrac{v_t}{1-\\beta_t}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.988em;vertical-align:-0.8804400000000001em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.1075599999999999em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8804400000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></eqn></section></math>\n</li>\n<li>\n<p>When <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.61508em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">t</span></span></span></span></span> is large ⇒ <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>β</mi><mi>t</mi></msup><mo>≃</mo><mn>0</mn><mo>⇒</mo><mstyle displaystyle=\"true\" scriptlevel=\"0\"><mfrac><msub><mi>v</mi><mi>t</mi></msub><mrow><mn>1</mn><mo>−</mo><msub><mi>β</mi><mi>t</mi></msub></mrow></mfrac></mstyle><mo>≃</mo><msub><mi>v</mi><mi>t</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\beta^t \\simeq 0 \\Rightarrow \\dfrac{v_t}{1-\\beta_t} \\simeq v_t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9879959999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7935559999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≃</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.988em;vertical-align:-0.8804400000000001em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.1075599999999999em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8804400000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≃</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span></p>\n<p><img src=\"/img/post/mooc/dl/bias-correction.png\" alt=\"Bias correction.\" class=\"img-50\"><br>\n<em>Bias correction for the green line, it's effective at the beginning of the line, with bigger <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.61508em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">t</span></span></span></span></span>, green and violet are overlapped. Image from the course.</em></p>\n</li>\n<li>\n<p><mark markdown='span'><strong>In practice</strong></mark>, we don't really see people bothering with bias correction!</p>\n</li>\n</ul>\n<h3 id=\"gradient-descent-with-momentum\">Gradient Descent with Momentum <a class=\"direct-link\" href=\"#gradient-descent-with-momentum\">#</a></h3>\n<ul>\n<li>\n<p>It's faster than Gradient Descent!</p>\n</li>\n<li>\n<p><strong>Why</strong>: when we use mini-batch, there are oscillation, momentum helps use reduce this.</p>\n</li>\n<li>\n<p><strong>One sentence</strong>: compute the exponential weighted average of your gradient ⇒ use that gradient to update your weights instead.</p>\n</li>\n<li>\n<p><strong>Idea</strong>: Momentum takes into account the past gradients to smooth out the update. We will store the 'direction' of the previous gradients in the variable <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span></span></span></span></span> . Formally, this will be the exponentially weighted average of the gradient on previous steps.</p>\n</li>\n<li>\n<p><strong>Intuition</strong>: You can also think of <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span></span></span></span></span> as the &quot;velocity&quot; of a ball rolling downhill, building up speed (and momentum) according to the direction of the gradient/slope of the hill.</p>\n<ul>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mi>W</mi><mo separator=\"true\">,</mo><mi>d</mi><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">dW, db</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">b</span></span></span></span></span> like &quot;acceleration&quot;.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>d</mi><mi>W</mi><mo separator=\"true\">,</mo><mi>V</mi><mi>d</mi><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">VdW, Vdb</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">b</span></span></span></span></span> like &quot;velocity&quot;.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>β</mi></mrow><annotation encoding=\"application/x-tex\">\\beta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span></span></span></span></span> likes &quot;friction&quot;.</li>\n</ul>\n<p><img src=\"/img/post/mooc/dl/momentum.png\" alt=\"Momentum.\" class=\"img-70\"><br>\n<em>We want slower learning in vertial direction and faster in horizontal direction. Image from the course.</em></p>\n</li>\n<li>\n<p><strong>Algorithm</strong>: on iteration <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.61508em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">t</span></span></span></span></span>:</p>\n<ol>\n<li>Compute <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mi>W</mi><mo separator=\"true\">,</mo><mi>d</mi><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">dW, db</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">b</span></span></span></span></span> on current mini-batch.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>d</mi><mi>W</mi><mo>=</mo><mi>β</mi><mi>V</mi><mi>d</mi><mi>W</mi><mo>+</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><mi>β</mi><mo stretchy=\"false\">)</mo><mi>d</mi><mi>W</mi></mrow><annotation encoding=\"application/x-tex\">VdW = \\beta VdW + (1-\\beta)dW</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mclose\">)</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span></span></span></span></span>.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>d</mi><mi>b</mi><mo>=</mo><mi>β</mi><mi>V</mi><mi>d</mi><mi>b</mi><mo>+</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><mi>β</mi><mo stretchy=\"false\">)</mo><mi>d</mi><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">Vdb = \\beta Vdb + (1-\\beta)db</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mclose\">)</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">b</span></span></span></span></span>.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>W</mi><mo>:</mo><mo>=</mo><mi>W</mi><mo>−</mo><mi>α</mi><mi>V</mi><mi>d</mi><mi>W</mi></mrow><annotation encoding=\"application/x-tex\">W:=W-\\alpha VdW</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span></span></span></span></span>.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi><mo>:</mo><mo>=</mo><mi>b</mi><mo>−</mo><mi>α</mi><mi>V</mi><mi>d</mi><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b:=b-\\alpha Vdb</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">b</span></span></span></span></span>.</li>\n</ol>\n</li>\n<li>\n<p><strong>Implementation</strong>:</p>\n<ul>\n<li>Try to tune between <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>0.8</mn><mo separator=\"true\">;</mo><mn>0.999</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[0.8; 0.999]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">8</span><span class=\"mpunct\">;</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">9</span><span class=\"mord\">9</span><span class=\"mord\">9</span><span class=\"mclose\">]</span></span></span></span></span>, commonly use <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>β</mi><mo>=</mo><mn>0.9</mn></mrow><annotation encoding=\"application/x-tex\">\\beta=0.9</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">9</span></span></span></span></span>.</li>\n<li>Don't bother bias correction, NO NEED.</li>\n<li>Don't need <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><mi>β</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(1-\\beta)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mclose\">)</span></span></span></span></span> in the formulas but Andrew prefer to keep it!</li>\n<li>Bigger <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>β</mi></mrow><annotation encoding=\"application/x-tex\">\\beta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span></span></span></span></span>, smaller in vertical direction.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"rmsprop\">RMSprop <a class=\"direct-link\" href=\"#rmsprop\">#</a></h3>\n<ul>\n<li>It's &quot;Root Mean Square propagation&quot;.</li>\n<li><strong>Algorithm</strong>: on iteration <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.61508em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">t</span></span></span></span></span>,\n<ol>\n<li>Compute <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mi>W</mi><mo separator=\"true\">,</mo><mi>d</mi><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">dW, db</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">b</span></span></span></span></span> on current element-wise mini-batch.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mi>d</mi><mi>W</mi><mo>=</mo><mi>β</mi><mi>S</mi><mi>d</mi><mi>W</mi><mo>+</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><mi>β</mi><mo stretchy=\"false\">)</mo><mi>d</mi><msup><mi>W</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">SdW = \\beta SdW + (1-\\beta)dW^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mclose\">)</span><span class=\"mord mathnormal\">d</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span>.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mi>d</mi><mi>b</mi><mo>=</mo><mi>β</mi><mi>S</mi><mi>d</mi><mi>b</mi><mo>+</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><mi>β</mi><mo stretchy=\"false\">)</mo><mi>d</mi><msup><mi>b</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">Sdb = \\beta Sdb + (1-\\beta)db^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mclose\">)</span><span class=\"mord mathnormal\">d</span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span>.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>W</mi><mo>:</mo><mo>=</mo><mi>W</mi><mo>−</mo><mi>α</mi><mfrac><mrow><mi>d</mi><mi>W</mi></mrow><mrow><msqrt><mrow><mi>S</mi><mi>d</mi><mi>W</mi></mrow></msqrt><mo>+</mo><mi>ϵ</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">W:=W -\\alpha \\frac{dW}{\\sqrt{SdW}+\\epsilon}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.418108em;vertical-align:-0.538em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801079999999999em;\"><span style=\"top:-2.5335085em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord sqrt mtight\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.937845em;\"><span class=\"svg-align\" style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mtight\" style=\"padding-left:0.833em;\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">W</span></span></span><span style=\"top:-2.8978450000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"hide-tail mtight\" style=\"min-width:0.853em;height:1.08em;\"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z'/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.102155em;\"><span></span></span></span></span></span><span class=\"mbin mtight\">+</span><span class=\"mord mathnormal mtight\">ϵ</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">W</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.538em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi><mo>:</mo><mo>=</mo><mi>b</mi><mo>−</mo><mi>α</mi><mfrac><mrow><mi>d</mi><mi>b</mi></mrow><mrow><msqrt><mrow><mi>S</mi><mi>d</mi><mi>W</mi></mrow></msqrt><mo>+</mo><mi>ϵ</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">b:=b-\\alpha \\frac{db}{\\sqrt{SdW} + \\epsilon}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.418108em;vertical-align:-0.538em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801079999999999em;\"><span style=\"top:-2.5335085em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord sqrt mtight\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.937845em;\"><span class=\"svg-align\" style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mtight\" style=\"padding-left:0.833em;\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">W</span></span></span><span style=\"top:-2.8978450000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"hide-tail mtight\" style=\"min-width:0.853em;height:1.08em;\"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z'/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.102155em;\"><span></span></span></span></span></span><span class=\"mbin mtight\">+</span><span class=\"mord mathnormal mtight\">ϵ</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.538em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>.</li>\n</ol>\n</li>\n<li>We choose <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ϵ</mi><mo>=</mo><mn>1</mn><msup><mn>0</mn><mrow><mo>−</mo><mn>8</mn></mrow></msup></mrow><annotation encoding=\"application/x-tex\">\\epsilon=10^{-8}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">ϵ</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">8</span></span></span></span></span></span></span></span></span></span></span></span></span> if <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msqrt><mrow><mi>S</mi><mi>d</mi><mi>W</mi></mrow></msqrt></mrow><annotation encoding=\"application/x-tex\">\\sqrt{SdW}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.04em;vertical-align:-0.10777999999999999em;\"></span><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.93222em;\"><span class=\"svg-align\" style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\" style=\"padding-left:0.833em;\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span></span></span><span style=\"top:-2.89222em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"hide-tail\" style=\"min-width:0.853em;height:1.08em;\"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z'/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.10777999999999999em;\"><span></span></span></span></span></span></span></span></span></span> is too small, otherwise <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ϵ</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">\\epsilon=0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">ϵ</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></span>.</li>\n<li><strong>In practice</strong>: <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mi>W</mi><mo separator=\"true\">,</mo><mi>d</mi><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">dW, db</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">b</span></span></span></span></span> are very high dimensional vectors.</li>\n</ul>\n<h3 id=\"adam-optimization\">Adam Optimization <a class=\"direct-link\" href=\"#adam-optimization\">#</a></h3>\n<ul>\n<li>It's &quot;Adaptive Moment Estimation&quot;.</li>\n<li><mark>One of the most effective optimization algorithm for training NN</mark>. It's commonly used and proven to be very effective for many different NN of a very wide variety of architectures.</li>\n<li>Adam = Momentum + RMSprop.</li>\n<li><strong>Implementation</strong>: on iteration <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.61508em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">t</span></span></span></span></span>,\n<ol>\n<li>Compute <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mi>W</mi><mo separator=\"true\">,</mo><mi>d</mi><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">dW, db</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">b</span></span></span></span></span> using current mini-batch.</li>\n<li>(Monentum) <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>d</mi><mi>W</mi><mo>=</mo><msub><mi>β</mi><mn>1</mn></msub><mi>V</mi><mi>d</mi><mi>W</mi><mo>+</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><msub><mi>β</mi><mn>1</mn></msub><mo stretchy=\"false\">)</mo><mi>d</mi><mi>W</mi></mrow><annotation encoding=\"application/x-tex\">VdW = \\beta_1 VdW + (1-\\beta_1)dW</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span></span></span></span></span>; <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>d</mi><mi>b</mi><mo>=</mo><msub><mi>β</mi><mn>1</mn></msub><mi>V</mi><mi>d</mi><mi>b</mi><mo>+</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><msub><mi>β</mi><mn>1</mn></msub><mo stretchy=\"false\">)</mo><mi>d</mi><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">Vdb = \\beta_1 Vdb+(1-\\beta_1)db</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">b</span></span></span></span></span>.</li>\n<li>(RMSprop) <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mi>d</mi><mi>W</mi><mo>=</mo><msub><mi>β</mi><mn>2</mn></msub><mi>S</mi><mi>d</mi><mi>W</mi><mo>+</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><msub><mi>β</mi><mn>2</mn></msub><mo stretchy=\"false\">)</mo><mi>d</mi><msup><mi>W</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">SdW = \\beta_2 SdW + (1-\\beta_2)dW^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mord mathnormal\">d</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span>; <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mi>d</mi><mi>b</mi><mo>=</mo><msub><mi>β</mi><mn>2</mn></msub><mi>S</mi><mi>d</mi><mi>b</mi><mo>+</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><msub><mi>β</mi><mn>2</mn></msub><mo stretchy=\"false\">)</mo><mi>d</mi><msup><mi>b</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">Sdb = \\beta_2Sdb +(1-\\beta_2)db^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mord mathnormal\">d</span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span>.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>V</mi><mrow><mi>d</mi><mi>W</mi></mrow><mtext>corrected</mtext></msubsup><mo>=</mo><mstyle displaystyle=\"true\" scriptlevel=\"0\"><mfrac><mrow><mi>V</mi><mi>d</mi><mi>W</mi></mrow><mrow><mn>1</mn><mo>−</mo><msubsup><mi>β</mi><mn>1</mn><mi>t</mi></msubsup></mrow></mfrac></mstyle></mrow><annotation encoding=\"application/x-tex\">V_{dW}^{\\text{corrected}} = \\dfrac{VdW}{1-\\beta_1^t}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.132216em;vertical-align:-0.2831079999999999em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.849108em;\"><span style=\"top:-2.4168920000000003em;margin-left:-0.22222em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">W</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">corrected</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2831079999999999em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.323748em;vertical-align:-0.9523079999999999em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.37144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7753559999999999em;\"><span style=\"top:-2.433692em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span><span style=\"top:-3.0448000000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.26630799999999993em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9523079999999999em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>; <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>V</mi><mrow><mi>d</mi><mi>b</mi></mrow><mtext>corrected</mtext></msubsup><mo>=</mo><mstyle displaystyle=\"true\" scriptlevel=\"0\"><mfrac><mrow><mi>V</mi><mi>d</mi><mi>b</mi></mrow><mrow><mn>1</mn><mo>−</mo><msubsup><mi>β</mi><mn>1</mn><mi>t</mi></msubsup></mrow></mfrac></mstyle></mrow><annotation encoding=\"application/x-tex\">V_{db}^{\\text{corrected}} = \\dfrac{Vdb}{1-\\beta_1^t}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.132216em;vertical-align:-0.2831079999999999em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.849108em;\"><span style=\"top:-2.4168920000000003em;margin-left:-0.22222em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\">b</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">corrected</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2831079999999999em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.323748em;vertical-align:-0.9523079999999999em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.37144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7753559999999999em;\"><span style=\"top:-2.433692em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span><span style=\"top:-3.0448000000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.26630799999999993em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9523079999999999em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>S</mi><mrow><mi>d</mi><mi>W</mi></mrow><mtext>corrected</mtext></msubsup><mo>=</mo><mstyle displaystyle=\"true\" scriptlevel=\"0\"><mfrac><mrow><mi>S</mi><mi>d</mi><mi>W</mi></mrow><mrow><mn>1</mn><mo>−</mo><msubsup><mi>β</mi><mn>2</mn><mi>t</mi></msubsup></mrow></mfrac></mstyle></mrow><annotation encoding=\"application/x-tex\">S_{dW}^{\\text{corrected}} = \\dfrac{SdW}{1-\\beta_2^t}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.132216em;vertical-align:-0.2831079999999999em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.849108em;\"><span style=\"top:-2.4168920000000003em;margin-left:-0.05764em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">W</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">corrected</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2831079999999999em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.323748em;vertical-align:-0.9523079999999999em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.37144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7753559999999999em;\"><span style=\"top:-2.433692em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span><span style=\"top:-3.0448000000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.26630799999999993em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9523079999999999em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>; <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>S</mi><mrow><mi>d</mi><mi>b</mi></mrow><mtext>corrected</mtext></msubsup><mo>=</mo><mstyle displaystyle=\"true\" scriptlevel=\"0\"><mfrac><mrow><mi>S</mi><mi>d</mi><mi>b</mi></mrow><mrow><mn>1</mn><mo>−</mo><msubsup><mi>β</mi><mn>2</mn><mi>t</mi></msubsup></mrow></mfrac></mstyle></mrow><annotation encoding=\"application/x-tex\">S_{db}^{\\text{corrected}} = \\dfrac{Sdb}{1-\\beta_2^t}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.132216em;vertical-align:-0.2831079999999999em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.849108em;\"><span style=\"top:-2.4168920000000003em;margin-left:-0.05764em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\">b</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">corrected</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2831079999999999em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.323748em;vertical-align:-0.9523079999999999em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.37144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7753559999999999em;\"><span style=\"top:-2.433692em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span><span style=\"top:-3.0448000000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.26630799999999993em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9523079999999999em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>W</mi><mo>:</mo><mo>=</mo><mi>W</mi><mo>−</mo><mi>α</mi><mstyle displaystyle=\"true\" scriptlevel=\"0\"><mfrac><msubsup><mi>V</mi><mrow><mi>d</mi><mi>W</mi></mrow><mtext>corrected</mtext></msubsup><mrow><msqrt><msubsup><mi>S</mi><mrow><mi>d</mi><mi>W</mi></mrow><mtext>corrected</mtext></msubsup></msqrt><mo>+</mo><mi>ϵ</mi></mrow></mfrac></mstyle></mrow><annotation encoding=\"application/x-tex\">W:=W-\\alpha \\dfrac{V_{dW}^{\\text{corrected}}}{\\sqrt{S_{dW}^{\\text{corrected}}} + \\epsilon}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.2561080000000002em;vertical-align:-1.73em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.526108em;\"><span style=\"top:-2.1100000000000003em;\"><span class=\"pstrut\" style=\"height:3.2498000000000005em;\"></span><span class=\"mord\"><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.2498000000000002em;\"><span class=\"svg-align\" style=\"top:-3.8em;\"><span class=\"pstrut\" style=\"height:3.8em;\"></span><span class=\"mord\" style=\"padding-left:1em;\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8309079999999999em;\"><span style=\"top:-2.398692em;margin-left:-0.05764em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">W</span></span></span></span><span style=\"top:-3.0448em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">corrected</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30130799999999996em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.2098em;\"><span class=\"pstrut\" style=\"height:3.8em;\"></span><span class=\"hide-tail\" style=\"min-width:1.02em;height:1.8800000000000001em;\"><svg width='400em' height='1.8800000000000001em' viewBox='0 0 400000 1944' preserveAspectRatio='xMinYMin slice'><path d='M983 90\nl0 -0\nc4,-6.7,10,-10,18,-10 H400000v40\nH1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7\ns-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744\nc-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30\nc26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722\nc56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5\nc53.7,-170.3,84.5,-266.8,92.5,-289.5z\nM1001 80h400000v40h-400000z'/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5901999999999998em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\">ϵ</span></span></span><span style=\"top:-3.4798000000000004em;\"><span class=\"pstrut\" style=\"height:3.2498000000000005em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.9268000000000005em;\"><span class=\"pstrut\" style=\"height:3.2498000000000005em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.849108em;\"><span style=\"top:-2.4168920000000003em;margin-left:-0.22222em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">W</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">corrected</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2831079999999999em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.73em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>; <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi><mo>:</mo><mo>=</mo><mi>b</mi><mo>−</mo><mi>α</mi><mstyle displaystyle=\"true\" scriptlevel=\"0\"><mfrac><msubsup><mi>V</mi><mrow><mi>d</mi><mi>b</mi></mrow><mtext>corrected</mtext></msubsup><mrow><msqrt><msubsup><mi>S</mi><mrow><mi>d</mi><mi>b</mi></mrow><mtext>corrected</mtext></msubsup></msqrt><mo>+</mo><mi>ϵ</mi></mrow></mfrac></mstyle></mrow><annotation encoding=\"application/x-tex\">b:=b-\\alpha \\dfrac{V_{db}^{\\text{corrected}}}{\\sqrt{S_{db}^{\\text{corrected}}} + \\epsilon}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.2561080000000002em;vertical-align:-1.73em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.526108em;\"><span style=\"top:-2.1100000000000003em;\"><span class=\"pstrut\" style=\"height:3.2498000000000005em;\"></span><span class=\"mord\"><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.2498000000000002em;\"><span class=\"svg-align\" style=\"top:-3.8em;\"><span class=\"pstrut\" style=\"height:3.8em;\"></span><span class=\"mord\" style=\"padding-left:1em;\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8309079999999999em;\"><span style=\"top:-2.398692em;margin-left:-0.05764em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\">b</span></span></span></span><span style=\"top:-3.0448em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">corrected</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30130799999999996em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.2098em;\"><span class=\"pstrut\" style=\"height:3.8em;\"></span><span class=\"hide-tail\" style=\"min-width:1.02em;height:1.8800000000000001em;\"><svg width='400em' height='1.8800000000000001em' viewBox='0 0 400000 1944' preserveAspectRatio='xMinYMin slice'><path d='M983 90\nl0 -0\nc4,-6.7,10,-10,18,-10 H400000v40\nH1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7\ns-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744\nc-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30\nc26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722\nc56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5\nc53.7,-170.3,84.5,-266.8,92.5,-289.5z\nM1001 80h400000v40h-400000z'/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5901999999999998em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\">ϵ</span></span></span><span style=\"top:-3.4798000000000004em;\"><span class=\"pstrut\" style=\"height:3.2498000000000005em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.9268000000000005em;\"><span class=\"pstrut\" style=\"height:3.2498000000000005em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.849108em;\"><span style=\"top:-2.4168920000000003em;margin-left:-0.22222em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\">b</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">corrected</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2831079999999999em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.73em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>.</li>\n</ol>\n</li>\n<li><strong>Initialization</strong> of the velocity is zero, i.e. <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>d</mi><mi>W</mi><mo>=</mo><mi>S</mi><mi>d</mi><mi>W</mi><mo>=</mo><mi>V</mi><mi>d</mi><mi>b</mi><mo>=</mo><mi>S</mi><mi>d</mi><mi>b</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">VdW=SdW=Vdb=Sdb=0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></span>.</li>\n<li>If <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>β</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">\\beta=0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></span>, it's standard gradient descent without momentum.</li>\n<li><strong>Hyperparameter choices</strong>:\n<ul>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span></span></span> = needs to be tuned, very important!</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>β</mi><mn>1</mn></msub><mo>=</mo><mn>0.9</mn></mrow><annotation encoding=\"application/x-tex\">\\beta_1 = 0.9</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">9</span></span></span></span></span> (<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mi>W</mi></mrow><annotation encoding=\"application/x-tex\">dW</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span></span></span></span></span>), first moment.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>β</mi><mn>2</mn></msub><mo>=</mo><mn>0.999</mn></mrow><annotation encoding=\"application/x-tex\">\\beta_2 = 0.999</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">9</span><span class=\"mord\">9</span><span class=\"mord\">9</span></span></span></span></span> (<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><msup><mi>W</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">dW^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span>), second mement.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ϵ</mi><mo>=</mo><mn>1</mn><msup><mn>0</mn><mrow><mo>−</mo><mn>8</mn></mrow></msup></mrow><annotation encoding=\"application/x-tex\">\\epsilon = 10^{-8}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">ϵ</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">8</span></span></span></span></span></span></span></span></span></span></span></span></span>.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"learning-rate-decay\">Learning rate decay <a class=\"direct-link\" href=\"#learning-rate-decay\">#</a></h2>\n<ul>\n<li>\n<p><strong>Idea</strong>: slowly reduce learning rate over time, it's learning rate decay.</p>\n</li>\n<li>\n<p><strong>Why</strong>? Below figure showes that, we need slower rate <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span></span></span> (smaller step) at the area near the center.</p>\n<p><img src=\"/img/post/mooc/dl/learning-rate-decay.png\" alt=\"Learning rate decay.\" class=\"img-70\"><br>\n<em>Example of learning rate decay. Image from the course.</em></p>\n</li>\n<li>\n<p>Recall that, 1 epoch = 1 pass through data.</p>\n</li>\n<li>\n<p>Learning rate decay can be chosen 1 of below,</p>\n</li>\n</ul>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mi>α</mi></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mfrac><mn>1</mn><mrow><mn>1</mn><mo>+</mo><mtext>decay_rate</mtext><mo>×</mo><mtext>epoch_num</mtext></mrow></mfrac><mo>×</mo><msub><mi>α</mi><mn>0</mn></msub><mo separator=\"true\">,</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mi>α</mi></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mn>0.9</mn><msup><mn>5</mn><mtext>epoch_num</mtext></msup><mo>×</mo><msub><mi>α</mi><mn>0</mn></msub><mo>−</mo><mtext>exponentially_decay</mtext><mo separator=\"true\">,</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mi>α</mi></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mfrac><mi>k</mi><msqrt><mtext>epoch_number</mtext></msqrt></mfrac><mo>×</mo><mi>α</mi><mo separator=\"true\">,</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mi>α</mi></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mfrac><mi>k</mi><msqrt><mi>t</mi></msqrt></mfrac><mo>×</mo><msub><mi>α</mi><mn>0</mn></msub><mi mathvariant=\"normal\">.</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\n\\begin{aligned}\n\\alpha &amp;= \\dfrac{1}{1 + \\text{decay\\_rate} \\times \\text{epoch\\_num}} \\times \\alpha_0, \\\\\n\\alpha &amp;= 0.95^{\\text{epoch\\_num}} \\times \\alpha_0 - \\text{exponentially\\_decay}, \\\\\n\\alpha &amp;= \\dfrac{k}{\\sqrt{\\text{epoch\\_number}}} \\times \\alpha, \\\\\n\\alpha &amp;= \\dfrac{k}{\\sqrt{t}} \\times \\alpha_0.\n\\end{aligned}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:9.579428em;vertical-align:-4.539714em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:5.039714em;\"><span style=\"top:-7.089714em;\"><span class=\"pstrut\" style=\"height:3.3714399999999998em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span><span style=\"top:-4.894606em;\"><span class=\"pstrut\" style=\"height:3.3714399999999998em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span><span style=\"top:-2.8631659999999997em;\"><span class=\"pstrut\" style=\"height:3.3714399999999998em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span><span style=\"top:-0.061725999999999726em;\"><span class=\"pstrut\" style=\"height:3.3714399999999998em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:4.539714em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:5.039714em;\"><span style=\"top:-7.089714em;\"><span class=\"pstrut\" style=\"height:3.3714399999999998em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord text\"><span class=\"mord\">decay_rate</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord text\"><span class=\"mord\">epoch_num</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.996em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span></span></span><span style=\"top:-4.894606em;\"><span class=\"pstrut\" style=\"height:3.3714399999999998em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">9</span><span class=\"mord\"><span class=\"mord\">5</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8991079999999999em;\"><span style=\"top:-3.1130000000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">epoch_num</span></span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord text\"><span class=\"mord\">exponentially_decay</span></span><span class=\"mpunct\">,</span></span></span><span style=\"top:-2.8631659999999997em;\"><span class=\"pstrut\" style=\"height:3.3714399999999998em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.37144em;\"><span style=\"top:-2.23278em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8772199999999999em;\"><span class=\"svg-align\" style=\"top:-3.2em;\"><span class=\"pstrut\" style=\"height:3.2em;\"></span><span class=\"mord\" style=\"padding-left:1em;\"><span class=\"mord text\"><span class=\"mord\">epoch_number</span></span></span></span><span style=\"top:-2.8372200000000003em;\"><span class=\"pstrut\" style=\"height:3.2em;\"></span><span class=\"hide-tail\" style=\"min-width:1.02em;height:1.28em;\"><svg width='400em' height='1.28em' viewBox='0 0 400000 1296' preserveAspectRatio='xMinYMin slice'><path d='M263,681c0.7,0,18,39.7,52,119\nc34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120\nc340,-704.7,510.7,-1060.3,512,-1067\nl0 -0\nc4.7,-7.3,11,-11,19,-11\nH40000v40H1012.3\ns-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232\nc-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1\ns-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26\nc-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z\nM1001 80h400000v40h-400000z'/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3627800000000001em;\"><span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.13em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mpunct\">,</span></span></span><span style=\"top:-0.061725999999999726em;\"><span class=\"pstrut\" style=\"height:3.3714399999999998em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.37144em;\"><span style=\"top:-2.21746em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.89254em;\"><span class=\"svg-align\" style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\" style=\"padding-left:0.833em;\"><span class=\"mord mathnormal\">t</span></span></span><span style=\"top:-2.85254em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"hide-tail\" style=\"min-width:0.853em;height:1.08em;\"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z'/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.14746000000000004em;\"><span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.93em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">.</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:4.539714em;\"><span></span></span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n<h3 id=\"problem-of-local-optima\">Problem of local optima <a class=\"direct-link\" href=\"#problem-of-local-optima\">#</a></h3>\n<p><img src=\"/img/post/mooc/dl/local-optima.png\" alt=\"Local optima problem.\" class=\"img-70\"><br>\n<em>Local optima problem: local &amp; right optima (left) and saddle point (right). Image from the course.</em></p>\n<ul>\n<li>In high dimension, you likely see saddle points than local optimum.</li>\n<li><strong>Problem of plateau</strong>: a region where derivative is close to zero for a long time.\n<ul>\n<li>Unlikely get stuck in a bad local optimal.</li>\n<li>Plateau can make learning slow: use Momentum, RMSprop, Adam.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"batch-gd-makes-learning-too-long%3F\">Batch GD makes learning too long? <a class=\"direct-link\" href=\"#batch-gd-makes-learning-too-long%3F\">#</a></h3>\n<ul>\n<li>Try better random initialization for weights.</li>\n<li>Try mini-batch GD.</li>\n<li>Try using Adam</li>\n<li>Try tuning learning rate <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span></span></span>.</li>\n</ul>\n<h2 id=\"hyperparameter-tuning\">Hyperparameter tuning <a class=\"direct-link\" href=\"#hyperparameter-tuning\">#</a></h2>\n<h3 id=\"tuning-process\">Tuning process <a class=\"direct-link\" href=\"#tuning-process\">#</a></h3>\n<ul>\n<li>\n<p>There are many hyperparameters but <mark>some are more important than others!</mark></p>\n</li>\n<li>\n<p>Learning rate <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span></span></span> (most important), #hiddien units, <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>β</mi></mrow><annotation encoding=\"application/x-tex\">\\beta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span></span></span></span></span>, mini-batch size (2nd important), #layers, learning decay,...</p>\n</li>\n<li>\n<p>Don't use grid, use random!</p>\n<p><img src=\"/img/post/mooc/dl/tuning-process.jpg\" alt=\"Tuning process\" class=\"img-80\"><br>\n<em>Tuning process. Don't use grid (left), use random (right). Image from the course.</em></p>\n</li>\n<li>\n<p><strong>Coarse to fine</strong>: find an area containing effective values ⇒ zoom in and take more points in that area,</p>\n<p><img src=\"/img/post/mooc/dl/coarse-to-fine.jpg\" alt=\"Coarse to fine\" class=\"img-40\"><br>\n<em>Coarse to fine: first try on a big square, then focus on the smaller one (blue). Image from the course.</em></p>\n</li>\n<li>\n<p>Choose randomly but NOT mean uniform scale! We can choose uniformly on #hidden units, #layers, but not for the others (e.g. <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span></span></span>).</p>\n</li>\n<li>\n<p>For <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span></span></span>, for example, we need to divide into equal &quot;large&quot; spaces and then use uniform.</p>\n<p><img src=\"/img/post/mooc/dl/app-scale-hp.jpg\" alt=\"Appropriate scale for hyperparameters\" class=\"img-70\"><br>\n<em>Appropriate scale for hyperparameters. Image from the course.</em></p>\n</li>\n<li>\n<p>Hyperparameters for <strong>exponentially weighted averages</strong>:</p>\n<ul>\n<li>\n<p>We cannot try with values between <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>0.9</mn><mo separator=\"true\">,</mo><mn>0.999</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[0.9, 0.999]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">9</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">9</span><span class=\"mord\">9</span><span class=\"mord\">9</span><span class=\"mclose\">]</span></span></span></span></span> because,</p>\n<ul>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>β</mi><mo>:</mo><mn>0.9000</mn><mo>→</mo><mn>0.9005</mn></mrow><annotation encoding=\"application/x-tex\">\\beta: 0.9000 \\to 0.9005</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">9</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">9</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">5</span></span></span></span></span> : no much changes,</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>β</mi><mo>:</mo><mn>0.999</mn><mo>→</mo><mn>0.995</mn></mrow><annotation encoding=\"application/x-tex\">\\beta: 0.999 \\to 0.995</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">9</span><span class=\"mord\">9</span><span class=\"mord\">9</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">9</span><span class=\"mord\">9</span><span class=\"mord\">5</span></span></span></span></span> : huge impact!</li>\n</ul>\n</li>\n<li>\n<p>Consider <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mo>−</mo><mi>β</mi><mo>∈</mo><mo stretchy=\"false\">[</mo><mn>1</mn><msup><mn>0</mn><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo separator=\"true\">,</mo><mn>1</mn><msup><mn>0</mn><mrow><mo>−</mo><mn>3</mn></mrow></msup><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">1-\\beta \\in [10^{-1}, 10^{-3}]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span><span class=\"mclose\">]</span></span></span></span></span> instead!</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mi>r</mi></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>∈</mo><mo stretchy=\"false\">[</mo><mo>−</mo><mn>3</mn><mo separator=\"true\">,</mo><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mn>1</mn><mo>−</mo><mi>β</mi><mo>=</mo><mn>1</mn><msup><mn>0</mn><mi>r</mi></msup></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>⇔</mo><mi>β</mi><mo>=</mo><mn>1</mn><mo>−</mo><mn>1</mn><msup><mn>0</mn><mi>r</mi></msup></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}r &amp;\\in [-3, -1] \\\\1-\\beta = 10^r &amp;\\Leftrightarrow \\beta = 1-10^r\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:3.0000000000000004em;vertical-align:-1.2500000000000002em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.7500000000000002em;\"><span style=\"top:-3.91em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span><span style=\"top:-2.41em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7143919999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.2500000000000002em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.7500000000000002em;\"><span style=\"top:-3.91em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">−</span><span class=\"mord\">3</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span><span style=\"top:-2.41em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇔</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7143919999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.2500000000000002em;\"><span></span></span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"in-practice%3A-panda-vs-caviar\">In practice: Panda vs Caviar <a class=\"direct-link\" href=\"#in-practice%3A-panda-vs-caviar\">#</a></h3>\n<ul>\n<li>How to organize your hyperparameter search?</li>\n<li><strong>Advice</strong>: Re-testing/Re-evaluating your hyperparameters at least once every several months.</li>\n<li>2 ways:\n<ol>\n<li><strong>Babysitting one model</strong> (<mark>Panda</mark>): when we have huge data but weak CPU/GPU <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> try very small number of models at a time. Check the performance step by step (cost function reduces...)\n<ul>\n<li>In some domains like advertising, computer vision apps,...</li>\n<li>We call &quot;panda&quot; because panda has very few number of babies at a time (and in their life) <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> try to keep them alike once at a time.</li>\n</ul>\n</li>\n<li><strong>Training many models in parallel</strong> (<mark>Caviar</mark>): when we don't work on huge data + strong CPU/GPU. <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> Try many models in parallel and choose the best performance!\n<ul>\n<li>We call &quot;Caviar&quot; because of intuition.</li>\n</ul>\n</li>\n</ol>\n</li>\n</ul>\n<h2 id=\"batch-normalization\">Batch Normalization <a class=\"direct-link\" href=\"#batch-normalization\">#</a></h2>\n<ul>\n<li>Make NN much more robust to the choice of hyperparameters. <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇐</mo></mrow><annotation encoding=\"application/x-tex\">\\Leftarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇐</span></span></span></span></span> doesn't work for all NN but if it does, make training faster!</li>\n<li><mark>One of the most important ideas</mark> in the rise of Deep Learning.</li>\n<li>Like we wanna normalize input to speed up learning, <mark markdown=\"span\">in this case, we wanna normalize <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Z</mi></mrow><annotation encoding=\"application/x-tex\">Z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span></span></span></span></span></mark> (in the hidden layers)</li>\n</ul>\n<p>Given some initial values in NN <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>Z</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow></msup><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msup><mi>Z</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">(</mo><mi>m</mi><mo stretchy=\"false\">)</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">Z^{[l](1)},\\ldots, Z^{[l](m)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0824399999999998em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">m</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span></span></span></span></span>,</p>\n<p class=\"indent\"></p>\n<ol>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>μ</mi><mo>=</mo><mstyle displaystyle=\"true\" scriptlevel=\"0\"><mfrac><mn>1</mn><mi>m</mi></mfrac></mstyle><msub><mo>∑</mo><mi>i</mi></msub><msup><mi>Z</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">\\mu = \\dfrac{1}{m} \\sum_i Z^{[l](i)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">μ</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.00744em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">m</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.16195399999999993em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span></span></span></span></span></li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>σ</mi><mn>2</mn></msup><mo>=</mo><mstyle displaystyle=\"true\" scriptlevel=\"0\"><mfrac><mn>1</mn><mi>m</mi></mfrac></mstyle><msub><mo>∑</mo><mi>i</mi></msub><mo stretchy=\"false\">(</mo><msup><mi>Z</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow></msup><mo>−</mo><mi>μ</mi><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">\\sigma^2 = \\dfrac{1}{m}\\sum_i (Z^{[l](i)} - \\mu)^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.00744em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">m</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.16195399999999993em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">μ</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span></li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>Z</mi><mtext>norm</mtext><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow></msubsup><mo>=</mo><mstyle displaystyle=\"true\" scriptlevel=\"0\"><mfrac><mrow><msup><mi>Z</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow></msup><mo>−</mo><mi>μ</mi></mrow><mrow><msqrt><msup><mi>σ</mi><mn>2</mn></msup></msqrt><mo>+</mo><mi>ϵ</mi></mrow></mfrac></mstyle></mrow><annotation encoding=\"application/x-tex\">Z^{[l](i)}_{\\text{norm}} = \\dfrac{Z^{[l](i)} - \\mu}{\\sqrt{\\sigma^2} + \\epsilon}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.161392em;vertical-align:-0.11659199999999997em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0448em;\"><span style=\"top:-2.5834080000000004em;margin-left:-0.07153em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">norm</span></span></span></span></span><span style=\"top:-3.2198em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.11659199999999997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.495em;vertical-align:-0.93em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.565em;\"><span style=\"top:-2.154946em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9550540000000001em;\"><span class=\"svg-align\" style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\" style=\"padding-left:0.833em;\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.740108em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span><span style=\"top:-2.915054em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"hide-tail\" style=\"min-width:0.853em;height:1.08em;\"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z'/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.08494599999999997em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\">ϵ</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\">μ</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.93em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span> to get mean <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>μ</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">\\mu=0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">μ</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></span> and STD <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>σ</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">\\sigma=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></span>.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mover accent=\"true\"><mi>Z</mi><mo>~</mo></mover><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow></msup><mo>=</mo><mi>γ</mi><msubsup><mi>Z</mi><mtext>norm</mtext><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow></msubsup><mo>+</mo><mi>β</mi></mrow><annotation encoding=\"application/x-tex\">\\tilde{Z}^{[l](i)} = \\gamma Z^{[l](i)}_{\\text{norm}} + \\beta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9201899999999998em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9201899999999998em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span></span></span><span style=\"top:-3.6023300000000003em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.16666em;\"><span class=\"mord\">~</span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.23924em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05556em;\">γ</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0448em;\"><span style=\"top:-2.5834080000000004em;margin-left:-0.07153em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">norm</span></span></span></span></span><span style=\"top:-3.2198em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.11659199999999997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span></span></span></span></span> to have different other normal distribution.</li>\n</ol>\n<p><mark>Now, <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>γ</mi><mo separator=\"true\">,</mo><mi>β</mi></mrow><annotation encoding=\"application/x-tex\">\\gamma, \\beta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05556em;\">γ</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span></span></span></span></span> are learnable parameters of the model.</mark></p>\n<p class=\"indent\"></p>\n<ul>\n<li>If we choose different <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>β</mi><mo separator=\"true\">,</mo><mi>γ</mi></mrow><annotation encoding=\"application/x-tex\">\\beta, \\gamma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05556em;\">γ</span></span></span></span></span> <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> hidden units have other means &amp; variances.</li>\n<li>Instead of using <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>Z</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow></msup><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msup><mi>Z</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">(</mo><mi>m</mi><mo stretchy=\"false\">)</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">Z^{[l](1)}, \\ldots, Z^{[l](m)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0824399999999998em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">m</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span></span></span></span></span>, we use <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mover accent=\"true\"><mi>Z</mi><mo>~</mo></mover><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">\\tilde{Z}^{[l](i)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9201899999999998em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9201899999999998em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span></span></span><span style=\"top:-3.6023300000000003em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.16666em;\"><span class=\"mord\">~</span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span></span></span></span></span>.</li>\n<li>Difference between normalizing input <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span></span> and normalizing in hidden units:\n<ul>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span></span>: after normalizing, <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>μ</mi><mo>=</mo><mn>0</mn><mo separator=\"true\">,</mo><mi>σ</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">\\mu=0, \\sigma=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">μ</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></span>.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Z</mi></mrow><annotation encoding=\"application/x-tex\">Z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span></span></span></span></span>: after normalizing, various <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>μ</mi><mo separator=\"true\">,</mo><mi>σ</mi></mrow><annotation encoding=\"application/x-tex\">\\mu, \\sigma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">μ</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span></span></span></span></span>.</li>\n</ul>\n</li>\n</ul>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>X</mi><munderover><mo stretchy=\"true\">→</mo><mpadded width=\"+0.6em\" lspace=\"0.3em\"><mrow></mrow></mpadded><mpadded width=\"+0.6em\" lspace=\"0.3em\"><mrow><msup><mi>W</mi><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></msup><mo separator=\"true\">,</mo><msup><mi>b</mi><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></msup></mrow></mpadded></munderover><msup><mi>Z</mi><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></msup><munderover><mo stretchy=\"true\">→</mo><mpadded width=\"+0.6em\" lspace=\"0.3em\"><mtext>Batch Norm</mtext></mpadded><mpadded width=\"+0.6em\" lspace=\"0.3em\"><mrow><msup><mi>β</mi><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></msup><mo separator=\"true\">,</mo><msup><mi>γ</mi><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></msup></mrow></mpadded></munderover><msup><mover accent=\"true\"><mi>Z</mi><mo>~</mo></mover><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></msup><mo>→</mo><msup><mi>a</mi><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></msup><mo>=</mo><msup><mi>g</mi><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></msup><mo stretchy=\"false\">(</mo><msup><mover accent=\"true\"><mi>Z</mi><mo>~</mo></mover><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></msup><mo stretchy=\"false\">)</mo><munderover><mo stretchy=\"true\">→</mo><mpadded width=\"+0.6em\" lspace=\"0.3em\"><mrow></mrow></mpadded><mpadded width=\"+0.6em\" lspace=\"0.3em\"><mrow><msup><mi>W</mi><mrow><mo stretchy=\"false\">[</mo><mn>2</mn><mo stretchy=\"false\">]</mo></mrow></msup><mo separator=\"true\">,</mo><msup><mi>b</mi><mrow><mo stretchy=\"false\">[</mo><mn>2</mn><mo stretchy=\"false\">]</mo></mrow></msup></mrow></mpadded></munderover><msup><mi>Z</mi><mrow><mo stretchy=\"false\">[</mo><mn>2</mn><mo stretchy=\"false\">]</mo></mrow></msup><munderover><mo stretchy=\"true\">→</mo><mpadded width=\"+0.6em\" lspace=\"0.3em\"><mtext>Batch Norm</mtext></mpadded><mpadded width=\"+0.6em\" lspace=\"0.3em\"><mrow><msup><mi>β</mi><mrow><mo stretchy=\"false\">[</mo><mn>2</mn><mo stretchy=\"false\">]</mo></mrow></msup><mo separator=\"true\">,</mo><msup><mi>γ</mi><mrow><mo stretchy=\"false\">[</mo><mn>2</mn><mo stretchy=\"false\">]</mo></mrow></msup></mrow></mpadded></munderover><msup><mover accent=\"true\"><mi>Z</mi><mo>~</mo></mover><mrow><mo stretchy=\"false\">[</mo><mn>2</mn><mo stretchy=\"false\">]</mo></mrow></msup><mo>→</mo><msup><mi>a</mi><mrow><mo stretchy=\"false\">[</mo><mn>2</mn><mo stretchy=\"false\">]</mo></mrow></msup><mo>→</mo><mo>…</mo></mrow><annotation encoding=\"application/x-tex\">\nX \\xrightarrow[]{W^{[1]}, b^{[1]}} Z^{[1]} \\xrightarrow[\\text{Batch Norm}]{\\beta^{[1]}, \\gamma^{[1]}} \\tilde{Z}^{[1]} \\to a^{[1]} = g^{[1]}(\\tilde{Z}^{[1]}) \\xrightarrow[]{W^{[2]}, b^{[2]}} Z^{[2]} \\xrightarrow[\\text{Batch Norm}]{\\beta^{[2]}, \\gamma^{[2]}} \\tilde{Z}^{[2]} \\to a^{[2]} \\to \\ldots\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.4206999999999999em;vertical-align:-0.12199999999999989em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel x-arrow\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.2987em;\"><span style=\"top:-3.322em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight x-arrow-pad\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9667142857142857em;\"><span style=\"top:-2.966714285714285em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mpunct mtight\">,</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9667142857142857em;\"><span style=\"top:-2.966714285714285em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"svg-align\" style=\"top:-2.689em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"hide-tail\" style=\"height:0.522em;min-width:1.469em;\"><svg width='400em' height='0.522em' viewBox='0 0 400000 522' preserveAspectRatio='xMaxYMin slice'><path d='M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z'/></svg></span></span><span style=\"top:-2.5780000000000003em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight x-arrow-pad\"><span class=\"mord mtight\"></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.12199999999999989em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.9068079999999998em;vertical-align:-0.6081079999999999em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel x-arrow\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.2987em;\"><span style=\"top:-3.322em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight x-arrow-pad\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9667142857142857em;\"><span style=\"top:-2.966714285714285em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mpunct mtight\">,</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05556em;\">γ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9667142857142857em;\"><span style=\"top:-2.966714285714285em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"svg-align\" style=\"top:-2.689em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"hide-tail\" style=\"height:0.522em;min-width:1.469em;\"><svg width='400em' height='0.522em' viewBox='0 0 400000 522' preserveAspectRatio='xMaxYMin slice'><path d='M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z'/></svg></span></span><span style=\"top:-2.0918920000000005em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight x-arrow-pad\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">Batch Norm</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6081079999999999em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.938em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9201899999999998em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span></span></span><span style=\"top:-3.6023300000000003em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.16666em;\"><span class=\"mord\">~</span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.938em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.5487em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9201899999999998em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span></span></span><span style=\"top:-3.6023300000000003em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.16666em;\"><span class=\"mord\">~</span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel x-arrow\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.2987em;\"><span style=\"top:-3.322em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight x-arrow-pad\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9667142857142857em;\"><span style=\"top:-2.966714285714285em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">2</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mpunct mtight\">,</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9667142857142857em;\"><span style=\"top:-2.966714285714285em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">2</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"svg-align\" style=\"top:-2.689em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"hide-tail\" style=\"height:0.522em;min-width:1.469em;\"><svg width='400em' height='0.522em' viewBox='0 0 400000 522' preserveAspectRatio='xMaxYMin slice'><path d='M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z'/></svg></span></span><span style=\"top:-2.5780000000000003em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight x-arrow-pad\"><span class=\"mord mtight\"></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.12199999999999989em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.9068079999999998em;vertical-align:-0.6081079999999999em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">2</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel x-arrow\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.2987em;\"><span style=\"top:-3.322em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight x-arrow-pad\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9667142857142857em;\"><span style=\"top:-2.966714285714285em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">2</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mpunct mtight\">,</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05556em;\">γ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9667142857142857em;\"><span style=\"top:-2.966714285714285em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">2</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"svg-align\" style=\"top:-2.689em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"hide-tail\" style=\"height:0.522em;min-width:1.469em;\"><svg width='400em' height='0.522em' viewBox='0 0 400000 522' preserveAspectRatio='xMaxYMin slice'><path d='M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z'/></svg></span></span><span style=\"top:-2.0918920000000005em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight x-arrow-pad\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">Batch Norm</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6081079999999999em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.938em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9201899999999998em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span></span></span><span style=\"top:-3.6023300000000003em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.16666em;\"><span class=\"mord\">~</span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">2</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.938em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">2</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.12em;vertical-align:0em;\"></span><span class=\"minner\">…</span></span></span></span></span></eqn></section></math>\n<ul>\n<li>\n<p>Note that, <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>β</mi></mrow><annotation encoding=\"application/x-tex\">\\beta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span></span></span></span></span> in this case is different from <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>β</mi></mrow><annotation encoding=\"application/x-tex\">\\beta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span></span></span></span></span> in <a href=\"#adam-optimization\">Adam optimization</a>!</p>\n</li>\n<li>\n<p>We can use gradient descent to update <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>β</mi></mrow><annotation encoding=\"application/x-tex\">\\beta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span></span></span></span></span> and <strong>even use</strong> Adam/RMSprop/Momentum to update params <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>γ</mi><mo separator=\"true\">,</mo><mi>β</mi></mrow><annotation encoding=\"application/x-tex\">\\gamma, \\beta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05556em;\">γ</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span></span></span></span></span>, not just for Gradient Descent.</p>\n</li>\n<li>\n<p><strong>In practice</strong>, we won't have to implement Batch Norm step by step by ourself, programming framework (like Tensorflow) will do!</p>\n</li>\n<li>\n<p><strong>In practice</strong>, Batch Norm is usually applied with mini-batch of your training set.</p>\n</li>\n<li>\n<p><strong>Parameters</strong>: <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>W</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo separator=\"true\">,</mo><msup><mi>β</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo separator=\"true\">,</mo><msup><mi>γ</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">W^{[l]}, \\beta^{[l]}, \\gamma^{[l]}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0824399999999998em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05556em;\">γ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span></span></span>. We don't need to consider <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>b</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">b^{[l]}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span></span></span> becase it will be subtracted out in the process of normalization!</p>\n</li>\n<li>\n<p><strong>Fitting Batch Norm into a NN</strong>: for <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.61508em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">t</span></span></span></span></span> goes through the number of mini-batches,</p>\n<ol>\n<li>Compute forward prop on <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>X</mi><mrow><mo stretchy=\"false\">{</mo><mi>t</mi><mo stretchy=\"false\">}</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">X^{\\{t\\}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">{</span><span class=\"mord mathnormal mtight\">t</span><span class=\"mclose mtight\">}</span></span></span></span></span></span></span></span></span></span></span></span></span>.</li>\n<li>In each hidden layer, use Batch Norm to reparameter <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>Z</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">Z^{[l]}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span></span></span> to <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mover accent=\"true\"><mi>Z</mi><mo>~</mo></mover><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">\\tilde{Z}^{[l]}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9201899999999998em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9201899999999998em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span></span></span><span style=\"top:-3.6023300000000003em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.16666em;\"><span class=\"mord\">~</span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span></span></span>.</li>\n<li>Use backprop to compute <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><msup><mi>W</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo separator=\"true\">,</mo><mi>d</mi><msup><mi>β</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo separator=\"true\">,</mo><mi>d</mi><msup><mi>γ</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">dW^{[l]}, d\\beta^{[l]}, d\\gamma^{[l]}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0824399999999998em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05556em;\">γ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span></span></span>.</li>\n<li>Update params (we can use Momentum / RMSprop / Adam):</li>\n</ol>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><msup><mi>W</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>:</mo><mo>=</mo><msup><mi>W</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo>−</mo><mi>α</mi><mi>d</mi><msup><mi>W</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo separator=\"true\">,</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><msup><mi>β</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>:</mo><mo>=</mo><msup><mi>β</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo>−</mo><mi>α</mi><mi>d</mi><msup><mi>β</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo separator=\"true\">,</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><msup><mi>γ</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>:</mo><mo>=</mo><msup><mi>γ</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo>−</mo><mi>α</mi><mi>d</mi><msup><mi>γ</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mi mathvariant=\"normal\">.</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}W^{[l]} &amp;:= W^{[l]} - \\alpha dW^{[l]}, \\\\\\beta^{[l]} &amp;:= \\beta^{[l]} - \\alpha d\\beta^{[l]}, \\\\\\gamma^{[l]} &amp;:= \\gamma^{[l]} - \\alpha d\\gamma^{[l]}.\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:4.7940000000000005em;vertical-align:-2.1470000000000002em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.6470000000000002em;\"><span style=\"top:-4.7090000000000005em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.111em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-1.513em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05556em;\">γ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.1470000000000002em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.6470000000000002em;\"><span style=\"top:-4.7090000000000005em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mord mathnormal\">d</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span></span></span><span style=\"top:-3.111em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mord mathnormal\">d</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span></span></span><span style=\"top:-1.513em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05556em;\">γ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mord mathnormal\">d</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05556em;\">γ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mord\">.</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.1470000000000002em;\"><span></span></span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n</li>\n<li>\n<p>Sometimes, BN has a 2nd effect as a regularization technique but it's unintended! We don't use it for the purpose of regularization, use L1, L2 or dropout instead.</p>\n</li>\n</ul>\n<p>(Recall) <strong>Regularization</strong>: techniques that lower the complexity of a NN during training, thus prevent the overfitting.</p>\n<h3 id=\"why-bn-works%3F\">Why BN works? <a class=\"direct-link\" href=\"#why-bn-works%3F\">#</a></h3>\n<ul>\n<li>Make weights in later / deeper layers be more robust to changing to the weights in the earlier layers.</li>\n<li><strong>Covariate shift problem</strong>: suppose we have <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding=\"application/x-tex\">X \\to Y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span></span></span></span></span>. If <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span></span>'s distribution changes, it changes the result in <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Y</mi></mrow><annotation encoding=\"application/x-tex\">Y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span></span></span></span></span> much. We have to re-train our model.\n<ul>\n<li>Example: &quot;cat vs non-cat&quot; problem. If we apply params from the model of &quot;black cat vs non-cat&quot; to the problem of &quot;colored-cat vs non-cat&quot;, it won't work because distribution in &quot;black cat&quot; is different from &quot;colored cat&quot;.</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"/img/post/mooc/dl/cat-vs-noncat.jpg\" alt=\"Covariate problem\" class=\"img-70\"><br>\n<em>Covariate problem. Image from the course.</em></p>\n<p><img src=\"/img/post/mooc/dl/bn-work.jpg\" alt=\"Why BN works?\" class=\"img-60\"><br>\n<em>Why BN works?. Image from the course.</em></p>\n<p>In the perspective of layer 3, it depends only on layer 2 <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> If layers before layer 2 changes <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> distribution of layer 2 changes <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> covariate shift problem for layer 3 <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> Batch Norm makes sure that mean and variance in layer 2 is always robust before going to layer 3!</p>\n<h3 id=\"batch-norm-in-test-time\">Batch Norm in test time <a class=\"direct-link\" href=\"#batch-norm-in-test-time\">#</a></h3>\n<ul>\n<li>BN processes our data one min-batch at a time. However, in test time, you need to process the examples at a time. <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> Need to adapt your network to do that.</li>\n<li><strong>Idea</strong>: calculate <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>μ</mi><mo separator=\"true\">,</mo><msup><mi>σ</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">\\mu, \\sigma^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.008548em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">μ</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span> using <em>exponentially weighted average</em> (across mini-batches). Other words,\n<ul>\n<li>In the training time, we calculate (and store) also the <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>μ</mi><mrow><mo stretchy=\"false\">{</mo><mi>t</mi><mo stretchy=\"false\">}</mo><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo separator=\"true\">,</mo><msup><mi>σ</mi><mrow><mo stretchy=\"false\">{</mo><mi>t</mi><mo stretchy=\"false\">}</mo><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">\\mu^{\\{t\\}[l]}, \\sigma^{\\{t\\}[l]}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0824399999999998em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">μ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">{</span><span class=\"mord mathnormal mtight\">t</span><span class=\"mclose mtight\">}</span><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">{</span><span class=\"mord mathnormal mtight\">t</span><span class=\"mclose mtight\">}</span><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span></span></span> in each mini-batch.</li>\n<li>Find <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>μ</mi><mo separator=\"true\">,</mo><msup><mi>σ</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">\\mu, \\sigma^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.008548em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">μ</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span> (exponentially weighted average) of all mini-batches.</li>\n<li>Use this <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>μ</mi><mo separator=\"true\">,</mo><msup><mi>σ</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">\\mu, \\sigma^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.008548em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">μ</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span> to find <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>Z</mi><mtext>norm</mtext></msub></mrow><annotation encoding=\"application/x-tex\">Z_{\\text{norm}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">norm</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> and <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mi>Z</mi><mo>~</mo></mover></mrow><annotation encoding=\"application/x-tex\">\\tilde{Z}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9201899999999998em;vertical-align:0em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9201899999999998em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span></span></span><span style=\"top:-3.6023300000000003em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.16666em;\"><span class=\"mord\">~</span></span></span></span></span></span></span></span></span></span></span> (at each example <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span></span>).</li>\n</ul>\n</li>\n<li><mark>Don't worry, it's easy to use with Deep Learning Frameworks.</mark></li>\n</ul>\n<h2 id=\"tensorflow-introduction\">Tensorflow introduction <a class=\"direct-link\" href=\"#tensorflow-introduction\">#</a></h2>\n<p>Writing and running programs in TensorFlow has the following steps:</p>\n<p class=\"indent\"></p>\n<ol>\n<li>Create Tensors (variables) that are not yet executed/evaluated.</li>\n<li>Write operations between those Tensors.</li>\n<li>Initialize your Tensors.</li>\n<li>Create a Session.</li>\n<li>Run the Session. This will run the operations you'd written above.</li>\n</ol>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># create placeholders</span><br>x <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>placeholder<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>int64<span class=\"token punctuation\">,</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'x'</span><span class=\"token punctuation\">)</span><br>X <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>placeholder<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>float32<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>n_x<span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"X\"</span><span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># initialize</span><br>W1 <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>get_variable<span class=\"token punctuation\">(</span><span class=\"token string\">\"W1\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">25</span><span class=\"token punctuation\">,</span><span class=\"token number\">12288</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> initializer <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>contrib<span class=\"token punctuation\">.</span>layers<span class=\"token punctuation\">.</span>xavier_initializer<span class=\"token punctuation\">(</span>seed <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>b1 <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>get_variable<span class=\"token punctuation\">(</span><span class=\"token string\">\"b1\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">25</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> initializer <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>zeros_initializer<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<p>There are two typical ways to create and use sessions in tensorflow:</p>\n<ol>\n<li>Method 1:</li>\n</ol>\n<pre class=\"language-python\"><code class=\"language-python\">sess <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>Session<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\"># Run the variables initialization (if needed), run the operations</span><br>result <span class=\"token operator\">=</span> sess<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span> feed_dict <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><br>sess<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># Close the session</span></code></pre>\n<ol start=\"2\">\n<li>Method 2:</li>\n</ol>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">with</span> tf<span class=\"token punctuation\">.</span>Session<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> sess<span class=\"token punctuation\">:</span><br>    <span class=\"token comment\"># run the variables initialization (if needed), run the operations</span><br>    result <span class=\"token operator\">=</span> sess<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span> feed_dict <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><br>    <span class=\"token comment\"># This takes care of closing the session for you :)</span></code></pre>\n<p><strong>What you should remember</strong>:</p>\n<p class=\"indent\"></p>\n<ul>\n<li>Tensorflow is a programming framework used in deep learning</li>\n<li>The two main object classes in tensorflow are Tensors and Operators.</li>\n<li>When you code in tensorflow you have to take the following steps:\n<ul>\n<li>Create a graph containing Tensors (Variables, Placeholders ...) and Operations (<code>tf.matmul</code>, <code>tf.add</code>, ...)</li>\n<li>Create a session</li>\n<li>Initialize the session</li>\n<li>Run the session to execute the graph</li>\n</ul>\n</li>\n<li>You can execute the graph multiple times as you've seen in model()</li>\n<li>The backpropagation and optimization is automatically done when running the session on the &quot;optimizer&quot; object.</li>\n</ul>\n<p>👉 Check more details about the codes in <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/data-science-learning/blob/master/coursera-deep-learning-deeplearning.ai/course-2/week-3/TensorFlow_Tutorial_v3b.html\">the notebook</a>.</p>\n",
      "date_published": "2020-04-25T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/wordpress-docker/",
      "url": "https://dinhanhthi.com/wordpress-docker/",
      "title": "Wordpress Docker",
      "content_html": "<p>👉 Note: <a href=\"/tags/wordpress/\">All notes of Wordpress</a>.<br>\n👉 Note: <a href=\"/docker\">Docker 101</a><br>\n👉 Note: <a href=\"/docker-gpu\">Docker + GPUs</a><br>\n👉 Note: <a href=\"/airflow-k8s-101\">Airflow + Kubernetes 101</a><br>\n👉 Note: <a href=\"/tensorflow\">Tensorflow extra</a></p>\n<p>In this note, I wanna an automatical setting up of basic things.</p>\n<p>👉 Install Docker by following <a href=\"/docker#installation\">this note</a>.</p>\n<h2 id=\"wp-basic-without-backup\">WP basic without backup <a class=\"direct-link\" href=\"#wp-basic-without-backup\">#</a></h2>\n<p>Make a folder name <strong>mysite</strong> containing,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">mysite<br><span class=\"token operator\">|</span>-- docker-compose.yml  <span class=\"token comment\"># main file</span><br><span class=\"token operator\">|</span>-- backup              <span class=\"token comment\"># contains backup files using AIO WP Migration plugins</span><br><span class=\"token operator\">|</span>-- plugins             <span class=\"token comment\"># contains plugins</span><br><span class=\"token operator\">|</span>-- themes              <span class=\"token comment\"># contains templates</span><br><span class=\"token operator\">|</span>-- wordpress           <span class=\"token comment\"># main site's sources</span></code></pre>\n<p>In the <code>docker-compose.yml</code>,</p>\n<pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'3.1'</span><br><br><span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span><br><br>  <span class=\"token key atrule\">wordpress</span><span class=\"token punctuation\">:</span><br>    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> wordpress<br>    <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> always<br>    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span><br>        <span class=\"token punctuation\">-</span> 8080<span class=\"token punctuation\">:</span><span class=\"token number\">80</span><br>    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span><br>        <span class=\"token key atrule\">WORDPRESS_DB_HOST</span><span class=\"token punctuation\">:</span> db<br>        <span class=\"token key atrule\">WORDPRESS_DB_USER</span><span class=\"token punctuation\">:</span> exampleuser<br>        <span class=\"token key atrule\">WORDPRESS_DB_PASSWORD</span><span class=\"token punctuation\">:</span> examplepass<br>        <span class=\"token key atrule\">WORDPRESS_DB_NAME</span><span class=\"token punctuation\">:</span> exampledb<br>    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span><br>        <span class=\"token punctuation\">-</span> <span class=\"token string\">'./html/:/var/www/html/'</span><br>        <span class=\"token punctuation\">-</span> <span class=\"token string\">'./plugins/:/var/www/html/wp-content/plugins/'</span><br>        <span class=\"token punctuation\">-</span> <span class=\"token string\">'./themes/&lt;theme>/:/var/www/html/wp-content/themes/&lt;theme>'</span><br><br>  <span class=\"token key atrule\">db</span><span class=\"token punctuation\">:</span><br>    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> mysql<span class=\"token punctuation\">:</span><span class=\"token number\">5.7</span><br>    <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> always<br>    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span><br>        <span class=\"token key atrule\">MYSQL_DATABASE</span><span class=\"token punctuation\">:</span> exampledb<br>        <span class=\"token key atrule\">MYSQL_USER</span><span class=\"token punctuation\">:</span> exampleuser<br>        <span class=\"token key atrule\">MYSQL_PASSWORD</span><span class=\"token punctuation\">:</span> examplepass<br>        <span class=\"token key atrule\">MYSQL_RANDOM_ROOT_PASSWORD</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'1'</span></code></pre>\n<p>Start the container,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> mysite<br>docker-compose up -d<br><span class=\"token comment\"># check running containers</span><br>docker <span class=\"token function\">ps</span> -a</code></pre>\n<p>Browse <code>http://localhost:8080</code> to install wordpress by gui.</p>\n<h2 id=\"debug\">Debug <a class=\"direct-link\" href=\"#debug\">#</a></h2>\n<p>In the case you wanna see the list of users or access to the mysql environement,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># connect to MySQL running container</span><br>docker <span class=\"token builtin class-name\">exec</span> -it <span class=\"token operator\">&lt;</span>container_db<span class=\"token operator\">></span> <span class=\"token function\">bash</span><br><br><span class=\"token comment\"># connect to mysql database</span><br>mysql -u wordpress -p<br><br><span class=\"token comment\"># list all users</span><br>SELECT host, user FROM mysql.user<span class=\"token punctuation\">;</span></code></pre>\n<h2 id=\"install-wp-cli\">Install WP-CLI <a class=\"direct-link\" href=\"#install-wp-cli\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Download wp-cli</span><br><span class=\"token function\">curl</span> -O https://raw.githubusercontent.com/wp-cli/builds/gh-pages/phar/wp-cli.phar<br><span class=\"token comment\"># Make it executable</span><br><span class=\"token function\">chmod</span> +x wp-cli.phar<br><span class=\"token comment\"># Move it into /usr/local/bin/wp</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">mv</span> wp-cli.phar /usr/local/bin/wp<br><span class=\"token comment\"># Check whether the installation worked</span><br>wp --info</code></pre>\n<p>For example, activate <code>all-in-one-wp-migration</code> (already copied / placed in folder <code>plugins</code>)</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">wp plugin activate all-in-one-wp-migration --allow-root</code></pre>\n<h2 id=\"errors-%26-warnings\">Errors &amp; warnings <a class=\"direct-link\" href=\"#errors-%26-warnings\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\">apache2: Could not reliably determine the server's fully qualified domain name</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># enter to wordpress container's bash</span><br>docker <span class=\"token builtin class-name\">exec</span> -it <span class=\"token operator\">&lt;</span>container<span class=\"token operator\">></span> <span class=\"token function\">bash</span><br><span class=\"token comment\"># add</span><br><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'ServerName localhost'</span> <span class=\"token operator\">>></span> /etc/apache2/apache2.conf<br><span class=\"token comment\"># restart apache/container</span><br><span class=\"token function\">service</span> apache2 restart</code></pre>\n<hr>\n<pre class=\"language-bash\"><code class=\"language-bash\">Could not create directory on mounted volume</code></pre>\n<p class=\"mb-0\"></p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># enter to wordpress container's bash</span><br>docker <span class=\"token builtin class-name\">exec</span> -it <span class=\"token operator\">&lt;</span>container<span class=\"token operator\">></span> <span class=\"token function\">bash</span><br><span class=\"token comment\"># then</span><br><span class=\"token function\">chown</span> -R www-data:www-data /var/www</code></pre>\n<hr>\n<pre class=\"language-bash\"><code class=\"language-bash\">Your <span class=\"token function\">file</span> exceeds the maximum upload size <span class=\"token keyword\">for</span> this site: <span class=\"token number\">2</span> MB</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># .htaccess</span><br>php_value upload_max_filesize 400M<br>php_value post_max_size 400M<br><span class=\"token comment\"># php_value memory_limit 256M</span><br><span class=\"token comment\"># php_value max_execution_time 300</span><br><span class=\"token comment\"># php_value max_input_time 300</span></code></pre>\n<h2 id=\"references\">References <a class=\"direct-link\" href=\"#references\">#</a></h2>\n<ul>\n<li><strong>Niku Hietanen</strong> -- <a href=\"https://gist.github.com/Niq1982/7b02c735d55d20395c655637d0491e74\">wpcli-ai1wm</a>.</li>\n<li><a href=\"https://help.servmask.com/knowledgebase/cli-integration/\">All-in-One WP Migration WP CLI Integration</a>.</li>\n<li><strong>Docker Hub</strong> -- <a href=\"https://hub.docker.com/r/conetix/wordpress-with-wp-cli/\">wordpress-with-wp-cli</a>.</li>\n<li><strong>Docker</strong> - <a href=\"https://docs.docker.com/compose/wordpress/\">Quickstart: Compose and WordPress</a>.</li>\n<li><a href=\"https://dev.to/lampewebdev/how-to-get-wordpress-running-with-docker-4mg6\">How to get WordPress running with Docker</a>.</li>\n</ul>\n",
      "date_published": "2020-04-24T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/ssh/",
      "url": "https://dinhanhthi.com/ssh/",
      "title": "SSH",
      "content_html": "<p>👉 Note: <a href=\"/github/#clone-via-git%40-(ssh)\">SSH &amp; Github</a>.</p>\n<h2 id=\"how-it-works%3F\">How it works? <a class=\"direct-link\" href=\"#how-it-works%3F\">#</a></h2>\n<ol>\n<li>Local creates <code>public_key</code> (<code>id_rsa.pub</code>) &amp; <code>private_key</code> (<code>id_rsa</code>).</li>\n<li>Only <code>private_key</code> can understand <code>public_key</code>.</li>\n<li>Remote sends messages encrypted based on <code>public_key</code>.</li>\n<li>Local has to use <code>private_key</code> to understand (decrypt) remote's messages.</li>\n</ol>\n<h2 id=\"generate-a-public-key\">Generate a public key <a class=\"direct-link\" href=\"#generate-a-public-key\">#</a></h2>\n<ul>\n<li>\n<p><strong>Windows</strong>: Using below command, if it asks for a location, indicate <code>C:\\Users\\dinha\\.ssh\\</code></p>\n</li>\n<li>\n<p><strong>Linux</strong>: <code>/home/thi/.ssh/</code></p>\n<pre class=\"language-bash\"><code class=\"language-bash\">ssh-keygen -t rsa -b <span class=\"token number\">4096</span> -C <span class=\"token string\">\"your_email@example.com\"</span><br><span class=\"token comment\"># without email</span><br>ssh-keygen -t rsa -f ~/.ssh/id_rsa.home</code></pre>\n</li>\n</ul>\n<h3 id=\"multiple-ssh-keys\">Multiple ssh keys <a class=\"direct-link\" href=\"#multiple-ssh-keys\">#</a></h3>\n<ol>\n<li>\n<p>Create key with different names, e.g. <code>id_rsa.home</code>, <code>id_rsa.work</code>.</p>\n</li>\n<li>\n<p>Add to <code>~/.ssh/config</code>,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">Host home<br>Hostname home.example.com<br>IdentityFile ~/.ssh/id_rsa.home<br>User <span class=\"token operator\">&lt;</span>your home acct<span class=\"token operator\">></span><br><span class=\"token comment\">#</span><br>Host work<br>Hostname work.example.com<br>IdentityFile ~/.ssh/id_rsa.work<br>User <span class=\"token operator\">&lt;</span>your work acct<span class=\"token operator\">></span></code></pre>\n</li>\n<li>\n<p>Add to ssh-agent (don't need to retype password again)</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">eval</span> <span class=\"token string\">\"<span class=\"token variable\"><span class=\"token variable\">$(</span>ssh-agent -s<span class=\"token variable\">)</span></span>\"</span><br>ssh-add ~/.ssh/id_rsa.home<br>ssh-add ~/.ssh/id_rsa.work</code></pre>\n</li>\n<li>\n<p>Don't forget to clone you repo with <code>git</code> instead of <code>https</code>.</p>\n</li>\n</ol>\n<h3 id=\"add-public-key-to-remote\">Add public key to remote <a class=\"direct-link\" href=\"#add-public-key-to-remote\">#</a></h3>\n<p>Suppose that we wanna connect to a remote host <code>username@remote.com</code> from a local machine.</p>\n<ol>\n<li>On local machine, copy public key at <code>C:/Users/dinha/.ssh</code> (Windows) and <code>~/.ssh</code> (Linux) (something like <code>id_rsa.pub</code>) (copy its content).</li>\n<li>On remote server (Linux), go to <code>~/.ssh</code>, open file <strong>authorized_keys</strong> by <code>vim authorized_keys</code>\n<ol>\n<li>Be carefull, you can modify the current keys!</li>\n<li>Go to the end of this file (by <kbd>W</kbd>)</li>\n<li>Press <kbd>I</kbd> to enter to the editing mode, press <kbd>Enter</kbd> for a new line.</li>\n<li>Using mouse to copy/paste the key in the 1st step (on your local machine).</li>\n<li>Note that, each key stays in a separated line.</li>\n<li><kbd>ESC</kbd> and then type <code>:wq</code> to quick and save.</li>\n<li>Try to connect again!</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"connecting\">Connecting <a class=\"direct-link\" href=\"#connecting\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">ssh</span> remote_username@remote_host<br><span class=\"token function\">ssh</span> remote_username@remote_host -p remote_port</code></pre>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># CHECK VERSION</span><br><span class=\"token function\">ssh</span> -V</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># DISCONNECT</span><br><span class=\"token builtin class-name\">exit</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># COPY FILE: LOCAL -> REMOTE</span><br><span class=\"token function\">scp</span> local_file user@remote-host:/var/tmp/<br><br><span class=\"token comment\"># multiple files, using wildcat \"\\*\"</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># REMOTE -> LOCAL</span><br><span class=\"token function\">scp</span> user@remote:/usr/local/bin/add.sh <span class=\"token builtin class-name\">.</span><br><br><span class=\"token comment\"># multiple files, using wildcat \"\\*\"</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># pass inside the command</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> sshpass<br>sshpass -p your_password <span class=\"token function\">ssh</span> user@hostname</code></pre>\n</div>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># copy with sudo on remote</span><br><span class=\"token comment\"># 1. copy to a place you have permissions</span><br><span class=\"token function\">scp</span> * thi@remote:/home/thi/tmp/<br><span class=\"token comment\"># 2. move to the place you want</span><br><span class=\"token function\">ssh</span> thi@remote <span class=\"token function\">sudo</span> <span class=\"token function\">mv</span> /home/thi/tmp/<span class=\"token punctuation\">\\</span>* /place/we/want</code></pre>\n<h2 id=\"command-line-parameters\">Command line parameters <a class=\"direct-link\" href=\"#command-line-parameters\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># FOR EXAMPLE</span><br><span class=\"token function\">ssh</span> -C <span class=\"token comment\"># use data compression</span></code></pre>\n<p><strong>Usage</strong>: <a href=\"/jupyter-notebook#jupyter-notebook-on-remote-server\">Access jupyter notebooks from remote server on local machine</a>.</p>\n<p>Below are some popular commands<sup><a href=\"http://linuxcommand.org/lc3_man_pages/ssh1.html\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup>:</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># check the full list</span><br><span class=\"token function\">man</span> <span class=\"token function\">ssh</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># exit background running</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> net-tools<br><span class=\"token function\">netstat</span> -lepunt<br><br><span class=\"token comment\"># kill a process, e.g. 29231/ssh</span><br><span class=\"token function\">kill</span> <span class=\"token operator\">&lt;</span>pid<span class=\"token operator\">></span> <span class=\"token comment\"># eg. kill 29231</span></code></pre>\n</div>\n<div class=\"two-columns-list\" markdown=\"1\">\n<ul>\n<li><code>-C</code>: use data compression.</li>\n<li><code>-f</code>: Requests ssh to go to background just before command execution</li>\n<li><code>-L</code>: local port forwarding<sup><a href=\"https://help.ubuntu.com/community/SSH/OpenSSH/PortForwarding\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup>.</li>\n<li><code>-N</code>: Do not execute a remote command.  This is useful for just forwarding ports</li>\n<li><code>-p &lt;port&gt;</code>: port to connect.</li>\n<li><code>-q</code>: quiet mode.</li>\n<li><code>-v</code>: verbose mode.</li>\n<li><code>-X</code>: running GUI remote app locally.</li>\n</ul>\n</div>\n<h2 id=\"errors\">Errors <a class=\"direct-link\" href=\"#errors\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># REMOTE HOST IDENTIFICATION HAS CHANGED</span><br><span class=\"token comment\"># Offending ECDSA key in /home/thi/.ssh/known_hosts:21</span><br><br><span class=\"token comment\"># SOLUTION:</span><br><span class=\"token comment\"># Open /home/thi/.ssh/known_host and delete line 21</span></code></pre>\n",
      "date_published": "2020-04-21T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/fresh-installation-ubuntu/",
      "url": "https://dinhanhthi.com/fresh-installation-ubuntu/",
      "title": "Fresh Ubuntu / Pop!_OS Installation",
      "content_html": "<p>The basic steps I often do every time I install a new Ubuntu system. The order of things is important.</p>\n<p>👉 Note: <a href=\"/linux-tips\">Linux</a><br>\n👉 Note: <a href=\"/fresh-install-windows\">Windows fresh start</a><br>\n👉 Note: <a href=\"/fresh-install-macos\">Mac fresh start</a><br>\n👉 Note: <a href=\"/bash-command-line\">Bash</a></p>\n<div class=\"info\">\n<p>Most of commands are for both Ubuntu and Pop!_OS, there are some which are only for Pop!_OS.</p>\n</div>\n<div class=\"warning\">\n<p><strong>For Pop!_OS</strong>: You don't need to do everything in below steps.</p>\n</div>\n<p class=\"noindent\"></p>\n<ol>\n<li>\n<p>Download <a href=\"https://ubuntu.com/download/desktop\">Ubuntu ISO</a>. If you like a MacOS-like version, you can choose <a href=\"https://elementary.io/\">Elementary OS</a>.</p>\n</li>\n<li>\n<p><strong>[Pop!_OS]</strong> Download <a href=\"https://pop.system76.com/\">Pop!_OS</a> (with NVIDIA)</p>\n</li>\n<li>\n<p>Using <a href=\"https://rufus.ie/\">Rufus</a> (on Windows) or <a href=\"https://www.balena.io/etcher/\">Etcher</a> (on any system) or <a href=\"https://github.com/pop-os/popsicle\">popsicle</a> (usb flasher, on pop!_os) to create a bootable USB drives.</p>\n</li>\n<li>\n<p>Update &amp; Upgrade</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update <span class=\"token operator\">&amp;</span> <span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> upgrade</code></pre>\n</li>\n<li>\n<p>Download and install <a href=\"https://www.google.com/chrome\">Google Chrome</a>.</p>\n<ol>\n<li>Sign in to Google Account + sync all extensions + settings.</li>\n<li>Disable Tab hover information: Go to <a href=\"chrome://flags/\">chrome://flags/</a> and search &quot;tab hover&quot; then choose &quot;Disable&quot;.</li>\n<li>Install also these extensions:\n<ol>\n<li><a href=\"https://chrome.google.com/webstore/detail/mate-translate-%E2%80%93-translat/ihmgiclibbndffejedjimfjmfoabpcke\">mate translate</a>, <a href=\"https://chrome.google.com/webstore/detail/google-dictionary-by-goog/mgijmajocgfcbeboacabfgobmjgjcoja\">google dictionary</a>, <a href=\"https://chrome.google.com/webstore/detail/tabcloud/npecfdijgoblfcgagoijgmgejmcpnhof\">TabCloud</a>, <a href=\"https://chrome.google.com/webstore/detail/raindropio/ldgfbffkinooeloadekpmfoklnobpien\">raindrop</a>, <a href=\"https://chrome.google.com/webstore/detail/lastpass-free-password-ma/hdokiejnpimakedhajhdlcegeplioahd\">last pass</a>, <a href=\"https://chrome.google.com/webstore/detail/avim-vietnamese-input-met/opgbbffpdglhkpglnlkiclakjlpiedoh\">AVIM</a>, <a href=\"https://chrome.google.com/webstore/detail/adblock-%E2%80%94-best-ad-blocker/gighmmpiobklfepjocnamgkkbiglidom\">adblock</a>, <a href=\"https://chrome.google.com/webstore/detail/gnome-shell-integration/gphhapmejobijbbhgpjhcjognlahblep\">GNOME Shell integration</a>.</li>\n<li>Google Aut alternative on Chrome: use <a href=\"https://chrome.google.com/webstore/detail/authenticator/bhghoamapcdpbohphigoooaddinpkbai\">this</a>.</li>\n</ol>\n</li>\n</ol>\n</li>\n<li>\n<p>Install <a href=\"/terminal#guake-terminal\">Guake Terminal</a> (drop-down terminal supporting tabs). We install it first because we working mainly on terminal.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> guake<br><span class=\"token comment\"># then add it to startup applications</span><br><span class=\"token comment\">#</span><br><span class=\"token comment\"># load preferences</span><br>guake --restore-preferences ~/Downloads/guake_prefs</code></pre>\n</li>\n<li>\n<p>Install <a href=\"https://git-scm.com/download/linux\">git</a></p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> add-apt-repository ppa:git-core/ppa<br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update<br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> <span class=\"token function\">git</span></code></pre>\n</li>\n<li>\n<p>[<strong>Pop!_OS</strong>] <strong>Dual boot with Windows</strong> and others Linux distro: different from Ubuntu (using <strong>grub</strong>), Pop!_OS uses <strong>systemd-boot</strong> -&gt; follow <a href=\"https://pop-planet.info/forums/threads/copy-the-microsoft-bootloader-into-pops-efi-beginners-guide.357/\">this guide</a>.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 1. Open Disks</span><br><span class=\"token comment\"># Click on \"play\" icon on the partition having \"Partition type\" is \"EFI system\"</span><br><span class=\"token comment\">#</span><br><span class=\"token comment\"># 2. Run to check the mount point of these partitions</span><br>lsblk -o NAME,FSTYPE,FSSIZE,MOUNTPOINT<br><span class=\"token comment\"># output (s/t like that)</span><br><span class=\"token comment\"># nvme0n1</span><br><span class=\"token comment\"># ├─nvme0n1p1 vfat     176M /media/thi/ESP # &lt;- this is windows mounting point</span><br><span class=\"token comment\"># ├─...</span><br><span class=\"token comment\"># └─nvme0n1p9 vfat     511M /boot/efi</span><br><span class=\"token comment\">#</span><br><span class=\"token comment\"># 3. copy to pop!_os</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">cp</span> -r /media/thi/ESP/EFI/Microsoft /boot/efi/EFI<br><span class=\"token comment\">#</span><br><span class=\"token comment\"># 4. Add timeout (wait for choosing)</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /boot/efi/loader/loader.conf<br><span class=\"token comment\"># add below others</span><br><span class=\"token function\">timeout</span> <span class=\"token number\">15</span></code></pre>\n<p>👉 If above doesn't work, try using <a href=\"https://www.rodsbooks.com/refind/\">this tool (rEFInd)</a>.</p>\n</li>\n<li>\n<p>Make emojis showing up</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> fonts-noto-color-emoji</code></pre>\n<p>After that (make browser regonize more icons), create a new file</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">~/.config/fontconfig/conf.d/01-emoji.conf</code></pre>\n<p>with <a href=\"https://github.com/dinhanhthi/scripts/blob/master/settings/ubuntu/01-emoji.conf\">this content</a>.</p>\n</li>\n<li>\n<p>Clone firstly repos: <a href=\"https://github.com/dinhanhthi/scripts\">scripts</a>, <a href=\"https://github.com/dinhanhthi/dinhanhthi.com\">dinhanhthi.com</a>.</p>\n</li>\n<li>\n<p>Change user avatar and desktop background.</p>\n</li>\n<li>\n<p>[<strong>Ubuntu only</strong>] Auto install drivers</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> ubuntu-drivers autoinstall</code></pre>\n<p>In case you wanna switch between Intel (more power efficient) and NVDIA driver (more powerful)</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> prime-select intel<br><span class=\"token function\">sudo</span> prime-select nvidia</code></pre>\n</li>\n<li>\n<p>[<strong>Ubuntu only</strong>] Check the NVDIA driver and install the newest version: check in <strong>Additional Drivers</strong>. In case you wanna remove it and reinstall it later, use</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> purge nvidia-*</code></pre>\n</li>\n<li>\n<p>Install <strong>GNOME Tweaks</strong> from App Store.</p>\n</li>\n<li>\n<p>Install <a href=\"https://extensions.gnome.org/extension/1160/dash-to-panel/\">Dash to panel</a> extension and use <a href=\"https://github.com/dinhanhthi/scripts/blob/master/settings/pop!os/dash_to_panel.py\">this config</a> for pop and <a href=\"https://github.com/dinhanhthi/scripts/blob/master/settings/ubuntu/dash_to_panel\">this</a> for ubuntu.</p>\n</li>\n<li>\n<p>[<strong>Ubuntu only</strong>] Install GNOME Shell extensions</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> gnome-shell-extensions</code></pre>\n<p>Install also <a href=\"https://extensions.gnome.org/\">chrome extension</a>. Go to the corresponding extension link and turn it on and install it. List of useful extensions: <a href=\"https://extensions.gnome.org/extension/1198/start-overlay-in-application-view/\">Start Overlay in Application View</a>, <a href=\"https://extensions.gnome.org/extension/1122/esc-to-close-overview-from-applications-list/\">ESC to close overview from applications list</a>, <a href=\"https://extensions.gnome.org/extension/517/caffeine/\">Caffein</a>, <a href=\"https://extensions.gnome.org/extension/1317/alt-tab-switcher-popup-delay-removal/\">Alt-Tab Switcher Popup Delay Removal</a>, <a href=\"https://extensions.gnome.org/extension/906/sound-output-device-chooser/\">Sound Input &amp; Output Device Chooser</a>, <a href=\"https://extensions.gnome.org/extension/28/gtile/\">gtile</a>, <a href=\"https://extensions.gnome.org/extension/351/icon-hider/\">icon-hider</a> (on gnome taskbar), <a href=\"https://extensions.gnome.org/extension/1162/emoji-selector/\">Emoji selector</a>.</p>\n</li>\n<li>\n<p>Install video codecs,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> ubuntu-restricted-extras</code></pre>\n</li>\n<li>\n<p>Log in to online accounts: Google, Ubuntu One, StackOverflow, Notion, Trello, Facebook,...</p>\n</li>\n<li>\n<p>Download and install an email client, I use <a href=\"https://getmailspring.com/\">Mailspring</a>. Log in to email accounts and let Mailspring downloads the necessary things.</p>\n</li>\n<li>\n<p>Install <strong>GoldenDict</strong> (app store) and <a href=\"https://drive.google.com/open?id=1jna8_grA-wyhPrq8BiB7ypadvW3tTlIv\">dictionaries</a>.</p>\n</li>\n<li>\n<p>Python is installed on Ubuntu system with 2 versions. By default, <code>python</code> prefers version 2, if you wanna use python 3, you can use <code>python3</code> or add an alias</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">alias</span> <span class=\"token assign-left variable\">python</span><span class=\"token operator\">=</span><span class=\"token string\">'python3'</span> <span class=\"token comment\"># and call python 2 as `python2`</span></code></pre>\n<p>Install pip</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">pip <span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> python3-pip<br><span class=\"token builtin class-name\">alias</span> <span class=\"token assign-left variable\">pip</span><span class=\"token operator\">=</span>pip3</code></pre>\n</li>\n<li>\n<p><a href=\"https://code.visualstudio.com/\">Visual Studio Code</a> and its basic extensions: Bracket Pair Colorizer, Docker, Linux Themes for VS Code, Markdown All in One, Markdown Shortcuts, Remote Development, Python, Auto Close Tags</p>\n<p>Also add below settings to setting json file (<kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>P</kbd> and search &quot;Preferences: Open Settings (JSON)&quot;, it's in <code>~/.config/Code/User</code>)</p>\n</li>\n<li>\n<p>Install Git Client as <a href=\"https://www.gitkraken.com/\">Gitkraken</a>. Log in with Github account and clone <a href=\"https://github.com/dinhanhthi?tab=repositories\">all working repositories</a>.</p>\n</li>\n<li>\n<p>Turn off Gnome Shell Activities Animations (click on window taskbar to toggle max/min),</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">gsettings <span class=\"token builtin class-name\">set</span> org.gnome.desktop.interface enable-animations <span class=\"token boolean\">true</span> <span class=\"token comment\"># enable</span><br>gsettings <span class=\"token builtin class-name\">set</span> org.gnome.desktop.interface enable-animations <span class=\"token boolean\">false</span> <span class=\"token comment\"># disable</span></code></pre>\n</li>\n<li>\n<p><a href=\"https://github.com/BambooEngine/ibus-bamboo\">IBUS Bamboo</a>, Vietnamese Input Method. Need to restart Ibus and choose Bamboo in the keyboard layout. You can use also <kbd>Shift</kbd> + <kbd>~</kbd> for changing the options (remove the underline, for example). Use <kbd>Super</kbd> + <kbd>Space</kbd> to change between input methods.</p>\n</li>\n<li>\n<p>Google Drive client for Ubuntu: <a href=\"https://www.thefanclub.co.za/overgrive\">OverGrive</a> (5$ for each account). An alternative to <a href=\"https://github.com/bcedu/VGrive\">Vgrive</a>.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># startup commandline for overgrive</span><br>python3 /opt/thefanclub/overgrive/overgrive</code></pre>\n</li>\n<li>\n<p>LaTeX</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> texlive-full <span class=\"token comment\"># 5GB</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> texmaker</code></pre>\n</li>\n<li>\n<p>If you install Matlab, you can install <code>matlab-support</code> to add matlab icon to applications. Note that, if matlab exe file is at <code>/usr/local/MATLAB/R2017b/bin/matlab</code>, we add the location of folder as <code>/usr/local/MATLAB/R2017b/</code>.</p>\n</li>\n<li>\n<p>Use <kbd>super</kbd> + <kbd>E</kbd> to open File Manager: change in Keyboard shortcut.</p>\n</li>\n<li>\n<p>Default text editor <code>gedit</code>, you can use this command in terminal.</p>\n</li>\n<li>\n<p><strong>Gnome Calendar</strong> in app store.</p>\n</li>\n<li>\n<p>Screen Recorder, use <strong>Kazam</strong> (app store). If cannot recognize mic and speaker, read <a href=\"https://askubuntu.com/questions/1234314/screen-recording-applications-are-not-detecting-audio-in-ubuntu-20-04\">this solution</a>. An alternative is <a href=\"https://www.maartenbaert.be/simplescreenrecorder/\">SimpleScreenRecorder</a>.</p>\n</li>\n<li>\n<p>VLC (app store). If there is a problem of displaying video (there is only sound without video), check <a href=\"https://askubuntu.com/questions/668834/vlc-media-player-is-not-displaying-video-but-audio-works\">this</a>.</p>\n</li>\n<li>\n<p>Read SD card</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> exfat-utils exfat-fuse</code></pre>\n</li>\n<li>\n<p>If you wanna make nautilus default again:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">xdg-mime default nautilus.desktop inode/directory application/x-gnome-saved-search<br>gsettings <span class=\"token builtin class-name\">set</span> org.gnome.desktop.background show-desktop-icons <span class=\"token boolean\">true</span></code></pre>\n</li>\n<li>\n<p>If you wanna make some web app a desktop app, use <a href=\"github.com/jiahaog/nativefier\">nativefier</a>.</p>\n</li>\n<li>\n<p>Bluetooth problem on Dell XPS 15 only: cannot turn on bluetooth ⇒ Try turn off and turn on again the bluetooth in BIOS setting.</p>\n</li>\n<li>\n<p>Useful shortcuts:</p>\n<ul>\n<li>Capture fullscreen: <code>Ctrl+Alt+Print</code> (photos will be saved in <strong>Pictures</strong>)</li>\n<li>Show desktop: set in Keyboards settings, try to find &quot;Hide all normal windows&quot;.</li>\n</ul>\n</li>\n<li>\n<p>[<strong>Only Ubuntu</strong>] Connect Airpod to Ubuntu 20.04:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># check bluetooth service is running</span><br>hciconfig -a<br><span class=\"token comment\">#</span><br><span class=\"token comment\"># open a file</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /etc/bluetooth/main.conf<br><span class=\"token comment\">#</span><br><span class=\"token comment\"># add</span><br>ControllerMode <span class=\"token operator\">=</span> bredr<br><span class=\"token comment\">#</span><br><span class=\"token comment\"># restart bluetooth service</span><br><span class=\"token function\">sudo</span> /etc/init.d/bluetooth restart<br><span class=\"token comment\">#</span><br><span class=\"token comment\"># disconnect other headphone device</span><br><span class=\"token comment\"># press and hold backward button in the airpod case (flash light)</span><br><span class=\"token comment\"># connect to airpod as other device via bluetooth</span></code></pre>\n</li>\n<li>\n<p>Location of <code>.desktop</code> files,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">~/.local/share/applications/<br>/usr/share/applications/<br>/var/lib/snapd/desktop/applications/<br><span class=\"token comment\"># or</span><br><span class=\"token function\">locate</span> *.desktop <span class=\"token comment\"># bash</span><br><span class=\"token function\">locate</span> <span class=\"token punctuation\">\\</span>*.desktop <span class=\"token comment\"># zsh</span></code></pre>\n</li>\n<li>\n<p>[<strong>Optional</strong>]Xbox controller bluetooth connection: check <a href=\"https://askubuntu.com/questions/998144/how-can-i-use-my-xbox-one-s-controller-via-bluetooth\">this</a>.</p>\n</li>\n<li>\n<p>Remove icon from dash application</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> add-apt-repository ppa:caldas-lopes/ppa<br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update<br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> ezame</code></pre>\n</li>\n<li>\n<p>Restore <a href=\"https://github.com/dinhanhthi/scripts/tree/master/settings\">dconf setting</a>:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">dconf load / <span class=\"token operator\">&lt;</span> dconf-settings.ini<br><span class=\"token comment\"># or</span><br><span class=\"token function\">cat</span> dconf-settings.ini <span class=\"token operator\">|</span> dconf load /</code></pre>\n</li>\n<li>\n<p>Restore <a href=\"https://github.com/dinhanhthi/scripts/tree/master/settings\">custom keyboard shortcuts</a>,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># load</span><br>dconf load /org/gnome/desktop/wm/keybindings/ <span class=\"token operator\">&lt;</span> keybindings.dconf<br>dconf load /org/gnome/settings-daemon/plugins/media-keys/ <span class=\"token operator\">&lt;</span> keybindings.dconf</code></pre>\n</li>\n<li>\n<p>[<strong>Optional</strong>] Disable touchpad automatically when plugging mouse:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> add-apt-repository ppa:atareao/atareao<br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update<br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> touchpad-indicator<br><span class=\"token comment\"># then open > click on icon > preferences</span><br><span class=\"token comment\"># > action tab > \"Disable touchpad when mouse plugged\"</span></code></pre>\n</li>\n<li>\n<p>Other applicatons:</p>\n<ol>\n<li><a href=\"https://www.skype.com/en/get-skype/\">Skype</a></li>\n<li><a href=\"https://subhra74.github.io/xdm/\">Extreme Download Manager</a> (uninstall by running as root <code>/opt/xdman/uninstall.sh</code>)</li>\n<li><a href=\"https://github.com/klaussinani/ao\">AO</a> (MS to do for Ubuntu): <code>snap install ao</code></li>\n<li><strong>Shotwell</strong> or <strong>gThumb</strong> (image viewer + quick editor, install on Store)</li>\n<li><strong>KolourPaint</strong> (photo editor supports cut and move a selection like Paint on Windows, install from AppStore)</li>\n<li><strong>Cheese</strong> (camera app)</li>\n<li><a href=\"https://maoschanz.github.io/drawing/\">Drawing</a></li>\n<li><a href=\"https://oguzhaninan.github.io/Stacer-Web/\">Stacer</a> (optimizer system like Advanced System Care)</li>\n<li><a href=\"https://www.googleplaymusicdesktopplayer.com/\">Youtube Music</a></li>\n<li><a href=\"https://flathub.org/apps/details/com.github.bilelmoussaoui.Authenticator\">Authenticator</a></li>\n<li><strong>alacarte</strong> (Main Menu, can be found in App Store): change/add icon in launcher.</li>\n</ol>\n</li>\n<li>\n<p>Swap function keyboards on <a href=\"https://www.logitech.com/en-us/product/multi-device-keyboard-k380\">Logitech K380</a>, using <a href=\"https://github.com/jergusg/k380-function-keys-conf\">this tool</a> (try all keyboard hidraws if you are not sure!).</p>\n</li>\n<li>\n<p>Force Unity Dash to index all files on Home: <code>sudo updatedb</code> (install by <code>sudo apt-get install mlocate</code>)</p>\n</li>\n<li>\n<p>[<strong>Only Ubuntu</strong>] There are 2 ubuntu softwares in dash? (ref <a href=\"https://askubuntu.com/questions/1235835/ubuntu-software-doesnt-work-and-why-are-there-two-software-center-in-ubuntu-20\">this question</a>). &quot;Ubuntu software&quot; is pre-installed snap store (run by <code>snap-store</code>), the other is <code>gnome-software</code>.</p>\n</li>\n<li>\n<p><mark>Backup before installing a new system.</mark></p>\n<ul>\n<li>Settings in <code>~/.config/</code> or <code>~/.&lt;software-name&gt;</code></li>\n<li>All apps in <code>~/apps/</code> with their desktop files in <code>~/.local/share/applications/</code></li>\n</ul>\n</li>\n<li>\n<p><strong>Pop!_OS Tips</strong>:</p>\n<ol>\n<li><code>Super</code> + <code>Y</code>: toggle tiling mode.</li>\n<li>Add a windows/applition exepton of tiling mode (it won't be counted)</li>\n<li>Make clocks + dates 2 lines -&gt; <a href=\"https://askubuntu.com/questions/1081793/how-to-display-date-under-time-in-gnome\">tutorial</a>.</li>\n</ol>\n<ul>\n<li>Install <a href=\"https://extensions.gnome.org/extension/1206/clock-override/\">clock override extension</a>.</li>\n<li>Using <code>     %H:%M%n%d/%m/%Y</code> in <em>text to display instead of the clock</em> (with the spaces so that they are center aligned).</li>\n</ul>\n</li>\n</ol>\n",
      "date_published": "2020-04-20T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/fresh-install-windows/",
      "url": "https://dinhanhthi.com/fresh-install-windows/",
      "title": "Fresh Windows 10 Installation",
      "content_html": "<p>This is my personal list of to-do things after reinstall Windows.</p>\n<p>👉 Note: <a href=\"/fresh-installation-ubuntu\">Ubuntu / Pop!_OS fresh start</a>.<br>\n👉 Note: <a href=\"/fresh-install-macos\">Mac fresh installation</a>.</p>\n<p class=\"noindent\"></p>\n<ol>\n<li>Update and install drivers.</li>\n<li><a href=\"https://www.google.com/chrome/\">Google Chrome browsers</a> and sign in to sync. Install also these extensions: <a href=\"https://chrome.google.com/webstore/detail/mate-translate-%E2%80%93-translat/ihmgiclibbndffejedjimfjmfoabpcke\">mate translate</a>, <a href=\"https://chrome.google.com/webstore/detail/google-dictionary-by-goog/mgijmajocgfcbeboacabfgobmjgjcoja\">google dictionary</a>, <a href=\"https://chrome.google.com/webstore/detail/tabcloud/npecfdijgoblfcgagoijgmgejmcpnhof\">TabCloud</a>, <a href=\"https://chrome.google.com/webstore/detail/raindropio/ldgfbffkinooeloadekpmfoklnobpien\">raindrop</a>, <a href=\"https://chrome.google.com/webstore/detail/lastpass-free-password-ma/hdokiejnpimakedhajhdlcegeplioahd\">last pass</a>, <a href=\"https://chrome.google.com/webstore/detail/avim-vietnamese-input-met/opgbbffpdglhkpglnlkiclakjlpiedoh\">AVIM</a>, <a href=\"https://chrome.google.com/webstore/detail/adblock-%E2%80%94-best-ad-blocker/gighmmpiobklfepjocnamgkkbiglidom\">adblock</a>, <a href=\"https://chrome.google.com/webstore/detail/gnome-shell-integration/gphhapmejobijbbhgpjhcjognlahblep\">GNOME Shell integration</a>.</li>\n<li><a href=\"https://www.deepl.com/translator\">DeepL</a>: best translator for Windows using AI.</li>\n<li><a href=\"https://quest-app.appspot.com\">QTTranslate</a>: quick and easy translate words and hear the pronunciation.</li>\n<li><a href=\"https://www.unikey.org\">Unikey</a>: Vietnamese Input Method.</li>\n<li>Log in to online accounts (<a href=\"https://accounts.google.com/login\">Google</a>, <a href=\"https://stackoverflow.com/\">Stack Overflow</a>, <a href=\"https://github.com/login\">Github</a>, <a href=\"https://www.dropbox.com/login\">Dropbox</a>,...)</li>\n<li><a href=\"https://cmder.net\">cmder</a>: drop-down terminal &amp; install personal setting file (can be found in <em>/config/</em>) 👉 Check <a href=\"/docker-wsl2-windows\">this note</a> to set up WSL2 and Bash.</li>\n<li><a href=\"https://www.iobit.com/en/advanceduninstaller.php\">IObit Uninstaller</a>.</li>\n<li><a href=\"https://www.win-rar.com/start.html?&amp;L=0\">WinRAR</a>.</li>\n<li><a href=\"https://www.notion.so\">Notion</a>.</li>\n<li><a href=\"https://git-scm.com\">Git</a> &amp; <a href=\"https://www.gitkraken.com/git-client\">Gitkraken</a>/<a href=\"https://desktop.github.com\">Github Desktop</a>.</li>\n<li>Clone <a href=\"https://github.com/dinhanhthi?tab=repositories\">repositories</a> from Github.</li>\n<li><a href=\"https://code.visualstudio.com\">Visual Studio Code</a> and extensions (Bracket Pair Colorizer, Docker, Markdown All in One, Markdown Shortcuts, Python, Remote Development, Auto Close Tag)</li>\n<li><a href=\"https://www.microsoft.com/en-us/download/office.aspx\">Microsoft Office</a>.</li>\n<li><a href=\"https://github.com/goldendict/goldendict/wiki/Early-Access-Builds-for-Windows\">GoldenDict</a> + <a href=\"https://drive.google.com/open?id=1jna8_grA-wyhPrq8BiB7ypadvW3tTlIv\">dictionaries</a> &amp; <a href=\"http://www.lingoes.net/\">Lingoes</a> + <a href=\"https://drive.google.com/open?id=1LlCtGewKiLMil-7aQFEy_tu4ir1eC_6l\">dictionaries</a>.</li>\n<li>Uninstall OneDrive.</li>\n<li><a href=\"https://teams.microsoft.com/\">Microsoft Teams</a> + <a href=\"https://slack.com/intl/en-fr/downloads/windows?eu_nc=1\">Slack</a> + <a href=\"https://trello.com\">Trello</a>.</li>\n<li><a href=\"https://lockhunter.com\">LockHunter</a>: delete being used files/folders.</li>\n<li><a href=\"http://qttabbar.sourceforge.net\">QTTabBar</a>: Tabs for Windows Explorer. After installing and opening, choose <em>View</em> &gt; <em>Options</em> &gt; tick on <em>QTTabBar</em> only then right click on toolbar and choose <em>Lock the toolbar</em>.</li>\n<li><a href=\"https://getmailspring.com\">MailSpring</a>: email client.</li>\n<li><a href=\"https://www.microsoft.com/en-us/p/mail-and-calendar/9wzdncrfhvqm?activetab=pivot:overviewtab\">Mail and Calendar</a> but don't enable sync for Mail, use MailSpring instead.</li>\n<li><a href=\"https://www.ctan.org/tex-archive/systems/texlive/Images\">TeXLive</a> + <a href=\"https://www.xm1math.net/texmaker/\">Texmaker</a>.</li>\n<li><a href=\"https://www.google.com/drive/download/backup-and-sync/\">Google Backup and Sync</a>.</li>\n<li><a href=\"https://www.anaconda.com/products/individual\">Anaconda</a> (python and it dependencies)</li>\n<li><a href=\"https://hub.docker.com/editions/community/docker-ce-desktop-windows\">Docker Desktop</a>.</li>\n<li><a href=\"http://internetdownloadmanager.com\">Internet Download Manager</a> / <a href=\"https://sourceforge.net/projects/xdman/\">Extreme Download Manager</a>.</li>\n<li><a href=\"https://www.mathworks.com/products/matlab.html\">Matlab</a>.</li>\n<li><a href=\"https://affinity.serif.com/en-us/designer/\">Affinity Designer</a>.</li>\n<li><a href=\"https://www.codecguide.com/download_kl.htm\">K-Lite Codec Pack</a>: video media player.</li>\n<li><a href=\"https://www.foxitsoftware.com/pdf-reader/\">Foxit Reader</a>: PDF reader.</li>\n<li>Custom/Disable fn function on keyboard K380 -&gt; download <a href=\"https://support.logi.com/hc/en-ch/articles/360025297893\">Logitech Options</a> -&gt; install &amp; signin with <a href=\"mailto:dinhanhthimail@gmail.com\">dinhanhthimail@gmail.com</a> -&gt; check on &quot;Use F1-F12 as standard function keys&quot;.</li>\n</ol>\n",
      "date_published": "2020-04-18T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/p-value/",
      "url": "https://dinhanhthi.com/p-value/",
      "title": "p-value",
      "content_html": "<h2 id=\"null-hypothesis\">Null hypothesis <a class=\"direct-link\" href=\"#null-hypothesis\">#</a></h2>\n<ul>\n<li><strong>Null hypothesis</strong> ⇒ questions scientist want to nullify.\n<ul>\n<li>Example: <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>H</mi><mn>0</mn></msub></mrow><annotation encoding=\"application/x-tex\">H_0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> = &quot;The world is flat.&quot;</li>\n</ul>\n</li>\n<li><strong>Alternate hypothesis</strong>: &quot;The world is round.&quot;</li>\n<li>In order to change an opinion, we first prove it wrong!</li>\n</ul>\n<h2 id=\"p-value\">p-value <a class=\"direct-link\" href=\"#p-value\">#</a></h2>\n<ul>\n<li><mark markdown=\"span\"><strong>Small</strong> p-value ⇒ <strong>reject</strong> null hypothesis!</mark></li>\n<li>Mostly, we need <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mo>&lt;</mo><mn>0.05</mn></mrow><annotation encoding=\"application/x-tex\">p&lt;0.05</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7335400000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mord\">5</span></span></span></span></span> (<strong><em>statistical significance</em></strong>) to <mark>reject a null hypothesis</mark>.\n<ul>\n<li>Smaller <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0.05</mn></mrow><annotation encoding=\"application/x-tex\">0.05</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mord\">5</span></span></span></span></span>, we are more sure!</li>\n</ul>\n</li>\n<li><strong>Example</strong>: &quot;<em>Gender IS NOT linked to pet preference (cat/dog)</em>.&quot; With <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mo>=</mo><mn>0.043</mn><mo>&lt;</mo><mn>0.05</mn></mrow><annotation encoding=\"application/x-tex\">p=0.043&lt;0.05</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68354em;vertical-align:-0.0391em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mord\">4</span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mord\">5</span></span></span></span></span>, we reject that hypothesis and conclude &quot;<em>Gender IS linked to pet preference</em>.&quot;<sup><a href=\"https://www.mathsisfun.com/data/chi-square-test.html\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></li>\n</ul>\n<h3 id=\"understand-p-value%3F\">Understand p-value? <a class=\"direct-link\" href=\"#understand-p-value%3F\">#</a></h3>\n<ul>\n<li>If <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mo>=</mo><mn>0.75</mn></mrow><annotation encoding=\"application/x-tex\">p=0.75</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">7</span><span class=\"mord\">5</span></span></span></span></span>, it means that there are <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>75</mn><mi mathvariant=\"normal\">%</mi></mrow><annotation encoding=\"application/x-tex\">75\\%</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.80556em;vertical-align:-0.05556em;\"></span><span class=\"mord\">7</span><span class=\"mord\">5</span><span class=\"mord\">%</span></span></span></span></span> the null hypothesis is true! We cannot reject it!</li>\n</ul>\n<h3 id=\"calculate-p-value\">Calculate p-value <a class=\"direct-link\" href=\"#calculate-p-value\">#</a></h3>\n<p>In order to calculate p-value, we use <a href=\"https://www.mathsisfun.com/data/chi-square-test.html\"><strong>Chi-Square Test</strong></a> (<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>X</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">X^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span> test).</p>\n<ul>\n<li>This test only works for categorical data (men, women), not numerical data (height, weight).</li>\n<li>The number of entries must be large enough.</li>\n</ul>\n<h2 id=\"multiple-tests-%2B-p-value-correction\">Multiple tests + p-value correction <a class=\"direct-link\" href=\"#multiple-tests-%2B-p-value-correction\">#</a></h2>\n<ul>\n<li>The goal of multiple comparisons corrections is to reduce the number of false positives, because false positives can be embarrassing, confusing, and cause you and other people to waste your time.</li>\n<li>The conclusion from p-value depends much on signigicance <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span></span></span> (usually <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>α</mi><mo>=</mo><mn>0.05</mn></mrow><annotation encoding=\"application/x-tex\">\\alpha=0.05</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mord\">5</span></span></span></span></span>). What if we wanna test multiple tests simultaneously? The same <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span></span></span> for all cases?</li>\n<li>Dealing with multiple testing <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> adjusting <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span></span></span>.</li>\n</ul>\n<h2 id=\"references\">References <a class=\"direct-link\" href=\"#references\">#</a></h2>\n<ol>\n<li><strong>Math is fun</strong> -- <a href=\"https://www.mathsisfun.com/data/chi-square-test.html\">Chi-Square Test</a>.</li>\n<li><a href=\"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6099145/\">Why, When and How to Adjust Your P Values?</a></li>\n<li><a href=\"https://www.gs.washington.edu/academics/courses/akey/56008/lecture/lecture10.pdf\">Lecture 10: Multiple Testing</a></li>\n<li><a href=\"https://www.stat.berkeley.edu/~mgoldman/Section0402.pdf\">Statistics for Bioinformatics</a></li>\n<li><a href=\"http://www.biostathandbook.com/multiplecomparisons.html\">Multiple comparisons</a></li>\n</ol>\n",
      "date_published": "2020-04-14T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/KS-test/",
      "url": "https://dinhanhthi.com/KS-test/",
      "title": "Kolmogorov–Smirnov Test",
      "content_html": "<h2 id=\"what-%26-why%3F\">What &amp; Why? <a class=\"direct-link\" href=\"#what-%26-why%3F\">#</a></h2>\n<p>To check the similar distribution of 2 samples drawn from population. If these samples are normal, we can use <strong>T-test</strong>, but if <mark>they are not normal</mark>, we need to use <strong>KS-test</strong>. KS-test is a <mark>non-parametric test</mark>.</p>\n<p>Null hypothesis (<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>H</mi><mn>0</mn></msub></mrow><annotation encoding=\"application/x-tex\">H_0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>): &quot;<em>Two samples drawn from population with the same distribution</em>.&quot;</p>\n<p>👉 Read more about <a href=\"/p-value\">p-value</a>. We use this value to evaluate the true/false of above null hypothesis.</p>\n<p>The difference (in use) of <strong>T-test</strong> (need an assumption of nomality) and <strong>KS-test</strong> (don't need),</p>\n<p><img src=\"/img/post/stats/t-test-ks-test.png\" alt=\"T-test vs KS-test\" class=\"img-full-50\"></p>\n<ul>\n<li>Two samples have the same mean &amp; standard deviation ⇒ p-value is high ⇒ cannot reject <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>H</mi><mn>0</mn></msub></mrow><annotation encoding=\"application/x-tex\">H_0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> (not true)</li>\n<li>KS-test can detect the variance ⇒ p-value is low ⇒ we can reject <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>H</mi><mn>0</mn></msub></mrow><annotation encoding=\"application/x-tex\">H_0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> ⇒ 2 samples are not the same distribution!!! (yep!)</li>\n</ul>\n<h2 id=\"how%3F\">How? <a class=\"direct-link\" href=\"#how%3F\">#</a></h2>\n<p>If the <strong>KS statistic is small</strong> or the <strong>p-value is high</strong>, then we <strong>cannot reject</strong> the hypothesis that the distributions of the two samples are the same.</p>\n<h2 id=\"code%3F\">Code? <a class=\"direct-link\" href=\"#code%3F\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> scipy <span class=\"token keyword\">import</span> stats</code></pre>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># one-sample KS test</span><br>stats<span class=\"token punctuation\">.</span>kstest<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> <span class=\"token string\">'norm'</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># two-sample KS test</span><br>stats<span class=\"token punctuation\">.</span>ks_2samp<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span></code></pre>\n</div>\n<h2 id=\"references\">References <a class=\"direct-link\" href=\"#references\">#</a></h2>\n<ul>\n<li><strong>Matthew E. Clapham</strong> -- <a href=\"https://www.youtube.com/watch?v=ZO2RmSkXK3c\">10: Kolmogorov-Smirnov test</a> (video)</li>\n<li><a href=\"https://www.youtube.com/watch?v=U7xdiGc7IRU\">An example</a> of why we need to use <a href=\"/wasserstein-earth-mover-distance\">EMD</a> instead of Kolmogorov–Smirnov distance (video).</li>\n</ul>\n",
      "date_published": "2020-04-14T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/python-tuple/",
      "url": "https://dinhanhthi.com/python-tuple/",
      "title": "Python Tuple",
      "content_html": "<h2 id=\"check\">Check <a class=\"direct-link\" href=\"#check\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># a tuple has None / empty value</span><br><span class=\"token keyword\">not</span> <span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span>mytuple<span class=\"token punctuation\">)</span> <span class=\"token comment\"># None ~ 0 ~ O.0</span><br><br><span class=\"token comment\"># only consider None</span><br><span class=\"token builtin\">any</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> x <span class=\"token keyword\">is</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> mytuple<span class=\"token punctuation\">)</span></code></pre>\n",
      "date_published": "2020-04-13T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/airflow-k8s-101/",
      "url": "https://dinhanhthi.com/airflow-k8s-101/",
      "title": "Airflow + Kubernetes 101",
      "content_html": "<p>👉 <a href=\"/docker\">Note: Docker 101</a><br>\n👉 <a href=\"/wordpress-docker\">Note: Wordpress Docker</a><br>\n👉 <a href=\"/docker-gpu\">Note: Docker &amp; GPUs</a><br>\n👉 <a href=\"/tensorflow\">Note: Tensorflow extra</a></p>\n<h2 id=\"installation\">Installation <a class=\"direct-link\" href=\"#installation\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> snap <span class=\"token function\">install</span> microk8s --classic</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># make an alias</span><br><span class=\"token builtin class-name\">alias</span> <span class=\"token assign-left variable\">k</span><span class=\"token operator\">=</span><span class=\"token string\">'microk8s.kubectl'</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># add to sudo group</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">usermod</span> -a -G microk8s thi<br><span class=\"token function\">sudo</span> <span class=\"token function\">chown</span> -f -R thi ~/.kube<br><span class=\"token comment\"># log out and log in again</span></code></pre>\n</div>\n<div class=\"warning\">\n<p>We use <code>k</code> which stands for <code>kubectl</code> or <code>microk8s.kubectl</code> in this notebook!</p>\n</div>\n<h2 id=\"k8s\">k8s <a class=\"direct-link\" href=\"#k8s\">#</a></h2>\n<h3 id=\"pods\">Pods <a class=\"direct-link\" href=\"#pods\">#</a></h3>\n<p><strong>Pod</strong>: (<a href=\"https://kubernetes.io/docs/concepts/workloads/pods/pod/\">full</a>): a group of one or more containers (such as Docker containers), with shared storage/network, and a specification for how to run the containers.</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># list of pods</span><br>microk8s.kubectl get pods</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># enter a pod</span><br>microk8s.kubectl <span class=\"token builtin class-name\">exec</span> -it <span class=\"token operator\">&lt;</span>pod_id<span class=\"token operator\">></span> <span class=\"token function\">bash</span></code></pre>\n</div>\n<h3 id=\"namespaces\">Namespaces <a class=\"direct-link\" href=\"#namespaces\">#</a></h3>\n<ul>\n<li>Detail is <a href=\"https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/\">here</a>.</li>\n<li>Multiple virtual clusters (namespaces) backed by the same physical cluster.</li>\n<li>Motivation for using namespaces: <a href=\"https://kubernetes.io/docs/tasks/administer-cluster/namespaces/#understanding-the-motivation-for-using-namespaces\">here</a> =&gt; one word: <em>isolation</em>!</li>\n<li>Avoid creating namespace with prefix <code>kube-</code>.</li>\n</ul>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># list of current namespaces</span><br>k get namespace</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># create</span><br>k create namespace <span class=\"token operator\">&lt;</span>name_space<span class=\"token operator\">></span><br><span class=\"token comment\"># follows DBS label: https://bit.ly/2Cxge0K</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># delete</span><br>k delete namespaces <span class=\"token operator\">&lt;</span>name_space<span class=\"token operator\">></span><br><span class=\"token comment\"># This deletes everything under the namespace!</span></code></pre>\n</div>\n<h2 id=\"airflow\">Airflow <a class=\"direct-link\" href=\"#airflow\">#</a></h2>\n<h3 id=\"quickstart\">Quickstart <a class=\"direct-link\" href=\"#quickstart\">#</a></h3>\n<p>Check <a href=\"https://airflow.apache.org/docs/stable/start.html#quick-start\">here</a>.</p>\n<h3 id=\"kubernetespodoperator\"><code>KubernetesPodOperator</code> <a class=\"direct-link\" href=\"#kubernetespodoperator\">#</a></h3>\n<ul>\n<li><code>task_id=&quot;abc_xyz&quot;</code> (required): the name of task given in the airflow ui.</li>\n<li><code>image=&quot;localhost:32000/airflow-abc:debug&quot;</code> (required): docker image to use.</li>\n<li><code>namespace=&quot;default&quot;</code> (required, <a href=\"https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/\">ref</a>):</li>\n<li><code>in_cluster=True</code>:</li>\n<li><code>trigger_rule=&quot;all_success&quot;</code>: <a href=\"https://airflow.apache.org/docs/1.10.1/concepts.html?highlight=trigger_rule#trigger-rules\">ref</a></li>\n<li><code>image_pull_policy=&quot;Always&quot;</code>: if you changes something on the docker image.</li>\n</ul>\n<p>If using a dictionary and feed to <code>env_vars</code> (error &quot;<em>TypeError: string indices must be integers</em>&quot;),</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\">ex_var <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">}</span><br><span class=\"token keyword\">with</span> DAG<span class=\"token punctuation\">(</span><br>    <span class=\"token comment\"># ...</span><br><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> dag<span class=\"token punctuation\">:</span><br>    abc <span class=\"token operator\">=</span> KubernetesPodOperator<span class=\"token punctuation\">(</span><br>        <span class=\"token comment\"># ...</span><br>        env_vars <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><br>            <span class=\"token string\">\"EX_VAR\"</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>ex_var<span class=\"token punctuation\">)</span><br>        <span class=\"token punctuation\">}</span><br>        <span class=\"token comment\"># ...</span><br>    <span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># used in another file</span><br><span class=\"token keyword\">import</span> os<br><span class=\"token keyword\">import</span> ast<br><br>ex_var <span class=\"token operator\">=</span> ast<span class=\"token punctuation\">.</span>literal_eval<span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span>environ<span class=\"token punctuation\">[</span><span class=\"token string\">\"EX_VAR\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n</div>\n<p>References:</p>\n<ul>\n<li>API document: <a href=\"https://airflow.apache.org/docs/1.10.1/kubernetes.html\">ref</a>.</li>\n<li><a href=\"https://cloud.google.com/composer/docs/how-to/using/using-kubernetes-pod-operator\">KubernetesPodOperator Configuration</a> -- Google Cloud.</li>\n</ul>\n<h3 id=\"branching\">Branching <a class=\"direct-link\" href=\"#branching\">#</a></h3>\n<h3 id=\"airflow-errors\">Airflow Errors <a class=\"direct-link\" href=\"#airflow-errors\">#</a></h3>\n<p>🔅 <code>ERROR - Exception when attempting to create Namespaced Pod.</code></p>\n<ul>\n<li>Note that if you don't use <code>in_cluster=True</code>, then you won't run into this problem.<sup><a href=\"https://stackoverflow.com/questions/55498599/how-to-set-proper-permissions-to-run-kubernetespodoperator-in-cloud-composer\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></li>\n<li>There may be something wrong with variables or their type of values. Check again carefully!</li>\n</ul>\n<h2 id=\"references\">References <a class=\"direct-link\" href=\"#references\">#</a></h2>\n<ul>\n<li><a href=\"https://airflow.apache.org/docs/stable/\">Airflow official document</a>.</li>\n<li><strong>kubernetes blog</strong> -- <a href=\"https://kubernetes.io/blog/2018/06/28/airflow-on-kubernetes-part-1-a-different-kind-of-operator/\">Airflow on Kubernetes</a></li>\n</ul>\n",
      "date_published": "2020-04-13T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/python-os-sys/",
      "url": "https://dinhanhthi.com/python-os-sys/",
      "title": "Python sys &amp; os",
      "content_html": "<h2 id=\"library\">Library <a class=\"direct-link\" href=\"#library\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> os<span class=\"token punctuation\">,</span> sys</code></pre>\n<h2 id=\"append-path-to-the-environnement\">Append path to the environnement <a class=\"direct-link\" href=\"#append-path-to-the-environnement\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\">sys<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token string\">'../'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># the path of current file's father</span></code></pre>\n<h2 id=\"get-files'-info\">Get files' info <a class=\"direct-link\" href=\"#get-files'-info\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># LIST OF ALL FILES</span><br>file_path <span class=\"token operator\">=</span> <span class=\"token string\">'.'</span> <span class=\"token comment\"># current dir</span><br>os<span class=\"token punctuation\">.</span>listdir<span class=\"token punctuation\">(</span>file_path<span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># The last modification</span><br>os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>getmtime<span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>full<span class=\"token operator\">-</span>path<span class=\"token operator\">-</span>to<span class=\"token operator\">-</span><span class=\"token builtin\">file</span><span class=\"token operator\">-</span>name<span class=\"token operator\">></span><span class=\"token punctuation\">)</span></code></pre>\n</div>",
      "date_published": "2020-04-05T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/deeplearning-ai-course-1/",
      "url": "https://dinhanhthi.com/deeplearning-ai-course-1/",
      "title": "DL 1 - NN and DL",
      "content_html": "<p>This is my note for the course (<a href=\"https://www.coursera.org/learn/neural-networks-deep-learning?specialization=deep-learning\">Neural Networks and Deep Learning</a>). The codes in this note are rewritten to be more clear and concise.</p>\n<p>👉 <strong>Course 1</strong> -- <a href=\"/deeplearning-ai-course-1\">Neural Networks and Deep Learning</a>.<br>\n👉 <strong>Course 2</strong> -- <a href=\"/deeplearning-ai-course-2\">Improving Deep Neural Networks: Hyperparameter tuning, Regularization and Optimization</a>.<br>\n👉 <strong>Course 3</strong> -- <a href=\"/deeplearning-ai-course-3\">Structuring Machine Learning Projects</a>.<br>\n👉 <strong>Course 4</strong> -- <a href=\"https://www.notion.so/dinhanhthi/CNN-by-deeplearning-ai-a081d253fc2c4c0b99edd2757c759b9e\">Convolutional Neural Networks</a>.<br>\n👉 <strong>Course 5</strong> -- <a href=\"https://www.notion.so/dinhanhthi/Sequence-models-by-deeplearning-ai-427774f7b31846fdb17ac09cd2353fbe\">Sequence Models</a>.</p>\n<p>If you want to break into cutting-edge AI, this course will help you do so.</p>\n<h2 id=\"activation-functions\">Activation functions <a class=\"direct-link\" href=\"#activation-functions\">#</a></h2>\n<p>👉 Check <a href=\"https://en.wikipedia.org/wiki/Activation_function#Comparison_of_activation_functions\">Comparison of activation functions</a> on wikipedia.</p>\n<h3 id=\"why-non-linear-activation-functions-in-nn-model%3F\">Why non-linear activation functions in NN Model? <a class=\"direct-link\" href=\"#why-non-linear-activation-functions-in-nn-model%3F\">#</a></h3>\n<p>Suppose <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>g</mi><mo stretchy=\"false\">(</mo><mi>z</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>z</mi></mrow><annotation encoding=\"application/x-tex\">g(z)=z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span></span></span></span></span> (linear)</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><msup><mi>a</mi><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></msup></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mi>g</mi><mo stretchy=\"false\">(</mo><msup><mi>z</mi><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></msup><mo>=</mo><msup><mi>z</mi><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></msup><mo stretchy=\"false\">)</mo><mo>=</mo><msup><mi>w</mi><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></msup><mi>x</mi><mo>+</mo><msup><mi>b</mi><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></msup><mspace width=\"1em\"/><mtext>(linear)</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><msup><mi>a</mi><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></msup></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mi>g</mi><mo stretchy=\"false\">(</mo><msup><mi>z</mi><mrow><mo stretchy=\"false\">[</mo><mn>2</mn><mo stretchy=\"false\">]</mo></mrow></msup><mo>=</mo><msup><mi>z</mi><mrow><mo stretchy=\"false\">[</mo><mn>2</mn><mo stretchy=\"false\">]</mo></mrow></msup><mo stretchy=\"false\">)</mo><mo>=</mo><msup><mi>w</mi><mrow><mo stretchy=\"false\">[</mo><mn>2</mn><mo stretchy=\"false\">]</mo></mrow></msup><msup><mi>a</mi><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></msup><mo>+</mo><msup><mi>b</mi><mrow><mo stretchy=\"false\">[</mo><mn>2</mn><mo stretchy=\"false\">]</mo></mrow></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mo stretchy=\"false\">(</mo><msup><mi>w</mi><mrow><mo stretchy=\"false\">[</mo><mn>2</mn><mo stretchy=\"false\">]</mo></mrow></msup><msup><mi>w</mi><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></msup><mo stretchy=\"false\">)</mo><mi>x</mi><mo>+</mo><mo stretchy=\"false\">(</mo><msup><mi>w</mi><mrow><mo stretchy=\"false\">[</mo><mn>2</mn><mo stretchy=\"false\">]</mo></mrow></msup><msup><mi>b</mi><mrow><mo stretchy=\"false\">[</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></msup><mo>+</mo><msup><mi>b</mi><mrow><mo stretchy=\"false\">[</mo><mn>2</mn><mo stretchy=\"false\">]</mo></mrow></msup><mo stretchy=\"false\">)</mo><mspace width=\"1em\"/><mtext>(linear again)</mtext><mi mathvariant=\"normal\">.</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\n\\begin{aligned}\na^{[1]} &amp;= g(z^{[1]} = z^{[1]}) = w^{[1]}x + b^{[1]} \\quad \\text{(linear)} \\\\\na^{[1]} &amp;= g(z^{[2]} = z^{[2]}) = w^{[2]}a^{[1]} + b^{[2]} \\\\\n        &amp;= (w^{[2]}w^{[1]})x + (w^{[2]}b^{[1]} + b^{[2]}) \\quad \\text{(linear again)}.\n\\end{aligned}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:4.7940000000000005em;vertical-align:-2.1470000000000002em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.6470000000000002em;\"><span style=\"top:-4.7090000000000005em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.111em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-1.513em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.1470000000000002em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.6470000000000002em;\"><span style=\"top:-4.7090000000000005em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mord text\"><span class=\"mord\">(linear)</span></span></span></span><span style=\"top:-3.111em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">2</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">2</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">2</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">2</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-1.513em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">2</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">2</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.938em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">2</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mord text\"><span class=\"mord\">(linear again)</span></span><span class=\"mord\">.</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.1470000000000002em;\"><span></span></span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n<p>You might not have any hidden layer! Your model is just Logistic Regression, no hidden unit! <mark>Just use non-linear activations for hidden layers!</mark></p>\n<h3 id=\"sigmoid-function\">Sigmoid function <a class=\"direct-link\" href=\"#sigmoid-function\">#</a></h3>\n<ul>\n<li>Usually used in the output layer in the binary classification.</li>\n<li><mark>Don't use sigmoid in the hidden layers!</mark></li>\n</ul>\n<div class=\"columns-2\" markdown=\"1\">\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>σ</mi><mo stretchy=\"false\">(</mo><mi>z</mi><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mfrac><mn>1</mn><mrow><mn>1</mn><mo>+</mo><msup><mi>e</mi><mrow><mo>−</mo><mi>z</mi></mrow></msup></mrow></mfrac></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>σ</mi><mo stretchy=\"false\">(</mo><mi>z</mi><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mover><mo stretchy=\"true\">→</mo><mpadded width=\"+0.6em\" lspace=\"0.3em\"><mrow><mi>z</mi><mo>→</mo><mi mathvariant=\"normal\">∞</mi></mrow></mpadded></mover><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>σ</mi><mo stretchy=\"false\">(</mo><mi>z</mi><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mover><mo stretchy=\"true\">→</mo><mpadded width=\"+0.6em\" lspace=\"0.3em\"><mrow><mi>z</mi><mo>→</mo><mo>−</mo><mi mathvariant=\"normal\">∞</mi></mrow></mpadded></mover><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><msup><mi>σ</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mi>σ</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><mi>σ</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\n\\begin{aligned}\n\\sigma(z) &amp;= \\dfrac{1}{1+e^{-z}} \\\\\n\\sigma(z) &amp;\\xrightarrow{z\\to \\infty} 1 \\\\\n\\sigma(z) &amp;\\xrightarrow{z\\to -\\infty} 0 \\\\\n\\sigma&#x27;(x) &amp;= \\sigma(x) (1 - \\sigma(x))\n\\end{aligned}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:7.164493em;vertical-align:-3.3322465em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.8322465em;\"><span style=\"top:-5.8322465em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"mclose\">)</span></span></span><span style=\"top:-3.8395245000000005em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"mclose\">)</span></span></span><span style=\"top:-2.1491935em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"mclose\">)</span></span></span><span style=\"top:-0.6491935em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.801892em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.3322465em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.8322465em;\"><span style=\"top:-5.8322465em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.697331em;\"><span style=\"top:-2.989em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.04398em;\">z</span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693300000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span><span style=\"top:-3.8395245000000005em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel x-arrow\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.923392em;\"><span style=\"top:-3.322em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight x-arrow-pad\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.04398em;\">z</span><span class=\"mrel mtight\">→</span><span class=\"mord mtight\">∞</span></span></span></span><span class=\"svg-align\" style=\"top:-2.689em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"hide-tail\" style=\"height:0.522em;min-width:1.469em;\"><svg width='400em' height='0.522em' viewBox='0 0 400000 522' preserveAspectRatio='xMaxYMin slice'><path d='M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z'/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.01100000000000001em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">1</span></span></span><span style=\"top:-2.1491935em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel x-arrow\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0303309999999999em;\"><span style=\"top:-3.322em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight x-arrow-pad\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.04398em;\">z</span><span class=\"mrel mtight\">→</span><span class=\"mord mtight\">−</span><span class=\"mord mtight\">∞</span></span></span></span><span class=\"svg-align\" style=\"top:-2.689em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"hide-tail\" style=\"height:0.522em;min-width:1.469em;\"><svg width='400em' height='0.522em' viewBox='0 0 400000 522' preserveAspectRatio='xMaxYMin slice'><path d='M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z'/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.01100000000000012em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">0</span></span></span><span style=\"top:-0.6491935em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.3322465em;\"><span></span></span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n<p><img src=\"/img/post/mooc/dl/sigmoid.png\" alt=\"sigmoid function\" class=\"img-100 bg-white\"><br>\n<em>Signmoid function graph on Wikipedia.</em></p>\n</div>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np<br><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np<br><br><span class=\"token keyword\">def</span> <span class=\"token function\">sigmoid</span><span class=\"token punctuation\">(</span>z<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">return</span> <span class=\"token number\">1</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token operator\">+</span>np<span class=\"token punctuation\">.</span>exp<span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>z<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">sigmoid_derivative</span><span class=\"token punctuation\">(</span>z<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">return</span> sigmoid<span class=\"token punctuation\">(</span>z<span class=\"token punctuation\">)</span><span class=\"token operator\">*</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token operator\">-</span>sigmoid<span class=\"token punctuation\">(</span>z<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n</div>\n<h3 id=\"softmax-function\">Softmax function <a class=\"direct-link\" href=\"#softmax-function\">#</a></h3>\n<div class=\"columns-2\" markdown=\"1\">\n<p>The output of the softmax function can be used to represent a categorical distribution – that is, a probability distribution over <mark>K different possible</mark> outcomes.</p>\n<p><img src=\"/img/post/mooc/dl/softmax.png\" alt=\"softmax function\" class=\"img-100\"><br>\n<em>Udacity Deep Learning Slide on Softmax</em></p>\n</div>\n<div class=\"columns-2\" markdown=\"1\">\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>σ</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">z</mi><msub><mo stretchy=\"false\">)</mo><mi>i</mi></msub><mo>=</mo><mfrac><msup><mi>e</mi><msub><mi>z</mi><mi>i</mi></msub></msup><mrow><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>K</mi></munderover><msup><mi>e</mi><msub><mi>z</mi><mi>j</mi></msub></msup></mrow></mfrac><mtext> for </mtext><mi>i</mi><mo>=</mo><mn>1</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mi>K</mi><mtext> and </mtext><mi mathvariant=\"bold\">z</mi><mo>∈</mo><msup><mi mathvariant=\"double-struck\">R</mi><mi>K</mi></msup></mrow><annotation encoding=\"application/x-tex\">\n\\sigma (\\mathbf {z} )_{i}={\\frac {e^{z_{i}}}{\\sum _{j=1}^{K}e^{z_{j}}}}{\\text{ for }}i=1,\\dotsc ,K{\\text{ and }}\\mathbf {z}\\in \\mathbb {R} ^{K}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathbf\">z</span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.648441em;vertical-align:-1.3070490000000001em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.341392em;\"><span style=\"top:-2.128769em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.981231em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.43581800000000004em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6064620000000001em;\"><span style=\"top:-3.0050700000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3280857142857143em;\"><span style=\"top:-2.357em;margin-left:-0.04398em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2818857142857143em;\"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3280857142857143em;\"><span style=\"top:-2.357em;margin-left:-0.04398em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3070490000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\"> for </span></span></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\"> and </span></span></span><span class=\"mord\"><span class=\"mord mathbf\">z</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8913309999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbb\">R</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913309999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span></span></span></span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">softmax</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    z_exp <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>exp<span class=\"token punctuation\">(</span>z<span class=\"token punctuation\">)</span><br>    z_sum <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span>z_exp<span class=\"token punctuation\">,</span> axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> keepdims<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">return</span> z_exp <span class=\"token operator\">/</span> z_sum</code></pre>\n</div>\n<h3 id=\"tanh-function-(hyperbolic-tangent)\">tanh function (Hyperbolic tangent) <a class=\"direct-link\" href=\"#tanh-function-(hyperbolic-tangent)\">#</a></h3>\n<ul>\n<li>tanh is better than sigmoid because mean <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">\\to</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span></span> 0 and it centers the data better for the next layer.</li>\n<li>Don't use sigmoid on hidden units except for the output layer because in the case <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn><mo>≤</mo><mover accent=\"true\"><mi>y</mi><mo>^</mo></mover><mo>≤</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">0 \\le \\hat{y} \\le 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.78041em;vertical-align:-0.13597em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.69444em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.19444em;\"><span class=\"mord\">^</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.19444em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></span>, sigmoid is better than tanh.</li>\n</ul>\n<div class=\"columns-2\" markdown=\"1\">\n<div markdown=\"1\">\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>σ</mi><mo stretchy=\"false\">(</mo><mi>z</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mfrac><mrow><msup><mi>e</mi><mi>z</mi></msup><mo>−</mo><msup><mi>e</mi><mrow><mo>−</mo><mi>z</mi></mrow></msup></mrow><mrow><msup><mi>e</mi><mi>z</mi></msup><mo>+</mo><msup><mi>e</mi><mrow><mo>−</mo><mi>z</mi></mrow></msup></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\n\\sigma(z) = \\dfrac{e^{z} - e^{-z}}{e^{z} + e^{-z}}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.217661em;vertical-align:-0.7693300000000001em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.448331em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.590392em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.04398em;\">z</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.697331em;\"><span style=\"top:-2.989em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.04398em;\">z</span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.04398em;\">z</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.771331em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.04398em;\">z</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693300000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></eqn></section></math>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">tanh</span><span class=\"token punctuation\">(</span>z<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>exp<span class=\"token punctuation\">(</span>z<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> np<span class=\"token punctuation\">.</span>exp<span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>z<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>exp<span class=\"token punctuation\">(</span>z<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> np<span class=\"token punctuation\">.</span>exp<span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>z<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n</div>\n<p><img src=\"/img/post/mooc/dl/tanh.png\" alt=\"tanh function\" class=\"img-100 bg-white\"><br>\n<em>Graph of tanh from analyticsindiamag.</em></p>\n</div>\n<h3 id=\"relu\">ReLU <a class=\"direct-link\" href=\"#relu\">#</a></h3>\n<ul>\n<li>ReLU (<strong>R</strong>ectified <strong>L</strong>inear <strong>U</strong>nit).</li>\n<li>Its derivative is much different from 0 than sigmoid/tanh <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">\\to</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span></span> learn faster!</li>\n<li><mark>If you aren't sure which one to use in the activation, use ReLU!</mark></li>\n<li>Weakness: derivative ~ 0 in the negative side, we use <strong>Leaky ReLU</strong> instead! However, <mark>Leaky ReLU aren't used much in practice</mark>!</li>\n</ul>\n<div class=\"columns-2\" markdown=\"1\">\n<div markdown=\"1\">\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>σ</mi><mo stretchy=\"false\">(</mo><mi>z</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>max</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mn>0</mn><mo separator=\"true\">,</mo><mi>z</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\n\\sigma(z) = \\max(0,z)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">max</span><span class=\"mopen\">(</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"mclose\">)</span></span></span></span></span></eqn></section></math>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">relu</span><span class=\"token punctuation\">(</span>z<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">return</span> np<span class=\"token punctuation\">.</span>maximum<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> z<span class=\"token punctuation\">)</span></code></pre>\n</div>\n<p><img src=\"/img/post/mooc/dl/relu-leaky.jpg\" alt=\"relu vs leaky relu\" class=\"img-100\"><br>\n<em>ReLU (left) and Leaky ReLU (right)</em></p>\n</div>\n<h2 id=\"logistic-regression\">Logistic Regression <a class=\"direct-link\" href=\"#logistic-regression\">#</a></h2>\n<ul>\n<li>Usually used for binary classification (there are only <mark>2 outputs</mark>). In the case of multiclass classification, we can use <em>one vs all</em> (couple multiple logistic regression steps).</li>\n</ul>\n<h3 id=\"gradient-descent\">Gradient Descent <a class=\"direct-link\" href=\"#gradient-descent\">#</a></h3>\n<p>Gradient Descent is an algorithm to minimizing the cose function <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>J</mi></mrow><annotation encoding=\"application/x-tex\">J</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span></span></span></span></span>. It contains 2 steps: <strong>Forward Propagation</strong> (From <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span></span> to compute the cost <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>J</mi></mrow><annotation encoding=\"application/x-tex\">J</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span></span></span></span></span>) and <strong>Backward Propagation</strong> (compute derivaties and optimize the parameters <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">w, b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></span>).</p>\n<p>Initialize <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">w, b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></span> and then <mark>repeat until convergence</mark> (<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">m</span></span></span></span></span>: number of training examples, <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span></span></span>: learning rate, <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>J</mi></mrow><annotation encoding=\"application/x-tex\">J</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span></span></span></span></span>: cost function, <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">A</span></span></span></span></span>: activation function):</p>\n<p class=\"indent\"></p>\n<ol>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mo>=</mo><mi>σ</mi><mo stretchy=\"false\">(</mo><msup><mi>w</mi><mi>T</mi></msup><mi>X</mi><mo>+</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">A = \\sigma(w^TX + b)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0913309999999998em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8413309999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span></span></span></span></span></li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>J</mi><mo stretchy=\"false\">(</mo><mi>w</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mo>−</mo><mfrac><mn>1</mn><mi>m</mi></mfrac><mrow><mo fence=\"true\">(</mo><mi>Y</mi><mi>log</mi><mo>⁡</mo><msup><mi>A</mi><mi>T</mi></msup><mo>+</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><mi>Y</mi><mo stretchy=\"false\">)</mo><mi>log</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><msup><mi>A</mi><mi>T</mi></msup><mo stretchy=\"false\">)</mo><mo fence=\"true\">)</mo></mrow></mrow><annotation encoding=\"application/x-tex\">J(w,b) = -\\frac{1}{m} \\left( Y \\log A^T + (1-Y)\\log(1-A^T) \\right)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.20001em;vertical-align:-0.35001em;\"></span><span class=\"mord\">−</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">m</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">(</span></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8413309999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8413309999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">)</span></span></span></span></span></span></span></li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"normal\">∂</mi><mi>w</mi></msub><mi>J</mi><mo>=</mo><mfrac><mn>1</mn><mi>m</mi></mfrac><mi>X</mi><mo stretchy=\"false\">(</mo><mi>A</mi><mo>−</mo><mi>Y</mi><msup><mo stretchy=\"false\">)</mo><mi>T</mi></msup></mrow><annotation encoding=\"application/x-tex\">\\partial_{w}J = \\frac{1}{m}X(A-Y)^T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05556em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.190108em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">m</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">A</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0913309999999998em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8413309999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span></span></span></span></span></li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"normal\">∂</mi><mi>b</mi></msub><mi>J</mi><mo>=</mo><mfrac><mn>1</mn><mi>m</mi></mfrac><mi mathvariant=\"normal\">Σ</mi><mo stretchy=\"false\">(</mo><mi>A</mi><mo>−</mo><mi>Y</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\partial_{b}J = \\frac{1}{m} \\Sigma (A-Y)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05556em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.190108em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">m</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\">Σ</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">A</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"mclose\">)</span></span></span></span></span></li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo>:</mo><mo>=</mo><mi>w</mi><mo>−</mo><mi>α</mi><msub><mi mathvariant=\"normal\">∂</mi><mi>w</mi></msub><mi>J</mi></mrow><annotation encoding=\"application/x-tex\">w := w - \\alpha \\partial_{w}J</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05556em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span></span></span></span></span></li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi><mo>:</mo><mo>=</mo><mi>b</mi><mo>−</mo><mi>α</mi><msub><mi mathvariant=\"normal\">∂</mi><mi>b</mi></msub><mi>J</mi></mrow><annotation encoding=\"application/x-tex\">b := b - \\alpha \\partial_{b}J</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05556em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span></span></span></span></span></li>\n</ol>\n<p>The <mark>dimension of variables</mark>: <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi><mo>∈</mo><msup><mi mathvariant=\"double-struck\">R</mi><mrow><msub><mi>n</mi><mi>x</mi></msub><mo>×</mo><mi>m</mi></mrow></msup><mo separator=\"true\">,</mo><mi>Y</mi><mo>∈</mo><msup><mi mathvariant=\"double-struck\">R</mi><mrow><mn>1</mn><mo>×</mo><mi>m</mi></mrow></msup><mo separator=\"true\">,</mo><mi>b</mi><mo>∈</mo><msup><mi mathvariant=\"double-struck\">R</mi><mrow><mn>1</mn><mo>×</mo><mi>m</mi></mrow></msup><mo separator=\"true\">,</mo><mi>w</mi><mo>∈</mo><msup><mi mathvariant=\"double-struck\">R</mi><mrow><msub><mi>n</mi><mi>x</mi></msub><mo>×</mo><mn>1</mn></mrow></msup><mo separator=\"true\">,</mo><mi>A</mi><mo>∈</mo><msup><mi mathvariant=\"double-struck\">R</mi><mrow><mn>1</mn><mo>×</mo><mi>m</mi></mrow></msup><mo separator=\"true\">,</mo><mi>J</mi><mo>∈</mo><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">X\\in \\mathbb{R}^{n_x \\times m}, Y\\in \\mathbb{R}^{1\\times m}, b\\in \\mathbb{R}^{1\\times m}, w\\in \\mathbb{R}^{n_x \\times 1}, A\\in \\mathbb{R}^{1\\times m}, J\\in \\mathbb{R}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72243em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9657709999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbb\">R</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.771331em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.16454285714285719em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">x</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mbin mtight\">×</span><span class=\"mord mathnormal mtight\">m</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.008548em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbb\">R</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mbin mtight\">×</span><span class=\"mord mathnormal mtight\">m</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.008548em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbb\">R</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mbin mtight\">×</span><span class=\"mord mathnormal mtight\">m</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.008548em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbb\">R</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.16454285714285719em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">x</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mbin mtight\">×</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.008548em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbb\">R</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mbin mtight\">×</span><span class=\"mord mathnormal mtight\">m</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span></span></span></span></span></span>, <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"normal\">∂</mi><mi>w</mi></msub><mi>J</mi><mo>∈</mo><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">\\partial_wJ \\in \\mathbb{R}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05556em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span></span></span></span></span></span>, <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"normal\">∂</mi><mi>b</mi></msub><mi>J</mi><mo>∈</mo><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">\\partial_bJ \\in \\mathbb{R}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05556em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span></span></span></span></span></span>.</p>\n<h3 id=\"code\">Code <a class=\"direct-link\" href=\"#code\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">logistic_regression_model</span><span class=\"token punctuation\">(</span>X_train<span class=\"token punctuation\">,</span> Y_train<span class=\"token punctuation\">,</span> X_test<span class=\"token punctuation\">,</span> Y_test<span class=\"token punctuation\">,</span><br>                              num_iterations <span class=\"token operator\">=</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">,</span> learning_rate <span class=\"token operator\">=</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    m <span class=\"token operator\">=</span> X_train<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># number of training examples</span><br><br>    <span class=\"token comment\"># INITIALIZE w, b</span><br>    w <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>X_train<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>    b <span class=\"token operator\">=</span> <span class=\"token number\">0</span><br><br>    <span class=\"token comment\"># GRADIENT DESCENT</span><br>    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>num_iterations<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>        <span class=\"token comment\"># FORWARD PROPAGATION (from x to cost)</span><br>        A <span class=\"token operator\">=</span> sigmoid<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>dot<span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">.</span>T<span class=\"token punctuation\">,</span> X_train<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> b<span class=\"token punctuation\">)</span><br>        cost <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token operator\">/</span>m <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>dot<span class=\"token punctuation\">(</span>Y<span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>log<span class=\"token punctuation\">(</span>A<span class=\"token punctuation\">.</span>T<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>               <span class=\"token operator\">+</span> p<span class=\"token punctuation\">.</span>dot<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token operator\">-</span>Y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>log<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token operator\">-</span>A<span class=\"token punctuation\">.</span>T<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><br>        <span class=\"token comment\"># BACKWARD PROPAGATION (find grad)</span><br>        dw <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token operator\">/</span>m <span class=\"token operator\">*</span> np<span class=\"token punctuation\">.</span>dot<span class=\"token punctuation\">(</span>X_train<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>A<span class=\"token operator\">-</span>Y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>T<span class=\"token punctuation\">)</span><br>        db <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token operator\">/</span>m <span class=\"token operator\">*</span> np<span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span>A<span class=\"token operator\">-</span>Y<span class=\"token punctuation\">)</span><br>        cost <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>squeeze<span class=\"token punctuation\">(</span>cost<span class=\"token punctuation\">)</span><br><br>        <span class=\"token comment\"># OPTIMIZE</span><br>        w <span class=\"token operator\">=</span> w <span class=\"token operator\">-</span> learning_rate<span class=\"token operator\">*</span>dw<br>        b <span class=\"token operator\">=</span> b <span class=\"token operator\">-</span> learning_rate<span class=\"token operator\">*</span>db<br><br>    <span class=\"token comment\"># PREDICT (with optimized w, b)</span><br>    Y_pred <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>m<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>    w <span class=\"token operator\">=</span> w<span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><br><br>    A <span class=\"token operator\">=</span> sigmoid<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>dot<span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">.</span>T<span class=\"token punctuation\">,</span>X_test<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> b<span class=\"token punctuation\">)</span><br>    Y_pred_test <span class=\"token operator\">=</span> A <span class=\"token operator\">></span> <span class=\"token number\">0.5</span></code></pre>\n<h2 id=\"neural-network-overview\">Neural Network overview <a class=\"direct-link\" href=\"#neural-network-overview\">#</a></h2>\n<h3 id=\"notations\">Notations <a class=\"direct-link\" href=\"#notations\">#</a></h3>\n<div class=\"two-columns-list\" markdown=\"1\">\n<ul>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>X</mi><mrow><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">X^{(i)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span></span></span></span></span> : <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span></span>th training example.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">m</span></span></span></span></span> : number of examples.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">L</span></span></span></span></span> : number of layers.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>n</mi><mrow><mo stretchy=\"false\">[</mo><mn>0</mn><mo stretchy=\"false\">]</mo></mrow></msup><mo>=</mo><msub><mi>n</mi><mi>X</mi></msub></mrow><annotation encoding=\"application/x-tex\">n^{[0]} = n_X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">0</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\">X</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> : number of features (# nodes in the input).</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>n</mi><mrow><mo stretchy=\"false\">[</mo><mi>L</mi><mo stretchy=\"false\">]</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">n^{[L]}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\">L</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span></span></span> : number of nodes in the output layer.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>n</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">n^{[l]}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span></span></span> : number of nodes in the hidden layers.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>w</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">w^{[l]}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span></span></span> : weights for <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>z</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">z^{[l]}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span></span></span>.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>a</mi><mrow><mo stretchy=\"false\">[</mo><mn>0</mn><mo stretchy=\"false\">]</mo></mrow></msup><mo>=</mo><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">a^{[0]} = X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">0</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span></span> : activation in the input layer.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>a</mi><mi>i</mi><mrow><mo stretchy=\"false\">[</mo><mn>2</mn><mo stretchy=\"false\">]</mo></mrow></msubsup></mrow><annotation encoding=\"application/x-tex\">a^{[2]}_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.321664em;vertical-align:-0.27686399999999994em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0448em;\"><span style=\"top:-2.4231360000000004em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.2198em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">2</span><span class=\"mclose mtight\">]</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.27686399999999994em;\"><span></span></span></span></span></span></span></span></span></span></span> : activation in layer <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span></span>, node <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span></span>.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>a</mi><mrow><mo stretchy=\"false\">[</mo><mn>2</mn><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">a^{[2](i)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">2</span><span class=\"mclose mtight\">]</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span></span></span></span></span> : activation in layer <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span></span>, example <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span></span>.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>a</mi><mrow><mo stretchy=\"false\">[</mo><mi>L</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo>=</mo><mover accent=\"true\"><mi>y</mi><mo>^</mo></mover></mrow><annotation encoding=\"application/x-tex\">a^{[L]} = \\hat{y}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\">L</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.69444em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.19444em;\"><span class=\"mord\">^</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.19444em;\"><span></span></span></span></span></span></span></span></span></span>.</li>\n</ul>\n</div>\n<h3 id=\"dimensions\">Dimensions <a class=\"direct-link\" href=\"#dimensions\">#</a></h3>\n<div class=\"two-columns-list\" markdown=\"1\">\n<ul>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>A</mi><mrow><mo stretchy=\"false\">[</mo><mn>0</mn><mo stretchy=\"false\">]</mo></mrow></msup><mo>=</mo><mi>X</mi><mo>∈</mo><msup><mi mathvariant=\"double-struck\">R</mi><mrow><msup><mi>n</mi><mrow><mo stretchy=\"false\">[</mo><mn>0</mn><mo stretchy=\"false\">]</mo></mrow></msup><mo>×</mo><mi>m</mi></mrow></msup></mrow><annotation encoding=\"application/x-tex\">A^{[0]} = X \\in \\mathbb{R}^{n^{[0]} \\times m}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">0</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72243em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0396999999999998em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbb\">R</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0396999999999998em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9667142857142857em;\"><span style=\"top:-2.966714285714285em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">0</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mbin mtight\">×</span><span class=\"mord mathnormal mtight\">m</span></span></span></span></span></span></span></span></span></span></span></span></span></li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>Z</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo separator=\"true\">,</mo><msup><mi>A</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo>∈</mo><msup><mi mathvariant=\"double-struck\">R</mi><mrow><msup><mi>n</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo>×</mo><mi>m</mi></mrow></msup></mrow><annotation encoding=\"application/x-tex\">Z^{[l]}, A^{[l]} \\in \\mathbb{R}^{n^{[l]}\\times m}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0824399999999998em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0396999999999998em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbb\">R</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0396999999999998em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9667142857142857em;\"><span style=\"top:-2.966714285714285em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mbin mtight\">×</span><span class=\"mord mathnormal mtight\">m</span></span></span></span></span></span></span></span></span></span></span></span></span>.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><msup><mi>Z</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo separator=\"true\">,</mo><mi>d</mi><msup><mi>A</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo>∈</mo><msup><mi mathvariant=\"double-struck\">R</mi><mrow><msup><mi>n</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo>×</mo><mi>m</mi></mrow></msup></mrow><annotation encoding=\"application/x-tex\">dZ^{[l]}, dA^{[l]} \\in \\mathbb{R}^{n^{[l]}\\times m}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0824399999999998em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0396999999999998em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbb\">R</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0396999999999998em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9667142857142857em;\"><span style=\"top:-2.966714285714285em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mbin mtight\">×</span><span class=\"mord mathnormal mtight\">m</span></span></span></span></span></span></span></span></span></span></span></span></span>.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><msup><mi>W</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo separator=\"true\">,</mo><msup><mi>W</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo>∈</mo><msup><mi mathvariant=\"double-struck\">R</mi><mrow><msup><mi>n</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><msup><mo>×</mo><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></msup></mrow></msup></mrow><annotation encoding=\"application/x-tex\">dW^{[l]}, W^{[l]} \\in \\mathbb{R}^{n^{[l]} \\times ^{[l-1]}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0824399999999998em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0396999999999998em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbb\">R</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0396999999999998em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9667142857142857em;\"><span style=\"top:-2.966714285714285em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mord mtight\"><span class=\"mbin mtight\">×</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9667142857142857em;\"><span style=\"top:-2.966714285714285em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><msup><mi>b</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo separator=\"true\">,</mo><msup><mi>b</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo>∈</mo><msup><mi mathvariant=\"double-struck\">R</mi><mrow><msup><mi>n</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo>×</mo><mn>1</mn></mrow></msup></mrow><annotation encoding=\"application/x-tex\">db^{[l]}, b^{[l]} \\in \\mathbb{R}^{n^{[l]} \\times 1}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0824399999999998em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0396999999999998em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbb\">R</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0396999999999998em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9667142857142857em;\"><span style=\"top:-2.966714285714285em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mbin mtight\">×</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span></span></span></span></span>.</li>\n</ul>\n</div>\n<h3 id=\"l-layer-deep-neural-network\">L-layer deep neural network <a class=\"direct-link\" href=\"#l-layer-deep-neural-network\">#</a></h3>\n<div class=\"columns-2\" markdown=\"1\">\n<p><img src=\"/img/post/mooc/dl/l-layer-dnn.png\" alt=\"L-layer deep neural network\" class=\"img-95 pop\"><br>\n<em>L-layer deep neural network. Image from the course.</em></p>\n<div>\n<ol>\n<li>Initialize parameters / Define hyperparameters</li>\n<li>Loop for num_iterations:\n<ol>\n<li>Forward propagation</li>\n<li>Compute cost function</li>\n<li>Backward propagation</li>\n<li>Update parameters (using parameters, and grads from backprop)</li>\n</ol>\n</li>\n<li>Use trained parameters to predict labels.</li>\n</ol>\n</div>\n</div>\n<h3 id=\"initialize-parameters\">Initialize parameters <a class=\"direct-link\" href=\"#initialize-parameters\">#</a></h3>\n<ul>\n<li>In the <mark>Logistic Regression, we use <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></span> for <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">w, b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></span></mark> (it's OK because LogR doesn't have hidden layers) but <mark>we can't in the NN model</mark>!</li>\n<li>If we use <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></span>, we'll meet the <strong>completely symmetric problem</strong>. No matter how long you train your NN, hidden units compute exactly the same function <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> No point to having more than 1 hidden unit!</li>\n<li>We <mark>add a little bit in <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>W</mi></mrow><annotation encoding=\"application/x-tex\">W</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span></span></span></span></span></mark> and <mark>keep <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></span> in <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></span></mark>.</li>\n</ul>\n<h3 id=\"forward-%26-backward-propagation\">Forward &amp; Backward Propagation <a class=\"direct-link\" href=\"#forward-%26-backward-propagation\">#</a></h3>\n<p><img src=\"/img/post/mooc/dl/for-back-prop-animation.gif\" alt=\"Blocks of forward and backward propagation deep NN\" class=\"img-70\"><br>\n<em>Blocks of forward and backward propagation deep NN. Unknown source.</em></p>\n<p><img src=\"/img/post/mooc/dl/backprop_kiank.png\" alt=\"Blocks of forward and backward propagation deep NN\" class=\"img-90\"><br>\n<em>Blocks of forward and backward propagation deep NN. Image from the course.</em></p>\n<p><strong>Forward Propagation</strong>: Loop through number of layers:</p>\n<p class=\"indent\"></p>\n<ol>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>A</mi><mrow><mo stretchy=\"false\">[</mo><mn>0</mn><mo stretchy=\"false\">]</mo></mrow></msup><mo>=</mo><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">A^{[0]} = X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mtight\">0</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span></span></li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>Z</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo>=</mo><msup><mi>W</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><msup><mi>A</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></msup><mo>+</mo><msup><mi>b</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">Z^{[l]} = W^{[l]}A^{[l-1]} + b^{[l]}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9713299999999999em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span></span></span> (linear)</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>A</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo>=</mo><msup><mi>σ</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo stretchy=\"false\">(</mo><msup><mi>Z</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">A^{[l]} = \\sigma^{[l]}(Z^{[l]})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.138em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span> (for <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mo>=</mo><mn>1</mn><mo>…</mo><mi>L</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">l=1 \\ldots L-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></span>, non-linear activations)</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>A</mi><mrow><mo stretchy=\"false\">[</mo><mi>L</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo>=</mo><msup><mi>σ</mi><mrow><mo stretchy=\"false\">[</mo><mi>L</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo stretchy=\"false\">(</mo><msup><mi>Z</mi><mrow><mo stretchy=\"false\">[</mo><mi>L</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">A^{[L]} = \\sigma^{[L]}(Z^{[L]})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\">L</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.138em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\">L</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\">L</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span> (sigmoid function)</li>\n</ol>\n<p><strong>Cost function</strong>: <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>J</mi><mo stretchy=\"false\">(</mo><mi>w</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mo>−</mo><mfrac><mn>1</mn><mi>m</mi></mfrac><mrow><mo fence=\"true\">(</mo><mi>Y</mi><mi>log</mi><mo>⁡</mo><msup><mi>A</mi><mi>T</mi></msup><mo>+</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><mi>Y</mi><mo stretchy=\"false\">)</mo><mi>log</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><msup><mi>A</mi><mi>T</mi></msup><mo stretchy=\"false\">)</mo><mo fence=\"true\">)</mo></mrow></mrow><annotation encoding=\"application/x-tex\">J(w,b) = -\\frac{1}{m} \\left( Y \\log A^T + (1-Y)\\log(1-A^T) \\right)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.20001em;vertical-align:-0.35001em;\"></span><span class=\"mord\">−</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">m</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">(</span></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8413309999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8413309999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">)</span></span></span></span></span></span></span></p>\n<p><strong>Backward Propagation</strong>: Loop through number of layers</p>\n<p class=\"indent\"></p>\n<ol>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><msup><mi>A</mi><mrow><mo stretchy=\"false\">[</mo><mi>L</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo>=</mo><mo>−</mo><mfrac><mi>y</mi><msup><mi>A</mi><mrow><mo stretchy=\"false\">[</mo><mi>L</mi><mo stretchy=\"false\">]</mo></mrow></msup></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn><mo>−</mo><mi>y</mi></mrow><mrow><mn>1</mn><mo>−</mo><msup><mi>A</mi><mrow><mo stretchy=\"false\">[</mo><mi>L</mi><mo stretchy=\"false\">]</mo></mrow></msup></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">dA^{[L]} = -\\frac{y}{A^{[L]}} + \\frac{1-y}{1-A^{[L]}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\">L</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.132925em;vertical-align:-0.38542499999999996em;\"></span><span class=\"mord\">−</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7475em;\"><span style=\"top:-2.614575em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8220357142857143em;\"><span style=\"top:-2.8220357142857138em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\">L</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.446108em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">y</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.38542499999999996em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.3409719999999998em;vertical-align:-0.44375599999999993em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.897216em;\"><span style=\"top:-2.614575em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8220357142857143em;\"><span style=\"top:-2.8220357142857138em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\">L</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.446108em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mbin mtight\">−</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">y</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.44375599999999993em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>.</li>\n<li>for <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mo>=</mo><mi>L</mi><mo>…</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">l=L \\ldots 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span></span></span></span></span>, non-linear activations:\n<ol>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><msup><mi>Z</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo>=</mo><mi>d</mi><msup><mi>A</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo stretchy=\"false\">(</mo><msup><mi>σ</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><msup><mo stretchy=\"false\">)</mo><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo stretchy=\"false\">(</mo><msup><mi>Z</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">dZ^{[l]} = dA^{[l]} (\\sigma^{[l]})&#x27;(Z^{[l]})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.138em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span>.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><msup><mi>W</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo>=</mo><mfrac><mrow><mi>d</mi><mi>J</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msup><mi>W</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup></mrow></mfrac><mo>=</mo><mfrac><mn>1</mn><mi>m</mi></mfrac><mi>d</mi><msup><mi>Z</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo stretchy=\"false\">(</mo><msup><mi>A</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo><msup><mo stretchy=\"false\">)</mo><mi>T</mi></msup></mrow></msup></mrow><annotation encoding=\"application/x-tex\">dW^{[l]} = \\frac{dJ}{\\partial W^{[l]}} = \\frac{1}{m} dZ^{[l]} (A^{[l-1])^T}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.2655329999999998em;vertical-align:-0.38542499999999996em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801079999999999em;\"><span style=\"top:-2.614575em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8220357142857143em;\"><span style=\"top:-2.8220357142857138em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.09618em;\">J</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.38542499999999996em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.351365em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">m</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord mathnormal\">d</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.006365em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">]</span><span class=\"mclose mtight\"><span class=\"mclose mtight\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9190928571428572em;\"><span style=\"top:-2.931em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><msup><mi>b</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo>=</mo><mfrac><mrow><mi>d</mi><mi>J</mi></mrow><mrow><mi mathvariant=\"normal\">∂</mi><msup><mi>b</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup></mrow></mfrac><mo>=</mo><mfrac><mn>1</mn><mi>m</mi></mfrac><msubsup><mi>σ</mi><mn>1</mn><mi>m</mi></msubsup><mi>d</mi><msup><mi>Z</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">db^{[l]} = \\frac{dJ}{\\partial b^{[l]}} = \\frac{1}{m}\\sigma_1^m dZ^{[l](i)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.2655329999999998em;vertical-align:-0.38542499999999996em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801079999999999em;\"><span style=\"top:-2.614575em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8220357142857143em;\"><span style=\"top:-2.8220357142857138em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5357142857142856em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.09618em;\">J</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.38542499999999996em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.2329999999999999em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">m</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-2.4518920000000004em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">m</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24810799999999997em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\">d</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span></span></span></span></span>.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><msup><mi>A</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></msup><mo>=</mo><mo stretchy=\"false\">(</mo><msup><mi>W</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo><msup><mo stretchy=\"false\">)</mo><mi>T</mi></msup></mrow></msup><mi>d</mi><msup><mi>Z</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">dA^{[l-1]} = (W^{[l])^T}dZ^{[l]}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.256365em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.006365em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span><span class=\"mclose mtight\"><span class=\"mclose mtight\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9190928571428572em;\"><span style=\"top:-2.931em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class=\"mord mathnormal\">d</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span></span></span>.</li>\n</ol>\n</li>\n</ol>\n<p><strong>Update parameters</strong>: loop through number of layers (for <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mo>=</mo><mn>1</mn><mo>…</mo><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">l=1\\ldots L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">L</span></span></span></span></span>)</p>\n<p class=\"indent\"></p>\n<ol>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>W</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo>=</mo><msup><mi>W</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo>−</mo><mi>α</mi><mi>d</mi><msup><mi>W</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">W^{[l]} = W^{[l]} - \\alpha dW^{[l]}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9713299999999999em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mord mathnormal\">d</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span></span></span>.</li>\n<li><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>b</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo>=</mo><msup><mi>b</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup><mo>−</mo><mi>α</mi><mi>d</mi><msup><mi>b</mi><mrow><mo stretchy=\"false\">[</mo><mi>l</mi><mo stretchy=\"false\">]</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">b^{[l]} = b^{[l]} - \\alpha db^{[l]}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9713299999999999em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mord mathnormal\">d</span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span></span></span>.</li>\n</ol>\n<h3 id=\"code-2\">Code <a class=\"direct-link\" href=\"#code-2\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">L_Layer_NN</span><span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">,</span> Y<span class=\"token punctuation\">,</span> layers_dims<span class=\"token punctuation\">,</span> learning_rate<span class=\"token operator\">=</span><span class=\"token number\">0.0075</span><span class=\"token punctuation\">,</span><br>               num_iterations<span class=\"token operator\">=</span><span class=\"token number\">3000</span><span class=\"token punctuation\">,</span> print_cost<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    costs <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><br>    m <span class=\"token operator\">=</span> X_train<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># number of training examples</span><br>    L <span class=\"token operator\">=</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>layer_dims<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># number of layers</span><br><br>    <span class=\"token comment\"># INITIALIZE W, b</span><br>    params <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'W'</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><br>    <span class=\"token keyword\">for</span> l <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>L<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>        params<span class=\"token punctuation\">[</span><span class=\"token string\">'W'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>l<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randn<span class=\"token punctuation\">(</span>layer_dims<span class=\"token punctuation\">[</span>l<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> layer_dims<span class=\"token punctuation\">[</span>l<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">0.01</span><br>        params<span class=\"token punctuation\">[</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>l<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>layer_dims<span class=\"token punctuation\">[</span>l<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><br>    <span class=\"token comment\"># GRADIENT DESCENT</span><br>    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> num_iterations<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>        <span class=\"token comment\"># FORWARD PROPAGATION (Linear -> ReLU x (L-1) -> Linear -> Sigmoid (L))</span><br>        A <span class=\"token operator\">=</span> X<br>        caches <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'W'</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Z'</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><br>        <span class=\"token keyword\">for</span> l <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>L<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>            caches<span class=\"token punctuation\">[</span><span class=\"token string\">'A_prev'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>A<span class=\"token punctuation\">)</span><br>            <span class=\"token comment\"># INITIALIZE W, b</span><br>            W <span class=\"token operator\">=</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'W'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>l<span class=\"token punctuation\">]</span><br>            b <span class=\"token operator\">=</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>l<span class=\"token punctuation\">]</span><br>            caches<span class=\"token punctuation\">[</span><span class=\"token string\">'W'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>W<span class=\"token punctuation\">)</span><br>            caches<span class=\"token punctuation\">[</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span><br>            <span class=\"token comment\"># RELU X (L-1)</span><br>            Z <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>dot<span class=\"token punctuation\">(</span>W<span class=\"token punctuation\">,</span> A<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> b<br>            <span class=\"token keyword\">if</span> l <span class=\"token operator\">!=</span> L<span class=\"token punctuation\">:</span> <span class=\"token comment\"># hidden layers</span><br>                A <span class=\"token operator\">=</span> relu<span class=\"token punctuation\">(</span>Z<span class=\"token punctuation\">)</span><br>            <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># output layer</span><br>                A <span class=\"token operator\">=</span> sigmoid<span class=\"token punctuation\">(</span>Z<span class=\"token punctuation\">)</span><br>            caches<span class=\"token punctuation\">[</span><span class=\"token string\">'Z'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>Z<span class=\"token punctuation\">)</span><br><br>        <span class=\"token comment\"># COST</span><br>        cost <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token operator\">/</span>m <span class=\"token operator\">*</span> np<span class=\"token punctuation\">.</span>dot<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>log<span class=\"token punctuation\">(</span>A<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> Y<span class=\"token punctuation\">.</span>T<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token operator\">/</span>m <span class=\"token operator\">*</span> np<span class=\"token punctuation\">.</span>dot<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>log<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token operator\">-</span>A<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token operator\">-</span>Y<span class=\"token punctuation\">.</span>T<span class=\"token punctuation\">)</span><br><br>        <span class=\"token comment\">#FORWARD PROPAGATION (Linear -> ReLU x (L-1) -> Linear -> Sigmoid (L))</span><br>        dA <span class=\"token operator\">=</span> <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>divide<span class=\"token punctuation\">(</span>Y<span class=\"token punctuation\">,</span> A<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> np<span class=\"token punctuation\">.</span>divide<span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">-</span> Y<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> <span class=\"token operator\">-</span> A<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>        grads <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'dW'</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'db'</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><br>        <span class=\"token keyword\">for</span> l <span class=\"token keyword\">in</span> <span class=\"token builtin\">reversed</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>L<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>            cache_Z <span class=\"token operator\">=</span> caches<span class=\"token punctuation\">[</span><span class=\"token string\">'Z'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>l<span class=\"token punctuation\">]</span><br>            <span class=\"token keyword\">if</span> l <span class=\"token operator\">!=</span> L<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># hidden layers</span><br>                dZ <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span>dA<span class=\"token punctuation\">,</span> copy<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><br>                dZ<span class=\"token punctuation\">[</span>Z <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><br>            <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># output layer</span><br>                dZ <span class=\"token operator\">=</span> dA <span class=\"token operator\">*</span> sigmoid<span class=\"token punctuation\">(</span>cache_Z<span class=\"token punctuation\">)</span><span class=\"token operator\">*</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token operator\">-</span>sigmoid<span class=\"token punctuation\">(</span>cache_Z<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>            cache_A_prev <span class=\"token operator\">=</span> caches<span class=\"token punctuation\">[</span><span class=\"token string\">'A_prev'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>l<span class=\"token punctuation\">]</span><br>            dW <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token operator\">/</span>m <span class=\"token operator\">*</span> np<span class=\"token punctuation\">.</span>dot<span class=\"token punctuation\">(</span>dZ<span class=\"token punctuation\">,</span> cache_A_prev<span class=\"token punctuation\">.</span>T<span class=\"token punctuation\">)</span><br>            db <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token operator\">/</span>m <span class=\"token operator\">*</span> np<span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span>dZ<span class=\"token punctuation\">,</span> axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> keepdims<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><br>            dA <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>dot<span class=\"token punctuation\">(</span>W<span class=\"token punctuation\">.</span>T<span class=\"token punctuation\">,</span> dZ<span class=\"token punctuation\">)</span><br>            grads<span class=\"token punctuation\">[</span><span class=\"token string\">'dW'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>dW<span class=\"token punctuation\">)</span><br>            grads<span class=\"token punctuation\">[</span><span class=\"token string\">'db'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>db<span class=\"token punctuation\">)</span><br><br>        <span class=\"token comment\"># UPDATE PARAMETERS</span><br>        <span class=\"token keyword\">for</span> l <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>L<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>            params<span class=\"token punctuation\">[</span><span class=\"token string\">'W'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>l<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'W'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>l<span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> grads<span class=\"token punctuation\">[</span><span class=\"token string\">'dW'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>l<span class=\"token punctuation\">]</span><br>            params<span class=\"token punctuation\">[</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>l<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> params<span class=\"token punctuation\">[</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>l<span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> grads<span class=\"token punctuation\">[</span><span class=\"token string\">'db'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>l<span class=\"token punctuation\">]</span><br><br>    <span class=\"token keyword\">if</span> print_cost <span class=\"token keyword\">and</span> i <span class=\"token operator\">%</span> <span class=\"token number\">100</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span><br>        <span class=\"token keyword\">print</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"Cost after iteration %i: %f\"</span> <span class=\"token operator\">%</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> cost<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">if</span> print_cost <span class=\"token keyword\">and</span> i <span class=\"token operator\">%</span> <span class=\"token number\">100</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span><br>        costs<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>cost<span class=\"token punctuation\">)</span><br><br>    <span class=\"token keyword\">return</span> parameter</code></pre>\n<h2 id=\"parameters-vs-hyperparameters\">Parameters vs Hyperparameters <a class=\"direct-link\" href=\"#parameters-vs-hyperparameters\">#</a></h2>\n<ul>\n<li><strong>Parameters</strong>: <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>W</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">W, b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></span>.</li>\n<li><strong>Hyperparameters</strong>:\n<ul>\n<li>Learning rate (<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span></span></span>).</li>\n<li>Number of iterations (in gradient descent algorithm) (<code>num_iterations</code>).</li>\n<li>Number of layers (<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">L</span></span></span></span></span>).</li>\n<li>Number of nodes in each layer (<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>n</mi><mrow><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">n^{[i]}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8879999999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8879999999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mclose mtight\">]</span></span></span></span></span></span></span></span></span></span></span></span></span>).</li>\n<li>Choice of activation functions (their form, not their values).</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"comments\">Comments <a class=\"direct-link\" href=\"#comments\">#</a></h2>\n<ul>\n<li><mark>Always use vectorized</mark> if possible! Especially for number of examples!</li>\n<li>We can't use vectorized for number of layers, we need <code>for</code>.</li>\n<li>Sometimes, functions computed with <strong>Deep NN</strong> (more layers, fewer nodes in each layer) is better than <strong>Shallow</strong> (fewer layers, more nodes). E.g. function <code>XOR</code>.</li>\n<li>Deeper layer in the network, more complex features to be determined!</li>\n<li><mark>Applied deep learning is a very empirical process!</mark> Best values depend much on data, algorithms, hyperparameters, CPU, GPU,...</li>\n<li>Learning algorithm works sometimes from data, not from your thousands line of codes (surprise!!!)</li>\n</ul>\n<h2 id=\"application%3A-recognize-a-cat\">Application: recognize a cat <a class=\"direct-link\" href=\"#application%3A-recognize-a-cat\">#</a></h2>\n<p>This section contains an idea, not a <a href=\"https://github.com/dinhanhthi/deeplearning-coursera-solutions/blob/master/course-1/week-4/Deep%2BNeural%2BNetwork%2B-%2BApplication%2Bv8.ipynb\">complete task</a>!</p>\n<div class=\"columns-2\" markdown=\"1\">\n<p><img src=\"/img/post/mooc/dl/imvectorkiank.png\" alt=\"Image to vector conversion.\" class=\"img-95 pop\"><br>\n<em>Image to vector conversion. Image from the course.</em></p>\n<p><img src=\"/img/post/mooc/dl/l-layer-dnn.png\" alt=\"L-layer deep neural network\" class=\"img-95 pop\"><br>\n<em>L-layer deep neural network. Image from the course.</em></p>\n</div>\n<h2 id=\"python-tips\">Python tips <a class=\"direct-link\" href=\"#python-tips\">#</a></h2>\n<p>○ Reshape quickly from <code>(10,9,9,3)</code> to <code>(9*9*3,10)</code>:</p>\n<pre class=\"language-python\"><code class=\"language-python\">X <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>rand<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><br>X <span class=\"token operator\">=</span> X<span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>T</code></pre>\n<p>○ Don't use loop, use <strong>vectorization</strong>!</p>\n",
      "date_published": "2020-04-03T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/python-json/",
      "url": "https://dinhanhthi.com/python-json/",
      "title": "Python JSON",
      "content_html": "<p>JSON (JavaScript Object Notation) is a format that encodes objects in a string.</p>\n<h2 id=\"terms\">Terms <a class=\"direct-link\" href=\"#terms\">#</a></h2>\n<ul>\n<li><strong>Serialization</strong> : convert an object → string.</li>\n<li><strong>Deserialization</strong> : convert string → object.</li>\n</ul>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># object</span><br><span class=\"token punctuation\">{</span>foo<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> bar<span class=\"token punctuation\">:</span> <span class=\"token string\">\"baz\"</span><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># string</span><br><span class=\"token string\">'{\"foo\":[1,4,7,10],\"bar\":\"baz\"}'</span></code></pre>\n</div>\n<h2 id=\"json-with-python%5Bref%5D\">JSON with python<sup><a href=\"https://docs.python.org/3/library/json.html\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup> <a class=\"direct-link\" href=\"#json-with-python%5Bref%5D\">#</a></h2>\n<h3 id=\"basics\">Basics <a class=\"direct-link\" href=\"#basics\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> json</code></pre>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># DECODING</span><br>json<span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># ENCODING</span><br>json<span class=\"token punctuation\">.</span>dumps<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>json<span class=\"token punctuation\">.</span>dump<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n</div>\n<h3 id=\"dict-to-json\">Dict to JSON <a class=\"direct-link\" href=\"#dict-to-json\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">dict_to_json</span><span class=\"token punctuation\">(</span>dictionary<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token triple-quoted-string string\">\"\"\" Transform dictionary that contain numpy instances into a<br>        JSON serializable dictionary.<br><br>    Parameters<br>    ----------<br>    dictionary: dict<br>        The dictionary to tranform.<br><br>    Returns<br>    -------<br>    dict<br>        The JSON serializable dictionary.<br>    \"\"\"</span><br>    dict_json <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><br>    <span class=\"token keyword\">for</span> key <span class=\"token keyword\">in</span> dictionary<span class=\"token punctuation\">:</span><br>        <span class=\"token keyword\">if</span> <span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>dictionary<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">dict</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>            dict_json<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> dict_to_json<span class=\"token punctuation\">(</span>dictionary<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br><br>        <span class=\"token keyword\">elif</span> <span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>dictionary<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>            dict_json<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> dictionary<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><br><br>        <span class=\"token keyword\">elif</span> <span class=\"token builtin\">hasattr</span><span class=\"token punctuation\">(</span>dictionary<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"__len__\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>            dict_json<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>to_json<span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> v <span class=\"token keyword\">in</span> dictionary<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><br><br>        <span class=\"token keyword\">elif</span> <span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>dictionary<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>integer<span class=\"token punctuation\">,</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>int64<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>            dict_json<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>dictionary<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br><br>        <span class=\"token keyword\">elif</span> <span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>dictionary<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>floating<span class=\"token punctuation\">,</span> <span class=\"token builtin\">float</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>            dict_json<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">float</span><span class=\"token punctuation\">(</span>dictionary<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br><br>        <span class=\"token keyword\">elif</span> <span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>dictionary<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>pd<span class=\"token punctuation\">.</span>Timedelta<span class=\"token punctuation\">,</span> pd<span class=\"token punctuation\">.</span>Timestamp<span class=\"token punctuation\">,</span><br>            dt<span class=\"token punctuation\">.</span>timedelta<span class=\"token punctuation\">,</span> dt<span class=\"token punctuation\">.</span>datetime<span class=\"token punctuation\">,</span> dt<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">,</span> dt<span class=\"token punctuation\">.</span>time<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>            dict_json<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>dictionary<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br><br>        <span class=\"token keyword\">elif</span> <span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>dictionary<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>bool_<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># numpy boolean</span><br>            dict_json<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">bool</span><span class=\"token punctuation\">(</span>dictionary<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br><br>        <span class=\"token keyword\">elif</span> dictionary<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token keyword\">is</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">:</span><br>            dict_json<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">None</span><br><br>        <span class=\"token keyword\">elif</span> dictionary<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span><br>            dict_json<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">bool</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><br><br>        <span class=\"token keyword\">elif</span> dictionary<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">:</span><br>            dict_json<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">bool</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><br><br>        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span><br>            log<span class=\"token punctuation\">.</span>debug<span class=\"token punctuation\">(</span><span class=\"token string\">'type pb: %s'</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>dictionary<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>            dict_json<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">'not JSON serializable'</span><br><br>    <span class=\"token keyword\">return</span> dict_json</code></pre>\n",
      "date_published": "2020-04-01T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/python-dictionary/",
      "url": "https://dinhanhthi.com/python-dictionary/",
      "title": "Python Dictionary",
      "content_html": "<h2 id=\"checking\">Checking <a class=\"direct-link\" href=\"#checking\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># check if empty</span><br><span class=\"token builtin\">bool</span><span class=\"token punctuation\">(</span>my_dict<span class=\"token punctuation\">)</span> <span class=\"token comment\"># False if empty</span></code></pre>\n<h2 id=\"creating\">Creating <a class=\"direct-link\" href=\"#creating\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># empty dict</span><br>my_dict <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># integer keys</span><br>my_dict <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"a\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">}</span></code></pre>\n</div>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># contains complicated types</span><br>my_dict <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></code></pre>\n<h2 id=\"updating\">Updating <a class=\"direct-link\" href=\"#updating\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\">d <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"one\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"three\"</span><span class=\"token punctuation\">}</span><br>d1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token number\">2</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"two\"</span><span class=\"token punctuation\">}</span><br><br><span class=\"token comment\"># update value of key \"2\"</span><br>d<span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">(</span>d1<span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># add new key \"3\"</span><br>d2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token number\">3</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"three\"</span><span class=\"token punctuation\">}</span><br>d<span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">(</span>d2<span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"access-elements\">Access elements <a class=\"direct-link\" href=\"#access-elements\">#</a></h2>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">my_dict <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"a\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"b\"</span><span class=\"token punctuation\">}</span><br>my_dict<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><br>my_dict<span class=\"token punctuation\">.</span>keys<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>my_dict<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>my_dict<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<pre><code>'a'\ndict_keys([1, 2])\ndict_values(['a', 'b'])\ndict_items([(1, 'a'), (2, 'b')])\n</code></pre>\n</div>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">for</span> key<span class=\"token punctuation\">,</span> val <span class=\"token keyword\">in</span> my_dict<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>  <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> val<span class=\"token punctuation\">)</span></code></pre>\n<pre><code>1 a\n2 b\n</code></pre>\n</div>\n<p>If the key doesn't exist, use the default!</p>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">dct <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">}</span><br>dct<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><br>dct<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">)</span></code></pre>\n<pre><code>'a'\n'c'\n</code></pre>\n</div>\n<h3 id=\"sorted-keys\">Sorted keys <a class=\"direct-link\" href=\"#sorted-keys\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">for</span> key <span class=\"token keyword\">in</span> <span class=\"token builtin\">sorted</span><span class=\"token punctuation\">(</span>my_dict<span class=\"token punctuation\">.</span>keys<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>  <span class=\"token keyword\">pass</span></code></pre>\n",
      "date_published": "2020-03-31T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/mean-shift/",
      "url": "https://dinhanhthi.com/mean-shift/",
      "title": "Mean Shift clustering",
      "content_html": "<h2 id=\"what%3F\">What? <a class=\"direct-link\" href=\"#what%3F\">#</a></h2>\n<ul>\n<li>\n<p>Mean-Shift assigns the data points to the clusters iteratively by shifting points towards the mode (mode is the highest density of data points in the region, in the context of the Meanshift)</p>\n</li>\n<li>\n<p>Non-Parametric Density Estimation.</p>\n</li>\n<li>\n<p>The data points are sampled from an underlying PDF (Probability density function)<sup><a href=\"http://www.cse.psu.edu/~rtc12/CSE598G/introMeanShift_6pp.pdf\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup>.</p>\n<p><img src=\"/img/post/ML/clustering/mean-shift-1.jpg\" alt=\"Data point density implies PDF\" class=\"img-full-70\"><br>\n<em>Data point density implies PDF.</em></p>\n</li>\n<li>\n<p>Mean-shift built based on the idea of <em>Kernel Density Estimation</em>.</p>\n</li>\n<li>\n<p>Mean shift exploits this KDE idea by imagining what the points would do if they all climbed up hill to the nearest peak on the KDE surface. It does so by iteratively shifting each point uphill until it reaches a peak<sup><a href=\"https://spin.atomicobject.com/2015/05/26/mean-shift-clustering/\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup>.</p>\n  <div class=\"columns-2\" markdown=\"1\">\n<p><img src=\"/img/post/ML/clustering/mean-shift-2.gif\" alt=\"Points climb to the nearest hill.\"><br>\n<em>Points climb to the nearest hill.</em></p>\n<p><img src=\"/img/post/ML/clustering/mean-shift-3.gif\" alt=\"Points climb to the nearest hill.\"><br>\n<em>Points climb to the nearest hill.</em></p>\n  </div>\n</li>\n</ul>\n<h2 id=\"when%3F\">When? <a class=\"direct-link\" href=\"#when%3F\">#</a></h2>\n<ul>\n<li>Image processing and computer vision.</li>\n<li>Image Segmentation Application<sup><a href=\"https://spin.atomicobject.com/2015/05/26/mean-shift-clustering/\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup>.</li>\n</ul>\n<h2 id=\"pros-%26-cons\">Pros &amp; Cons <a class=\"direct-link\" href=\"#pros-%26-cons\">#</a></h2>\n<ul>\n<li><strong>Pros</strong>: Non-Parametric Density Estimation.</li>\n<li><strong>Cons</strong>: It's computationally expensive O(n²) <sup><a href=\"https://www.geeksforgeeks.org/ml-mean-shift-clustering/\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup>.</li>\n</ul>\n<h2 id=\"code%3F\">Code? <a class=\"direct-link\" href=\"#code%3F\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>cluster <span class=\"token keyword\">import</span> MeanShift<br>clustering <span class=\"token operator\">=</span> MeanShift<span class=\"token punctuation\">(</span>bandwidth<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">)</span></code></pre>\n<div class=\"flex-auto-equal-2\" markdown=\"1\">\n<pre class=\"language-python\"><code class=\"language-python\">clustering<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">)</span><br>clustering<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># or</span><br>clustering<span class=\"token punctuation\">.</span>fit_predict<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">)</span></code></pre>\n</div>\n<p>Components:</p>\n<ul>\n<li><code>clustering.labels_</code>: clusters' labels.</li>\n</ul>\n<h2 id=\"usage-example\">Usage example <a class=\"direct-link\" href=\"#usage-example\">#</a></h2>\n<ul>\n<li>Used to <a href=\"/time-series-tips#find-the-windows-of-time-series\">determined windows of time</a> in time series data.</li>\n</ul>\n<h2 id=\"references\">References <a class=\"direct-link\" href=\"#references\">#</a></h2>\n<ul>\n<li><strong>Saravanan Thirumuruganathan</strong> -- <a href=\"https://saravananthirumuruganathan.wordpress.com/2010/04/01/introduction-to-mean-shift-algorithm/\">Introduction To Mean Shift Algorithm</a>.</li>\n<li><strong>Geeksforgeeks</strong> -- <a href=\"https://www.geeksforgeeks.org/ml-mean-shift-clustering/\">Mean-Shift clustering</a>.</li>\n<li><strong>R.Collins</strong> -- <a href=\"http://www.cse.psu.edu/~rtc12/CSE598G/introMeanShift_6pp.pdf\">Mean-Shift tracking</a>.</li>\n<li><strong>Matt Nedrich</strong> -- <a href=\"https://spin.atomicobject.com/2015/05/26/mean-shift-clustering/\">Mean Shift Clustering</a>.</li>\n</ul>\n",
      "date_published": "2020-03-27T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/python-exception/",
      "url": "https://dinhanhthi.com/python-exception/",
      "title": "Python Exception",
      "content_html": "<h2 id=\"try..except\">Try..Except <a class=\"direct-link\" href=\"#try..except\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span><br>  <span class=\"token comment\"># codes</span><br><span class=\"token keyword\">except</span><span class=\"token punctuation\">:</span><br>  <span class=\"token comment\"># codes run if there is an exception</span></code></pre>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span><br>  <span class=\"token comment\"># codes</span><br><span class=\"token keyword\">except</span><span class=\"token punctuation\">:</span><br>  <span class=\"token comment\"># codes run if there is an exception</span><br><span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span><br>  <span class=\"token comment\"># no exception?</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span><br>  <span class=\"token comment\"># try codes</span><br><span class=\"token keyword\">except</span> FileNotFoundError <span class=\"token keyword\">as</span> fnf_error<span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>fnf_error<span class=\"token punctuation\">)</span><br><span class=\"token keyword\">except</span> AssertionError <span class=\"token keyword\">as</span> error<span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span></code></pre>\n</div>\n<p>Other Errors, check <a href=\"https://docs.python.org/3/library/exceptions.html\">this list</a>.</p>\n<h2 id=\"apply\">Apply <a class=\"direct-link\" href=\"#apply\">#</a></h2>\n<h3 id=\"check-str-of-float\">Check <code>str</code> of float <a class=\"direct-link\" href=\"#check-str-of-float\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\">element <span class=\"token operator\">=</span> <span class=\"token string\">'mean'</span><br><span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">float</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">except</span> ValueError<span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">if</span> element <span class=\"token operator\">==</span> <span class=\"token string\">'mean'</span><span class=\"token punctuation\">:</span><br>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello mean'</span><span class=\"token punctuation\">)</span></code></pre>\n",
      "date_published": "2020-03-22T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/wordpress-101/",
      "url": "https://dinhanhthi.com/wordpress-101/",
      "title": "Wordpress 101",
      "content_html": "<p>In this note, wp theme's components are supposed to be placed in folder <code>wp-thi</code>.</p>\n<p>👉 Note: <a href=\"/tags/wordpress/\">All notes of Wordpress</a>.</p>\n<h2 id=\"tools\">Tools <a class=\"direct-link\" href=\"#tools\">#</a></h2>\n<ul>\n<li><strong>FTP</strong>: <a href=\"https://winscp.net/eng/download.php\">WinSCP</a> (Windows) or <a href=\"https://filezilla-project.org/download.php?platform=linux\">FileZilla</a> or <a href=\"%5BTransmit%5D(https://panic.com/transmit/)\">Transmit</a> (MacOS).</li>\n</ul>\n<h2 id=\"general\">General <a class=\"direct-link\" href=\"#general\">#</a></h2>\n<ul>\n<li>Theme is placed at <code>./wp-content/themes/</code></li>\n<li>WP needs at least 2 files to exist: <code>style.css</code> and <code>index.php</code>.</li>\n<li>Admin page <code>wpsite.com/wp-admin</code>.</li>\n</ul>\n<h2 id=\"wp-theme-components\">WP theme components <a class=\"direct-link\" href=\"#wp-theme-components\">#</a></h2>\n<p>Theme's</p>\n<pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">echo</span> <span class=\"token function\">get_bloginfo</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'template_directory'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// theme directory</span></code></pre>\n<p>Website's</p>\n<pre class=\"language-php\"><code class=\"language-php\"><span class=\"token function\">get_bloginfo</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'wpurl'</span> <span class=\"token punctuation\">)</span> <span class=\"token comment\">// url</span><br><span class=\"token function\">get_bloginfo</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'name'</span> <span class=\"token punctuation\">)</span> <span class=\"token comment\">// name</span><br><span class=\"token function\">get_bloginfo</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'description'</span> <span class=\"token punctuation\">)</span> <span class=\"token comment\">// description</span></code></pre>\n<p>Post's</p>\n<pre class=\"language-php\"><code class=\"language-php\"><span class=\"token function\">the_content</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// content</span><br><span class=\"token function\">the_title</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// title</span><br><span class=\"token function\">the_date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// date</span><br><span class=\"token function\">the_author</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// author</span></code></pre>\n<p>Author's</p>\n<pre class=\"language-php\"><code class=\"language-php\"><span class=\"token function\">the_author_meta</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'description'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// description</span></code></pre>\n<h2 id=\"katex-for-wordpress\">KaTeX for Wordpress <a class=\"direct-link\" href=\"#katex-for-wordpress\">#</a></h2>\n<p>I don't like 2 available plugins (<a href=\"https://wordpress.org/plugins/wp-katex/\">WP-KaTeX</a> and <a href=\"https://wordpress.org/plugins/katex/\">KaTeX</a>). The former doesn't support dollar symbols (<code>$</code>) to display equations, the latter doesn't support inline math.</p>\n<p>We will use directly KaTeX.</p>\n<ol>\n<li>\n<p>Put below code inside <code>&lt;head&gt;&lt;/head&gt;</code>,</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">integrity</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">crossorigin</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>anonymous<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">defer</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">integrity</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">crossorigin</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>anonymous<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">defer</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">integrity</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">crossorigin</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>anonymous<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">onload</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>renderMathInElement(document.body, {delimiters: [{left: <span class=\"token punctuation\">'</span>$$<span class=\"token punctuation\">'</span>, right: <span class=\"token punctuation\">'</span>$$<span class=\"token punctuation\">'</span>, display: true},{left: <span class=\"token punctuation\">'</span>$<span class=\"token punctuation\">'</span>, right: <span class=\"token punctuation\">'</span>$<span class=\"token punctuation\">'</span>, display: false}]});<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre>\n</li>\n<li>\n<p>In Wordpress, for <em>display mode</em>, switch to html block. For <em>inline mode</em>, use <code>$$</code> as usual.</p>\n</li>\n</ol>\n",
      "date_published": "2020-03-21T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/bash-command-line/",
      "url": "https://dinhanhthi.com/bash-command-line/",
      "title": "Bash",
      "content_html": "<p>Bash commands are mainly supported in MacOS, Linux but also support in Windows. You can use integrated tools for using bash on these platforms.</p>\n<p>👉 Note: <a href=\"/terminal\">Terminals</a>.<br>\n👉 Note: <a href=\"/screen\">Bash screen</a>.</p>\n<h2 id=\"tools\">Tools <a class=\"direct-link\" href=\"#tools\">#</a></h2>\n<ul>\n<li><strong>Apps</strong>: <a href=\"https://cmder.net/\">cmder</a> (Windows), <a href=\"https://www.iterm2.com/\">iTerm2</a> (MacOS), <a href=\"http://guake-project.org/\">Guake Terminal</a> (Linux).</li>\n<li><strong>Online</strong>: <a href=\"https://repl.it/languages/bash\">repl.it</a></li>\n</ul>\n<h2 id=\"hotkeys\">Hotkeys <a class=\"direct-link\" href=\"#hotkeys\">#</a></h2>\n<ul>\n<li><kbd>Ctrl</kbd> + <kbd>C</kbd> : interrupt current tasks.</li>\n<li><kbd>Ctrl</kbd> + <kbd>L</kbd> : clear the screen.</li>\n<li><kbd>Tab</kbd> : autocomplete the commands / directories / file names / ....</li>\n<li><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>V</kbd> : paste from clipboard.</li>\n<li>For a long list: <kbd>Enter</kbd> to continue to read, <kbd>q</kbd> to quit.</li>\n<li><kbd>Ctrl</kbd> + <kbd>A</kbd>: move cursor to the beginning of the line.</li>\n</ul>\n<h2 id=\"multiple-commands\">Multiple commands <a class=\"direct-link\" href=\"#multiple-commands\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># run at once</span><br>command_1 <span class=\"token operator\">&amp;&amp;</span> command_2</code></pre>\n<h2 id=\".sh-file\"><code>.sh</code> file <a class=\"direct-link\" href=\"#.sh-file\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># using script: file.sh</span><br><span class=\"token comment\">#!/bin/sh</span><br><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'some info'</span><br>command_1<br>command_2<br><br><span class=\"token comment\"># and then sh file.sh</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># with arguments</span><br><span class=\"token variable\">$file1</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$1</span><br><span class=\"token function\">wc</span> <span class=\"token variable\">$file1</span> <span class=\"token comment\"># word count</span><br><br><span class=\"token comment\"># multiple input args</span><br><span class=\"token keyword\">for</span> <span class=\"token for-or-select variable\">FILE1</span> <span class=\"token keyword\">in</span> <span class=\"token string\">\"<span class=\"token variable\">$@</span>\"</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">do</span><br>\t<span class=\"token function\">wc</span> <span class=\"token variable\">$FILE1</span><br><span class=\"token keyword\">done</span></code></pre>\n</div>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token assign-left variable\">NAME</span><span class=\"token operator\">=</span><span class=\"token string\">\"defaut\"</span> <span class=\"token comment\"># default value! DON'T HAVE SPACE!!!</span><br><span class=\"token comment\"># with flags</span><br><span class=\"token keyword\">while</span> <span class=\"token builtin class-name\">getopts</span> n:f: option<span class=\"token punctuation\">;</span> <span class=\"token keyword\">do</span><br>\t<span class=\"token keyword\">case</span> <span class=\"token string\">\"<span class=\"token variable\">${option}</span>\"</span><br>\t\t<span class=\"token keyword\">in</span><br>\t\t\tn<span class=\"token punctuation\">)</span> <span class=\"token assign-left variable\">NAME</span><span class=\"token operator\">=</span><span class=\"token variable\">${OPTARG}</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span><br>\t\t\tf<span class=\"token punctuation\">)</span> <span class=\"token assign-left variable\">FILE</span><span class=\"token operator\">=</span><span class=\"token variable\">${OPTARG}</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token keyword\">esac</span><br><span class=\"token keyword\">done</span><br><br><span class=\"token builtin class-name\">echo</span> <span class=\"token variable\">$NAME</span><br><span class=\"token function\">wc</span> <span class=\"token variable\">$FILE</span><br><br><span class=\"token comment\"># how to use?</span><br><span class=\"token function\">sh</span> test.sh -n <span class=\"token string\">\"ThiD\"</span> -f test.md</code></pre>\n<h2 id=\"search-%2F-grep-%2F-sed\">Search / grep / sed <a class=\"direct-link\" href=\"#search-%2F-grep-%2F-sed\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># all files / folders containing 'abc'</span><br><span class=\"token function\">ls</span> <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> -i abc</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># find command lines containing 'abc'</span><br>dpkg -l <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> -i abc</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># search and extract a part of result</span><br>pip show numpy<br><span class=\"token comment\"># Location: /usr/lib/python3/dist-packages</span><br>pip show numpy <span class=\"token operator\">|</span> <span class=\"token function\">sed</span> -n <span class=\"token string\">'s/Location: //p'</span><br><span class=\"token comment\"># /usr/lib/python3/dist-packages</span></code></pre>\n</div>\n<h2 id=\"check-info\">Check info <a class=\"direct-link\" href=\"#check-info\">#</a></h2>\n<h3 id=\"system\">System <a class=\"direct-link\" href=\"#system\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Change password</span><br><span class=\"token function\">passwd</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># DISK SPACE</span><br><span class=\"token function\">df</span> -h</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># like monitor</span><br><span class=\"token function\">top</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># MEM USAGE</span><br><span class=\"token function\">free</span> -m</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ALL ENV</span><br><span class=\"token function\">printenv</span><br><br><span class=\"token comment\"># add new</span><br><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">ABC</span><span class=\"token operator\">=</span>/xyz/thi/</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># NVIDIA</span><br>nvidia-smi<br>lspci -nn <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token string\">'\\[03'</span> <span class=\"token comment\"># another way</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># list of devices</span><br>lsusb</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># list display screen</span><br>xrandr --listactivemonitors</code></pre>\n</div>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># CPU</span><br><span class=\"token function\">cat</span> /proc/cpuinfo <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token string\">'model name'</span> <span class=\"token operator\">|</span> <span class=\"token function\">uniq</span> <span class=\"token comment\"># model</span><br><span class=\"token function\">cat</span> /proc/cpuinfo <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token string\">'vendor'</span> <span class=\"token operator\">|</span> <span class=\"token function\">uniq</span> <span class=\"token comment\"># vendor</span><br><span class=\"token function\">cat</span> /proc/cpuinfo <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> processor <span class=\"token operator\">|</span> <span class=\"token function\">wc</span> -l <span class=\"token comment\"># number of processes</span></code></pre>\n<h3 id=\"folders-%2F-files\">Folders / Files <a class=\"direct-link\" href=\"#folders-%2F-files\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># CHANGE ACTIVE DIR</span><br><span class=\"token builtin class-name\">cd</span> <span class=\"token operator\">&lt;</span>dir<span class=\"token operator\">></span><br><span class=\"token builtin class-name\">cd</span> <span class=\"token comment\"># to the startup dir</span><br><span class=\"token builtin class-name\">cd</span> / <span class=\"token comment\"># to root</span><br><span class=\"token builtin class-name\">cd</span> <span class=\"token punctuation\">..</span> <span class=\"token comment\"># to father dir</span><br><span class=\"token builtin class-name\">cd</span> - <span class=\"token comment\"># back to previous dir</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># CREATE NEW FOLDER</span><br><span class=\"token function\">mkdir</span> <span class=\"token operator\">&lt;</span>dir<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># LIST</span><br><span class=\"token function\">ls</span><br><span class=\"token function\">ls</span> -a <span class=\"token comment\"># including hidden</span><br><span class=\"token function\">ls</span> <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token string\">'ubuntu'</span> <span class=\"token comment\"># files containing 'ubuntu' in name</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># CURRENT PATH</span><br><span class=\"token builtin class-name\">pwd</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># FOLDER/FILE SIZE</span><br><span class=\"token function\">du</span> -hs <span class=\"token operator\">&lt;</span>directory / file<span class=\"token operator\">></span><br><span class=\"token comment\"># `h` : human readable (6.7G)</span><br><span class=\"token comment\"># `s` : display size</span><br><br><span class=\"token comment\"># all folders/files of current folder</span><br><span class=\"token function\">du</span> -hs * <span class=\"token operator\">|</span> <span class=\"token function\">sort</span> -rh<br><br><span class=\"token comment\"># only folders</span><br><span class=\"token function\">du</span> -sh ./*/<br><br><span class=\"token comment\"># only first 5 retrieves</span><br><span class=\"token function\">du</span> -h /home/thi/ <span class=\"token operator\">|</span> <span class=\"token function\">sort</span> -rh <span class=\"token operator\">|</span> <span class=\"token function\">head</span> -5</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># REMOVING</span><br><span class=\"token function\">rm</span> <span class=\"token operator\">&lt;</span>file<span class=\"token operator\">></span><br><span class=\"token function\">rm</span> -f <span class=\"token operator\">&lt;</span>file<span class=\"token operator\">></span> <span class=\"token comment\"># force to remove</span><br><span class=\"token function\">rm</span> -rf <span class=\"token operator\">&lt;</span>dir<span class=\"token operator\">></span> <span class=\"token comment\"># remove folder</span><br><span class=\"token function\">rmdir</span> <span class=\"token operator\">&lt;</span>empty-dir<span class=\"token operator\">></span> <span class=\"token comment\"># remove empty</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># COMPRESS</span><br><span class=\"token function\">zip</span> file.zip file/folder<br><span class=\"token function\">unzip</span> file.zip <span class=\"token comment\"># decompress</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># PRINT TREE folder structure</span><br>tree<br>tree -d <span class=\"token comment\"># only folders</span><br>tree -d -I <span class=\"token string\">'abc'</span> <span class=\"token comment\"># except folder \"abc\"</span><br>tree -I <span class=\"token string\">'abc|xyz'</span> <span class=\"token comment\"># except folder \"abc\" and \"xyz\"</span><br>tree -I <span class=\"token string\">'test_*|__pycache__|__init__.py'</span> <span class=\"token comment\"># use wildcat</span><br>tree -L <span class=\"token number\">2</span> <span class=\"token comment\"># level 2</span><br>tree -P <span class=\"token string\">'test_'</span> <span class=\"token comment\"># list only files starting with \"test_\"</span></code></pre>\n</div>\n<h3 id=\"permission\">Permission <a class=\"direct-link\" href=\"#permission\">#</a></h3>\n<p>👉 <a href=\"https://chmodcommand.com/\">Chmod code calculator</a>.</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># list of groups</span><br><span class=\"token function\">groups</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># which groups a user belongs to</span><br>group <span class=\"token operator\">&lt;</span>user_name<span class=\"token operator\">></span><br><span class=\"token function\">id</span> -nG <span class=\"token comment\"># or</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># check info of a current user</span><br><span class=\"token function\">id</span> <span class=\"token operator\">&lt;</span>user_name<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># list all members of a group</span><br><span class=\"token function\">grep</span> <span class=\"token operator\">&lt;</span>group_name<span class=\"token operator\">></span> /etc/group</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># CHECK PERMISSION</span><br><span class=\"token function\">ls</span> -l<br><span class=\"token function\">ls</span> -l <span class=\"token operator\">&lt;</span>file<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ADD existing USER to existing GROUP</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">usermod</span> -a -G groupName userName</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># CHANGE PERMISSION</span><br><span class=\"token function\">chown</span> <span class=\"token operator\">&lt;</span>user<span class=\"token operator\">></span>:<span class=\"token operator\">&lt;</span>group<span class=\"token operator\">></span> <span class=\"token function\">file</span><br><span class=\"token function\">chown</span> -R thi:root folder <span class=\"token comment\"># folder &amp; children</span></code></pre>\n</div>\n<h3 id=\"network\">Network <a class=\"direct-link\" href=\"#network\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># CHECK IP</span><br><span class=\"token function\">ifconfig</span><br>ipconfig <span class=\"token comment\"># windows</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># DOWNLOAD A FILE</span><br><span class=\"token function\">wget</span> https://website.com/filename.ext</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># open ports</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> nmap<br>nmap localhost</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># very simple server</span><br>python3 -m http.server <span class=\"token comment\"># localhost:8000</span><br>python3 -m http.server <span class=\"token number\">1337</span> <span class=\"token comment\"># localhost:1337</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># current running servers</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> net-tools<br><span class=\"token function\">netstat</span> -lepunt<br><br><span class=\"token comment\"># kill a process, e.g. 29231/ssh</span><br><span class=\"token function\">kill</span> <span class=\"token operator\">&lt;</span>pid<span class=\"token operator\">></span> <span class=\"token comment\"># eg. kill 29231</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># mb data used</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> vnstat<br>vnstat -d</code></pre>\n</div>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># INTERNET SPEED (need python)</span><br><span class=\"token function\">curl</span> -s https://raw.githubusercontent.com/sivel/speedtest-cli/master/speedtest.py <span class=\"token operator\">|</span> python -</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># (1st test on mac)</span><br><span class=\"token comment\"># Look for which ports are running</span><br><span class=\"token comment\"># Find their PID</span><br><span class=\"token comment\"># Kill them</span><br>brew <span class=\"token function\">install</span> nmap<br>nmap localhost<br><span class=\"token function\">lsof</span> -i:8080<br><span class=\"token function\">kill</span> <span class=\"token operator\">&lt;</span>PID<span class=\"token operator\">></span><br><br><span class=\"token comment\"># in case above command cannot solve the problem</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">lsof</span> -i -P <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token string\">\"8080\"</span></code></pre>\n<h3 id=\"text-file\">Text file <a class=\"direct-link\" href=\"#text-file\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># QUICK LOOK CONTENT</span><br><span class=\"token function\">more</span> file.txt<br><span class=\"token function\">cat</span> file.txt</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># JUST CREATE</span><br><span class=\"token function\">touch</span> file.txt</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># CREATE + MODIFY</span><br><span class=\"token function\">nano</span> file.txt <span class=\"token comment\"># Ctrl+X to quit</span><br><span class=\"token function\">vim</span> file.txt <span class=\"token comment\"># ESC, :q to quit</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># SEARCH STRING</span><br><span class=\"token function\">grep</span> <span class=\"token string\">\"string\"</span> file.txt</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ADD A LINE TO A FILE WITHOUT OPENNING IT</span><br><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"hello 'thi' world\"</span> <span class=\"token operator\">>></span> my_file.txt</code></pre>\n</div>\n<h3 id=\"images\">Images <a class=\"direct-link\" href=\"#images\">#</a></h3>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># open an image</span><br>eog image_file.jpg</code></pre>\n<h2 id=\"symbolic-link-(shortcut)\">Symbolic link (shortcut) <a class=\"direct-link\" href=\"#symbolic-link-(shortcut)\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">ln</span> -s original_folder sym_folder<br><br><span class=\"token comment\"># remove</span><br><span class=\"token function\">rm</span> sym_folder</code></pre>\n<h2 id=\"alias\">Alias <a class=\"direct-link\" href=\"#alias\">#</a></h2>\n<p>Create your own &quot;alias&quot; command for short,</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># CREATE</span><br><span class=\"token builtin class-name\">alias</span> <span class=\"token assign-left variable\">yourAlias</span><span class=\"token operator\">=</span><span class=\"token string\">'cd /usr/'</span><br><span class=\"token builtin class-name\">alias</span> <span class=\"token assign-left variable\">yourAlias</span><span class=\"token operator\">=</span>cd /usr/ <span class=\"token comment\"># windows</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># CALL</span><br>yourAlias</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># LIST OF ALIASES</span><br><span class=\"token builtin class-name\">alias</span><br><span class=\"token builtin class-name\">alias</span> abc <span class=\"token comment\"># \"abs\" stands for what?</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># remove an alias</span><br><span class=\"token builtin class-name\">unalias</span> abc</code></pre>\n</div>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># group of commands</span><br><span class=\"token function-name function\">my_alias</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token function\">screen</span> -S dat -dm <span class=\"token function\">bash</span> -c <span class=\"token string\">\"cd /dinhanhthi.com; iserve; exec sh\"</span><br><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># list of commands</span><br><span class=\"token function-name function\">my_alias</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><br>    <span class=\"token builtin class-name\">cd</span> /home/user/git/abc/<br>    <span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span><br>    <span class=\"token function\">git</span> commit -m <span class=\"token string\">\"abc\"</span><br>    <span class=\"token function\">git</span> push<br><span class=\"token punctuation\">}</span></code></pre>\n<p class=\"noindent\"></p>\n<ul>\n<li><strong>Linux</strong> / <strong>MacOS</strong>: Add your alias to <code>.bash_aliases</code> (in home dir, <code>printenv HOME</code>) if you wanna store your alias permanently.</li>\n<li><strong>Windows</strong>: Using <a href=\"https://cmder.net/\">cmder</a> (its <a href=\"/files/cmderSetting.xml\">setting file</a>), add more aliases to <code>&lt;cmder-install&gt;/config/user_aliases.cmd</code>. You can also add (automatically) on the cmder UI, it adds them for you to the <code>.cmd</code> file.</li>\n</ul>\n<h2 id=\"create-%2F-copy-%2F-cut-%2F-paste\">Create / Copy / Cut / Paste <a class=\"direct-link\" href=\"#create-%2F-copy-%2F-cut-%2F-paste\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Create a new folder</span><br><span class=\"token function\">mkdir</span> <span class=\"token operator\">&lt;</span>folder<span class=\"token operator\">></span><br><span class=\"token function\">mkdir</span> -p <span class=\"token operator\">&lt;</span>folder<span class=\"token operator\">></span> <span class=\"token comment\"># already exist accepted</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># MOVE</span><br><span class=\"token function\">mv</span> <span class=\"token operator\">&lt;</span>old-dir<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>new-dir<span class=\"token operator\">></span><br>move <span class=\"token operator\">&lt;</span>old-dir<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>new-dir<span class=\"token operator\">></span> <span class=\"token comment\"># windows</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># RENAME a file/folder</span><br><span class=\"token function\">mv</span> olname.txt newname.txt</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># COPY</span><br><span class=\"token function\">cp</span> <span class=\"token function\">file</span> <span class=\"token function\">file</span><br><span class=\"token function\">cp</span> -r <span class=\"token function\">file</span><span class=\"token operator\">&amp;</span><span class=\"token function\">dir</span> <span class=\"token function\">file</span><span class=\"token operator\">&amp;</span><span class=\"token function\">dir</span></code></pre>\n</div>\n<h2 id=\"display\">Display <a class=\"direct-link\" href=\"#display\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># only display 3 last directory names</span><br><span class=\"token assign-left variable\">PROMPT_DIRTRIM</span><span class=\"token operator\">=</span><span class=\"token number\">3</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># display only user:current_folder#</span><br><span class=\"token assign-left variable\"><span class=\"token environment constant\">PS1</span></span><span class=\"token operator\">=</span><span class=\"token string\">'\\u:\\W\\$ '</span></code></pre>\n</div>\n<h2 id=\"references\">References <a class=\"direct-link\" href=\"#references\">#</a></h2>\n<ul>\n<li><a href=\"https://www.lifewire.com/pass-arguments-to-bash-script-2200571\">How to Pass Arguments to a Bash Script</a></li>\n</ul>\n",
      "date_published": "2020-03-21T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/wordpress-installation/",
      "url": "https://dinhanhthi.com/wordpress-installation/",
      "title": "Wordpress Installation",
      "content_html": "<p>I create <a href=\"https://github.com/dinhanhthi/math2itwp\">Math2ITwp</a> theme for <a href=\"https://math2it.com\">math2it.com</a> from scratch. This note contains the basic things to create a theme like that.</p>\n<p>👉 Note: <a href=\"/tags/wordpress/\">All notes of Wordpress</a>.</p>\n<h2 id=\"install-apache-%2B-mysql-%2B-php.\">Install Apache + MySQL + PHP. <a class=\"direct-link\" href=\"#install-apache-%2B-mysql-%2B-php.\">#</a></h2>\n<h3 id=\"linux\">Linux <a class=\"direct-link\" href=\"#linux\">#</a></h3>\n<p>Below are the short steps from <a href=\"https://www.digitalocean.com/community/tutorials/how-to-install-linux-apache-mysql-php-lamp-stack-ubuntu-18-04\">this post</a>.</p>\n<div class=\"hsbox\"><div class=\"hs__title\">Install <strong>Apache2</strong> + <strong>MySQL</strong></div><div class=\"hs__content\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># upate system</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update<br><br><span class=\"token comment\"># install apache2</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> apache2<br><br><span class=\"token comment\"># Adjust the Firewall to Allow Web Traffic</span><br><span class=\"token function\">sudo</span> ufw app list<br><span class=\"token function\">sudo</span> ufw app info <span class=\"token string\">\"Apache Full\"</span> <span class=\"token comment\"># it should show that it enables traffic to ports 80 and 443</span><br><span class=\"token function\">sudo</span> ufw allow <span class=\"token keyword\">in</span> <span class=\"token string\">\"Apache Full\"</span><br><br><span class=\"token comment\"># try browsing http://localhost</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install mysql</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> mysql-server<br><br><span class=\"token comment\"># setup mysql (choose Y for all, set passwords if neccessary)</span><br><span class=\"token function\">sudo</span> mysql_secure_installation<br><span class=\"token function\">sudo</span> mysql<br>SELECT user,authentication_string,plugin,host FROM mysql.user<span class=\"token punctuation\">;</span><br><span class=\"token comment\"># change 'YourPassword' with your own password!!!</span><br>ALTER <span class=\"token environment constant\">USER</span> <span class=\"token string\">'root'</span>@<span class=\"token string\">'localhost'</span> IDENTIFIED WITH mysql_native_password BY <span class=\"token string\">'YourPassword'</span><span class=\"token punctuation\">;</span><br>FLUSH PRIVILEGES<span class=\"token punctuation\">;</span><br><span class=\"token comment\"># verify that 'root' has 'mysql_native_password' in filed 'plugin'</span><br>SELECT user,authentication_string,plugin,host FROM mysql.user<span class=\"token punctuation\">;</span><br><span class=\"token builtin class-name\">exit</span></code></pre>\n<p>After set a new password to <code>root</code> user of mysql, instead of using <code>sudo mysql</code>, you have to use following command to access mysql with the root</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">mysql -u root -p <span class=\"token comment\"># and then type the new password (YourPassword above)!</span></code></pre>\n</div></div>\n<div class=\"hsbox\"><div class=\"hs__title\">Install <strong>PHP</strong></div><div class=\"hs__content\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install php</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> php libapache2-mod-php php-mysql<br><br><span class=\"token comment\"># tell web server to prefer .php file</span><br><span class=\"token function\">sudo</span> gedit /etc/apache2/mods-enabled/dir.conf<br><span class=\"token comment\"># find IfModule mod_dir.c and move index.php to the first</span><br><span class=\"token comment\"># restart apache webserver</span><br><span class=\"token function\">sudo</span> systemctl restart apache2<br><br><span class=\"token comment\"># check status on apache2</span><br><span class=\"token function\">sudo</span> systemctl status apache2 <span class=\"token comment\"># press Q to exit</span><br><br><span class=\"token comment\"># install some additional modules</span><br><span class=\"token function\">apt</span> search php- <span class=\"token operator\">|</span> <span class=\"token function\">less</span> <span class=\"token comment\"># press Q to quit</span></code></pre>\n<p>Testing a php file in <code>/var/www/html/</code></p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> gedit /var/www/html/info.php</code></pre>\n<p>and paste</p>\n<pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span><br><span class=\"token function\">phpinfo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token delimiter important\">?></span></span></code></pre>\n<p>Goto <code>localhost/phpmyadmin</code> to test.</p>\n</div></div>\n<div class=\"hsbox\"><div class=\"hs__title\">Install <strong>phpMyAdmin</strong></div><div class=\"hs__content\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install phpmyadmin</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update<br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> phpmyadmin php-mbstring php-gettext<br><span class=\"token comment\"># choose apache2 as default if you are asked for this</span><br><br><span class=\"token comment\"># enable the mbstring PHP extension</span><br><span class=\"token function\">sudo</span> phpenmod mbstring<br><br><span class=\"token comment\"># restart Apache for your changes to be recognized</span><br><span class=\"token function\">sudo</span> systemctl restart apache2</code></pre>\n<p>If you meet error <code>ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)</code>, follow <a href=\"https://stackoverflow.com/a/48748685/1323473\">this help</a> on stackoverflow.</p>\n<p>If you have error <code>Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock'</code>, check <a href=\"https://stackoverflow.com/questions/11990708/error-cant-connect-to-local-mysql-server-through-socket-var-run-mysqld-mysq\">this</a>.</p>\n<p><strong>All above errors</strong>: Try to remove and reinstall again mysql and</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> remove --purge mysql*<br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> autoremove<br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> autoclean<br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> mysql-server mysql-client</code></pre>\n</div></div>\n<div class=\"hsbox\"><div class=\"hs__title\">Working in MySQL</div><div class=\"hs__content\"><p>Login to mysql</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">mysql -u root -p</code></pre>\n<p>See the list of current user in mysql</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># in the mysql environment</span><br>SELECT user,authentication_string,plugin,host FROM mysql.user<span class=\"token punctuation\">;</span></code></pre>\n<p>Create a new user and give it a strong password</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">CREATE <span class=\"token environment constant\">USER</span> <span class=\"token string\">'thi'</span>@<span class=\"token string\">'localhost'</span> IDENTIFIED BY <span class=\"token string\">'YourPassword'</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Grant your new user appropriate privileges</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">GRANT ALL PRIVILEGES ON *.* TO <span class=\"token string\">'thi'</span>@<span class=\"token string\">'localhost'</span> WITH GRANT OPTION<span class=\"token punctuation\">;</span></code></pre>\n<p>After installing phpmyadmin, there has to be an user <code>phpmyadmin</code> in the list of user of mysql, if not, you need to create a such user and give it grant control like above.</p>\n<p>Go to <code>http://localhost/phpmyadmin</code>. Login with your user and password you created above (<code>thi</code> for example).</p>\n</div></div>\n<div class=\"hsbox\"><div class=\"hs__title\">Change <strong>apache2</strong> root document</div><div class=\"hs__content\"><ul>\n<li>The Apache server is installed on <code>/var/www/html</code>.</li>\n<li>Simply download <a href=\"https://github.com/hsb4995/Apachange\">this tool</a> and follow the instructions. You can also check the author's <a href=\"https://askubuntu.com/a/738527/248456\">answer</a> on SE.</li>\n</ul>\n</div></div>\n<h3 id=\"windows\">Windows <a class=\"direct-link\" href=\"#windows\">#</a></h3>\n<ol>\n<li>Download and install <a href=\"http://www.wampserver.com/en/\">WampServer</a>.</li>\n<li>By default, after installing, your site will be at <code>C:\\wamp64\\www</code>.</li>\n<li>Run WarmServer, an <strong>green</strong> icon on the right of taskbar will appear.</li>\n</ol>\n<h3 id=\"macos\">MacOS <a class=\"direct-link\" href=\"#macos\">#</a></h3>\n<ol>\n<li>Install <a href=\"https://www.mamp.info/en/downloads/\">MAMP</a>.</li>\n<li>Follow <a href=\"https://www.taniarascia.com/local-environment/\">this post</a>.</li>\n</ol>\n<h3 id=\"php-executable-(optional)\">PHP executable (optional) <a class=\"direct-link\" href=\"#php-executable-(optional)\">#</a></h3>\n<p>Just for running PHP + <code>PHP IntelliSense</code> on <a href=\"/visual-studio-code\">Visual Studio Code</a>.</p>\n<ol>\n<li>\n<p><a href=\"https://windows.php.net/download/\">Download PHP</a> (Windows, portable).</p>\n</li>\n<li>\n<p>Put below lines in VSC setting file (change the path to yours).</p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span><br><span class=\"token property\">\"php.validate.executablePath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"C:\\\\wamp64\\\\bin\\\\php\\\\php7.0.4\\\\php.exe\"</span><span class=\"token punctuation\">,</span><br><span class=\"token property\">\"php.executablePath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"C:\\\\wamp64\\\\bin\\\\php\\\\php7.0.4\\\\php.exe\"</span><br><span class=\"token punctuation\">}</span></code></pre>\n</li>\n</ol>\n<h2 id=\"create-local-database-%2B-wordpress\">Create local database + Wordpress <a class=\"direct-link\" href=\"#create-local-database-%2B-wordpress\">#</a></h2>\n<h3 id=\"create-a-database\">Create a database <a class=\"direct-link\" href=\"#create-a-database\">#</a></h3>\n<div class=\"hsbox\"><div class=\"hs__title\">Only for Linux</div><div class=\"hs__content\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Sign in to MySQL</span><br>mysql -u root -p<br><br><span class=\"token comment\"># Check the list of users</span><br>SELECT user,authentication_string,plugin,host FROM mysql.user<span class=\"token punctuation\">;</span><br><br><br><span class=\"token comment\"># Create a new user `thi` and assign to this user a password, e.g. `thipassword`</span><br>CREATE <span class=\"token environment constant\">USER</span> <span class=\"token string\">'thi'</span>@<span class=\"token string\">'localhost'</span> IDENTIFIED BY <span class=\"token string\">'thipassword'</span><span class=\"token punctuation\">;</span><br><br><span class=\"token comment\"># Set the orivileges to this user</span><br>GRANT ALL PRIVILEGES ON *.* TO <span class=\"token string\">'thi'</span>@<span class=\"token string\">'localhost'</span> WITH GRANT OPTION<span class=\"token punctuation\">;</span></code></pre>\n</div></div>\n<ol>\n<li>Open <a href=\"http://localhost/phpmyadmin/\"><code>http://localhost/phpmyadmin/</code></a>,</li>\n<li>Create a new database <code>testing_db</code> (remember to choose <code>utf8_general_ci</code> before pressing <strong>Create</strong>)</li>\n<li>Create a new user <code>thi</code> with <code>ALL PRIVILEGES</code> (click on <strong>Check all</strong>).</li>\n</ol>\n<h3 id=\"install-wordpress\">Install Wordpress <a class=\"direct-link\" href=\"#install-wordpress\">#</a></h3>\n<ol>\n<li>Download <a href=\"https://wordpress.org/download/\">Wordpress</a>.</li>\n<li>Create a folder <code>thi</code> in <code>C:\\wamp64\\www</code> (Windows), <code>/var/www/html</code> (Linux).</li>\n<li>Extract the content (<code>wp-admin</code>, <code>wp-content</code>,...) of the zip file downloaded in step 1 to <code>/thi/</code>.</li>\n<li>Go to <a href=\"http://localhost/thi\"><code>http://localhost/thi</code></a> and follow the instructions.</li>\n<li>Type the username and password you created (<code>thi</code> and <code>thipassword</code>).</li>\n<li>Press Install and wait.</li>\n<li>Login with username and password.</li>\n<li>All the configuration is at <a href=\"http://localhost/texmath/wp-admin/\"><code>http://localhost/texmath/wp-admin/</code></a>.</li>\n</ol>\n<h2 id=\"clone-a-website-to-localhost\">Clone a website to localhost <a class=\"direct-link\" href=\"#clone-a-website-to-localhost\">#</a></h2>\n<ol>\n<li>Install <a href=\"#install-apache--mysql--php\">Apache + MySQL + PHP</a>.</li>\n<li><a href=\"#create-local-database--wordpress\">Create database + install Wordpress</a>.</li>\n<li>At least, you have a workable site at <a href=\"http://localhost/thi/\"><code>http://localhost/thi/</code></a>.</li>\n<li>Download and install an FTP app like <a href=\"WinSCP\">WinSCP</a> (Windows) or <a href=\"https://filezilla-project.org/download.php?platform=linux\">FileZilla</a> or <a href=\"%5BTransmit%5D(https://panic.com/transmit/)\">Transmit</a>.</li>\n<li>Download the current theme on the remote to local. The theme is located at <code>/wp-content/themes/</code>.</li>\n<li>Clone database from remote site to local by using plugin <a href=\"https://wordpress.org/plugins/all-in-one-wp-migration/\">All-in-One WP Migration</a>. More detailed guid: <a href=\"https://wpshout.com/quick-guides/all-in-one-wp-migration/\">English</a>, <a href=\"https://wiki.matbao.net/kb/huong-dan-chuyen-du-lieu-website-wordpress-bang-plugin-all-in-one-wp-migration/\">Vietnamese</a>. If your site's too big, exlude the media files and copy them later. They're all in <code>wp-content/uploads</code>.</li>\n<li>Note that, you have to use <code>username</code> and <code>password</code> given in the downloaded database instead of the one you created on localhost.</li>\n<li>Enable the downloaded theme in <code>/wp-admin</code>.</li>\n</ol>\n",
      "date_published": "2020-03-19T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/pytest/",
      "url": "https://dinhanhthi.com/pytest/",
      "title": "Pytest",
      "content_html": "<h2 id=\"install\">Install <a class=\"direct-link\" href=\"#install\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\">pip <span class=\"token function\">install</span> pytest</code></pre>\n<h2 id=\"rules\">Rules <a class=\"direct-link\" href=\"#rules\">#</a></h2>\n<ul>\n<li>Name all <strong>testing files</strong> with<sup><a href=\"https://docs.pytest.org/en/latest/goodpractices.html#test-discovery\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup> <code>test_*.py</code> or <code>*_test.py</code>.</li>\n<li>Name all &quot;be tested&quot; functions with <code>def test_*</code>.</li>\n</ul>\n<h2 id=\"executing\">Executing <a class=\"direct-link\" href=\"#executing\">#</a></h2>\n<ul>\n<li><code>-rf</code>: list files having bugs.</li>\n<li><a href=\"https://docs.pytest.org/en/reorganize-docs/new-docs/user/commandlineuseful.html\">Most useful command lines</a>.</li>\n</ul>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\">pytest test_sample.py<br>pytest -q test_sample.py <span class=\"token comment\"># quiet mode</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ignore all files in folder statistics</span><br>pytest -k <span class=\"token string\">\"not statistics\"</span></code></pre>\n</div>\n<h2 id=\"simple\">Simple <a class=\"direct-link\" href=\"#simple\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># test_sample.py</span><br><span class=\"token keyword\">def</span> <span class=\"token function\">func</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">return</span> x <span class=\"token operator\">+</span> <span class=\"token number\">1</span><br><br><span class=\"token keyword\">def</span> <span class=\"token function\">test_answer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">assert</span> func<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">5</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># then run</span><br>pytest test_sample.py</code></pre>\n<h2 id=\"with-parameters\">With parameters <a class=\"direct-link\" href=\"#with-parameters\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># test_sample.py</span><br><span class=\"token decorator annotation punctuation\">@pytest<span class=\"token punctuation\">.</span>mark<span class=\"token punctuation\">.</span>parametrize</span><span class=\"token punctuation\">(</span><br>    <span class=\"token string\">\"input, param_1, param_2, result\"</span><span class=\"token punctuation\">,</span><br>    <span class=\"token punctuation\">[</span><br>        <span class=\"token punctuation\">(</span>df_1<span class=\"token punctuation\">,</span> <span class=\"token string\">'date'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">,</span> df_result_1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>        <span class=\"token punctuation\">(</span>df_2<span class=\"token punctuation\">,</span> <span class=\"token string\">'date'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">,</span> df_result_2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    <span class=\"token punctuation\">]</span><br><span class=\"token punctuation\">)</span><br><br><span class=\"token keyword\">def</span> <span class=\"token function\">test_run</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">,</span> param_1<span class=\"token punctuation\">,</span> param_2<span class=\"token punctuation\">,</span> result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    spts <span class=\"token operator\">=</span> SPTS<span class=\"token punctuation\">(</span>param_1<span class=\"token operator\">=</span>param_1<span class=\"token punctuation\">,</span> param_2<span class=\"token operator\">=</span>param_2<span class=\"token punctuation\">)</span><br>    df_tmp <span class=\"token operator\">=</span> spts<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">assert</span> <span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>df_tmp<span class=\"token punctuation\">,</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">assert</span> df_tmp<span class=\"token punctuation\">.</span>equals<span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># To get all combinations</span><br><span class=\"token decorator annotation punctuation\">@pytest<span class=\"token punctuation\">.</span>mark<span class=\"token punctuation\">.</span>parametrize</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"x\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br><span class=\"token decorator annotation punctuation\">@pytest<span class=\"token punctuation\">.</span>mark<span class=\"token punctuation\">.</span>parametrize</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"y\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br><br><span class=\"token keyword\">def</span> <span class=\"token function\">test_foo</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">pass</span><br><br><span class=\"token comment\"># Then the arguments set to `x=0/y=2`,</span><br><span class=\"token comment\">#    `x=1/y=2`, `x=0/y=3`, and `x=1/y=3`.</span></code></pre>\n</div>\n<p>Note that, <code>@pytest.mark.parametrize</code> must be placed right before the function who uses it. Otherwise, there is an error <code>fixture not found</code>.</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># ERROR</span><br><span class=\"token decorator annotation punctuation\">@pytest<span class=\"token punctuation\">.</span>mark<span class=\"token punctuation\">.</span>parametrize</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"x\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">def</span> <span class=\"token function\">test_foo</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">pass</span><br><br><span class=\"token keyword\">def</span> <span class=\"token function\">test_bar</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">pass</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># FIX</span><br><span class=\"token decorator annotation punctuation\">@pytest<span class=\"token punctuation\">.</span>mark<span class=\"token punctuation\">.</span>parametrize</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"x\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">def</span> <span class=\"token function\">test_foo</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">pass</span><br><br><span class=\"token decorator annotation punctuation\">@pytest<span class=\"token punctuation\">.</span>fixture</span><br><span class=\"token keyword\">def</span> <span class=\"token function\">test_bar</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">pass</span></code></pre>\n</div>\n<h2 id=\"custom-marker\">Custom marker <a class=\"direct-link\" href=\"#custom-marker\">#</a></h2>\n<p>Run tests who have a specific marker.<sup><a href=\"https://docs.pytest.org/en/latest/example/markers.html#mark-examples\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token decorator annotation punctuation\">@pytest<span class=\"token punctuation\">.</span>mark<span class=\"token punctuation\">.</span>marker_1</span><br><span class=\"token keyword\">def</span> <span class=\"token function\">test_func1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">pass</span><br><br><span class=\"token decorator annotation punctuation\">@pytest<span class=\"token punctuation\">.</span>mark<span class=\"token punctuation\">.</span>marker_2</span><br><span class=\"token keyword\">def</span> <span class=\"token function\">test_func2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">pass</span><br><br><span class=\"token decorator annotation punctuation\">@pytest<span class=\"token punctuation\">.</span>mark<span class=\"token punctuation\">.</span>marker_1</span><br><span class=\"token keyword\">def</span> <span class=\"token function\">test_func3</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">pass</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># with tag 'marker_1'</span><br>pytest <span class=\"token operator\">-</span>v <span class=\"token operator\">-</span>m marker_1<br><br><span class=\"token comment\"># except tag 'marker_1'</span><br>pytest <span class=\"token operator\">-</span>v <span class=\"token operator\">-</span>m <span class=\"token string\">'not marker_1'</span></code></pre>\n</div>\n<h2 id=\"errors\">Errors <a class=\"direct-link\" href=\"#errors\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ImportError: No module named atomicwrites</span><br>python -m pytest<br>python3 -m pytest</code></pre>\n<h2 id=\"ignore-warning\">Ignore warning <a class=\"direct-link\" href=\"#ignore-warning\">#</a></h2>\n<p>👉 <a href=\"https://docs.pytest.org/en/latest/warnings.html\">Main reference</a>.</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># eg: RuntimeWarning: numpy.ufunc size changed,</span><br><span class=\"token decorator annotation punctuation\">@pytest<span class=\"token punctuation\">.</span>mark<span class=\"token punctuation\">.</span>filterwarnings</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ignore::RuntimeWarning'</span><span class=\"token punctuation\">)</span><br><span class=\"token decorator annotation punctuation\">@pytest<span class=\"token punctuation\">.</span>mark<span class=\"token punctuation\">.</span>level_1</span><br><span class=\"token keyword\">def</span> <span class=\"token function\">test_load</span><span class=\"token punctuation\">(</span>df_test<span class=\"token punctuation\">,</span> report<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></code></pre>\n<h2 id=\"references\">References <a class=\"direct-link\" href=\"#references\">#</a></h2>\n<ul>\n<li>pytest <a href=\"https://docs.pytest.org/en/latest/contents.html\">official docs</a>.</li>\n</ul>\n",
      "date_published": "2020-03-16T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/visual-studio-code/",
      "url": "https://dinhanhthi.com/visual-studio-code/",
      "title": "VSCode",
      "content_html": "<h2 id=\"install\">Install <a class=\"direct-link\" href=\"#install\">#</a></h2>\n<p>Download and install <a href=\"https://code.visualstudio.com/\">here</a>.</p>\n<h2 id=\"extensions\">Extensions <a class=\"direct-link\" href=\"#extensions\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># list the installed extensions</span><br><span class=\"token comment\"># unix</span><br>code --list-extensions <span class=\"token operator\">|</span> <span class=\"token function\">xargs</span> -L <span class=\"token number\">1</span> <span class=\"token builtin class-name\">echo</span> code --install-extension<br><span class=\"token comment\"># windows</span><br>code --list-extensions <span class=\"token operator\">|</span> % <span class=\"token punctuation\">{</span> <span class=\"token string\">\"code --install-extension <span class=\"token variable\">$_</span>\"</span> <span class=\"token punctuation\">}</span><br><br><span class=\"token comment\"># To re-install on a new machine</span><br><span class=\"token comment\"># just copy-paste the results and run on terminal</span></code></pre>\n<div class=\"hsbox\"><div class=\"hs__title\">My favorite extensios</div><div class=\"hs__content\"><pre class=\"language-bash\"><code class=\"language-bash\">code --install-extension bierner.markdown-emoji<br>code --install-extension bierner.markdown-preview-github-styles<br>code --install-extension CoenraadS.bracket-pair-colorizer<br>code --install-extension eamodio.gitlens<br>code --install-extension formulahendry.auto-close-tag<br>code --install-extension himanoa.Python-autopep8<br>code --install-extension James-Yu.latex-workshop<br>code --install-extension lextudio.restructuredtext<br>code --install-extension mdickin.markdown-shortcuts<br>code --install-extension mhutchie.git-graph<br>code --install-extension mrmlnc.vscode-apache<br>code --install-extension ms-azuretools.vscode-docker<br>code --install-extension ms-mssql.mssql<br>code --install-extension ms-python.python<br>code --install-extension ms-vscode-remote.remote-containers<br>code --install-extension ms-vscode-remote.remote-ssh<br>code --install-extension ms-vscode-remote.remote-ssh-edit<br>code --install-extension ms-vscode-remote.remote-wsl<br>code --install-extension ms-vscode-remote.vscode-remote-extensionpack<br>code --install-extension Perkovec.emoji<br>code --install-extension ritwickdey.live-sass<br>code --install-extension ritwickdey.LiveServer<br>code --install-extension ronnidc.nunjucks<br>code --install-extension SolarLiner.linux-themes<br>code --install-extension streetsidesoftware.code-spell-checker<br>code --install-extension yzhang.markdown-all-in-one<br>code --install-extension zxh404.vscode-proto3</code></pre>\n</div></div>\n<h3 id=\"restructuredtext\">reStructuredText <a class=\"direct-link\" href=\"#restructuredtext\">#</a></h3>\n<p><code>preview engine sphinx is not installed</code> =&gt; in Ubuntu 20.04+</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> python-is-python3<br><span class=\"token comment\"># prevent Python 2 from being installed as a dependency of something</span><br><span class=\"token function\">sudo</span> apt-mark hold python2 python2-minimal python2.7 python2.7-minimal libpython2-stdlib libpython2.7-minimal libpython2.7-stdlib</code></pre>\n<h2 id=\"add-extra-path-to-auto-complete\">Add extra path to auto complete <a class=\"direct-link\" href=\"#add-extra-path-to-auto-complete\">#</a></h2>\n<p>Open <code>settings.json</code> and add,</p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span><br>\t<span class=\"token property\">\"python.autoComplete.extraPaths\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><br>\t\t<span class=\"token string\">\"C:\\\\Users\\\\dinha\\\\Documents\\\\GitHub\\\\dataswati\\\\python-dataswati\"</span><br>\t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><br><span class=\"token punctuation\">}</span></code></pre>\n<h3 id=\"fix-pylint-unable-to-import\">Fix Pylint unable to import <a class=\"direct-link\" href=\"#fix-pylint-unable-to-import\">#</a></h3>\n<p>Open <code>settings.json</code> and add,</p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"python.linting.pylintArgs\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><br>\t<span class=\"token string\">\"--init-hook\"</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token string\">\"import sys; sys.path.append('C:\\\\Users\\\\dinha\\\\Documents\\\\GitHub\\\\dataswati\\\\python-dataswati')\"</span><br><span class=\"token punctuation\">]</span></code></pre>\n<h2 id=\"appearances\">Appearances <a class=\"direct-link\" href=\"#appearances\">#</a></h2>\n<h3 id=\"change-font-for-internal-terminal\">Change font for internal terminal <a class=\"direct-link\" href=\"#change-font-for-internal-terminal\">#</a></h3>\n<p>Make a good corresponding to <a href=\"/terminal#zsh-linux\">zsh</a>.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Open settings JSON</span><br><span class=\"token string\">\"terminal.integrated.cursorStyle\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"line\"</span>,<br><span class=\"token string\">\"terminal.integrated.fontFamily\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"Source Code Pro Medium\"</span>,<br><span class=\"token string\">\"terminal.integrated.fontSize\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token number\">18</span><br><br><span class=\"token comment\"># on MacOSX</span><br><span class=\"token string\">\"terminal.integrated.fontFamily\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"Source Code Pro for Powerline\"</span>,<br><span class=\"token string\">\"terminal.integrated.fontSize\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token number\">16</span></code></pre>\n<h3 id=\"enable-font-ligatures\">Enable font ligatures <a class=\"direct-link\" href=\"#enable-font-ligatures\">#</a></h3>\n<p>👉 <a href=\"https://dev.to/macmacky/my-vscode-shortcuts-settings-and-extensions-for-productivity-3chd\">Reference</a>.</p>\n<p>For example, you type <kbd>=</kbd> + <kbd>&gt;</kbd>, it becomes <code>⇒</code>.</p>\n<ol>\n<li>\n<p>Download <a href=\"https://www.fontsquirrel.com/fonts/fira-code\">Fira Code Font</a>.</p>\n</li>\n<li>\n<p>Extract and then install the font after that.</p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span><br><span class=\"token property\">\"editor.fontFamily\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"'Fira Code', 'Consolas', 'Courier New', monospace\"</span><span class=\"token punctuation\">,</span><br><span class=\"token property\">\"editor.fontLigatures\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><br><span class=\"token punctuation\">}</span></code></pre>\n</li>\n<li>\n<p>Reload VSC.</p>\n</li>\n</ol>\n<p>💡 If you only wanna apply this setting for some file format, you can click on the language at the bottom right of VSC, then click <strong>Configure 'Markdown' language based setting</strong>.</p>\n<h2 id=\"regular-expression\">Regular Expression <a class=\"direct-link\" href=\"#regular-expression\">#</a></h2>\n<p><a href=\"https://docs.microsoft.com/en-us/visualstudio/ide/using-regular-expressions-in-visual-studio?view=vs-2017\">Official doc</a> of using regex in vscode.</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Replace</span><br>http://bit.ly/abc<br><span class=\"token comment\"># with</span><br><span class=\"token punctuation\">[</span>http://bit.ly/abc<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>http://bit.ly/abc<span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># find box</span><br><span class=\"token punctuation\">(</span>http://bit.ly.*<span class=\"token punctuation\">)</span><br><span class=\"token comment\"># replace box</span><br><span class=\"token punctuation\">[</span><span class=\"token variable\">$1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$1</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Replace</span><br>**Course <span class=\"token number\">1</span>**<br><span class=\"token comment\"># with</span><br>Course <span class=\"token number\">1</span><br><br><span class=\"token comment\"># Find box</span><br><span class=\"token punctuation\">\\</span>*<span class=\"token punctuation\">\\</span>*Course <span class=\"token punctuation\">(</span>.*<span class=\"token punctuation\">)</span><span class=\"token punctuation\">\\</span>*<span class=\"token punctuation\">\\</span>*<br><span class=\"token comment\"># replace box</span><br>Course <span class=\"token variable\">$1</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Replace</span><br>::: col-2-equal<br>content</code></pre>\n</div>\n<h1 id=\"with\">with <a class=\"direct-link\" href=\"#with\">#</a></h1>\n<div class=\"col-2-equal\">\n<p>content</p>\n</div>\n<h1 id=\"in-find-box--%3E-the-key%3A-%5B%5Cs%5Cs%5Cr%5D*%3F\">In find box -&gt; the key: [\\s\\S\\r]*? <a class=\"direct-link\" href=\"#in-find-box--%3E-the-key%3A-%5B%5Cs%5Cs%5Cr%5D*%3F\">#</a></h1>\n<p>::: col-2-equal([\\s\\S\\r]*?):::</p>\n<h1 id=\"in-replace-box\">In replace box <a class=\"direct-link\" href=\"#in-replace-box\">#</a></h1>\n<div class=\"col-2-equal\">\\n$1</div>\n```\n:::\n<h2 id=\"exlude-files%2Ffolders-in-file-search-visual-studio-code-(vsc)\">Exlude files/folders in file search Visual Studio Code (VSC) <a class=\"direct-link\" href=\"#exlude-files%2Ffolders-in-file-search-visual-studio-code-(vsc)\">#</a></h2>\n<p>Go to <strong>Preferences</strong> &gt; <strong>Settings</strong> &gt; search <code>exclude</code> and modify inside section <code>Search: Exclude</code>. More patterns can be found <a href=\"https://code.visualstudio.com/docs/editor/codebasics#_advanced-search-options\">here</a>.</p>\n<p>Below is an example list,</p>\n<pre><code>**/node_modules\n**/bower_components\n**/*.code-search\n**/_site\n**/.jekyll-cache\n**/.sass-cache\n**/*.ico\n**/*.png\n**/*.ipynb\n**/*.jpg\n**/*.jpeg\n**/*.svg\n</code></pre>\n<h2 id=\"connect-ssh-folders-in-vsc\">Connect <code>ssh</code> folders in VSC <a class=\"direct-link\" href=\"#connect-ssh-folders-in-vsc\">#</a></h2>\n<p>Read <a href=\"https://code.visualstudio.com/blogs/2019/07/25/remote-ssh\">this tutorial</a>.</p>\n<ol>\n<li>Install extension <a href=\"https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-ssh\">Remote - SSH</a></li>\n<li><strong>View</strong> &gt; <strong>Command Palette...</strong> &gt; type &quot;SSH&quot; and choose &quot;<em>Remote-SSH: Connect to Host...</em>&quot; &gt; choose &quot;<em>+ Add New SSH Host...</em>&quot;</li>\n<li>Type <code>ssh user@host</code> &gt; <kbd>Enter</kbd> &gt; choose a file to be updated, e.g. <code>~/.ssh/config</code>.</li>\n<li>Click <strong>Connect</strong> if there is any popup in VSC.</li>\n<li>Choose platform on the server, usually Linux.</li>\n</ol>\n<h3 id=\"error%3F\">Error? <a class=\"direct-link\" href=\"#error%3F\">#</a></h3>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Could not establish connection to \"undefined\". Could not resolve hostname.</span><br><span class=\"token comment\"># ref: https://github.com/microsoft/vscode-remote-release/issues/1047</span><br><br><span class=\"token comment\"># Open config ssh file</span><br><span class=\"token comment\"># Ctrl+Shift+P then \"Remote-SSH: Open Configuration File\"</span><br><br><span class=\"token comment\"># In stead of</span><br>Host XXX.XXX.XXX.XXX<br>User bob<br>Port <span class=\"token number\">22</span><br>IdentityFile ~/.ssh/id<br><br><span class=\"token comment\"># use this</span><br>Host server_name <span class=\"token comment\"># Do not put ip here</span><br>HostName XXX.XXX.XXX.XXX <span class=\"token comment\"># But put it here</span><br>User bob<br>Port <span class=\"token number\">22</span><br>IdentityFile ~/.ssh/id<br><br><span class=\"token comment\"># Then Ctrl+Shift+P > \"Remote-SSH: Connect to host\"</span><br><span class=\"token comment\"># Pick \"server_name\"</span></code></pre>\n<h2 id=\"settings\">Settings <a class=\"direct-link\" href=\"#settings\">#</a></h2>\n<p>👉 Check <a href=\"https://github.com/dinhanhthi/scripts/blob/master/settings/VSC_settings.json\">this file</a>.</p>\n<p>Use settings for a custom file extension,</p>\n<pre class=\"language-json\"><code class=\"language-json\"># the list of extension name will be showed when typing<br><span class=\"token property\">\"[markdown]\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token property\">\"editor.tabSize\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br><span class=\"token property\">\"[restructuredtext]\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token property\">\"editor.wordWrap\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"on\"</span><span class=\"token punctuation\">,</span><br><span class=\"token punctuation\">}</span></code></pre>\n<h2 id=\"pylint\">Pylint <a class=\"direct-link\" href=\"#pylint\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># _Unable to import_ some user-defined package</span><br><span class=\"token comment\"># 1. Make sure the right env running in vscode</span><br><span class=\"token comment\"># For example, popai (conda)</span><br><span class=\"token comment\"># 2. Make a symblic link</span><br><span class=\"token function\">ln</span> -s /home/thi/git/dataswati/python-dataswati/popai /home/thi/miniconda3/envs/popai/lib/python3.8/popai</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># unresolved import</span><br><span class=\"token comment\"># Ctrl + Shift + P</span><br><span class=\"token comment\"># Preferences: Open Workspace Settings (JSON)</span><br><span class=\"token string\">\"settings\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token string\">\"python.pythonPath\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"/usr/bin/python3\"</span>,<br>    <span class=\"token string\">\"python.autoComplete.extraPaths\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span><br>        <span class=\"token string\">\"/usr/lib/python3/dist-packages\"</span>,<br>        <span class=\"token string\">\"/app/src/python/\"</span><br>        <span class=\"token comment\"># or other paths you want!</span><br>    <span class=\"token punctuation\">]</span><br><span class=\"token punctuation\">}</span></code></pre>\n<h2 id=\"hot-keys\">Hot keys <a class=\"direct-link\" href=\"#hot-keys\">#</a></h2>\n<p>One can change the default keyboard shortcut by going to: <strong>File</strong> &gt; <strong>Preferences</strong> &gt; <strong>Keyboard Shortcuts</strong>.</p>\n<p class=\"indent\"></p>\n<ul>\n<li>Quick search file: <kbd>Ctrl</kbd> + <kbd>P</kbd>.</li>\n<li>Get back to previous views: <kbd>Ctrl</kbd> + <kbd>Alt</kbd> + <kbd>-</kbd> (Linux), <kbd>Alt</kbd> + <kbd>&lt;</kbd> (Windows), <kbd>Ctrl</kbd> + <kbd>-</kbd> (MacOS).</li>\n<li>Get forward: <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>-</kbd> (Linux), <kbd>Alt</kbd> + <kbd>&gt;</kbd> (Windows), <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>-</kbd> (MacOS).</li>\n<li>Open Command Palette: <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>P</kbd>.</li>\n<li>Forat on save: <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>I</kbd>.</li>\n<li>Go to line: <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>P</kbd> then <em>Go to line</em>.</li>\n</ul>\n",
      "date_published": "2020-03-14T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/linux-tips/",
      "url": "https://dinhanhthi.com/linux-tips/",
      "title": "Linux notes",
      "content_html": "<p>Quick tips / references for using Linux / <strong>Ubuntu</strong>.</p>\n<p>👉 Note: <a href=\"/fresh-installation-ubuntu\">Fresh installation Ubuntu note.</a><br>\n👉 Note: <a href=\"/bash-command-line\">Bash</a></p>\n<h2 id=\"general\">General <a class=\"direct-link\" href=\"#general\">#</a></h2>\n<div class=\"p-list\">\n<p>🔅 Run MacOS apps on Linux, use <a href=\"https://darlinghq.org/\">Darling</a>.</p>\n<p>🔅 Run Android apps on Linux, use <a href=\"https://anbox.io/\">Anbox</a>.</p>\n<p>🔅 Find in linux with command lines ⇾ <a href=\"https://chrisjean.com/4-great-tools-to-find-files-quickly-in-ubuntu/\">link</a></p>\n<p>🔅 Cannot move files to the trash/wrong owner ⇾ <a href=\"https://askubuntu.com/questions/288513/cant-move-files-to-the-trash\">link</a></p>\n<p>🔅 Gnome screenshot ⇾ <a href=\"https://www.howtoforge.com/tutorial/taking-screenshots-in-linux-using-gnome-screenshot/\">link</a></p>\n<p>🔅 Windows shrink drive in windows ⇾ <a href=\"https://somoit.net/windows/windows-cannot-shrink-volume-unmovable-files\">link</a> (partition, resize disk drive, hard disk)</p>\n<p>🔅 Type Vietnamese in SublimeText, install <code>vn ime</code> (exactly like that). Press <kbd>F2</kbd> for using.</p>\n<p>🔅 Look and kill an app process:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">ps</span> ax <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> teamviewer <span class=\"token comment\"># check the id</span><br><span class=\"token function\">kill</span> -9 <span class=\"token operator\">&lt;</span>pid<span class=\"token operator\">></span> <span class=\"token comment\"># kill some process</span></code></pre>\n<p>🔅 Install file <code>.bin</code>, <code>.run</code></p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">chmod</span> +x file-name.run<br>./file-name.run</code></pre>\n<p>🔅 Make a script executable: <code>chmod a+x script_file</code></p>\n<p>🔅 Unzip a file,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> <span class=\"token function\">unzip</span><br><span class=\"token function\">unzip</span> <span class=\"token operator\">&lt;</span>file<span class=\"token operator\">></span><br><span class=\"token function\">unzip</span> <span class=\"token operator\">&lt;</span>file<span class=\"token operator\">></span> -d <span class=\"token operator\">&lt;</span>destination<span class=\"token operator\">></span></code></pre>\n<p>🔅 Terminal multi windows:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> terminator</code></pre>\n<p>🔅 Add bookmark for evince (default pdf reader)</p>\n<ul>\n<li><kbd>F9</kbd>: hide/show sidebar</li>\n<li>Menu on the top right &gt; Add bookmarks</li>\n<li>Click on bookmark and rename it</li>\n<li><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>S</kbd> to save (instead of <kbd>Ctrl</kbd> + <kbd>S</kbd>)</li>\n</ul>\n<p>🔅 Remove PPA from ubuntu by terminal. For example, <em>The repository '<a href=\"http://ppa.launchpad.net/b-eltzner/qpdfview/ubuntu\">http://ppa.launchpad.net/b-eltzner/qpdfview/ubuntu</a> artful Release' does not have a Release file.</em> Remove the file <em>b-eltzner-qpdfview-ubuntu</em> from directory <em>/etc/apt/sources.list.d</em></p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">rm</span> /etc/apt/sources.list.d/<span class=\"token operator\">&lt;</span>file<span class=\"token operator\">></span></code></pre>\n<p>Or using below command lines</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install</span><br><span class=\"token function\">sudo</span> add-apt-repository ppa:name<br><br><span class=\"token comment\"># remove</span><br><span class=\"token function\">sudo</span> add-apt-repository --remove ppa:name</code></pre>\n<p>🔅 Get ip address: <code>ifconfig</code></p>\n</div>\n<h2 id=\"settings\">Settings <a class=\"direct-link\" href=\"#settings\">#</a></h2>\n<div class=\"p-list\">\n<p>🔅 Make Monday as the start of the week:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> -H gedit /usr/share/i18n/locales/en_GB<br><span class=\"token comment\"># change to 1</span><br>first_weekday <span class=\"token number\">1</span><br><span class=\"token comment\"># save and restart the system</span></code></pre>\n<p>🔅 Add / Remove / Manage app icon in launcher:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> alacarte</code></pre>\n<p>🔅 Change ubuntu logo in settings: replace</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">/usr/share/icons/hicolor/256x256/apps/ubuntu-logo-icon.png</code></pre>\n<p>🔅 Turn off animation open and minimize windows on ubuntu 17.10 and later (gnome desktop): <em>Gnome Tweak Tools &gt; Apperance &gt; Animations OFF</em></p>\n<p>🔅 Choose between &quot;lightdm&quot; and &quot;gdm3&quot; (<a href=\"https://wiki.debian.org/LightDM\">ref</a>):</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> lightdm<br>dpkg-reconfigure lightdm<br><span class=\"token comment\"># current config</span><br>lightdm --show-config</code></pre>\n<p>🔅 Save / Load dconf<sup><a href=\"https://bgstack15.wordpress.com/2017/10/04/dconf-save-and-load-from-file/\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup>: <code>~/.config/dconf/user</code></p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># save guake configs to a file</span><br>dconf dump / <span class=\"token operator\">></span> dconf-settings.ini<br><br><span class=\"token comment\"># load</span><br>dconf load / <span class=\"token operator\">&lt;</span> dconf-settings.ini<br><span class=\"token comment\"># or</span><br><span class=\"token function\">cat</span> dconf-settings.ini <span class=\"token operator\">|</span> dconf load /</code></pre>\n<p>🔅 Save / load custom keyboard shortcuts (<a href=\"https://askubuntu.com/questions/682513/how-to-backup-restore-system-custom-keyboard-shortcuts\">ref</a>)</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># keybindings</span><br>dconf dump /org/gnome/desktop/wm/keybindings/ <span class=\"token operator\">></span> keybindings.dconf<br><span class=\"token comment\"># media keys</span><br>dconf dump /org/gnome/settings-daemon/plugins/media-keys/ <span class=\"token operator\">></span> media-keys.dconf<br><br><span class=\"token comment\"># load</span><br>dconf load /org/gnome/desktop/wm/keybindings/ <span class=\"token operator\">&lt;</span> keybindings.dconf<br>dconf load /org/gnome/settings-daemon/plugins/media-keys/ <span class=\"token operator\">&lt;</span> keybindings.dconf</code></pre>\n</div>\n<h2 id=\"applications\">Applications <a class=\"direct-link\" href=\"#applications\">#</a></h2>\n<div class=\"p-list\">\n<p>🔅 Completely remove LibreOffice,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># zsh uses \\*</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> remove --purge libreoffice*<br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> clean<br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> autoremove</code></pre>\n<p>🔅 Remove snap store</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> autoremove --purge snapd</code></pre>\n<p>🔅 Uninstall snap applications</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> snap remove <span class=\"token operator\">&lt;</span>app_name<span class=\"token operator\">></span></code></pre>\n<p>🔅 Convert office's files to pdf</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install first</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> libreoffice<br><span class=\"token comment\"># pptx -> pdf</span><br>soffice --headless --convert-to pdf prezentacja.pptx</code></pre>\n<p>🔅 Modify / Add icon in launcher: <strong>alacarte</strong>&quot; (Main Menu, can be found in App Store).</p>\n</div>\n<h2 id=\"nautilus-%2F-files-management\">Nautilus / Files management <a class=\"direct-link\" href=\"#nautilus-%2F-files-management\">#</a></h2>\n<div class=\"p-list\">\n<p>🔅 Force Unity Dash to index all files on Home</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> updatedb</code></pre>\n<p>🔅 Sync one folder to another (<a href=\"https://unix.stackexchange.com/questions/203846/how-to-sync-two-folders-with-command-line-tools\">more info</a>)</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># A -> B/A</span><br><span class=\"token function\">rsync</span> -avu --delete <span class=\"token string\">\"/home/user/A\"</span> <span class=\"token string\">\"/home/user/B\"</span><br><br><span class=\"token comment\"># A/* -> B/A</span><br><span class=\"token function\">rsync</span> -avu --delete <span class=\"token string\">\"/home/user/A/\"</span> <span class=\"token string\">\"/home/user/B/A\"</span><br><br><span class=\"token comment\"># A, C -> B/A, B/C</span><br><span class=\"token function\">rsync</span> -avu --delete <span class=\"token string\">\"/home/user/A\"</span> <span class=\"token string\">\"/home/user/C\"</span> <span class=\"token string\">\"/home/user/B\"</span></code></pre>\n<ul>\n<li><code>-a</code> Do the sync preserving all filesystem attributes</li>\n<li><code>-v</code> run verbosely</li>\n<li><code>-u</code> only copy files with a newer modification time (or size difference if the times are equal)</li>\n<li><code>--delete</code> delete the files in target folder that do not exist in the source</li>\n</ul>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># exclude</span><br><span class=\"token function\">rsync</span> -a --exclude <span class=\"token string\">'dir1'</span> src_directory/ dst_directory/<br><span class=\"token function\">rsync</span> -a --exclude<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'file1.txt'</span>,<span class=\"token string\">'dir1/*'</span>,<span class=\"token string\">'dir2'</span><span class=\"token punctuation\">}</span> src_directory/ dst_directory/</code></pre>\n<p>🔅 Make a shortcut link to a folder/file in linux terminal ⇾ <a href=\"https://unix.stackexchange.com/questions/226315/how-to-use-ln-s-to-create-a-command-line-shortcut\">link</a></p>\n<p>🔅 Shortcut to a folder in linux ⇾ <a href=\"https://unix.stackexchange.com/questions/226315/how-to-use-ln-s-to-create-a-command-line-shortcut\">link</a></p>\n<p>🔅 Thumbnail nautilus: go to setting, set and apply this line</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">chown</span> -R yourusername:yourusername ~/.cache/thumbnails</code></pre>\n<p>🔅 Shorten directory in terminal</p>\n<ul>\n<li>\n<p>Temporarily, just enter <code>PS1='\\u:\\W\\$ '</code> en press enter.</p>\n</li>\n<li>\n<p>Permanently, open <code>sudo gedit ~/.bashrc</code> and find</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$color_prompt</span>\"</span> <span class=\"token operator\">=</span> <span class=\"token function\">yes</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span><br><span class=\"token assign-left variable\"><span class=\"token environment constant\">PS1</span></span><span class=\"token operator\">=</span><span class=\"token string\">'<span class=\"token variable\">${debian_chroot<span class=\"token operator\">:+</span>($debian_chroot)}</span>\\[<span class=\"token entity\" title=\"\\033\">\\033</span>[01;32m\\]\\u@\\h\\[<span class=\"token entity\" title=\"\\033\">\\033</span>[00m\\]:\\[<span class=\"token entity\" title=\"\\033\">\\033</span>[01;34m\\]\\w\\[<span class=\"token entity\" title=\"\\033\">\\033</span>[00m\\]\\$ '</span><br><span class=\"token keyword\">else</span><br><span class=\"token assign-left variable\"><span class=\"token environment constant\">PS1</span></span><span class=\"token operator\">=</span><span class=\"token string\">'<span class=\"token variable\">${debian_chroot<span class=\"token operator\">:+</span>($debian_chroot)}</span>\\u@\\h:\\w\\$ '</span><br><span class=\"token keyword\">fi</span></code></pre>\n</li>\n<li>\n<p>Remove <code>@\\h</code> and replace <code>\\w</code> by <code>\\W</code> so that it becomes,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$color_prompt</span>\"</span> <span class=\"token operator\">=</span> <span class=\"token function\">yes</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span><br><span class=\"token assign-left variable\"><span class=\"token environment constant\">PS1</span></span><span class=\"token operator\">=</span><span class=\"token string\">'<span class=\"token variable\">${debian_chroot<span class=\"token operator\">:+</span>($debian_chroot)}</span>\\[<span class=\"token entity\" title=\"\\033\">\\033</span>[01;32m\\]\\u\\[<span class=\"token entity\" title=\"\\033\">\\033</span>[00m\\]:\\[<span class=\"token entity\" title=\"\\033\">\\033</span>[01;34m\\]\\W\\[<span class=\"token entity\" title=\"\\033\">\\033</span>[00m\\]\\$ '</span><br><span class=\"token keyword\">else</span><br><span class=\"token assign-left variable\"><span class=\"token environment constant\">PS1</span></span><span class=\"token operator\">=</span><span class=\"token string\">'<span class=\"token variable\">${debian_chroot<span class=\"token operator\">:+</span>($debian_chroot)}</span>\\u:\\W\\$ '</span><br><span class=\"token keyword\">fi</span></code></pre>\n</li>\n<li>\n<p>Save, exit, close terminal and start another to see the result.</p>\n</li>\n</ul>\n<p>🔅 Right click nautilus &quot;Open as Administrator&quot;:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> nautilus-admin<br>nautilus -q <span class=\"token comment\"># restart nautilus</span></code></pre>\n<p>🔅 Mount iso file on linux</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># create a folder</span><br><span class=\"token function\">mkdir</span> /mnt/<span class=\"token operator\">&lt;</span>folder<span class=\"token operator\">></span><br><br><span class=\"token function\">sudo</span> <span class=\"token function\">mount</span> -o loop <span class=\"token operator\">&lt;</span>image<span class=\"token operator\">></span>.iso /mnt/<span class=\"token operator\">&lt;</span>folder<span class=\"token operator\">></span><br><br><span class=\"token comment\"># unmount</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">umount</span> /mnt/<span class=\"token operator\">&lt;</span>folder<span class=\"token operator\">></span> <span class=\"token comment\"># umount, not \"unmount\"!!!</span></code></pre>\n<p>If you mount another iso file to the same <folder>, it will replace the current one.</p>\n<p>🔅 Extract a iso file: first, mount it like in previous tut to a folder named <code>iso</code> then copy all the contents in <code>iso</code> to some folder you want.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># copy all files in /iso/ to &lt;directory>/</span><br><span class=\"token function\">cp</span> -r /mnt/iso/* <span class=\"token operator\">&lt;</span>directory<span class=\"token operator\">></span>/</code></pre>\n<p>🔅 Sync files with mega right on terminal</p>\n<ul>\n<li>\n<p>Install megatools:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> megatools</code></pre>\n</li>\n<li>\n<p>Using megatools, cf the <a href=\"https://megatools.megous.com\">main website</a>.</p>\n</li>\n<li>\n<p>Create a condig file which stores your login information (be careful, everyone can see your pass)</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> <span class=\"token function\">vim</span> <span class=\"token comment\"># in case that you don't have vim on your system</span><br><span class=\"token function\">vim</span> .megarc <span class=\"token comment\"># create a file named .megarc</span></code></pre>\n</li>\n<li>\n<p><code>vim</code> opens and type</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>Login<span class=\"token punctuation\">]</span><br>Username <span class=\"token operator\">=</span> your@email<br>Password <span class=\"token operator\">=</span> yourpassword</code></pre>\n<p>If you have back slash in your password, you must escape it with another backslash</p>\n</li>\n<li>\n<p>Quit <code>vim</code> and save the file by pressing <kbd>ESC</kbd> and then <code>:wq!</code></p>\n</li>\n<li>\n<p>Upload a file: <code>megaput --path /Root/&lt;folder&gt; file</code></p>\n</li>\n<li>\n<p>See the list of file on remote: <code>megals</code></p>\n</li>\n<li>\n<p>Upload a folder: <code>megacopy --local &lt;folder&gt; --remote &lt;folder&gt;</code></p>\n</li>\n<li>\n<p>Download from link: <code>megadl &lt;mega-link&gt;</code></p>\n</li>\n<li>\n<p>Download a single file: <code>megaget &lt;file&gt;</code></p>\n<pre class=\"language-bash\"><code class=\"language-bash\">megaget /Root/Apps/matlab17b/R2017b_glnxa64_dvd2.iso</code></pre>\n</li>\n<li>\n<p>Download from uploaded directory:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">megacopy --local <span class=\"token operator\">&lt;</span>folder<span class=\"token operator\">></span> --remote <span class=\"token operator\">&lt;</span>folder-to-download<span class=\"token operator\">></span> --download</code></pre>\n</li>\n</ul>\n<p>🔅 Save a directory a <code>$PATH</code> of local profile.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> gedit ~/.profile<br><span class=\"token comment\"># copy and paste following line (should change the path)</span><br><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span>/home/thi/anaconda3/bin:<span class=\"token environment constant\">$PATH</span><br><span class=\"token comment\"># save and close .profile and then apply following line to get instant update</span><br><span class=\"token builtin class-name\">source</span> ~/.profile</code></pre>\n<p>🔅 Copy files from ubuntu to iPhone iOS iPad</p>\n<ul>\n<li>Don't need to install any files if one needs to copy photos/videos from iphone to ubuntu, one can use gThumb to do this or just use file manager to copy.</li>\n<li>If one wants to copy files to iphone. Follow <a href=\"https://askubuntu.com/questions/799414/how-to-move-files-from-ubuntu-to-iphone\">this one</a></li>\n</ul>\n<p>🔅 Check the current path: <code>pwd</code></p>\n</div>\n<h3 id=\"rename-with-some-regex\">Rename with some RegEx <a class=\"direct-link\" href=\"#rename-with-some-regex\">#</a></h3>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> <span class=\"token function\">rename</span></code></pre>\n<div class=\"code-output-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">rename</span> <span class=\"token string\">'s/.+/our <span class=\"token variable\">$i</span>; sprintf(\"chap%d\", 46+<span class=\"token variable\">$i</span>++)/e'</span> *</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\">abc xyz <span class=\"token number\">123</span>\t<span class=\"token comment\"># from</span><br>chap46 chap47 chap48 <span class=\"token comment\"># to</span></code></pre>\n</div>\n<h3 id=\"connect-to-ios-%2F-iphone-%2F-ipad\">Connect to iOS / iPhone / iPad <a class=\"direct-link\" href=\"#connect-to-ios-%2F-iphone-%2F-ipad\">#</a></h3>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Install</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> libimobiledevice6 ifuse libimobiledevice-utils ideviceinstaller<br><br><span class=\"token comment\"># Connect iDevice to computer with usb</span><br>idevicepair pair <span class=\"token comment\"># Trust on iDevice and then rerun this</span><br><br><span class=\"token function\">sudo</span> <span class=\"token function\">mkdir</span> /media/<span class=\"token environment constant\">$USER</span>/ipad<br><span class=\"token function\">sudo</span> <span class=\"token function\">chown</span> -R <span class=\"token environment constant\">$USER</span> /media/<span class=\"token environment constant\">$USER</span>/ipad<br>ifuse /media/<span class=\"token environment constant\">$USER</span>/ipad<br><br><span class=\"token comment\"># Check File Manager and see ipad!</span></code></pre>\n<h2 id=\"surface\">Surface <a class=\"direct-link\" href=\"#surface\">#</a></h2>\n<div class=\"p-list\">\n<p>🔅 Tweaks for ubuntu on surface book ⇾ <a href=\"https://medium.com/@viettrungdang/tweaks-for-ubuntu-on-surface-book-cd05cdb8f378\">link</a></p>\n<p>🔅 App <a href=\"https://github.com/jakeday/linux-surface\"><code>linux-surface</code></a>.</p>\n</div>\n<h2 id=\"user-%2F-group-%2F-ownership\">User / Group / Ownership <a class=\"direct-link\" href=\"#user-%2F-group-%2F-ownership\">#</a></h2>\n<div class=\"p-list\">\n<p>🔅 How to add existing user to an existing group<sup><a href=\"https://askubuntu.com/questions/79565/how-to-add-existing-user-to-an-existing-group\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">usermod</span> -a -G groupName userName</code></pre>\n<p>🔅 Change ownership of a folder and its children</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># folder and its children</span><br><span class=\"token function\">chown</span> -R thi:root folder<br><span class=\"token comment\"># a file</span><br><span class=\"token function\">chown</span> <span class=\"token operator\">&lt;</span>user<span class=\"token operator\">></span>:<span class=\"token operator\">&lt;</span>group<span class=\"token operator\">></span> <span class=\"token function\">file</span></code></pre>\n<p>🔅 Check the permission of curent directory:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">ls</span> -l<br><span class=\"token function\">ls</span> -l <span class=\"token operator\">&lt;</span>file<span class=\"token operator\">></span></code></pre>\n<div class=\"hsbox\"><div class=\"hs__title\">Check this photo</div><div class=\"hs__content\"><p><img src=\"/img/post/linux/ll-user.png\" alt=\"check ll\" class=\"img-full-100\"></p>\n</div></div>\n</div>\n<h2 id=\"matlab\">Matlab <a class=\"direct-link\" href=\"#matlab\">#</a></h2>\n<div class=\"p-list\">\n<p>🔅 Scale matlab: need to install matleb version &gt;= R2017b</p>\n<pre class=\"language-matlab\"><code class=\"language-matlab\">s <span class=\"token operator\">=</span> settings<span class=\"token punctuation\">;</span>s<span class=\"token punctuation\">.</span>matlab<span class=\"token punctuation\">.</span>desktop<span class=\"token punctuation\">.</span>DisplayScaleFactor<br>s<span class=\"token punctuation\">.</span>matlab<span class=\"token punctuation\">.</span>desktop<span class=\"token punctuation\">.</span>DisplayScaleFactor<span class=\"token punctuation\">.</span>PersonalValue <span class=\"token operator\">=</span> <span class=\"token number\">2</span></code></pre>\n<p>🔅 Launching matlab without graphic ui<sup><a href=\"https://blogs.mathworks.com/community/2010/02/22/launching-matlab-without-the-desktop/\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<pre class=\"language-bash\"><code class=\"language-bash\">matlab -nodesktop</code></pre>\n<p>🔅 Cannot open matlab without sudo: change the owner permission of folder <em>/home/thi/.matlab</em> to thi*</p>\n<p>Another solution: suppose that matlab is installed on a user's directory and you have already add this to the <code>$PATH</code>. IT's only work if you use <code>matlab</code> (not <code>sudo matlab</code>). Then do</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">env</span> <span class=\"token string\">\"PATH=<span class=\"token environment constant\">$PATH</span>\"</span></code></pre>\n<p>from this, you can <code>sudo matlab</code></p>\n<p>🔅 Matlab drive connector: after installing, run</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">~/bin/MATLABConnector toggle</code></pre>\n<p>🔅 How to install matlab silently (only with command lines) on linux? (if below doesn't work, you can <a href=\"http://installfights.blogspot.com/2016/11/how-to-install-matlab-without-gui.html\">check here</a>, my method is different from this one)</p>\n<ol>\n<li>\n<p>Suppose that you have 2 dvd iso files which contains the installation of matlab (<code>dvd1.iso</code> and <code>dvd2.iso</code>)</p>\n</li>\n<li>\n<p>For the activation, you have <code>libmwservices.so</code> and <code>license_standalone.lic</code></p>\n</li>\n<li>\n<p>First, you need to extract 2 dvd iso files to a common folder named <code>install_matlab</code> in <code>/home/thi/</code></p>\n</li>\n<li>\n<p>Create a new folder to install matlab called <code>matlabR</code> in <code>/home/thi/</code></p>\n</li>\n<li>\n<p>Extract all files in 2 iso files to folder <code>install_matlab</code> like the other tut (search for &quot;mount&quot;).</p>\n</li>\n<li>\n<p>Run below command line</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> /home/thi/matlab_install/install -agreeToLicense <span class=\"token function\">yes</span> -mode silent -destinationFolder /home/thi/matlabR -fileInstallationKey xxxxx-xxxxx-xxxxx  -outputFile /home/matlab_install.log</code></pre>\n</li>\n<li>\n<p>After the installation, copy file <code>license_standalone.lic</code> to <code>/home/thi/matlabR/licenses/</code></p>\n</li>\n<li>\n<p>Copy file <code>libmwservices.so</code> to <code>/home/thi/matlabR/bin/glnxa64/</code></p>\n</li>\n<li>\n<p>Try running matlab: <code>/home/thi/matlabR/bin/matlab</code></p>\n</li>\n<li>\n<p>If you have an error like,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">\t<span class=\"token comment\"># ERR: libXt.so.6: cannot open shared object file: No such file or directory</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> libxt6</code></pre>\n</li>\n<li>\n<p>Make linux recognize your matlab command <code>matlab</code> like in the instruction 40.</p>\n</li>\n</ol>\n<p>🔅 Make linux recognize matlab command</p>\n<ul>\n<li>\n<p>Suppose that you have installed matlab on <code>/home/thi/matlabR</code></p>\n</li>\n<li>\n<p>You need to add above directory to the <code>$PATH</code> so that the system can recognize your <code>matlab</code> command</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span><span class=\"token environment constant\">$PATH</span>:/home/thi/matlabR/bin</code></pre>\n</li>\n<li>\n<p>You can use <code>echo $PATH</code> to check if the path is located in it or not.</p>\n</li>\n</ul>\n<p>🔅 Remove matlab on linux: simply</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">rm</span> -rf <span class=\"token operator\">&lt;</span>matlab-folder<span class=\"token operator\">></span></code></pre>\n</div>\n<h2 id=\"network\">Network <a class=\"direct-link\" href=\"#network\">#</a></h2>\n<div class=\"p-list\">\n<p>🔅 Don't show &quot;<em>Turn on wifi hotspot...</em>&quot; for clicking =&gt; try: click on &quot;Network&quot; and then &quot;Wifi&quot; in Settings.</p>\n<p>🔅 Share terminal for other (via SSH): using <a href=\"https://www.teleconsole.com/\">Teleconsole</a>,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install</span><br><span class=\"token function\">curl</span> https://www.teleconsole.com/get.sh <span class=\"token operator\">|</span> <span class=\"token function\">sh</span><br><br><span class=\"token comment\"># share current terminal</span><br>teleconsole<br><br><span class=\"token comment\"># choose to connect via web browser</span><br><span class=\"token comment\"># or via terminal</span><br>teleconsole <span class=\"token function\">join</span> <span class=\"token operator\">&lt;</span>id<span class=\"token operator\">></span><br><br><span class=\"token comment\"># stop broadcasting</span><br><span class=\"token builtin class-name\">exit</span><br><br><span class=\"token comment\"># port forwarding</span><br><span class=\"token comment\"># suppose that a port is open at 3000 on your machine and you</span><br><span class=\"token comment\"># wanna share it with your friend</span><br>teleconsole -f localhost:3000</code></pre>\n<p>🔅 Download a direct link by terminal</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">wget</span> <span class=\"token operator\">&lt;</span>direct-link<span class=\"token operator\">></span> -O <span class=\"token operator\">&lt;</span>name-of-file<span class=\"token operator\">></span>.<span class=\"token operator\">&lt;</span>file-extension<span class=\"token operator\">></span></code></pre>\n<p>🔅 Download from google drive by terminal</p>\n<ul>\n<li>Download as usual without terminal by a web browser</li>\n<li>Open Downloads windows of the browser and then copy the download link.</li>\n<li>Stop the download process</li>\n<li>Use the command link in 33 where <code>&lt;direct-link&gt;</code> is the link copied above.</li>\n</ul>\n<p>🔅 Use <code>ssh</code> to get access to another computer in the same network (LAN)</p>\n<ol start=\"0\">\n<li>Follow (a little bit) <a href=\"https://www.makeuseof.com/tag/remotely-manage-linux-server-ssh/\">here</a>.</li>\n<li>On the remote machine\n<ol>\n<li>update and upgrade install</li>\n<li>install <code>openssh-server</code></li>\n<li>open <code>/etc/ssh/sshd_config</code> and uncomment on <code>Port 22</code> and lines starting with <code>Hostkey...</code></li>\n<li>start the network: <code>sudo service ssh start</code></li>\n<li>stop the network: <code>sudo service ssh stop</code></li>\n<li>check if the network is running or not? <code>sudo service ssh status</code></li>\n<li>Check the current ip: <code>ifconfig</code>: look on the <em>inet</em></li>\n</ol>\n</li>\n<li>On the local machine<br>\n8. Install the same tool and use <code>ssh username@remote-host</code></li>\n</ol>\n<p>🔅 Connect <code>ssh</code> to a virtual machine (the same network)</p>\n<ul>\n<li>\n<p>Install openssh for both client and server machine</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> openssh-client<br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> openssh-server</code></pre>\n</li>\n<li>\n<p>On server machine, check ssh is running or not</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">ps</span> -A <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> sshd<br><span class=\"token comment\"># return [number] ?  00:00:00 sshd then it works</span></code></pre>\n</li>\n</ul>\n<p>🔅 Download playlist audio youtube, using <a href=\"https://github.com/rg3/youtube-dl/blob/master/README.md#readme\"><code>youtube-dl</code></a></p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> <span class=\"token function\">curl</span> -y <span class=\"token punctuation\">(</span>cài <span class=\"token function\">curl</span> nếu chưa cài<span class=\"token punctuation\">)</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">curl</span> -L https://yt-dl.org/downloads/latest/youtube-dl -o /usr/local/bin/youtube-dl<br><span class=\"token function\">sudo</span> <span class=\"token function\">chmod</span> a+rx /usr/local/bin/youtube-dl<br><br><span class=\"token comment\"># update 11/11/20: not working with playlist but single song!</span><br>youtube-dl --extract-audio --audio-format mp3 -o <span class=\"token string\">\"%(title)s.%(ext)s\"</span> <span class=\"token operator\">&lt;</span>link-playlist<span class=\"token operator\">></span></code></pre>\n<p>🔅 Install <a href=\"https://www.torproject.org/download/\">TOR Browser</a></p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> add-apt-repository ppa:micahflee/ppa<br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update<br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> torbrowser-launcher<br><br><span class=\"token comment\"># Open \"Tor Browser\" and install for the 1st time</span><br><br><span class=\"token comment\"># Click \"Connect\" to connect to Tor Network</span><br><br><span class=\"token comment\"># Uninstall</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> remove torbrowser-launcher</code></pre>\n</div>\n<h3 id=\"free-vpn\">Free VPN <a class=\"direct-link\" href=\"#free-vpn\">#</a></h3>\n<p>Using <a href=\"https://www.vpnbook.com/\">vpnbook</a> and <a href=\"https://www.vpnbook.com/howto/setup-openvpn-on-ubuntu\">its tutorial</a>. Note that, at the last step, we need to run with <code>sudo</code>! <strong>Note</strong>: very low speed!</p>\n<h2 id=\"media-%2F-photo-%2F-music\">Media / Photo / Music <a class=\"direct-link\" href=\"#media-%2F-photo-%2F-music\">#</a></h2>\n<div class=\"p-list\">\n<p>🔅 Add shortcut keys for Rhythmbox Music Player -&gt; read <a href=\"https://askubuntu.com/questions/181651/how-to-assign-hot-keys-to-control-rhythmbox\">this</a>.</p>\n<ol>\n<li>Enable plugin &quot;MPRIS D-Bus interface&quot;.</li>\n<li>Add custom shortcuts keyboards as\n<ul>\n<li>Play/Pause: <code>rhythmbox-client --play-pause</code></li>\n<li>Next: <code>rhythmbox-client --next</code></li>\n<li>Previous: <code>rhythmbox-client --previous</code></li>\n</ul>\n</li>\n</ol>\n<p>🔅 Convert <code>.ts</code> videos to <code>.mp4</code></p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> ffmpeg<br>ffmpeg -i input.ts -c:v libx264 -c:a aac output.mp4</code></pre>\n<p>🔅 Mp3 tag editor:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> exfalso  <span class=\"token comment\"># Ex Falso</span></code></pre>\n<p>🔅 Spotify controller shortcut keyboards on Ubuntu (<a href=\"https://askubuntu.com/questions/1105363/spotify-keyboard-controls-not-working\">ref</a>): using below commands for controlling playbacks in spotify, put them in a shortcut keys on ubuntu:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># play/puase</span><br>dbus-send --print-reply --dest<span class=\"token operator\">=</span>org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.PlayPause<br><br><span class=\"token comment\"># next track</span><br>dbus-send --print-reply --dest<span class=\"token operator\">=</span>org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Next<br><br><span class=\"token comment\"># previous track</span><br>dbus-send --print-reply --dest<span class=\"token operator\">=</span>org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Previous</code></pre>\n<p>🔅 Resize multiple photos (keep the ratio/scale) (<a href=\"https://imagemagick.org/Usage/resize/\">more options</a>):</p>\n<p>🔅 <strong>Youtube Music Controller for Linux</strong>:</p>\n<ol>\n<li>Download and install <a href=\"https://github.com/MarshallOfSound/Google-Play-Music-Desktop-Player-UNOFFICIAL-\">this app</a>.</li>\n<li>Change to Youtube Music interface.</li>\n<li>Remove all shortcut keyboards that look like the ones you wanna set in the app in Ubuntu system (<strong>Keyboard shortcuts</strong>).</li>\n<li>On taskbar, right click on the You Tube Music app &gt; Desktop settings &gt; Hotkeys &gt; Set your keyboards (eg. <code>Ctrl+Shift+&gt;</code> for next track, <code>Ctrl+Shift+&lt;</code> for previous track, <code>Ctrl+Shift+Space</code> for play/pause track).</li>\n</ol>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> imagemagick</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># resize but keep the ratio (save to jpg)</span><br>mogrify -resize <span class=\"token number\">50</span>% -format jpg *</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># resize keep the extension</span><br>mogrify -resize <span class=\"token number\">50</span>% *</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># with a specific size (save to jpg)</span><br>mogrify -resize 800x600 -format jpg *</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># just the width (save to jpg)</span><br>mogrify -resize 800x -format jpg *</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># only resize images bigger than 1000px width</span><br>mogrify -resize 1000x<span class=\"token punctuation\">\\</span><span class=\"token operator\">></span> *</code></pre>\n</div>\n</div>\n<h2 id=\"game\">Game <a class=\"direct-link\" href=\"#game\">#</a></h2>\n<div class=\"p-list\">\n<p>🔅 Game platforms: <a href=\"https://store.steampowered.com/linux\">Steam</a>, <a href=\"https://lutris.net/\">Lutris</a>.</p>\n<p>🔅 Xbox Controller on Ubuntu:</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># for bluetooth recognize</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> xboxdrv<br><br><span class=\"token comment\"># start the service</span><br><span class=\"token function\">sudo</span> systemctl start xboxdrv.service<br><br><span class=\"token comment\"># if: Failed to start xboxdrv.service: Unit xboxdrv.service not found</span><br><span class=\"token comment\"># install</span><br><span class=\"token function\">sudo</span> apt-add-repository -y ppa:rael-gc/ubuntu-xboxdrv<br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update<br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> ubuntu-xboxdrv</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># for GUI testing app</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> jstest-gtk</code></pre>\n</div>\n<p>If you cannot connect controller to bluetooth,<sup><a href=\"https://askubuntu.com/questions/1038001/xbox-one-controller-ubuntu-18-04\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> sysfsutils<br><br><span class=\"token comment\"># edit as root</span><br>/etc/sysfs.conf<br><br><span class=\"token comment\"># add below line to the end of above file</span><br>/module/bluetooth/parameters/disable_ertm<span class=\"token operator\">=</span><span class=\"token number\">1</span><br><br><span class=\"token comment\"># save changes and restart</span></code></pre>\n</div>\n<h3 id=\"lutris-tips\">Lutris tips <a class=\"direct-link\" href=\"#lutris-tips\">#</a></h3>\n<div class=\"p-list\">\n<p>🔅 Install GOG's games: Open Lutris &gt; <em>Search <a href=\"http://Lutris.net\">Lutris.net</a></em> &gt; Install with option &quot;GOG&quot;. Installed from GOG Galaxy may be not working but with this method is working!</p>\n<p>🔅 Add icon in the Lutris windows:</p>\n<ol>\n<li>\n<p>CLick on &quot;+&quot; (Add Game)</p>\n</li>\n<li>\n<p>Tab <strong>Game info</strong>: &quot;Name&quot; the game + choose &quot;Runner&quot;.</p>\n</li>\n<li>\n<p>Tab <strong>Game options</strong>: &quot;Excutable&quot; choose</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># an example</span><br>~/Games/epic-games-store/drive_c/Program Files/Epic Games/ShadowTactics/Shadow Tactics.exe</code></pre>\n</li>\n</ol>\n<p>🔅 Add icon on Ubuntu/POP!_OS launcher: on Lutris interface, right click on a game &gt; &quot;Create application menu shortcut&quot;, it will appear on the launcher after that. You can use &quot;<strong>alacarte</strong>&quot; (Main Menu, can be found in App Store).</p>\n<h2 id=\"system\">System <a class=\"direct-link\" href=\"#system\">#</a></h2>\n<p>🔅 System monitor in terminal: <a href=\"https://github.com/MrRio/vtop\">vtop</a></p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> nodejs<br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> <span class=\"token function\">npm</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g vtop</code></pre>\n</div>\n<h3 id=\"font\">Font <a class=\"direct-link\" href=\"#font\">#</a></h3>\n<ol>\n<li><strong>Method 1</strong> -- To install font, copy all font file (eg. <code>.ttf</code>) to <code>~/.local/share/font/</code>. For <strong>global</strong>, it's <code>/usr/share/fonts</code>.</li>\n<li><strong>Method 2</strong> -- Open with Font Viewer and then click on Install.</li>\n</ol>\n<h2 id=\"errors\">Errors <a class=\"direct-link\" href=\"#errors\">#</a></h2>\n<div class=\"p-list\">\n<p>🔅 Problem save file as <code>root</code> user and cannot open later ⇾ <a href=\"https://askubuntu.com/questions/817902/unable-to-open-any-graphical-app-with-sudo/817906#817906\">link</a></p>\n<p>🔅 Prevent bluetooth devices disconnected after sleep ⇾ <a href=\"https://unix.stackexchange.com/questions/177998/bluetooth-mouse-disconnects\">link</a></p>\n<p>🔅  <em>Failed to load module 'canberra-gtk-module</em></p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> libcanberra-gtk-module libcanberra-gtk3-module</code></pre>\n<p>🔅 <em>nvidia docker signatures invalid. The following signatures were invalid: EXPKEYSIG</em></p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> -s -L https://nvidia.github.io/nvidia-docker/gpgkey <span class=\"token operator\">|</span> <span class=\"token function\">sudo</span> apt-key <span class=\"token function\">add</span> -</code></pre>\n<p>🔅 <em>bash: warning: setlocale: LC_ALL: cannot change locale (en_US.UTF-8)</em></p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"LC_ALL=en_US.UTF-8\"</span> <span class=\"token operator\">>></span> /etc/environment<br><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"en_US.UTF-8 UTF-8\"</span> <span class=\"token operator\">>></span> /etc/locale.gen<br><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"LANG=en_US.UTF-8\"</span> <span class=\"token operator\">></span> /etc/locale.conf<br>locale-gen en_US.UTF-8</code></pre>\n<p>🔅 <em>dpkg: error processing package install-info</em></p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">mv</span> /var/lib/dpkg/info/install-info.postinst /var/lib/dpkg/info/install-info.postinst.bad</code></pre>\n<p>🔅 <em>APT had planned for dpkg to do more than it reported back</em></p>\n<pre class=\"language-bash\"><code class=\"language-bash\">dpkg --configure -a<br><span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> -f</code></pre>\n</div>\n<h3 id=\"gpu-nvdia-problems\">GPU-NVDIA problems <a class=\"direct-link\" href=\"#gpu-nvdia-problems\">#</a></h3>\n<p>👉 Check <a href=\"/docker-gpu/#errors-with-gpu\">this note</a>.</p>\n",
      "date_published": "2020-03-12T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/time-series-tips/",
      "url": "https://dinhanhthi.com/time-series-tips/",
      "title": "Time Series extra",
      "content_html": "<h2 id=\"terminologies-%26-fields-of-research\">Terminologies &amp; fields of research <a class=\"direct-link\" href=\"#terminologies-%26-fields-of-research\">#</a></h2>\n<ul>\n<li><strong>Burst detection</strong>: An unexpectedly large number of events occurring within some certain temporal or spatial region is called<br>\na burst, suggesting unusual behaviors or activities.</li>\n<li><strong>Time Series Regression</strong>: <sup><a href=\"https://ch.mathworks.com/discovery/time-series-regression.html\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup> Time series regression is a statistical method for predicting a future response based on the response history (known as autoregressive dynamics) and the transfer of dynamics from relevant predictors. Time series regression can help you understand and predict the behavior of dynamic systems from experimental or observational data. Time series regression is commonly used for modeling and forecasting of economic, financial, and biological systems.</li>\n<li><strong>Time Series Classification</strong>: <sup><a href=\"https://medium.com/datadriveninvestor/time-series-classification-using-feature-extraction-16209570a22e\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup> Time series classification deals with classifying the data points over the time based on its' behavior. There can be data sets which behave in an abnormal manner when comparing with other data sets. Identifying unusual and anomalous time series is becoming increasingly common for organizations\n<ul>\n<li><sup><a href=\"https://www.analyticsvidhya.com/blog/2019/01/introduction-time-series-classification/\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup> Time series classification data differs from a regular classification problem since the attributes have an ordered sequence.</li>\n</ul>\n</li>\n<li><strong>Anomaly Detection</strong>:\n<ul>\n<li>A part in the same time series.</li>\n<li>Finding one or more time series which are different from others.</li>\n<li>Some abnormal points in the same time series.</li>\n<li>Applied for both univariate and multivariate time series.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"read_csv\">Read_CSV <a class=\"direct-link\" href=\"#read_csv\">#</a></h2>\n<p>More <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html\">here</a>.</p>\n<pre class=\"language-python\"><code class=\"language-python\">df_13 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>read_csv<span class=\"token punctuation\">(</span>path_file<span class=\"token punctuation\">,</span><br>                    index_col<span class=\"token operator\">=</span><span class=\"token string\">'timestamp'</span><span class=\"token punctuation\">,</span><br>                    parse_dates<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># index contains dates</span><br>                    infer_datetime_format<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># auto regconize format</span><br>                    cache_dates<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># faster</span></code></pre>\n<h2 id=\"find-the-windows-of-time-series\">Find the windows of time series <a class=\"direct-link\" href=\"#find-the-windows-of-time-series\">#</a></h2>\n<p>Suppose we have data like in below, we wanna find the common length interval of all groups.</p>\n<p><img src=\"/img/post/time-series/ts-interval-example.png\" alt=\"Group of time series intervals\" class=\"img-full-100\"></p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># find the biggest gap</span><br>df<span class=\"token punctuation\">[</span><span class=\"token string\">'date'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>diff<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># 4 biggest gaps</span><br>df<span class=\"token punctuation\">[</span><span class=\"token string\">'date'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>diff<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>sort_values<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>iloc<span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">5</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span><br><br><span class=\"token comment\"># starting of each window (the gap used to separate windows is '1D')</span><br>w_starts <span class=\"token operator\">=</span> df<span class=\"token punctuation\">.</span>reset_index<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token operator\">~</span><span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">[</span><span class=\"token string\">'date'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>diff<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> pd<span class=\"token punctuation\">.</span>to_timedelta<span class=\"token punctuation\">(</span><span class=\"token string\">'1D'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>index<br><br><span class=\"token comment\"># ending of each window</span><br>w_ends <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>w_starts<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>pd<span class=\"token punctuation\">.</span>Index<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>df<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># count the number of windows</span><br><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>w_starts<span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># the biggest/average window size (in points)</span><br><span class=\"token punctuation\">(</span>w_ends <span class=\"token operator\">-</span> w_starts<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br><span class=\"token punctuation\">(</span>w_ends <span class=\"token operator\">-</span> w_starts<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># the biggest window size (in time range)</span><br>pd<span class=\"token punctuation\">.</span>Timedelta<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">.</span>iloc<span class=\"token punctuation\">[</span>w_ends<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'date'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> df<span class=\"token punctuation\">.</span>iloc<span class=\"token punctuation\">[</span>w_starts<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'date'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> unit<span class=\"token operator\">=</span><span class=\"token string\">'ns'</span><span class=\"token punctuation\">)</span></code></pre>\n<p>If you wanna add a <code>window</code> column to the original dataframe,</p>\n<pre class=\"language-python\"><code class=\"language-python\">df_tmp <span class=\"token operator\">=</span> df<span class=\"token punctuation\">.</span>copy<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>w_idx <span class=\"token operator\">=</span> <span class=\"token number\">0</span><br><span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>w_starts<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    df_tmp<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span>w_starts<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">(</span>w_ends<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'window'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> w_idx<br>    w_idx <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><br>df_tmp<span class=\"token punctuation\">.</span>window <span class=\"token operator\">=</span> df_tmp<span class=\"token punctuation\">.</span>window<span class=\"token punctuation\">.</span>astype<span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># convert dtype to int64</span></code></pre>\n<p>There are other cases need to be considered,</p>\n<p><img src=\"/img/post/time-series/ts-interval-example-2.png\" alt=\"Group of time series intervals\" class=\"img-full-100\"><br>\n<em>The gaps are not regular</em></p>\n<p><img src=\"/img/post/time-series/ts-interval-example-3.png\" alt=\"Group of time series intervals\" class=\"img-full-100\"><br>\n<em>If we choose the gaps (to determine the windows) too small, there are some windows have only 1 point like in this case.</em></p>\n<p>Find the gap's threshold automatically,</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>cluster <span class=\"token keyword\">import</span> MeanShift<br><br><span class=\"token keyword\">def</span> <span class=\"token function\">find_gap_auto</span><span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br><br>    X <span class=\"token operator\">=</span> df<span class=\"token punctuation\">[</span><span class=\"token string\">'date'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>diff<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>unique<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>    X <span class=\"token operator\">=</span> X<span class=\"token punctuation\">[</span><span class=\"token operator\">~</span>np<span class=\"token punctuation\">.</span>isnat<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># remove 'NaT'</span><br>    X<span class=\"token punctuation\">.</span>sort<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>    X <span class=\"token operator\">=</span> X<span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><br><br>    clustering <span class=\"token operator\">=</span> MeanShift<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">)</span><br>    labels <span class=\"token operator\">=</span> clustering<span class=\"token punctuation\">.</span>labels_<br>    cluster_min <span class=\"token operator\">=</span> labels<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><br><br>    gap <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>to_timedelta<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">[</span>labels<span class=\"token operator\">!=</span>cluster_min<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">min</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> X<span class=\"token punctuation\">[</span>labels<span class=\"token operator\">==</span>cluster_min<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><br><br>    <span class=\"token keyword\">return</span> gap</code></pre>\n",
      "date_published": "2020-03-09T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/tsfresh/",
      "url": "https://dinhanhthi.com/tsfresh/",
      "title": "tsfresh",
      "content_html": "<h2 id=\"install\">Install <a class=\"direct-link\" href=\"#install\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\">pip <span class=\"token function\">install</span> tsfresh</code></pre>\n<h2 id=\"how-tsfresh-works%3F\">How tsfresh works? <a class=\"direct-link\" href=\"#how-tsfresh-works%3F\">#</a></h2>\n<p><img src=\"/img/post/time-series/tsfresh-1.jpg\" alt=\"Why tsfresh?\" class=\"img-full-90 pop\"></p>\n<p><img src=\"/img/post/time-series/tsfresh-2.jpg\" alt=\"How tsfresh works?\" class=\"img-full\" -90.pop=\"\"></p>\n<h2 id=\"how-to-use%3F\">How to use? <a class=\"direct-link\" href=\"#how-to-use%3F\">#</a></h2>\n<h2 id=\"reference\">Reference <a class=\"direct-link\" href=\"#reference\">#</a></h2>\n<ul>\n<li><a href=\"https://tsfresh.readthedocs.io/\">Official docs</a>.</li>\n<li>Nils Braun - <a href=\"https://www.youtube.com/watch?v=Fm8zcOMJ-9E\">Time series feature extraction with tsfresh</a> (video)</li>\n</ul>\n",
      "date_published": "2020-03-08T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/fast-fourier-transform-fft/",
      "url": "https://dinhanhthi.com/fast-fourier-transform-fft/",
      "title": "Fast Fourier Transform (fft)",
      "content_html": "<h2 id=\"discrete-fourirer-transform-(dft)\">Discrete Fourirer Transform (DFT) <a class=\"direct-link\" href=\"#discrete-fourirer-transform-(dft)\">#</a></h2>\n<h2 id=\"fft\">FFT <a class=\"direct-link\" href=\"#fft\">#</a></h2>\n<p>From <a href=\"https://en.wikipedia.org/wiki/Fast_Fourier_transform\">wiki</a> : &quot;A fast Fourier transform (FFT) is an algorithm that computes the discrete Fourier transform (DFT) of a sequence, or its inverse (IDFT). Fourier analysis converts a signal from its original domain (often time or space) to a representation in the frequency domain and vice versa.&quot;</p>\n<h2 id=\"phase---frequency---amplitude\">Phase - Frequency - Amplitude <a class=\"direct-link\" href=\"#phase---frequency---amplitude\">#</a></h2>\n<p><img src=\"/img/post/time-series/wave_prop.jpg\" alt=\"3 fundamental prop of a wave\" class=\"img-full-80\"><br>\n<em>3 fundamental properties of a wave. Two waves have the same amplitude and frequency but different phase</em></p>\n<p>Frequency (Hertz) -- number of circles in 1 second!</p>\n<h2 id=\"references\">References <a class=\"direct-link\" href=\"#references\">#</a></h2>\n<ul>\n<li><strong>MathBitsNotebook</strong> -- <a href=\"https://mathbitsnotebook.com/Algebra2/TrigGraphs/TGTrigVocab.html\">Trigonometric Graphs Vocabulary</a></li>\n<li><strong>Math is fun</strong> -- <a href=\"https://www.mathsisfun.com/algebra/amplitude-period-frequency-phase-shift.html\">Amplitude, Period, Phase Shift and Frequency</a></li>\n<li><strong>BetterExplained</strong> -- <a href=\"https://betterexplained.com/articles/an-interactive-guide-to-the-fourier-transform/\">An Interactive Guide To The Fourier Transform</a></li>\n<li>OSCON 2014 (video) -- <a href=\"https://www.youtube.com/watch?v=FjmwwDHT98c&amp;feature=emb_title\">Intuitive Understanding of the Fourier Transform and FFTs</a></li>\n</ul>\n",
      "date_published": "2020-03-08T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/screen/",
      "url": "https://dinhanhthi.com/screen/",
      "title": "Screen",
      "content_html": "<p>Keep the running tasks on the remote host continue after turning off the local caller.</p>\n<h2 id=\"install\">Install <a class=\"direct-link\" href=\"#install\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> <span class=\"token function\">screen</span> <span class=\"token comment\"># ubuntu</span></code></pre>\n<h2 id=\"basic-command-lines\">Basic command lines <a class=\"direct-link\" href=\"#basic-command-lines\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># check screen version</span><br><span class=\"token function\">screen</span> -v</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># start new session (with name)</span><br><span class=\"token function\">screen</span> -S <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># list running sessions</span><br><span class=\"token function\">screen</span> -ls</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># attach to a running session (without name)</span><br><span class=\"token function\">screen</span> -x</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># attach to a running session (with name)</span><br><span class=\"token function\">screen</span> -rx <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span><br><span class=\"token comment\"># -x for an interactive (scrolling)</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># detach a running session</span><br><span class=\"token function\">screen</span> -d <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span> <span class=\"token comment\"># or Ctrl + A, D</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># kill a session</span><br><span class=\"token function\">screen</span> -X -S <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span> quit</code></pre>\n</div>\n<h3 id=\"delete-sessions\">Delete sessions <a class=\"direct-link\" href=\"#delete-sessions\">#</a></h3>\n<ol>\n<li>Reattach first: <code>screen -r &lt;name&gt;</code></li>\n<li><kbd>Ctrl</kbd> + <kbd>A</kbd>, <kbd>K</kbd> then <kbd>Y</kbd></li>\n</ol>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># kill ALL auto-created sesssions</span><br><span class=\"token function\">screen</span> -ls <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> pts <span class=\"token operator\">|</span> <span class=\"token function\">cut</span> -d. -f1 <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> <span class=\"token string\">'{print <span class=\"token variable\">$1</span>}'</span> <span class=\"token operator\">|</span> <span class=\"token function\">xargs</span> <span class=\"token function\">kill</span><br><br><span class=\"token comment\"># kill all detached sessions</span><br><span class=\"token function\">screen</span> -ls <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> Detached <span class=\"token operator\">|</span> <span class=\"token function\">cut</span> -d. -f1 <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> <span class=\"token string\">'{print <span class=\"token variable\">$1</span>}'</span> <span class=\"token operator\">|</span> <span class=\"token function\">xargs</span> <span class=\"token function\">kill</span></code></pre>\n<h2 id=\"create-a-screen-%2B-list-of-command-lines\">Create a screen + list of command lines <a class=\"direct-link\" href=\"#create-a-screen-%2B-list-of-command-lines\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">screen</span> -S <span class=\"token string\">'dat'</span> -dm <span class=\"token function\">bash</span> -c <span class=\"token string\">'cd /jekyll-site; bundle exec jekyll serve -I; exec sh'</span></code></pre>\n<h2 id=\"hotkeys\">Hotkeys <a class=\"direct-link\" href=\"#hotkeys\">#</a></h2>\n<ul>\n<li>Detach: <kbd>Ctrl</kbd> + <kbd>A</kbd>, <kbd>D</kbd></li>\n<li>Reattach: <kbd>Ctrl</kbd> + <kbd>A</kbd>, <kbd>R</kbd></li>\n<li>Kill current session: <kbd>Ctrl</kbd> + <kbd>A</kbd>, <kbd>K</kbd> then <kbd>Y</kbd></li>\n</ul>\n<h2 id=\"errors\">Errors <a class=\"direct-link\" href=\"#errors\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Cannot make directory '/run/screen': Permission denied</span><br><span class=\"token function\">mkdir</span> ~/.screen <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">chmod</span> <span class=\"token number\">700</span> ~/.screen<br><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">SCREENDIR</span><span class=\"token operator\">=</span><span class=\"token environment constant\">$HOME</span>/.screen<br><span class=\"token comment\"># also add this line to ~/.zshrc or ~/.bashrc</span></code></pre>\n<h2 id=\"reference\">Reference <a class=\"direct-link\" href=\"#reference\">#</a></h2>\n<ul>\n<li><a href=\"https://gist.github.com/jctosta/af918e1618682638aa82\">Screen Quick Reference</a></li>\n</ul>\n",
      "date_published": "2020-03-08T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/google-colab/",
      "url": "https://dinhanhthi.com/google-colab/",
      "title": "Google Colab",
      "content_html": "<h2 id=\"urls\">URLs <a class=\"direct-link\" href=\"#urls\">#</a></h2>\n<ul>\n<li><a href=\"https://colab.research.google.com/\">Main site</a>.</li>\n<li><a href=\"https://colab.research.google.com/notebooks/welcome.ipynb?authuser=1\">Welcome site</a>.</li>\n<li><a href=\"https://research.google.com/seedbank/\">SeedBank by Google</a>: Collection of Interactive Machine Learning Examples.</li>\n</ul>\n<h2 id=\"colab-%26-github\">Colab &amp; Github <a class=\"direct-link\" href=\"#colab-%26-github\">#</a></h2>\n<p>&quot;<em>Open with Colab</em>&quot; any Jupyter Notebook file (<code>.ipynb</code>) in Github. For example, the file's URL is:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">https://github.com/dinhanhthi/dataquest-aio/blob/master/file-name.ipynb</code></pre>\n<p>You can open with colab with the URL:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">https://colab.research.google.com/github/dinhanhthi/dataquest-aio/blob/master/file-name.ipynb</code></pre>\n<p>In the case you wanna import dataset (<code>.csv</code>) from Github. First, open this <code>.csv</code> file as RAW. Its URL may be</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">https://raw.githubusercontent.com/dinhanhthi/dataquest-aio/master/file.csv</code></pre>\n<p>and then use it as the url of the data file. Note that, you cannot use <code>open</code> to read this file,</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> csv<br><br><span class=\"token comment\"># We can use on localhost</span><br>opened_file <span class=\"token operator\">=</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>dataset_url<span class=\"token punctuation\">,</span> encoding<span class=\"token operator\">=</span><span class=\"token string\">\"utf8\"</span><span class=\"token punctuation\">)</span><br>read_file <span class=\"token operator\">=</span> csv<span class=\"token punctuation\">.</span>reader<span class=\"token punctuation\">(</span>opened_file<span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># But we CAN'T use this `open` for the link from Github, we use:</span><br><span class=\"token keyword\">from</span> urllib<span class=\"token punctuation\">.</span>request <span class=\"token keyword\">import</span> urlopen<br>opened_file <span class=\"token operator\">=</span> urlopen<span class=\"token punctuation\">(</span>dataset_url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><br>read_file <span class=\"token operator\">=</span> csv<span class=\"token punctuation\">.</span>reader<span class=\"token punctuation\">(</span>opened_file<span class=\"token punctuation\">.</span>splitlines<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"hotkeys-%2F-shortcuts\">Hotkeys / Shortcuts <a class=\"direct-link\" href=\"#hotkeys-%2F-shortcuts\">#</a></h2>\n<p>Check the command shortcuts in <strong>Tools</strong> &gt; <strong>Keyboard shortcuts</strong> (<kbd>Ctrl</kbd> + <kbd>M</kbd> <kbd>H</kbd>), below are the most popular ones:</p>\n<ul>\n<li><kbd>Ctrl</kbd> + <kbd>S</kbd>: <strong>save</strong> the notebook.</li>\n<li><kbd>Ctrl</kbd> + <kbd>Enter</kbd>: <strong>run</strong> a cell in place.</li>\n<li><kbd>Shift</kbd> + <kbd>Enter</kbd>: to <strong>run</strong> the cell and move <strong>focus</strong> to the next cell (adding one if none exists).</li>\n<li><kbd>Alt</kbd> + <kbd>Enter</kbd>: <strong>run</strong> the cell and <strong>insert</strong> a new code cell immediately below it.</li>\n<li><kbd>Ctrl</kbd> + <kbd>M</kbd> <kbd>Y</kbd>: <strong>convert</strong> a cell to a <strong>code cell</strong>.</li>\n<li><kbd>Ctrl</kbd> + <kbd>M</kbd> <kbd>M</kbd>: <strong>convert</strong> a cell to a <strong>text cell</strong>.</li>\n<li><kbd>Ctrl</kbd> + <kbd>M</kbd> <kbd>D</kbd>: <strong>delete</strong> current cell / selected cells.</li>\n<li><kbd>Ctrl</kbd> + <kbd>M</kbd> <kbd>A</kbd>: <strong>insert</strong> a code cell <strong>above</strong>.</li>\n<li><kbd>Ctrl</kbd> + <kbd>M</kbd> <kbd>B</kbd>: <strong>insert</strong> a code cell <strong>below</strong>.</li>\n<li><kbd>Ctrl</kbd> + <kbd>Alt</kbd> + <kbd>M</kbd>: insert a <strong>comment</strong>.</li>\n<li><kbd>Ctrl</kbd> + <kbd>Space</kbd> or <kbd>Tab</kbd>: <strong>autocomplete</strong>.</li>\n<li><kbd>Ctrl</kbd> + <kbd>H</kbd>: global <strong>find/replace</strong>.</li>\n<li><kbd>Ctrl</kbd> + <kbd>G</kbd>: global <strong>find next</strong>.</li>\n</ul>\n<p>{:alert.alert-success}<br>\nWe can use system commands in Colab with <code>!&lt;command&gt;</code>. For example, <code>!git clone ...</code>.</p>\n<h2 id=\"import-libraries\">Import libraries <a class=\"direct-link\" href=\"#import-libraries\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">!</span>pip <span class=\"token function\">install</span> -q matplotlib-venn<br><span class=\"token comment\"># or</span><br><span class=\"token operator\">!</span>apt-get -qq <span class=\"token function\">install</span> -y libfluidsynth1</code></pre>\n<h2 id=\"upgrade%2Fswitch-tensorflow-versions\">Upgrade/Switch TensorFlow versions <a class=\"direct-link\" href=\"#upgrade%2Fswitch-tensorflow-versions\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># To determine which version you're using:</span><br><span class=\"token operator\">!</span>pip show tensorflow</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># For the current version:</span><br><span class=\"token operator\">!</span>pip <span class=\"token function\">install</span> --upgrade tensorflow</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># For a specific version:</span><br><span class=\"token operator\">!</span>pip <span class=\"token function\">install</span> <span class=\"token assign-left variable\">tensorflow</span><span class=\"token operator\">==</span><span class=\"token number\">1.2</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># For the latest nightly build:</span><br><span class=\"token operator\">!</span>pip <span class=\"token function\">install</span> tf-nightly</code></pre>\n<h2 id=\"git-with-colab\">Git with Colab <a class=\"direct-link\" href=\"#git-with-colab\">#</a></h2>\n<p>Check out <a href=\"/git\">my note for Git</a>.</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Initialize the git repository (optional)</span><br>!git init</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Set the global username and email</span><br><span class=\"token operator\">!</span>git config --global user.email <span class=\"token string\">\"youremail@domain.com\"</span><br><span class=\"token operator\">!</span>git config --global user.name <span class=\"token string\">\"Your Name\"</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Add all the files</span><br><span class=\"token operator\">!</span>git <span class=\"token function\">add</span> -A<br><span class=\"token comment\"># or</span><br><span class=\"token operator\">!</span>git <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Commit</span><br><span class=\"token operator\">!</span>git commit -m <span class=\"token string\">\"Comment for that commit\"</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Pass your Github credentials</span><br><span class=\"token operator\">!</span>git remote <span class=\"token function\">rm</span> origin <span class=\"token comment\"># in the case you meet \"fatal: remote origin already exists\"</span><br><span class=\"token operator\">!</span>git remote <span class=\"token function\">add</span> origin https://<span class=\"token operator\">&lt;</span>github-username<span class=\"token operator\">></span>:<span class=\"token operator\">&lt;</span>github-password<span class=\"token operator\">></span>@github.com/<span class=\"token operator\">&lt;</span>github-username<span class=\"token operator\">></span>/<span class=\"token operator\">&lt;</span>repository-name<span class=\"token operator\">></span>.git</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Push to origin</span><br><span class=\"token operator\">!</span>git push -u origin master</code></pre>\n<p>If you don't want to use your username andd password, you can use &quot;Personal access tokens&quot; on Github. Create one <a href=\"https://github.com/settings/tokens\">here</a> and then use,</p>\n<pre class=\"language-python\"><code class=\"language-python\">!git git remote add origin https<span class=\"token punctuation\">:</span><span class=\"token operator\">//</span><span class=\"token operator\">&lt;</span>username<span class=\"token operator\">></span><span class=\"token punctuation\">:</span><span class=\"token operator\">&lt;</span>access<span class=\"token operator\">-</span>token<span class=\"token operator\">></span>@github<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span><span class=\"token operator\">&lt;</span>username<span class=\"token operator\">></span><span class=\"token operator\">/</span><span class=\"token operator\">&lt;</span>repo<span class=\"token operator\">></span><span class=\"token punctuation\">.</span>git</code></pre>\n<h2 id=\"keep-colab-awake\">Keep Colab awake <a class=\"direct-link\" href=\"#keep-colab-awake\">#</a></h2>\n<p><kbd>F12</kbd> then <strong>Console</strong> and type,</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">ClickConnect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><br>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Working\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>  document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"colab-connect-button\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"connect\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br><span class=\"token punctuation\">}</span><br><span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span>ClickConnect<span class=\"token punctuation\">,</span><span class=\"token number\">60000</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"change-to-current-working-directory\">Change to current working directory <a class=\"direct-link\" href=\"#change-to-current-working-directory\">#</a></h2>\n<p>By default, the working directory is <code>/content/</code>. One can use below command to change to another place,</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">%</span>cd <span class=\"token operator\">/</span>content<span class=\"token operator\">/</span>data<span class=\"token operator\">-</span>science<span class=\"token operator\">-</span>learning</code></pre>\n<p>From that point, we are working on <code>/content/data-science-learning</code>.</p>\n<h2 id=\"upload-a-file-to-colab%5Bref%5D\">Upload a file to Colab<sup><a href=\"https://colab.research.google.com/notebooks/io.ipynb#scrollTo=hauvGV4hV-Mh\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup> <a class=\"direct-link\" href=\"#upload-a-file-to-colab%5Bref%5D\">#</a></h2>\n<p>Each user has a &quot;machine&quot; in <code>/content/</code>.</p>\n<h2 id=\"install\">Install <a class=\"direct-link\" href=\"#install\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> <span class=\"token function\">screen</span> <span class=\"token comment\"># ubuntu</span></code></pre>\n<h2 id=\"basic-command-lines\">Basic command lines <a class=\"direct-link\" href=\"#basic-command-lines\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># check screen version</span><br><span class=\"token function\">screen</span> -v</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># start new session (with name)</span><br><span class=\"token function\">screen</span> -S <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># list running sessions</span><br><span class=\"token function\">screen</span> -ls</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># attach to a running session (without name)</span><br><span class=\"token function\">screen</span> -x</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># attach to a running session (with name)</span><br><span class=\"token function\">screen</span> -rx <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span><br><span class=\"token comment\"># -x for an interactive (scrolling)</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># detach a running session</span><br><span class=\"token function\">screen</span> -d <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span> <span class=\"token comment\"># or Ctrl + A, D</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># kill a session</span><br><span class=\"token function\">screen</span> -X -S <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span> quit</code></pre>\n</div>\n<h3 id=\"delete-sessions\">Delete sessions <a class=\"direct-link\" href=\"#delete-sessions\">#</a></h3>\n<ol>\n<li>Reattach first: <code>screen -r &lt;name&gt;</code></li>\n<li><kbd>Ctrl</kbd> + <kbd>A</kbd>, <kbd>K</kbd> then <kbd>Y</kbd></li>\n</ol>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># kill ALL auto-created sesssions</span><br><span class=\"token function\">screen</span> -ls <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> pts <span class=\"token operator\">|</span> <span class=\"token function\">cut</span> -d. -f1 <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> <span class=\"token string\">'{print <span class=\"token variable\">$1</span>}'</span> <span class=\"token operator\">|</span> <span class=\"token function\">xargs</span> <span class=\"token function\">kill</span><br><br><span class=\"token comment\"># kill all detached sessions</span><br><span class=\"token function\">screen</span> -ls <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> Detached <span class=\"token operator\">|</span> <span class=\"token function\">cut</span> -d. -f1 <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> <span class=\"token string\">'{print <span class=\"token variable\">$1</span>}'</span> <span class=\"token operator\">|</span> <span class=\"token function\">xargs</span> <span class=\"token function\">kill</span></code></pre>\n<h2 id=\"create-a-screen-%2B-list-of-command-lines\">Create a screen + list of command lines <a class=\"direct-link\" href=\"#create-a-screen-%2B-list-of-command-lines\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">screen</span> -S <span class=\"token string\">'dat'</span> -dm <span class=\"token function\">bash</span> -c <span class=\"token string\">'cd /jekyll-site; bundle exec jekyll serve -I; exec sh'</span></code></pre>\n<h2 id=\"hotkeys\">Hotkeys <a class=\"direct-link\" href=\"#hotkeys\">#</a></h2>\n<ul>\n<li>Detach: <kbd>Ctrl</kbd> + <kbd>A</kbd>, <kbd>D</kbd></li>\n<li>Reattach: <kbd>Ctrl</kbd> + <kbd>A</kbd>, <kbd>R</kbd></li>\n<li>Kill current session: <kbd>Ctrl</kbd> + <kbd>A</kbd>, <kbd>K</kbd> then <kbd>Y</kbd></li>\n</ul>\n<h2 id=\"errors\">Errors <a class=\"direct-link\" href=\"#errors\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Cannot make directory '/run/screen': Permission denied</span><br><span class=\"token function\">mkdir</span> ~/.screen <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">chmod</span> <span class=\"token number\">700</span> ~/.screen<br><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">SCREENDIR</span><span class=\"token operator\">=</span><span class=\"token environment constant\">$HOME</span>/.screen<br><span class=\"token comment\"># also add this line to ~/.zshrc or ~/.bashrc</span></code></pre>\n<h2 id=\"reference\">Reference <a class=\"direct-link\" href=\"#reference\">#</a></h2>\n<ul>\n<li><a href=\"https://gist.github.com/jctosta/af918e1618682638aa82\">Screen Quick Reference</a></li>\n</ul>\n<p>Create a new cell and paste,</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> google<span class=\"token punctuation\">.</span>colab <span class=\"token keyword\">import</span> files<br><br>uploaded <span class=\"token operator\">=</span> files<span class=\"token punctuation\">.</span>upload<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br><br><span class=\"token keyword\">for</span> fn <span class=\"token keyword\">in</span> uploaded<span class=\"token punctuation\">.</span>keys<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>  <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'User uploaded file \"{name}\" with length {length} bytes'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><br>      name<span class=\"token operator\">=</span>fn<span class=\"token punctuation\">,</span> length<span class=\"token operator\">=</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>uploaded<span class=\"token punctuation\">[</span>fn<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<p>Run <mark>2 times</mark> this cell, at the 2nd time, you can choose your file.</p>\n<h3 id=\"using-google-drive\">Using Google Drive <a class=\"direct-link\" href=\"#using-google-drive\">#</a></h3>\n<p>Run a cell containing following codes,</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> google<span class=\"token punctuation\">.</span>colab <span class=\"token keyword\">import</span> drive<br>drive<span class=\"token punctuation\">.</span>mount<span class=\"token punctuation\">(</span><span class=\"token string\">'/content/drive'</span><span class=\"token punctuation\">)</span></code></pre>\n<p>and then follow the guide on the screen. In order to access to the drive,</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/content/drive/My Drive/foo.txt'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'w'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span><br>  f<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span><span class=\"token string\">'Hello Google Drive!'</span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"clone-a-repo-from-github\">Clone a repo from Github <a class=\"direct-link\" href=\"#clone-a-repo-from-github\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\">!git clone https<span class=\"token punctuation\">:</span><span class=\"token operator\">//</span>github<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>dinhanhthi<span class=\"token operator\">/</span>data<span class=\"token operator\">-</span>science<span class=\"token operator\">-</span>learning<span class=\"token punctuation\">.</span>git</code></pre>\n<p>The cloned folder are stored in <code>/content/</code>. If you wanna <code>pull</code> requests, use,</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">%</span>cd <span class=\"token operator\">/</span>content<span class=\"token operator\">/</span>data<span class=\"token operator\">-</span>science<span class=\"token operator\">-</span>learning<br>!git pull</code></pre>\n<h2 id=\"pytorch-with-gpu\">PyTorch with GPU <a class=\"direct-link\" href=\"#pytorch-with-gpu\">#</a></h2>\n<p>To enable GPU backend for your notebook, go to <strong>Edit</strong> → <strong>Notebook Settings</strong> and set <strong>Hardware accelerator</strong> to <strong>GPU</strong>.<sup><a href=\"https://jovianlin.io/pytorch-with-gpu-in-google-colab/\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<h2 id=\"install-7zip-reader%2C-graphviz%2C-pydot%2C-cartopy\">Install 7zip reader, GraphViz, PyDot, cartopy <a class=\"direct-link\" href=\"#install-7zip-reader%2C-graphviz%2C-pydot%2C-cartopy\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># https://pypi.python.org/pypi/libarchive</span><br><span class=\"token operator\">!</span>apt-get -qq <span class=\"token function\">install</span> -y libarchive-dev <span class=\"token operator\">&amp;&amp;</span> pip <span class=\"token function\">install</span> -q -U libarchive<br><span class=\"token function\">import</span> libarchive</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># https://pypi.python.org/pypi/pydot</span><br><span class=\"token operator\">!</span>apt-get -qq <span class=\"token function\">install</span> -y graphviz <span class=\"token operator\">&amp;&amp;</span> pip <span class=\"token function\">install</span> -q pydot<br><span class=\"token function\">import</span> pydot</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">!</span>apt-get -qq <span class=\"token function\">install</span> python-cartopy python3-cartopy<br><span class=\"token function\">import</span> cartopy</code></pre>\n<h2 id=\"save-as-html\">Save as HTML <a class=\"direct-link\" href=\"#save-as-html\">#</a></h2>\n<p>Jupyter Notebook has an option to 'Download as' HTML (or other) format. Google Colaboratory does not.</p>\n<ol>\n<li>\n<p><a href=\"https://nbconvert.readthedocs.io/en/latest/install.html\">Install the nbconvert package</a>.</p>\n</li>\n<li>\n<p>Save your Colab notebook.</p>\n</li>\n<li>\n<p>In your terminal:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">jupyter nbconvert --to <span class=\"token operator\">&lt;</span>output format<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>filename.ipynb<span class=\"token operator\">></span><br><span class=\"token comment\"># jupyter nbconvert --to html mynotebook.ipynb</span></code></pre>\n</li>\n</ol>\n<h2 id=\"other-functions\">Other functions <a class=\"direct-link\" href=\"#other-functions\">#</a></h2>\n<ul>\n<li>Interrupt a long running python process: <strong>Runtime</strong> &gt; <strong>Interrupt execution</strong> (<kbd>Alt</kbd> + <kbd>M</kbd> <kbd>I</kbd>).</li>\n<li>Support Jupyter magic commands, check full list <a href=\"https://nbviewer.jupyter.org/github/ipython/ipython/blob/1.x/examples/notebooks/Cell%20Magics.ipynb\">here</a>.</li>\n</ul>\n",
      "date_published": "2020-03-08T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/github/",
      "url": "https://dinhanhthi.com/github/",
      "title": "Github",
      "content_html": "<p>👉 Note: <a href=\"/git/\">Git</a>.</p>\n<h2 id=\"view-readme.md-localhost\">View <code>README.md</code> localhost <a class=\"direct-link\" href=\"#view-readme.md-localhost\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\">pip <span class=\"token function\">install</span> grip <span class=\"token comment\"># https://github.com/joeyespo/grip</span><br><span class=\"token builtin class-name\">cd</span> myrepo<br>grip <span class=\"token comment\"># Running on http://localhost:6419/</span></code></pre>\n<p><strong>Update</strong>: <code>grip</code> support with limited times of usage, we can use VSCode markdown previwer instead.</p>\n<h2 id=\"clone-via-git%40-(ssh)\">Clone via git@ (ssh) <a class=\"direct-link\" href=\"#clone-via-git%40-(ssh)\">#</a></h2>\n<p>👉 More references: <a href=\"https://gist.github.com/jexchan/2351996\">this</a> and <a href=\"https://gist.github.com/oanhnn/80a89405ab9023894df7\">this</a>.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Windows + Linux</span><br>ssh-keygen -t rsa -b <span class=\"token number\">4096</span> -C <span class=\"token string\">\"dinhanhthi@gmail.com\"</span><br><span class=\"token comment\"># (-C for adding comment only)</span><br><span class=\"token comment\"># Enter a file:</span><br><span class=\"token comment\"># Linux: /home/thi/.ssh/id_rsa</span><br><span class=\"token comment\"># Windows: C:\\Users\\dinha\\.ssh\\id_rsa</span><br><span class=\"token comment\"># Enter password</span><br><br><span class=\"token comment\"># NOTE: if you use different emails, create diffre id_rsa files (with different names)</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Tell who you are? (it's global, you may need to set it locally for each repo)</span><br><span class=\"token function\">git</span> config --global user.name <span class=\"token string\">\"Thi Dinh\"</span><br><span class=\"token function\">git</span> config --global user.email dinhanhthi@gmail.com</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ~/.ssh/config</span><br><span class=\"token comment\"># Default github account: dinhanhthi@gmail.com</span><br>Host github.com<br>   HostName github.com<br>   IdentityFile ~/.ssh/id_rsa<br>   IdentitiesOnly <span class=\"token function\">yes</span><br><br><span class=\"token comment\"># Other github account: thi@ideta.io</span><br>Host github.com<br>   HostName github.com<br>   IdentityFile ~/.ssh/id_rsa_ideta<br>   IdentitiesOnly <span class=\"token function\">yes</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Linux only</span><br><span class=\"token comment\"># Be careful, it will reset and use different agent!!!!</span><br><span class=\"token comment\"># Use \"ssh-add -l\" to check first!</span><br><span class=\"token builtin class-name\">eval</span> <span class=\"token string\">\"<span class=\"token variable\"><span class=\"token variable\">$(</span>ssh-agent -s<span class=\"token variable\">)</span></span>\"</span><br>ssh-add ~/.ssh/id_rsa<br><br><span class=\"token comment\"># delete all cached keys (be careful)</span><br>ssh-add -D<br><br><span class=\"token builtin class-name\">eval</span> <span class=\"token string\">\"<span class=\"token variable\"><span class=\"token variable\">$(</span>ssh-agent -s<span class=\"token variable\">)</span></span>\"</span><br>ssh-add ~/.ssh/id_rsa<br><span class=\"token comment\"># ssh-add ~/.ssh/id_rsa_ideta</span><br><br><span class=\"token comment\"># check saved keys</span><br>ssh-add -l</code></pre>\n<div class=\"info\">\n<p>If you still have the problem of multiple account ssh,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Try to reset ssh agent</span><br><span class=\"token builtin class-name\">eval</span> <span class=\"token string\">\"<span class=\"token variable\"><span class=\"token variable\">$(</span>ssh-agent -s<span class=\"token variable\">)</span></span>\"</span><br><span class=\"token comment\"># and add again all the profiles you have</span></code></pre>\n</div>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Go to https://github.com/settings/keys</span><br><span class=\"token comment\"># copy public key</span><br><span class=\"token function\">cat</span> ~/.ssh/id_rsa.pub</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># clone some repo</span><br><span class=\"token function\">git</span> clone git@github.com:dinhanhthi/dinhanhthi.com.git</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># You may have to set the specific config user name and email on the repo</span><br><span class=\"token comment\"># (without -g)</span><br><span class=\"token function\">git</span> config user.name <span class=\"token string\">\"Thi\"</span><br><span class=\"token function\">git</span> config user.name <span class=\"token string\">\"dinhanhthi@gmail.com\"</span></code></pre>\n<h2 id=\"info\">Info <a class=\"direct-link\" href=\"#info\">#</a></h2>\n<ul>\n<li>Commits to a <strong>fork</strong> don't appear in your contributions graph.</li>\n<li>Commits to a generated from <strong>template</strong> can appear in your contributions graph.</li>\n</ul>\n<h2 id=\"repo-template\">Repo template <a class=\"direct-link\" href=\"#repo-template\">#</a></h2>\n<p>I wanna make a theme <a href=\"https://github.com/dinhanhthi/notetheme2\"><code>notetheme2</code></a> based on <a href=\"https://github.com/dinhanhthi/dinhanhthi.com\">dinhanhthi.com</a>.</p>\n<ol>\n<li>\n<p>Make <code>dinhanhthi.com</code> be a template (Go to <em>Settings</em>)</p>\n</li>\n<li>\n<p>Create a new repo based on this template.</p>\n</li>\n<li>\n<p>Create a new branch <code>notetheme2</code> on <code>dinhanhthi.com</code>. Make changes on this branch.</p>\n</li>\n<li>\n<p>Everything we have a &quot;theme change&quot; on <code>dinhanhthi.com/master</code>, merge it to branch <code>dinhanhthi.com/notetheme2</code>.</p>\n</li>\n<li>\n<p>If there are <strong>files</strong> (only for files) in <code>dinhanhthi.com/notetheme2</code> you wanna keep, add below line to <code>.gitattributes</code> (under branch <code>dinhanhthi.com/notetheme2</code>) before performing the merge,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># add line to .gitattributes</span><br><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'file_name.txt merge=ours'</span> <span class=\"token operator\">>></span> .gitattributes<br><span class=\"token comment\"># on windows, remove `''`</span></code></pre>\n</li>\n<li>\n<p>If there are <strong>folders</strong> (or <strong>files</strong>) in <code>dinhanhthi.com/notetheme2</code> you <strong>don't wanna keep</strong> (from <code>/master</code>), just delete them and make a new commit. From this time, later merges will ignore them.</p>\n</li>\n<li>\n<p>If there are <strong>folders</strong> in <code>/notethem2</code> you wanna <strong>keep the current state</strong> (instead of merging from master), create a script <code>reset_folders.sh</code></p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/sh</span><br><span class=\"token comment\"># used for branch notetheme2 only</span><br><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'Reset some only-this-branch folders after merging.'</span><br><span class=\"token function\">git</span> reset folder_1 folder_2<br><span class=\"token function\">git</span> checkout <span class=\"token builtin class-name\">.</span><br><span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span><br><span class=\"token function\">git</span> commit -m <span class=\"token string\">\"update from master\"</span></code></pre>\n<p>Each time you run the merge, run</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> merge master <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">sh</span> reset_folders.sh</code></pre>\n</li>\n<li>\n<p>Update changes from <code>dinhanhthi.com/notetheme2</code> to repo <code>notetheme2</code><sup><a href=\"https://stackoverflow.com/questions/56577184/github-pull-changes-from-a-template-repository/56577320\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup>.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># add dinhanhthi.com as a remote</span><br><span class=\"token function\">git</span> remote <span class=\"token function\">add</span> template <span class=\"token punctuation\">[</span>URL of the template repo<span class=\"token punctuation\">]</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># update the changes</span><br><span class=\"token function\">git</span> fetch --all</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># update from template's branch</span><br><span class=\"token function\">git</span> merge template/notetheme2</code></pre>\n</li>\n<li>\n<p>If there is an error <code>fatal: refusing to merge unrelated histories</code>, try to add <code>--allow-unrelated-histories</code>. There must be <a href=\"#conflict\">conflict</a>.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># keep remotes</span><br><span class=\"token function\">git</span> merge -X theirs template/notetheme2 --allow-unrelated-histories<br><span class=\"token comment\"># keep local</span><br><span class=\"token function\">git</span> merge -X ours template/notetheme2 --allow-unrelated-histories</code></pre>\n</li>\n</ol>\n<h2 id=\"add-shields-tags\">Add Shields tags <a class=\"direct-link\" href=\"#add-shields-tags\">#</a></h2>\n<p>👉 Main shield site <a href=\"https://shields.io/\">here</a>.<br>\n👉 Example of usage: <a href=\"https://github.com/dinhanhthi/dinhanhthi\">my main github page</a>.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># scikit-learn badge</span><br>http://img.shields.io/badge/-Scikit%20Learn-efa300?style<span class=\"token operator\">=</span>flat-square<span class=\"token operator\">&amp;</span><span class=\"token assign-left variable\">logo</span><span class=\"token operator\">=</span>scikit-learn<span class=\"token operator\">&amp;</span><span class=\"token assign-left variable\">logoColor</span><span class=\"token operator\">=</span>fff<br><span class=\"token comment\"># ...&lt;NAME>-&lt;Background-Color>?style...&amp;logo=&lt;LOGO>&amp;logoColor=&lt;LOGO-COLOR></span></code></pre>\n<ul>\n<li>Logo name can be found at <a href=\"https://simpleicons.org/?q=node\">simpleicon</a>. If the name includes spaces, replace them with dashes (e.g: <code>?logo=visual-studio-code</code>)</li>\n<li>Wanna create a custom logo?\n<ul>\n<li>Change SVG to PNG if needed: use <a href=\"https://svgtopng.com/\">this site</a>.</li>\n<li>Change logo's color to white: use <a href=\"https://manytools.org/image/colorize-filter/\">this site</a>.</li>\n<li>Must resize the image to 14x14: use <a href=\"https://www.iloveimg.com/resize-image\">this site</a>.</li>\n<li>Convert to base64 file: use <a href=\"https://b64.io/\">this site</a>, then copy <code>data:image/png;base64,iVB...</code> and paste after <code>&amp;logo=</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"errors\">Errors <a class=\"direct-link\" href=\"#errors\">#</a></h2>\n<p><code>fatal: Authentication failed for</code>: It's because you enabled two-factor authentication in your Github account.</p>\n<ol>\n<li>Generate a new token: <a href=\"https://github.com/settings/tokens\">click here</a>.</li>\n<li>Copy that token and use it as a new password.</li>\n</ol>\n<hr>\n<pre class=\"language-bash\"><code class=\"language-bash\">ssh: connect to <span class=\"token function\">host</span> github.com port <span class=\"token number\">22</span>: No route to <span class=\"token function\">host</span><br>fatal: Could not <span class=\"token builtin class-name\">read</span> from remote repository</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># solution</span><br><span class=\"token function\">nano</span> ~/.ssh/config<br><span class=\"token comment\"># add following</span><br>Host github.com<br>    Hostname ssh.github.com<br>    Port <span class=\"token number\">443</span><br><span class=\"token comment\"># run again to check</span><br><span class=\"token function\">ssh</span> -T git@github.com</code></pre>\n",
      "date_published": "2020-03-08T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/docker/",
      "url": "https://dinhanhthi.com/docker/",
      "title": "Docker 101",
      "content_html": "<p>👉 Note: <a href=\"/docker-gpu\"> Docker  + GPUs</a><br>\n👉 Note: <a href=\"/wordpress-docker\"> Wordpress Docker</a><br>\n👉 Note: <a href=\"/airflow-k8s-101\"> Airflow + Kubernetes 101</a><br>\n👉 Note: <a href=\"/tensorflow\"> Tensorflow extra</a></p>\n<h2 id=\"what-and-why%3F\">What and Why? <a class=\"direct-link\" href=\"#what-and-why%3F\">#</a></h2>\n<div class=\"hsbox\"><div class=\"hs__title\">Intuitive images</div><div class=\"hs__content\"><p><img src=\"/img/post/deploy/docker/docker.png\" alt=\"What's docker\" class=\"img-80\"><br>\n<em>Souce <a href=\"https://rollout.io/blog/is-docker-secure/\">rollout.io</a>.</em></p>\n<p><img src=\"/img/post/deploy/docker/vm-vs-docker.png\" alt=\"Container  vs Virtual Machine\" class=\"img-100\"><br>\n<em>Container  vs Virtual Machine, souce <a href=\"https://www.docker.com/resources/what-container\">docker.com</a>.</em></p>\n<p><img src=\"/img/post/deploy/docker/ram_docker_vm.jpg\" alt=\"RAM usage: Docker  vs Virtual Machine\" class=\"img-80\"><br>\n<em>RAM usage: Docker  vs Virtual Machine, souce <a href=\"https://www.edureka.co/blog/what-is-docker-container\">eureka.com</a>.</em></p>\n</div></div>\n<h2 id=\"abbreviate\">Abbreviate <a class=\"direct-link\" href=\"#abbreviate\">#</a></h2>\n<div class=\"two-columns-list\">\n<ul>\n<li><code>ps</code> = process status : check running containers (with <code>-a</code> for all)</li>\n<li><code>-i</code> = interactive : used in <code>docker exec</code> or <code>docker run</code></li>\n<li><code>-t</code> = terminal : used in <code>docker exec</code> or <code>docker run</code></li>\n<li><code>-m</code> = memory</li>\n<li><code>-v</code> or <code>--volume</code> : corresponding folders in/out containers.</li>\n<li><code>--rm</code> : create temprarily a container (removed after exit)</li>\n</ul>\n</div>\n<h2 id=\"installation\">Installation <a class=\"direct-link\" href=\"#installation\">#</a></h2>\n<p>For all platforms, check <a href=\"https://docs.docker.com/get-docker/\">this</a>.</p>\n<h3 id=\"linux\">Linux <a class=\"direct-link\" href=\"#linux\">#</a></h3>\n<p class=\"noindent\"></p>\n<ul>\n<li>\n<p>For Linux, check <a href=\"https://docs.docker.com/engine/install/\">this</a>!</p>\n<div class=\"hsbox\"><div class=\"hs__title\">Show codes</div><div class=\"hs__content\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># uninstall old versions</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> remove docker docker-engine docker.io containerd runc<br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update<br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> <span class=\"token punctuation\">\\</span><br>    apt-transport-https <span class=\"token punctuation\">\\</span><br>    ca-certificates <span class=\"token punctuation\">\\</span><br>    <span class=\"token function\">curl</span> <span class=\"token punctuation\">\\</span><br>    gnupg-agent <span class=\"token punctuation\">\\</span><br>    software-properties-common<br><span class=\"token function\">curl</span> -fsSL https://download.docker.com/linux/ubuntu/gpg <span class=\"token operator\">|</span> <span class=\"token function\">sudo</span> apt-key <span class=\"token function\">add</span> -<br><br><span class=\"token comment\"># make sure: 9DC8 5822 9FC7 DD38 854A  E2D8 8D81 803C 0EBF CD88</span><br><span class=\"token function\">sudo</span> apt-key fingerprint 0EBFCD88<br><span class=\"token function\">sudo</span> add-apt-repository <span class=\"token punctuation\">\\</span><br>  <span class=\"token string\">\"deb [arch=amd64] https://download.docker.com/linux/ubuntu \\<br>  <span class=\"token variable\"><span class=\"token variable\">$(</span>lsb_release -cs<span class=\"token variable\">)</span></span> \\<br>  stable\"</span><br><br><span class=\"token comment\"># install docker engine</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update<br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> docker-ce docker-ce-cli containerd.io<br><br><span class=\"token comment\"># check if everything is ok</span><br><span class=\"token function\">sudo</span> docker run hello-world<br><br><span class=\"token comment\"># incase docker-compose isn't installed</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> docker-compose</code></pre>\n</div></div><p>If you use Ubuntu 20.04+, replace <code>$(lsb_release -cs)</code> with <code>eoan</code> because docker currently (17 May 20) doesn't support 20.04 yet!</p>\n</li>\n<li>\n<p>If wanna run docker without <code>root</code>, check <a href=\"https://docs.docker.com/engine/install/linux-postinstall/\">this</a>.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">groupadd</span> docker <span class=\"token comment\"># create a docker group</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">usermod</span> -aG docker <span class=\"token operator\">&lt;</span>user<span class=\"token operator\">></span> <span class=\"token comment\"># add &lt;user> to group</span><br>newgrp docker <span class=\"token comment\"># activate the changes</span></code></pre>\n</li>\n<li>\n<p>Configure docker start on boot (Ubuntu 15.04 or later)</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl <span class=\"token builtin class-name\">enable</span> docker</code></pre>\n</li>\n</ul>\n<h3 id=\"macos\">MacOS <a class=\"direct-link\" href=\"#macos\">#</a></h3>\n<p>👉 Check <a href=\"https://docs.docker.com/docker-for-mac/install/\">this</a>.</p>\n<h3 id=\"windows\">Windows <a class=\"direct-link\" href=\"#windows\">#</a></h3>\n<p>👉 Note: <a href=\"/docker-wsl2-windows/#docker-%2B-gpu-%2B-wsl\">Docker + WSL2</a></p>\n<div class=\"hsbox\"><div class=\"hs__title\">Check the requirements</div><div class=\"hs__content\"><p>You must have Windows 10: Pro, Enterprise, or Education (Build 15063 or later). Check <a href=\"https://docs.docker.com/docker-for-windows/install/#what-to-know-before-you-install\">other requirements</a>.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># POWERSHELL</span><br><span class=\"token comment\"># check window version</span><br>Get-WmiObject -Class Win32_OperatingSystem <span class=\"token operator\">|</span> % Caption<br><span class=\"token comment\"># check window build number</span><br>Get-WmiObject -Class Win32_OperatingSystem <span class=\"token operator\">|</span> % Buildnumber</code></pre>\n<p>Active <strong>Hyper-V</strong> and <strong>Containers</strong> (you can do it manually in <strong>Turn Windows features on or off</strong>)</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Open PowerShell with Administrator and run following</span><br>Enable-WindowsOptionalFeature -Online -FeatureName containers –All<br>Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Hyper-V –All<br><span class=\"token comment\"># restart</span></code></pre>\n</div></div>\n<ol>\n<li><a href=\"https://docs.docker.com/docker-for-windows/install/\">Download</a> and install.</li>\n<li>Check <code>docker version</code>.</li>\n<li>Try <code>docker run hello-world</code>.</li>\n</ol>\n<h3 id=\"with-gpus-support%3F\">With GPUs support? <a class=\"direct-link\" href=\"#with-gpus-support%3F\">#</a></h3>\n<p>Check <a href=\"/docker-gpu\">this note</a>.</p>\n<h2 id=\"uninstall\">Uninstall <a class=\"direct-link\" href=\"#uninstall\">#</a></h2>\n<h3 id=\"linux-2\">Linux <a class=\"direct-link\" href=\"#linux-2\">#</a></h3>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># from docker official</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> remove docker docker-engine docker.io containerd runc</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># identify what installed package you have</span><br>dpkg -l <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> -i docker<br><br><span class=\"token comment\"># uninstall</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> purge -y docker-engine docker docker.io docker-ce docker-ce-cli<br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> autoremove -y --purge docker-engine docker docker.io docker-ce</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># remove images containers</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">rm</span> -rf /var/lib/docker /etc/docker<br><span class=\"token function\">sudo</span> <span class=\"token function\">rm</span> /etc/apparmor.d/docker<br><span class=\"token function\">sudo</span> <span class=\"token function\">groupdel</span> docker<br><span class=\"token function\">sudo</span> <span class=\"token function\">rm</span> -rf /var/run/docker.sock</code></pre>\n<h2 id=\"login-%26-download-images\">Login &amp; Download images <a class=\"direct-link\" href=\"#login-%26-download-images\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\">docker login<br><span class=\"token comment\"># using username (not email) and password</span></code></pre>\n<p class=\"noindent\"></p>\n<ul>\n<li>Download at <a href=\"https://hub.docker.com/\">Docker Hub</a>.</li>\n<li>Download images are store at <code>C:\\ProgramData\\DockerDesktop\\vm-data</code> (Windows) by default.</li>\n</ul>\n<h2 id=\"check-info\">Check info <a class=\"direct-link\" href=\"#check-info\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># docker's version</span><br>docker --version</code></pre>\n<h3 id=\"images\">Images <a class=\"direct-link\" href=\"#images\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># list images on the host</span><br>docker images</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># check image's info</span><br>docker inspec <span class=\"token operator\">&lt;</span>image_id<span class=\"token operator\">></span></code></pre>\n</div>\n<h3 id=\"containers\">Containers <a class=\"direct-link\" href=\"#containers\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># list running containers</span><br>docker <span class=\"token function\">ps</span><br>docker <span class=\"token function\">ps</span> -a <span class=\"token comment\"># all (including stopped)</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># only the ids</span><br>docker <span class=\"token function\">ps</span> -q<br>docker <span class=\"token function\">ps</span> -a -q</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># container's size</span><br>docker <span class=\"token function\">ps</span> -s<br>docker <span class=\"token function\">ps</span> -a -s</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># container's names only</span><br>docker <span class=\"token function\">ps</span> --format <span class=\"token string\">'{{.Names}}'</span><br>docker <span class=\"token function\">ps</span> -a --format <span class=\"token string\">'{{.Names}}'</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Check the last command in container</span><br>docker <span class=\"token function\">ps</span> --format <span class=\"token string\">'{{.Command}}'</span> --no-trunc</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># check log</span><br><span class=\"token comment\"># useful if we wanna see the last running tasks's</span><br>docker container logs <span class=\"token operator\">&lt;</span>container_name<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># get ip address</span><br>docker inspect <span class=\"token operator\">&lt;</span>container_name<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> IPAddress</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Enter currently running container</span><br>docker attach <span class=\"token operator\">&lt;</span>container_name<span class=\"token operator\">></span></code></pre>\n</div>\n<h3 id=\"others\">Others <a class=\"direct-link\" href=\"#others\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># RAM &amp; CPU usages</span><br>docker stats<br>docker stats <span class=\"token operator\">&lt;</span>container_name<span class=\"token operator\">></span></code></pre>\n</div>\n<h2 id=\"attach-%2F-start-%2F-stop\">Attach / Start / Stop <a class=\"direct-link\" href=\"#attach-%2F-start-%2F-stop\">#</a></h2>\n<p>We can use sometimes interchangeable between <code>&lt;container_id&gt;</code> and <code>&lt;container_name&gt;</code>.</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># get info (container's id, image's id first)</span><br>docker <span class=\"token function\">ps</span> -a</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># start a stopped container</span><br>docker start <span class=\"token operator\">&lt;</span>container_id<span class=\"token operator\">></span><br><br><span class=\"token comment\"># start and enter the container</span><br>docker start -i <span class=\"token operator\">&lt;</span>container<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># stop a container</span><br>docker stop <span class=\"token operator\">&lt;</span>container_id<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># going to running container env</span><br>docker <span class=\"token builtin class-name\">exec</span> -it <span class=\"token operator\">&lt;</span>container_name<span class=\"token operator\">></span> <span class=\"token function\">bash</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># stop all running containers</span><br>docker stop <span class=\"token variable\"><span class=\"token variable\">$(</span>docker <span class=\"token function\">ps</span> -a -q<span class=\"token variable\">)</span></span></code></pre>\n</div>\n<h2 id=\"delete\">Delete <a class=\"direct-link\" href=\"#delete\">#</a></h2>\n<p>Read more <a href=\"https://www.digitalocean.com/community/tutorials/how-to-remove-docker-images-containers-and-volumes\">here</a>.</p>\n<h3 id=\"everything\">Everything <a class=\"direct-link\" href=\"#everything\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># any resources</span><br>docker system prune</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># with all unused images</span><br>docker system prune -a</code></pre>\n</div>\n<h3 id=\"images-2\">Images <a class=\"direct-link\" href=\"#images-2\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># list all images</span><br>docker images -a</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># remove a specific image</span><br>docker image <span class=\"token function\">rm</span> <span class=\"token operator\">&lt;</span>IMAGE_ID<span class=\"token operator\">></span></code></pre>\n</div>\n<p><strong>Dangling images</strong> are layers that have no relationship to any tagged images.</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># list dangling images</span><br>docker images -f <span class=\"token assign-left variable\">dangling</span><span class=\"token operator\">=</span>true</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># remove dangling images</span><br>docker images purge</code></pre>\n</div>\n<h3 id=\"containers-2\">Containers <a class=\"direct-link\" href=\"#containers-2\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># remove a specific containers</span><br>docker <span class=\"token function\">rm</span> -f <span class=\"token operator\">&lt;</span>container-id<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># remove all containers</span><br>docker <span class=\"token function\">rm</span> -f <span class=\"token variable\"><span class=\"token variable\">$(</span>docker <span class=\"token function\">ps</span> -a -q<span class=\"token variable\">)</span></span></code></pre>\n</div>\n<h2 id=\"build-an-image\">Build an image <a class=\"direct-link\" href=\"#build-an-image\">#</a></h2>\n<h3 id=\"create\">Create <a class=\"direct-link\" href=\"#create\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># build image with Dockerfile</span><br>docker build -t <span class=\"token operator\">&lt;</span>img_name<span class=\"token operator\">></span> <span class=\"token builtin class-name\">.</span><br><br><span class=\"token comment\"># custom Dockerfile.abc</span><br>docker build -t <span class=\"token operator\">&lt;</span>img_name<span class=\"token operator\">></span> <span class=\"token builtin class-name\">.</span> -f Dockerfile.abc</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># with docker-compose</span><br>docker-compose up<br><span class=\"token comment\"># with custom file</span><br>docker-compose -f docker-compose.amin.yml up -d</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># if success</span><br><span class=\"token comment\"># service name \"docker_thi\"</span><br>docker run -it <span class=\"token operator\">&lt;</span>service_name<span class=\"token operator\">></span> <span class=\"token function\">bash</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># from current container</span><br>docker <span class=\"token function\">ps</span> -a <span class=\"token comment\"># check all containers</span><br>docker commit <span class=\"token operator\">&lt;</span>container_id<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>new_image_name<span class=\"token operator\">></span></code></pre>\n</div>\n<h3 id=\"dockerfile\"><code>Dockerfile</code> <a class=\"direct-link\" href=\"#dockerfile\">#</a></h3>\n<pre class=\"language-bash\"><code class=\"language-bash\">FROM nvidia/cuda:10.2-base<br><br><span class=\"token comment\"># encoding</span><br>ENV <span class=\"token environment constant\">LANG</span> en_US.UTF-8<br>ENV <span class=\"token environment constant\">LANGUAGE</span> en_US:en<br>ENV <span class=\"token environment constant\">LC_ALL</span> en_US.UTF-8<br><br><span class=\"token comment\"># fix (tzdatachoose)</span><br>ARG <span class=\"token assign-left variable\">DEBIAN_FRONTEND</span><span class=\"token operator\">=</span>noninteractive<br><br>RUN <span class=\"token function\">apt-get</span> -y update <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">\\</span><br>    <span class=\"token function\">apt-get</span> -y upgrade <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">\\</span><br>    <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> -y openssh-server <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">\\</span><br>    <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> -y python3-pip python3-dev locales <span class=\"token function\">git</span> r-base<br><br><span class=\"token comment\"># ssh server</span><br>RUN <span class=\"token function\">mkdir</span> /var/run/sshd<br>RUN <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'root:qwerty'</span> <span class=\"token operator\">|</span> chpasswd<br>RUN <span class=\"token function\">sed</span> -i <span class=\"token string\">'s/#PermitRootLogin prohibit-password/PermitRootLogin yes/'</span> /etc/ssh/sshd_config<br><span class=\"token comment\"># SSH login fix. Otherwise user is kicked off after login</span><br>RUN <span class=\"token function\">sed</span> <span class=\"token string\">'s@session\\s*required\\s*pam_loginuid.so@session optional pam_loginuid.so@g'</span> -i /etc/pam.d/sshd<br><span class=\"token comment\"># need?</span><br>ENV NOTVISIBLE <span class=\"token string\">\"in users profile\"</span><br>RUN <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"export VISIBLE=now\"</span> <span class=\"token operator\">>></span> /etc/profile<br><br><span class=\"token comment\"># create alias</span><br>RUN <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'alias python=\"python3\"'</span> <span class=\"token operator\">>></span> ~/.bashrc<br>RUN <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'alias pip=\"pip3\"'</span> <span class=\"token operator\">>></span> ~/.bashrc<br><br><span class=\"token comment\"># create shortcuts</span><br>RUN <span class=\"token function\">ln</span> -s /abc/xyz /xyz/xyz<br><br><span class=\"token comment\"># install python's requirements</span><br>COPY requirements_dc.txt requirements.txt<br>RUN python3 -m pip <span class=\"token function\">install</span> --upgrade pip <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">\\</span><br>    python3 -m pip <span class=\"token function\">install</span> -r requirements.txt<br>COPY <span class=\"token builtin class-name\">.</span> <span class=\"token builtin class-name\">.</span><br><br><span class=\"token comment\"># export port ssh</span><br>EXPOSE <span class=\"token number\">22</span><br><br>COPY script.sh starting_script.sh<br><span class=\"token comment\"># run</span><br>CMD <span class=\"token punctuation\">[</span><span class=\"token string\">\"sh\"</span>,<span class=\"token string\">\"-c\"</span>,<span class=\"token string\">\"cd /data_controller/utils/ &amp;&amp; sh generate_grpc_code_from_protos.sh &amp;&amp; cd /srv/ &amp;&amp; sh starting_script.sh\"</span><span class=\"token punctuation\">]</span></code></pre>\n<div class=\"hsbox\"><div class=\"hs__title\">Connect to container via ssh</div><div class=\"hs__content\"><pre class=\"language-bash\"><code class=\"language-bash\">FROM ubuntu:20.04<br><br>RUN <span class=\"token function\">apt-get</span> update <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> -y openssh-server<br>RUN <span class=\"token function\">mkdir</span> /var/run/sshd<br>RUN <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'root:THEPASSWORDYOUCREATED'</span> <span class=\"token operator\">|</span> chpasswd<br>RUN <span class=\"token function\">sed</span> -i <span class=\"token string\">'s/#*PermitRootLogin prohibit-password/PermitRootLogin yes/g'</span> /etc/ssh/sshd_config<br><br><span class=\"token comment\"># SSH login fix. Otherwise user is kicked off after login</span><br>RUN <span class=\"token function\">sed</span> -i <span class=\"token string\">'s@session\\s*required\\s*pam_loginuid.so@session optional pam_loginuid.so@g'</span> /etc/pam.d/sshd<br><br>ENV NOTVISIBLE <span class=\"token string\">\"in users profile\"</span><br>RUN <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"export VISIBLE=now\"</span> <span class=\"token operator\">>></span> /etc/profile<br><br>EXPOSE <span class=\"token number\">22</span><br>CMD <span class=\"token punctuation\">[</span><span class=\"token string\">\"/usr/sbin/sshd\"</span>, <span class=\"token string\">\"-D\"</span><span class=\"token punctuation\">]</span></code></pre>\n<p>For more about ssh connection, check <a href=\"https://docs.docker.com/engine/examples/running_ssh_service/\">official doc</a>.</p>\n<p>If <code>.env</code> doesn't work? =&gt; This is expected. SSH wipes out the environment as part of the login process. <sup><a href=\"https://github.com/moby/moby/issues/2569#issuecomment-27973910\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># For example, all environement variables are stored in a</span><br><span class=\"token comment\"># /home/thi/.env</span><br><br><span class=\"token comment\"># add them to container's env</span><br><span class=\"token function\">cat</span> /home/thi/.env <span class=\"token operator\">>></span> /etc/environment<br><br><span class=\"token comment\"># exit current ssh session</span><br><span class=\"token comment\"># connect again</span><br><br><span class=\"token comment\"># check</span><br><span class=\"token function\">env</span></code></pre>\n<p>More references: <a href=\"https://askubuntu.com/questions/58814/how-do-i-add-environment-variables\">here</a> and <a href=\"https://stackoverflow.com/questions/34630571/docker-env-variables-not-set-while-log-via-shell\">here</a>.</p>\n</div></div>\n<div class=\"hsbox\"><div class=\"hs__title\">Meaning of terms</div><div class=\"hs__content\"><ul>\n<li>\n<p><code>FROM</code>: the base image you use, can be obtained from <a href=\"https://hub.docker.com/\">Docker Hub</a>. For example, <code>FROM ubuntu:18.04</code> (<code>18.04</code> is a tag, <code>latest</code> is default)</p>\n</li>\n<li>\n<p><code>WORKDIR app/</code>: Use <code>app/</code> as the working directory.</p>\n</li>\n<li>\n<p><code>RUN</code>: install your application and packages requited, e.g. <code>RUN apt-get -y update</code>.</p>\n<ul>\n<li><code>RUN &lt;command&gt;</code> (shell form)\n<ul>\n<li><code>RUN [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;]</code> (exec form)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><code>CMD</code>: sets default command and/or parameters, which can be overwritten if docker container runs with command lines. If there are many <code>CMD</code>s, the last will be used.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># in Dockerfile</span><br>CMD <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Hello world\"</span><br><span class=\"token comment\"># run only</span><br>docker run -it <span class=\"token operator\">&lt;</span>image<span class=\"token operator\">></span><br><span class=\"token comment\"># output: \"Hello world\"</span><br><br><span class=\"token comment\"># run with a command line</span><br>docker run -it <span class=\"token operator\">&lt;</span>image<span class=\"token operator\">></span> /bin/bash<br><span class=\"token comment\"># output (CMD ignored, bash run instead): root@7de4bed89922:/#</span></code></pre>\n<ul>\n<li><code>CMD [&quot;executable&quot;,&quot;param1&quot;,&quot;param2&quot;]</code> (exec form, preferred)</li>\n<li><code>CMD [&quot;param1&quot;,&quot;param2&quot;]</code> (sets additional default parameters for <code>ENTRYPOINT</code> in exec form)</li>\n<li><code>CMD command param1 param2</code> (shell form)</li>\n<li>Multiple commands: <code>CMD [&quot;sh&quot;,&quot;-c&quot;,&quot;mkdir abc &amp;&amp; cd abc &amp;&amp; touch new.file&quot;]</code></li>\n</ul>\n</li>\n<li>\n<p><code>ENTRYPOINT</code>: configures a container that will run as an executable. Look like <code>CMD</code> but <code>ENTRYPOINT</code> commands and parameters are not ignored when Docker container runs with command line parameters.</p>\n  <div class=\"hsbox\">\n  <div class=\"hs__title\">\n  \tMore detail\n  </div>\n  <div class=\"hs__content\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Dockerfile</span><br>ENTRYPOINT <span class=\"token punctuation\">[</span><span class=\"token string\">\"/bin/echo\"</span>, <span class=\"token string\">\"Hello\"</span><span class=\"token punctuation\">]</span><br>CMD <span class=\"token punctuation\">[</span><span class=\"token string\">\"world\"</span><span class=\"token punctuation\">]</span><br><span class=\"token comment\"># run</span><br>docker run -it <span class=\"token operator\">&lt;</span>image<span class=\"token operator\">></span><br><span class=\"token comment\"># produces 'Hello world'</span><br><br><span class=\"token comment\"># but run</span><br>docker run -it <span class=\"token operator\">&lt;</span>image<span class=\"token operator\">></span> John<br><span class=\"token comment\"># produces 'Hello John' (only CMD command is override)</span></code></pre>\n  </div>\n  </div>\n<ul>\n<li><code>ENTRYPOINT [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;]</code> (exec form, preferred)</li>\n<li><code>ENTRYPOINT command param1 param2</code> (shell form)</li>\n</ul>\n</li>\n<li>\n<p><code>EXPOSE 5000</code>: Listen on the specified port</p>\n</li>\n<li>\n<p><code>COPY . app/</code>: Copy the files from the current directory to <code>app/</code></p>\n</li>\n</ul>\n</div></div>\n<div class=\"hsbox\"><div class=\"hs__title\">Example of run mutiple commands</div><div class=\"hs__content\"><p>If we run multiple interative commands (wait for action), for example, a jupyter notebook with a ssh server, we cannot put them directly in <code>CMD</code> command.</p>\n<p><strong>Solution</strong>: using a file .sh and put <code>&amp;</code> at the end of the 1st command like:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">which</span> sshd<span class=\"token variable\">)</span></span> -Ddp <span class=\"token number\">22</span> <span class=\"token operator\">&amp;</span><br><br>jupyter lab --no-browser --allow-root --ip<span class=\"token operator\">=</span><span class=\"token number\">0.0</span>.0.0 --NotebookApp.token<span class=\"token operator\">=</span><span class=\"token string\">''</span> --NotebookApp.password<span class=\"token operator\">=</span><span class=\"token string\">''</span></code></pre>\n</div></div>\n<h2 id=\"create-a-container\">Create a container <a class=\"direct-link\" href=\"#create-a-container\">#</a></h2>\n<h3 id=\"cli\">CLI <a class=\"direct-link\" href=\"#cli\">#</a></h3>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># container test from an image</span><br>docker create --name container_test -t -i <span class=\"token operator\">&lt;</span>image_id<span class=\"token operator\">></span> <span class=\"token function\">bash</span><br>docker start container_test<br>docker <span class=\"token builtin class-name\">exec</span> -it container_test <span class=\"token function\">bash</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\">docker run  --name <span class=\"token operator\">&lt;</span>container_name<span class=\"token operator\">></span> -dp <span class=\"token number\">3000</span>:3000 -v todo-db:/etc/todos <span class=\"token operator\">&lt;</span>docker_img<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># run a command in a running docker without entering to that container</span><br><span class=\"token comment\"># e.g. running \"/usr/sbin/sshd -Ddp 22\"</span><br>docker <span class=\"token builtin class-name\">exec</span> -it -d docker_thi_dc /usr/sbin/sshd -Ddp <span class=\"token number\">22</span><br><span class=\"token comment\"># \"-d\" = Detached mode</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># want docker auto removes a container after exit</span><br>docker run --rm <span class=\"token punctuation\">..</span>.</code></pre>\n<h3 id=\"docker-compose.yml\"><code>docker-compose.yml</code> <a class=\"direct-link\" href=\"#docker-compose.yml\">#</a></h3>\n<p>Use to create various services with the same image.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">docker-compose up -d <span class=\"token comment\"># up and detach</span><br>docker-compose -f file_name.yml up -d <span class=\"token comment\"># custom docker-compose.yml file name</span><br><br><span class=\"token comment\"># if you run 2 container in the same folder name</span><br>docker-compose -p <span class=\"token string\">\"project_1\"</span> up -d<br>docker-compose -p <span class=\"token string\">\"project_2\"</span> up -d</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># docker-compose.yml</span><br><span class=\"token comment\">#------------------------------</span><br><br><span class=\"token comment\"># run by `docker-compose up`</span><br>version: <span class=\"token string\">'3'</span><br>services:<br>  dataswati:<br>    container_name: docker_thi<br>    image: docker_thi_img:latest<br>    ports:<br>      - <span class=\"token string\">\"8888:8888\"</span><br>    volumes:<br>      - <span class=\"token string\">\"/local-folder/:/docker-folder/\"</span><br>\tworking_dir: /srv</code></pre>\n<div class=\"hsbox\"><div class=\"hs__title\">Meaning of terms</div><div class=\"hs__content\"><ul>\n<li>\n<p><code>depends_on</code>:<sup><a href=\"https://docs.docker.com/compose/compose-file/#depends-on\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup> Express dependency between services (with orders).</p>\n<p>In <code>docker-compose.yml</code>: <code>db</code> and <code>redis</code> start before <code>web</code>.</p>\n<pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"3.8\"</span><br><span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span><br><span class=\"token key atrule\">web</span><span class=\"token punctuation\">:</span><br>\t<span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span> .<br>\t<span class=\"token key atrule\">depends_on</span><span class=\"token punctuation\">:</span><br>\t\t<span class=\"token punctuation\">-</span> db<br>\t\t<span class=\"token punctuation\">-</span> redis<br><span class=\"token key atrule\">redis</span><span class=\"token punctuation\">:</span><br>\t<span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> redis<br><span class=\"token key atrule\">db</span><span class=\"token punctuation\">:</span><br>\t<span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> postgres</code></pre>\n</li>\n<li>\n<p><code>command</code>:<sup><a href=\"https://docs.docker.com/compose/compose-file/#command\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup> Override the default command.</p>\n</li>\n<li>\n<p><code>stdin_open: true</code> and <code>tty: true</code>: keep container alive!</p>\n</li>\n<li>\n<p><code>volumes</code> (outside containers): volumes controlled by docker. They're located on different places,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># check info of a volume</span><br>docker volume inspect <span class=\"token operator\">&lt;</span>volume_name<span class=\"token operator\">></span></code></pre>\n</li>\n<li>\n<p><code>restart: always</code> (auto start container after logging in), <code>no</code> (default), <code>on-failure</code>.</p>\n</li>\n<li>\n<p><code>build: &lt;dir_to_Dockerfile_file&gt;</code>: build an image before using <code>docker-compose</code>.</p>\n</li>\n<li>\n<p><code>runtime: nvidia</code>: if <code>docker-compose --version</code> higher than 2.3 and there is NVIDIA GPU on your computer (check more detail in <a href=\"/docker-gpu#using-docker-compose\">this note</a>).</p>\n</li>\n</ul>\n</div></div>\n<p>🔅 If there is no already built image, you can use a <code>Dockerfile</code> in the same place as <code>docker-compose.yml</code>. In <code>docker-compose.yml</code>, use</p>\n<pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span><br>\t<span class=\"token key atrule\">dataswati</span><span class=\"token punctuation\">:</span><br>\t\t<span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span> .</code></pre>\n<p>Then run <code>docker-compose up --build</code>.</p>\n<p>🔅 Update to the newer version of <code>docker-compose</code>?</p>\n<h2 id=\"errors\">Errors <a class=\"direct-link\" href=\"#errors\">#</a></h2>\n<p><em>Docker can't connect to docker daemon`</em>.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># check if daemon is running?</span><br><span class=\"token function\">ps</span> aux <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> docker<br><br><span class=\"token comment\"># run</span><br><span class=\"token function\">sudo</span> /etc/init.d/docker start</code></pre>\n<hr>\n<p><code>sudo systemctl restart docker</code>  meets <em>Job for docker.service failed because the control process exited with error code</em>.</p>\n<ol>\n<li>Try to remove failed <code>daemon.json</code> file in <code>/etc/docker/</code> (if the problem comes from here)</li>\n<li>Try running either <code>sudo /etc/init.d/docker start</code> or <code>sudo service docker restart</code> (twice if needed).</li>\n</ol>\n<hr>\n<p><em>perl: warning: Please check that your locale settings:</em> when using below in the Dockerfile,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">ENV <span class=\"token environment constant\">LANG</span> en_US.UTF-8<br>ENV <span class=\"token environment constant\">LANGUAGE</span> en_US:en<br>ENV <span class=\"token environment constant\">LC_ALL</span> en_US.UTF-8<br><br><span class=\"token comment\"># Replace them by</span><br>RUN <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"LC_ALL=en_US.UTF-8\"</span> <span class=\"token operator\">>></span> /etc/environment<br>RUN <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"en_US.UTF-8 UTF-8\"</span> <span class=\"token operator\">>></span> /etc/locale.gen<br>RUN <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"LANG=en_US.UTF-8\"</span> <span class=\"token operator\">></span> /etc/locale.conf<br>RUN locale-gen en_US.UTF-8</code></pre>\n<hr>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># On Windows + WSL2</span><br>The process cannot access the <span class=\"token function\">file</span> <span class=\"token string\">'ext4.vhdx'</span> because it is being used by another process.</code></pre>\n<ol>\n<li>Quit docker.</li>\n<li>Open <strong>Task Manager</strong>, try to end the processes <strong>wsappx</strong> (all of them).</li>\n<li>Reopen docker.</li>\n</ol>\n<h2 id=\"reference\">Reference <a class=\"direct-link\" href=\"#reference\">#</a></h2>\n<ul>\n<li><strong>Play with Docker</strong> -- <a href=\"https://labs.play-with-docker.com/\">right on the web</a>.</li>\n<li><strong>Yury Pitsishin</strong> -- <a href=\"https://goinbigdata.com/docker-run-vs-cmd-vs-entrypoint/\">Docker RUN vs CMD vs ENTRYPOINT</a>.</li>\n</ul>\n",
      "date_published": "2020-03-08T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/algorithm-1/",
      "url": "https://dinhanhthi.com/algorithm-1/",
      "title": "Algorithm 1",
      "content_html": "<p>This note contains questions/puzzle and algorithms to answer these problems. Most of the codes in this type of note are in <a href=\"/notes#python\"><strong>Python</strong></a>.</p>\n<h2 id=\"make-chunkers-%2F-windows\">Make chunkers / windows <a class=\"direct-link\" href=\"#make-chunkers-%2F-windows\">#</a></h2>\n<p>Split a sequence into windows with size and slide.</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">chunker</span><span class=\"token punctuation\">(</span>seq<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">,</span> slide<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> exact_size<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">if</span> slide <span class=\"token keyword\">is</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">:</span><br>        slide <span class=\"token operator\">=</span> size<br>    <span class=\"token keyword\">if</span> exact_size<span class=\"token punctuation\">:</span><br>        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>seq<span class=\"token punctuation\">[</span>pos<span class=\"token punctuation\">:</span>pos <span class=\"token operator\">+</span> size<span class=\"token punctuation\">]</span> <span class=\"token keyword\">for</span> pos <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>seq<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> slide<span class=\"token punctuation\">)</span> <span class=\"token keyword\">if</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>seq<span class=\"token punctuation\">[</span>pos<span class=\"token punctuation\">:</span>pos <span class=\"token operator\">+</span> size<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> size<span class=\"token punctuation\">]</span><br>    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span><br>        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>seq<span class=\"token punctuation\">[</span>pos<span class=\"token punctuation\">:</span>pos <span class=\"token operator\">+</span> size<span class=\"token punctuation\">]</span> <span class=\"token keyword\">for</span> pos <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>seq<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> slide<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></code></pre>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">seq <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>i <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><br><br>chunker<span class=\"token punctuation\">(</span>seq<span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><br>chunker<span class=\"token punctuation\">(</span>seq<span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> exact_size<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><br>chunker<span class=\"token punctuation\">(</span>seq<span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> slide<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></code></pre>\n<pre><code>[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\n\n[[0, 1, 2], [3, 4, 5], [6, 7, 8], [9]]\n[[0, 1, 2], [3, 4, 5], [6, 7, 8]]\n[[0, 1, 2], [2, 3, 4], [4, 5, 6], [6, 7, 8], [8, 9]]\n</code></pre>\n</div>\n<p>Make all arrays equal in size, filled with <code>np.nan</code>,</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">chunker2</span><span class=\"token punctuation\">(</span>seq<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">,</span> slide<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">if</span> slide <span class=\"token keyword\">is</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">:</span><br>        slide <span class=\"token operator\">=</span> size<br>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>np<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span> seq<span class=\"token punctuation\">[</span>pos<span class=\"token punctuation\">:</span>pos <span class=\"token operator\">+</span> size<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>repeat<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>nan<span class=\"token punctuation\">,</span> size<span class=\"token operator\">-</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>seq<span class=\"token punctuation\">[</span>pos<span class=\"token punctuation\">:</span>pos <span class=\"token operator\">+</span> size<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><br>            <span class=\"token keyword\">for</span> pos <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>seq<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> slide<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></code></pre>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">seq <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>i <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><br><br>chunker2<span class=\"token punctuation\">(</span>seq<span class=\"token punctuation\">,</span> size<span class=\"token operator\">=</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> slide<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></code></pre>\n<pre><code>[array([0., 1., 2., 3.]),\n array([2., 3., 4., 5.]),\n array([4., 5., 6., 7.]),\n array([6., 7., 8., 9.]),\n array([ 8.,  9., nan, nan])]\n</code></pre>\n</div>\n<h2 id=\"plot-a-grid-of-squares\">Plot a grid of squares <a class=\"direct-link\" href=\"#plot-a-grid-of-squares\">#</a></h2>\n<p>Plot a square of <code>NxN</code> small other squares. Each one has a probability <code>Pxi/N</code> of being coloured, where <code>i</code> is the line where it stands.</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\">N <span class=\"token operator\">=</span> <span class=\"token number\">100</span><br>P <span class=\"token operator\">=</span> <span class=\"token number\">0.5</span><br>im_size <span class=\"token operator\">=</span> <span class=\"token number\">5</span><br><br>image <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>repeat<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span><span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>N<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span>N<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> N<span class=\"token punctuation\">,</span> axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># LESS understandable but executing FASTER</span><br>image <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>P<span class=\"token operator\">/</span>N <span class=\"token operator\">*</span> image<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;=</span> np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>rand<span class=\"token punctuation\">(</span>N<span class=\"token punctuation\">,</span>N<span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># MORE understandable but executing SLOWER</span><br><span class=\"token keyword\">def</span> <span class=\"token function\">bernoulli</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">,</span> P<span class=\"token punctuation\">,</span> N<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>  <span class=\"token keyword\">return</span> <span class=\"token number\">1</span><span class=\"token operator\">-</span>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>binomial<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> P<span class=\"token operator\">*</span>num<span class=\"token operator\">/</span>N<span class=\"token punctuation\">)</span><br>vfunc <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>vectorize<span class=\"token punctuation\">(</span>bernoulli<span class=\"token punctuation\">)</span><br>image <span class=\"token operator\">=</span> vfunc<span class=\"token punctuation\">(</span>image<span class=\"token punctuation\">,</span> P<span class=\"token punctuation\">,</span> N<span class=\"token punctuation\">)</span><br><br>plt<span class=\"token punctuation\">.</span>figure<span class=\"token punctuation\">(</span>figsize<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>im_size<span class=\"token punctuation\">,</span> im_size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span>image<span class=\"token punctuation\">,</span> cmap<span class=\"token operator\">=</span><span class=\"token string\">'gray'</span><span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<p><img src=\"/img/post/algorithms/bernoulli-squares.png\" alt=\"Bernoulli squares\" class=\"img-full-90\"></p>\n</div>",
      "date_published": "2020-03-08T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/good-applications-useful-tools/",
      "url": "https://dinhanhthi.com/good-applications-useful-tools/",
      "title": "Useful tools for working &amp; studying",
      "content_html": "<p>👉 Site: <a href=\"https://dinhanhthi.github.io/tools/\" target=\"_blank\">Collection of quick js/html tools.</a><br>\n👉 Note: <a href=\"/web-dev-tools-resources/\">Web Dev tools &amp; resources.</a><br>\n👉 Note: <a href=\"/data-ml-tools-resources/\">Resources for DS &amp; ML &amp; DL.</a></p>\n<div class=\"success\">\n<p>This note will always be updated.</p>\n</div>\n<h2 id=\"online-tools\">Online tools <a class=\"direct-link\" href=\"#online-tools\">#</a></h2>\n<ul>\n<li><a href=\"https://www.autodraw.com/\">AutoDraw</a> — an drawing platform using AI to guess what you draw. Try it!</li>\n</ul>\n<h3 id=\"images\">Images <a class=\"direct-link\" href=\"#images\">#</a></h3>\n<ul>\n<li><strong>Compress images</strong>: <a href=\"https://compresspng.com/\">PNG</a>, <a href=\"https://compressjpeg.com/\">JPG</a>.</li>\n<li><strong>Remove background</strong> / Transparent photos: <a href=\"https://onlinepngtools.com/create-transparent-png\">online png tools</a>, <a href=\"https://www5.lunapic.com/editor/\">lunapic</a>.</li>\n<li><strong>iloveimg</strong>: <a href=\"https://www.iloveimg.com/resize-image\">resize</a>, <a href=\"https://www.iloveimg.com/crop-image\">crop</a>, <a href=\"https://www.iloveimg.com/compress-image\">compress</a>, <a href=\"https://www.iloveimg.com/rotate-image\">rotate</a>.</li>\n<li><strong>Side by side images</strong>: <a href=\"https://www.imgonline.com.ua/eng/combine-two-images-into-one.php\">this tool</a>.</li>\n<li><strong>Change color</strong>:\n<ul>\n<li>of a single color: <a href=\"https://onlinepngtools.com/change-png-color\">onlinepngtools</a></li>\n<li>all colors to a single different one: <a href=\"https://manytools.org/image/colorize-filter/\">manytools</a></li>\n</ul>\n</li>\n<li><strong>Free photos</strong>:\n<ul>\n<li>Icon / Logo: <a href=\"https://www.vectorlogo.zone/\">vectorlogo</a> (only marques), <a href=\"https://www.flaticon.com\">flaticon</a> (a lot, be able to custom color)</li>\n<li>Stocks: <a href=\"https://unsplash.com/\">unsplash</a> &amp; <a href=\"https://www.pexels.com/\">pexels</a> &amp; <a href=\"https://pixabay.com/\">pixabay</a> (taken by photographers), <a href=\"https://www.freepik.com/\">freepik</a> (with vector sources).</li>\n</ul>\n</li>\n<li><a href=\"https://www.publicalbum.org/blog/embed-google-photos-video\">Get link Google Photos</a></li>\n<li><strong>Add border</strong> to png -&gt; <a href=\"https://onlinepngtools.com/add-png-border\">onlinephototools</a></li>\n<li><a href=\"https://www.pngtosvg.com/\">Convert to SVG</a></li>\n</ul>\n<h3 id=\"office\">Office <a class=\"direct-link\" href=\"#office\">#</a></h3>\n<ul>\n<li><strong>PDF tools</strong>:\n<ul>\n<li>AIO PDF tools (free!!!): <a href=\"https://tools.pdf24.org/en/\">PDF24 Tools</a>.</li>\n<li>Convert PDF to Word (conserve format): <a href=\"https://www.freepdfconvert.com/\">freepdfconverter</a>.</li>\n<li>PDF Editor online free: <a href=\"https://www.pdfescape.com/\">pdfescape</a>\n<ul>\n<li>Edit text: <a href=\"https://www.sejda.com/\">sejda</a></li>\n<li>Change metadata: <a href=\"http://bluepdf.com/\">bluepdf</a></li>\n<li>View pdf's metadata: <a href=\"https://www.pdfyeah.com/view-pdf-metadata/\">pdfyeah</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"https://etherpad.org/\">Etherpad</a> — a highly customizable Open Source online editor providing collaborative editing in really real-time.</li>\n<li><strong>Text recognition</strong> (OCR): <a href=\"https://www.newocr.com/\">newocr</a></li>\n<li><strong>LaTeX tools</strong>\n<ul>\n<li><a href=\"https://www.overleaf.com/\">Overleaf</a> — online LaTeX editor.</li>\n<li><a href=\"http://www.jonathanleroux.org/software/iguanatex/\">IguanaTex</a> — A Free LaTeX Add-In for PowerPoint on Windows</li>\n</ul>\n</li>\n<li><a href=\"https://obsidian.md/\">Obsidian</a> — Obsidian is a powerful knowledge base that works on top of</li>\n<li>a local folder of plain text Markdown files.</li>\n</ul>\n<h2 id=\"multi-platforms\">Multi-platforms <a class=\"direct-link\" href=\"#multi-platforms\">#</a></h2>\n<ul>\n<li><a href=\"https://app.astralapp.com/auth\">Astral</a> — Organize Your GitHub Stars With Ease.</li>\n<li><a href=\"https://bitwarden.com/\">Bitwarden</a> -- open source password manager (drop Lastpass because we can only use 1 device and we cannot use fingerprint to unlock).</li>\n<li><a href=\"https://www.gitkraken.com/\">GitKraken</a> — git client for ubuntu (better than <a href=\"https://desktop.github.com/\">Github Desktop</a> when importing local)</li>\n<li><a href=\"https://github.com/goldendict/goldendict/wiki/Early-Access-Builds-for-Windows?fbclid=IwAR3RVcLdpkpL2B3f1-EAiCzRqjInpy21BltlHs9SwryGuEcQ_VQPB6lftTA\">GoldenDict</a> — dictionaries + <a href=\"https://drive.google.com/open?id=1jna8_grA-wyhPrq8BiB7ypadvW3tTlIv\">its dictionaries</a>.</li>\n<li><a href=\"https://www.googleplaymusicdesktopplayer.com/\">Google Play Music Desktop Player</a> (support Youtube Music with custom controllers, online only).</li>\n<li><a href=\"https://jitsi.org/jitsi-meet/\">Jitsi Meet</a> — More secure, more flexible, and completely free video conferencing.</li>\n<li><a href=\"https://getmailspring.com/\">Mailspring</a> — Email client.</li>\n<li><a href=\"https://typora.io/\">Typora</a> — WYSWYG markdown editor.</li>\n<li><a href=\"https://www.virtualbox.org/\">VirtualBox</a> — virtual machine.</li>\n<li><a href=\"http://xdman.sourceforge.net/#downloads\">XDM</a> — download manager.</li>\n<li><a href=\"https://loader.to/\">Download Youtube playlist</a></li>\n<li><a href=\"https://www.sharedrop.io/\">ShareDrop</a> — P2P file transfer.</li>\n</ul>\n<h2 id=\"windows\">Windows <a class=\"direct-link\" href=\"#windows\">#</a></h2>\n<p>👉 Note: <a href=\"/fresh-install-windows/\">Windows fresh installation</a>.</p>\n<ul>\n<li><a href=\"https://monkeymatt.com/bigstretch/\">Big Stretch Reminder</a> — free simple reminder tool that prompts a user to take regular breaks and helps prevent the symptoms of Repetitive Strain Injury (RSI).</li>\n<li><a href=\"https://cmder.net/\">cmder</a> (Console Emulator) — (<strong>update 11/20</strong>: should use <a href=\"/terminal#windows\">Windows Terminal with dropdown support</a>) drop-down terminal for windows. My <a href=\"https://github.com/dinhanhthi/scripts/blob/master/settings/windows/user-ConEmu.xml\">setting file</a>.</li>\n<li><a href=\"https://deepl.com/\">DeepL</a> — Quickly translate app (by using <kbd>Ctrl</kbd> + <kbd>C</kbd> + <kbd>C</kbd>).</li>\n<li><a href=\"https://www.voidtools.com/\">Everything</a> — an alternative to Spotlight in Mac. You can search any thing (app, docs, files,...) in your computer with hotkeys.</li>\n<li><a href=\"https://www.faststone.org/index.htm\">FastStone Capture</a> — screen recorder.</li>\n<li><a href=\"http://www.lingoes.net/\">Lingoes</a> — dictionary (used alongside with GoldenDict) — <a href=\"https://drive.google.com/open?id=1LlCtGewKiLMil-7aQFEy_tu4ir1eC_6l\">its dictionaries</a>.</li>\n<li><a href=\"https://www.diskinternals.com/linux-reader/\">Linux Reader</a> -- read Linux's partition from Windows.</li>\n<li><a href=\"https://lockhunter.com/\">LockHunter</a> — find what application/process is preventing us from deleting some folder/file.</li>\n<li><a href=\"https://www.screentogif.com/\">ScreenToGif</a> — screen recorder and auto convert to gif file.</li>\n<li><a href=\"https://www.unikey.org/\">Unikey</a> — Vietnamese input method on Windows.</li>\n</ul>\n<h2 id=\"linux\">Linux <a class=\"direct-link\" href=\"#linux\">#</a></h2>\n<p>👉 Note: <a href=\"/linux-tips/\">Linux</a>.<br>\n👉 Note: <a href=\"/fresh-installation-ubuntu/\">Ubuntu / Pop!_OS Fresh Installation</a>.</p>\n<ul>\n<li><strong>Cheese</strong> (Appstore) — webcam for linux.</li>\n<li><strong>Foliate</strong> (Appstore) — Book reader.</li>\n<li><strong>gThumb</strong> (Appstore) — photo viewer + quick editing tools.</li>\n<li><a href=\"http://guake-project.org/\"><strong>Guake Terminal</strong></a> — drop-down terminal (<a href=\"terminal#guake-terminal\">more settings</a>)</li>\n<li><strong>Kazam</strong> (Appstore) — Screen Recorder.</li>\n<li><a href=\"https://github.com/puneetsl/lotion\"><strong>Lotion</strong></a> — Unofficial Notion client for linux (online only)</li>\n<li><a href=\"https://lutris.net/\"><strong>Lutris</strong></a> — playing games on linux.</li>\n<li><strong>Notejot</strong> (Appstore) — sticky note.</li>\n<li><a href=\"https://github.com/ollm/OpenComic\"><strong>OpenComic</strong></a> — read offline comic with many supported files (zip, folder containing images,...)</li>\n<li><strong>Rhythmbox</strong> (Appstore) — Music player on Linux (<a href=\"/linux-tips#media%E2%80%94photo%E2%80%94music\">custom hotkeys</a>).</li>\n<li><a href=\"http://www.workrave.org/\"><strong>Workrave</strong></a> — a program that assists in the recovery and prevention of Repetitive Strain Injury (RSI).</li>\n<li><strong>exfalso</strong> (Appstore) — edit mp3 tag on linux.</li>\n</ul>\n<h2 id=\"macos\">MacOS <a class=\"direct-link\" href=\"#macos\">#</a></h2>\n<p>👉 Note: <a href=\"/fresh-install-macos/#applications\">Fresh installation MacOS</a>.</p>\n<h2 id=\"education\">Education <a class=\"direct-link\" href=\"#education\">#</a></h2>\n<ul>\n<li><a href=\"https://www.arxiv-vanity.com/\">arXiv Vanity</a> — renders academic papers from arXiv as responsive web pages so you don’t have to squint at a PDF.</li>\n<li><a href=\"https://www.connectedpapers.com/\">Connected Papers</a> -- Find and explore academic papers with graph.</li>\n<li><a href=\"raindrop.io\">Raindrop</a> — bookmark to read later the articles (like <a href=\"https://app.getpocket.com/\">Pocket</a>)</li>\n</ul>\n<h3 id=\"foreign-language-learning\">Foreign language learning <a class=\"direct-link\" href=\"#foreign-language-learning\">#</a></h3>\n<ul>\n<li><a href=\"https://deepl.com/\">DeepL</a> — &quot;better than google translate&quot; app for Windows. You can use <kbd>Ctrl</kbd> + <kbd>C</kbd> + <kbd>C</kbd> to quickly translate a word or phrase.</li>\n<li><a href=\"https://github.com/goldendict/goldendict/wiki/Early-Access-Builds-for-Windows?fbclid=IwAR3RVcLdpkpL2B3f1-EAiCzRqjInpy21BltlHs9SwryGuEcQ_VQPB6lftTA\">GoldenDict</a> — global dictionary (multi-platform). Its <a href=\"https://drive.google.com/open?id=1jna8_grA-wyhPrq8BiB7ypadvW3tTlIv\">dictionaries</a>.</li>\n<li><a href=\"http://www.lingoes.net/\">Lingoes</a> — Global dictionary for Windows. Its <a href=\"https://drive.google.com/open?id=1LlCtGewKiLMil-7aQFEy_tu4ir1eC_6l\">dictionaries</a>.</li>\n<li><a href=\"https://quest-app.appspot.com/\">QTranslate</a> — quickly translate any word / phrase and also their pronunciation by using hotkeys (for example, you can use <kbd>Ctrl</kbd> + <kbd>E</kbd> to hear the pronunciation and <kbd>Ctrl</kbd> + <kbd>Q</kbd> to see the translation). The data is obtained from various sources including deepl and google translate.</li>\n<li><a href=\"https://lyricstraining.com/\">LyricsTraining</a> — a new way to learn English and other languages through music and the lyrics of your favourite songs.</li>\n<li><a href=\"http://phimlearning.com/\">PhimLearning</a> — watch movie and learning foreign language with bilanguage-subtitles.</li>\n<li><strong>Grammar &amp; Spell check online</strong>: <a href=\"https://www.scribens.com/\">Scriben</a>, <a href=\"https://www.grammarly.com/\">Grammarly</a>, <a href=\"http://www.1checker.com/\">1checker</a>.</li>\n</ul>\n<h3 id=\"math-tools\">Math tools <a class=\"direct-link\" href=\"#math-tools\">#</a></h3>\n<ul>\n<li><a href=\"https://www.mathcha.io/\">Matcha</a> — draw / write LaTeX / Tikz online, very beautiful.</li>\n<li><a href=\"https://www.wolframalpha.com/\">WolframAlpha</a> — powerfully computational intelligence.</li>\n<li><a href=\"https://www.geogebra.org/graphing\">Geogebra Graphhing Calculator</a> — draw graph online with Geogebra.</li>\n<li><a href=\"https://www.desmos.com/calculator\">Desmos</a> — advanced Graphing calculator.</li>\n<li><a href=\"https://start.sketchometry.org/\">Sketchometry</a></li>\n<li><a href=\"https://app.diagrams.net/\">Diagram</a></li>\n</ul>\n<h2 id=\"chrome-extension\">Chrome extension <a class=\"direct-link\" href=\"#chrome-extension\">#</a></h2>\n<ul>\n<li><a href=\"https://chrome.google.com/webstore/detail/adblock-plus-free-ad-bloc/cfhdojbkjhnklbpkdaibdccddilifddb\">Adblock Plus</a> - free ad blocker</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/autotube-youtube-nonstop/egobelhdffdoidcnhpgkngoghpiebial\">AutoTube</a> — YouTube nonstop (for ones who wanna listen to a video music which has more than 1 hour length)</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/avim-vietnamese-input-met/opgbbffpdglhkpglnlkiclakjlpiedoh?hl=en\">AVIM</a> — Vietnamese input method.</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/bitly-powerful-short-link/iabeihobmhlgpkcgjiloemdbofjbdcic\">Bit.ly</a> -- shorten long url for sharing.</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/copy-url-with-title/bpcogbhmkdjaohcmlghhkiohmldpnkoh\">Copy URL with title</a> — copy title and URL using <kbd>Ctrl</kbd> + <kbd>C</kbd> (Win/Linux) / <kbd>⌥ Option</kbd> + <kbd>C</kbd> (Mac). Use <kbd>Alt</kbd> + <kbd>C</kbd> (Win/Linux) / <kbd>⌥ Option</kbd> + <kbd>C</kbd> (Mac) to get them in markdown link format.</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/google-dictionary-by-goog/mgijmajocgfcbeboacabfgobmjgjcoja\">Google Dictionary</a> (by Google)</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/hush-private-bookmarking/hjmoaenjknbdehbiaeeijcppnljflkff?hl=en\">Hush</a> — private bookmarking</li>\n<li><s><a href=\"https://chrome.google.com/webstore/detail/lastpass-free-password-ma/hdokiejnpimakedhajhdlcegeplioahd\">LastPass</a> — Free Password Manager</s> 👉 Using <a href=\"https://bitwarden.com/\">Bitwarden</a> instead.</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/mate-translate-%E2%80%93-translat/ihmgiclibbndffejedjimfjmfoabpcke\">Mate</a> — Quick translater.</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/microsoft-editor-spelling/gpaiobkfhnonedkhhfjpmhdalgeoebfa\">Microsoft Editor</a> — Spelling &amp; Grammar Checker</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/picture-in-picture-extens/hkgfoiooedgoejojocmhlaklaeopbecg\">Picture-in-Picture Extension</a> (by Google) — Picture-in-Picture (PiP) allows you to watch videos in a floating window (always on top of other windows) so you can keep an eye on what you’re watching while interacting with other sites, or applications.</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/print-friendly-pdf/ohlencieiipommannpdfcmfdpjjmeolj?hl=en\">Print Friendly &amp; PDF</a> — print any web page into pdf.</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/raindropio/ldgfbffkinooeloadekpmfoklnobpien\">Raindrop.io</a> — All-in-one bookmark manager (better than Pocket)</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/tabcloud/npecfdijgoblfcgagoijgmgejmcpnhof\">TabCloud</a> — save current tab list</li>\n</ul>\n<h2 id=\"data-science-%2F-machine-learning\">Data Science / Machine Learning <a class=\"direct-link\" href=\"#data-science-%2F-machine-learning\">#</a></h2>\n<p>👉 Note: <a href=\"/data-ml-tools-resources/\">Resources for DS &amp; ML &amp; DL.</a></p>\n<h2 id=\"web-dev-tools-%26-frameworks-%26-resources\">Web Dev tools &amp; frameworks &amp; resources <a class=\"direct-link\" href=\"#web-dev-tools-%26-frameworks-%26-resources\">#</a></h2>\n<p>👉 Note: <a href=\"/web-dev-tools-resources/\">Web Dev tools &amp; resources.</a></p>\n<h2 id=\"illustration-tools\">Illustration tools <a class=\"direct-link\" href=\"#illustration-tools\">#</a></h2>\n<ul>\n<li><a href=\"https://www.geogebra.org/\">GeoGebra</a> — Free Math Apps - used by over 100 Million Students &amp; Teachers Worldwide.</li>\n<li><a href=\"https://www.office.com/\">Microsoft Office Powerpoint</a> (paid, Windows), <a href=\"https://www.onlyoffice.com/en/download-desktop.aspx\">OnlyOffice Presentation</a> (free, multiplatform), <a href=\"https://docs.google.com/drawings\">Google Drawing</a> (free, online) — quickly illustate ideas.\n<ul>\n<li>Make featured image for posts.</li>\n<li>Draw simple geometrical shapes / graph / flow charts or even mathematical function graphs.</li>\n<li>Make charts to illustrate data points (have a link to MS Excel or OnlyOffice SpreadSheet).</li>\n<li>Support inserting math equations.</li>\n<li><strong>Save figure</strong> by capturing screen, <code>.png</code> format.</li>\n</ul>\n</li>\n<li><a href=\"https://excalidraw.com/\">Excalidraw</a> — Virtual whiteboard for sketching hand-drawn like diagrams.</li>\n<li><a href=\"https://www.desmos.com/\">Desmos</a> — make interative graphs / charts.\n<ul>\n<li>Exact function graph with formulas from input (<a href=\"https://www.desmos.com/calculator\">desmos/calculator</a>)</li>\n<li>Interative graphs (<a href=\"https://www.desmos.com/math\">examples</a>)</li>\n<li>Basic geometrical shapes (<a href=\"https://www.desmos.com/geometry\">desmos/geometry</a>)</li>\n<li><strong>Save figure</strong> under <code>.png</code> files or embed desmos code in your website.</li>\n</ul>\n</li>\n<li><a href=\"https://www.mathcha.io/\">Matcha</a> — Draw beautiful figures/graphs like LaTeX.</li>\n<li><a href=\"https://jsxgraph.org/wp/index.html\">JSXGraph</a> — Make interactive graph inside posts.</li>\n</ul>\n<h2 id=\"others\">Others <a class=\"direct-link\" href=\"#others\">#</a></h2>\n<ul>\n<li><a href=\"https://controller.wtf/\">controller.wtf</a> -- a directory of all iOS Games with game controller support.</li>\n<li><a href=\"https://www.dekudeals.com/\">Deku Deals</a> -- for Nintendo Switch users. If you wanna be notified whenever your favorite games are on sale. <a href=\"https://eshop-prices.com/\">Another website</a> for checking eshop-price.</li>\n<li><a href=\"https://www.talentoday.com/en/\">talentoday</a> — Empowering Growth for Individuals and Teams</li>\n<li><a href=\"https://socialblade.com/\">SocialBlade</a> — YouTube, Twitch, Twitter, &amp; Instagram Statistics</li>\n</ul>\n",
      "date_published": "2020-03-06T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/python-loop/",
      "url": "https://dinhanhthi.com/python-loop/",
      "title": "Python Loop",
      "content_html": "<h2 id=\"for\"><code>for</code> <a class=\"direct-link\" href=\"#for\">#</a></h2>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span></code></pre>\n<pre><code>1\n2\n3\n</code></pre>\n</div>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><br><span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'no left'</span><span class=\"token punctuation\">)</span></code></pre>\n<pre><code>0\n1\n2\nno left\n</code></pre>\n</div>\n<h3 id=\"skip-some-step\">Skip some step <a class=\"direct-link\" href=\"#skip-some-step\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># don't contain 5 (way 1)</span><br><span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token punctuation\">[</span>x <span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">if</span> x <span class=\"token operator\">!=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">print</span> i</code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># don't contain 5 (way 2)</span><br><span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">print</span> i</code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># next (skip 5)</span><br>xr <span class=\"token operator\">=</span> <span class=\"token builtin\">iter</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> xr<span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">if</span> i <span class=\"token operator\">==</span> <span class=\"token number\">4</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">next</span><span class=\"token punctuation\">(</span>xr<span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># continue (skip 5)</span><br><span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">if</span> i <span class=\"token operator\">==</span> <span class=\"token number\">5</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">continue</span><br>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span></code></pre>\n</div>\n<h2 id=\"while\"><code>while</code> <a class=\"direct-link\" href=\"#while\">#</a></h2>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><br><span class=\"token keyword\">while</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">4</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><br>    i <span class=\"token operator\">+=</span> <span class=\"token number\">1</span></code></pre>\n<pre><code>1\n2\n3\n</code></pre>\n</div>\n<p>You can also use <code>next</code> and <code>continue</code> like in the case of <code>for</code> but with caution!</p>\n<h2 id=\"break\"><code>break</code> <a class=\"direct-link\" href=\"#break\">#</a></h2>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">if</span> i<span class=\"token operator\">==</span><span class=\"token number\">2</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">break</span></code></pre>\n<pre><code>0\n1\n2\n</code></pre>\n</div>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><br><span class=\"token keyword\">while</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">6</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">if</span> i<span class=\"token operator\">==</span><span class=\"token number\">3</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">break</span><br>    i <span class=\"token operator\">+=</span> <span class=\"token number\">1</span></code></pre>\n<pre><code>1\n2\n3\n</code></pre>\n</div>\n",
      "date_published": "2020-03-05T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/dbscan-hdbscan-clustering/",
      "url": "https://dinhanhthi.com/dbscan-hdbscan-clustering/",
      "title": "DBSCAN / HDBSCAN Clustering",
      "content_html": "<h2 id=\"what%3F\">What? <a class=\"direct-link\" href=\"#what%3F\">#</a></h2>\n<p>The key idea is that for each point of a cluster, the neighborhood of a given radius has to contain at least a minimum number of points.</p>\n<h3 id=\"dbscan\">DBSCAN <a class=\"direct-link\" href=\"#dbscan\">#</a></h3>\n<ul>\n<li>&quot;DBSCAN&quot; = <strong>D</strong>ensity-<strong>b</strong>ased-<strong>s</strong>patial <strong>c</strong>lustering of <strong>a</strong>pplication with <strong>n</strong>oise.</li>\n<li>Separate clusters of <mark>high density from ones of low density</mark>.</li>\n<li>Can sort data into clusters of varying shapes.</li>\n<li><strong>Input</strong>: set of points &amp; neighborhood N &amp; minpts (density)</li>\n<li><strong>Output</strong>: clusters with density (+ noises)</li>\n<li>Each point is either:\n<ul>\n<li><em>Core point</em>: has at least minpts points in its neighborhood.</li>\n<li><em>Border point</em>: not a core but has at least 1 core point in its neighborhoods.</li>\n<li><em>Noise point</em>: not a core or border point.</li>\n</ul>\n</li>\n<li><strong>Phase</strong>:\n<ol>\n<li>Choose a point → it's a core point?\n<ol>\n<li>If yes → expand → check core / check border</li>\n<li>If no → form a cluster</li>\n</ol>\n</li>\n<li>Repeat to form other clusters</li>\n<li>Eliminate noise points.</li>\n</ol>\n</li>\n<li><strong>Pros</strong>:\n<ul>\n<li>Discover any number of clusters (different from <a href=\"/k-means-clustering\">K-Means</a> which need an input of number of clusters).</li>\n<li>Cluster of varying sizes and shapes.</li>\n<li>Detect and ignore outliers.</li>\n</ul>\n</li>\n<li><strong>Cons</strong>:\n<ul>\n<li>Sensitive → choice of neighborhood parameters (eg. If minpts is too small → wrong noises)</li>\n<li>Produce noise: unclear → how to calculate metric indexes when there is noise.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"hdbscan\">HDBSCAN <a class=\"direct-link\" href=\"#hdbscan\">#</a></h3>\n<ul>\n<li><strong>H</strong>igh DBSCAN.</li>\n<li>Difference between DBSCAN and HDBSCAN:\n<ul>\n<li>HDBSCAN: focus much on <mark>high density</mark>.</li>\n<li>DBSCAN: create right clusters but also create clusters with <mark>very low density</mark> of examples (Figure 1).</li>\n<li>Check more <a href=\"https://towardsdatascience.com/lightning-talk-clustering-with-hdbscan-d47b83d1b03a\">in this note</a>.</li>\n</ul>\n</li>\n<li>Reduce the speed of clustering in comparision with other methods (Figure 2).</li>\n<li>HDBScan has the parameter minimum cluster size (<code>min_cluster_size</code>), which is how big a cluster needs to be in order to form.</li>\n</ul>\n<p><img src=\"/img/post/ML/clustering/dbscan-vs-hdbscan.jpg\" alt=\"Difference between DBSCAN and HDBSCAN\" class=\"img-90\"><br>\n<em><strong>Figure 1</strong>. Difference between DBSCAN (left) and HDBSCAN (right). <a href=\"https://towardsdatascience.com/lightning-talk-clustering-with-hdbscan-d47b83d1b03a\">Source of figure</a>.</em></p>\n<p><img src=\"/img/post/ML/clustering/performance_clustering_method.png\" alt=\"Performance comparison of difference clustering methods.\" class=\"img-60\"><br>\n<em><strong>Figure 2</strong>.Performance comparison of difference clustering methods. HDBSCAN is much faster than DBSCAN with more data points. <a href=\"http://hdbscan.readthedocs.io/\">Source of figure</a>.</em></p>\n<h2 id=\"when%3F\">When? <a class=\"direct-link\" href=\"#when%3F\">#</a></h2>\n<ul>\n<li>We are not sure the number of clusters (like in <a href=\"/k-means-clustering\">KMeans</a>)</li>\n<li>There are outliers or noises in data.</li>\n<li>Arbitrary cluster's shape.</li>\n</ul>\n<h2 id=\"in-code\">In Code <a class=\"direct-link\" href=\"#in-code\">#</a></h2>\n<h3 id=\"dbscan-with-scikit-learn\">DBSCAN with Scikit-learn <a class=\"direct-link\" href=\"#dbscan-with-scikit-learn\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>cluster <span class=\"token keyword\">import</span> DBSCAN<br>clr <span class=\"token operator\">=</span> DBSCAN<span class=\"token punctuation\">(</span>eps<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> min_samples<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></code></pre>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\">clr<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">)</span><br>clr<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># or</span><br>clr<span class=\"token punctuation\">.</span>fit_predict<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">)</span></code></pre>\n</div>\n<p><strong>Parameters</strong> (<a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.cluster.DBSCAN.html\">others</a>):</p>\n<p class=\"indent\"></p>\n<ul>\n<li><code>min_samples</code>: min number of samples to be called &quot;dense&quot;</li>\n<li><code>eps</code>: max distance between 2 samples to be in the same cluster. Its unit/value based on the unit of data.</li>\n<li>Higher <code>min_samples</code> + lower <code>eps</code> indicates higher density necessary to form a cluster.</li>\n</ul>\n<p><strong>Attributes</strong>:</p>\n<ul>\n<li><code>clr.labels_</code>: clusters' labels.</li>\n</ul>\n<h3 id=\"hdbscan-2\">HDBSCAN <a class=\"direct-link\" href=\"#hdbscan-2\">#</a></h3>\n<p>For a ref of paramaters, check <a href=\"https://hdbscan.readthedocs.io/en/latest/api.html\">the API</a>.</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> hdbscan <span class=\"token keyword\">import</span> HDBSCAN<br>clr <span class=\"token operator\">=</span> HDBSCAN<span class=\"token punctuation\">(</span>eps<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> min_cluster_size<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> metric<span class=\"token operator\">=</span><span class=\"token string\">'euclidean'</span><span class=\"token punctuation\">)</span></code></pre>\n<p><strong>Parameters</strong>:</p>\n<p class=\"indent\"></p>\n<ul>\n<li>\n<p><code>min_cluster_size</code>: <sup><a href=\"https://hdbscan.readthedocs.io/en/latest/parameter_selection.html#selecting-min-cluster-size\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup> the smallest size grouping that you wish to consider a cluster.</p>\n</li>\n<li>\n<p><code>min_samples</code>: <sup><a href=\"https://hdbscan.readthedocs.io/en/latest/parameter_selection.html#selecting-min-samples\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup> The number of samples in a neighbourhood for a point to be considered a core point. The larger value <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">\\to</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">→</span></span></span></span></span> the more points will be declared as noise &amp; clusters will be restricted to progressively more dense areas.</p>\n</li>\n<li>\n<p>Working with <a href=\"/dynamic-time-warping-dtw/\">DTW (Dynamic Time Warping)</a> (<a href=\"https://dtaidistance.readthedocs.io/en/latest/usage/dtw.html#dtw-between-set-of-series\">more</a>): <code>metric='precomputed'</code> <sup><a href=\"https://hdbscan.readthedocs.io/en/latest/basic_hdbscan.html?highlight=precomputed\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> dtaidistance <span class=\"token keyword\">import</span> dtw<br>matrix <span class=\"token operator\">=</span> dtw<span class=\"token punctuation\">.</span>distance_matrix_fast<span class=\"token punctuation\">(</span>series<span class=\"token punctuation\">)</span> <span class=\"token comment\"># something likes that</span><br>model <span class=\"token operator\">=</span> HDBSCAN<span class=\"token punctuation\">(</span>metric<span class=\"token operator\">=</span><span class=\"token string\">'precomputed'</span><span class=\"token punctuation\">)</span><br>clusters <span class=\"token operator\">=</span> model<span class=\"token punctuation\">.</span>fit_predict<span class=\"token punctuation\">(</span>matrix<span class=\"token punctuation\">)</span></code></pre>\n</li>\n</ul>\n<div class=\"hsbox\"><div class=\"hs__title\">Examples to understand <code>min_cluster_size</code> and <code>min_samples</code></div><div class=\"hs__content\"><ul>\n<li><code>min_cluster_size=12</code> &amp; <code>min_samples=2</code> gives less noises than <code>min_cluster_size=12</code> &amp; <code>min_samples=3</code>: It's because we need at least <code>min_samples</code> points to determine a core points. That's why the bigger <code>min_samples</code>, the harder to form a cluster, or the more chances we have more noises.</li>\n<li><code>min_cluster_size=7</code> &amp; <code>min_sampls=3</code> gives less noises than <code>min_cluster_size=12</code> &amp; <code>min_samples=3</code>: It's because we need at least <code>min_cluster_size</code> points to determine a cluster. That's why the bigger <code>min_cluster_size</code>, the harder the form a cluster, or the more chances we have more noise.</li>\n</ul>\n</div></div>\n<p><strong>Attributes</strong>:</p>\n<p class=\"indent\"></p>\n<ul>\n<li>Label <code>-1</code> means that this sample is not assigned to any cluster, or noise!</li>\n<li><code>clt.labels_</code>: labels of clusters (including <code>-1</code>)</li>\n<li><code>clt.probabilities_</code>: scores (between 0 and 1). <code>0</code> means sample is not in cluster at all (noise), <code>1</code> means the heart of cluster.</li>\n</ul>\n<h4 id=\"hdbscan-and-scikit-learn\">HDBSCAN and scikit-learn <a class=\"direct-link\" href=\"#hdbscan-and-scikit-learn\">#</a></h4>\n<p>Note that, HDBSCAN <a href=\"https://github.com/scikit-learn-contrib/hdbscan/blob/master/hdbscan/hdbscan_.py#L642\">is built based on scikit-learn</a> but it doesn't have an <code>.predict()</code> method as other clustering methods does on scikit-learn. Below code gives you a new version of HDBSCAN (<code>WrapperHDBSCAN</code>) which has an additional <code>.predict()</code> method.</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> hdbscan <span class=\"token keyword\">import</span> HDBSCAN<br><br><span class=\"token keyword\">class</span> <span class=\"token class-name\">WrapperHDBSCAN</span><span class=\"token punctuation\">(</span>HDBSCAN<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">def</span> <span class=\"token function\">predict</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> X<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>        self<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">)</span><br>        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>labels_</code></pre>\n<h2 id=\"reference\">Reference <a class=\"direct-link\" href=\"#reference\">#</a></h2>\n<ul>\n<li><strong>Official doc</strong> -- <a href=\"https://hdbscan.readthedocs.io/en/latest/how_hdbscan_works.html\">How HDBSCAN works?</a></li>\n</ul>\n",
      "date_published": "2020-03-04T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/date-time-tips/",
      "url": "https://dinhanhthi.com/date-time-tips/",
      "title": "Date / Time extra",
      "content_html": "<h2 id=\"iso-8601-format\">ISO 8601 format <a class=\"direct-link\" href=\"#iso-8601-format\">#</a></h2>\n<p>For duration:</p>\n<p class=\"indent\"></p>\n<ul>\n<li><code>P</code> (duration, always at the beginning of the duration), <code>Y</code> (year), <code>M</code> (month), <code>W</code> (week), <code>D</code> (day), <code>T</code> (time designator, always precedes the time components), <code>H</code> (hour), <code>M</code> (minute), <code>S</code> (second).</li>\n<li><strong>Example</strong>: <code>P3Y6M4DT12H30M5S</code> -- a duration of three years, six months, four days, twelve hours, thirty minutes, and five seconds.</li>\n</ul>\n<p>Converter,</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> datetime <span class=\"token keyword\">import</span> datetime<span class=\"token punctuation\">,</span> timedelta<br><span class=\"token keyword\">from</span> isodate <span class=\"token keyword\">import</span> duration_isoformat <span class=\"token comment\"># used only for datetime.timedelta</span><br><br><span class=\"token keyword\">def</span> <span class=\"token function\">get_isoformat</span><span class=\"token punctuation\">(</span>time<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token triple-quoted-string string\">\"\"\"<br>    Convert pd.Timedelta, pd.Timestamp,<br>    datetimme.datetime, datetime.time, datetime.date, datetime.timedelta<br>    to isoformat<br>    \"\"\"</span><br>    <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> <span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>time<span class=\"token punctuation\">,</span> timedelta<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>        <span class=\"token keyword\">return</span> time<span class=\"token punctuation\">.</span>isoformat<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span><br>        <span class=\"token keyword\">return</span> duration_isoformat<span class=\"token punctuation\">(</span>time<span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"timedelta\"><code>Timedelta</code> <a class=\"direct-link\" href=\"#timedelta\">#</a></h2>\n<h3 id=\"to-timedelta%2C\">To <code>Timedelta</code>, <a class=\"direct-link\" href=\"#to-timedelta%2C\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># numpy.timedelta64(208206000000000,'ns') → Timedelta('2 days 09:50:06')</span><br>pd<span class=\"token punctuation\">.</span>Timedelta<span class=\"token punctuation\">(</span>time<span class=\"token punctuation\">,</span> unit<span class=\"token operator\">=</span><span class=\"token string\">'ns'</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># DateOffsets ('14T') → Timedelta('0 days 00:14:00')</span><br>pd<span class=\"token punctuation\">.</span>to_timedelta<span class=\"token punctuation\">(</span><span class=\"token string\">'14T'</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Can't use 'T' as '1T'?</span><br><span class=\"token keyword\">from</span> pandas<span class=\"token punctuation\">.</span>tseries<span class=\"token punctuation\">.</span>frequencies <span class=\"token keyword\">import</span> to_offset<br>pd<span class=\"token punctuation\">.</span>to_timedelta<span class=\"token punctuation\">(</span>to_offset<span class=\"token punctuation\">(</span><span class=\"token string\">'T'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"from-timedelta%2C\">From <code>Timedelta</code>, <a class=\"direct-link\" href=\"#from-timedelta%2C\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Timedelta('0 days 00:01:20') -> 80 (s)</span><br><span class=\"token comment\"># (SINGLE VALUE)</span><br>td<span class=\"token punctuation\">.</span>total_seconds<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># float</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Timedelta('0 days 00:01:20') -> 80 (s) (FLOAT)</span><br><span class=\"token comment\"># (ONLY WORK with a series, not a single value)</span><br>series<span class=\"token punctuation\">.</span>astype<span class=\"token punctuation\">(</span><span class=\"token string\">'timedelta64[s]'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># or 'ms'</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># '1 minutes' -> '1T'</span><br><span class=\"token keyword\">def</span> <span class=\"token function\">timedelta_to_string</span><span class=\"token punctuation\">(</span>timedelta<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    units <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'D'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'H'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'T'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'S'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'L'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'U'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'N'</span><span class=\"token punctuation\">]</span><br>    time_format <span class=\"token operator\">=</span> <span class=\"token string\">''</span><br>    <span class=\"token keyword\">for</span> i<span class=\"token punctuation\">,</span> c <span class=\"token keyword\">in</span> <span class=\"token builtin\">enumerate</span><span class=\"token punctuation\">(</span>timedelta<span class=\"token punctuation\">.</span>components<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>        <span class=\"token keyword\">if</span> c <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span> time_format <span class=\"token operator\">+=</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> units<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><br>    <span class=\"token keyword\">return</span> time_format</code></pre>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\">## EXAMPLE</span><br><span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd<br>test <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>Timedelta<span class=\"token punctuation\">(</span><span class=\"token string\">'1 minutes'</span><span class=\"token punctuation\">)</span><br>timedelta_to_string<span class=\"token punctuation\">(</span>test<span class=\"token punctuation\">)</span></code></pre>\n<pre><code>Timedelta('0 days 00:01:00')\n'1T'\n</code></pre>\n</div>\n<h3 id=\"timedeltaindex-differences\"><code>TimedeltaIndex</code> differences <a class=\"direct-link\" href=\"#timedeltaindex-differences\">#</a></h3>\n<p>There is no <code>.diff</code> method with <code>TimedeltaIndex</code>, you can use,</p>\n<pre class=\"language-python\"><code class=\"language-python\">np<span class=\"token punctuation\">.</span>subtract<span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> df<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># convert to hour</span><br>np<span class=\"token punctuation\">.</span>subtract<span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> df<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> pd<span class=\"token punctuation\">.</span>Timedelta<span class=\"token punctuation\">(</span><span class=\"token string\">'1 hour'</span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"compare%2Fmake-arithmetic-different-frequency-strings\">Compare/Make arithmetic different frequency strings <a class=\"direct-link\" href=\"#compare%2Fmake-arithmetic-different-frequency-strings\">#</a></h3>\n<p>We wanna compare <code>150S</code> (150 seconds) with <code>1T</code> (1 minutes).</p>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd<br>pd<span class=\"token punctuation\">.</span>to_timedelta<span class=\"token punctuation\">(</span><span class=\"token string\">'150S'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> pd<span class=\"token punctuation\">.</span>to_timedelta<span class=\"token punctuation\">(</span><span class=\"token string\">'1T'</span><span class=\"token punctuation\">)</span><br>pd<span class=\"token punctuation\">.</span>to_timedelta<span class=\"token punctuation\">(</span><span class=\"token string\">'120S'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> pd<span class=\"token punctuation\">.</span>to_timedelta<span class=\"token punctuation\">(</span><span class=\"token string\">'1T'</span><span class=\"token punctuation\">)</span><br>pd<span class=\"token punctuation\">.</span>to_timedelta<span class=\"token punctuation\">(</span><span class=\"token string\">'120S'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> pd<span class=\"token punctuation\">.</span>to_timedelta<span class=\"token punctuation\">(</span><span class=\"token string\">'2T'</span><span class=\"token punctuation\">)</span></code></pre>\n<pre><code>True\nFalse\nTrue\n</code></pre>\n</div>\n<h2 id=\"timestamps\">Timestamps <a class=\"direct-link\" href=\"#timestamps\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> datetime <span class=\"token keyword\">import</span> datetime</code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># to same timezone (UTC, +0)</span><br>df<span class=\"token punctuation\">[</span><span class=\"token string\">'timestamp'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>to_datetime<span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">[</span><span class=\"token string\">'timestamp'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> utc<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> infer_datetime_format<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> cache<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># UTC+0 to UNIX timestamp (POSIX timestamp)</span><br>df<span class=\"token punctuation\">[</span><span class=\"token string\">'timestamp'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> df<span class=\"token punctuation\">[</span><span class=\"token string\">'timestamp'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>datetime<span class=\"token punctuation\">.</span>timestamp<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token operator\">*</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># miliseconds</span><br><br><span class=\"token comment\"># unix timestamp to Timestamps</span><br>datetime<span class=\"token punctuation\">.</span>fromtimestamp<span class=\"token punctuation\">(</span>unix_ts<span class=\"token operator\">//</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># UNIX float (ms) -> datetime64</span><br>df<span class=\"token punctuation\">[</span><span class=\"token string\">'timestamp'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> df<span class=\"token punctuation\">[</span><span class=\"token string\">'timestamp'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>astype<span class=\"token punctuation\">(</span><span class=\"token string\">'datetime64[ms]'</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\"># change `ms` with others, e.g. `ns` for nanosecond</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># remove timezone</span><br>df<span class=\"token punctuation\">[</span><span class=\"token string\">'time'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>dt<span class=\"token punctuation\">.</span>tz_localize<span class=\"token punctuation\">(</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"get-info-timestamps\">Get info timestamps <a class=\"direct-link\" href=\"#get-info-timestamps\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">set_index</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> col_time<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token triple-quoted-string string\">\"\"\"<br>    Make a copy of a time-series dataframe `df` and set the column-time be the<br>    index of the dataframe.<br>    In the case index has no name, we set it as `'index'`.<br>    \"\"\"</span><br>    df0 <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>copy<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">if</span> col_time <span class=\"token operator\">!=</span> <span class=\"token string\">'index'</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># col_time is not the index</span><br>        df0 <span class=\"token operator\">=</span> df0<span class=\"token punctuation\">.</span>set_index<span class=\"token punctuation\">(</span>col_time<span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span><br>        <span class=\"token keyword\">if</span> df0<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">.</span>name <span class=\"token keyword\">is</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">:</span><br>            df0<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'index'</span><br>    <span class=\"token keyword\">return</span> df0</code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">get_info_timestamps</span><span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">,</span> col_date<span class=\"token operator\">=</span><span class=\"token string\">'index'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token comment\"># make sure timestamps are on index</span><br>    df <span class=\"token operator\">=</span> set_index<span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">,</span> col_date<span class=\"token punctuation\">)</span><br>    index_name <span class=\"token operator\">=</span> df<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">.</span>name<br>    df <span class=\"token operator\">=</span> df<span class=\"token punctuation\">.</span>reset_index<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Time range: '</span><span class=\"token punctuation\">,</span> df<span class=\"token punctuation\">[</span>index_name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> df<span class=\"token punctuation\">[</span>index_name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">min</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Number of different time steps: '</span><span class=\"token punctuation\">,</span> df<span class=\"token punctuation\">[</span>index_name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>diff<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>value_counts<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Max time step: '</span><span class=\"token punctuation\">,</span> df<span class=\"token punctuation\">[</span>index_name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>diff<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Min time step: '</span><span class=\"token punctuation\">,</span> df<span class=\"token punctuation\">[</span>index_name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>diff<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">min</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'The most popular time step: '</span><span class=\"token punctuation\">,</span> df<span class=\"token punctuation\">[</span>index_name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>diff<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>value_counts<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'timestamps are monotonic increasing? '</span><span class=\"token punctuation\">,</span> df<span class=\"token punctuation\">[</span>index_name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>is_monotonic<span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Are there duplicate timestamps? '</span><span class=\"token punctuation\">,</span> df<span class=\"token punctuation\">[</span>index_name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>duplicated<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">any</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'How many unique duplicates? '</span><span class=\"token punctuation\">,</span> df<span class=\"token punctuation\">[</span>index_name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>duplicated<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">' (in total '</span><span class=\"token punctuation\">,</span>df<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">')'</span><span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'How many repeated duplicates? '</span><span class=\"token punctuation\">,</span> df<span class=\"token punctuation\">[</span>index_name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>duplicated<span class=\"token punctuation\">(</span>keep<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">' (in total '</span><span class=\"token punctuation\">,</span>df<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">')'</span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"check-timestamps-are-well-sorted%3F\">Check timestamps are well sorted? <a class=\"direct-link\" href=\"#check-timestamps-are-well-sorted%3F\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># CHECK</span><br>df<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span>is_monotonic <span class=\"token comment\"># monotonic increasing?</span><br>df<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span>is_monotonic_decreasing <span class=\"token comment\"># decreasing?</span><br><br><span class=\"token comment\"># if using groupby</span><br><span class=\"token keyword\">def</span> <span class=\"token function\">check_monotonic</span><span class=\"token punctuation\">(</span>group<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">return</span> group<span class=\"token punctuation\">.</span>is_monotonic<br>df<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token string\">'label'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>agg<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">'timestamp'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>check_monotonic<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># ARRANGE THEM</span><br>df<span class=\"token punctuation\">.</span>sort_values<span class=\"token punctuation\">(</span>by<span class=\"token operator\">=</span><span class=\"token string\">'date'</span><span class=\"token punctuation\">,</span> inplace<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></code></pre>\n</div>\n<h2 id=\"detect-time-series-frequency\">Detect time series frequency <a class=\"direct-link\" href=\"#detect-time-series-frequency\">#</a></h2>\n<p>Find the different time steps in a datetime columns,</p>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># count the number of elements for each time steps</span><br>df<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span>diff<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>value_counts<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># count number of different time steps</span><br>df<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span>diff<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>value_counts<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># take the index of the largest</span><br>df<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span>diff<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>value_counts<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><br><br><span class=\"token comment\"># take the index of the smallest</span><br>df<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span>diff<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>value_counts<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span></code></pre>\n<pre><code>00:01:00    11\n00:03:00     2\n00:02:00     1\n00:04:00     1\nName: date, dtype: int64\n\n4\n\nTimedelta('0 days 00:01:00')\n\nTimedelta('0 days 00:04:00')\n</code></pre>\n</div>\n<p>One can couple with function <code>timedelta_to_string</code> in the previous section to find out the most-appeared time steps to feed into <code>df.resample()</code>'s <code>rule</code>.</p>\n<h2 id=\"list-of-resampling-rules\">List of resampling rules <a class=\"direct-link\" href=\"#list-of-resampling-rules\">#</a></h2>\n<p>Official ref <a href=\"https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#dateoffset-objects\">here</a> — search &quot;<em>DateOffsets</em>&quot; to jump to the table.</p>\n<pre><code>B         business day frequency\nC         custom business day frequency (experimental)`\nD         calendar day frequency\nW         weekly frequency\nM         month end frequency\nSM        semi-month end frequency (15th and end of month)\nBM        business month end frequency\nCBM       custom business month end frequency\nMS        month start frequency\nSMS       semi-month start frequency (1st and 15th)\nBMS       business month start frequency\nCBMS      custom business month start frequency\nQ         quarter end frequency\nBQ        business quarter endfrequency\nQS        quarter start frequency\nBQS       business quarter start frequency\nA         year end frequency\nBA, BY    business year end frequency\nAS, YS    year start frequency\nBAS, BYS  business year start frequency\nBH        business hour frequency\nH         hourly frequency\nT, min    minutely frequency\nS         secondly frequency\nL, ms     milliseconds\nU, us     microseconds\nN         nanoseconds\n</code></pre>\n<h2 id=\"references\">References <a class=\"direct-link\" href=\"#references\">#</a></h2>\n<ul>\n<li><a href=\"https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html\">Time Series User Guide</a> on <a href=\"/python-pandas\">pandas</a>.</li>\n</ul>\n",
      "date_published": "2020-03-03T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/simple-autoencoder-ae/",
      "url": "https://dinhanhthi.com/simple-autoencoder-ae/",
      "title": "Simple AutoEncoder (AE)",
      "content_html": "<h2 id=\"basic-idea-of-ae\">Basic idea of AE <a class=\"direct-link\" href=\"#basic-idea-of-ae\">#</a></h2>\n<p><img src=\"/img/post/deep-learning/basic-ae.jpg\" alt=\"Basic idea of autoencoder\" class=\"img-full-80.pop\"></p>\n<h2 id=\"idea%3A-using-ae-in-anomaly-detection\">Idea: using AE in Anomaly Detection <a class=\"direct-link\" href=\"#idea%3A-using-ae-in-anomaly-detection\">#</a></h2>\n<p><img src=\"/img/post/deep-learning/ae-anomaly-detection.jpg\" alt=\"Using AE in Anomaly Detection.\" class=\"img-full-100.pop\"></p>\n<h2 id=\"using-keras\">Using <a href=\"https://keras.io/\">Keras</a> <a class=\"direct-link\" href=\"#using-keras\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> tensorflow <span class=\"token keyword\">as</span> tf<br>tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>backend<span class=\"token punctuation\">.</span>set_floatx<span class=\"token punctuation\">(</span><span class=\"token string\">'float64'</span><span class=\"token punctuation\">)</span><br><br><span class=\"token keyword\">from</span> tensorflow<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>layers <span class=\"token keyword\">import</span> Dense<span class=\"token punctuation\">,</span> Input<br><span class=\"token keyword\">from</span> tensorflow<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> Model<br><br><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>model_selection <span class=\"token keyword\">import</span> train_test_split</code></pre>\n<p>From <a href=\"/files/deep-learning/ae_keras_example_notebook.html\">this notebook</a>,</p>\n<pre class=\"language-python\"><code class=\"language-python\">encoding_dim <span class=\"token operator\">=</span> <span class=\"token number\">30</span><br>input_dim <span class=\"token operator\">=</span> arr_signal_nor<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># 200 features</span><br><br><span class=\"token comment\"># this is our input placeholder</span><br>input_arr <span class=\"token operator\">=</span> Input<span class=\"token punctuation\">(</span>shape<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>input_dim<span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><br>encoded <span class=\"token operator\">=</span> Dense<span class=\"token punctuation\">(</span>encoding_dim<span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'relu'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>input_arr<span class=\"token punctuation\">)</span><br>decoded <span class=\"token operator\">=</span> Dense<span class=\"token punctuation\">(</span>input_dim<span class=\"token punctuation\">,</span> activation<span class=\"token operator\">=</span><span class=\"token string\">'sigmoid'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>encoded<span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># this model maps an input to its reconstruction</span><br>autoencoder <span class=\"token operator\">=</span> Model<span class=\"token punctuation\">(</span>inputs<span class=\"token operator\">=</span>input_arr<span class=\"token punctuation\">,</span> outputs<span class=\"token operator\">=</span>decoded<span class=\"token punctuation\">)</span><br><span class=\"token comment\"># autoencoder.summary()</span><br><br>autoencoder<span class=\"token punctuation\">.</span><span class=\"token builtin\">compile</span><span class=\"token punctuation\">(</span>optimizer<span class=\"token operator\">=</span><span class=\"token string\">'adam'</span><span class=\"token punctuation\">,</span> loss<span class=\"token operator\">=</span><span class=\"token string\">'mse'</span><span class=\"token punctuation\">)</span><br><br>nb_epoch <span class=\"token operator\">=</span> <span class=\"token number\">100</span><br>batch_size <span class=\"token operator\">=</span> <span class=\"token number\">50</span><br>size_test <span class=\"token operator\">=</span> <span class=\"token number\">0.1</span><br>arr_train<span class=\"token punctuation\">,</span> arr_test <span class=\"token operator\">=</span> train_test_split<span class=\"token punctuation\">(</span>arr_signal_nor<span class=\"token punctuation\">,</span> test_size<span class=\"token operator\">=</span>size_test<span class=\"token punctuation\">)</span><br><br>autoencoder<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>arr_train<span class=\"token punctuation\">,</span> arr_train<span class=\"token punctuation\">,</span><br>                epochs<span class=\"token operator\">=</span>nb_epoch<span class=\"token punctuation\">,</span><br>                batch_size<span class=\"token operator\">=</span>batch_size<span class=\"token punctuation\">,</span><br>                shuffle<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span><br>                validation_data<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>arr_test<span class=\"token punctuation\">,</span> arr_test<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>                verbose<span class=\"token operator\">=</span><span class=\"token number\">0</span><br>                <span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"using-pytorch\">Using <a href=\"/pytorch\">PyTorch</a> <a class=\"direct-link\" href=\"#using-pytorch\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> torch<br><span class=\"token keyword\">import</span> torch<span class=\"token punctuation\">.</span>nn <span class=\"token keyword\">as</span> nn<br><span class=\"token keyword\">import</span> torch<span class=\"token punctuation\">.</span>nn<span class=\"token punctuation\">.</span>functional <span class=\"token keyword\">as</span> F<br><span class=\"token keyword\">import</span> torch<span class=\"token punctuation\">.</span>optim <span class=\"token keyword\">as</span> optim</code></pre>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Autoencoder</span><span class=\"token punctuation\">(</span>nn<span class=\"token punctuation\">.</span>Module<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br><br>    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> input_size<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> encoded_size<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>        <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span>Autoencoder<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>__init__<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br><br>        s0 <span class=\"token operator\">=</span> input_size<br>        s1 <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>input_size <span class=\"token operator\">+</span> encoded_size<span class=\"token punctuation\">)</span><span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><br>        s2 <span class=\"token operator\">=</span> encoded_size<br><br>        self<span class=\"token punctuation\">.</span>e1 <span class=\"token operator\">=</span> nn<span class=\"token punctuation\">.</span>Linear<span class=\"token punctuation\">(</span>s0<span class=\"token punctuation\">,</span> s1<span class=\"token punctuation\">)</span><br>        self<span class=\"token punctuation\">.</span>e2 <span class=\"token operator\">=</span> nn<span class=\"token punctuation\">.</span>Linear<span class=\"token punctuation\">(</span>s1<span class=\"token punctuation\">,</span> s2<span class=\"token punctuation\">)</span><br><br>        self<span class=\"token punctuation\">.</span>d2 <span class=\"token operator\">=</span> nn<span class=\"token punctuation\">.</span>Linear<span class=\"token punctuation\">(</span>s2<span class=\"token punctuation\">,</span> s1<span class=\"token punctuation\">)</span><br>        self<span class=\"token punctuation\">.</span>d1 <span class=\"token operator\">=</span> nn<span class=\"token punctuation\">.</span>Linear<span class=\"token punctuation\">(</span>s1<span class=\"token punctuation\">,</span> s0<span class=\"token punctuation\">)</span><br><br>    <span class=\"token keyword\">def</span> <span class=\"token function\">encode</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>        x <span class=\"token operator\">=</span> F<span class=\"token punctuation\">.</span>relu<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>e1<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>        x <span class=\"token operator\">=</span> F<span class=\"token punctuation\">.</span>relu<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>e2<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>        <span class=\"token keyword\">return</span> x<br><br>    <span class=\"token keyword\">def</span> <span class=\"token function\">decode</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>        x <span class=\"token operator\">=</span> F<span class=\"token punctuation\">.</span>relu<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>d2<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>        x <span class=\"token operator\">=</span> torch<span class=\"token punctuation\">.</span>sigmoid<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>d1<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>        <span class=\"token keyword\">return</span> x<br><br>    <span class=\"token keyword\">def</span> <span class=\"token function\">forward</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>        x <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><br>        x <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><br>        <span class=\"token keyword\">return</span> x</code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># USING SEQUENTIAL</span><br><span class=\"token keyword\">class</span> <span class=\"token class-name\">Autoencoder</span><span class=\"token punctuation\">(</span>nn<span class=\"token punctuation\">.</span>Module<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br><br>    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>        <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span>Autoencoder<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>__init__<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br><br>\t\t\t\ts0 <span class=\"token operator\">=</span> input_size<br>        s1 <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>input_size <span class=\"token operator\">+</span> encoded_size<span class=\"token punctuation\">)</span><span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><br>        s2 <span class=\"token operator\">=</span> encoded_size<br><br>        self<span class=\"token punctuation\">.</span>encoder <span class=\"token operator\">=</span> nn<span class=\"token punctuation\">.</span>Sequential<span class=\"token punctuation\">(</span><br>            nn<span class=\"token punctuation\">.</span>Linear<span class=\"token punctuation\">(</span>s0<span class=\"token punctuation\">,</span> s1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>            nn<span class=\"token punctuation\">.</span>ReLU<span class=\"token punctuation\">(</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>            nn<span class=\"token punctuation\">.</span>Linear<span class=\"token punctuation\">(</span>s1<span class=\"token punctuation\">,</span> s2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>            nn<span class=\"token punctuation\">.</span>ReLU<span class=\"token punctuation\">(</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><br>        <span class=\"token punctuation\">)</span><br><br>        self<span class=\"token punctuation\">.</span>decoder <span class=\"token operator\">=</span> nn<span class=\"token punctuation\">.</span>Sequential<span class=\"token punctuation\">(</span><br>            nn<span class=\"token punctuation\">.</span>Linear<span class=\"token punctuation\">(</span>s2<span class=\"token punctuation\">,</span> s1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>            nn<span class=\"token punctuation\">.</span>ReLU<span class=\"token punctuation\">(</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>            nn<span class=\"token punctuation\">.</span>Linear<span class=\"token punctuation\">(</span>s1<span class=\"token punctuation\">,</span> s0<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>            torch<span class=\"token punctuation\">.</span>sigmoid<span class=\"token punctuation\">(</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>        <span class=\"token punctuation\">)</span><br><br>    <span class=\"token keyword\">def</span> <span class=\"token function\">forward</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>        x <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>encoder<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><br>        x <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>decoder<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><br>        <span class=\"token keyword\">return</span> x</code></pre>\n</div>\n",
      "date_published": "2020-03-02T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/pytorch/",
      "url": "https://dinhanhthi.com/pytorch/",
      "title": "PyTorch extra",
      "content_html": "<p>This note is for things with PyTorch. Personal notes only.</p>\n<h2 id=\"installation\">Installation <a class=\"direct-link\" href=\"#installation\">#</a></h2>\n<ul>\n<li>Verify that your computer has a graphic card (NVIDIA):  <code>lspci -nn | grep '\\[03'</code></li>\n<li>Check the CUDA version on Ubuntu: <code>nvidia-smi</code>. If have problems, check <a href=\"/linux-tips#gpu-nvdia-problems\">this note</a>.</li>\n<li>Install the lates version: <a href=\"https://pytorch.org/\">here</a>.</li>\n</ul>\n<h3 id=\"errors\">Errors <a class=\"direct-link\" href=\"#errors\">#</a></h3>\n<h4 id=\"problem-with-cuda-version\">Problem with CUDA version <a class=\"direct-link\" href=\"#problem-with-cuda-version\">#</a></h4>\n<p>For example, need to install corresponding versions: <code>torch==1.2.0</code> &lt;- <code>torchvision==0.4.0</code> &lt;- <code>Pillow&lt;7.0.0</code></p>\n<pre class=\"language-bash\"><code class=\"language-bash\">pip3 <span class=\"token function\">install</span> -U <span class=\"token assign-left variable\">torch</span><span class=\"token operator\">==</span><span class=\"token number\">1.2</span>.0<br>pip3 <span class=\"token function\">install</span> -U <span class=\"token assign-left variable\">torchvision</span><span class=\"token operator\">==</span><span class=\"token number\">0.4</span>.0<br>pip3 <span class=\"token function\">install</span> -U <span class=\"token string\">\"pillow&lt;7\"</span></code></pre>\n<p>Another option (worked on XPS 15 7950): <code>torch==1.5.1</code>, <code>torchvision==0.6.1</code>, <code>pillow==7.2.0</code> (with <code>nvcc --version</code> is <code>11.1</code>).</p>\n<h4 id=\"nvidia-too-old\">NVIDIA too old <a class=\"direct-link\" href=\"#nvidia-too-old\">#</a></h4>\n<p>Problem <code>The NVIDIA driver on your system is too old (found version 10010)</code>.</p>\n<p>From <a href=\"https://discuss.pytorch.org/t/old-cuda-driver-with-pytorch-1-5/78470/5\">this website</a>, problem is solved by</p>\n<ol>\n<li>Switching from <code>nvidia-driver-435</code> to <code>nvidia-driver-440</code>.</li>\n<li>Restart the computer.</li>\n</ol>\n<p>It works on Dell XPS 7950 whose GPU is NVIDIA GTX 1650.</p>\n<h4 id=\"others\">Others <a class=\"direct-link\" href=\"#others\">#</a></h4>\n<p>🔅 <em>RuntimeError: cuda runtime error (804) : forward compatibility was attempted on non supported HW at /pytorch/aten/src/THC/THCGeneral.cpp:47</em> (after update system including nvdia-cli, maybe): check this <a href=\"/linux-tips#gpu-nvdia-problems\">note</a>.</p>\n<h2 id=\"import\">Import <a class=\"direct-link\" href=\"#import\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> torch<br><span class=\"token keyword\">import</span> torch<span class=\"token punctuation\">.</span>nn <span class=\"token keyword\">as</span> nn<br><span class=\"token keyword\">import</span> torch<span class=\"token punctuation\">.</span>nn<span class=\"token punctuation\">.</span>functional <span class=\"token keyword\">as</span> F<br><span class=\"token keyword\">import</span> torch<span class=\"token punctuation\">.</span>optim <span class=\"token keyword\">as</span> optim</code></pre>\n<h2 id=\"device's-info\">Device's info <a class=\"direct-link\" href=\"#device's-info\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'cuda is available? '</span><span class=\"token punctuation\">,</span> torch<span class=\"token punctuation\">.</span>cuda<span class=\"token punctuation\">.</span>is_available<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'device_count: '</span><span class=\"token punctuation\">,</span> torch<span class=\"token punctuation\">.</span>cuda<span class=\"token punctuation\">.</span>device_count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'current device: '</span><span class=\"token punctuation\">,</span> torch<span class=\"token punctuation\">.</span>cuda<span class=\"token punctuation\">.</span>current_device<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'device name: '</span><span class=\"token punctuation\">,</span> torch<span class=\"token punctuation\">.</span>cuda<span class=\"token punctuation\">.</span>get_device_name<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Determine supported device</span><br><span class=\"token keyword\">def</span> <span class=\"token function\">get_device</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">if</span> torch<span class=\"token punctuation\">.</span>cuda<span class=\"token punctuation\">.</span>is_available<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>        device <span class=\"token operator\">=</span> torch<span class=\"token punctuation\">.</span>device<span class=\"token punctuation\">(</span><span class=\"token string\">'cuda:0'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># or something else</span><br>    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span><br>        device <span class=\"token operator\">=</span> torch<span class=\"token punctuation\">.</span>device<span class=\"token punctuation\">(</span><span class=\"token string\">'cpu'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># don't have GPU</span><br>    <span class=\"token keyword\">return</span> device</code></pre>\n<h2 id=\"convert-dataframe-%2F-series-to-tensor\">Convert DataFrame / Series to Tensor <a class=\"direct-link\" href=\"#convert-dataframe-%2F-series-to-tensor\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">df_to_tensor</span><span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    device <span class=\"token operator\">=</span> get_device<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># see other section</span><br>    <span class=\"token keyword\">return</span> torch<span class=\"token punctuation\">.</span>from_numpy<span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">float</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">(</span>device<span class=\"token punctuation\">)</span></code></pre>\n",
      "date_published": "2020-03-02T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/gatsby-images/",
      "url": "https://dinhanhthi.com/gatsby-images/",
      "title": "Gatsby Images",
      "content_html": "<p>Because the post <a href=\"/gatsby-js/\">Gatsby 101</a> is too long, I write a separate post just for images in Gatsby.</p>\n<div class=\"warning\">\n<p>After trying Gatsby, I found that <a href=\"/11ty-nunjucks/\">11ty</a> is more flexible (and easier).</p>\n</div>\n<h2 id=\"rule-of-thumb\">Rule of thumb <a class=\"direct-link\" href=\"#rule-of-thumb\">#</a></h2>\n<ul>\n<li>Static images (icon, logo, favicon): just <code>import</code> and use <code>img</code>.</li>\n<li><code>svg</code> cannot be used with <code>childImageSharp</code>, just use <code>&lt;img&gt;</code> with its <code>publicURL</code>.</li>\n<li><code>png</code>, <code>jpg</code> can be used with <code>&lt;Img&gt;</code> and <code>childImageSharp</code>.</li>\n<li>Data can be used: <code>json</code> or <code>yaml</code>, cannot use <code>js</code> for images.</li>\n<li>List of images are get up to <code>edges</code>. After <code>edges</code>, there are a loop of <code>node</code>s.</li>\n<li><code>query</code> components must placed in <code>&lt;StaticQuery /&gt;</code>.</li>\n<li>Different screen solution: use <code>fixed</code>.</li>\n<li>Different screen size: use <code>fluid</code>.</li>\n<li>Use <a href=\"http://localhost:8000/___graphql\">http://localhost:8000/___graphql</a> to check the <code>query</code>.</li>\n<li>Use <code>{condition &amp;&amp; condition &amp;&amp; output}</code> instead of using <code>if..else...</code></li>\n<li>The relative path of images is compared with the path of data file where the urls are indicated.</li>\n</ul>\n<h2 id=\"type-of-images-to-be-processed\">Type of images to be processed <a class=\"direct-link\" href=\"#type-of-images-to-be-processed\">#</a></h2>\n<p>Read <a href=\"https://css-tricks.com/ways-to-organize-and-prepare-images-for-a-blur-up-effect-using-gatsby/\">this post</a> from CSS-Tricks to know which images should be processed, which ones should not.</p>\n<p class=\"indent\"></p>\n<ul>\n<li><strong>No processing required</strong>: &quot;static images&quot;, icons and logos, favicons 👉 We can <code>import</code> and use <code>&lt;img&gt;</code> to directly import them.</li>\n<li><strong>Process required</strong>: PNG, JPG files, gallery, ...</li>\n</ul>\n<h2 id=\"single-photo\">Single photo <a class=\"direct-link\" href=\"#single-photo\">#</a></h2>\n<p>Install stuffs following <a href=\"https://www.gatsbyjs.org/docs/gatsby-image/\">this doc</a>,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save gatsby-image gatsby-plugin-sharp gatsby-transformer-sharp</code></pre>\n<h3 id=\"insert-directly%2C\">Insert directly, <a class=\"direct-link\" href=\"#insert-directly%2C\">#</a></h3>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> avatar <span class=\"token keyword\">from</span> <span class=\"token string\">\"src/images/site/avatar.jpg\"</span><br><span class=\"token keyword\">function</span> <span class=\"token function\">Header</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>logo<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Logo<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><br><span class=\"token punctuation\">}</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Header</code></pre>\n<h3 id=\"using-data%2Fquery\">Using data/query <a class=\"direct-link\" href=\"#using-data%2Fquery\">#</a></h3>\n<p>So that we can have the lazing loading / resizing / blur-up (traced placeholder) effects.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save gatsby-image gatsby-transformer-sharp gatsby-plugin-sharp</code></pre>\n<p>Below technique is just for single photos.</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// gatsby-config.js</span><br>module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><br>  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><br>    <span class=\"token operator\">...</span><br>    <span class=\"token string\">'gatsby-plugin-sharp'</span><span class=\"token punctuation\">,</span><br>    <span class=\"token string\">'gatsby-transformer-sharp'</span><span class=\"token punctuation\">,</span><br>    <span class=\"token punctuation\">{</span><br>      resolve<span class=\"token operator\">:</span> <span class=\"token string\">'gatsby-source-filesystem'</span><span class=\"token punctuation\">,</span><br>      options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>        name<span class=\"token operator\">:</span> <span class=\"token string\">'images'</span><span class=\"token punctuation\">,</span><br>        path<span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">src</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">images</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><br><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// src/components/Header.js</span><br><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> StaticQuery<span class=\"token punctuation\">,</span> graphql <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby'</span><span class=\"token punctuation\">;</span><br><span class=\"token keyword\">import</span> Img <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby-image'</span><span class=\"token punctuation\">;</span><br><br><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Header</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>header</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Img</span></span> <span class=\"token attr-name\">fluid</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>myAvatar<span class=\"token punctuation\">.</span>childImageSharp<span class=\"token punctuation\">.</span>fluid<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"><br>  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>header</span><span class=\"token punctuation\">></span></span><br><span class=\"token punctuation\">)</span><br><br><span class=\"token comment\">// src/images/avatar.png</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><br>  <span class=\"token operator\">&lt;</span>StaticQuery<br>    query<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"><br>      query {<br>        myAvatar: file(relativePath: { eq: \"avatar.png\" }) {<br>          childImageSharp {<br>            fluid(maxWidth: 150) {<br>              ...GatsbyImageSharpFluid<br>            }<br>          }<br>        }<br>      }<br>    </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span><br>    render<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Header</span></span> <span class=\"token attr-name\">data</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">}</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">...</span><span class=\"token attr-value\">props</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span><br>  <span class=\"token operator\">/</span><span class=\"token operator\">></span><br><span class=\"token punctuation\">)</span></code></pre>\n<p>👉 Most of tutorials like <a href=\"https://alligator.io/gatsbyjs/images-in-gatsby/\">this</a> or <a href=\"https://codebushi.com/using-gatsby-image/\">this</a> don't talk about <a href=\"https://www.gatsbyjs.org/docs/static-query/\"><code>StaticQuery</code></a> (Gatsby v2). I followed them but it didn't work, we have to use <code>StaticQuery</code> to make things work! 👉 The reason is that the (old) page query can only be added to page components (in my try, I add in <code>Header.js</code> component). <code>StaticQuery</code> can be used as a replacement of page query, it can be added to any component.<sup><a href=\"https://www.gatsbyjs.org/docs/static-query/#how-staticquery-differs-from-page-query\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<p>👉 There are 2 types:</p>\n<p class=\"indent\"></p>\n<ul>\n<li><code>fixed</code>: has a set width and height and is for supporting <em>different screen resolutions</em>. It accepts <code>width</code> and <code>height</code>.</li>\n<li><code>fluid</code>: has a max-width and sometimes a max-height, and will create multiple images for supporting <em>different screen sizes</em>.  It accepts <code>maxWidth</code> and <code>maxHeight</code>.</li>\n</ul>\n<p>You need to use them with fragments like <code>GatsbyImageSharpFixed_tracedSVG</code> or <code>GatsbyImageSharpFluid</code> (<a href=\"https://www.gatsbyjs.org/packages/gatsby-image/?=#fragments\">more</a>).</p>\n<h3 id=\"using-absolute-path\">Using absolute path <a class=\"direct-link\" href=\"#using-absolute-path\">#</a></h3>\n<p>If you want to query to an image in <code>/src/images/example.png</code>, you can use,</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> query <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"><br>  query {<br>    file(absolutePath: {<br>      regex: \"/\\\\/src\\\\/images\\\\/example\\\\.png/\"<br>    }) {<br>      childImageSharp {<br>        fixed(width: 800) {<br>          ...GatsbyImageSharpFixed<br>        }<br>      }<br>    }<br>  }<br></span><span class=\"token template-punctuation string\">`</span></span></code></pre>\n<h3 id=\"svg-files\">SVG files <a class=\"direct-link\" href=\"#svg-files\">#</a></h3>\n<p><code>gatsby-plugin-sharp</code> / <code>gatsby-image</code> doesn't handle SVGs or GIFs. If you want to use your svg you, e.g. could import / use it like <code>import yourSVG from './logo_large.svg'</code>.<sup><a href=\"https://github.com/gatsbyjs/gatsby/issues/10297\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<h2 id=\"change-favicon\">Change favicon <a class=\"direct-link\" href=\"#change-favicon\">#</a></h2>\n<p>Put <code>favicon.png</code> in <code>src/images</code> and then change <code>gatsby-config.js</code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span><br>  resolve<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-plugin-manifest</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span><br>  options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token comment\">// other stuffs</span><br>    icon<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">src/images/favicon.png</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span><br>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre>\n<p>You need to restart <code>gastby</code> to see the result!</p>\n<h2 id=\"multiple-images-from-data-file%2Ffolder\">Multiple images from data file/folder <a class=\"direct-link\" href=\"#multiple-images-from-data-file%2Ffolder\">#</a></h2>\n<h3 id=\"images'-urls-stored-in-a-json-file\">Images' URLs stored in a JSON file <a class=\"direct-link\" href=\"#images'-urls-stored-in-a-json-file\">#</a></h3>\n<p>Suppose that we store some images in <code>/src/images/</code> and we indicate them in a json file like this,</p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// File /data/AccountItem.json</span><br><span class=\"token punctuation\">[</span><br>  <span class=\"token punctuation\">{</span><br>    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Github\"</span><span class=\"token punctuation\">,</span><br>    <span class=\"token property\">\"icon\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./github.svg\"</span><span class=\"token punctuation\">,</span><br>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>  <span class=\"token punctuation\">{</span><br>    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"LinkedIn\"</span><span class=\"token punctuation\">,</span><br>    <span class=\"token property\">\"icon\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./linkedin.svg\"</span><span class=\"token punctuation\">,</span><br>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>  <span class=\"token punctuation\">{</span><br>    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Math2IT\"</span><span class=\"token punctuation\">,</span><br>    <span class=\"token property\">\"icon\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./math2it.png\"</span><span class=\"token punctuation\">,</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">]</span></code></pre>\n<p>Images (<code>github.svg</code>, <code>linkedin.svg</code>, <code>math2it.png</code>) are stored in the same folder of your json file, that why we put <code>./</code> before them!</p>\n<p>❓ There are both <code>png</code> and <code>svg</code> files in the list. We cannot use <code>childImageSharp</code> for svg files. How can we &quot;loop&quot; through each item and consider differently svg and png files?</p>\n<p>💡 Read <a href=\"https://itnext.io/reading-data-from-a-json-file-with-gatsby-graphql-572b18ab98a\">this tutorial</a> to read data from a json file.</p>\n<ol>\n<li>\n<p>Having a json file, in this example, it's <code>/data/AccountItem.json</code> (you can name it whatwever you want but its name is really important for using later!!!)</p>\n</li>\n<li>\n<p>Install</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> gatsby-transformer-json gatsby-source-filesystem --save</code></pre>\n</li>\n<li>\n<p>Inside <code>/gatsby-config.js</code>, add following (direction in <code>path</code> is the direction to the folder containing your json file),</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-transformer-json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span><br><span class=\"token punctuation\">{</span><br>  resolve<span class=\"token operator\">:</span> <span class=\"token string\">'gatsby-source-filesystem'</span><span class=\"token punctuation\">,</span><br>  options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>    name<span class=\"token operator\">:</span> <span class=\"token string\">'data'</span><span class=\"token punctuation\">,</span><br>    path<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/data/</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span><br>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br><span class=\"token punctuation\">}</span></code></pre>\n</li>\n<li>\n<p>Suppose that we wanna load images in a component <code>/src/components/ListAccount.js</code>. Put in it,<sup><a href=\"https://github.com/gatsbyjs/gatsby/issues/10297#issuecomment-464834529\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> StaticQuery<span class=\"token punctuation\">,</span> graphql <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby'</span><span class=\"token punctuation\">;</span><br><span class=\"token keyword\">import</span> Img <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby-image'</span><br><br><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ListAccount</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span> <span class=\"token parameter\"><span class=\"token punctuation\">{</span>accounts<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>    </span><span class=\"token punctuation\">{</span>accounts<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">account</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><br>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>item<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>img<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>          </span><span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>account<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>icon<span class=\"token punctuation\">.</span>childImageSharp<br>            <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>account<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>icon<span class=\"token punctuation\">.</span>extension <span class=\"token operator\">===</span> <span class=\"token string\">'svg'</span><span class=\"token punctuation\">)</span><br>            <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>account<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>icon<span class=\"token punctuation\">.</span>publicURL<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><br>            <span class=\"token punctuation\">}</span><span class=\"token plain-text\"><br>          </span><span class=\"token punctuation\">{</span>account<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>icon<span class=\"token punctuation\">.</span>extension <span class=\"token operator\">!==</span> <span class=\"token string\">'svg'</span><br>            <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Img</span></span> <span class=\"token attr-name\">fixed</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>account<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>icon<span class=\"token punctuation\">.</span>childImageSharp<span class=\"token punctuation\">.</span>fixed<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><br>            <span class=\"token punctuation\">}</span><span class=\"token plain-text\"><br>        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><br>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"><br>  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><br><span class=\"token punctuation\">)</span><br><span class=\"token comment\">//</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><br>  <span class=\"token operator\">&lt;</span>StaticQuery<br>    query<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"><br>      query AccountItemsQuery {<br>        allAccountItemsJson{<br>          edges{<br>            node{<br>              name<br>              icon{<br>                childImageSharp {<br>                  fixed(width: 150, height: 150) {<br>                    ...GatsbyImageSharpFixed_tracedSVG<br>                  }<br>                }<br>                extension<br>                publicURL<br>              }<br>            }<br>          }<br>        }<br>      }<br>    </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span><br>    render<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ListAccount</span></span> <span class=\"token attr-name\">accounts</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>allAccountItemsJson<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">}</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">...</span><span class=\"token attr-value\">props</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span><br>  <span class=\"token operator\">/</span><span class=\"token operator\">></span><br><span class=\"token punctuation\">)</span></code></pre>\n</li>\n</ol>\n<p>Explaination:</p>\n<p class=\"indent\"></p>\n<ul>\n<li>We have to put <code>extension</code> and <code>publicURL</code> inside <code>icon</code> because there are <code>svg</code> files!</li>\n<li>For more intuition, look at <a href=\"http://localhost:8000/___graphql\">http://localhost:8000/___graphql</a>.</li>\n<li>In <code>edges</code>, there are many <code>node</code>s, each of them is relating to the item inside <code>AccountItem.json</code>. That's why the input data for <code>&lt;ListAccount /&gt;</code> must be <code>data.allAccountItemsJson.edges</code>.</li>\n<li>For each <code>account</code> in <code>accounts</code>, we have to pass <code>account.node</code> before each attribute <code>name</code>, <code>icon</code>.</li>\n<li><code>{condition &amp;&amp; condition &amp;&amp; output}</code> is a trick for not using <code>if...else</code>.</li>\n</ul>\n<p>👉 In the case you store images in a different folder, let's say <code>/src/images/accounts/</code>, you have to indicate it in <code>/data/AccountItems.json</code>:</p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">[</span><br>  <span class=\"token punctuation\">{</span><br>    <span class=\"token property\">\"icon\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"../src/images/accounts/github.svg\"</span><span class=\"token punctuation\">,</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">]</span></code></pre>\n<h3 id=\"using-yaml-data-file\">Using YAML data file <a class=\"direct-link\" href=\"#using-yaml-data-file\">#</a></h3>\n<p>Suppose our <code>yaml</code> file,</p>\n<pre class=\"language-yaml\"><code class=\"language-yaml\">// File /data/AccountItem.yaml<br><br><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Github<br>  <span class=\"token key atrule\">icon</span><span class=\"token punctuation\">:</span> ./github.svg<br><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> LinkedIn<br>  <span class=\"token key atrule\">icon</span><span class=\"token punctuation\">:</span> ./linkedin.svg<br><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Math2IT<br>  <span class=\"token key atrule\">icon</span><span class=\"token punctuation\">:</span> ./math2it.png</code></pre>\n<p>The same technique as in the case of <code>json</code> file. In this case, we need to install <a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-yaml/\"><code>gatsby-transformer-yaml</code></a>,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save gatsby-transformer-yaml</code></pre>\n<p>In your <code>gatsby-config.js</code>,</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-transformer-yaml</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span><br><span class=\"token punctuation\">{</span><br>  resolve<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-source-filesystem</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span><br>  options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>    name<span class=\"token operator\">:</span> <span class=\"token string\">'data'</span><span class=\"token punctuation\">,</span><br>    path<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/data/</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span><br>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre>\n<h2 id=\"query-as-an-input\"><code>query</code> as an input <a class=\"direct-link\" href=\"#query-as-an-input\">#</a></h2>\n<p>In the previous step, <code>query</code> is considered inside the component file. What if you wanna query data and then pass it in a JSX components? (check <code>index.js</code> for an example)</p>\n<p>There is a data file <code>/data/MostProudOfItems.yaml</code>.</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// in /src/pages/index.js</span><br><br><span class=\"token keyword\">import</span> ShortcutListing <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/ShortcutListing\"</span><br><br><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">indexPage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ShortcutListing</span></span><br>    <span class=\"token attr-name\">shortcuts</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>allMostProudOfItemsYaml<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">}</span></span><br>    <span class=\"token attr-name\">nShortcutsPerRow</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>3<span class=\"token punctuation\">'</span></span> <span class=\"token punctuation\">/></span></span><br><span class=\"token punctuation\">)</span><br><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> IndexPage<br><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"><br>  query IndexQuery {<br>    allMostProudOfItemsYaml{<br>      edges {<br>        node {<br>          title<br>          img {<br>            childImageSharp {<br>              fixed(width: 100, height: 100) {<br>                ...GatsbyImageSharpFixed_tracedSVG<br>              }<br>            }<br>            extension<br>            publicURL<br>          }<br>          url<br>        }<br>      }<br>    },<br>    anotherYaml{<br>      ....<br>    }<br>  }<br></span><span class=\"token template-punctuation string\">`</span></span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// in /src/components/ShortcutListing</span><br><br><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ListShortcut</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>shortcuts<span class=\"token punctuation\">,</span> nShortcutsPerRow<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><br>  <span class=\"token comment\">// ...</span><br><span class=\"token punctuation\">)</span><br><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> ListShortcut</code></pre>\n<h2 id=\"get-all-images-from-a-specific-folder\">Get all images from a specific folder <a class=\"direct-link\" href=\"#get-all-images-from-a-specific-folder\">#</a></h2>\n<p>👉 This is also a way you use the <code>name</code> indicate in <code>gatsby-config.js</code>.</p>\n<p>Suppose that you wanna show all images in <code>/sketches/</code>.<sup><a href=\"https://stackoverflow.com/questions/57515558/how-should-i-import-all-the-images-under-a-folder-in-gatsby\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<div class=\"col-2-equal\">\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// In /gatsby-config.js</span><br><span class=\"token punctuation\">{</span><br>  resolve<span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby-source-filesystem\"</span><span class=\"token punctuation\">,</span><br>  options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>    path<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/sketches/</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span><br>    name<span class=\"token operator\">:</span> <span class=\"token string\">\"sketchFolder\"</span><span class=\"token punctuation\">,</span><br>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"><br>  query IndexQuery {<br>    allFile(filter: {<br>      extension: {regex: \"/(jpg)|(jpeg)|(png)/\"},<br>      sourceInstanceName: {eq: \"sketchFolder\"}})<br>    {<br>      edges {<br>        node {<br>          childImageSharp {<br>            fluid {<br>              originalName<br>            }<br>          }<br>          absolutePath<br>        }<br>      }<br>    }<br>  }<br></span><span class=\"token template-punctuation string\">`</span></span></code></pre>\n</div>\n<p>💢 Above method is <strong>only works</strong> with <code>/sketches</code> (folder locates at the root of site). It doesn't work with <code>/src/images/sketches</code>, for example. I don't know why!</p>\n<p>👉 If you want to get all images from a folder (without using <code>sourceInstanceName</code>) you can use <code>relativeDirectory</code> in the <code>query</code>. Suppose that we have 2 folders with the same name <code>sketches</code>, one is in <code>/content/sketches</code>, one is in <code>/src/images/sketches</code>. The following code will <strong>load all images in these two folders</strong>!</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// In /gatsby-config.js</span><br><span class=\"token punctuation\">{</span><br>  resolve<span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby-source-filesystem\"</span><span class=\"token punctuation\">,</span><br>  options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>    path<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/content/</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span><br>    name<span class=\"token operator\">:</span> <span class=\"token string\">\"content\"</span><span class=\"token punctuation\">,</span><br>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br><span class=\"token punctuation\">{</span><br>  resolve<span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby-source-filesystem\"</span><span class=\"token punctuation\">,</span><br>  options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>    path<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/src/images</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span><br>    name<span class=\"token operator\">:</span> <span class=\"token string\">\"images\"</span><span class=\"token punctuation\">,</span><br>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"><br>  query IndexQuery {<br>    allFile(filter: {<br>      extension: {regex: \"/(jpg)|(jpeg)|(png)/\"},<br>      relativeDirectory: {eq: \"sketches\"}})<br>    {<br>      edges {<br>        node {<br>          childImageSharp {<br>            fluid {<br>              originalName<br>            }<br>          }<br>          absolutePath<br>        }<br>      }<br>    }<br>  }<br></span><span class=\"token template-punctuation string\">`</span></span></code></pre>\n</div>\n<p>💢 Make sure the name of your folder is <strong>unique</strong> if you don't want to load images from a wrong location.</p>\n<h2 id=\"references\">References <a class=\"direct-link\" href=\"#references\">#</a></h2>\n<ul>\n<li><a href=\"https://www.orangejellyfish.com/blog/a-comprehensive-guide-to-images-in-gatsby/\">A comprehensive guide to images in Gatsby</a> by James Allardice.</li>\n<li><a href=\"https://image-processing.gatsbyjs.org/\">Image Processing with <code>gatsby-transformer-sharp</code></a>.</li>\n<li><a href=\"https://416serg.me/building-a-custom-accessible-image-lightbox-in-gatsbyjs/\">Building A Custom, Accessible Image Lightbox In GatsbyJS</a></li>\n</ul>\n",
      "date_published": "2019-12-30T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/gatsby-js/",
      "url": "https://dinhanhthi.com/gatsby-js/",
      "title": "Gatsby 101",
      "content_html": "<p>Jekyll is great but for a note-taking site like this site, it's slow. I decide to learn about Gatsby to make my note site more faster!</p>\n<div class=\"warning\">\n<p>After trying Gatsby, I found that <a href=\"/11ty-nunjucks/\">11ty</a> is more flexible (and easier).</p>\n</div>\n<h2 id=\"misc\">Misc <a class=\"direct-link\" href=\"#misc\">#</a></h2>\n<p>👉 If you wanna install some additional plugins/components, remember to add <code>--save</code> at the end of the installation line. This step is to add to <code>package.json</code>.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># for example</span><br><span class=\"token function\">npm</span> i gatsby-plugin-react-head react-head --save</code></pre>\n<p>When you install something new, don't forget to <code>cd</code> to the current working directory, e.g. <code>/gatsby-site</code>.</p>\n<p>👉 React / Gatsby use <a href=\"https://reactjs.org/docs/introducing-jsx.html\">JSX</a> syntax. It's an XML/HTML-like syntax used by React that extends ECMAScript so that XML/HTML-like text can co-exist with JavaScript/React code.</p>\n<p>👉 Read <a href=\"https://itnext.io/react-component-class-vs-stateless-component-e3797c7d23ab\">this</a> to understand the differences between <strong>Class Component</strong> and <strong>Functional Component</strong> (a.k.a. <strong>stateless</strong>). Below are 2 examples which give the same result.</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// Class Component</span><br><span class=\"token keyword\">class</span> <span class=\"token class-name\">MyComponentClass</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span><br>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// Functional Component</span><br><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">MyStatelessComponent</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span><br><span class=\"token comment\">// without JSX</span><br><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">MyStatelessComponent</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> props<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n</div>\n<ul>\n<li><strong>Functional Component</strong> (stateless component): just a plain javascript function which takes props as an argument and returns a react element. You can't reach <code>this.state</code> inside it.</li>\n<li><strong>Component class</strong>: has a state, lifecycle <a href=\"https://reactjs.org/docs/react-component.html\">hooks</a> and it is a javascript class.</li>\n</ul>\n<p>The rule would be: if your component needs some data which cannot be passed as a prop use class component to get that data. If you need to keep UI state in your component(expandable blocks) so it’s a good place to keep that info in a components state.</p>\n<h2 id=\"installation-on-localhost\">Installation on localhost <a class=\"direct-link\" href=\"#installation-on-localhost\">#</a></h2>\n<p>Install <a href=\"https://www.npmjs.com/\">npm</a> and <a href=\"https://nodejs.org/en/\">NodeJS (with npm)</a>. Check the current version: <code>npm -v</code> (for npm) and <code>node -v</code> (for nodejs). After that, you can install Gatsby,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install</span><br><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --global gatsby-cli<br><span class=\"token comment\"># check version</span><br>gatsby -v<br><span class=\"token comment\"># update</span><br><span class=\"token function\">npm</span> i -g gatsby-cli</code></pre>\n<div class=\"hsbox\"><div class=\"hs__title\">If error <code>EACCES</code> occurs (fix on Linux)</div><div class=\"hs__content\"><ul>\n<li>\n<p>Create a new folder by: <code>mkdir ~/.npm-global</code></p>\n</li>\n<li>\n<p>Open <code>~/.profile</code></p>\n</li>\n<li>\n<p>Add following lines to this file</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> config <span class=\"token builtin class-name\">set</span> prefix <span class=\"token string\">'~/.npm-global'</span><br><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span>~/.npm-global/bin:<span class=\"token environment constant\">$PATH</span></code></pre>\n</li>\n<li>\n<p>Save the file and then run (if you don't restart the computer, do the same below work for new tab of terminal): <code>source ~/.profile</code>.</p>\n</li>\n</ul>\n</div></div>\n<p>Install new site with</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">gatsby new gatsby-site <span class=\"token comment\"># create a new site with name 'gatsby-site'</span><br><span class=\"token builtin class-name\">cd</span> gatsby-site<br>gatsby develop <span class=\"token comment\"># run the site at http://localhost:8000</span></code></pre>\n<p>You can use <a href=\"https://github.com/graphql/graphiql\">GraphiQL</a>, an in-browser IDE, to explore your site's data and schema,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">http://localhost:8000/___graphql</code></pre>\n<div class=\"hsbox\"><div class=\"hs__title\">How to use <code>___graphql</code>?</div><div class=\"hs__content\"><p>Suppose that in <code>ListAccount.js</code>,</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><br>  <span class=\"token operator\">&lt;</span>StaticQuery<br>    query<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"><br>      query AccountItemsQuery {<br>        allAccountItemsJson{<br>          edges{<br>            node{<br>              name<br>              icon{<br>                childImageSharp {<br>                  fixed(width: 150, height: 150) {<br>                    ...GatsbyImageSharpFixed_tracedSVG<br>                  }<br>                }<br>              }<br>              url<br>              opacity<br>              title<br>            }<br>          }<br>        }<br>      }<br>    </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span><br>    render<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ListSocial</span></span> <span class=\"token attr-name\">accounts</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">}</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">...</span><span class=\"token attr-value\">props</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span><br>  <span class=\"token operator\">/</span><span class=\"token operator\">></span><br><span class=\"token punctuation\">)</span></code></pre>\n<p>In <a href=\"http://localhost:8000/___graphql\">http://localhost:8000/___graphql</a>,</p>\n<pre class=\"language-js\"><code class=\"language-js\">query AccountItemsQuery <span class=\"token punctuation\">{</span><br>  allAccountItemsJson <span class=\"token punctuation\">{</span><br>    edges <span class=\"token punctuation\">{</span><br>      node <span class=\"token punctuation\">{</span><br>        name<br>        icon <span class=\"token punctuation\">{</span><br>          childImageSharp <span class=\"token punctuation\">{</span><br>            <span class=\"token function\">fixed</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">width<span class=\"token operator\">:</span> <span class=\"token number\">150</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">:</span> <span class=\"token number\">150</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>              tracedSVG<br>            <span class=\"token punctuation\">}</span><br>          <span class=\"token punctuation\">}</span><br>        <span class=\"token punctuation\">}</span><br>        url<br>        opacity<br>        title<br>      <span class=\"token punctuation\">}</span><br>    <span class=\"token punctuation\">}</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<p>and then click on <strong>Run</strong> icon to see the result!</p>\n</div></div>\n<h2 id=\"errors%3F\">Errors? <a class=\"direct-link\" href=\"#errors%3F\">#</a></h2>\n<p>👉 Requires...</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># bootstrap@4.4.1 requires a peer of jquery@1.9.1</span><br><span class=\"token function\">npm</span> i jquery@1.9.1 --save<br><br><span class=\"token comment\"># tsutils@3.17.1 requires a peer of typescript@>=2.8.0</span><br><span class=\"token function\">npm</span> i typescript --save</code></pre>\n<p>👉 Cannot read property...</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># TypeError: Cannot read property 'fileName' of undefined</span></code></pre>\n<p>Above error comes from inserting images using query. To overcome this, we have to use <a href=\"https://www.gatsbyjs.org/docs/static-query/\"><code>StaticQuery</code></a> which is introduced in Gatsby v2 (I don't know why it works!?) 👉 The reason is that the (old) page query can only be added to page components (in my try, I add in <code>Header.js</code> component). <code>StaticQuery</code> can be used as a replacement of page query, it can be added to any component.<sup><a href=\"https://www.gatsbyjs.org/docs/static-query/#how-staticquery-differs-from-page-query\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<p>👉 Fail to build on Netlify <code>Build script returned non-zero exit code: 127</code>,</p>\n<ul>\n<li>Delete <code>package-lock.json</code>, don't include it and <code>node_modules</code> on git.</li>\n<li>Remove either <code>package.json</code> or <code>yarn.lock</code> on Github (remove yarn).</li>\n<li><code>&quot;version&quot;: &quot;0.1&quot;,</code> is wrong, changing to <code>&quot;1.0.1&quot;</code> is OK.</li>\n<li>Try to debug with <a href=\"https://www.netlify.com/products/dev/#how-it-works\">netlify on localhost</a>.\n<ul>\n<li>After installing, <code>cd</code> to <code>gatsby-site</code> and then run <code>netlify dev</code>.</li>\n<li>Read <a href=\"https://www.netlify.com/blog/2019/05/28/deploy-in-seconds-with-netlify-cli/\">more</a> and <a href=\"https://scotch.io/tutorials/netlify-dev-the-power-of-netlify-on-your-local-computer\">more</a>.</li>\n</ul>\n</li>\n</ul>\n<p>👉 Fail to build on Netlify <code>Can't resolve '../components/Header' in '/opt/build/repo/src/components'</code> for examples. 👉 The problem comes from the original name of file <code>Header.js</code> is <code>header.js</code>. I renamed it to <code>Header.js</code> but it's still actually <code>header.js</code> (check the Github Desktop to see). You can change is to <code>HeaderNew.js</code> to fix the problem!</p>\n<p>👉 If you wanna use adjacent react components, you have to put them inside <code>&lt;&gt;..&lt;/&gt;</code> (<a href=\"https://reactjs.org/docs/fragments.html\">React fragment</a>) like below example,</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><br>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Navigation</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Navigation</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Header</span></span> <span class=\"token attr-name\">type</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>headerType<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"><br>      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Thi</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span><br>  <span class=\"token punctuation\">)</span></code></pre>\n<p>This allows you to return multiple child components without appending additional nodes to the DOM.</p>\n<p>👉 <code>Warning: Each child in a list should have a unique &quot;key&quot; prop.</code> You have to make sure that each child of a list in react component has a unique key. For example</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// error</span><br><span class=\"token punctuation\">{</span>links<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">link</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><br>  <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span><br>    <span class=\"token operator\">&lt;</span>span key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>link<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token operator\">></span> Thi <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span><br>    <span class=\"token operator\">&lt;</span>Link key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>link<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>link<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span> <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">></span><br>  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span><br><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// but this</span><br><span class=\"token punctuation\">{</span>links<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">link</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><br>  <span class=\"token operator\">&lt;</span>span key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>link<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><br>    <span class=\"token operator\">&lt;</span>span<span class=\"token operator\">></span> Thi <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span><br>    <span class=\"token operator\">&lt;</span>Link<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>link<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span> <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">></span><br>  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span><br><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></code></pre>\n</div>\n<h2 id=\"components-from-gatsby\">Components from Gatsby <a class=\"direct-link\" href=\"#components-from-gatsby\">#</a></h2>\n<p>👉 <a href=\"https://www.gatsbyjs.org/docs/gatsby-link/\"><code>Link</code></a> (replaces <code>&lt;a&gt;</code> tag for <strong>internal links</strong>). For external links, use <code>&lt;a&gt;&lt;/a&gt;</code> as usual.</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Link <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby'</span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Text</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"> // only used for internal links</code></pre>\n<p>You cannot use <code>target='_blank'</code> with <code>&lt;Link&gt;</code> because whenever you use internal links, they are always in the same window!</p>\n<p>👉 Use <code>className</code> instead of <code>class=</code>. E.g. <code>className = &quot;abc&quot;</code> or <code>className = &quot;abc xyz&quot;</code>.</p>\n<p>👉 Inline CSS, <code>&lt;div style={{ color: &quot;#ffff&quot;, paddingTop: &quot;10px&quot; }}&gt;&lt;/div&gt;</code>.</p>\n<p>👉 Date in Gatsby: <code>{new Date().getFullYear()}</code> or using <a href=\"https://momentjs.com/docs/#/displaying/\"><code>moment.js</code></a>.</p>\n<h2 id=\"gatsby-structure\">Gatsby structure <a class=\"direct-link\" href=\"#gatsby-structure\">#</a></h2>\n<ul>\n<li><a href=\"https://www.gatsbyjs.org/docs/recipes/\">Recipes</a> -- a cookbook on how to build things, Gatsby style.</li>\n<li><a href=\"https://www.gatsbyjs.org/docs/gatsby-project-structure/\">Gatsby Project Structure</a> -- a tour of all the common folders and files.</li>\n<li><a href=\"https://www.gatsbyjs.org/docs/building-with-components/\">Building with Components</a>.</li>\n<li><a href=\"https://www.gatsbyjs.org/docs/layout-components/\">Layout Components</a></li>\n</ul>\n<h3 id=\"understand-props\">Understand <code>props</code> <a class=\"direct-link\" href=\"#understand-props\">#</a></h3>\n<p>When React sees an element representing a user-defined component, it passes JSX attributes to this component as a single object. We call this object &quot;props&quot; (properties).<sup><a href=\"https://reactjs.org/docs/components-and-props.html\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<h3 id=\"components\">Components <a class=\"direct-link\" href=\"#components\">#</a></h3>\n<p>A page is basically,</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><br><span class=\"token keyword\">function</span> <span class=\"token function\">AboutPage</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><br>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>about-container<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">About me.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><br>  <span class=\"token punctuation\">)</span><br><span class=\"token punctuation\">}</span><br><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> AboutPage</code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><br>    <span class=\"token comment\">// ...</span><br>  <span class=\"token punctuation\">)</span><br><span class=\"token punctuation\">}</span><br><br><span class=\"token comment\">// or</span><br><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">AboutPage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><br>  <span class=\"token comment\">// ...</span><br><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> AboutPage</code></pre>\n</div>\n<h2 id=\"apply-bootstrap\">Apply Bootstrap <a class=\"direct-link\" href=\"#apply-bootstrap\">#</a></h2>\n<h3 id=\"learn-from-starter-theme\">Learn from Starter theme <a class=\"direct-link\" href=\"#learn-from-starter-theme\">#</a></h3>\n<p>💡 You can install a <a href=\"https://github.com/jaxx2104/gatsby-starter-bootstrap\">Gatsby Bootstrap Starter</a>,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">gatsby new gatstrap https://github.com/jaxx2104/gatsby-starter-bootstrap</code></pre>\n<h3 id=\"using-plugins\">Using plugins <a class=\"direct-link\" href=\"#using-plugins\">#</a></h3>\n<p>❓ What if you wanna start from the beginning? 👉 Install <code>react-bootstrap</code> and <code>bootstrap</code>,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> react-bootstrap bootstrap --save<br><span class=\"token comment\"># --save to save to package.json</span></code></pre>\n<p>Import below line in <code>/gatsby-browser.js</code>,</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token string\">'bootstrap/dist/css/bootstrap.min.css'</span><span class=\"token punctuation\">;</span></code></pre>\n<h3 id=\"using-cdn-from-bootstrap\">Using CDN from Bootstrap <a class=\"direct-link\" href=\"#using-cdn-from-bootstrap\">#</a></h3>\n<p>❓ If you wanna use <a href=\"https://getbootstrap.com/docs/4.4/getting-started/introduction/#quick-start\">CDN</a>? 👉 Put below line in <code>&lt;head&gt;</code> by using <a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-react-helmet/\">React Helmet</a>,</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Helmet</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.../bootstrap.min.css<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">integrity</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">crossOrigin</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>anonymous<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"><br>  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.../jquery-3.4.1.slim.min.js<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">integrity</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">crossOrigin</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>anonymous<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.../popper.min.js<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">integrity</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">crossOrigin</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>anonymous<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.../bootstrap.min.js<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">integrity</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">crossOrigin</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>anonymous<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Helmet</span></span><span class=\"token punctuation\">></span></span></code></pre>\n<p>You can put above codes directly in your <code>layout.js</code> or <code>index.js</code>. All the <code>&lt;link&gt;</code> and <code>&lt;script&gt;</code> tags will be included in the <code>&lt;head&gt;</code>. For example in the file <code>src/pages/index.js</code>,</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// src/pages/index.js</span><br><span class=\"token keyword\">import</span> Layout <span class=\"token keyword\">from</span> <span class=\"token string\">\"../layouts/layout\"</span><br><span class=\"token keyword\">import</span> Helmet <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-helmet\"</span><br><br><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">IndexPage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Layout</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Helmet</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>      // the codes<br>    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Helmet</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hi people</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Welcome to your new Gatsby site.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>    // other codes...<br>  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Layout</span></span><span class=\"token punctuation\">></span></span><br><span class=\"token punctuation\">)</span><br><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> IndexPage</code></pre>\n<p>❓ If you wanna put <code>bootstrap.js</code> in the <code>footer</code>? 👉 You can read <a href=\"https://uxworks.online/how-to-add-a-script-in-head-or-body-tag-in-your-gatsby-website/\">this tutorial</a> to add <code>&lt;script&gt;</code> / <code>&lt;link&gt;</code> tags in <code>&lt;head&gt;</code>, start or end of <code>&lt;body&gt;</code> tag. For example, in order to put above scripts/links before <code>&lt;/body&gt;</code>, paste below code in <code>/gatsby-ssr.js</code>,</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// file /gatsby-ssr.js</span><br><span class=\"token keyword\">const</span> React <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"react\"</span><span class=\"token punctuation\">)</span><br>exports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onRenderBody</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span><br>  setHeadComponents<span class=\"token punctuation\">,</span><br>  setPostBodyComponents<span class=\"token punctuation\">,</span><br><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>  <span class=\"token function\">setHeadComponents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><br>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">key</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>bootstrap-css<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.../bootstrap.min.css<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">integrity</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">crossOrigin</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>anonymous<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">,</span><br>  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br>  <span class=\"token function\">setPostBodyComponents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><br>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">key</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>jquery-3-4-1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/javascript<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.../jquery-3.4.1.slim.min.js<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">integrity</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">crossOrigin</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>anonymous<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">,</span><br>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">key</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>proper-1-16<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/javascript<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.../popper.min.js<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">integrity</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">crossOrigin</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>anonymous<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">,</span><br>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">key</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>bootstrap-js<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/javascript<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.../bootstrap.min.js<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">integrity</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">crossOrigin</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>anonymous<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">,</span><br>  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br><span class=\"token punctuation\">}</span></code></pre>\n<p>Remember to restart gatsby (<kbd>Ctrl</kbd> + <kbd>C</kbd> to stop and run <code>gatsby develop</code> to start again).</p>\n<h2 id=\"using-sass\">Using <code>sass</code> <a class=\"direct-link\" href=\"#using-sass\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// in /scr/pages/index.js</span><br><span class=\"token keyword\">import</span> Layout <span class=\"token keyword\">from</span> <span class=\"token string\">\"../layouts/layout\"</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// in /scr/layouts/layout.js</span><br><span class=\"token keyword\">import</span> <span class=\"token string\">\"../styles/main.scss\"</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// in /scr/styles/main.scss</span><br>@<span class=\"token keyword\">import</span> <span class=\"token string\">\"layout\"</span><span class=\"token punctuation\">;</span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// in /scr/styles/_layout.scss</span><br><span class=\"token comment\">// scss codes</span></code></pre>\n</div>\n<h2 id=\"differences-between-layouts-and-templates\">Differences between <code>layouts</code> and <code>templates</code> <a class=\"direct-link\" href=\"#differences-between-layouts-and-templates\">#</a></h2>\n<p>There are 2 separated folders <code>/src/layouts</code> and <code>/src/templates</code>.</p>\n<p class=\"indent\"></p>\n<ul>\n<li><code>layouts</code>: components are for everything shared across pages e.g. headers, footers, sidebars, etc.</li>\n<li><code>templates</code>: components are for page types e.g. blog posts, documentation pages, etc.</li>\n</ul>\n<h3 id=\"design-base-layout\">Design <code>base</code> layout <a class=\"direct-link\" href=\"#design-base-layout\">#</a></h3>\n<p>What I need in the base layout:</p>\n<p class=\"indent\"></p>\n<ul>\n<li>A fixed navigation bar on top.</li>\n<li>A fixed footer on bottom.</li>\n<li>A flexible header.</li>\n<li>A body wraper.</li>\n</ul>\n<h3 id=\"design-post-%2F-page-templates\">Design <code>post</code> / <code>page</code> templates <a class=\"direct-link\" href=\"#design-post-%2F-page-templates\">#</a></h3>\n<p>Their differences are just the width of the container.</p>\n<h3 id=\"different-header-for-different-page-types\">Different Header for different page types <a class=\"direct-link\" href=\"#different-header-for-different-page-types\">#</a></h3>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// in src/components/Header.js</span><br><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><br><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Header</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span><br>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token keyword\">const</span> headerType <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>type<br>    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>headerType<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>      <span class=\"token keyword\">case</span> <span class=\"token string\">'index'</span><span class=\"token operator\">:</span><br>        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><br>          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>header</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>idx-header header<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>              ...<br>            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>header</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span><br>        <span class=\"token punctuation\">)</span><br>      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span><br>        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><br>          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>header</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>header<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>              ...<br>            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>header</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span><br>        <span class=\"token punctuation\">)</span><br>    <span class=\"token punctuation\">}</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<div class=\"col-2-equal\">\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// in src/layouts/base.js</span><br><span class=\"token keyword\">import</span> Header <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/Header\"</span><br><span class=\"token keyword\">const</span> Layout <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> children<span class=\"token punctuation\">,</span> headerType<span class=\"token operator\">=</span><span class=\"token string\">'page'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><br>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Header</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>index<span class=\"token punctuation\">'</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"><br>      </span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\"><br>    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span><br>  <span class=\"token punctuation\">)</span><br><span class=\"token punctuation\">}</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Layout</code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// in src/pages/index.js</span><br><span class=\"token keyword\">import</span> Layout <span class=\"token keyword\">from</span> <span class=\"token string\">\"../layouts/base\"</span><br><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">IndexPage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Layout</span></span> <span class=\"token attr-name\">headerType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>index<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>    ...<br>  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Layout</span></span><span class=\"token punctuation\">></span></span><br><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> IndexPage</code></pre>\n</div>\n<h2 id=\"add-navigation-bar\">Add <code>Navigation</code> bar <a class=\"direct-link\" href=\"#add-navigation-bar\">#</a></h2>\n<p>Using <a href=\"https://react-bootstrap.netlify.com/\"><code>react-bootstrap</code></a>, create a file <code>src/components/Navigation.js</code> whose content is,</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><br><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>Navbar<span class=\"token punctuation\">,</span> Nav<span class=\"token punctuation\">,</span> NavDropdown<span class=\"token punctuation\">,</span> Form<span class=\"token punctuation\">,</span> FormControl<span class=\"token punctuation\">,</span> Button<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-bootstrap'</span><br><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><br>  <span class=\"token comment\">// the codes from https://react-bootstrap.netlify.com/components/navbar/#navbars</span><br><span class=\"token punctuation\">)</span></code></pre>\n<p>Then, in <code>/src/Header.js</code>,</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> Navigation <span class=\"token keyword\">from</span> <span class=\"token string\">'../components/Navigation'</span><br><br><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Header</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>header</span> <span class=\"token attr-name\">..</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Navigation</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Navigation</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"><br>    // other codes<br>  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>header</span><span class=\"token punctuation\">></span></span><br><span class=\"token punctuation\">)</span></code></pre>\n<p>If you get stuck, check <a href=\"https://www.youtube.com/watch?v=fLCiSSu6-sI\">this video</a>.</p>\n<h2 id=\"using-font-awesome\">Using <a href=\"https://fontawesome.com/\">Font Awesome</a> <a class=\"direct-link\" href=\"#using-font-awesome\">#</a></h2>\n<p>Install (the free things) (if you have a pro license, <a href=\"https://scotch.io/tutorials/using-font-awesome-5-with-react\">read this</a>) or <a href=\"https://brockduncan.com/using-fontawesome-with-gatsby-and-react/\">this</a>,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> i --save @fortawesome/fontawesome-svg-core @fortawesome/react-fontawesome @fortawesome/free-regular-svg-icons @fortawesome/free-solid-svg-icons @fortawesome/free-brands-svg-icons</code></pre>\n<p>To <em>import everything in one place</em> instead of importing each icon into each separate file, we'll create a Font Awesome library. Creat <code>src/components/fontawesome.js</code></p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// import the library</span><br><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> library <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@fortawesome/fontawesome-svg-core'</span><span class=\"token punctuation\">;</span><br><br><span class=\"token comment\">// import your icons</span><br><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> faHome<span class=\"token punctuation\">,</span> faFire<span class=\"token punctuation\">,</span> faEdit<span class=\"token punctuation\">,</span>  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@fortawesome/free-solid-svg-icons'</span><span class=\"token punctuation\">;</span><br><br>library<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><br>  faHome<span class=\"token punctuation\">,</span> faFire<span class=\"token punctuation\">,</span> faEdit<span class=\"token punctuation\">,</span><br><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Note that, an icon <code>fas fa-money-bill</code> will have name <code>faMoneyBill</code> from <code>free-solid-svg-icons</code>. In the case you wanna import an entire package,</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> library <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@fortawesome/fontawesome-svg-core'</span><span class=\"token punctuation\">;</span><br><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> fab <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@fortawesome/free-brands-svg-icons'</span><span class=\"token punctuation\">;</span><br><br>library<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>fab<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>In <code>src/pages/index.js</code> (for example),</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token string\">'../components/fontawesome'</span><br><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> FontAwesomeIcon <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@fortawesome/react-fontawesome'</span><br><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">FontAwesomeIcon</span></span> <span class=\"token attr-name\">icon</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'home'</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span> <span class=\"token comment\">// for 'faHome' or 'fas fa-home'</span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">FontAwesomeIcon</span></span> <span class=\"token attr-name\">icon</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token string\">'fab'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'github'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span> <span class=\"token comment\">// for 'faGithub' or `fab fa-github`</span></code></pre>\n<p>💡 Yes! <code>fortawesome</code> is correct!!!</p>\n<p>💡 If you have a problem in that the icon is firstly flashing big and then smaller, you need to set the <a href=\"https://fontawesome.com/how-to-use/with-the-api/setup/configuration\">configuration</a> <code>autoAddCss</code> to <code>false</code>,<sup><a href=\"https://medium.com/@fabianterh/fixing-flashing-huge-font-awesome-icons-on-a-gatsby-static-site-787e1cfb3a18\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> config  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@fortawesome/fontawesome-svg-core'</span><br><span class=\"token keyword\">import</span> <span class=\"token string\">\"@fortawesome/fontawesome-svg-core/styles.css\"</span><br>config<span class=\"token punctuation\">.</span>autoAddCss <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span></code></pre>\n<h2 id=\"google-fonts\">Google Fonts <a class=\"direct-link\" href=\"#google-fonts\">#</a></h2>\n<p>Using <code>typeface.js</code> (search font in <a href=\"https://www.npmjs.com/package/typeface-open-sans\">npmjs</a>),</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install</span><br><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save typeface-open-sans</code></pre>\n<pre class=\"language-js\"><code class=\"language-js\"># <span class=\"token keyword\">in</span> gatsby<span class=\"token operator\">-</span>browser<span class=\"token punctuation\">.</span>js<br><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'typeface-open-sans'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n</div>\n<p>Rebuild to see the result!</p>\n<p>Below is the old method (it didn't work well, it doesn't contain font-weight 600 for Open Sans without reason).</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save gatsby-plugin-prefetch-google-fonts</code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// in /gatsby-config.js</span><br>module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><br> plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><br>    <span class=\"token punctuation\">{</span><br>      resolve<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-plugin-prefetch-google-fonts</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span><br>      options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>        fonts<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><br>          <span class=\"token punctuation\">{</span><br>            family<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Roboto Mono</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span><br>            variants<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">400</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">700</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">]</span><br>          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>          <span class=\"token punctuation\">{</span><br>            family<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Roboto</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span><br>            subsets<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">latin</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">]</span><br>          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><br>      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>    <span class=\"token punctuation\">}</span><br>  <span class=\"token punctuation\">]</span><br><span class=\"token punctuation\">}</span></code></pre>\n<h2 id=\"insert-images-%2F-photos\">Insert images / photos <a class=\"direct-link\" href=\"#insert-images-%2F-photos\">#</a></h2>\n<p>👉 Note: <a href=\"/gatsby-images\">Gatsby images</a>.</p>\n<h2 id=\"adding-markdown-posts\">Adding markdown posts <a class=\"direct-link\" href=\"#adding-markdown-posts\">#</a></h2>\n<p>Posts (<code>.md</code> files) are stored in <code>/content/posts/</code>. Install <code>gatsby-transformer-remark</code>,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save gatsby-transformer-remark</code></pre>\n<p>And add the following to <code>gatsby-config.js</code>,</p>\n<pre class=\"language-js\"><code class=\"language-js\">plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><br>  <span class=\"token punctuation\">{</span><br>    resolve<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-source-filesystem</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span><br>    options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>      name<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">posts</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span><br>      path<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/content/posts</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span><br>    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>  <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-transformer-remark</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span><br>  <span class=\"token comment\">// there may be already others like this</span><br>  <span class=\"token punctuation\">{</span><br>    resolve<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-source-filesystem</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span><br>    options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>      name<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">images</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span><br>      path<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/src/images</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span><br>    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br><span class=\"token punctuation\">]</span></code></pre>\n<p>Create a file called <code>post-1.md</code> in <code>content/posts/</code>,</p>\n<pre><code>---\npath: &quot;/first-post&quot;\ndate: &quot;2019-05-04&quot;\ntitle: &quot;My first blog post&quot;\n---\n</code></pre>\n<p>...read <a href=\"https://www.gatsbyjs.org/docs/adding-markdown-pages/\">this</a> and <a href=\"https://github.com/gatsbyjs/gatsby/tree/master/examples/recipe-sourcing-markdown\">this example</a> for more...</p>\n<h2 id=\"display-site-%2F-post-info-on-browser-tab\">Display site / post info on browser tab <a class=\"direct-link\" href=\"#display-site-%2F-post-info-on-browser-tab\">#</a></h2>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> Layout <span class=\"token keyword\">from</span> <span class=\"token string\">\"../layouts/base\"</span><br><span class=\"token keyword\">import</span> Helmet <span class=\"token keyword\">from</span> <span class=\"token string\">'react-helmet'</span><br><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">IndexPage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><br>  <span class=\"token operator\">&lt;</span>Layout<span class=\"token operator\">></span><br>    <span class=\"token operator\">&lt;</span>Helmet title<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Thi | I failed my way to success</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><br>  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Layout<span class=\"token operator\">></span><br><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"render-html-tag-in-a-string\">Render html tag in a string <a class=\"direct-link\" href=\"#render-html-tag-in-a-string\">#</a></h2>\n<p>Instead of <code>&lt;p dangerouslySetInnerHTML={{ headerIntro }} /&gt;</code>, you can use <code>&lt;p dangerouslySetInnerHTML={{__html: headerIntro }} /&gt;</code>. If there is a html tag in <code>headerIntro</code>, e.g. <code>&quot;&lt;i&gt;Hello&lt;/i&gt;&quot;</code> will be rendered as <em>Hello</em>.</p>\n<h2 id=\"jsx-in-markdown\">JSX in Markdown <a class=\"direct-link\" href=\"#jsx-in-markdown\">#</a></h2>\n<ul>\n<li>Download and use <a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-mdx/\">MDX</a> plugin.</li>\n<li>We have to put all <code>mdx</code> files in <code>/src/pages</code>. The mdx files will be renders automatically! That's why we need to indicate <code>defaultLayouts</code> in <code>/gatsby-config.js</code><sup><a href=\"https://alligator.io/gatsbyjs/mdx-in-gatsby/\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup>. I have tried to render mdx in <code>/content/pages/</code> but it didn't work!</li>\n<li>For an example of using graphql in mdx file, check <code>/src/pages/about.mdx</code>.</li>\n<li>For a specific page, one can use <code>props.pageContext.frontmatter.title</code> to take the <code>title</code> of that page.</li>\n<li>For writing pages, read <a href=\"https://www.gatsbyjs.org/docs/mdx/writing-pages/\">this</a>.</li>\n</ul>\n<h2 id=\"create-page-template-and-markdown-file\">Create page template and markdown file <a class=\"direct-link\" href=\"#create-page-template-and-markdown-file\">#</a></h2>\n<p>Suppose that you wanna create a page <code>/about</code> taking content from file <code>/content/pages/about.md</code> and it applies template <code>/src/templates/page.js</code>. All you need to do is following <a href=\"https://www.gatsbyjs.org/docs/adding-markdown-pages/\">this post</a>.</p>\n<ol>\n<li>First, add to <code>/gatsby-config</code>.</li>\n<li>Create <code>/src/templates/page.js</code>,</li>\n<li>Create markdown file <code>/content/pages/about.md</code>.</li>\n<li>Modify <code>/gatsby-node.js</code> to tell gatsby to create a page <code>/about</code> from <code>about.md</code> using template <code>page.js</code>.</li>\n</ol>\n<h2 id=\"references\">References <a class=\"direct-link\" href=\"#references\">#</a></h2>\n<ul>\n<li><a href=\"https://www.gatsbyjs.org/docs/\">Official documentation</a>.\n<ul>\n<li><a href=\"https://github.com/gatsbyjs/gatsby/tree/master/examples\">Examples</a>.</li>\n<li><strong>Gatsby Docs</strong> -- <a href=\"https://www.gatsbyjs.org/tutorial/\">Tutorials (step-by-step)</a>.</li>\n</ul>\n</li>\n<li><a href=\"https://react-bootstrap.netlify.com/\">React Bootstrap</a> -- get the components.</li>\n<li><a href=\"https://reactjs.org/docs/hello-world.html\">React Main Concepts</a> -- understand some main concepts in React.</li>\n<li><a href=\"https://reactjs.org/docs/jsx-in-depth.html#user-defined-components-must-be-capitalized\">JSX in depth</a> -- understand the syntax of JSX.</li>\n<li><strong>w3schools</strong> -- <a href=\"https://www.w3schools.com/react/default.asp\">React Tutorial</a>.</li>\n<li><a href=\"https://www.howtographql.com/\">The Fullstack Tutorial for GraphQL</a></li>\n</ul>\n",
      "date_published": "2019-12-15T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/regular-expression/",
      "url": "https://dinhanhthi.com/regular-expression/",
      "title": "Regular Expression in Python",
      "content_html": "<p>We can select string with some patterns.</p>\n<h2 id=\"import-library\">Import library <a class=\"direct-link\" href=\"#import-library\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> re</code></pre>\n<h2 id=\"special-characters\">Special characters <a class=\"direct-link\" href=\"#special-characters\">#</a></h2>\n<ul>\n<li><code>.</code> matches any character except a newline</li>\n<li><code>^a</code> all strings starting with <code>'a'</code></li>\n<li><code>a$</code> all strings ending with <code>'a'</code></li>\n<li><code>ab+</code> matches <code>'ab'</code>, <code>'abb'</code> but not <code>'a'</code>, <code>'ac'</code>.</li>\n<li><code>[bcr]at</code> any characters within <code>[]</code> can be filled the space</li>\n<li>Using <code>\\</code> to escape special characters\n<ul>\n<li><code>\\s</code> : whitespace characters. <code>\\S</code>: any except whitespace.</li>\n<li><code>\\b</code> : empty strings (only at the beginning or end of a word). <code>\\B</code>:</li>\n</ul>\n</li>\n<li><code>cat|dog</code> would match <code>'catfish'</code> and <code>'hotdog'</code> for <strong>begin</strong> and <strong>end</strong> characters</li>\n<li><code>[amk]</code> will match <code>'a'</code>, <code>'m'</code>, or `'k``</li>\n<li><code>[0-9]</code> will match any character that falls between <code>0</code> and <code>9</code></li>\n<li><code>[a-z]</code> : lowercase</li>\n<li><code>[0-9]{4}</code>: <strong>repeat</strong> the pattern <code>[0-9]</code> four times by writing</li>\n<li><code>a{m,n}</code> matches from <code>m</code> to <code>n</code> repetitions of <code>'a'</code>.\n<ul>\n<li><code>a{m,}</code> matches from <code>m</code> to infinity repetitions of <code>'a'</code>.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"references\">References <a class=\"direct-link\" href=\"#references\">#</a></h2>\n<ul>\n<li><strong>Python docs</strong> -- <a href=\"https://docs.python.org/3/library/re.html\">Regular Expression</a>.</li>\n</ul>\n",
      "date_published": "2019-12-14T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/titanic-disaster/",
      "url": "https://dinhanhthi.com/titanic-disaster/",
      "title": "Titanic Disaster on Kaggle",
      "content_html": "<h2 id=\"introduction\">Introduction <a class=\"direct-link\" href=\"#introduction\">#</a></h2>\n<p>In <a href=\"https://www.kaggle.com/c/titanic\">this challenge</a>, we are going to answer the question: &quot;<em>What sorts of people were more likely to survive?</em>&quot; using passenger data. Datasets to be used: <code>train.csv</code> (for training and predicting), <code>test.csv</code> (for submitting).</p>\n<p class=\"text-center\"><a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/data-science-learning/blob/master/projects/kaggle-titanic-disaster/titanic_kaggle.html\">html file</a> -- <a href=\"https://dinhanhthi.github.io/tools/github-colab?https://github.com/dinhanhthi/data-science-learning/blob/master/projects/kaggle-titanic-disaster/titanic_kaggle.ipynb\">open in colab</a></p>\n<p><img src=\"/img/post/project/titanic/df.jpg\" alt=\"First 10 rows of dataset\" class=\"img-full-100 pop\"><br>\n<em>First 10 rows of the dataset.</em></p>\n<table>\n<thead>\n<tr>\n<th>Variable</th>\n<th>Definition</th>\n<th>Key</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>survival</td>\n<td>Survival</td>\n<td>0 = No, 1 = Yes</td>\n</tr>\n<tr>\n<td>pclass</td>\n<td>Ticket class</td>\n<td>1 = 1st, 2 = 2nd, 3 = 3rd</td>\n</tr>\n<tr>\n<td>sex</td>\n<td>Sex</td>\n<td></td>\n</tr>\n<tr>\n<td>Age</td>\n<td>Age in years</td>\n<td></td>\n</tr>\n<tr>\n<td>sibsp</td>\n<td># of siblings / spouses aboard the Titanic</td>\n<td></td>\n</tr>\n<tr>\n<td>parch</td>\n<td># of parents / children aboard the Titanic</td>\n<td></td>\n</tr>\n<tr>\n<td>ticket</td>\n<td>Ticket number</td>\n<td></td>\n</tr>\n<tr>\n<td>fare</td>\n<td>Passenger fare</td>\n<td></td>\n</tr>\n<tr>\n<td>cabin</td>\n<td>Cabin number</td>\n<td></td>\n</tr>\n<tr>\n<td>embarked</td>\n<td>Port of Embarkation</td>\n<td>C = Cherbourg, Q = Queenstown, S = Southampton</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"tl%3Bdr%3B\">TL;DR; <a class=\"direct-link\" href=\"#tl%3Bdr%3B\">#</a></h2>\n<ul>\n<li>Take an overview about dataset.\n<ul>\n<li><code>.describe</code> for numerical / categorical features.</li>\n<li>Find percentage of missing data on each feature.</li>\n<li>Survival based on some categorical features.</li>\n<li>Visualize survival based on <code>Age</code>.</li>\n<li>Check if the result depends on the titles indicated in the <code>Name</code>?</li>\n</ul>\n</li>\n<li><strong>Preprocessing data</strong>:\n<ul>\n<li>Drop unnecessary features (columns) (<code>Name</code>, <code>Ticket</code>, <code>Cabin</code>) using <code>df.drop()</code>.</li>\n<li>Convert categorical variables to dummy ones using <code>pd.get_dummies()</code>.</li>\n<li>Impute missing continuous values using <code>sklearn.impute.SimpleImputer</code>.</li>\n<li>Take an idea to change <code>Age</code> to a categorical feature and then also convert to dummy.</li>\n</ul>\n</li>\n<li>Using <code>GridSearchCV</code> to find the optimal hyper parameters and apply some algorithms, e.g. <mark>Random Forest</mark>.</li>\n<li>Export the result to an output file.</li>\n</ul>\n<h2 id=\"preliminaries\">Preliminaries <a class=\"direct-link\" href=\"#preliminaries\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np<br><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt <span class=\"token comment\"># plot</span><br><span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd <span class=\"token comment\"># working with dataset</span><br><br><span class=\"token keyword\">from</span> sklearn <span class=\"token keyword\">import</span> preprocessing<br><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>impute <span class=\"token keyword\">import</span> SimpleImputer <span class=\"token comment\"># impute missing data</span><br><br><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>model_selection <span class=\"token keyword\">import</span> GridSearchCV<span class=\"token punctuation\">,</span> cross_val_score</code></pre>\n<h2 id=\"overview-datasets\">Overview datasets <a class=\"direct-link\" href=\"#overview-datasets\">#</a></h2>\n<p>Read data</p>\n<pre class=\"language-python\"><code class=\"language-python\">train <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>read_csv<span class=\"token punctuation\">(</span><span class=\"token string\">\"train.csv\"</span><span class=\"token punctuation\">)</span><br>test <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>read_csv<span class=\"token punctuation\">(</span><span class=\"token string\">\"test.csv\"</span><span class=\"token punctuation\">)</span></code></pre>\n<p>Take a look</p>\n<pre class=\"language-python\"><code class=\"language-python\">train<span class=\"token punctuation\">.</span>head<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><br>train<span class=\"token punctuation\">.</span>info<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>train<span class=\"token punctuation\">.</span>info<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>train<span class=\"token punctuation\">.</span>describe<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># for numerical features</span><br>train<span class=\"token punctuation\">.</span>describe<span class=\"token punctuation\">(</span>include<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'O'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># for categorical features</span></code></pre>\n<p>Find the percentage of missing data on each feature,</p>\n<pre class=\"language-python\"><code class=\"language-python\">total <span class=\"token operator\">=</span> train<span class=\"token punctuation\">.</span>isnull<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>sort_values<span class=\"token punctuation\">(</span>ascending<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><br>percent <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">round</span><span class=\"token punctuation\">(</span>train<span class=\"token punctuation\">.</span>isnull<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">/</span>train<span class=\"token punctuation\">.</span>isnull<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">*</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>sort_values<span class=\"token punctuation\">(</span>ascending<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><br>pd<span class=\"token punctuation\">.</span>concat<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>total<span class=\"token punctuation\">,</span> percent<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> keys<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'Total'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'% of missing'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n<p>Survival based on some categorical features,</p>\n<pre class=\"language-python\"><code class=\"language-python\">train<span class=\"token punctuation\">.</span>pivot_table<span class=\"token punctuation\">(</span>index<span class=\"token operator\">=</span><span class=\"token string\">\"Sex\"</span><span class=\"token punctuation\">,</span> values<span class=\"token operator\">=</span><span class=\"token string\">\"Survived\"</span><span class=\"token punctuation\">)</span><br>train<span class=\"token punctuation\">.</span>pivot_table<span class=\"token punctuation\">(</span>index<span class=\"token operator\">=</span><span class=\"token string\">\"Pclass\"</span><span class=\"token punctuation\">,</span> values<span class=\"token operator\">=</span><span class=\"token string\">\"Survived\"</span><span class=\"token punctuation\">)</span><br>train<span class=\"token punctuation\">.</span>pivot_table<span class=\"token punctuation\">(</span>index<span class=\"token operator\">=</span><span class=\"token string\">\"SibSp\"</span><span class=\"token punctuation\">,</span> values<span class=\"token operator\">=</span><span class=\"token string\">\"Survived\"</span><span class=\"token punctuation\">)</span><br>train<span class=\"token punctuation\">.</span>pivot_table<span class=\"token punctuation\">(</span>index<span class=\"token operator\">=</span><span class=\"token string\">\"Parch\"</span><span class=\"token punctuation\">,</span> values<span class=\"token operator\">=</span><span class=\"token string\">\"Survived\"</span><span class=\"token punctuation\">)</span></code></pre>\n<p>Visualize survival based on <code>Age</code> (numerical),</p>\n<pre class=\"language-python\"><code class=\"language-python\">train<span class=\"token punctuation\">[</span>train<span class=\"token punctuation\">[</span><span class=\"token string\">\"Survived\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'Age'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">.</span>hist<span class=\"token punctuation\">(</span>alpha<span class=\"token operator\">=</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span><span class=\"token string\">'blue'</span><span class=\"token punctuation\">,</span> bins<span class=\"token operator\">=</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># survived</span><br>train<span class=\"token punctuation\">[</span>train<span class=\"token punctuation\">[</span><span class=\"token string\">\"Survived\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'Age'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">.</span>hist<span class=\"token punctuation\">(</span>alpha<span class=\"token operator\">=</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span><span class=\"token string\">'blue'</span><span class=\"token punctuation\">,</span> bins<span class=\"token operator\">=</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># died</span></code></pre>\n<p>List of titles (Mr., Mrs., Dr.,...) from <code>Name</code>,</p>\n<pre class=\"language-python\"><code class=\"language-python\">train<span class=\"token punctuation\">.</span>Name<span class=\"token punctuation\">.</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">.</span>extract<span class=\"token punctuation\">(</span><span class=\"token string\">' ([A-Za-z]+)\\.'</span><span class=\"token punctuation\">,</span> expand<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"preprocessing-data\">Preprocessing data <a class=\"direct-link\" href=\"#preprocessing-data\">#</a></h2>\n<p>In this task, you have to do the same techniques for both <code>train</code> and <code>test</code> sets!</p>\n<h3 id=\"drop-unnecessary-features\">Drop unnecessary features <a class=\"direct-link\" href=\"#drop-unnecessary-features\">#</a></h3>\n<p>Drop some unnecessary features (columns),</p>\n<pre class=\"language-python\"><code class=\"language-python\">train<span class=\"token punctuation\">.</span>drop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'Name'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Ticket'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Cabin'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> inplace<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><br>test<span class=\"token punctuation\">.</span>drop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'Name'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Ticket'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Cabin'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> inplace<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"convert-to-dummy\">Convert to dummy <a class=\"direct-link\" href=\"#convert-to-dummy\">#</a></h3>\n<p>Convert categorical features to dummy variables,</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">create_dummies</span><span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">,</span> column_name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>  <span class=\"token comment\"># Convert the column_name training feature into dummies using one-hot</span><br>  <span class=\"token comment\">#   and leave one first category to prevent perfect collinearity</span><br>  dummies <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>get_dummies<span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">[</span>column_name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> prefix<span class=\"token operator\">=</span>column_name<span class=\"token punctuation\">,</span> drop_first<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><br>  df <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>concat<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>df<span class=\"token punctuation\">,</span> dummies<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><br>  <span class=\"token keyword\">return</span> df</code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Sex</span><br>train <span class=\"token operator\">=</span> create_dummies<span class=\"token punctuation\">(</span>train<span class=\"token punctuation\">,</span> <span class=\"token string\">'Sex'</span><span class=\"token punctuation\">)</span><br>test <span class=\"token operator\">=</span> create_dummies<span class=\"token punctuation\">(</span>test<span class=\"token punctuation\">,</span> <span class=\"token string\">'Sex'</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Embarked</span><br>train <span class=\"token operator\">=</span> create_dummies<span class=\"token punctuation\">(</span>train<span class=\"token punctuation\">,</span> <span class=\"token string\">'Embarked'</span><span class=\"token punctuation\">)</span><br>test <span class=\"token operator\">=</span> create_dummies<span class=\"token punctuation\">(</span>test<span class=\"token punctuation\">,</span> <span class=\"token string\">'Embarked'</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Social Class</span><br>train <span class=\"token operator\">=</span> create_dummies<span class=\"token punctuation\">(</span>train<span class=\"token punctuation\">,</span> <span class=\"token string\">'Pclass'</span><span class=\"token punctuation\">)</span><br>test <span class=\"token operator\">=</span> create_dummies<span class=\"token punctuation\">(</span>test<span class=\"token punctuation\">,</span> <span class=\"token string\">'Pclass'</span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"impute-missing-values\">Impute Missing Values <a class=\"direct-link\" href=\"#impute-missing-values\">#</a></h3>\n<p>For continuous variables, we wanna fill missing data with the mean value.</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">impute_data</span><span class=\"token punctuation\">(</span>df_train<span class=\"token punctuation\">,</span> df_test<span class=\"token punctuation\">,</span> column_name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>  imputer <span class=\"token operator\">=</span> SimpleImputer<span class=\"token punctuation\">(</span>missing_values<span class=\"token operator\">=</span>np<span class=\"token punctuation\">.</span>nan<span class=\"token punctuation\">,</span> strategy<span class=\"token operator\">=</span><span class=\"token string\">'mean'</span><span class=\"token punctuation\">,</span> verbose<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><br>  <span class=\"token comment\"># Fit the imputer object on the training data</span><br>  imputer<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>df_train<span class=\"token punctuation\">[</span>column_name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># transform single column to 1</span><br>  <span class=\"token comment\"># Apply the imputer object to the df_train and df_test</span><br>  df_train<span class=\"token punctuation\">[</span>column_name<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> imputer<span class=\"token punctuation\">.</span>transform<span class=\"token punctuation\">(</span>df_train<span class=\"token punctuation\">[</span>column_name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>  df_test<span class=\"token punctuation\">[</span>column_name<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> imputer<span class=\"token punctuation\">.</span>transform<span class=\"token punctuation\">(</span>df_test<span class=\"token punctuation\">[</span>column_name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>  <span class=\"token keyword\">return</span> df_train<span class=\"token punctuation\">,</span> df_test</code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Age</span><br>train<span class=\"token punctuation\">,</span> test <span class=\"token operator\">=</span> impute_data<span class=\"token punctuation\">(</span>train<span class=\"token punctuation\">,</span> test<span class=\"token punctuation\">,</span> <span class=\"token string\">'Age'</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\"># Fare</span><br>train<span class=\"token punctuation\">,</span> test <span class=\"token operator\">=</span> impute_data<span class=\"token punctuation\">(</span>train<span class=\"token punctuation\">,</span> test<span class=\"token punctuation\">,</span> <span class=\"token string\">'Fare'</span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"continuous-to-categorical\">Continuous to categorical <a class=\"direct-link\" href=\"#continuous-to-categorical\">#</a></h3>\n<p>In the case, for example, you wanna convert <code>Age</code> feature which is initially a numerical feature to a categorical feature (many ranges of ages, for example).</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">process_age</span><span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">,</span> cut_points<span class=\"token punctuation\">,</span> label_names<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    df<span class=\"token punctuation\">[</span><span class=\"token string\">\"Age\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> df<span class=\"token punctuation\">[</span><span class=\"token string\">\"Age\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>fillna<span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span><br>    df<span class=\"token punctuation\">[</span><span class=\"token string\">\"Age_categories\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>cut<span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">[</span><span class=\"token string\">\"Age\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> cut_points<span class=\"token punctuation\">,</span> labels<span class=\"token operator\">=</span>label_names<span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">return</span> df<br><br>cut_points <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">12</span><span class=\"token punctuation\">,</span> <span class=\"token number\">18</span><span class=\"token punctuation\">,</span> <span class=\"token number\">35</span><span class=\"token punctuation\">,</span> <span class=\"token number\">60</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">]</span><br>label_names <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"Missing\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Infant'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Child\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Teenager'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Young_Adult\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Adult'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Senior'</span><span class=\"token punctuation\">]</span><br><br>train <span class=\"token operator\">=</span> process_age<span class=\"token punctuation\">(</span>main<span class=\"token punctuation\">,</span> cut_points<span class=\"token punctuation\">,</span> label_names<span class=\"token punctuation\">)</span><br>test <span class=\"token operator\">=</span> process_age<span class=\"token punctuation\">(</span>test<span class=\"token punctuation\">,</span> cut_points<span class=\"token punctuation\">,</span> label_names<span class=\"token punctuation\">)</span></code></pre>\n<p>Convert to a dummy variable,</p>\n<pre class=\"language-python\"><code class=\"language-python\">main <span class=\"token operator\">=</span> create_dummies<span class=\"token punctuation\">(</span>main<span class=\"token punctuation\">,</span> <span class=\"token string\">'Age_categories'</span><span class=\"token punctuation\">)</span><br>test <span class=\"token operator\">=</span> create_dummies<span class=\"token punctuation\">(</span>test<span class=\"token punctuation\">,</span> <span class=\"token string\">'Age_categories'</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"training-with-random-forest\">Training with Random Forest <a class=\"direct-link\" href=\"#training-with-random-forest\">#</a></h2>\n<p>We will use <a href=\"/grid-search\">Grid Search</a> to test with different parameters and then choose the best ones.</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Create a dictionary containing all the candidate values of the parameters</span><br>parameter_grid <span class=\"token operator\">=</span> <span class=\"token builtin\">dict</span><span class=\"token punctuation\">(</span>n_estimators<span class=\"token operator\">=</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5001</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>                      criterion<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'gini'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'entropy'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><br>                      max_features<span class=\"token operator\">=</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>features<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>                      max_depth<span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">25</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># Creata a random forest object</span><br>random_forest <span class=\"token operator\">=</span> RandomForestClassifier<span class=\"token punctuation\">(</span>random_state<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> n_jobs<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># Create a gridsearch object with 5-fold cross validation, and uses all cores (n_jobs=-1)</span><br>clf <span class=\"token operator\">=</span> GridSearchCV<span class=\"token punctuation\">(</span>estimator<span class=\"token operator\">=</span>random_forest<span class=\"token punctuation\">,</span> param_grid<span class=\"token operator\">=</span>parameter_grid<span class=\"token punctuation\">,</span> cv<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> verbose<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> n_jobs<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code></pre>\n<p>Split into <code>X_train</code>, <code>y_train</code>:</p>\n<pre class=\"language-python\"><code class=\"language-python\">X_train <span class=\"token operator\">=</span> train<span class=\"token punctuation\">[</span>train<span class=\"token punctuation\">.</span>columns<span class=\"token punctuation\">.</span>difference<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'Survived'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><br>y_train <span class=\"token operator\">=</span> train<span class=\"token punctuation\">[</span><span class=\"token string\">'Survived'</span><span class=\"token punctuation\">]</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Nest the gridsearchCV in a 3-fold CV for model evaluation</span><br>cv_scores <span class=\"token operator\">=</span> cross_val_score<span class=\"token punctuation\">(</span>clf<span class=\"token punctuation\">,</span> X_train<span class=\"token punctuation\">,</span> y_train<span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># Print results</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Accuracy scores:'</span><span class=\"token punctuation\">,</span> cv_scores<span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Mean of score:'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">(</span>cv_scores<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Variance of scores:'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>var<span class=\"token punctuation\">(</span>cv_scores<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<p>Retrain The Random Forest With The Optimum Parameters</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Retrain the model on the whole dataset</span><br>clf<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>X_train<span class=\"token punctuation\">,</span> y_train<span class=\"token punctuation\">)</span><br><span class=\"token comment\"># Predict who survived in the test dataset</span><br>predictions <span class=\"token operator\">=</span> clf<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span>test<span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"create-an-output-file\">Create an output file <a class=\"direct-link\" href=\"#create-an-output-file\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\">final_ids <span class=\"token operator\">=</span> test<span class=\"token punctuation\">[</span><span class=\"token string\">\"PassengerId\"</span><span class=\"token punctuation\">]</span><br>submission_df <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"PassengerId\"</span><span class=\"token punctuation\">:</span> final_ids<span class=\"token punctuation\">,</span><br>                 <span class=\"token string\">\"Survived\"</span><span class=\"token punctuation\">:</span> predictions<span class=\"token punctuation\">}</span><br>submission <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span>submission_df<span class=\"token punctuation\">)</span><br><br>submission<span class=\"token punctuation\">.</span>to_csv<span class=\"token punctuation\">(</span><span class=\"token string\">'titanic_submission.csv'</span><span class=\"token punctuation\">,</span> index<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span></code></pre>\n<p>Another way, check the <a href=\"https://chrisalbon.com/machine_learning/trees_and_forests/titanic_competition_with_random_forest/#create-the-kaggle-submission\">last section of this post</a>.</p>\n<h2 id=\"other-approaches\">Other approaches <a class=\"direct-link\" href=\"#other-approaches\">#</a></h2>\n<ul>\n<li>Based on the number of family/sibling members: combination of <code>SibSp</code> and <code>Parch</code>.</li>\n<li>Go alone?</li>\n<li>Consider the title from <code>Name</code>.</li>\n<li>Use <a href=\"/decision-tree-classifier\">Decision Tree</a> with K-fold.</li>\n</ul>\n<h2 id=\"references\">References <a class=\"direct-link\" href=\"#references\">#</a></h2>\n<ul>\n<li><strong>Chris Albon</strong> -- <a href=\"https://chrisalbon.com/machine_learning/trees_and_forests/titanic_competition_with_random_forest/\">Titanic Competition With Random Forest</a>.</li>\n<li><strong>Manav Sehgal</strong> -- <a href=\"https://www.kaggle.com/startupsci/titanic-data-science-solutions\">Titanic Data Science Solutions</a>.</li>\n<li><strong>Dataquest</strong> -- <a href=\"https://app.dataquest.io/course/kaggle-fundamentals\">Kaggle fundamental</a> -- <a href=\"https://github.com/dinhanhthi/dataquest-aio/tree/master/step-7-machine-learning-intermediate/course-3-kaggle-fundamentals\">on my Github</a>.</li>\n<li><strong>Abhinav Sagar</strong> -- <a href=\"https://towardsdatascience.com/how-i-scored-in-the-top-1-of-kaggles-titanic-machine-learning-challenge-7716386ba298\">How I scored in the top 1% of Kaggle’s Titanic Machine Learning Challenge</a>.</li>\n</ul>\n",
      "date_published": "2019-12-07T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/dataframe-overview/",
      "url": "https://dinhanhthi.com/dataframe-overview/",
      "title": "Data Overview",
      "content_html": "<p>In this note, I use <code>df</code> as <code>DataFrame</code>, <code>s</code> as <code>Series</code>.</p>\n<h2 id=\"libraries\">Libraries <a class=\"direct-link\" href=\"#libraries\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd <span class=\"token comment\"># import pandas package</span><br><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</code></pre>\n<h2 id=\"import-and-have-a-look\">Import and have a look <a class=\"direct-link\" href=\"#import-and-have-a-look\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\">df <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>read_csv<span class=\"token punctuation\">(</span><span class=\"token string\">'filename.csv'</span><span class=\"token punctuation\">,</span> na_values<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'none'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># \"none\" is missing data</span><br>df<span class=\"token punctuation\">.</span>head<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># read first 5 rows</span><br>df<span class=\"token punctuation\">.</span>tail<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># last 5 rows</span><br>df<span class=\"token punctuation\">.</span>head<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># first 10 rows</span></code></pre>\n<h2 id=\"get-general-infos\">Get general infos <a class=\"direct-link\" href=\"#get-general-infos\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>info<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># show dtype of dataframe</span><br>df<span class=\"token punctuation\">.</span>describe<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># numerical features</span><br>df<span class=\"token punctuation\">.</span>describe<span class=\"token punctuation\">(</span>include<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'O'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># categorical features</span><br>df<span class=\"token punctuation\">.</span>describe<span class=\"token punctuation\">(</span>include<span class=\"token operator\">=</span><span class=\"token string\">'all'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># all types</span><br><br>df<span class=\"token punctuation\">.</span>shape <span class=\"token comment\"># dataframe's shape</span><br>df<span class=\"token punctuation\">.</span>dtypes <span class=\"token comment\"># type of each column</span><br><br>df<span class=\"token punctuation\">.</span>get_dtype_counts<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># count the number of data types</span></code></pre>\n<p>Check distribution of values using <strong>KDE</strong> (Kernel Density Estimation),</p>\n<pre class=\"language-python\"><code class=\"language-python\">plt<span class=\"token punctuation\">.</span>figure<span class=\"token punctuation\">(</span>figsize<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>df<span class=\"token punctuation\">[</span><span class=\"token string\">'value'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">.</span>kde<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"get-columns'-info\">Get columns' info <a class=\"direct-link\" href=\"#get-columns'-info\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># LIST OF COLUMNS</span><br>df<span class=\"token punctuation\">.</span>columns<br><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">.</span>columns<span class=\"token punctuation\">)</span> <span class=\"token comment\"># #cols?</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># UNIQUE VALUES IN COL</span><br>df<span class=\"token punctuation\">[</span><span class=\"token string\">'col'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>unique<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>df<span class=\"token punctuation\">[</span><span class=\"token string\">'col'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>unique<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>size <span class=\"token comment\">#unique vals</span><br>df<span class=\"token punctuation\">[</span><span class=\"token string\">'col'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>nunique<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># number of unique vals</span></code></pre>\n</div>\n<h2 id=\"counting\">Counting <a class=\"direct-link\" href=\"#counting\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Counting #elements of each class in df</span><br>df<span class=\"token punctuation\">.</span>Classes<span class=\"token punctuation\">.</span>value_counts<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># give number of each 0 and 1</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># count #elements each unique values in a col/series</span><br>df<span class=\"token punctuation\">[</span>col<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value_counts<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"missing-values\">Missing values <a class=\"direct-link\" href=\"#missing-values\">#</a></h2>\n<p>👉 <a href=\"/data-preprocessing-cleaning#deal-with-missing-values-nan\">Handle missing values</a>.</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># total number of nans in df</span><br>df<span class=\"token punctuation\">.</span>isnull<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># #nans in each col (including zeros)</span><br>df<span class=\"token punctuation\">.</span>isnull<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># #not-nans in each col</span><br>df<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># each row</span><br>df<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">(</span>axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># columns having the nulls (any nan)</span><br>null_columns <span class=\"token operator\">=</span> df<span class=\"token punctuation\">.</span>columns<span class=\"token punctuation\">[</span>df<span class=\"token punctuation\">.</span>isna<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">any</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>tolist<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># how many?</span><br>df<span class=\"token punctuation\">[</span>null_columns<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>isnull<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># number of rows having ALL nans</span><br>df<span class=\"token punctuation\">.</span>isna<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span>axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># number of columns having ALL nans</span><br>df<span class=\"token punctuation\">.</span>isna<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span>axis<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># find index of rows having ALL nans</span><br>df<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">[</span>df<span class=\"token punctuation\">.</span>isna<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span>axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>to_list<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n</div>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># number of nans in df</span><br>df<span class=\"token punctuation\">.</span>isnull<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>sort_values<span class=\"token punctuation\">(</span>ascending<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\"># find % of null values</span><br><span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">.</span>isnull<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">/</span>df<span class=\"token punctuation\">.</span>isnull<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">*</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>sort_values<span class=\"token punctuation\">(</span>ascending<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Visualize the locations of missing values,</span><br><span class=\"token keyword\">import</span> seaborn <span class=\"token keyword\">as</span> sns<br>df <span class=\"token operator\">=</span> df<span class=\"token punctuation\">.</span>set_index<span class=\"token punctuation\">(</span><span class=\"token string\">'YEAR'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># y-axis is YEAR</span><br>sns<span class=\"token punctuation\">.</span>heatmap<span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">.</span>isnull<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> cbar<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># x-axis is columns' name</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Plot the percentage of nans w.r.t. each column (feature)</span><br>df_tmp <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">.</span>isnull<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">/</span>df<span class=\"token punctuation\">.</span>isnull<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">*</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>sort_values<span class=\"token punctuation\">(</span>ascending<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>to_frame<span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">'percentage'</span><span class=\"token punctuation\">)</span><br>df_tmp<span class=\"token punctuation\">.</span>reset_index<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>kind<span class=\"token operator\">=</span><span class=\"token string\">'bar'</span><span class=\"token punctuation\">,</span> x<span class=\"token operator\">=</span><span class=\"token string\">'index'</span><span class=\"token punctuation\">,</span> y<span class=\"token operator\">=</span><span class=\"token string\">'percentage'</span><span class=\"token punctuation\">,</span> figsize<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>xlabel<span class=\"token punctuation\">(</span><span class=\"token string\">'features'</span><span class=\"token punctuation\">,</span> fontsize<span class=\"token operator\">=</span><span class=\"token number\">14</span><span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>ylabel<span class=\"token punctuation\">(</span><span class=\"token string\">'% of nans'</span><span class=\"token punctuation\">,</span> fontsize<span class=\"token operator\">=</span><span class=\"token number\">14</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"duplicates\">Duplicates <a class=\"direct-link\" href=\"#duplicates\">#</a></h2>\n<p>👉 <a href=\"/data-preprocessing-cleaning#drop-duplicates\">Handle duplicates</a>.</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Check if there are duplicated values?</span><br>df<span class=\"token punctuation\">[</span><span class=\"token string\">'col'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>duplicated<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">any</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># returns True/False</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># How many duplicates? (only count the first occurs)</span><br>df<span class=\"token punctuation\">[</span><span class=\"token string\">'col'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>duplicated<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># How many (including the repeated occurs)</span><br>df<span class=\"token punctuation\">[</span><span class=\"token string\">'col'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>duplicated<span class=\"token punctuation\">(</span>keep<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># List all duplicated values (LONG EXECUTING!!!)</span><br>pd<span class=\"token punctuation\">.</span>concat<span class=\"token punctuation\">(</span> g <span class=\"token keyword\">for</span> _<span class=\"token punctuation\">,</span> g <span class=\"token keyword\">in</span> df<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token string\">'col'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">if</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>g<span class=\"token punctuation\">)</span><span class=\"token operator\">></span><span class=\"token number\">1</span> <span class=\"token punctuation\">)</span></code></pre>\n",
      "date_published": "2019-12-06T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/data-preprocessing-cleaning/",
      "url": "https://dinhanhthi.com/data-preprocessing-cleaning/",
      "title": "Data Processing &amp; Cleaning",
      "content_html": "<p>In this note, I use <code>df</code> as <code>DataFrame</code>, <code>s</code> as <code>Series</code>.</p>\n<h2 id=\"libraries\">Libraries <a class=\"direct-link\" href=\"#libraries\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd <span class=\"token comment\"># import pandas package</span><br><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</code></pre>\n<h2 id=\"things-need-to-be-checked\">Things need to be checked <a class=\"direct-link\" href=\"#things-need-to-be-checked\">#</a></h2>\n<div class=\"two-columns-list\">\n<ol>\n<li><code>csv</code> file:\n<ol>\n<li>Values are separated by <code>,</code> of <code>;</code>?</li>\n<li>Encoding.</li>\n<li>Timestamp type.</li>\n</ol>\n</li>\n<li>Indexes are sorted?</li>\n<li>Indexes are continuous with step 1 (especially after using <code>.dropna()</code> or <code>.drop_duplicates</code>)?</li>\n<li>Are there <code>NaN</code> values? Drop them?</li>\n<li>Are there duplicates? Drop them?</li>\n<li>How many unique values?</li>\n<li>For <code>0/1</code> features, they have only 2 unique values (<code>0</code> and <code>1</code>)?</li>\n<li><code>KDE</code> plot to check the values distribution.</li>\n<li>The number of columns?</li>\n<li>Unique labels?</li>\n<li>Time series:\n<ol>\n<li>Time range.</li>\n<li>Time step.</li>\n<li>Timestamp's type.</li>\n<li>Timezone.</li>\n<li>Timestamps are monotonic?</li>\n</ol>\n</li>\n</ol>\n</div>\n<h2 id=\"deal-with-columns\">Deal with columns <a class=\"direct-link\" href=\"#deal-with-columns\">#</a></h2>\n<h3 id=\"remove-or-keep-some\">Remove or Keep some <a class=\"direct-link\" href=\"#remove-or-keep-some\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># REMOVING COLUMNS</span><br>df<span class=\"token punctuation\">.</span>drop<span class=\"token punctuation\">(</span><span class=\"token string\">'New'</span><span class=\"token punctuation\">,</span> axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> inplace<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># drop column 'New'</span><br>df<span class=\"token punctuation\">.</span>drop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'col1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'col2'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> inplace<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></code></pre>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># ONLY KEEP SOME</span><br>kept_cols <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'col1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'col2'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span><br>df <span class=\"token operator\">=</span> df<span class=\"token punctuation\">[</span>kept_cols<span class=\"token punctuation\">]</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># ALL EXCEPT SOME</span><br>df<span class=\"token punctuation\">[</span>df<span class=\"token punctuation\">.</span>columns<span class=\"token punctuation\">.</span>difference<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></code></pre>\n</div>\n<h3 id=\"rename-columns\">Rename columns <a class=\"direct-link\" href=\"#rename-columns\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># IMPLICITLY</span><br>df<span class=\"token punctuation\">.</span>columns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Surname'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Years'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Grade'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Location'</span><span class=\"token punctuation\">]</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># EXPLICITLY</span><br>df<span class=\"token punctuation\">.</span>rename<span class=\"token punctuation\">(</span>columns<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'Name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Surname'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Ages'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Years'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> inplace<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># A SPECIFIC COLUMN</span><br>data<span class=\"token punctuation\">.</span>rename<span class=\"token punctuation\">(</span>columns<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'gdp'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'log(gdp)'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> inplace<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># RENAME INDEX COLUMN</span><br>df<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'new_name'</span></code></pre>\n<h3 id=\"make-index\">Make index <a class=\"direct-link\" href=\"#make-index\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># COLUMN HAS UNIQUE VALUES?</span><br>df<span class=\"token punctuation\">[</span><span class=\"token string\">'col'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>is_unique <span class=\"token comment\"># True if yes</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># INDEX -> NORMAL COLUMN</span><br>df<span class=\"token punctuation\">.</span>reset_index<span class=\"token punctuation\">(</span>inplace<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># NORMAL COLUMN -> INDEX</span><br>df<span class=\"token punctuation\">.</span>set_index<span class=\"token punctuation\">(</span><span class=\"token string\">'column'</span><span class=\"token punctuation\">)</span><br>df<span class=\"token punctuation\">.</span>set_index<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'col1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'col2'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n</div>\n<h3 id=\"drop-duplicates\">Drop duplicates <a class=\"direct-link\" href=\"#drop-duplicates\">#</a></h3>\n<p>👉 <a href=\"/dataframe-overview#duplicates\">Overview duplicates</a>.</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># check duplicates</span><br>df<span class=\"token punctuation\">[</span><span class=\"token string\">'Student'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>duplicated<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">any</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># remove duplicates in some columns</span><br>df<span class=\"token punctuation\">.</span>drop_duplicates<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'col1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'col2'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\"># use \"ignore_index=True\" if you wanna reset indexes to 0,1,...,n-1</span></code></pre>\n<h3 id=\"couple-different-columns\">Couple different columns <a class=\"direct-link\" href=\"#couple-different-columns\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\">df <span class=\"token operator\">=</span> df0<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">'Date'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Heure'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'tH (°C)'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>copy<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>df<span class=\"token punctuation\">[</span><span class=\"token string\">'timestamp'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> df<span class=\"token punctuation\">[</span><span class=\"token string\">'Date'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token string\">' '</span> <span class=\"token operator\">+</span> df<span class=\"token punctuation\">[</span><span class=\"token string\">'Heure'</span><span class=\"token punctuation\">]</span><br><br><span class=\"token comment\"># if you use without `.copy()`</span><br><span class=\"token comment\"># WARNING: A value is trying to be set on a copy of a slice from a DataFrame.</span></code></pre>\n<h2 id=\"deal-with-missing-values-nan\">Deal with missing values <code>NaN</code> <a class=\"direct-link\" href=\"#deal-with-missing-values-nan\">#</a></h2>\n<p>👉 <a href=\"/dataframe-overview#missing-values\">Overview missing values</a>.</p>\n<h3 id=\"drop-nan-values\">Drop <code>NaN</code> values <a class=\"direct-link\" href=\"#drop-nan-values\">#</a></h3>\n<p>Full reference of <code>dropna</code> is <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.dropna.html\">here</a>.</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Drop any rows which have any nans</span><br>df<span class=\"token punctuation\">.</span>dropna<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Drop if all values in that col are NA</span><br>df<span class=\"token punctuation\">.</span>dropna<span class=\"token punctuation\">(</span>how<span class=\"token operator\">=</span><span class=\"token string\">'all'</span><span class=\"token punctuation\">,</span> axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Drop columns that have any nans</span><br>df<span class=\"token punctuation\">.</span>dropna<span class=\"token punctuation\">(</span>axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Only drop columns having min 90% non-NaNs</span><br>df<span class=\"token punctuation\">.</span>dropna<span class=\"token punctuation\">(</span>thresh<span class=\"token operator\">=</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span><span class=\"token number\">.9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Only keep rows having >=2 non-NA values</span><br>df<span class=\"token punctuation\">.</span>dropna<span class=\"token punctuation\">(</span>thresh<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Only consider some cols</span><br>df<span class=\"token punctuation\">.</span>dropna<span class=\"token punctuation\">(</span>subset<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'col1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'col2'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n</div>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># multi-index</span><br>df<span class=\"token punctuation\">.</span>dropna<span class=\"token punctuation\">(</span>subset<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># consider all cols '1' and '2'</span><br>df<span class=\"token punctuation\">.</span>dropna<span class=\"token punctuation\">(</span>subset<span class=\"token operator\">=</span>df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>columns<span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"fill-nan-with-others\">Fill <code>NaN</code> with others <a class=\"direct-link\" href=\"#fill-nan-with-others\">#</a></h3>\n<p>Check other methods of <code>fillna</code> <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.fillna.html\">here</a>.</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Fill NaN with ' '</span><br>df<span class=\"token punctuation\">[</span><span class=\"token string\">'col'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> df<span class=\"token punctuation\">[</span><span class=\"token string\">'col'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>fillna<span class=\"token punctuation\">(</span><span class=\"token string\">' '</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Fill NaN with 99</span><br>df<span class=\"token punctuation\">[</span><span class=\"token string\">'col'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> df<span class=\"token punctuation\">[</span><span class=\"token string\">'col'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>fillna<span class=\"token punctuation\">(</span><span class=\"token number\">99</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># mean / median of each column</span><br>df<span class=\"token punctuation\">.</span>fillna<span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Fill NaN with the mean of the column</span><br>df<span class=\"token punctuation\">[</span><span class=\"token string\">'col'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> df<span class=\"token punctuation\">[</span><span class=\"token string\">'col'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>fillna<span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">[</span><span class=\"token string\">'col'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Fill NA with mean of row</span><br>m <span class=\"token operator\">=</span> df<span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">(</span>axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">for</span> col <span class=\"token keyword\">in</span> df<span class=\"token punctuation\">.</span>columns<span class=\"token punctuation\">:</span><br>    df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> col<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> col<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>fillna<span class=\"token punctuation\">(</span>m<span class=\"token punctuation\">)</span></code></pre>\n</div>\n<h2 id=\"do-with-conditions\">Do with conditions <a class=\"direct-link\" href=\"#do-with-conditions\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\">np<span class=\"token punctuation\">.</span>where<span class=\"token punctuation\">(</span>if_this_condition_is_true<span class=\"token punctuation\">,</span> do_this<span class=\"token punctuation\">,</span> else_this<span class=\"token punctuation\">)</span><br>df<span class=\"token punctuation\">[</span><span class=\"token string\">'new_column'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>where<span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'foo'</span><span class=\"token punctuation\">,</span> 'bar<span class=\"token punctuation\">)</span> <span class=\"token comment\"># example</span></code></pre>\n<h2 id=\"work-with-text-data\">Work with text data <a class=\"direct-link\" href=\"#work-with-text-data\">#</a></h2>\n<p>There are a lot of <a href=\"https://pandas.pydata.org/pandas-docs/stable/user_guide/text.html#method-summary\">methods</a> we can work with text data (<code>pd.Series.str</code>). We can use it coupling with <a href=\"/regular-expression\">regular expression</a>.</p>\n",
      "date_published": "2019-12-06T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/data-combining/",
      "url": "https://dinhanhthi.com/data-combining/",
      "title": "Data Combining",
      "content_html": "<p>Sometimes, we wanna couple multiple dataframes together. In this note, I use <code>df</code> as <code>DataFrame</code>, <code>s</code> as <code>Series</code>.</p>\n<h2 id=\"libraries\">Libraries <a class=\"direct-link\" href=\"#libraries\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd<br><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</code></pre>\n<h2 id=\"coupling-dfs-with-merge()\">Coupling dfs with <code>merge()</code> <a class=\"direct-link\" href=\"#coupling-dfs-with-merge()\">#</a></h2>\n<p>There are 4 types of merging, like in <a href=\"https://www.w3schools.com/sql/sql_join.asp\">SQL</a>.</p>\n<ul>\n<li><strong>Inner</strong>: only includes elements that appear in both dataframes with a common key.</li>\n<li><strong>Outer</strong>: includes all data from both dataframes.</li>\n<li><strong>Left</strong>: includes all of the rows from the &quot;left&quot; dataframe along with any rows from the &quot;right&quot; dataframe with a common key; the result retains all columns from both of the original dataframes.</li>\n<li><strong>Right</strong>: includes all of the rows from the &quot;right&quot; dataframe along with any rows from the &quot;left&quot; dataframe with a common key; the result retains all columns from both of the original dataframes.</li>\n</ul>\n<p><img src=\"/img/post/data/data-processing/type_of_join.png\" alt=\"Types of merge\" class=\"img-full-100\"></p>\n<p>On <strong>the same column name</strong>,</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># left</span><br>df_left <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>merge<span class=\"token punctuation\">(</span>left<span class=\"token operator\">=</span>df1<span class=\"token punctuation\">,</span> right<span class=\"token operator\">=</span>df2<span class=\"token punctuation\">,</span> how<span class=\"token operator\">=</span><span class=\"token string\">'left'</span><span class=\"token punctuation\">,</span> on<span class=\"token operator\">=</span><span class=\"token string\">'Col_1'</span><span class=\"token punctuation\">,</span> suffixes<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token string\">'_df1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'_df2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\"># right</span><br>df_right <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>merge<span class=\"token punctuation\">(</span>left<span class=\"token operator\">=</span>df1<span class=\"token punctuation\">,</span> right<span class=\"token operator\">=</span>df2<span class=\"token punctuation\">,</span> how<span class=\"token operator\">=</span><span class=\"token string\">'right'</span><span class=\"token punctuation\">,</span> on<span class=\"token operator\">=</span><span class=\"token string\">'Col_1'</span><span class=\"token punctuation\">,</span> suffixes<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token string\">'_df1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'_df2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><br>display_side_by_side<span class=\"token punctuation\">(</span>df1<span class=\"token punctuation\">,</span> df2<span class=\"token punctuation\">,</span> df_left<span class=\"token punctuation\">,</span> df_right<span class=\"token punctuation\">)</span></code></pre>\n<div class=\"col-2-flex\">\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>Col_1</th>\n      <th>Col_2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>A</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>E</td>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>C</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>D</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>B</td>\n      <td>2</td>\n    </tr>\n  </tbody>\n</table>\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>Col_1</th>\n      <th>Col_2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>A</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>B</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>C</td>\n      <td>-3</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>F</td>\n      <td>-4</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>E</td>\n      <td>NaN</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"col-2-flex\">\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>Col_1</th>\n      <th>Col_2_df1</th>\n      <th>Col_2_df2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>A</td>\n      <td>1</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>E</td>\n      <td>3</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>C</td>\n      <td>NaN</td>\n      <td>-3</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>D</td>\n      <td>NaN</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>B</td>\n      <td>2</td>\n      <td>2</td>\n    </tr>\n  </tbody>\n</table>\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>Col_1</th>\n      <th>Col_2_df1</th>\n      <th>Col_2_df2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>A</td>\n      <td>1</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>E</td>\n      <td>3</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>C</td>\n      <td>NaN</td>\n      <td>-3</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>B</td>\n      <td>2</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>F</td>\n      <td>NaN</td>\n      <td>-4</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># inner (defaut)</span><br>df_inner <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>merge<span class=\"token punctuation\">(</span>left<span class=\"token operator\">=</span>df1<span class=\"token punctuation\">,</span> right<span class=\"token operator\">=</span>df2<span class=\"token punctuation\">,</span> on<span class=\"token operator\">=</span><span class=\"token string\">'Col_1'</span><span class=\"token punctuation\">,</span> suffixes<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token string\">'_df1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'_df2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\"># outer</span><br>df_outer <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>merge<span class=\"token punctuation\">(</span>left<span class=\"token operator\">=</span>df1<span class=\"token punctuation\">,</span> right<span class=\"token operator\">=</span>df2<span class=\"token punctuation\">,</span> how<span class=\"token operator\">=</span><span class=\"token string\">'outer'</span><span class=\"token punctuation\">,</span> on<span class=\"token operator\">=</span><span class=\"token string\">'Col_1'</span><span class=\"token punctuation\">,</span> suffixes<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token string\">'_df1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'_df2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><br>display_side_by_side<span class=\"token punctuation\">(</span>df1<span class=\"token punctuation\">,</span> df2<span class=\"token punctuation\">,</span> df_inner<span class=\"token punctuation\">,</span> df_outer<span class=\"token punctuation\">)</span></code></pre>\n<div class=\"col-2-flex\">\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>Col_1</th>\n      <th>Col_2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>A</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>E</td>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>C</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>D</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>B</td>\n      <td>2</td>\n    </tr>\n  </tbody>\n</table>\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>Col_1</th>\n      <th>Col_2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>A</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>B</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>C</td>\n      <td>-3</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>F</td>\n      <td>-4</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>E</td>\n      <td>NaN</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"col-2-flex\">\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>Col_1</th>\n      <th>Col_2_df1</th>\n      <th>Col_2_df2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>A</td>\n      <td>1</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>E</td>\n      <td>3</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>C</td>\n      <td>NaN</td>\n      <td>-3</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>B</td>\n      <td>2</td>\n      <td>2</td>\n    </tr>\n  </tbody>\n</table>\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>Col_1</th>\n      <th>Col_2_df1</th>\n      <th>Col_2_df2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>A</td>\n      <td>1</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>E</td>\n      <td>3</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>C</td>\n      <td>NaN</td>\n      <td>-3</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>D</td>\n      <td>NaN</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>B</td>\n      <td>2</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>F</td>\n      <td>NaN</td>\n      <td>-4</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>On the <strong>different column names</strong>,</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># left</span><br>df_left <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>merge<span class=\"token punctuation\">(</span>left<span class=\"token operator\">=</span>df1<span class=\"token punctuation\">,</span> right<span class=\"token operator\">=</span>df2<span class=\"token punctuation\">,</span> how<span class=\"token operator\">=</span><span class=\"token string\">'left'</span><span class=\"token punctuation\">,</span> left_on<span class=\"token operator\">=</span><span class=\"token string\">'Col_1'</span><span class=\"token punctuation\">,</span> right_on<span class=\"token operator\">=</span><span class=\"token string\">'Col_X'</span><span class=\"token punctuation\">,</span> suffixes<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token string\">'_df1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'_df2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><br>display_side_by_side<span class=\"token punctuation\">(</span>df1<span class=\"token punctuation\">,</span> df2<span class=\"token punctuation\">,</span> df_left<span class=\"token punctuation\">)</span></code></pre>\n<div class=\"col-2-flex\">\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>Col_1</th>\n      <th>Col_2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>A</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>E</td>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>C</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>D</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>B</td>\n      <td>2</td>\n    </tr>\n  </tbody>\n</table>\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>Col_X</th>\n      <th>Col_2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>A</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>B</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>C</td>\n      <td>-3</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>F</td>\n      <td>-4</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>E</td>\n      <td>NaN</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"col-2-flex\">\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>Col_1</th>\n      <th>Col_2_df1</th>\n      <th>Col_X</th>\n      <th>Col_2_df2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>A</td>\n      <td>1</td>\n      <td>A</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>E</td>\n      <td>3</td>\n      <td>E</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>C</td>\n      <td>NaN</td>\n      <td>C</td>\n      <td>-3</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>D</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>B</td>\n      <td>2</td>\n      <td>B</td>\n      <td>2</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>The result keeps both <code>Col_1</code> and <code>Col_X</code> while in the case of the same column name, there is only 1 column. Other words, in this case, we only want to keep <code>Col_1</code> and don't need <code>Col_X</code>. How to do that?</p>\n<pre class=\"language-python\"><code class=\"language-python\">df_left <span class=\"token operator\">=</span> df1<span class=\"token punctuation\">.</span>set_index<span class=\"token punctuation\">(</span><span class=\"token string\">'Col_1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>df2<span class=\"token punctuation\">.</span>set_index<span class=\"token punctuation\">(</span><span class=\"token string\">'Col_X'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> how<span class=\"token operator\">=</span><span class=\"token string\">\"left\"</span><span class=\"token punctuation\">,</span> lsuffix<span class=\"token operator\">=</span><span class=\"token string\">\"_df1\"</span><span class=\"token punctuation\">,</span> rsuffix<span class=\"token operator\">=</span><span class=\"token string\">\"_df2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>reset_index<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br><br>display_side_by_side<span class=\"token punctuation\">(</span>df1<span class=\"token punctuation\">,</span> df2<span class=\"token punctuation\">,</span> df_left<span class=\"token punctuation\">)</span></code></pre>\n<div class=\"col-2-flex\">\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>Col_1</th>\n      <th>Col_2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>A</td>\n      <td>1.0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>E</td>\n      <td>3.0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>C</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>D</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>B</td>\n      <td>2.0</td>\n    </tr>\n  </tbody>\n</table>\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>Col_X</th>\n      <th>Col_2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>A</td>\n      <td>1.0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>B</td>\n      <td>2.0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>C</td>\n      <td>-3.0</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>F</td>\n      <td>-4.0</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>E</td>\n      <td>NaN</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>Col_1</th>\n      <th>Col_2_df1</th>\n      <th>Col_2_df2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>A</td>\n      <td>1.0</td>\n      <td>1.0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>E</td>\n      <td>3.0</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>C</td>\n      <td>NaN</td>\n      <td>-3.0</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>D</td>\n      <td>NaN</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>B</td>\n      <td>2.0</td>\n      <td>2.0</td>\n    </tr>\n  </tbody>\n</table>\n<h2 id=\"concatenate-dfs-with-concat()\">Concatenate dfs with <code>concat()</code> <a class=\"direct-link\" href=\"#concatenate-dfs-with-concat()\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># axis=0 (default)</span><br>df_concat_0 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>concat<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>df1<span class=\"token punctuation\">,</span> df2<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># the same columns</span><br>df_concat_1 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>concat<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>df1<span class=\"token punctuation\">,</span> df2<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># the same rows</span><br><br>df_concat_0_idx <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>concat<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>df1<span class=\"token punctuation\">,</span> df2<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> ignore_index<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\"># ignore_index=True prevent duplicating indexes</span><br><br>display_side_by_side<span class=\"token punctuation\">(</span>df1<span class=\"token punctuation\">,</span> df2<span class=\"token punctuation\">)</span><br>display_side_by_side<span class=\"token punctuation\">(</span>df_concat_0<span class=\"token punctuation\">,</span> df_concat_1<span class=\"token punctuation\">,</span> df_concat_0_idx<span class=\"token punctuation\">)</span></code></pre>\n<div class=\"col-2-flex\">\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>Col_1</th>\n      <th>Col_2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>A</td>\n      <td>1.0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>E</td>\n      <td>3.0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>C</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>D</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>B</td>\n      <td>2.0</td>\n    </tr>\n  </tbody>\n</table>\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>Col_1</th>\n      <th>Col_2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>A</td>\n      <td>1.0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>B</td>\n      <td>2.0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>C</td>\n      <td>-3.0</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>F</td>\n      <td>-4.0</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>E</td>\n      <td>NaN</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<div class=\"col-2-flex\">\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>Col_1</th>\n      <th>Col_2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>A</td>\n      <td>1.0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>E</td>\n      <td>3.0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>C</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>D</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>B</td>\n      <td>2.0</td>\n    </tr>\n    <tr>\n      <th>0</th>\n      <td>A</td>\n      <td>1.0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>B</td>\n      <td>2.0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>C</td>\n      <td>-3.0</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>F</td>\n      <td>-4.0</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>E</td>\n      <td>NaN</td>\n    </tr>\n  </tbody>\n</table>\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>Col_1</th>\n      <th>Col_2</th>\n      <th>Col_1</th>\n      <th>Col_2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>A</td>\n      <td>1.0</td>\n      <td>A</td>\n      <td>1.0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>E</td>\n      <td>3.0</td>\n      <td>B</td>\n      <td>2.0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>C</td>\n      <td>NaN</td>\n      <td>C</td>\n      <td>-3.0</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>D</td>\n      <td>NaN</td>\n      <td>F</td>\n      <td>-4.0</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>B</td>\n      <td>2.0</td>\n      <td>E</td>\n      <td>NaN</td>\n    </tr>\n  </tbody>\n</table>\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>Col_1</th>\n      <th>Col_2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>A</td>\n      <td>1.0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>E</td>\n      <td>3.0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>C</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>D</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>B</td>\n      <td>2.0</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>A</td>\n      <td>1.0</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>B</td>\n      <td>2.0</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>C</td>\n      <td>-3.0</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>F</td>\n      <td>-4.0</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>E</td>\n      <td>NaN</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<h2 id=\"combine-2-dataframes-with-missing-values\">Combine 2 dataframes with missing values <a class=\"direct-link\" href=\"#combine-2-dataframes-with-missing-values\">#</a></h2>\n<p>We consider a situation in that we need to combine 2 dfs containing missing values in each. The missing values will be filled by taking from the others. For example, the value of <code>C</code> in the left df can be fulfilled by the value of <code>C</code> in the right df.</p>\n<pre class=\"language-python\"><code class=\"language-python\">df_comb <span class=\"token operator\">=</span> df1<span class=\"token punctuation\">.</span>copy<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># we don't want to change df1</span><br>df_new <span class=\"token operator\">=</span> df_comb<span class=\"token punctuation\">.</span>fillna<span class=\"token punctuation\">(</span>df2<span class=\"token punctuation\">)</span><br><br>display_side_by_side<span class=\"token punctuation\">(</span>df1<span class=\"token punctuation\">,</span> df2<span class=\"token punctuation\">,</span> df_comb<span class=\"token punctuation\">,</span> df_new<span class=\"token punctuation\">)</span></code></pre>\n<div class=\"col-2-flex\">\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>Col_1</th>\n      <th>Col_2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>A</td>\n      <td>1.0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>E</td>\n      <td>3.0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>C</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>D</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>B</td>\n      <td>2.0</td>\n    </tr>\n  </tbody>\n</table>\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>Col_1</th>\n      <th>Col_2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>A</td>\n      <td>1.0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>B</td>\n      <td>2.0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>C</td>\n      <td>-3.0</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>F</td>\n      <td>-4.0</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>E</td>\n      <td>NaN</td>\n    </tr>\n  </tbody>\n</table>\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>Col_1</th>\n      <th>Col_2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>A</td>\n      <td>1.0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>E</td>\n      <td>3.0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>C</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>D</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>B</td>\n      <td>2.0</td>\n    </tr>\n  </tbody>\n</table>\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>Col_1</th>\n      <th>Col_2</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>A</td>\n      <td>1.0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>E</td>\n      <td>3.0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>C</td>\n      <td>-3.0</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>D</td>\n      <td>-4.0</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>B</td>\n      <td>2.0</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n",
      "date_published": "2019-12-06T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/data-aggregation/",
      "url": "https://dinhanhthi.com/data-aggregation/",
      "title": "Data Aggregation",
      "content_html": "<p>In this note, I use <code>df</code> for <code>DataFrame</code>, <code>s</code> for <code>Series</code>.</p>\n<h2 id=\"libraries\">Libraries <a class=\"direct-link\" href=\"#libraries\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd <span class=\"token comment\"># import pandas package</span><br><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</code></pre>\n<h2 id=\"dataframe\">Dataframe <a class=\"direct-link\" href=\"#dataframe\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\">dataquest_aio <span class=\"token operator\">=</span> <span class=\"token string\">'https://raw.githubusercontent.com/dinhanhthi/dataquest-aio/master/step-2-data-analysis-and-visualization/'</span><br>dataset_url <span class=\"token operator\">=</span> dataquest_aio <span class=\"token operator\">+</span> <span class=\"token string\">'course-4-data-cleaning-and-analysis/data/World_Happiness_2015.csv'</span><br>df <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>read_csv<span class=\"token punctuation\">(</span>dataset_url<span class=\"token punctuation\">)</span> <span class=\"token comment\"># read the data set</span><br>df<span class=\"token punctuation\">.</span>head<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>Country</th>\n      <th>Region</th>\n      <th>Happiness Rank</th>\n      <th>Happiness Score</th>\n      <th>Standard Error</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Switzerland</td>\n      <td>Western Europe</td>\n      <td>1</td>\n      <td>7.587</td>\n      <td>0.03411</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Iceland</td>\n      <td>Western Europe</td>\n      <td>2</td>\n      <td>7.561</td>\n      <td>0.04884</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Denmark</td>\n      <td>Western Europe</td>\n      <td>3</td>\n      <td>7.527</td>\n      <td>0.03328</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>Norway</td>\n      <td>Western Europe</td>\n      <td>4</td>\n      <td>7.522</td>\n      <td>0.03880</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>Canada</td>\n      <td>North America</td>\n      <td>5</td>\n      <td>7.427</td>\n      <td>0.03553</td>\n    </tr>\n  </tbody>\n</table>\n<h2 id=\"group-dataset-using-groupby()\">Group dataset using <code>groupby()</code> <a class=\"direct-link\" href=\"#group-dataset-using-groupby()\">#</a></h2>\n<p>Group <code>df</code> by column <code>Region</code> and then selct the column <code>Western Europe</code>,</p>\n<pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token string\">'Region'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get_group<span class=\"token punctuation\">(</span><span class=\"token string\">'Western Europe'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># returns a df</span></code></pre>\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>Country</th>\n      <th>Region</th>\n      <th>Happiness Rank</th>\n      <th>Happiness Score</th>\n      <th>Standard Error</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Switzerland</td>\n      <td>Western Europe</td>\n      <td>1</td>\n      <td>7.587</td>\n      <td>0.03411</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Iceland</td>\n      <td>Western Europe</td>\n      <td>2</td>\n      <td>7.561</td>\n      <td>0.04884</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Denmark</td>\n      <td>Western Europe</td>\n      <td>3</td>\n      <td>7.527</td>\n      <td>0.03328</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>Norway</td>\n      <td>Western Europe</td>\n      <td>4</td>\n      <td>7.522</td>\n      <td>0.03880</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>Finland</td>\n      <td>Western Europe</td>\n      <td>6</td>\n      <td>7.406</td>\n      <td>0.03140</td>\n    </tr>\n  </tbody>\n</table>\n<p>Select just the <code>Happiness Score</code> column and then find the <code>mean</code>,</p>\n<pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token string\">'Region'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">'Happiness Score'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\"># other methods: size, max, min, count</span></code></pre>\n<pre><code>Region\nAustralia and New Zealand          7.285000\nCentral and Eastern Europe         5.332931\nEastern Asia                       5.626167\nLatin America and Caribbean        6.144682\nMiddle East and Northern Africa    5.406900\nNorth America                      7.273000\nSoutheastern Asia                  5.317444\nSouthern Asia                      4.580857\nSub-Saharan Africa                 4.202800\nWestern Europe                     6.689619\nName: Happiness Score, dtype: float64\n</code></pre>\n<p>Apply multiple/custom functions,</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">max_min</span><span class=\"token punctuation\">(</span>group<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>  <span class=\"token keyword\">return</span> group<span class=\"token punctuation\">.</span><span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> group<span class=\"token punctuation\">.</span><span class=\"token builtin\">min</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br><br>df<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'Country'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Region'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>agg<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>np<span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span><span class=\"token builtin\">max</span><span class=\"token punctuation\">,</span> max_min<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>head<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th></th>\n      <th colspan=\"3\" halign=\"left\">Happiness Rank</th>\n      <th colspan=\"3\" halign=\"left\">Happiness Score</th>\n    </tr>\n    <tr>\n      <th></th>\n      <th></th>\n      <th>mean</th>\n      <th>amax</th>\n      <th>max_min</th>\n      <th>mean</th>\n      <th>amax</th>\n      <th>max_min</th>\n    </tr>\n    <tr>\n      <th>Country</th>\n      <th>Region</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>Afghanistan</th>\n      <th>Southern Asia</th>\n      <td>153</td>\n      <td>153</td>\n      <td>0</td>\n      <td>3.575</td>\n      <td>3.575</td>\n      <td>0.0</td>\n    </tr>\n    <tr>\n      <th>Albania</th>\n      <th>Central Europe</th>\n      <td>95</td>\n      <td>95</td>\n      <td>0</td>\n      <td>4.959</td>\n      <td>4.959</td>\n      <td>0.0</td>\n    </tr>\n    <tr>\n      <th>Algeria</th>\n      <th>Middle Africa</th>\n      <td>68</td>\n      <td>68</td>\n      <td>0</td>\n      <td>5.605</td>\n      <td>5.605</td>\n      <td>0.0</td>\n    </tr>\n  </tbody>\n</table>\n<p>If you wanna apply different functions on different columns,</p>\n<pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'Country'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Region'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>agg<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><br>    <span class=\"token string\">'Happiness Rank'</span><span class=\"token punctuation\">:</span> max_min<span class=\"token punctuation\">,</span><br>    <span class=\"token string\">'Happiness Score'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'min'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'max'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><br>    <span class=\"token string\">'Standard Error'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'count'</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>head<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span></code></pre>\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th></th>\n      <th>Happiness Rank</th>\n      <th colspan=\"2\" halign=\"left\">Happiness Score</th>\n    </tr>\n    <tr>\n      <th></th>\n      <th></th>\n      <th>max_min</th>\n      <th>min</th>\n      <th>max</th>\n    </tr>\n    <tr>\n      <th>Country</th>\n      <th>Region</th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>Afghanistan</th>\n      <th>Southern Asia</th>\n      <td>0</td>\n      <td>3.575</td>\n      <td>3.575</td>\n    </tr>\n    <tr>\n      <th>Albania</th>\n      <th>Central Europe</th>\n      <td>0</td>\n      <td>4.959</td>\n      <td>4.959</td>\n    </tr>\n    <tr>\n      <th>Algeria</th>\n      <th>Middle Africa</th>\n      <td>0</td>\n      <td>5.605</td>\n      <td>5.605</td>\n    </tr>\n  </tbody>\n</table>\n<p>Or using <code>apply</code> and <code>lambda</code> function,</p>\n<pre class=\"language-python\"><code class=\"language-python\">orders<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token string\">'shoes'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>price<span class=\"token punctuation\">.</span><span class=\"token builtin\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> np<span class=\"token punctuation\">.</span><span class=\"token builtin\">min</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> <span class=\"token number\">25</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>reset_index<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"group-using-pivot_table()\">Group using <code>pivot_table()</code> <a class=\"direct-link\" href=\"#group-using-pivot_table()\">#</a></h2>\n<p><img src=\"/img/post/data/data-aggregation/pivoting_table_simple1.png\" alt=\"An example of pivotting by a single column\" class=\"img-90\"><br>\n<em>An example of pivotting by a single column<sup><a href=\"https://nikgrozev.com/2015/07/01/reshaping-in-pandas-pivot-pivot-table-stack-and-unstack-explained-with-pictures/\">[ref]</a></sup></em></p>\n<p>Group by <code>Region</code> (as an index) and choosing <code>GDP</code> and <code>City</code> columns,<sup><a href=\"https://github.com/dinhanhthi/data-science-learning/blob/master/codecademy-data-science/course-10%20Data%20Analysis%20with%20Pandas/Aggregates%20in%20Pandas.ipynb\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>pivot_table<span class=\"token punctuation\">(</span>values<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'GDP'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'City'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> index<span class=\"token operator\">=</span><span class=\"token string\">'Region'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># returns df</span></code></pre>\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>Happiness Rank</th>\n      <th>Standard Error</th>\n    </tr>\n    <tr>\n      <th>Region</th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>Australia and New Zealand</th>\n      <td>9.5</td>\n      <td>0.037270</td>\n    </tr>\n    <tr>\n      <th>Central and Eastern Europe</th>\n      <td>79.0</td>\n      <td>0.045208</td>\n    </tr>\n    <tr>\n      <th>Eastern Asia</th>\n      <td>64.5</td>\n      <td>0.037225</td>\n    </tr>\n  </tbody>\n</table>\n<p>Apply some functions,</p>\n<pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>pivot_table<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'GDP'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'City'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Region'</span><span class=\"token punctuation\">,</span> aggfunc<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>np<span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span><span class=\"token builtin\">max</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> margins<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\"># margins shows the \"All\" row</span></code></pre>\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th colspan=\"2\" halign=\"left\">mean</th>\n      <th colspan=\"2\" halign=\"left\">amax</th>\n    </tr>\n    <tr>\n      <th></th>\n      <th>Happiness Rank</th>\n      <th>Standard Error</th>\n      <th>Happiness Rank</th>\n      <th>Standard Error</th>\n    </tr>\n    <tr>\n      <th>Region</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>Australia and New Zealand</th>\n      <td>9.5</td>\n      <td>0.037270</td>\n      <td>10</td>\n      <td>0.04083</td>\n    </tr>\n    <tr>\n      <th>Central and Eastern Europe</th>\n      <td>79.0</td>\n      <td>0.045208</td>\n      <td>134</td>\n      <td>0.06913</td>\n    </tr>\n    <tr>\n      <th>Eastern Asia</th>\n      <td>64.5</td>\n      <td>0.037225</td>\n      <td>100</td>\n      <td>0.05051</td>\n    </tr>\n  </tbody>\n</table>\n<h2 id=\"reorganizing-df-using-pivot()\">Reorganizing df using <code>pivot()</code> <a class=\"direct-link\" href=\"#reorganizing-df-using-pivot()\">#</a></h2>\n<p><img src=\"/img/post/data/data-aggregation/pivoting_simple_multicolumn.png\" alt=\"An example of multi-column pivoting\" class=\"img-90\"><br>\n<em>An example of multi-column pivoting (<a href=\"https://nikgrozev.com/2015/07/01/reshaping-in-pandas-pivot-pivot-table-stack-and-unstack-explained-with-pictures/\">ref</a>)</em></p>\n<p>Make values in one columns be columns in a new &quot;pivot&quot; table,<sup><a href=\"https://github.com/dinhanhthi/data-science-learning/blob/master/codecademy-data-science/course-10%20Data%20Analysis%20with%20Pandas/Aggregates%20in%20Pandas.ipynb\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<pre class=\"language-python\"><code class=\"language-python\">df <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">'foo'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'one'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'one'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'one'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'two'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'two'</span><span class=\"token punctuation\">,</span><br>                           <span class=\"token string\">'two'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><br>                   <span class=\"token string\">'bar'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'B'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'C'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'A'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'B'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'C'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><br>                   <span class=\"token string\">'baz'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><br>                   <span class=\"token string\">'zoo'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'x'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'y'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'z'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'q'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'w'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'t'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><br><br>pivot_1 <span class=\"token operator\">=</span> df<span class=\"token punctuation\">.</span>pivot<span class=\"token punctuation\">(</span>index<span class=\"token operator\">=</span><span class=\"token string\">'foo'</span><span class=\"token punctuation\">,</span> columns<span class=\"token operator\">=</span><span class=\"token string\">'bar'</span><span class=\"token punctuation\">,</span> values<span class=\"token operator\">=</span><span class=\"token string\">'baz'</span><span class=\"token punctuation\">)</span><br>pivot_2 <span class=\"token operator\">=</span> df<span class=\"token punctuation\">.</span>pivot<span class=\"token punctuation\">(</span>index<span class=\"token operator\">=</span><span class=\"token string\">'foo'</span><span class=\"token punctuation\">,</span> columns<span class=\"token operator\">=</span><span class=\"token string\">'bar'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">'baz'</span><span class=\"token punctuation\">]</span><br>pivot_3 <span class=\"token operator\">=</span> df<span class=\"token punctuation\">.</span>pivot<span class=\"token punctuation\">(</span>index<span class=\"token operator\">=</span><span class=\"token string\">'foo'</span><span class=\"token punctuation\">,</span> columns<span class=\"token operator\">=</span><span class=\"token string\">'bar'</span><span class=\"token punctuation\">,</span> values<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'baz'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'zoo'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br><br>display_side_by_side<span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">,</span> pivot_1<span class=\"token punctuation\">,</span> pivot_2<span class=\"token punctuation\">,</span> pivot_3<span class=\"token punctuation\">)</span></code></pre>\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>foo</th>\n      <th>bar</th>\n      <th>baz</th>\n      <th>zoo</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>one</td>\n      <td>A</td>\n      <td>1</td>\n      <td>x</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>one</td>\n      <td>B</td>\n      <td>2</td>\n      <td>y</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>one</td>\n      <td>C</td>\n      <td>3</td>\n      <td>z</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>two</td>\n      <td>A</td>\n      <td>4</td>\n      <td>q</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>two</td>\n      <td>B</td>\n      <td>5</td>\n      <td>w</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>two</td>\n      <td>C</td>\n      <td>6</td>\n      <td>t</td>\n    </tr>\n  </tbody>\n</table>\n<div class=\"col-2-flex\">\n<table>\n  <thead>\n    <tr>\n      <th>bar</th>\n      <th>A</th>\n      <th>B</th>\n      <th>C</th>\n    </tr>\n    <tr>\n      <th>foo</th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>one</th>\n      <td>1</td>\n      <td>2</td>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>two</th>\n      <td>4</td>\n      <td>5</td>\n      <td>6</td>\n    </tr>\n  </tbody>\n</table>\n<table>\n  <thead>\n    <tr>\n      <th>bar</th>\n      <th>A</th>\n      <th>B</th>\n      <th>C</th>\n    </tr>\n    <tr>\n      <th>foo</th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>one</th>\n      <td>1</td>\n      <td>2</td>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>two</th>\n      <td>4</td>\n      <td>5</td>\n      <td>6</td>\n    </tr>\n  </tbody>\n</table>\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th colspan=\"3\" halign=\"left\">baz</th>\n      <th colspan=\"3\" halign=\"left\">zoo</th>\n    </tr>\n    <tr>\n      <th>bar</th>\n      <th>A</th>\n      <th>B</th>\n      <th>C</th>\n      <th>A</th>\n      <th>B</th>\n      <th>C</th>\n    </tr>\n    <tr>\n      <th>foo</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>one</th>\n      <td>1</td>\n      <td>2</td>\n      <td>3</td>\n      <td>x</td>\n      <td>y</td>\n      <td>z</td>\n    </tr>\n    <tr>\n      <th>two</th>\n      <td>4</td>\n      <td>5</td>\n      <td>6</td>\n      <td>q</td>\n      <td>w</td>\n      <td>t</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<p>For one who wanna know <code>display_side_by_side</code>, check <a href=\"/jupyter-notebook#display-dataframes-side-by-side\">this note</a>.</p>\n<h2 id=\"change-shape-of-df-with-melt()\">Change shape of df with <code>melt()</code> <a class=\"direct-link\" href=\"#change-shape-of-df-with-melt()\">#</a></h2>\n<p>Contrary to <code>pivot</code>, we now want to transform several columns into values of a single column,<sup><a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.melt.html\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<pre class=\"language-python\"><code class=\"language-python\">df <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token number\">0</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>                   <span class=\"token string\">'B'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token number\">0</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>                   <span class=\"token string\">'C'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token number\">0</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">:</span> <span class=\"token number\">6</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><br><br>df1 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>melt<span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">,</span> id_vars<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> value_vars<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'B'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br>df2 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>melt<span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">,</span> id_vars<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> value_vars<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'B'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'C'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br><br>display_side_by_side<span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">,</span> df1<span class=\"token punctuation\">,</span> df2<span class=\"token punctuation\">)</span></code></pre>\n<div class=\"col-2-flex\">\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>A</th>\n      <th>B</th>\n      <th>C</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>a</td>\n      <td>1</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>b</td>\n      <td>3</td>\n      <td>4</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>c</td>\n      <td>5</td>\n      <td>6</td>\n    </tr>\n  </tbody>\n</table>\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>A</th>\n      <th>variable</th>\n      <th>value</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>a</td>\n      <td>B</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>b</td>\n      <td>B</td>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>c</td>\n      <td>B</td>\n      <td>5</td>\n    </tr>\n  </tbody>\n</table>\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th>A</th>\n      <th>variable</th>\n      <th>value</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>a</td>\n      <td>B</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>b</td>\n      <td>B</td>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>c</td>\n      <td>B</td>\n      <td>5</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>a</td>\n      <td>C</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>b</td>\n      <td>C</td>\n      <td>4</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>c</td>\n      <td>C</td>\n      <td>6</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n<h2 id=\"references\">References <a class=\"direct-link\" href=\"#references\">#</a></h2>\n<ul>\n<li><a href=\"https://github.com/dinhanhthi/dataquest-aio/tree/master/step-2-data-analysis-and-visualization/course-4-data-cleaning-and-analysis\">Data Cleaning and Analysis</a> on Dataquest.</li>\n<li><a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/dataquest-aio/blob/master/step-2-data-analysis-and-visualization/course-4-data-cleaning-and-analysis/notebooks_in_html/task-3-transforming-data-with-pandas.html\">Transforming data with pandas</a> on Dataquest.</li>\n<li><strong>pandas official</strong> -- <a href=\"https://pandas.pydata.org/pandas-docs/stable/user_guide/groupby.html\">Group By: split-apply-combine</a></li>\n</ul>\n",
      "date_published": "2019-12-06T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/python-pandas/",
      "url": "https://dinhanhthi.com/python-pandas/",
      "title": "Pandas extra",
      "content_html": "<p>In this note, a general dataframe is called <code>df</code> (type <code>pandas.core.frame.DataFrame</code>), a general series is call <code>s</code> (type <code>pandas.core.series.Series</code>).</p>\n<h2 id=\"import-library\">Import library <a class=\"direct-link\" href=\"#import-library\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd<br><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np <span class=\"token comment\"># import numpy if necessary</span></code></pre>\n<h2 id=\"read%2Fwrite-.csv-file\">Read/Write <code>.csv</code> file <a class=\"direct-link\" href=\"#read%2Fwrite-.csv-file\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># READ</span><br>df <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>read_csv<span class=\"token punctuation\">(</span><span class=\"token string\">'filename.csv'</span><span class=\"token punctuation\">,</span> sep<span class=\"token operator\">=</span><span class=\"token string\">';'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># default sep=','</span><br><br><span class=\"token comment\"># if 1st col contains 0,1,2,...</span><br>df <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>read_csv<span class=\"token punctuation\">(</span><span class=\"token string\">'filename.csv'</span><span class=\"token punctuation\">,</span> index_col<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># with datetime info</span><br>df <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>read_csv<span class=\"token punctuation\">(</span>PATH_DATA_FOLDER<span class=\"token operator\">+</span><span class=\"token string\">\"raw_data.csv\"</span><span class=\"token punctuation\">,</span><br>                  parse_dates<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'timestamp'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><br>                  infer_datetime_format<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span><br>                  cache_dates<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># WRITE</span><br>df<span class=\"token punctuation\">.</span>to_csv<span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">,</span> index<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># don't incldue index</span></code></pre>\n<h2 id=\"create-a-dataframe\">Create a dataframe <a class=\"direct-link\" href=\"#create-a-dataframe\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># FROM A LIST</span><br>pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span>a_list<span class=\"token punctuation\">,</span> colummns<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'col_name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n<div class=\"col-2-flex\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># FROM A DICTIONARY</span><br>names <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'John'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Thi'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Bi'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Beo'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Chang'</span><span class=\"token punctuation\">]</span><br>ages <span class=\"token operator\">=</span>  <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span> <span class=\"token number\">21</span><span class=\"token punctuation\">,</span> <span class=\"token number\">18</span><span class=\"token punctuation\">,</span> <span class=\"token number\">11</span><span class=\"token punctuation\">]</span><br>marks <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">]</span><br>city <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Ben Tre'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Paris'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Ho Chi Minh Ville'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'New York'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'DC'</span><span class=\"token punctuation\">]</span><br><br>my_dict <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'Name'</span><span class=\"token punctuation\">:</span>names<span class=\"token punctuation\">,</span> <span class=\"token string\">'Ages'</span><span class=\"token punctuation\">:</span>ages<span class=\"token punctuation\">,</span> <span class=\"token string\">'Marks'</span><span class=\"token punctuation\">:</span>marks<span class=\"token punctuation\">,</span> <span class=\"token string\">'Place'</span><span class=\"token punctuation\">:</span> city<span class=\"token punctuation\">}</span><br>students <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span>my_dict<span class=\"token punctuation\">)</span></code></pre>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>Name</th>\n<th>Ages</th>\n<th>Marks</th>\n<th>Place</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>0</td>\n<td>John</td>\n<td>10</td>\n<td>8</td>\n<td>Ben Tre</td>\n</tr>\n<tr>\n<td>1</td>\n<td>Thi</td>\n<td>20</td>\n<td>9</td>\n<td>Paris</td>\n</tr>\n<tr>\n<td>2</td>\n<td>Bi</td>\n<td>21</td>\n<td>10</td>\n<td>Ho Chi Minh Ville</td>\n</tr>\n<tr>\n<td>3</td>\n<td>Beo</td>\n<td>18</td>\n<td>6</td>\n<td>New York</td>\n</tr>\n<tr>\n<td>4</td>\n<td>Chang</td>\n<td>11</td>\n<td>8</td>\n<td>DC</td>\n</tr>\n</tbody>\n</table>\n</div>\n<h2 id=\"adding\">Adding <a class=\"direct-link\" href=\"#adding\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># a column</span><br>df<span class=\"token punctuation\">[</span>'new_col<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>new_values<span class=\"token punctuation\">]</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># a row</span><br>df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token string\">'new_index'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>new_value<span class=\"token punctuation\">]</span></code></pre>\n</div>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># add a new col based on another's values</span><br>df_im <span class=\"token operator\">=</span> df0<span class=\"token punctuation\">.</span>copy<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">'col'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><br>df_im<span class=\"token punctuation\">[</span><span class=\"token string\">'status'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> df0<span class=\"token punctuation\">[</span><span class=\"token string\">'col'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> row<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span> <span class=\"token keyword\">if</span> row<span class=\"token operator\">>=</span><span class=\"token number\">80</span> <span class=\"token keyword\">else</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"shuffle-rows\">Shuffle rows <a class=\"direct-link\" href=\"#shuffle-rows\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># shuffle all rows and reset the index</span><br>df_new <span class=\"token operator\">=</span> df<span class=\"token punctuation\">.</span>sample<span class=\"token punctuation\">(</span>frac<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>reset_index<span class=\"token punctuation\">(</span>drop<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"sorting\">Sorting <a class=\"direct-link\" href=\"#sorting\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>sort_values<span class=\"token punctuation\">(</span>by<span class=\"token operator\">=</span><span class=\"token string\">'col1'</span><span class=\"token punctuation\">,</span> ascending<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"select-rows%2Fcolumns%2Fitem(s)\">Select rows/columns/item(s) <a class=\"direct-link\" href=\"#select-rows%2Fcolumns%2Fitem(s)\">#</a></h2>\n<p>👉 <a href=\"https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html\">Indexing and selecting data — pandas 1.1.2 documentation</a></p>\n<h3 id=\"select-single-value\">Select Single value <a class=\"direct-link\" href=\"#select-single-value\">#</a></h3>\n<p><strong>Select a single value</strong> (with condition): Get the mark of <code>Thi</code> (<code>9</code>).</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># interchange `.values[0]` and `.iloc[0]`</span><br>df<span class=\"token punctuation\">[</span>df<span class=\"token punctuation\">.</span>Name<span class=\"token operator\">==</span><span class=\"token string\">'Thi'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>Marks<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><br>df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span>df<span class=\"token punctuation\">.</span>Name<span class=\"token operator\">==</span><span class=\"token string\">'Thi'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Marks'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># with indexes</span><br>df<span class=\"token punctuation\">.</span>iloc<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># row 2, column 3</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># column's name with row's index</span><br>df<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">'Marks'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>iloc<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># column 'Marks', row 2</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># column's index with row's value</span><br>df<span class=\"token punctuation\">[</span>df<span class=\"token punctuation\">.</span>Name<span class=\"token operator\">==</span><span class=\"token string\">'Thi'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>iloc<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># column 3, row of 'Thi'</span></code></pre>\n<h3 id=\"select-integer-rows-and-named-columns\">Select integer rows and named columns <a class=\"direct-link\" href=\"#select-integer-rows-and-named-columns\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'col'</span><span class=\"token punctuation\">]</span></code></pre>\n<h3 id=\"select-columns\">Select columns <a class=\"direct-link\" href=\"#select-columns\">#</a></h3>\n<p><strong>Select a column</strong> (returns a <code>Series</code>)</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># with column's name</span><br>df<span class=\"token punctuation\">[</span><span class=\"token string\">'Name'</span><span class=\"token punctuation\">]</span><br>df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Name'</span><span class=\"token punctuation\">]</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># with an index</span><br>df<span class=\"token punctuation\">.</span>iloc<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span></code></pre>\n</div>\n<p>Returns a <code>pd.DataFrame</code>,</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">'Name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><br>df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># with an index</span><br>df<span class=\"token punctuation\">.</span>iloc<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></code></pre>\n</div>\n<p><strong>Select multi-columns</strong> (type <code>DataFrame</code>): Get columns <code>Name</code> &amp; <code>Place</code>:</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># using columns's names</span><br>df<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">'Name'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Place'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><br>df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Name'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Place'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># using indexes</span><br>df<span class=\"token punctuation\">.</span>iloc<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></code></pre>\n</div>\n<h3 id=\"select-rows\">Select rows <a class=\"direct-link\" href=\"#select-rows\">#</a></h3>\n<p><strong>Select a row</strong> (returns a <code>Series</code>)</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># with an index</span><br>df<span class=\"token punctuation\">.</span>iloc<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># with a condition</span><br>df<span class=\"token punctuation\">[</span>df<span class=\"token punctuation\">[</span><span class=\"token string\">'Name'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token string\">'Thi'</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># DataFrame</span><br>df<span class=\"token punctuation\">[</span>df<span class=\"token punctuation\">[</span><span class=\"token string\">'Name'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">==</span><span class=\"token string\">'Thi'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>iloc<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># Series</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">[</span>df<span class=\"token punctuation\">.</span>Name<span class=\"token operator\">==</span><span class=\"token string\">'Thi'</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># DataFrame</span><br>df<span class=\"token punctuation\">[</span>df<span class=\"token punctuation\">.</span>Name<span class=\"token operator\">==</span><span class=\"token string\">'Thi'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>iloc<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># Series</span><br>df<span class=\"token punctuation\">[</span>df<span class=\"token punctuation\">.</span>Name<span class=\"token operator\">==</span><span class=\"token string\">'Thi'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># ndarray</span></code></pre>\n</div>\n<p><strong>Select multi-rows</strong> (type <code>DataFrame</code>)</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># using indexes</span><br>df<span class=\"token punctuation\">.</span>iloc<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><br>df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># with conditions</span><br>df<span class=\"token punctuation\">[</span>df<span class=\"token punctuation\">[</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>isin<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></code></pre>\n</div>\n<h2 id=\"multiindex\">MultiIndex <a class=\"direct-link\" href=\"#multiindex\">#</a></h2>\n<p>👉 <a href=\"https://pandas.pydata.org/pandas-docs/stable/user_guide/advanced.html\">MultiIndex / advanced indexing — pandas 1.1.2 documentation</a></p>\n<h3 id=\"all-multiindex\">All multiindex <a class=\"direct-link\" href=\"#all-multiindex\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\">arrays <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">'bar'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'bar'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'baz'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'baz'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'foo'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'foo'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'one'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'two'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'one'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'two'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'one'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'two'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><br>index <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>MultiIndex<span class=\"token punctuation\">.</span>from_arrays<span class=\"token punctuation\">(</span>arrays<span class=\"token punctuation\">)</span><br>df <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randn<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> index<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'B'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'C'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> columns<span class=\"token operator\">=</span>index<span class=\"token punctuation\">)</span></code></pre>\n<table>\n  <thead>\n    <tr>\n      <th></th>\n      <th colspan=\"2\" halign=\"left\">bar</th>\n      <th colspan=\"2\" halign=\"left\">baz</th>\n      <th colspan=\"2\" halign=\"left\">foo</th>\n    </tr>\n    <tr>\n      <th></th>\n      <th>one</th>\n      <th>two</th>\n      <th>one</th>\n      <th>two</th>\n      <th>one</th>\n      <th>two</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>A</th>\n      <td>-0.752333</td>\n      <td>0.490581</td>\n      <td>0.774629</td>\n      <td>0.487185</td>\n      <td>1.767773</td>\n      <td>0.028956</td>\n    </tr>\n    <tr>\n      <th>B</th>\n      <td>-0.057864</td>\n      <td>-0.221516</td>\n      <td>-0.568726</td>\n      <td>-0.563732</td>\n      <td>1.362453</td>\n      <td>-0.563213</td>\n    </tr>\n    <tr>\n      <th>C</th>\n      <td>-0.338319</td>\n      <td>-0.346590</td>\n      <td>0.012845</td>\n      <td>0.755455</td>\n      <td>1.260937</td>\n      <td>-0.038209</td>\n    </tr>\n  </tbody>\n</table>\n<p>Selection,</p>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'baz'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'two'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></code></pre>\n<pre><code>0.487185\n</code></pre>\n</div>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token string\">'baz'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'two'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></code></pre>\n<pre><code>A    0.487185\nB   -0.563732\nC    0.755455\nName: (baz, two), dtype: float64\n</code></pre>\n</div>\n<h3 id=\"with-a-single-name-column\">With a single name column <a class=\"direct-link\" href=\"#with-a-single-name-column\">#</a></h3>\n<p>If there are some column with single name,</p>\n<pre class=\"language-python\"><code class=\"language-python\">arrays <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">'bar'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'bar'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'baz'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'baz'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'foo'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'foo'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>i <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><br>index <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>MultiIndex<span class=\"token punctuation\">.</span>from_arrays<span class=\"token punctuation\">(</span>arrays<span class=\"token punctuation\">)</span><br>df1 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randn<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> index<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'B'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'C'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> columns<span class=\"token operator\">=</span>index<span class=\"token punctuation\">)</span></code></pre>\n<h4 id=\"good-practice\">Good practice <a class=\"direct-link\" href=\"#good-practice\">#</a></h4>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># GOOD PRACTICE</span><br>df1<span class=\"token punctuation\">[</span><span class=\"token string\">'time'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><br>df_rs2 <span class=\"token operator\">=</span> df1</code></pre>\n<table class=\"dataframe\">\n  <thead>\n    <tr>\n      <th></th>\n      <th colspan=\"2\" halign=\"left\">bar</th>\n      <th colspan=\"2\" halign=\"left\">baz</th>\n      <th colspan=\"2\" halign=\"left\">foo</th>\n      <th>time</th>\n    </tr>\n    <tr>\n      <th></th>\n      <th>0</th>\n      <th>1</th>\n      <th>0</th>\n      <th>1</th>\n      <th>0</th>\n      <th>1</th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>A</th>\n      <td>-1.386119</td>\n      <td>-0.496755</td>\n      <td>1.482855</td>\n      <td>0.943795</td>\n      <td>-1.173290</td>\n      <td>-0.445365</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>B</th>\n      <td>-0.900710</td>\n      <td>-1.571009</td>\n      <td>1.086964</td>\n      <td>1.546927</td>\n      <td>-1.564426</td>\n      <td>0.622763</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>C</th>\n      <td>0.712231</td>\n      <td>0.235247</td>\n      <td>-0.807031</td>\n      <td>0.671802</td>\n      <td>0.597149</td>\n      <td>0.111332</td>\n      <td>3</td>\n    </tr>\n  </tbody>\n</table>\n<p>Selection,</p>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># FOR GOOD PRACTICE</span><br>df_rs2<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'baz'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><br>df_rs2<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'baz'</span><span class=\"token punctuation\">]</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token number\">0.943795</span><br><span class=\"token number\">0</span>    <span class=\"token number\">1.482855</span><br><span class=\"token number\">1</span>    <span class=\"token number\">0.943795</span></code></pre>\n</div>\n<h4 id=\"bad-practice\">Bad practice <a class=\"direct-link\" href=\"#bad-practice\">#</a></h4>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># BAD PRACTICE</span><br>df2 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> index<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'B'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'C'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> columns<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'time'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br>df_rs1 <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>concat<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>df1<span class=\"token punctuation\">,</span> df2<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code></pre>\n<table class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>(bar, 0)</th>\n      <th>(bar, 1)</th>\n      <th>(baz, 0)</th>\n      <th>(baz, 1)</th>\n      <th>(foo, 0)</th>\n      <th>(foo, 1)</th>\n      <th>time</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>A</th>\n      <td>-1.386119</td>\n      <td>-0.496755</td>\n      <td>1.482855</td>\n      <td>0.943795</td>\n      <td>-1.173290</td>\n      <td>-0.445365</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>B</th>\n      <td>-0.900710</td>\n      <td>-1.571009</td>\n      <td>1.086964</td>\n      <td>1.546927</td>\n      <td>-1.564426</td>\n      <td>0.622763</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>C</th>\n      <td>0.712231</td>\n      <td>0.235247</td>\n      <td>-0.807031</td>\n      <td>0.671802</td>\n      <td>0.597149</td>\n      <td>0.111332</td>\n      <td>3</td>\n    </tr>\n  </tbody>\n</table>\n<p>Selection,</p>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># FOR BAD PRACTICE</span><br>df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token string\">'baz'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><br>df_rs1<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token string\">'baz'</span><span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">(</span>baz, <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>    <span class=\"token number\">0.729023</span><br><span class=\"token punctuation\">(</span>baz, <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>    <span class=\"token number\">1.482855</span><br><span class=\"token punctuation\">(</span>baz, <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>    <span class=\"token number\">0.943795</span></code></pre>\n</div>\n<h3 id=\"rename-multiindex\">Rename multiindex <a class=\"direct-link\" href=\"#rename-multiindex\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># all columns' name at the level 1</span><br>df<span class=\"token punctuation\">.</span>columns<span class=\"token punctuation\">.</span>set_levels<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'b1'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'c1'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'f1'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> level<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> inplace<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"drop-multiindex\">Drop multiindex <a class=\"direct-link\" href=\"#drop-multiindex\">#</a></h3>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>columns <span class=\"token operator\">=</span> df<span class=\"token punctuation\">.</span>columns<span class=\"token punctuation\">.</span>droplevel<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\">   a<br>   b  c         b c<br><span class=\"token number\">0</span>  <span class=\"token number\">1</span>  <span class=\"token number\">2</span>   <span class=\"token operator\">-</span><span class=\"token operator\">></span>  <span class=\"token number\">0</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span><br><span class=\"token number\">1</span>  <span class=\"token number\">3</span>  <span class=\"token number\">4</span>       <span class=\"token number\">1</span> <span class=\"token number\">3</span> <span class=\"token number\">4</span></code></pre>\n</div>\n<h2 id=\"compare-2-dataframes\">Compare 2 dataframes <a class=\"direct-link\" href=\"#compare-2-dataframes\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\">df1<span class=\"token punctuation\">.</span>equals<span class=\"token punctuation\">(</span>df2<span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"true-%2F-false\">True / False <a class=\"direct-link\" href=\"#true-%2F-false\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Invert True/False value in Series</span><br>s <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>Series<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br><span class=\"token operator\">~</span>s</code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Convert True / False to 1 / 0</span><br>df<span class=\"token punctuation\">[</span><span class=\"token string\">'col'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> df<span class=\"token punctuation\">[</span><span class=\"token string\">'col'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>astype<span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\"># int or float</span></code></pre>\n</div>\n",
      "date_published": "2019-12-01T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/js-101/",
      "url": "https://dinhanhthi.com/js-101/",
      "title": "JavaScript 101",
      "content_html": "<p>Quick references for fundamental things in JavaScript.</p>\n<p>👉 Notion note: <a href=\"https://www.notion.so/dinhanhthi/JS-101-986f4079607641d49ca8e149a1d29cec\">JS 101</a>.</p>\n<h2 id=\"miscellaneous\">Miscellaneous <a class=\"direct-link\" href=\"#miscellaneous\">#</a></h2>\n<ul>\n<li>Using <code>//</code> for 1 line comment, <code>/* */</code> for multi-line comment.</li>\n<li>End of each command by <code>;</code>.</li>\n<li>Variables and function name are case sensitive.</li>\n<li>Variables / functions should be named in the form of <code>nameOfVariable</code>.\n<ul>\n<li>Naming a constant: <code>const FAV_PET = 'Cat';</code>.</li>\n<li><code>UpperCamelCase</code> should be used by convention for ES6 class names.</li>\n</ul>\n</li>\n<li>Using <code>\\</code> for special characters, for example, <code>\\&quot;</code> for a <code>&quot;</code> inside a <code>&quot;&quot;</code>.</li>\n<li><code>''</code> can be used inside a <code>&quot;&quot;</code> and vice versa.</li>\n</ul>\n<h2 id=\"practice-directly-on-the-browser\">Practice directly on the browser <a class=\"direct-link\" href=\"#practice-directly-on-the-browser\">#</a></h2>\n<p>Open the browser (I use <a href=\"https://www.google.com/chrome/\">Chrome</a>), press <kbd>F12</kbd> to open the <em><strong>Inspect</strong></em> window, then choose tab <em><strong>Console</strong></em>. Now, you can practice on this console window, for example, try with <code>1+1</code> and press <kbd>Enter</kbd>.</p>\n<h2 id=\"es6\">ES6 <a class=\"direct-link\" href=\"#es6\">#</a></h2>\n<ul>\n<li>&quot;ES&quot; = &quot;ECMAScript&quot; ~ &quot;Javascript&quot;.</li>\n<li>Most of browsers use ES6 but not all.</li>\n<li>ES6 = ES2015</li>\n<li><a href=\"/img/post/js/js_timeline.svg\" target=\"_blank\">JS timeline</a>.</li>\n<li><strong>New features</strong>: <a href=\"https://www.w3schools.com/js/js_arrow_function.asp\">Arrow functions</a>, Classes, Modules, Promises, Generators, <code>let</code> and <code>const</code>.</li>\n<li>Read <a href=\"https://www.w3schools.com/js/js_es6.asp\">more about ES6 on w3schools</a>.</li>\n</ul>\n<h3 id=\"concise-things\">Concise things <a class=\"direct-link\" href=\"#concise-things\">#</a></h3>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Concise Object Literal Declarations</span><br><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getMousePosition</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> x<span class=\"token punctuation\">,</span> y <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Concise Declarative Functions</span><br><span class=\"token keyword\">const</span> person <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><br>  name<span class=\"token operator\">:</span> <span class=\"token string\">\"Taylor\"</span><span class=\"token punctuation\">,</span><br>  <span class=\"token function\">sayHello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Hello! My name is </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<h3 id=\"getters-and-setters\">Getters and setters <a class=\"direct-link\" href=\"#getters-and-setters\">#</a></h3>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Book</span> <span class=\"token punctuation\">{</span><br>  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">author</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_author <span class=\"token operator\">=</span> author<span class=\"token punctuation\">;</span><br>  <span class=\"token punctuation\">}</span><br>  <span class=\"token comment\">// getter</span><br>  <span class=\"token keyword\">get</span> <span class=\"token function\">writer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_author<span class=\"token punctuation\">;</span><br>  <span class=\"token punctuation\">}</span><br>  <span class=\"token comment\">// setter</span><br>  <span class=\"token keyword\">set</span> <span class=\"token function\">writer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">updatedAuthor</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_author <span class=\"token operator\">=</span> updatedAuthor<span class=\"token punctuation\">;</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span><br><span class=\"token keyword\">const</span> lol <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Book</span><span class=\"token punctuation\">(</span><span class=\"token string\">'anonymous'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>lol<span class=\"token punctuation\">.</span>writer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// anonymous</span><br>lol<span class=\"token punctuation\">.</span>writer <span class=\"token operator\">=</span> <span class=\"token string\">'wut'</span><span class=\"token punctuation\">;</span><br>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>lol<span class=\"token punctuation\">.</span>writer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// wut</span></code></pre>\n<h3 id=\"export%2Fimport-to-share-code-blocks\">Export/Import to share code blocks <a class=\"direct-link\" href=\"#export%2Fimport-to-share-code-blocks\">#</a></h3>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// file ./math_funcs.js</span><br><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token keyword\">return</span> x <span class=\"token operator\">+</span> y<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span><br><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">subtract</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token keyword\">return</span> x <span class=\"token operator\">-</span> y<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span><br><span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> add<span class=\"token punctuation\">,</span> subtract <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// can be imported in other scripts</span><br><br><span class=\"token comment\">// file ./math_default.js only has 1 export</span><br><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// without name</span><br>  <span class=\"token keyword\">return</span> x <span class=\"token operator\">+</span> y<span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// main.js</span><br><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>add<span class=\"token punctuation\">,</span> subtract <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./math_funcs.js'</span><span class=\"token punctuation\">;</span><br><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> myMathModule <span class=\"token keyword\">from</span> <span class=\"token string\">\"./math_functions.js\"</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// everything</span><br><br><span class=\"token keyword\">import</span> anything <span class=\"token keyword\">from</span> <span class=\"token string\">'./math_default.js'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// from export default</span></code></pre>\n<h2 id=\"declare-variables-%26-scopes\">Declare variables &amp; Scopes <a class=\"direct-link\" href=\"#declare-variables-%26-scopes\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> varName<span class=\"token punctuation\">;</span> <span class=\"token comment\">// global scope</span><br><span class=\"token keyword\">let</span> varName<span class=\"token punctuation\">;</span> <span class=\"token comment\">// ES6, block scope (inside {} or function,...)</span><br><span class=\"token keyword\">const</span> varName<span class=\"token punctuation\">;</span> <span class=\"token comment\">// ES6, can't be changed</span></code></pre>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">funcName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><br>  oopsGlobal <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// without `var`, it's a global variable</span><br><span class=\"token punctuation\">}</span><br>oppsGlobal<span class=\"token punctuation\">;</span> <span class=\"token comment\">// returns 5</span></code></pre>\n</div>\n<p>Difference between <code>var</code>, <code>let</code> and <code>const</code>,</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span><br><span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ok, a=2 now</span><br>a <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// a=5 now</span></code></pre>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> c <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span><br><span class=\"token keyword\">let</span> c <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// error</span><br>c <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// c=3 now</span></code></pre>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> b <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span><br><span class=\"token keyword\">const</span> b <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// error</span><br>b <span class=\"token operator\">=</span> <span class=\"token number\">2</span> <span class=\"token comment\">// error</span></code></pre>\n</div>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> s <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><br>s <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// error</span><br>s<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// OK</span></code></pre>\n<h2 id=\"output\">Output <a class=\"direct-link\" href=\"#output\">#</a></h2>\n<pre class=\"language-js\"><code class=\"language-js\">myName <span class=\"token operator\">=</span> <span class=\"token string\">\"Thi\"</span><br>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"I'm \"</span> <span class=\"token operator\">+</span> myName <span class=\"token operator\">+</span> <span class=\"token string\">\".\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">I'm </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>myName<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ES6</span></code></pre>\n<h2 id=\"basic-operators\">Basic operators <a class=\"direct-link\" href=\"#basic-operators\">#</a></h2>\n<p>Check <a href=\"https://www.w3schools.com/jsref/jsref_operators.asp\">more operators</a> &amp; <a href=\"https://www.w3schools.com/jsref/jsref_obj_math.asp\">more operators with <code>Math</code></a>.</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-js\"><code class=\"language-js\">i <span class=\"token operator\">=</span> i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// i++; // i += 1;</span><br>i <span class=\"token operator\">=</span> i <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// i--; // i -= 1;</span><br>i <span class=\"token operator\">=</span> i <span class=\"token operator\">*</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// i *= 3;</span><br>i <span class=\"token operator\">=</span> i <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// i /= 2;</span><br><br><span class=\"token number\">11</span> <span class=\"token operator\">%</span> <span class=\"token number\">3</span> <span class=\"token comment\">// = 2, remainder</span></code></pre>\n<pre class=\"language-js\"><code class=\"language-js\">Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// give a random number between 0 and 1</span><br>Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// round to its nearest whole number</span><br><br><span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"007a\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// give number 7</span><br><span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"11\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// give number 3, \"2\" is radix</span></code></pre>\n</div>\n<h2 id=\"conditional-statements-if-%2F-switch\">Conditional statements <code>if</code> / <code>switch</code> <a class=\"direct-link\" href=\"#conditional-statements-if-%2F-switch\">#</a></h2>\n<ul>\n<li><strong>Comparison Operators</strong>: <code>&lt;</code>, <code>==</code>, <code>===</code> (strict equality), <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;=</code>, <code>!=</code>, <code>!==</code> (strict inequality).\n<ul>\n<li>Difference between <code>==</code> and <code>===</code>: <code>3=='3'</code> (true), <code>3==='3'</code> (false).</li>\n<li>Difference between <code>!=</code> and <code>!==</code>: <code>3!='3'</code> (false), <code>3!=='3'</code> (true).</li>\n</ul>\n</li>\n<li><strong>Logical operators</strong>: <code>&amp;&amp;</code>, <code>||</code>, <code>!</code>.</li>\n<li><strong>Short-circuit evaluation</strong>: <code>let a = b || 'Thi';</code> (if <code>b</code> isn't defined yet, <code>a</code> takes value <code>'Thi'</code>)</li>\n<li><strong>Ternary Operator</strong>: <code>isNightTime ? console.log('Yes!') : console.log('No!');</code>. We can use multiple nested ternary.</li>\n</ul>\n<div class=\"col-2-equal\">\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><br>  <span class=\"token comment\">// commands</span><br><span class=\"token punctuation\">}</span><br><br><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><br>  <span class=\"token comment\">// commands</span><br><span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><br>  <span class=\"token comment\">// commands</span><br><span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span><br>  <span class=\"token comment\">// commands</span><br><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> <span class=\"token keyword\">var</span> <span class=\"token operator\">=</span> <span class=\"token string\">'papaya'</span><span class=\"token punctuation\">;</span><br><span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>  <span class=\"token keyword\">case</span> <span class=\"token string\">'val1'</span><span class=\"token operator\">:</span><br>    <span class=\"token comment\">// commands</span><br>    <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span><br>  <span class=\"token keyword\">case</span> <span class=\"token string\">'val2'</span><span class=\"token operator\">:</span><br>    <span class=\"token comment\">// commands</span><br>    <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span><br>  <span class=\"token keyword\">default</span><span class=\"token operator\">:</span><br>    <span class=\"token comment\">// commands</span><br>    <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre>\n</div>\n<p>You can remove <code>break;</code> to apply the same result for multiple cases.</p>\n<h2 id=\"functions\">Functions <a class=\"direct-link\" href=\"#functions\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// ES6 way</span><br><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">rectangleArea</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">width<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">=</span><span class=\"token number\">5</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>  <span class=\"token keyword\">let</span> area <span class=\"token operator\">=</span> width <span class=\"token operator\">*</span> height<span class=\"token punctuation\">;</span><br>  <span class=\"token keyword\">return</span> area<span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// if there is no parameter</span><br><span class=\"token keyword\">const</span> <span class=\"token operator\">&lt;</span>func<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span><br><br><span class=\"token comment\">// if there is only one parameter</span><br><span class=\"token keyword\">const</span> <span class=\"token operator\">&lt;</span>func<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>para<span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span><br><br><span class=\"token comment\">// single line: no need \"{}\"</span><br><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">sumNumbers</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">number</span> <span class=\"token operator\">=></span> number <span class=\"token operator\">+</span> number<span class=\"token punctuation\">;</span></code></pre>\n</div>\n<p>Older ways (ES5),</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token operator\">&lt;</span>funcName<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>para<span class=\"token operator\">></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><br>  <span class=\"token comment\">// commands</span><br><span class=\"token punctuation\">}</span></code></pre>\n<div class=\"col-2-equal\">\n<div>\n<p>Rest parameter (ES6)</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">last_element</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token operator\">...</span>args</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>  <span class=\"token keyword\">return</span> args<span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span><br><span class=\"token function\">last_element</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 3</span></code></pre>\n</div>\n<div>\n<p>Spread Operator (ES6)</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">89</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">45</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><br><span class=\"token keyword\">const</span> maximus <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 89</span></code></pre>\n</div>\n</div>\n<h2 id=\"strings\">Strings <a class=\"direct-link\" href=\"#strings\">#</a></h2>\n<p>Check <a href=\"https://www.w3schools.com/jsref/jsref_obj_string.asp\">more methods</a>.</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token string\">'Anh-Thi'</span> <span class=\"token operator\">+</span> <span class=\"token string\">'Dinh'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// plus the strings</span><br>a<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> <span class=\"token comment\">// length of the string</span><br>a<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// first letter of the string</span><br>a<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 4th letter</span><br>a<span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// last letter</span><br><br>a<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">'D'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// !!! CAN'T change an individual word</span></code></pre>\n<p><strong>Special characters</strong>: <code>\\'</code> (single quote), <code>\\&quot;</code> (double quote), <code>\\\\</code>(backslash), <code>\\n</code> (newline), <code>\\r</code> (carriage return), <code>\\t</code> (tab), <code>\\b</code> (word boundary), <code>\\f</code> (form feed).</p>\n<h2 id=\"arrays\">Arrays <a class=\"direct-link\" href=\"#arrays\">#</a></h2>\n<p>Check <a href=\"https://www.w3schools.com/jsref/jsref_obj_array.asp\">more methods</a>.</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> arrName <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><br><span class=\"token keyword\">var</span> nestedArr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><br><br>arrName<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 1st element is changed (different from string!)</span><br>nestedArr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// gives [3, 4]</span><br><br>arrName<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// add 5 at the END of an array</span><br>arrName<span class=\"token punctuation\">.</span><span class=\"token function\">unshift</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// add 6 at the BEGINNING of an array</span><br><br>popedElement <span class=\"token operator\">=</span> arrName<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// remove the LAST element of an array</span><br>shiftedElement <span class=\"token operator\">=</span> arrName<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// remove the FIRST element of an array</span></code></pre>\n<h2 id=\"objects\">Objects <a class=\"direct-link\" href=\"#objects\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> myObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><br>  top<span class=\"token operator\">:</span> <span class=\"token string\">\"hat\"</span><span class=\"token punctuation\">,</span><br>  <span class=\"token string\">\"bottom\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pants\"</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span><br><br><span class=\"token comment\">// CHECK PROPERTIES</span><br>myObj<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"top\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    <span class=\"token comment\">// true</span><br>myObj<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"middle\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span></code></pre>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Accessing Object Properties</span><br>myObj<span class=\"token punctuation\">.</span>top<span class=\"token punctuation\">;</span> <span class=\"token comment\">// dot</span><br>myObj<span class=\"token punctuation\">[</span><span class=\"token string\">\"bottom\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// bracket</span><br><br><span class=\"token keyword\">var</span> pos <span class=\"token operator\">=</span> <span class=\"token string\">\"top\"</span><span class=\"token punctuation\">;</span><br>myObj<span class=\"token punctuation\">[</span>pos<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// via a variable</span></code></pre>\n</div>\n<pre class=\"language-js\"><code class=\"language-js\">myObj<span class=\"token punctuation\">.</span>top <span class=\"token operator\">=</span> <span class=\"token string\">\"T-shirt\"</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Update object properties</span><br>myObj<span class=\"token punctuation\">.</span>middle <span class=\"token operator\">=</span> <span class=\"token string\">\"New shoe\"</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Add new properties</span><br><span class=\"token keyword\">delete</span> myObj<span class=\"token punctuation\">.</span>middle<span class=\"token punctuation\">;</span> <span class=\"token comment\">// Delete a property</span></code></pre>\n<p>We can use object for lookups instead of using <code>if..else</code> or <code>switch</code>,</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> alpha <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token operator\">:</span><span class=\"token string\">\"A\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token operator\">:</span><span class=\"token string\">\"B\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token operator\">:</span><span class=\"token string\">\"C\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span><br>value <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span><br>alpha<span class=\"token punctuation\">[</span>value<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// instead of using if value==2 or switch value...</span></code></pre>\n<p>We can create a <strong>nested object</strong> inside an object.</p>\n<p>Prevent object mutation,</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><br>  name<span class=\"token operator\">:</span><span class=\"token string\">\"FreeCodeCamp\"</span><span class=\"token punctuation\">,</span><br>  review<span class=\"token operator\">:</span><span class=\"token string\">\"Awesome\"</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span><br>Object<span class=\"token punctuation\">.</span><span class=\"token function\">freeze</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// obj can't be changed</span></code></pre>\n<h2 id=\"destructuring-assignment-(es6)\">Destructuring Assignment (ES6) <a class=\"direct-link\" href=\"#destructuring-assignment-(es6)\">#</a></h2>\n<p>Extract values from object,</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>name<span class=\"token operator\">:</span> <span class=\"token string\">\"Thi\"</span><span class=\"token punctuation\">,</span> age<span class=\"token operator\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span><br><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> user<span class=\"token punctuation\">;</span> <span class=\"token comment\">// name=\"Thi\", age=30</span></code></pre>\n<p>Assign variable from object,</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>name<span class=\"token operator\">:</span> uName<span class=\"token punctuation\">,</span> age<span class=\"token operator\">:</span> uAge<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> user<span class=\"token punctuation\">;</span> <span class=\"token comment\">// uName=\"Thi\", uAge=30</span></code></pre>\n<p>Assign Variables from Nested Objects,</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><br>  anhThi<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>    age<span class=\"token operator\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span><br>    email<span class=\"token operator\">:</span> <span class=\"token string\">'dinhanhthi@gmail.com'</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span><br><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>anhThi<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>age<span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> user<span class=\"token punctuation\">;</span><br><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>anhThi<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>age<span class=\"token operator\">:</span> userAge<span class=\"token punctuation\">,</span> email<span class=\"token operator\">:</span> userEmail<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> user<span class=\"token punctuation\">;</span></code></pre>\n<p>Assign Variables from Arrays,</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><br>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 1, 2</span></code></pre>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><br>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 1, 2, 5</span></code></pre>\n</div>\n<p>Assignment with the Rest Parameter to Reassign Array Elements,</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>arr<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><br>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 1, 2</span><br>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [3, 4, 5, 7]</span></code></pre>\n<p>Pass an Object as a Function's Parameters,</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">profileUpdate</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">,</span> nationality<span class=\"token punctuation\">,</span> location <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>  <span class=\"token comment\">// do something with these fields</span><br><span class=\"token punctuation\">}</span></code></pre>\n<h2 id=\"json\">JSON <a class=\"direct-link\" href=\"#json\">#</a></h2>\n<p><strong>JavaScript Object Notation</strong> or JSON is a related data interchange format used to store data,</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> ourMusic <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><br>  <span class=\"token punctuation\">{</span><br>    <span class=\"token string\">\"artist\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Daft Punk\"</span><span class=\"token punctuation\">,</span><br>    <span class=\"token string\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Homework\"</span><span class=\"token punctuation\">,</span><br>    <span class=\"token string\">\"release_year\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1997</span><span class=\"token punctuation\">,</span><br>    <span class=\"token string\">\"formats\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><br>      <span class=\"token string\">\"CD\"</span><span class=\"token punctuation\">,</span><br>      <span class=\"token string\">\"Cassette\"</span><span class=\"token punctuation\">,</span><br>      <span class=\"token string\">\"LP\"</span><br>    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><br>    <span class=\"token string\">\"gold\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><br>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// first artist</span><br>  <span class=\"token punctuation\">{</span><br>  <span class=\"token operator\">...</span><br>  <span class=\"token punctuation\">}</span> <span class=\"token comment\">// second artist</span><br><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre>\n<p>To access <code>&quot;CD&quot;</code>: <code>ourMusic[0].formats[0]</code>.</p>\n<h2 id=\"iterate-with-while-%2F-for-%2F-do..while-loops\">Iterate with <code>while</code> / <code>for</code> / <code>do..while</code> loops <a class=\"direct-link\" href=\"#iterate-with-while-%2F-for-%2F-do..while-loops\">#</a></h2>\n<p>Check <a href=\"https://www.w3schools.com/jsref/jsref_statements.asp\">more statements</a>.</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>conditions<span class=\"token operator\">></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><br>  <span class=\"token comment\">// commands</span><br><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">do</span><span class=\"token punctuation\">{</span><br>  <span class=\"token comment\">// commands</span><br><span class=\"token punctuation\">}</span> <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>conditions<span class=\"token operator\">></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;</span><span class=\"token number\">5</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><br>  <span class=\"token comment\">// commands</span><br><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Iterate odd numbers</span><br><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;</span><span class=\"token number\">5</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">+=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><br>  <span class=\"token comment\">// commands</span><br><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Count backwards</span><br><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">?</span><span class=\"token number\">5</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">-=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span><br>  <span class=\"token comment\">// commands</span><br><span class=\"token punctuation\">}</span></code></pre>\n</div>\n<h2 id=\"references\">References <a class=\"direct-link\" href=\"#references\">#</a></h2>\n<ul>\n<li><strong>freeCodeCamp</strong> -- <a href=\"https://www.freecodecamp.org/learn\">JavaScript Algorithms and Data Structures Certification</a> (300 hours).</li>\n<li><strong>w3schools</strong> -- <a href=\"https://www.w3schools.com/js/default.asp\">JavaScript Tutorial</a>.</li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#Event_bubbling_and_capture\">Event bubbling and capture</a></li>\n</ul>\n",
      "date_published": "2019-11-11T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/k-means-clustering/",
      "url": "https://dinhanhthi.com/k-means-clustering/",
      "title": "K-Means &amp; K-Medoids Clustering",
      "content_html": "<p>K-Means is <mark>the most popular clustering method</mark> any learner should know. In this note, we will understand the idea of KMeans and how to use it with Scikit-learn. Besides that, we also learn about its variants (K-medois, K-modes, K-medians).</p>\n<p>👉 <a href=\"/metrics-for-clustering/\">Metrics for clustering methods</a>.</p>\n<h2 id=\"k-means\">K-Means <a class=\"direct-link\" href=\"#k-means\">#</a></h2>\n<h3 id=\"idea%3F\">Idea? <a class=\"direct-link\" href=\"#idea%3F\">#</a></h3>\n<ol>\n<li>Randomly choose centroids (<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span>).</li>\n<li>Go through each example and assign them to the nearest centroid (assign class of that centroid).</li>\n<li>Move each centroid (of each class) to the average of data points having the same class with the centroid.</li>\n<li>Repeat 2 and 3 until convergence.</li>\n</ol>\n<p><img src=\"/img/post/ML/clustering/kmeans-idea.png\" alt=\"KMeans idea\" class=\"img-100\"><br>\n<em>A simply basic steps of K-Means.</em></p>\n<p><img src=\"/img/post/ML/clustering/K-means_convergence.gif\" alt=\"KMeans idea\" class=\"img-50\"><br>\n<em>A gif illustrating the idea of K-Means algorithm. <a href=\"https://en.wikipedia.org/wiki/K-means_clustering#/media/File:K-means_convergence.gif\">Source</a>.</em></p>\n<h3 id=\"how-to-choose-k%3F\">How to choose k? <a class=\"direct-link\" href=\"#how-to-choose-k%3F\">#</a></h3>\n<p>Using &quot;Elbow&quot; method to choose the number of clusters <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span>.</p>\n<p><img src=\"/img/post/ML/clustering/kmeans-elbow.png\" alt=\"KMeans idea\" class=\"img-full-50\"></p>\n<h3 id=\"discussion\">Discussion <a class=\"direct-link\" href=\"#discussion\">#</a></h3>\n<ul>\n<li>A type of <strong>Partitioning clustering</strong>.</li>\n<li><mark>K-means is sensitive to outliers</mark> ⇒ <strong>K-medoids</strong> clustering or <strong>PAM</strong> (Partitioning Around Medoids) is less sensitive to outliers<sup><a href=\"https://www.datanovia.com/en/blog/types-of-clustering-methods-overview-and-quick-start-r-code\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></li>\n</ul>\n<h3 id=\"k-means-in-code\">K-Means in code <a class=\"direct-link\" href=\"#k-means-in-code\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>cluster <span class=\"token keyword\">import</span> KMeans<br>kmeans <span class=\"token operator\">=</span> KMeans<span class=\"token punctuation\">(</span>n_clusters<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> random_state<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># default k=8</span></code></pre>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\">kmeans<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">)</span><br>kmeans<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># or</span><br>kmeans<span class=\"token punctuation\">.</span>fit_predict<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">)</span></code></pre>\n</div>\n<p>Some notable parameters (see <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.cluster.KMeans.html\">full</a>):</p>\n<p class=\"indent\"></p>\n<ul>\n<li><code>max_iter</code>: Maximum number of iterations of the k-means algorithm for a single run.</li>\n<li><code>kmeans.labels_</code>: show labels of each point.</li>\n<li><code>kmeans.cluster_centers_ </code>: cluster centroids.</li>\n</ul>\n<h3 id=\"k-means-in-action\">K-Means in action <a class=\"direct-link\" href=\"#k-means-in-action\">#</a></h3>\n<ul>\n<li>K-Means clustering on the handwritten digits data.</li>\n<li>Image compression using <a href=\"/k-means-clustering\">K-Means</a> -- <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/data-science-learning/blob/master/projects/mini-projects/notebook_in_html/K_Means_image_compression.html\">Open in HTML</a> -- <a href=\"https://colab.research.google.com/github/dinhanhthi/data-science-learning/blob/master/projects/mini-projects/K_Means_image_compression.ipynb\">Open in Colab</a>.</li>\n</ul>\n<h2 id=\"k-medoids-clustering\">K-medoids clustering <a class=\"direct-link\" href=\"#k-medoids-clustering\">#</a></h2>\n<ul>\n<li><strong>Advantages</strong>:<sup><a href=\"https://www.geeksforgeeks.org/ml-k-medoids-clustering-with-example/\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup>\n<ul>\n<li>It is simple to understand and easy to implement.</li>\n<li>K-Medoid Algorithm is <mark>fast</mark> and converges in a fixed number of steps.</li>\n<li>PAM is <mark>less sensitive to outliers</mark> than other partitioning algorithms.</li>\n</ul>\n</li>\n<li><strong>Disavdvantages</strong>:<sup><a href=\"https://www.geeksforgeeks.org/ml-k-medoids-clustering-with-example/\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup>\n<ul>\n<li>The main disadvantage of K-Medoid algorithms is that it is <mark>not suitable for clustering non-spherical</mark> (arbitrary shaped) groups of objects. This is because it relies on minimizing the distances between the non-medoid objects and the medoid (the cluster centre) – briefly, <mark>it uses compactness as clustering criteria instead of connectivity</mark>.</li>\n<li>It may obtain different results for different runs on the same dataset because the first k medoids are chosen randomly.</li>\n</ul>\n</li>\n<li><strong>Different from K-Means</strong>:\n<ul>\n<li><em>K-Means</em>:\n<ul>\n<li>Final centers no need to be points in data.</li>\n<li>Measure generally requires Euclidean distance.</li>\n<li>Sensitive to outliers.</li>\n</ul>\n</li>\n<li><em>K-Medoids</em>:\n<ul>\n<li>Final Centers is actual points in data. They're called <em>medoids</em> or <em>exemplars</em>.</li>\n<li>Measures can be arbitrarily dissimilar.</li>\n<li><mark>Robust to outliers.</mark></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><strong>The idea</strong>:</p>\n<ol>\n<li>(Like KMeans'): choose randomly points (no need to be a point in data)</li>\n<li>(Like KMeans'): assign labels to points based on chosen points in step 1.</li>\n<li>(Different from KMeans):</li>\n<li>(Like KMeans'): repeat the steps.</li>\n</ol>\n<h2 id=\"choose-k-by-silhouette\">Choose k by Silhouette <a class=\"direct-link\" href=\"#choose-k-by-silhouette\">#</a></h2>\n<p>It's <a href=\"https://towardsdatascience.com/silhouette-method-better-than-elbow-method-to-find-optimal-clusters-378d62ff6891\">better than Elbow method</a> to choose the number of clusters <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span>.</p>\n<p>👉 Check <a href=\"/metrics-for-clustering/#silhouette-analysis\">this note</a>.</p>\n<h2 id=\"references\">References <a class=\"direct-link\" href=\"#references\">#</a></h2>\n<ul>\n<li><strong>Luis Serrano</strong> -- [Video] <a href=\"https://www.youtube.com/watch?v=QXOkPvFM6NU\">Clustering: K-means and Hierarchical</a>.</li>\n<li><strong>Andrew NG.</strong> -- <a href=\"https://rawnote.dinhanhthi.com//machine-learning-coursera-8#k-means-algorithm\">My raw note</a> of the course <a href=\"https://www.coursera.org/learn/machine-learning/\">&quot;Machine Learning&quot; on Coursera</a>.</li>\n</ul>\n",
      "date_published": "2019-11-03T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/small-projects-to-understand-concepts/",
      "url": "https://dinhanhthi.com/small-projects-to-understand-concepts/",
      "title": "Small projects for understanding concepts",
      "content_html": "<div class=\"success\">\n<p>This note will always be updated.</p>\n</div>\n<p>🔅 <strong>Image compression using <a href=\"/k-means-clustering\">K-Means</a></strong> -- <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/data-science-learning/blob/master/projects/mini-projects/notebook_in_html/K_Means_image_compression.html\">Open in HTML</a> -- <a href=\"https://colab.research.google.com/github/dinhanhthi/data-science-learning/blob/master/projects/mini-projects/K_Means_image_compression.ipynb\">Open in Colab</a>.</p>\n<ul>\n<li>Load and write an image from/to Google Drive.</li>\n<li>Change the image's size from <code>(height, weight, channels)</code> to <code>(height x weight, channels)</code></li>\n<li>Reduce the image's quality using smaller number of clusters.</li>\n</ul>\n<p>🔅 <strong>Example to understand the idea of <a href=\"/principal-component-analysis\">PCA</a></strong> -- <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/data-science-learning/blob/master/projects/mini-projects/notebook_in_html/PCA_understanding_example.html\">Open in HTML</a> -- <a href=\"https://colab.research.google.com/dinhanhthi/data-science-learning/blob/master/projects/mini-projects/PCA_understanding_example.ipynb\">Open in Colab</a>.</p>\n<ul>\n<li>Plot points with 2 lines which are corresponding to 2 eigenvectors.</li>\n<li>Plot &amp; choose Principal Components.</li>\n<li>An example of choosing <code>n_components</code> <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span></span>.</li>\n<li>Visualization hand-written digits (the case of all digits and the case of only 2 digits -- 1 &amp; 8).</li>\n<li>Using <a href=\"/support-vector-machine\">SVM</a> to classifier data in the case of 1 &amp; 8 and visualize the decision boundaries.</li>\n</ul>\n<p>🔅 <strong>Image compression using <a href=\"/principal-component-analysis\">PCA</a></strong> -- <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/data-science-learning/blob/master/projects/mini-projects/notebook_in_html/PCA-image-compression.html\">Open in HTML</a> -- <a href=\"https://colab.research.google.com/dinhanhthi/data-science-learning/blob/master/projects/mini-projects/PCA-image-compression.ipynb\">Open in Colab</a>.</p>\n<ul>\n<li>When input is an image, the values of adjacent pixels are <em>highly correlated</em>.</li>\n<li>Import images from <code>scipy</code> and Google Drive or Github (with <code>git</code>).</li>\n<li>Compress grayscale images and colored ones.</li>\n<li>Plot a grayscale version of a colorful images.</li>\n<li>Save output to file (Google Drive).</li>\n<li>Fix warning <em>Lossy conversion from float64 to uint8. Range [...,...]. Convert image to uint8 prior to saving to suppress this warning.</em></li>\n<li>Fix warning <em>Clipping input data to the valid range for imshow with RGB data ([0..1] for floats or [0..255] for integers)</em>.</li>\n<li>Calculate a size (in <code>KB</code>) of a image file.</li>\n</ul>\n<p>🔅 <strong><a href=\"/principal-component-analysis\">PCA</a> without scikit-learn</strong> -- <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/data-science-learning/blob/master/projects/mini-projects/notebook_in_html/PCA_without_scikit_learn.html\">Open in HTML</a> -- <a href=\"https://colab.research.google.com/dinhanhthi/data-science-learning/blob/master/projects/mini-projects/PCA_without_scikit_learn.ipynb\">Open in Colab</a>.</p>\n<p>🔅 <strong>Face Recognition using <a href=\"/support-vector-machine\">SVM</a></strong> -- <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/data-science-learning/blob/master/projects/mini-projects/notebook_in_html/SVM-face-recognition.html\">Open in HTML</a> -- <a href=\"https://colab.research.google.com/dinhanhthi/data-science-learning/blob/master/projects/mini-projects/SVM-face-recognition.ipynb\">Open in Colab</a>.</p>\n<ul>\n<li>Using PCA to extract 150 fundamental components to feed into our SVG classifier.</li>\n<li>Grid search cross-validation to explore combinations of parameters (<code>gamma</code> and <code>C</code>).</li>\n<li>Classification report: precision, recall, f1-score, support.</li>\n<li>Confusion matrix.</li>\n<li>An example of using <code>pipeline</code>.</li>\n</ul>\n<p>🔅 <strong>XOR problem using <a href=\"/support-vector-machine\">SVM</a></strong> to see the effect of <code>gamma</code> and <code>C</code> in the case of using RBF kernel -- <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/data-science-learning/blob/master/projects/mini-projects/notebook_in_html/SVM-XOR-RBF-kernel-parameters.html\">Open in HTML</a> -- <a href=\"https://colab.research.google.com/dinhanhthi/data-science-learning/blob/master/projects/mini-projects/SVM-XOR-RBF-kernel-parameters.ipynb\">Open in Colab</a>.</p>\n",
      "date_published": "2019-10-30T23:00:00Z"
    },{
      "id": "https://dinhanhthi.com/python-numpy-tips/",
      "url": "https://dinhanhthi.com/python-numpy-tips/",
      "title": "Numpy extra",
      "content_html": "<h2 id=\"import-library\">Import library <a class=\"direct-link\" href=\"#import-library\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</code></pre>\n<h2 id=\"checking\">Checking <a class=\"direct-link\" href=\"#checking\">#</a></h2>\n<h3 id=\"isinstance\">Isinstance <a class=\"direct-link\" href=\"#isinstance\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Check if an object is an instance numpy array?</span><br><span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>MyObect<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>__module__ <span class=\"token operator\">==</span> np<span class=\"token punctuation\">.</span>__name__</code></pre>\n<h3 id=\"comparing\">Comparing <a class=\"direct-link\" href=\"#comparing\">#</a></h3>\n<p>Compare 2 dicts of multiple objects:</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># 2 dicts of multiple objects</span><br><span class=\"token keyword\">def</span> <span class=\"token function\">_compare_two_dict</span><span class=\"token punctuation\">(</span>dct_1<span class=\"token punctuation\">,</span> dct_2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">return</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> key<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>dct_1<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> dct_2<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>       <span class=\"token keyword\">if</span> <span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>dct_1<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>__module__ <span class=\"token operator\">==</span> np<span class=\"token punctuation\">.</span>__name__<br>       <span class=\"token keyword\">else</span> dct_1<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> dct2<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><br>       <span class=\"token keyword\">for</span> key <span class=\"token keyword\">in</span> dct_1<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># 2 numpy arrays containing `np.nan`</span><br><span class=\"token keyword\">def</span> <span class=\"token function\">nan_equal</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span><br>        np<span class=\"token punctuation\">.</span>testing<span class=\"token punctuation\">.</span>assert_equal<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span>b<span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">except</span> AssertionError<span class=\"token punctuation\">:</span><br>        <span class=\"token keyword\">return</span> <span class=\"token boolean\">False</span><br>    <span class=\"token keyword\">return</span> <span class=\"token boolean\">True</span><br><br><span class=\"token comment\"># if using in a pytest</span><br><span class=\"token comment\"># instead of `assert np.testing`,</span><br><span class=\"token comment\"># just use</span><br>np<span class=\"token punctuation\">.</span>testing<span class=\"token punctuation\">.</span>assert_equal<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span>b<span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"count-0%2C-nans\">Count 0, NaNs <a class=\"direct-link\" href=\"#count-0%2C-nans\">#</a></h3>\n<div class=\"code-2cols\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># count nans</span><br>arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>nan<span class=\"token punctuation\">,</span>np<span class=\"token punctuation\">.</span>nan<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><br>np<span class=\"token punctuation\">.</span>isnan<span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 2</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># count non-nans</span><br>arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>nan<span class=\"token punctuation\">,</span>np<span class=\"token punctuation\">.</span>nan<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><br>np<span class=\"token punctuation\">.</span>count_nonzero<span class=\"token punctuation\">(</span><span class=\"token operator\">~</span>np<span class=\"token punctuation\">.</span>isnan<span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 7</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># count non-zeros</span><br>arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>nan<span class=\"token punctuation\">,</span>np<span class=\"token punctuation\">.</span>nan<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><br>np<span class=\"token punctuation\">.</span>count_nonzero<span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">)</span> <span class=\"token comment\"># 6</span></code></pre>\n</div>\n<h2 id=\"creating\">Creating <a class=\"direct-link\" href=\"#creating\">#</a></h2>\n<h3 id=\"random-numbers\">Random numbers <a class=\"direct-link\" href=\"#random-numbers\">#</a></h3>\n<div class=\"code-2cols\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># random int between 0, 5</span><br>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randint<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># random int between [1, 100]</span><br>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randint<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># random array of int between 1, 5</span><br>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randint<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span>size<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># random array of int between 0, 3</span><br>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randint<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span>size<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># random float number between [0, 1)</span><br>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># random float number between [a, b)</span><br><span class=\"token punctuation\">(</span>b <span class=\"token operator\">-</span> a<span class=\"token punctuation\">)</span><span class=\"token operator\">*</span>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> a</code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># array of random between [0, 1)</span><br>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>random_sample<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># size: 5x1</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># array of random between (a, b)</span><br><span class=\"token punctuation\">(</span>b <span class=\"token operator\">-</span> a<span class=\"token punctuation\">)</span><span class=\"token operator\">*</span>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>random_sample<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> a</code></pre>\n</div>\n<h3 id=\"equal-size\">Equal size <a class=\"direct-link\" href=\"#equal-size\">#</a></h3>\n<p>Create <strong>evenly spaced numbers</strong> over a specified interval<sup><a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.linspace.html\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<pre class=\"language-python\"><code class=\"language-python\">x <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>linspace<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3.5</span><span class=\"token punctuation\">,</span> num<span class=\"token operator\">=</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># default num = 50</span></code></pre>\n<p>Range of int numbers</p>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\">np<span class=\"token punctuation\">.</span>arange<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><br>np<span class=\"token punctuation\">.</span>arange<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">31</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span></code></pre>\n<pre><code>array([0, 1, 2, 3, 4])\narray([ 0,  5, 10, 15, 20, 25, 30])\n</code></pre>\n</div>\n<h3 id=\"indexes-and-values-in-other-arrays\">Indexes and values in other arrays <a class=\"direct-link\" href=\"#indexes-and-values-in-other-arrays\">#</a></h3>\n<p>Create an array from nested arrays. Values in <code>array_2</code> are indexes in <code>array_1</code> and we create a new array take values in <code>array_1</code> which is corresponding to its indexes showed in <code>array_2</code>.</p>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">array_1 <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br>array_2 <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># indexes in array_1</span><br>array_3 <span class=\"token operator\">=</span> array_1<span class=\"token punctuation\">[</span>array_2<span class=\"token punctuation\">]</span><br><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>array_1<span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>array_2<span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>array_3<span class=\"token punctuation\">)</span></code></pre>\n<pre><code>[[0 0 0]\n [1 1 1]\n [2 2 2]]\n\n[1 0 2 1 0]\n\n[[1 1 1]\n [0 0 0]\n [2 2 2]\n [1 1 1]\n [0 0 0]]\n</code></pre>\n</div>\n<h3 id=\"array-of-nan-values\">Array of NaN values <a class=\"direct-link\" href=\"#array-of-nan-values\">#</a></h3>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># single array</span><br>np<span class=\"token punctuation\">.</span>repeat<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>nan<span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># multi dimensional arrays</span><br>a <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>empty<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>a<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>nan<br><span class=\"token comment\"># other way</span><br>np<span class=\"token punctuation\">.</span>repeat<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>np<span class=\"token punctuation\">.</span>repeat<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>nan<span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> axis<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></code></pre>\n<pre><code>array([nan, nan, nan, nan, nan])\n\narray([[nan, nan, nan],\n       [nan, nan, nan]])\n</code></pre>\n</div>\n<h3 id=\"repeated-values\">Repeated values <a class=\"direct-link\" href=\"#repeated-values\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\">np<span class=\"token punctuation\">.</span>full<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">50</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 5x1 of 5</span></code></pre>\n<h2 id=\"deleting\">Deleting <a class=\"direct-link\" href=\"#deleting\">#</a></h2>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># DELETE BY POSITIONS</span><br>arr <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>arange<span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><br>np<span class=\"token punctuation\">.</span>delete<span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n<pre><code>array([0, 1, 2, 3, 4, 5])\narray([0, 1, 2, 5])\n</code></pre>\n</div>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># DELETE BY VALUES</span><br>a <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br>np<span class=\"token punctuation\">.</span>delete<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>where<span class=\"token punctuation\">(</span>a <span class=\"token operator\">==</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><br>b <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br>np<span class=\"token punctuation\">.</span>delete<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>where<span class=\"token punctuation\">(</span>b <span class=\"token operator\">==</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># OR</span><br>a<span class=\"token punctuation\">[</span>a<span class=\"token operator\">!=</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><br>b<span class=\"token punctuation\">[</span>b<span class=\"token operator\">!=</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">]</span></code></pre>\n<pre><code>array([1, 2, 4, 5, 6])\n\narray(['1', '2', '3'], dtype='&lt;U21')\n</code></pre>\n</div>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Remove 'NaT' from an array</span><br>Y <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">600000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">300000</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'NaT'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><br>              dtype<span class=\"token operator\">=</span><span class=\"token string\">'timedelta64[ns]'</span><span class=\"token punctuation\">)</span><br>Y<span class=\"token punctuation\">[</span><span class=\"token operator\">~</span>np<span class=\"token punctuation\">.</span>isnat<span class=\"token punctuation\">(</span>Y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></code></pre>\n<pre><code>array([600000, 300000],\n       dtype='timedelta64[ns]')\n</code></pre>\n</div>\n",
      "date_published": "2019-10-25T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/python-matplotlib-tips/",
      "url": "https://dinhanhthi.com/python-matplotlib-tips/",
      "title": "Matplotlib extra",
      "content_html": "<h2 id=\"import-library\">Import library <a class=\"direct-link\" href=\"#import-library\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt<br><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</code></pre>\n<h2 id=\"generate-colors-based-on-list\">Generate colors based on list <a class=\"direct-link\" href=\"#generate-colors-based-on-list\">#</a></h2>\n<p>We wanna generate a list of colors automatically based on the elements in some list (the idea from popai),</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">get_colors</span><span class=\"token punctuation\">(</span>list_vals<span class=\"token punctuation\">,</span> list_colors<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"#fb4747\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"#315ace\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"#b5f6e5\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"#FFB347\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    dict_colors <span class=\"token operator\">=</span> polylinear_gradient<span class=\"token punctuation\">(</span>list_colors<span class=\"token punctuation\">,</span> n<span class=\"token operator\">=</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>list_vals<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>    dict_colors_ok <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><br>    <span class=\"token keyword\">for</span> i<span class=\"token punctuation\">,</span> val <span class=\"token keyword\">in</span> <span class=\"token builtin\">enumerate</span><span class=\"token punctuation\">(</span>list_vals<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>        dict_colors_ok<span class=\"token punctuation\">[</span>val<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> dict_colors<span class=\"token punctuation\">[</span><span class=\"token string\">'hex'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><br><br>    <span class=\"token keyword\">return</span> dict_colors_ok</code></pre>\n<h2 id=\"axes\">Axes <a class=\"direct-link\" href=\"#axes\">#</a></h2>\n<p>Axes' options,</p>\n<div class=\"code-2cols\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Hide the axis</span><br>plt<span class=\"token punctuation\">.</span>axis<span class=\"token punctuation\">(</span><span class=\"token string\">'off'</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\"># and 'on' to display it again</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Set the limit</span><br>plt<span class=\"token punctuation\">.</span>xlim<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3.5</span><span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>ylim<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3.5</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Axes' label</span><br>plt<span class=\"token punctuation\">.</span>xlabel<span class=\"token punctuation\">(</span><span class=\"token string\">'students'</span><span class=\"token punctuation\">,</span> fontsize<span class=\"token operator\">=</span><span class=\"token number\">14</span><span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>ylabel<span class=\"token punctuation\">(</span><span class=\"token string\">'mark'</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># axes' tick size &amp; rotation</span><br>plt<span class=\"token punctuation\">.</span>xticks<span class=\"token punctuation\">(</span>fontsize<span class=\"token operator\">=</span><span class=\"token number\">14</span><span class=\"token punctuation\">,</span> rotation<span class=\"token operator\">=</span><span class=\"token number\">90</span><span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>yticks<span class=\"token punctuation\">(</span>fontsize<span class=\"token operator\">=</span><span class=\"token number\">14</span><span class=\"token punctuation\">,</span> rotation<span class=\"token operator\">=</span><span class=\"token number\">90</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># range of ticks</span><br>plt<span class=\"token punctuation\">.</span>xticks<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>arange<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span> step<span class=\"token operator\">=</span><span class=\"token number\">0.01</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>yticks<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>arange<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span> step<span class=\"token operator\">=</span><span class=\"token number\">0.01</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n</div>\n<p>Set equal 2 axes<sup><a href=\"https://matplotlib.org/3.1.1/api/_as_gen/matplotlib.axes.Axes.set_aspect.html\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup>,</p>\n<pre class=\"language-python\"><code class=\"language-python\">matplotlib<span class=\"token punctuation\">.</span>axes<span class=\"token punctuation\">.</span>Axes<span class=\"token punctuation\">.</span>set_aspect<span class=\"token punctuation\">(</span><span class=\"token string\">'equal'</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\"># get the current axes and apply the function</span><br>plt<span class=\"token punctuation\">.</span>gca<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>set_aspect<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"plots\">Plots <a class=\"direct-link\" href=\"#plots\">#</a></h2>\n<p>Check the <a href=\"https://matplotlib.org/3.1.3/api/_as_gen/matplotlib.pyplot.plot.html\">official doc</a> for more information.</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># default for all</span><br>matplotlib<span class=\"token punctuation\">.</span>rcParams<span class=\"token punctuation\">[</span><span class=\"token string\">'figure.figsize'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\">plt<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> <span class=\"token string\">'ro'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># red and 'o' points</span></code></pre>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># set figure size</span><br>plt<span class=\"token punctuation\">.</span>figure<span class=\"token punctuation\">(</span>figsize<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>figure<span class=\"token punctuation\">(</span>figsize<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> dpi<span class=\"token operator\">=</span> <span class=\"token number\">60</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># rotate z label</span><br>plt<span class=\"token punctuation\">.</span>xticks<span class=\"token punctuation\">(</span>rotation<span class=\"token operator\">=</span><span class=\"token number\">90</span><span class=\"token punctuation\">,</span> fontsize<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># linestyle and marker</span><br>plt<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>marker<span class=\"token operator\">=</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">,</span> ls<span class=\"token operator\">=</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># scatter plot</span><br>plt<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">,</span> <span class=\"token string\">'.'</span><span class=\"token punctuation\">,</span> markersize<span class=\"token operator\">=</span><span class=\"token number\">15</span><span class=\"token punctuation\">,</span> linewidth<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></code></pre>\n</div>\n<h3 id=\"plot-directly-with-dataframe%2C\">Plot directly with dataframe, <a class=\"direct-link\" href=\"#plot-directly-with-dataframe%2C\">#</a></h3>\n<p>👉 Check more in <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.plot.html\">official doc</a>.</p>\n<div class=\"code-2cols\">\n<pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>figsize<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>df<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>fontsize<span class=\"token operator\">=</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># different types</span><br>df<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>style<span class=\"token operator\">=</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">)</span><br>df<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>style<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'r.'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'bx'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 2 features</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># add x,y labels</span><br>df<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>kind<span class=\"token operator\">=</span>'bar<span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>xlabel<span class=\"token punctuation\">(</span><span class=\"token string\">'features'</span><span class=\"token punctuation\">,</span> fontsize<span class=\"token operator\">=</span><span class=\"token number\">14</span><span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>ylabel<span class=\"token punctuation\">(</span><span class=\"token string\">'% of nans'</span><span class=\"token punctuation\">,</span> fontsize<span class=\"token operator\">=</span><span class=\"token number\">14</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># rotate x ticks</span><br>df<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>kind<span class=\"token operator\">=</span><span class=\"token string\">'bar'</span><span class=\"token punctuation\">,</span> rot<span class=\"token operator\">=</span><span class=\"token number\">90</span><span class=\"token punctuation\">)</span></code></pre>\n</div>\n<h3 id=\"legend\">Legend <a class=\"direct-link\" href=\"#legend\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># from the plots</span><br>plt<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>sin<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'-b'</span><span class=\"token punctuation\">,</span> label<span class=\"token operator\">=</span><span class=\"token string\">'Sine'</span><span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>cos<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'--r'</span><span class=\"token punctuation\">,</span> label<span class=\"token operator\">=</span><span class=\"token string\">'Cosine'</span><span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>legend<span class=\"token punctuation\">(</span>fontsize<span class=\"token operator\">=</span><span class=\"token number\">13</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># custom: independent from the plots</span><br><span class=\"token keyword\">from</span> matplotlib<span class=\"token punctuation\">.</span>lines <span class=\"token keyword\">import</span> Line2D<br>plt<span class=\"token punctuation\">.</span>legend<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>Line2D<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> Line2D<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span><span class=\"token string\">'r'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'blue'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'red'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"legend-from-list-of-colors\">Legend from list of colors <a class=\"direct-link\" href=\"#legend-from-list-of-colors\">#</a></h3>\n<p>Suppose we have a list of group with different colors. We wanna make legends for them,</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># generate auto the colors based on list lst_clusters (see previous section)</span><br>dict_colors <span class=\"token operator\">=</span> get_colors<span class=\"token punctuation\">(</span>lst_clusters<span class=\"token punctuation\">)</span><br><br>plt<span class=\"token punctuation\">.</span>legend<span class=\"token punctuation\">(</span><br>    <span class=\"token punctuation\">[</span>Line2D<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span>dict_colors<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> key <span class=\"token keyword\">in</span> dict_colors<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><br>    dict_colors<span class=\"token punctuation\">.</span>keys<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    loc<span class=\"token operator\">=</span><span class=\"token string\">'lower center'</span><span class=\"token punctuation\">,</span><br>    ncol<span class=\"token operator\">=</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span><br>    bbox_to_anchor<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>    prop<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'size'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">15</span><span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">)</span></code></pre>\n<p><img src=\"/img/post/python/lengend_list.jpg\" alt=\"Legend from list of colors\" class=\"img-full-100\"></p>\n<h3 id=\"imshow\"><code>imshow</code> <a class=\"direct-link\" href=\"#imshow\">#</a></h3>\n<p>Plot from a list of true/false (ref to <a href=\"/algorithm-1#plot-a-grid-of-square\">an example of Bernoulli distribution</a>)</p>\n<pre class=\"language-python\"><code class=\"language-python\">image <span class=\"token operator\">=</span> <span class=\"token comment\"># np.array(4, 4) of random True/False</span><br>plt<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span>image<span class=\"token punctuation\">,</span> cmap<span class=\"token operator\">=</span><span class=\"token string\">'gray'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># plot</span><br>plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"subplot\">Subplot <a class=\"direct-link\" href=\"#subplot\">#</a></h3>\n<p>For example, we wanna create a <code>4x4</code> plots<sup><a href=\"https://matplotlib.org/3.1.1/api/_as_gen/matplotlib.pyplot.subplot.html\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup>,</p>\n<pre class=\"language-python\"><code class=\"language-python\">plt<span class=\"token punctuation\">.</span>figure<span class=\"token punctuation\">(</span>figsize<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> dpi<span class=\"token operator\">=</span> <span class=\"token number\">60</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    pos <span class=\"token operator\">=</span> i<span class=\"token operator\">+</span><span class=\"token number\">1</span><br>    plt<span class=\"token punctuation\">.</span>subplot<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span>pos<span class=\"token punctuation\">)</span><br>    plt<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br>    plt<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">(</span><span class=\"token string\">'title_'</span><span class=\"token operator\">+</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>pos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> fontsize<span class=\"token operator\">=</span><span class=\"token number\">18</span><span class=\"token punctuation\">)</span></code></pre>\n<p>Using <code>ax</code>,</p>\n<pre class=\"language-python\"><code class=\"language-python\">size <span class=\"token operator\">=</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>list_features<span class=\"token punctuation\">)</span><br>f<span class=\"token punctuation\">,</span> axs <span class=\"token operator\">=</span> plt<span class=\"token punctuation\">.</span>subplots<span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>size<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> figsize<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">15</span><span class=\"token punctuation\">,</span><span class=\"token number\">15</span><span class=\"token operator\">/</span><span class=\"token number\">5</span><span class=\"token operator\">*</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>size<span class=\"token operator\">/</span><span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">for</span> ax<span class=\"token punctuation\">,</span> feat <span class=\"token keyword\">in</span> <span class=\"token builtin\">zip</span><span class=\"token punctuation\">(</span>axs<span class=\"token punctuation\">.</span>ravel<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> list_features<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    df_feat <span class=\"token operator\">=</span> df<span class=\"token punctuation\">[</span>feat<span class=\"token punctuation\">]</span><br>    <span class=\"token keyword\">for</span> idt<span class=\"token punctuation\">,</span> df_id <span class=\"token keyword\">in</span> df_feat<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token string\">'batch_id'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>        ax<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span><span class=\"token string\">'royalblue'</span><span class=\"token punctuation\">,</span> alpha<span class=\"token operator\">=</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span><br>        ax<span class=\"token punctuation\">.</span>set_title<span class=\"token punctuation\">(</span><span class=\"token string\">'plot_'</span><span class=\"token operator\">+</span>feat<span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"fill-between-range\">Fill between range <a class=\"direct-link\" href=\"#fill-between-range\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\">plt<span class=\"token punctuation\">.</span>fill_between<span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">,</span> df<span class=\"token punctuation\">[</span><span class=\"token string\">\"yhat_lower\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> df<span class=\"token punctuation\">[</span><span class=\"token string\">\"yhat_upper\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span><span class=\"token string\">'#0072B2'</span><span class=\"token punctuation\">,</span> alpha<span class=\"token operator\">=</span><span class=\"token number\">0.2</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"plot-a-photo-(imshow)\">Plot a photo (<code>imshow</code>) <a class=\"direct-link\" href=\"#plot-a-photo-(imshow)\">#</a></h2>\n<h3 id=\"with-grayscale-and-misc\">With grayscale and <code>misc</code> <a class=\"direct-link\" href=\"#with-grayscale-and-misc\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> scipy <span class=\"token keyword\">import</span> misc<br><br>img <span class=\"token operator\">=</span> misc<span class=\"token punctuation\">.</span>face<span class=\"token punctuation\">(</span>gray<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">,</span> cmap<span class=\"token operator\">=</span><span class=\"token string\">'gray'</span><span class=\"token punctuation\">,</span> vmin<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> vmax<span class=\"token operator\">=</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"with-grayscale-and-custom-file\">With grayscale and custom file <a class=\"direct-link\" href=\"#with-grayscale-and-custom-file\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np<br><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt<br><span class=\"token keyword\">from</span> PIL <span class=\"token keyword\">import</span> Image<br><br>fname <span class=\"token operator\">=</span> <span class=\"token string\">'image.png'</span><br>image <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>fname<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>convert<span class=\"token punctuation\">(</span><span class=\"token string\">\"L\"</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\"># If you have an L mode image, that means it is a single channel image - normally</span><br><span class=\"token comment\">#   interpreted as greyscale. The L means that is just stores the Luminance.</span><br><span class=\"token comment\">#   It is very compact, but only stores a greyscale, not colour.</span><br><br>arr <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>asarray<span class=\"token punctuation\">(</span>image<span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">,</span> cmap<span class=\"token operator\">=</span><span class=\"token string\">'gray'</span><span class=\"token punctuation\">,</span> vmin<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> vmax<span class=\"token operator\">=</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># ERR: Clipping input data to the valid range for</span><br><span class=\"token comment\">#   imshow with RGB data ([0..1] for floats or [0..255] for integers)</span><br>plt<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">.</span>astype<span class=\"token punctuation\">(</span><span class=\"token string\">'uint8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"save-figure-to-file\">Save figure to file <a class=\"direct-link\" href=\"#save-figure-to-file\">#</a></h2>\n<h3 id=\"using-plt.savefig()\">Using <code>plt.savefig()</code> <a class=\"direct-link\" href=\"#using-plt.savefig()\">#</a></h3>\n<p>To be sure that <code>plt.savefig()</code><sup><a href=\"https://matplotlib.org/3.1.1/api/_as_gen/matplotlib.pyplot.savefig.html\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup> comes before <code>plt.show()</code>. In the case you wanna use any time you want, just call <code>plt.gcf()</code> to &quot;get current figure&quot; first. For example,<sup><a href=\"https://stackoverflow.com/questions/9012487/matplotlib-pyplot-savefig-outputs-blank-image\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<pre class=\"language-python\"><code class=\"language-python\">fig1 <span class=\"token operator\">=</span> plt<span class=\"token punctuation\">.</span>gcf<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># get the current figure</span><br>plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># show the plot</span><br>fig1<span class=\"token punctuation\">.</span>savefig<span class=\"token punctuation\">(</span><span class=\"token string\">'test.png'</span><span class=\"token punctuation\">,</span> dpi<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span></code></pre>\n<p><strong>Remark:</strong> There are the axes inside the exported photo (all are printed on notebook)!!</p>\n<h3 id=\"using-imageio\">Using <code>imageio</code> <a class=\"direct-link\" href=\"#using-imageio\">#</a></h3>\n<p>They export only the photo.</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> imageio<br><span class=\"token comment\"># img = misc.face(gray=True)</span><br><span class=\"token comment\"># or</span><br><span class=\"token comment\"># img = np.asarray(Image.open('abc.jpg').convert(\"L\"))</span><br>imageio<span class=\"token punctuation\">.</span>imwrite<span class=\"token punctuation\">(</span><span class=\"token string\">'filename.jpg'</span><span class=\"token punctuation\">,</span> img<span class=\"token punctuation\">)</span> <span class=\"token comment\"># save the file</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># ERR: Lossy conversion from float64 to uint8. Range […,…].</span><br><span class=\"token comment\">#   Convert image to uint8 prior to saving to suppress this warning</span><br>imageio<span class=\"token punctuation\">.</span>imwrite<span class=\"token punctuation\">(</span><span class=\"token string\">'filename.jpg'</span><span class=\"token punctuation\">,</span> img<span class=\"token punctuation\">.</span>astype<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>uint8<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n",
      "date_published": "2019-10-25T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/gitbook/",
      "url": "https://dinhanhthi.com/gitbook/",
      "title": "Gitbook",
      "content_html": "<h2 id=\"urls\">URLs <a class=\"direct-link\" href=\"#urls\">#</a></h2>\n<ul>\n<li><a href=\"https://gitbook.com\">Gitbook homepage</a>.</li>\n<li><a href=\"https://docs.gitbook.com\">Gitbook Docs</a>.</li>\n<li><a href=\"https://www.emojicopy.com/\">Emoji Copy</a> (You cannot use <code>:blush:</code> in the markdown file, you need to copy icon itself).</li>\n</ul>\n<h2 id=\"setting-up\">Setting up <a class=\"direct-link\" href=\"#setting-up\">#</a></h2>\n<p>File <code>book.json</code> needs to be placed in the root of your gitbook repository on Github. Below are some settings that I have used.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">{</span><br>\t<span class=\"token string\">\"plugins\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span><br>\t\t<span class=\"token string\">\"mathjax\"</span><br>\t<span class=\"token punctuation\">]</span>,<br>\t<span class=\"token string\">\"pluginsConfig\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span><br>\t\t<span class=\"token string\">\"mathjax\"</span>:<span class=\"token punctuation\">{</span><br>\t\t\t\t<span class=\"token string\">\"forceSVG\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token boolean\">true</span><br>\t\t<span class=\"token punctuation\">}</span><br>\t<span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<h2 id=\"math-in-gitbook\">Math in Gitbook <a class=\"direct-link\" href=\"#math-in-gitbook\">#</a></h2>\n<p>You have to use <code>$$a+b$$</code> instead of <code>$a+b$</code> for inline math. Others are the same as normal expressions in Markdown.</p>\n<h2 id=\"blocks\">Blocks <a class=\"direct-link\" href=\"#blocks\">#</a></h2>\n<h3 id=\"boxes\">Boxes <a class=\"direct-link\" href=\"#boxes\">#</a></h3>\n<p>Info blocks,</p>\n<pre class=\"language-liquid\"><code class=\"language-liquid\">{<span class=\"token operator\">%</span> hint style<span class=\"token operator\">=</span>\"info\" <span class=\"token operator\">%</span>}<br>Hint blocks.<br><span class=\"token operator\">&lt;</span>br <span class=\"token operator\">/</span><span class=\"token operator\">></span>Line <span class=\"token keyword\">break</span>.<br>{<span class=\"token operator\">%</span> endhint <span class=\"token operator\">%</span>}<br></code></pre>\n<p>Danger blocks,</p>\n<pre class=\"language-liquid\"><code class=\"language-liquid\">{<span class=\"token operator\">%</span> hint style<span class=\"token operator\">=</span>\"danger\" <span class=\"token operator\">%</span>}<br>Content.<br>{<span class=\"token operator\">%</span> endhint <span class=\"token operator\">%</span>}<br></code></pre>\n<p>Success blocks,</p>\n<pre class=\"language-liquid\"><code class=\"language-liquid\">{<span class=\"token operator\">%</span> hint style<span class=\"token operator\">=</span>\"success\" <span class=\"token operator\">%</span>}<br>Content.<br>{<span class=\"token operator\">%</span> endhint <span class=\"token operator\">%</span>}<br></code></pre>\n<p>Warning blocks,</p>\n<pre class=\"language-liquid\"><code class=\"language-liquid\">{<span class=\"token operator\">%</span> hint style<span class=\"token operator\">=</span>\"warning\" <span class=\"token operator\">%</span>}<br>Content.<br>{<span class=\"token operator\">%</span> endhint <span class=\"token operator\">%</span>}<br></code></pre>\n<h3 id=\"code-blocks\">Code blocks <a class=\"direct-link\" href=\"#code-blocks\">#</a></h3>\n<pre class=\"language-liquid\"><code class=\"language-liquid\">{<span class=\"token operator\">%</span> code<span class=\"token operator\">-</span>tabs <span class=\"token operator\">%</span>}<br>{<span class=\"token operator\">%</span> code<span class=\"token operator\">-</span>tabs<span class=\"token operator\">-</span>item title<span class=\"token operator\">=</span>\"book.json\" <span class=\"token operator\">%</span>}<br>```bash<br>cd directory<span class=\"token operator\">/</span><br>```<br>{<span class=\"token operator\">%</span> endcode<span class=\"token operator\">-</span>tabs<span class=\"token operator\">-</span>item <span class=\"token operator\">%</span>}<br>{<span class=\"token operator\">%</span> endcode<span class=\"token operator\">-</span>tabs <span class=\"token operator\">%</span>}<br></code></pre>\n<h3 id=\"box-with-tabs\">Box with tabs <a class=\"direct-link\" href=\"#box-with-tabs\">#</a></h3>\n<pre class=\"language-liquid\"><code class=\"language-liquid\">{<span class=\"token operator\">%</span> tabs <span class=\"token operator\">%</span>}<br>{<span class=\"token operator\">%</span> tab title<span class=\"token operator\">=</span>\"First Tab\" <span class=\"token operator\">%</span>}<br>Content of tab <span class=\"token number\">1.</span><br>{<span class=\"token operator\">%</span> endtab <span class=\"token operator\">%</span>}<br><br>{<span class=\"token operator\">%</span> tab title<span class=\"token operator\">=</span>\"Second Tab\" <span class=\"token operator\">%</span>}<br>Content of tab <span class=\"token number\">2.</span><br>{<span class=\"token operator\">%</span> endtab <span class=\"token operator\">%</span>}<br>{<span class=\"token operator\">%</span> endtabs <span class=\"token operator\">%</span>}<br></code></pre>\n<h3 id=\"tasks\">Tasks <a class=\"direct-link\" href=\"#tasks\">#</a></h3>\n<pre class=\"language-liquid\"><code class=\"language-liquid\"><span class=\"token operator\">*</span> [x] Task <span class=\"token number\">1</span><br><span class=\"token operator\">*</span> [ ] Task <span class=\"token number\">2</span><br><span class=\"token operator\">*</span> [ ] Task <span class=\"token number\">3</span><br></code></pre>\n",
      "date_published": "2019-10-19T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/principal-component-analysis/",
      "url": "https://dinhanhthi.com/principal-component-analysis/",
      "title": "Principal Component Analysis (PCA)",
      "content_html": "<p>👉 Note: <a href=\"/umap-t-SNE/\">UMAP &amp; t-SNE</a>.</p>\n<h2 id=\"what%3F\">What? <a class=\"direct-link\" href=\"#what%3F\">#</a></h2>\n<p>Sometimes we need to &quot;compress&quot; our data to speed up algorithms or to visualize data. One way is to use <a href=\"/tags/dimensionality-reduction/\"><strong>dimensionality reduction</strong></a> which is the process of reducing the number of random variables under consideration by obtaining a set of principal variables. We can think of 2 approaches:</p>\n<ul>\n<li><strong>Feature selection</strong>: find a subset of the input variables.</li>\n<li><strong>Feature projection</strong> (also <em>Feature extraction</em>): transforms the data in the high-dimensional space to a space of fewer dimensions. <strong>PCA</strong> is one of the methods following this approach.</li>\n</ul>\n<p><img src=\"/img/post/ML/dim_redu/pca-1.jpg\" alt=\"An idea of using PCA from 2D to 1D.\" class=\"img-full-90 pop\"><br>\n<em><strong>Figure 1.</strong> An idea of using PCA from 2D to 1D.</em></p>\n<p><img src=\"/img/post/ML/dim_redu/pca-2.jpg\" alt=\"An idea of using PCA from 5D to 2D.\" class=\"img-full-75 pop\"><br>\n<em><strong>Figure 2.</strong> An idea of using PCA from 5D to 2D.</em></p>\n<div class=\"warning\">\n<p>❓ <strong class=\"tbrown\">Questions</strong>: How can we choose the <strong class=\"tgreen\">green arrows</strong> like in Figure 1 and 2 (their <strong>directions</strong> and their <strong>magnitudes</strong>)?</p>\n</div>\n<p>From a data points, there are many ways of projections, for examples,</p>\n<p><img src=\"/img/post/ML/dim_redu/pca-4.jpg\" alt=\"An example of different projections.\" class=\"img-full-75 pop\"><br>\n<em><strong>Figure 3.</strong> We will project the points to the green line or the violet line? Which one is the best choice?</em></p>\n<p>Intuitively, the green line is <mark>better with more separated points</mark>. But how can we choose it &quot;mathematically&quot; (precisely)? We need to know about:</p>\n<ul>\n<li><strong><a href=\"/mean-median-mode\">Mean</a></strong>: finds the most balanced point in the data.</li>\n<li><strong><a href=\"/variance-covariance-correlation\">Variance</a></strong>: measures the spread of data from the mean. However, variance is not enough. There are many different ways in that we get the same variance.</li>\n<li><strong><a href=\"/variance-covariance-correlation\">Covariance</a></strong>: indicates the direction in that data are spreading.</li>\n</ul>\n<div class=\"hsbox\"><div class=\"hs__title\">An example of the same mean and variance but different covariance.</div><div class=\"hs__content\"><p><img src=\"/img/post/ML/dim_redu/pca-5.jpg\" alt=\"Different data but the same mean and variance.\" class=\"img-full-100 pop\"><br>\n<em><strong>Figure 4.</strong> Different data but the same mean and variance. That's why we need covariance!</em></p>\n</div></div>\n<h3 id=\"algorithm\">Algorithm <a class=\"direct-link\" href=\"#algorithm\">#</a></h3>\n<ol>\n<li>\n<p>Subtract the mean to move to the original axes.</p>\n</li>\n<li>\n<p>From the original data (a lot of features <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>N</mi></msub></mrow><annotation encoding=\"application/x-tex\">x_1, x_2, \\ldots, x_N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>), we construct a <strong>covariance matrix <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>U</mi></mrow><annotation encoding=\"application/x-tex\">U</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span></span></span></span></span></strong>.</p>\n</li>\n<li>\n<p>Find the <strong class=\"tbrown\">eigenvalues</strong> <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>λ</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>λ</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><mo>…</mo></mrow><annotation encoding=\"application/x-tex\">\\lambda_1, \\lambda_2,\\ldots</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span></span></span></span></span> and correspondent <strong>eigenvectors</strong> <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>v</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>v</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><mo>…</mo></mrow><annotation encoding=\"application/x-tex\">v_1, v_2, \\ldots</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span></span></span></span></span> of that matrix (we call them <strong>eigenstuffs</strong>). Choose <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi><mo>&lt;</mo><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">K &lt; N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72243em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span></span></span> couples <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>λ</mi></mrow><annotation encoding=\"application/x-tex\">\\lambda</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">λ</span></span></span></span></span> and <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">v</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span></span></span></span></span> (the highest eigenvalues) and we get a reduced matrix <em><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>U</mi><mi>K</mi></msub></mrow><annotation encoding=\"application/x-tex\">U_K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span></em>.</p>\n</li>\n<li>\n<p>Projection original data points to the <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span></span>-dimensional plane created based on these new <em>eigenstuffs</em>. This step creates new data points on a new dimensional space (<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span></span>).</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>Z</mi><mo>=</mo><msubsup><mi>U</mi><mi>K</mi><mi>T</mi></msubsup><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">Z = U_K^TX</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.138331em;vertical-align:-0.247em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913309999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:-0.10903em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span></span></eqn></section></math>\n</li>\n<li>\n<p>Now, instead of solving the original problem (<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span></span></span> features), we only need to solve a new problem with <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span></span> features (<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi><mo>&lt;</mo><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">K&lt;N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72243em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span></span></span>).</p>\n</li>\n</ol>\n<p><img src=\"/img/post/ML/dim_redu/pca-3.jpg\" alt=\"A big picture of the idea of PCA algorithm.\" class=\"img-full-100 pop\"><br>\n<em><strong>Figure 5.</strong> A big picture of the idea of PCA algorithm. &quot;Eigenstuffs&quot; are eigenvalues and eigenvectors. <a href=\"https://www.youtube.com/watch?v=g-Hb26agBFg\">Source</a>.</em></p>\n<h2 id=\"code\">Code <a class=\"direct-link\" href=\"#code\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>decomposition <span class=\"token keyword\">import</span> PCA<br><br>s <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br>pca <span class=\"token operator\">=</span> PCA<span class=\"token punctuation\">(</span>n_components<span class=\"token operator\">=</span><span class=\"token number\">150</span><span class=\"token punctuation\">,</span> whiten<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> random_state<span class=\"token operator\">=</span><span class=\"token number\">42</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\"># pca.fit(s)</span><br>s1 <span class=\"token operator\">=</span> pca<span class=\"token punctuation\">.</span>fit_transform<span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><br><br><span class=\"token keyword\">print</span> <span class=\"token punctuation\">(</span>pca<span class=\"token punctuation\">.</span>components_<span class=\"token punctuation\">)</span> <span class=\"token comment\"># eigenvectors</span><br><span class=\"token keyword\">print</span> <span class=\"token punctuation\">(</span>pca<span class=\"token punctuation\">.</span>explained_variance_<span class=\"token punctuation\">)</span> <span class=\"token comment\"># eigenvalues</span></code></pre>\n<p>Some notable components (see <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.decomposition.PCA.html\">full</a>):</p>\n<ul>\n<li><code>pca.fit(X)</code>: only fit <code>X</code> (and then we can use <code>pca</code> for other operations).</li>\n<li><code>pca.fit_transform(X)</code>: Fit the model with <code>X</code> and apply the dimensionality reduction on <code>X</code> (from <code>(n_samples, n_features)</code> to <code>(n_samples, n_components)</code>).</li>\n<li><code>pca.inverse_transform(s1)</code>: transform <code>s1</code> back to original data space (2D) - not back to <code>s</code>!!!</li>\n<li><code>pca1.mean_</code>: mean point of the data.</li>\n<li><code>pca.components_</code>: eigenvectors (<code>n_components</code> vectors).</li>\n<li><code>pca.explained_variance_</code>: eigenvalues. It's also the amount of retained variance which is corresponding to <strong>each</strong> components.</li>\n<li><code>pca.explained_variance_ratio_</code>: the <strong>percentage</strong> in that variance is retained if we consider on <strong>each</strong> component.</li>\n</ul>\n<p>Some notable parameters:</p>\n<ul>\n<li><code>n_components=0.80</code>: means it will return the Eigenvectors that have the 80% of the variation in the dataset.</li>\n</ul>\n<div class=\"warning\">\n<p>When choosing the number of principal components (<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span></span>), we choose <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span></span> to be the smallest value so that for example, <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>99</mn><mi mathvariant=\"normal\">%</mi></mrow><annotation encoding=\"application/x-tex\">99\\%</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.80556em;vertical-align:-0.05556em;\"></span><span class=\"mord\">9</span><span class=\"mord\">9</span><span class=\"mord\">%</span></span></span></span></span> of variance, is retained.<sup><a href=\"https://stackoverflow.com/questions/32857029/python-scikit-learn-pca-explained-variance-ratio-cutoff\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<p>In <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.decomposition.PCA.html\">Scikit-learn</a>, we can use <code>pca.explained_variance_ratio_.cumsum()</code>. For example, <code>n_components = 5</code> and we have,</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token punctuation\">[</span><span class=\"token number\">0.32047581</span>  <span class=\"token number\">0.59549787</span>  <span class=\"token number\">0.80178824</span>  <span class=\"token number\">0.932976</span>    <span class=\"token number\">1</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span></code></pre>\n<p>then we know that with <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi><mo>=</mo><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">K=4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">4</span></span></span></span></span>, we would retain <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>93.3</mn><mi mathvariant=\"normal\">%</mi></mrow><annotation encoding=\"application/x-tex\">93.3\\%</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.80556em;vertical-align:-0.05556em;\"></span><span class=\"mord\">9</span><span class=\"mord\">3</span><span class=\"mord\">.</span><span class=\"mord\">3</span><span class=\"mord\">%</span></span></span></span></span> of the variance.</p>\n</div>\n<h3 id=\"whitening\">Whitening <a class=\"direct-link\" href=\"#whitening\">#</a></h3>\n<p>Whitening makes the features:</p>\n<ul>\n<li>less correlated with each other,</li>\n<li>all features have the same variance (or, unit component-wise variances).</li>\n</ul>\n<p><img src=\"/img/post/ML/dim_redu/pca-6.jpeg\" alt=\"An illustration of whitening.\" class=\"img-full-100 pop\"><br>\n<em>PCA / Whitening. <strong>Left</strong>: Original toy, 2-dimensional input data. <strong>Middle</strong>: After performing PCA. The data is centered at zero and then rotated into the eigenbasis of the data covariance matrix. This decorrelates the data (the covariance matrix becomes diagonal). <strong>Right</strong>: Each dimension is additionally scaled by the eigenvalues, transforming the data covariance matrix into the identity matrix. Geometrically, this corresponds to stretching and squeezing the data into an isotropic gaussian blob.</em></p>\n<p>If this section doesn't satisfy you, read <a href=\"http://ufldl.stanford.edu/tutorial/unsupervised/PCAWhitening/#whitening\">this</a> and <a href=\"http://cs231n.github.io/neural-networks-2/\">this</a> (section <em>PCA and Whitening</em>).</p>\n<h2 id=\"pca-in-action\">PCA in action <a class=\"direct-link\" href=\"#pca-in-action\">#</a></h2>\n<ul>\n<li>\n<p><strong>Example to understand the idea of PCA</strong>: <a href=\"/files/ml/pca/PCA_understanding_example.html\">html file</a> -- <a href=\"https://colab.research.google.com/drive/1F_A_fJOY-oiV7Ly4y_evF9sfwII-ljJK\">open in colab</a>.</p>\n<ul>\n<li>Plot points with 2 lines which are corresponding to 2 eigenvectors.</li>\n<li>Plot &amp; choose Principal Components.</li>\n<li>An example of choosing <code>n_components</code> <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span></span>.</li>\n<li>Visualization hand-written digits (the case of all digits and the case of only 2 digits -- 1 &amp; 8).</li>\n<li>Using <a href=\"/support-vector-machine\">SVM</a> to classifier data in the case of 1 &amp; 8 and visualize the decision boundaries.</li>\n</ul>\n</li>\n<li>\n<p><strong>Image compression</strong>: <a href=\"/files/ml/pca/PCA-image-compression.html\">html file</a> -- <a href=\"https://colab.research.google.com/drive/1G_WPZMmQ020kjSmqMI_k21_zLDrPlYtg\">open in colab</a>.</p>\n<ul>\n<li>When input is an image, the values of adjacent pixels are <em>highly correlated</em>.</li>\n<li>Import images from <code>scipy</code> and Google Drive or Github (with <code>git</code>).</li>\n<li>Compress grayscale images and colored ones.</li>\n<li>Plot a grayscale version of a colorful images.</li>\n<li>Save output to file (Google Drive).</li>\n<li>Fix warning <em>Lossy conversion from float64 to uint8. Range [...,...]. Convert image to uint8 prior to saving to suppress this warning.</em></li>\n<li>Fix warning <em>Clipping input data to the valid range for imshow with RGB data ([0..1] for floats or [0..255] for integers)</em>.</li>\n<li>Calculate a size (in <code>KB</code>) of a image file.</li>\n</ul>\n</li>\n<li>\n<p><strong>PCA without scikit-learn</strong>: <a href=\"/files/ml/pca/PCA_without_scikit_learn.html\">html file</a> -- <a href=\"https://colab.research.google.com/drive/1IWMuon3NSpGybmnBBWxlvbS9yUjxtf_8\">open in colab</a>.</p>\n</li>\n</ul>\n<h2 id=\"references\">References <a class=\"direct-link\" href=\"#references\">#</a></h2>\n<ul>\n<li><strong>Luis Serrano</strong> -- [Video] <a href=\"https://www.youtube.com/watch?v=g-Hb26agBFg\">Principal Component Analysis (PCA)</a>. It's very intuitive!</li>\n<li><strong>Stats.StackExchange</strong> -- <a href=\"https://stats.stackexchange.com/questions/2691/making-sense-of-principal-component-analysis-eigenvectors-eigenvalues\">Making sense of principal component analysis, eigenvectors &amp; eigenvalues</a>.</li>\n<li><strong>Scikit-learn</strong> -- <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.decomposition.PCA.html\">PCA official doc</a>.</li>\n<li><strong>Tiep Vu</strong> -- <em>Principal Component Analysis</em>: <a href=\"https://machinelearningcoban.com/2017/06/15/pca/\">Bài 27</a> and <a href=\"https://machinelearningcoban.com/2017/06/21/pca2/\">Bài 28</a>.</li>\n<li><strong>Jake VanderPlas</strong> -- <a href=\"https://jakevdp.github.io/PythonDataScienceHandbook/05.09-principal-component-analysis.html\">In Depth: Principal Component Analysis</a>.</li>\n<li><strong>Tutorial 4 Yang</strong> -- <a href=\"/files/ml/pca/tutorial4-yang.pdf\">Principal Components Analysis</a>.</li>\n<li><strong>Andrew NG.</strong> -- <a href=\"https://rawnote.dinhanhthi.com/machine-learning-coursera-8#principal-component-analysis-pca\">My raw note</a> of the course <a href=\"https://www.coursera.org/learn/machine-learning/\">&quot;Machine Learning&quot; on Coursera</a>.</li>\n<li><strong>Shankar Muthuswamy</strong> -- <a href=\"https://shankarmsy.github.io/posts/pca-sklearn.html\">Facial Image Compression and Reconstruction with PCA</a>.</li>\n<li><strong>UFLDL - Stanford</strong> -- <a href=\"http://ufldl.stanford.edu/tutorial/unsupervised/PCAWhitening/\">PCA Whitening</a>.</li>\n</ul>\n",
      "date_published": "2019-10-13T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/pipeline/",
      "url": "https://dinhanhthi.com/pipeline/",
      "title": "Pipeline &amp; GridSearch",
      "content_html": "<h2 id=\"what's-the-idea-of-pipeline%3F\">What's the idea of Pipeline? <a class=\"direct-link\" href=\"#what's-the-idea-of-pipeline%3F\">#</a></h2>\n<p>Stack multiple processes into a single (scikit-learn) estimation.</p>\n<p><img src=\"/img/post/ML/pipeline/pipeline-idea.png\" alt=\"Pipeline's idea\" class=\"img-full-85\"><br>\n<em>An example of using pipeline in Machine Learning with 3 different steps.</em></p>\n<h2 id=\"why-pipeline%3F\">Why pipeline? <a class=\"direct-link\" href=\"#why-pipeline%3F\">#</a></h2>\n<p><img src=\"/img/post/ML/pipeline/why-pipeline.png\" alt=\"Why pipeline\" class=\"img-80 bg-white\"><br>\n<em>An example of using scaling with cross-validation with and without using pipeline.</em></p>\n<h2 id=\"pipeline-in-scikit-learn\">Pipeline in Scikit-learn <a class=\"direct-link\" href=\"#pipeline-in-scikit-learn\">#</a></h2>\n<p>Below sample codes come from <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/data-science-learning/blob/master/projects/mini-projects/notebook_in_html/SVM-face-recognition.html\">this example</a>.</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>svm <span class=\"token keyword\">import</span> SVC<br><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>decomposition <span class=\"token keyword\">import</span> PCA<br><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>pipeline <span class=\"token keyword\">import</span> make_pipeline<br><br>pca <span class=\"token operator\">=</span> PCA<span class=\"token punctuation\">(</span>n_components<span class=\"token operator\">=</span><span class=\"token number\">150</span><span class=\"token punctuation\">,</span> whiten<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> random_state<span class=\"token operator\">=</span><span class=\"token number\">42</span><span class=\"token punctuation\">)</span><br>svc <span class=\"token operator\">=</span> SVC<span class=\"token punctuation\">(</span>kernel<span class=\"token operator\">=</span><span class=\"token string\">'rbf'</span><span class=\"token punctuation\">,</span> class_weight<span class=\"token operator\">=</span><span class=\"token string\">'balanced'</span><span class=\"token punctuation\">)</span><br>model <span class=\"token operator\">=</span> make_pipeline<span class=\"token punctuation\">(</span>pca<span class=\"token punctuation\">,</span> svc<span class=\"token punctuation\">)</span></code></pre>\n<p>Difference between <code>Pipeline</code> and <code>make_pipeline</code>:</p>\n<ul>\n<li><a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.pipeline.Pipeline.html\"><code>Pipeline</code></a>: you can name the steps.</li>\n<li><a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.pipeline.make_pipeline.html\"><code>make_pipeline</code></a>: no need to name the steps (use them directly).</li>\n</ul>\n<pre class=\"language-python\"><code class=\"language-python\">make_pipeline<span class=\"token punctuation\">(</span>PCA<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> SVC<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\">Pipeline<span class=\"token punctuation\">(</span>steps<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><br>\t<span class=\"token punctuation\">(</span><span class=\"token string\">'principle_component_analysis'</span><span class=\"token punctuation\">,</span> PCA<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token punctuation\">(</span><span class=\"token string\">'support_vector_machine'</span><span class=\"token punctuation\">,</span> SVC<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"using-with-gridsearch\">Using with GridSearch <a class=\"direct-link\" href=\"#using-with-gridsearch\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Using with GridSearch (to choose the best parameters)</span><br><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>model_selection <span class=\"token keyword\">import</span> GridSearchCV<br>param_grid <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'svc__C'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">50</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\t<span class=\"token comment\"># \"svc\": name before, \"C\": param in svc</span><br>              <span class=\"token string\">'svc__gamma'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0.0001</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0005</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.001</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.005</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><br>grid <span class=\"token operator\">=</span> GridSearchCV<span class=\"token punctuation\">(</span>model<span class=\"token punctuation\">,</span> param_grid<span class=\"token punctuation\">,</span> cv<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> verbose<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> n_jobs<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><br><br>grid_result <span class=\"token operator\">=</span> grid<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><br>best_params <span class=\"token operator\">=</span> grid_result<span class=\"token punctuation\">.</span>best_params_<br><br><span class=\"token comment\"># predict with best params</span><br>grid<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span>X_test<span class=\"token punctuation\">)</span></code></pre>\n<p>In case you wanna use <code>best_params</code>,</p>\n<pre class=\"language-python\"><code class=\"language-python\">best_params<span class=\"token punctuation\">[</span><span class=\"token string\">'svc__C'</span><span class=\"token punctuation\">]</span><br>best_params<span class=\"token punctuation\">[</span><span class=\"token string\">'svc__gamma'</span><span class=\"token punctuation\">]</span></code></pre>\n<p>Take care the cross validation (<em>take a long time to run!!!</em>,</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>model_selection <span class=\"token keyword\">import</span> cross_val_score<br>cv_scores <span class=\"token operator\">=</span> cross_val_score<span class=\"token punctuation\">(</span>grid<span class=\"token punctuation\">,</span> X<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Accuracy scores:'</span><span class=\"token punctuation\">,</span> cv_scores<span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Mean of score:'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">(</span>cv_scores<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Variance of scores:'</span><span class=\"token punctuation\">,</span> np<span class=\"token punctuation\">.</span>var<span class=\"token punctuation\">(</span>cv_scores<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"example\">Example <a class=\"direct-link\" href=\"#example\">#</a></h2>\n<ul>\n<li><strong>Face Recognition using <a href=\"/support-vector-machine\">SVM</a></strong> -- <a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/data-science-learning/blob/master/projects/mini-projects/notebook_in_html/SVM-face-recognition.html\">Open in HTML</a> -- <a href=\"https://colab.research.google.com/dinhanhthi/data-science-learning/blob/master/projects/mini-projects/SVM-face-recognition.ipynb\">Open in Colab</a>.</li>\n</ul>\n",
      "date_published": "2019-10-13T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/dataset-collection/",
      "url": "https://dinhanhthi.com/dataset-collection/",
      "title": "Datasets Collection",
      "content_html": "<p>👉 Note: <a href=\"/data-ml-tools-resources/\">Resources for DS &amp; ML &amp; DL.</a></p>\n<h2 id=\"create-artificial-dataset\">Create artificial dataset <a class=\"direct-link\" href=\"#create-artificial-dataset\">#</a></h2>\n<ul>\n<li><a href=\"https://scikit-learn.org/stable/modules/classes.html#module-sklearn.datasets\">sklearn dataset module</a>: <code>from sklearn import datasets</code>. This contains also some popular reference datasets.</li>\n</ul>\n<h2 id=\"source-of-datasets\">Source of datasets <a class=\"direct-link\" href=\"#source-of-datasets\">#</a></h2>\n<ul>\n<li><a href=\"https://github.com/awesomedata/awesome-public-datasets\">awesome-public-datasets</a> — A topic-centric list of HQ open datasets.</li>\n<li><a href=\"https://scikit-learn.org/stable/datasets/\">Built-in datasets in Scikit-Learn</a>.</li>\n<li><a href=\"https://github.com/BuzzFeedNews/everything\">BuzzFeedNews/everything</a> — data from BuzzFeed.</li>\n<li><a href=\"https://cocodataset.org/#download\">COCO</a> -- Common Objects in Context.</li>\n<li><a href=\"https://datahub.io/collections\">Data Hub Datasets collection</a> — high quality data and datasets organized by topic.</li>\n<li><a href=\"https://www.data.gov/\">data.gov</a> — a large dataset aggregator and the home of the US Government’s open data.</li>\n<li><a href=\"https://data.world/\">data.world</a> -- The Cloud-Native Data Catalog.</li>\n<li><a href=\"https://fivethirtyeight.com/\">FiveThirtyEight</a> — hard data and statistical analysis to tell stories about politics, sports, societal matters and more.</li>\n<li><a href=\"https://toolbox.google.com/datasetsearch\">Google Dataset Search</a>.</li>\n<li><a href=\"https://googletrends.github.io/data/\">Google Trends Datastore</a></li>\n<li><a href=\"https://ai.google/tools/datasets/\">Google AI Datasets</a> — In order to contribute to the broader research community, Google periodically releases data of interest to researchers in a wide range of computer science disciplines.</li>\n<li><a href=\"https://www.kaggle.com/datasets\">Kaggle Datasets</a>.</li>\n<li><a href=\"http://nlpprogress.com/\">NLP-progress</a>.</li>\n<li><a href=\"https://storage.googleapis.com/openimages/web/index.html\">Open Images V6</a></li>\n<li><a href=\"https://www.quandl.com/\">Quandl</a> — your perfect choice for testing your machine learning algorithms and don’t waste your time on cleaning data.</li>\n<li><a href=\"https://www.reddit.com/r/datasets/\">r/datasets</a>.</li>\n<li><a href=\"https://snap.stanford.edu/data/\">Stanford Large Network Dataset Collection</a>.</li>\n<li><a href=\"https://archive.ics.uci.edu/ml/index.html\">UCI</a></li>\n<li><a href=\"https://www.tensorflow.org/datasets/catalog/overview\">TensorFlow Datasets</a></li>\n<li><a href=\"https://webscope.sandbox.yahoo.com/\">The Yahoo Webscope Program</a></li>\n<li><a href=\"https://pytorch.org/docs/stable/torchvision/datasets.html\">torchvision.datasets</a></li>\n<li><a href=\"http://gpcv.whu.edu.cn/data/\">WHU-RS Datasets</a> -- Dataset Collection by Group of Photogrammetry and Computer Vision (GPCV) at Wuhan University.</li>\n</ul>\n<h2 id=\"specific-datasets\">Specific Datasets <a class=\"direct-link\" href=\"#specific-datasets\">#</a></h2>\n<ul>\n<li><a href=\"https://cocodataset.org/#home\">COCO Dataset</a> -- a large-scale object detection, segmentation, and captioning dataset.</li>\n<li><a href=\"https://github.com/jbrownlee/Datasets\">Dataset samples from Machine Learning Mastery</a>.</li>\n<li><a href=\"https://github.com/Horea94/Fruit-Images-Dataset\">Fruit-Images-Dataset</a> — A dataset of images containing fruits and vegetables.</li>\n<li><a href=\"https://github.com/cvdfoundation/google-landmark\">google-landmark</a> -- Dataset with 5 million images depicting human-made and natural landmarks spanning 200 thousand classes.</li>\n<li><a href=\"http://www.image-net.org/\">ImageNet</a> -- ImageNet is an image database organized according to the WordNet hierarchy.</li>\n<li><a href=\"http://mlg.ucd.ie/datasets/bbc.html\">Insight - BBC News Datasets</a></li>\n<li><a href=\"http://mmlab.ie.cuhk.edu.hk/projects/CelebA.html\">Large-scale CelebFaces Attributes (CelebA) Dataset</a></li>\n<li><a href=\"http://ai.stanford.edu/~amaas/data/sentiment/\">Large Movie Review Dataset (IMDB)</a></li>\n<li><a href=\"http://places.csail.mit.edu/\">MIT Places Database for Scene Recognition</a>.</li>\n<li><a href=\"https://rishabhmisra.github.io/publications/\">Sarcasm detection dataset.</a></li>\n<li><a href=\"https://timeseriesclassification.com/\">UEA &amp; UCR Time Series Classification Repository</a></li>\n<li><a href=\"https://wordnet.princeton.edu/\">WordNet</a> -- A Lexical Database for English.</li>\n</ul>\n<h3 id=\"vietnamese\">Vietnamese <a class=\"direct-link\" href=\"#vietnamese\">#</a></h3>\n<p>👉 Note: <a href=\"/data-ml-tools-resources/#for-vietnamese\">Resources for DS &amp; ML &amp; DL.</a></p>\n<ul>\n<li><a href=\"https://nlp.stanford.edu/projects/nmt/\">IWSLT'15 English-Vietnamese data</a> (small from Stanford).</li>\n<li><a href=\"http://nlpprogress.com/#vietnamese\">NLP-progress - Vietnamese</a></li>\n<li><a href=\"https://github.com/VinAIResearch/PhoBERT\">PhoBERT</a> -- Pre-trained language models for Vietnamese.</li>\n<li><a href=\"https://github.com/datquocnguyen/PhoW2V\">PhoW2V</a> (2020): Pre-trained Word2Vec syllable- and word-level embeddings for Vietnamese.</li>\n<li><a href=\"https://github.com/VinAIResearch/ViText2SQL\">ViText2SQL</a> (EMNLP 2020 Findings): A dataset for Vietnamese Text2SQL semantic parsing.</li>\n<li><a href=\"https://github.com/vncorenlp/VnCoreNLP\">VnCoreNLP</a> (NAACL 2018): A Vietnamese NLP pipeline of word (and sentence) segmentation, POS tagging, named entity recognition and dependency parsing.</li>\n</ul>\n<h2 id=\"sample-datasets\">Sample datasets <a class=\"direct-link\" href=\"#sample-datasets\">#</a></h2>\n<ul>\n<li><a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.datasets.load_iris.html\">Iris flower dataset</a> (<code>from sklearn.datasets import load_iris</code>).</li>\n<li><a href=\"http://vis-www.cs.umass.edu/lfw/\">Labeled Faces in the Wild Home</a> (<code>from sklearn.datasets import fetch_lfw_people</code>).</li>\n<li><a href=\"https://github.com/SamEdwardes/pydatafaker\">pydatafaker</a> -- A python package to create fake data with relationships between tables.</li>\n<li><a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.datasets.load_digits.html\">The digits dataset</a> (<code>sklearn.datasets.load_digits</code>).</li>\n</ul>\n<h2 id=\"tools\">Tools <a class=\"direct-link\" href=\"#tools\">#</a></h2>\n<ul>\n<li><a href=\"https://github.com/TimeSynth/TimeSynth\">TimeSynth</a> -- A Multipurpose Library for Synthetic Time Series Generation in Python.</li>\n</ul>\n",
      "date_published": "2019-09-28T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/gambler-ruin-problem/",
      "url": "https://dinhanhthi.com/gambler-ruin-problem/",
      "title": "Gamler Ruin Problem",
      "content_html": "<p>Consider a gambler who starts with an initial fortune of <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span></span>$ and then on each successive gamble either wins <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></span>$ or loses <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></span>$ independent of the past with probabilities <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span></span> and <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>q</mi><mo>=</mo><mn>1</mn><mo>−</mo><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">q = 1-p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span></span> respectively. The gambler's objective is to reach a total fortune of <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span></span></span>$, without first getting ruined (running out of money).</p>\n<p>Let <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">P_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> be the probability that the gambler wins when starting with <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span></span>$, we have</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><msub><mi>P</mi><mn>0</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><msub><mi>P</mi><mi>N</mi></msub></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><msub><mi>P</mi><mi>i</mi></msub></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mi>p</mi><msub><mi>P</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>+</mo><mi>q</mi><msub><mi>P</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\n\\begin{aligned}\nP_0 &amp;= 0 \\\\\nP_N &amp;= 1 \\\\\nP_i &amp;= pP_{i+1} + qP_{i-1}\n\\end{aligned}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:4.500000000000002em;vertical-align:-2.000000000000001em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.5000000000000004em;\"><span style=\"top:-4.66em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.16em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-1.6599999999999993em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.000000000000001em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.5000000000000004em;\"><span style=\"top:-4.66em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">0</span></span></span><span style=\"top:-3.16em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">1</span></span></span><span style=\"top:-1.6599999999999993em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.000000000000001em;\"><span></span></span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n<p>Finally,</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><msub><mi>P</mi><mi>i</mi></msub><mo>=</mo><mrow><mo fence=\"true\">{</mo><mtable rowspacing=\"0.3599999999999999em\" columnalign=\"left left\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mstyle displaystyle=\"true\" scriptlevel=\"0\"><mfrac><mrow><mn>1</mn><mo>−</mo><mfrac><mi>q</mi><mi>p</mi></mfrac></mrow><mrow><mn>1</mn><mo>−</mo><mo stretchy=\"false\">(</mo><mfrac><mi>q</mi><mi>p</mi></mfrac><msup><mo stretchy=\"false\">)</mo><mi>N</mi></msup></mrow></mfrac></mstyle><mo separator=\"true\">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mtext>if </mtext><mi>p</mi><mo mathvariant=\"normal\">≠</mo><mi>q</mi><mo separator=\"true\">;</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mstyle displaystyle=\"true\" scriptlevel=\"0\"><mfrac><mn>1</mn><mi>N</mi></mfrac></mstyle></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mtext>if </mtext><mi>p</mi><mo>=</mo><mi>q</mi><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mi mathvariant=\"normal\">.</mi></mrow></mstyle></mtd></mtr></mtable></mrow></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\n\\begin{aligned}\nP_i = \\begin{cases}\n\\dfrac{1-\\frac{q}{p}}{1-(\\frac{q}{p})^N}, &amp; \\text{if } p \\ne q; \\\\\n\\dfrac{1}{N} &amp;\\text{if }p=q=\\frac{1}{2}.\n\\end{cases}\n\\end{aligned}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:5.100040000000001em;vertical-align:-2.3000200000000004em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.8000200000000004em;\"><span style=\"top:-4.80002em;\"><span class=\"pstrut\" style=\"height:4.6500200000000005em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"minner\"><span class=\"mopen\"><span class=\"delimsizing mult\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.6500200000000005em;\"><span style=\"top:-1.8999899999999998em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎩</span></span></span><span style=\"top:-1.89499em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-2.18999em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-2.20499em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-3.15001em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎨</span></span></span><span style=\"top:-4.2950099999999996em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-4.59001em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-4.60501em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-4.90002em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎧</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.15002em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.646578em;\"><span style=\"top:-4.646578em;\"><span class=\"pstrut\" style=\"height:3.618608em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.618608em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7475em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.446108em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">q</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.481108em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.767331em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.871108em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7475em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.446108em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">q</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.481108em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.167108em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mpunct\">,</span></span></span><span style=\"top:-2.15803em;\"><span class=\"pstrut\" style=\"height:3.618608em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.146578em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:1em;\"></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.646578em;\"><span style=\"top:-4.646578em;\"><span class=\"pstrut\" style=\"height:3.618608em;\"></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">if </span></span><span class=\"mord mathnormal\">p</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord vbox\"><span class=\"thinbox\"><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"inner\"><span class=\"mrel\"></span></span><span class=\"fix\"></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"mpunct\">;</span></span></span><span style=\"top:-2.15803em;\"><span class=\"pstrut\" style=\"height:3.618608em;\"></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">if </span></span><span class=\"mord mathnormal\">p</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\">.</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.146578em;\"><span></span></span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.3000200000000004em;\"><span></span></span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n<p>Note that, <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mo>−</mo><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">1-P_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> is the probability of ruin.</p>\n<p><strong class=\"tbrown\">Another type of this question</strong>: Consider an ant walking along the positive integers. At position <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span></span>, the ant moves to <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">i+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.74285em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></span> with probabilities <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span></span> and to <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">i-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.74285em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></span> with probabilities <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>q</mi></mrow><annotation encoding=\"application/x-tex\">q</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span></span></span></span></span>. If the ant reach <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></span>, it stops walking. Starting from <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">i&gt;0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69862em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></span>, what is the probability that the ant reaches <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>=</mo><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">i=N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span></span></span> before reaching <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></span>?</p>\n<p>Sometimes, we consider above problem as a <a href=\"https://en.wikipedia.org/wiki/Random_walk\">random walk</a> problem. This post is copied from <a href=\"http://www.columbia.edu/~ks20/FE-Notes/4700-07-Notes-GR.pdf\">this</a> and we have a backup version <a href=\"/files/stats/GamblerRuinProblem.pdf\">here</a>.</p>\n",
      "date_published": "2019-09-26T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/support-vector-machine/",
      "url": "https://dinhanhthi.com/support-vector-machine/",
      "title": "Support Vector Machine (SVM)",
      "content_html": "<h2 id=\"what's-the-idea-of-svm%3F\">What's the idea of SVM? <a class=\"direct-link\" href=\"#what's-the-idea-of-svm%3F\">#</a></h2>\n<p>SVM (also called <em>Maximum Margin Classifier</em>) is an algorithm that takes the data as an input and outputs a line/hyperplane that separates those classes if possible.</p>\n<p>Suppose that we need to separate two classes of a dataset. The task is to <mark>find a line to separate them</mark>. However, there are many lines which can do that (countless number of lines). How can we choose the best one?</p>\n<p><img src=\"/img/post/ML/support-vector-machine/svm-1.jpg\" alt=\"An idea of support vectors and SVM.\" class=\"img-full-90 pop\"><br>\n<em>An idea of support vectors (samples on the margin) and SVM (find the optimal hyperplane).</em></p>\n<div class=\"hsbox\"><div class=\"hs__title\">More mathematical details on finding a hyperplane</div><div class=\"hs__content\"><p>We need to find a hyperplane <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>H</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(H)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mclose\">)</span></span></span></span></span>: <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi mathvariant=\"bold\">w</mi><mi>T</mi></msup><mi mathvariant=\"bold\">x</mi><mo>+</mo><mi>b</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">\\mathbf{w}^T\\mathbf{x} + b = 0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.924661em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8413309999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></span> where the weights <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"bold\">w</mi><mo>=</mo><mo stretchy=\"false\">(</mo><msub><mi>w</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>w</mi><mi>d</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathbf{w}=(w_1,\\ldots,w_d)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.44444em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">d</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span> and a point <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"bold\">x</mi><mo>=</mo><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>d</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathbf{x}=(x_1,\\ldots,x_d)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.44444em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">d</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span>. For example, in 2D (<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">d=2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span></span>), we need to find a hyperplane <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>w</mi><mn>1</mn></msub><msub><mi>x</mi><mn>1</mn></msub><mo>+</mo><msub><mi>w</mi><mn>2</mn></msub><msub><mi>x</mi><mn>2</mn></msub><mo>+</mo><mi>b</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">w_1x_1 + w_2x_2 + b=0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.73333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></span>. Note also that, the distance between a point <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"bold\">x</mi><mn>0</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbf{x}_0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.59444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> and <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>H</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(H)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mclose\">)</span></span></span></span></span> is given by,</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mtext>d</mtext><mo stretchy=\"false\">(</mo><msub><mi mathvariant=\"bold\">x</mi><mn>0</mn></msub><mo separator=\"true\">,</mo><mi>H</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mfrac><mrow><mi mathvariant=\"normal\">∣</mi><msup><mi mathvariant=\"bold\">w</mi><mi>T</mi></msup><msub><mi mathvariant=\"bold\">x</mi><mn>0</mn></msub><mo>+</mo><mi>b</mi><mi mathvariant=\"normal\">∣</mi></mrow><mrow><mi mathvariant=\"normal\">∥</mi><mi mathvariant=\"bold\">w</mi><msub><mi mathvariant=\"normal\">∥</mi><mn>2</mn></msub></mrow></mfrac><mo separator=\"true\">,</mo><mspace width=\"1em\"/><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\n\\text{d}(\\mathbf{x}_0, H) = \\frac{\\vert\\mathbf{w}^T\\mathbf{x}_0 + b\\vert}{\\Vert\\mathbf{w}\\Vert_2}, \\quad (1)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord text\"><span class=\"mord\">d</span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.454331em;vertical-align:-0.936em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.5183309999999999em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">∥</span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mord\"><span class=\"mord\">∥</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8413309999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mord\">∣</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.936em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></span></eqn></section></math>\n<p>where <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∥</mi><mi mathvariant=\"bold\">w</mi><msub><mi mathvariant=\"normal\">∥</mi><mn>2</mn></msub><mo>=</mo><msqrt><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>d</mi></msubsup><msubsup><mi>w</mi><mi>i</mi><mn>2</mn></msubsup></mrow></msqrt></mrow><annotation encoding=\"application/x-tex\">\\Vert\\mathbf{w}\\Vert_2 = \\sqrt{\\sum_{i=1}^d w_i^2}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∥</span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mord\"><span class=\"mord\">∥</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.8399999999999999em;vertical-align:-0.5103510000000001em;\"></span><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3296489999999999em;\"><span class=\"svg-align\" style=\"top:-3.8em;\"><span class=\"pstrut\" style=\"height:3.8em;\"></span><span class=\"mord\" style=\"padding-left:1em;\"><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9890079999999999em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">d</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7959080000000001em;\"><span style=\"top:-2.4231360000000004em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.0448000000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.27686399999999994em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.289649em;\"><span class=\"pstrut\" style=\"height:3.8em;\"></span><span class=\"hide-tail\" style=\"min-width:1.02em;height:1.8800000000000001em;\"><svg width='400em' height='1.8800000000000001em' viewBox='0 0 400000 1944' preserveAspectRatio='xMinYMin slice'><path d='M983 90\nl0 -0\nc4,-6.7,10,-10,18,-10 H400000v40\nH1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7\ns-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744\nc-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30\nc26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722\nc56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5\nc53.7,-170.3,84.5,-266.8,92.5,-289.5z\nM1001 80h400000v40h-400000z'/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5103510000000001em;\"><span></span></span></span></span></span></span></span></span></span>.</p>\n<p>In order to understand the idea, we consider a 2D case with the classification of 2 classes (blue faces  are numbered as &quot;<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">+</span><span class=\"mord\">1</span></span></span></span></span>&quot; and orange faces are numbered as &quot;<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span></span></span></span></span>&quot;).</p>\n<p><img src=\"/img/post/ML/support-vector-machine/svm-6.jpg\" alt=\"Finding a hyperplane.\" class=\"img-full-50\"><br>\n<em>We need to find an optimal hyperplane between 2 classes (find <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>w</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>w</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">w_1, w_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> and <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></span>).</em></p>\n<p>Recall that a <strong>margin</strong> (<em>geometric margin</em>) is the minimum distance between a hyperplane and the closest point(s) to it. Thanks to <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></span>, we can find the margin to a hyperplane by determining the closet distance from an arbitrary points <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(\\mathbf{x}_i, y_i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span> to that hyperplane via,</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mtext>margin</mtext><mo>=</mo><munder><mo><mi>min</mi><mo>⁡</mo></mo><mi>i</mi></munder><mfrac><mrow><msub><mi>y</mi><mi>i</mi></msub><mo stretchy=\"false\">(</mo><msup><mi mathvariant=\"bold\">w</mi><mi>T</mi></msup><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo>+</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mi mathvariant=\"normal\">∣</mi><mi mathvariant=\"normal\">∣</mi><mi mathvariant=\"bold\">w</mi><mi mathvariant=\"normal\">∣</mi><msub><mi mathvariant=\"normal\">∣</mi><mn>2</mn></msub></mrow></mfrac><mi mathvariant=\"normal\">.</mi><mspace width=\"1em\"/><mo stretchy=\"false\">(</mo><mn>2</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\n\\text{margin} = \\min_i \\frac{y_i(\\mathbf{w}^T\\mathbf{x}_i + b)}{||\\mathbf{w}||_2}. \\quad (2)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8623000000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord text\"><span class=\"mord\">margin</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.454331em;vertical-align:-0.936em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.66786em;\"><span style=\"top:-2.372336em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\">min</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.727664em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.5183309999999999em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">∣</span><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord\">∣</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8413309999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.936em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\">.</span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">2</span><span class=\"mclose\">)</span></span></span></span></span></eqn></section></math>\n<p>Note that, because <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>y</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">y_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> takes values <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span></span></span></span></span> or <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">+</span><span class=\"mord\">1</span></span></span></span></span> and it always has the same sign as <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi mathvariant=\"bold\">w</mi><mi>T</mi></msup><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo>+</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbf{w}^T\\mathbf{x}_i + b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.991331em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8413309999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></span>, <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>y</mi><mi>i</mi></msub><mo stretchy=\"false\">(</mo><msup><mi mathvariant=\"bold\">w</mi><mi>T</mi></msup><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo>+</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">y_i(\\mathbf{w}^T\\mathbf{x}_i + b)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0913309999999998em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8413309999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span></span></span></span></span> is always positive.</p>\n<p>The SVM problem is to find (<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"bold\">w</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbf{w}, b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></span>) so that the <em>hard-margin</em> <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mn>2</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">2</span><span class=\"mclose\">)</span></span></span></span></span> has the maximum value, i.e.,</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">w</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mi>arg</mi><mo>⁡</mo><munder><mo><mi>max</mi><mo>⁡</mo></mo><mrow><mi mathvariant=\"bold\">w</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow></munder><mrow><mo fence=\"true\">(</mo><munder><mo><mi>min</mi><mo>⁡</mo></mo><mi>i</mi></munder><mfrac><mrow><msub><mi>y</mi><mi>i</mi></msub><mo stretchy=\"false\">(</mo><msup><mi mathvariant=\"bold\">w</mi><mi>T</mi></msup><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo>+</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mi mathvariant=\"normal\">∥</mi><mi mathvariant=\"bold\">w</mi><msub><mi mathvariant=\"normal\">∥</mi><mn>2</mn></msub></mrow></mfrac><mo fence=\"true\">)</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mi>arg</mi><mo>⁡</mo><munder><mo><mi>max</mi><mo>⁡</mo></mo><mrow><mi mathvariant=\"bold\">w</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow></munder><mrow><mo fence=\"true\">(</mo><mfrac><mn>1</mn><mrow><mi mathvariant=\"normal\">∥</mi><mi mathvariant=\"bold\">w</mi><msub><mi mathvariant=\"normal\">∥</mi><mn>2</mn></msub></mrow></mfrac><munder><mo><mi>min</mi><mo>⁡</mo></mo><mi>i</mi></munder><msub><mi>y</mi><mi>i</mi></msub><mo stretchy=\"false\">(</mo><msup><mi mathvariant=\"bold\">w</mi><mi>T</mi></msup><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo>+</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo fence=\"true\">)</mo></mrow></mrow></mstyle></mtd></mtr></mtable><mspace width=\"1em\"/><mo stretchy=\"false\">(</mo><mn>3</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\n\\begin{aligned}\n(\\mathbf{w}, b)\n&amp;= \\arg \\max_{\\mathbf{w}, b} \\left(\n    \\min_i \\frac{y_i(\\mathbf{w}^T\\mathbf{x}_i + b)}{\\Vert\\mathbf{w}\\Vert_2}\n\\right)\\\\\n&amp;= \\arg \\max_{\\mathbf{w}, b}\\left(\n    \\frac{1}{\\Vert\\mathbf{w}\\Vert_2} \\min_i y_i(\\mathbf{w}^T\\mathbf{x}_i + b)\n\\right)\n\\end{aligned} \\quad (3)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:5.4683910000000004em;vertical-align:-2.4841955000000002em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.9841955000000002em;\"><span style=\"top:-4.9841955em;\"><span class=\"pstrut\" style=\"height:3.518331em;\"></span><span class=\"mord\"><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span></span></span><span style=\"top:-2.2841655em;\"><span class=\"pstrut\" style=\"height:3.518331em;\"></span><span class=\"mord\"></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.4841955000000002em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.9841955000000002em;\"><span style=\"top:-4.9841955em;\"><span class=\"pstrut\" style=\"height:3.518331em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mop\">ar<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.43055999999999994em;\"><span style=\"top:-2.3478920000000003em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathbf mtight\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">b</span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\">max</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8882159999999999em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">(</span></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.66786em;\"><span style=\"top:-2.372336em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\">min</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.727664em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.5183309999999999em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">∥</span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mord\"><span class=\"mord\">∥</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8413309999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.936em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">)</span></span></span></span></span><span style=\"top:-2.2841655em;\"><span class=\"pstrut\" style=\"height:3.518331em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mop\">ar<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.43055999999999994em;\"><span style=\"top:-2.3478920000000003em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathbf mtight\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">b</span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\">max</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8882159999999999em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">(</span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">∥</span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mord\"><span class=\"mord\">∥</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.936em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.66786em;\"><span style=\"top:-2.372336em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\">min</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.727664em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913309999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">)</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.4841955000000002em;\"><span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">3</span><span class=\"mclose\">)</span></span></span></span></span></eqn></section></math>\n<p>(<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>arg</mi><mo>⁡</mo></mrow><annotation encoding=\"application/x-tex\">\\arg</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mop\">ar<span style=\"margin-right:0.01389em;\">g</span></span></span></span></span></span> means you need to find <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"bold\">w</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbf{w},b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></span> so that the function reaches the <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>max</mi><mo>⁡</mo></mrow><annotation encoding=\"application/x-tex\">\\max</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mop\">max</span></span></span></span></span>.)</p>\n<p>This is an optimal problem. Another remark is that we can multiply both sides of <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>H</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(H)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mclose\">)</span></span></span></span></span> by any real number <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi><mo mathvariant=\"normal\">≠</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">k\\ne 0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord vbox\"><span class=\"thinbox\"><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"inner\"><span class=\"mrel\"></span></span><span class=\"fix\"></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></span>, we obtain the same <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>H</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(H)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mclose\">)</span></span></span></span></span>. With that reason, we can suppose that,</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>y</mi><mi>i</mi></msub><mo stretchy=\"false\">(</mo><msup><mi mathvariant=\"bold\">w</mi><mi>T</mi></msup><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo>+</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mn>1</mn><mo separator=\"true\">,</mo></mrow><annotation encoding=\"application/x-tex\">\ny_i(\\mathbf{w}^T\\mathbf{x}_i + b) = 1,\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1413309999999999em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913309999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span></span></span></span></span></eqn></section></math>\n<p>for all points on the hyperplane, and the problem <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mn>3</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(3)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">3</span><span class=\"mclose\">)</span></span></span></span></span> becomes,</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">w</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>arg</mi><mo>⁡</mo><munder><mo><mi>max</mi><mo>⁡</mo></mo><mrow><mi mathvariant=\"bold\">w</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow></munder><mfrac><mn>1</mn><mrow><mi mathvariant=\"normal\">∥</mi><mi mathvariant=\"bold\">w</mi><msub><mi mathvariant=\"normal\">∥</mi><mn>2</mn></msub></mrow></mfrac></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mtext>subject to</mtext></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mtext>  </mtext><msub><mi>y</mi><mi>i</mi></msub><mo stretchy=\"false\">(</mo><msup><mi mathvariant=\"bold\">w</mi><mi>T</mi></msup><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo>+</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>≥</mo><mn>1</mn><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">∀</mi><mi>i</mi><mo>=</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mi>N</mi><mi mathvariant=\"normal\">.</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\n\\begin{aligned}\n    &amp;(\\mathbf{w}, b) = \\arg\\max_{\\mathbf{w}, b} \\frac{1}{\\Vert\\mathbf{w}\\Vert_2}   \\\\\n    \\text{subject to} &amp;~~ y_i(\\mathbf{w}^T\\mathbf{x}_i + b) \\geq 1, \\forall i = 1, 2, \\dots, N.\n\\end{aligned}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:4.108771em;vertical-align:-1.8043855em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.3043855em;\"><span style=\"top:-4.3043855em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"></span></span><span style=\"top:-2.1770545em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">subject to</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8043855em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.3043855em;\"><span style=\"top:-4.3043855em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mop\">ar<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.43055999999999994em;\"><span style=\"top:-2.3478920000000003em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathbf mtight\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">b</span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\">max</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8882159999999999em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">∥</span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mord\"><span class=\"mord\">∥</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.936em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span><span style=\"top:-2.1770545em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace nobreak\"> </span><span class=\"mspace nobreak\"> </span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913309999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">∀</span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord\">.</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8043855em;\"><span></span></span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n<p>The second line due to the fact that the closet points have distance <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></span> to the hyperplane, the other points have distance greater than <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></span>. We can write above problem as,</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">w</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>arg</mi><mo>⁡</mo><munder><mo><mi>min</mi><mo>⁡</mo></mo><mrow><mi mathvariant=\"bold\">w</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow></munder><mfrac><mn>1</mn><mn>2</mn></mfrac><mi mathvariant=\"normal\">∥</mi><mi mathvariant=\"bold\">w</mi><msubsup><mi mathvariant=\"normal\">∥</mi><mn>2</mn><mn>2</mn></msubsup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mtext>subject to</mtext></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mtext>  </mtext><msub><mi>y</mi><mi>i</mi></msub><mo stretchy=\"false\">(</mo><msup><mi mathvariant=\"bold\">w</mi><mi>T</mi></msup><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo>+</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>−</mo><mn>1</mn><mo>≥</mo><mn>0</mn><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">∀</mi><mi>i</mi><mo>=</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mi>N</mi><mi mathvariant=\"normal\">.</mi></mrow></mstyle></mtd></mtr></mtable><mspace width=\"1em\"/><mo stretchy=\"false\">(</mo><mn>4</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\n\\begin{aligned}\n    &amp;(\\mathbf{w}, b) = \\arg\\min_{\\mathbf{w}, b} \\frac{1}{2}\\Vert\\mathbf{w}\\Vert_2^2   \\\\\n    \\text{subject to} &amp;~~ y_i(\\mathbf{w}^T\\mathbf{x}_i + b)-1 \\geq 0, \\forall i = 1, 2, \\dots, N.\n\\end{aligned} \\quad (4)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:4.060987em;vertical-align:-1.7804935000000004em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.2804934999999995em;\"><span style=\"top:-4.2804934999999995em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"></span></span><span style=\"top:-2.2009464999999997em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">subject to</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.7804935000000004em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.2804934999999995em;\"><span style=\"top:-4.2804934999999995em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mop\">ar<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.66786em;\"><span style=\"top:-2.3478920000000003em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathbf mtight\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">b</span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\">min</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8882159999999999em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\">∥</span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mord\"><span class=\"mord\">∥</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-2.2009464999999997em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace nobreak\"> </span><span class=\"mspace nobreak\"> </span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913309999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">∀</span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord\">.</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.7804935000000004em;\"><span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">4</span><span class=\"mclose\">)</span></span></span></span></span></eqn></section></math>\n<p>This is called &quot;<em>primal formulation of linear SVMs</em>&quot;. In mathematical optimization, one can prove that the problem <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mn>4</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(4)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">4</span><span class=\"mclose\">)</span></span></span></span></span> has an unique solution (We can get an unique hyperplane <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>H</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(H)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mclose\">)</span></span></span></span></span> which satisfies the classification problem). Such problems are generally called <a href=\"https://en.wikipedia.org/wiki/Quadratic_programming\">quadratic programming</a> problems.</p>\n<p>Problem <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mn>4</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(4)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">4</span><span class=\"mclose\">)</span></span></span></span></span> can be solved &quot;more easily&quot; by considering its <a href=\"https://en.wikipedia.org/wiki/Duality_(optimization)\">dual formulation</a>. Apply the method of <a href=\"https://en.wikipedia.org/wiki/Lagrange_multiplier\">Lagrange multipliers</a>, we define a Lagrangian,</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi mathvariant=\"normal\">Λ</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">w</mi><mo separator=\"true\">,</mo><mi>b</mi><mo separator=\"true\">,</mo><mi>λ</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mi mathvariant=\"normal\">∥</mi><mi mathvariant=\"bold\">w</mi><msubsup><mi mathvariant=\"normal\">∥</mi><mn>2</mn><mn>2</mn></msubsup><mo>−</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>λ</mi><mi>i</mi></msub><mo stretchy=\"false\">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo stretchy=\"false\">(</mo><msup><mi mathvariant=\"bold\">w</mi><mi>T</mi></msup><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo>+</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>−</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo></mrow><annotation encoding=\"application/x-tex\">\n\\Lambda(\\mathbf{w},b,\\lambda) = \\dfrac{1}{2}\\Vert \\mathbf{w}\\Vert_2^2 - \\sum_{i=1}^N \\lambda_i(y_i(\\mathbf{w}^T\\mathbf{x}_i+b)-1),\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">Λ</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">λ</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.00744em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\">∥</span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mord\"><span class=\"mord\">∥</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.106005em;vertical-align:-1.277669em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8283360000000002em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913309999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span></span></span></span></span></eqn></section></math>\n<p>where <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"bold\">w</mi><mo separator=\"true\">,</mo><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbf{w}, \\mathbf{x}_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.63888em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> are vectors with <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">d</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">d</span></span></span></span></span> elements and <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>λ</mi></mrow><annotation encoding=\"application/x-tex\">\\lambda</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">λ</span></span></span></span></span> is a vector with <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span></span></span> elements. We need to minimize this Lagrangian w.r.t. <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"bold\">w</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbf{w}, b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></span> and simultaneously require that the derivative w.r.t. <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>λ</mi></mrow><annotation encoding=\"application/x-tex\">\\lambda</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">λ</span></span></span></span></span> vanishes,  all subject to the constraints that <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>λ</mi><mi>i</mi></msub><mo>≥</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">\\lambda_i \\ge 0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></span>. If we set the derivatives w.r.t. <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"bold\">w</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbf{w}, b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></span>, we obtain,</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi mathvariant=\"normal\">Λ</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">w</mi><mo separator=\"true\">,</mo><mi>b</mi><mo separator=\"true\">,</mo><mi>λ</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi>b</mi></mrow></mfrac></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mn>0</mn><mo>⇒</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>λ</mi><mi>i</mi></msub><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><mn>0</mn><mo separator=\"true\">,</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mfrac><mrow><mi mathvariant=\"normal\">∂</mi><mi mathvariant=\"normal\">Λ</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">w</mi><mo separator=\"true\">,</mo><mi>b</mi><mo separator=\"true\">,</mo><mi>λ</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mi mathvariant=\"normal\">∂</mi><mi mathvariant=\"bold\">w</mi></mrow></mfrac></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mn>0</mn><mo>⇒</mo><mi mathvariant=\"bold\">w</mi><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>λ</mi><mi>i</mi></msub><msub><mi>y</mi><mi>i</mi></msub><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mi mathvariant=\"normal\">.</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\n\\begin{aligned}\n\\dfrac{\\partial \\Lambda(\\mathbf{w},b,\\lambda)}{\\partial b} &amp;= 0 \\Rightarrow \\sum_{i=1}^N\\lambda_iy_i=0, \\\\\n\\dfrac{\\partial \\Lambda(\\mathbf{w},b,\\lambda)}{\\partial \\mathbf{w}} &amp;= 0 \\Rightarrow \\mathbf{w}=\\sum_{i=1}^N\\lambda_iy_i\\mathbf{x}_i.\n\\end{aligned}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:6.812010000000001em;vertical-align:-3.1560050000000004em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.6560050000000004em;\"><span style=\"top:-5.656005em;\"><span class=\"pstrut\" style=\"height:3.828336em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.427em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mathnormal\">b</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\">Λ</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">λ</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span><span style=\"top:-2.25em;\"><span class=\"pstrut\" style=\"height:3.828336em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.427em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord\">Λ</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">λ</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.1560050000000004em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.6560050000000004em;\"><span style=\"top:-5.656005em;\"><span class=\"pstrut\" style=\"height:3.828336em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8283360000000002em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span></span></span><span style=\"top:-2.25em;\"><span class=\"pstrut\" style=\"height:3.828336em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⇒</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8283360000000002em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">.</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.1560050000000004em;\"><span></span></span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n<p>We substitute the above into the equation for <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">Γ</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">w</mi><mo separator=\"true\">,</mo><mi>b</mi><mo separator=\"true\">,</mo><mi>λ</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\Gamma(\\mathbf{w},b,\\lambda)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">Γ</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">λ</span><span class=\"mclose\">)</span></span></span></span></span> and obtain &quot;<em>dual formulation of linear SVMs</em>&quot;,</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mi>λ</mi><mo>=</mo><mi>arg</mi><mo>⁡</mo><munder><mo><mi>max</mi><mo>⁡</mo></mo><mi>λ</mi></munder><mrow><mo fence=\"true\">(</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>λ</mi><mi>i</mi></msub><mo>−</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>λ</mi><mi>i</mi></msub><msub><mi>λ</mi><mi>j</mi></msub><msub><mi>y</mi><mi>i</mi></msub><msub><mi>y</mi><mi>j</mi></msub><msubsup><mi mathvariant=\"bold\">x</mi><mi>i</mi><mi>T</mi></msubsup><msub><mi mathvariant=\"bold\">x</mi><mi>j</mi></msub><mo fence=\"true\">)</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mtext>subject to</mtext></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mtext>  </mtext><msub><mi>λ</mi><mi>i</mi></msub><mo>≥</mo><mn>0</mn><mo separator=\"true\">,</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>λ</mi><mi>i</mi></msub><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><mn>0</mn><mo separator=\"true\">,</mo><mtext> </mtext><mi mathvariant=\"normal\">∀</mi><mi>i</mi><mo>=</mo><mn>1</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mi>N</mi><mi mathvariant=\"normal\">.</mi></mrow></mstyle></mtd></mtr></mtable><mspace width=\"1em\"/><mo stretchy=\"false\">(</mo><mn>5</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\n\\begin{aligned}\n    &amp;\\lambda = \\arg\\max_{\\lambda} \\left( \\sum_{i=1}^N \\lambda_i  -\\frac{1}{2}\\sum_{i=1}^N \\sum_{j=1}^N \\lambda_i\\lambda_j y_i y_j \\mathbf{x}_i^T\\mathbf{x}_j \\right)  \\\\\n    \\text{subject to} &amp;~~ \\lambda_i \\ge 0, \\sum_{i=1}^N\\lambda_iy_i = 0, ~\\forall i=1,\\ldots,N.\n\\end{aligned} \\quad (5)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:6.948118000000001em;vertical-align:-3.2240590000000005em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.7240590000000005em;\"><span style=\"top:-5.7240590000000005em;\"><span class=\"pstrut\" style=\"height:3.8283360000000006em;\"></span><span class=\"mord\"></span></span><span style=\"top:-2.181946em;\"><span class=\"pstrut\" style=\"height:3.8283360000000006em;\"></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">subject to</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.2240590000000005em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.7240590000000005em;\"><span style=\"top:-5.7240590000000005em;\"><span class=\"pstrut\" style=\"height:3.8283360000000006em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mord mathnormal\">λ</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mop\">ar<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.43055999999999994em;\"><span style=\"top:-2.347892em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">λ</span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\">max</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.752108em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size4\">(</span></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8283360000000002em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8283360000000002em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8283360000000006em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.4137769999999998em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913309999999999em;\"><span style=\"top:-2.4530000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size4\">)</span></span></span></span></span><span style=\"top:-2.181946em;\"><span class=\"pstrut\" style=\"height:3.8283360000000006em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace nobreak\"> </span><span class=\"mspace nobreak\"> </span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8283360000000002em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace nobreak\"> </span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">∀</span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord\">.</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.2240590000000005em;\"><span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">5</span><span class=\"mclose\">)</span></span></span></span></span></eqn></section></math>\n<p>in that, <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"bold\">w</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbf{w}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.44444em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span></span></span></span></span> is defined in terms of <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>λ</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\lambda_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>: <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"bold\">w</mi><mo>=</mo><msubsup><mo>∑</mo><mn>1</mn><mi>N</mi></msubsup><msub><mi>λ</mi><mi>i</mi></msub><msub><mi>y</mi><mi>i</mi></msub><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbf{w} = \\sum_1^N\\lambda_iy_i\\mathbf{x}_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.44444em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.2809409999999999em;vertical-align:-0.29971000000000003em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.981231em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> and the solution becomes</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mtext>sign</mtext><mo stretchy=\"false\">(</mo><msubsup><mi mathvariant=\"normal\">Σ</mi><mn>1</mn><mi>N</mi></msubsup><msub><mi>λ</mi><mi>i</mi></msub><msub><mi>y</mi><mi>i</mi></msub><msubsup><mi mathvariant=\"bold\">x</mi><mi>i</mi><mi>T</mi></msubsup><msub><mi mathvariant=\"bold\">x</mi><mi>j</mi></msub><mo>+</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">.</mi></mrow><annotation encoding=\"application/x-tex\">\nf(\\mathbf{x})=\\text{sign}(\\Sigma_1^N\\lambda_iy_i\\mathbf{x}_i^T\\mathbf{x}_j + b).\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.177439em;vertical-align:-0.286108em;\"></span><span class=\"mord text\"><span class=\"mord\">sign</span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\">Σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913309999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913309999999999em;\"><span style=\"top:-2.4530000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span><span class=\"mord\">.</span></span></span></span></span></eqn></section></math>\n<p>Then given a new instance <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"bold\">x</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbf{x}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.44444em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathbf\">x</span></span></span></span></span></span>, the classifier is,</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mtext>sign</mtext><mo stretchy=\"false\">(</mo><msup><mi mathvariant=\"bold\">w</mi><mi>T</mi></msup><mi mathvariant=\"bold\">x</mi><mo>+</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">.</mi></mrow><annotation encoding=\"application/x-tex\">\nf(\\mathbf{x})=\\text{sign}(\\mathbf{w}^T\\mathbf{x} + b).\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1413309999999999em;vertical-align:-0.25em;\"></span><span class=\"mord text\"><span class=\"mord\">sign</span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913309999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span><span class=\"mord\">.</span></span></span></span></span></eqn></section></math>\n<p>The benefits of using dual formulation are:<sup><a href=\"/files/ml//svm-without-tears.pdf\">[ref, slide 52]</a></sup></p>\n<ul>\n<li>No need to access original data, need to access only dot products <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi mathvariant=\"bold\">x</mi><mi>i</mi><mi>T</mi></msubsup><msub><mi mathvariant=\"bold\">x</mi><mi>j</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbf{x}_i^T\\mathbf{x}_j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1274389999999999em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8413309999999999em;\"><span style=\"top:-2.441336em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.258664em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span></span>.</li>\n<li>Number of free parameters is bounded by the number of support vectors and not by the number of variables<br>\n(beneficial for high-dimensional problems).</li>\n</ul>\n<p>Read more in <a href=\"https://machinelearningcoban.com/2017/04/09/smv/#-bai-toan-doi-ngau-cho-svm\">this post</a> (Vietnamese), <a href=\"/files/ml//svm-without-tears.pdf\">this slide</a> or <a href=\"/files/ml/Duality_for_the_SVM.pdf\">this post</a>.</p>\n</div></div>\n<h2 id=\"using-svm-with-kernel-trick\">Using SVM with kernel trick <a class=\"direct-link\" href=\"#using-svm-with-kernel-trick\">#</a></h2>\n<p>Most of the time, we cannot separate classes in the current dataset easily (not linearly separable data). We need to use <strong>kernel trick</strong> first (<mark>transform from the current dimension to a higher dimension</mark>) and then we use SVM. These classes are not linearly separable.</p>\n<p><img src=\"/img/post/ML/support-vector-machine/svm-2.jpg\" alt=\"An idea of kernel and SVM (1D to 2D).\" class=\"img-full-85 pop\"><br>\n<em>An idea of kernel and SVM. Transform from 1D to 2D. Data is not linearly separable in the <strong>input space</strong> but it is linearly separable in the <strong>feature space</strong> obtained by a kernel.</em></p>\n<p><img src=\"/img/post/ML/support-vector-machine/svm-3.jpg\" alt=\"An idea of kernel and SVM (2D to 3D).\" class=\"img-full-85 pop\"><br>\n<em>An idea of kernel and SVM. Transform from 2D to 3D. Data is not linearly separable in the <strong>input space</strong> but it is linearly separable in the <strong>feature space</strong> obtained by a kernel.</em></p>\n<div class=\"hsbox\"><div class=\"hs__title\">More mathematical details</div><div class=\"hs__content\"><p>Original data <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"bold\">x</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbf{x}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.44444em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathbf\">x</span></span></span></span></span></span> (in input space),<sup><a href=\"/files/ml//svm-without-tears.pdf\">[ref, slide 59]</a></sup></p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mtext>sign</mtext><mo stretchy=\"false\">(</mo><msup><mi mathvariant=\"bold\">w</mi><mi>T</mi></msup><mi mathvariant=\"bold\">x</mi><mo>+</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mspace width=\"1em\"/><mi mathvariant=\"bold\">w</mi><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>λ</mi><mi>i</mi></msub><msub><mi>y</mi><mi>i</mi></msub><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\n\\begin{aligned}\nf(\\mathbf{x}) =\\text{sign}(\\mathbf{w}^T\\mathbf{x} + b), \\quad\n\\mathbf{w} =\\sum_{i=1}^N\\lambda_iy_i\\mathbf{x}_i\n\\end{aligned}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:3.4060050000000004em;vertical-align:-1.4530025em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.9530025000000004em;\"><span style=\"top:-3.9530025em;\"><span class=\"pstrut\" style=\"height:3.828336em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord text\"><span class=\"mord\">sign</span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913309999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8283360000000002em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.4530025em;\"><span></span></span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n<p>Data in a higher dimensional feature space <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">Φ</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\Phi(\\mathbf{x})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">Φ</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"mclose\">)</span></span></span></span></span>,</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right\" columnspacing=\"\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mtext>sign</mtext><mo stretchy=\"false\">(</mo><msup><mi mathvariant=\"bold\">w</mi><mi>T</mi></msup><mi mathvariant=\"normal\">Φ</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">x</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mspace width=\"1em\"/><mi mathvariant=\"bold\">w</mi><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>λ</mi><mi>i</mi></msub><msub><mi>y</mi><mi>i</mi></msub><mi mathvariant=\"normal\">Φ</mi><mo stretchy=\"false\">(</mo><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\n\\begin{aligned}\nf(\\mathbf{x}) =\\text{sign}(\\mathbf{w}^T\\Phi(\\mathbf{x}) + b), \\quad\n\\mathbf{w} =\\sum_{i=1}^N\\lambda_iy_i\\Phi(\\mathbf{x}_i)\n\\end{aligned}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:3.4060050000000004em;vertical-align:-1.4530025em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.9530025000000004em;\"><span style=\"top:-3.9530025em;\"><span class=\"pstrut\" style=\"height:3.828336em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord text\"><span class=\"mord\">sign</span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913309999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span><span class=\"mord\">Φ</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8283360000000002em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">Φ</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.4530025em;\"><span></span></span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n<p>We can rewrite <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">f(\\mathbf{x})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"mclose\">)</span></span></span></span></span> as,</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mtext>sign</mtext><mrow><mo fence=\"true\">(</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>λ</mi><mi>i</mi></msub><msub><mi>y</mi><mi>i</mi></msub><mi mathvariant=\"normal\">Φ</mi><mo stretchy=\"false\">(</mo><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><msup><mo stretchy=\"false\">)</mo><mi>T</mi></msup><mi mathvariant=\"normal\">Φ</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">x</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mi>b</mi><mo fence=\"true\">)</mo></mrow><mo separator=\"true\">,</mo></mrow><annotation encoding=\"application/x-tex\">\nf(\\mathbf{x}) =\\text{sign} \\left( \\sum_{i=1}^N\\lambda_iy_i\\Phi(\\mathbf{x}_i)^T\\Phi(\\mathbf{x}) + b \\right),\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.106005em;vertical-align:-1.277669em;\"></span><span class=\"mord text\"><span class=\"mord\">sign</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size4\">(</span></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8283360000000002em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">Φ</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913309999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span><span class=\"mord\">Φ</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size4\">)</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span></span></span></span></span></eqn></section></math>\n<p>or,</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">x</mi><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mtext>sign</mtext><mo stretchy=\"false\">(</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>λ</mi><mi>i</mi></msub><msub><mi>y</mi><mi>i</mi></msub><mi>K</mi><mo stretchy=\"false\">(</mo><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo separator=\"true\">,</mo><mi mathvariant=\"bold\">x</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>K</mi><mo stretchy=\"false\">(</mo><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo separator=\"true\">,</mo><mi mathvariant=\"bold\">x</mi><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mi mathvariant=\"normal\">Φ</mi><mo stretchy=\"false\">(</mo><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><msup><mo stretchy=\"false\">)</mo><mi>T</mi></msup><mi mathvariant=\"normal\">Φ</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">x</mi><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">.</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\n\\begin{aligned}\nf(\\mathbf{x}) &amp;=\\text{sign}(\\sum_{i=1}^N\\lambda_iy_iK(\\mathbf{x}_i,\\mathbf{x}) + b), \\\\\nK(\\mathbf{x}_i,\\mathbf{x}) &amp;= \\Phi(\\mathbf{x}_i)^T\\Phi(\\mathbf{x}).\n\\end{aligned}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:4.957336000000001em;vertical-align:-2.228668em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.7286680000000008em;\"><span style=\"top:-4.728668000000001em;\"><span class=\"pstrut\" style=\"height:3.828336em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"mclose\">)</span></span></span><span style=\"top:-2.2596680000000005em;\"><span class=\"pstrut\" style=\"height:3.828336em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.228668em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.7286680000000008em;\"><span style=\"top:-4.728668000000001em;\"><span class=\"pstrut\" style=\"height:3.828336em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord text\"><span class=\"mord\">sign</span></span><span class=\"mopen\">(</span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8283360000000002em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span></span></span><span style=\"top:-2.2596680000000005em;\"><span class=\"pstrut\" style=\"height:3.828336em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">Φ</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913309999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span><span class=\"mord\">Φ</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"mclose\">)</span><span class=\"mord\">.</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.228668em;\"><span></span></span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n<p>Therefore, we do not need to know <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">Φ</mi></mrow><annotation encoding=\"application/x-tex\">\\Phi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord\">Φ</span></span></span></span></span> explicitly, we just need to define a <em>kernel function</em> <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi><mo stretchy=\"false\">(</mo><mo>⋅</mo><mo separator=\"true\">,</mo><mo>⋅</mo><mo stretchy=\"false\">)</mo><mo>:</mo><msup><mi mathvariant=\"double-struck\">R</mi><mi>d</mi></msup><mo>×</mo><msup><mi mathvariant=\"double-struck\">R</mi><mi>d</mi></msup><mo>→</mo><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">K(\\cdot,\\cdot): \\mathbb{R}^d\\times \\mathbb{R}^d \\to \\mathbb{R}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mopen\">(</span><span class=\"mord\">⋅</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">⋅</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.932438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbb\">R</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.849108em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">d</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.849108em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbb\">R</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.849108em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">d</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span></span></span></span></span></span>. However, not every function <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi mathvariant=\"double-struck\">R</mi><mi>d</mi></msup><mo>×</mo><msup><mi mathvariant=\"double-struck\">R</mi><mi>d</mi></msup><mo>→</mo><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}^d\\times \\mathbb{R}^d \\to \\mathbb{R}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.932438em;vertical-align:-0.08333em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbb\">R</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.849108em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">d</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.849108em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbb\">R</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.849108em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">d</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span></span></span></span></span></span> can be a valid kernel. It has to satisfy so-called <a href=\"https://en.wikipedia.org/wiki/Mercer%27s_theorem#Mercer's_condition\">Mercer conditions</a>. Otherwise, the underlying quadratic program may not be solvable.</p>\n</div></div>\n<p><mark>A <strong>kernel</strong> is a dot product</mark> in some feature space:</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>K</mi><mo stretchy=\"false\">(</mo><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo separator=\"true\">,</mo><msub><mi mathvariant=\"bold\">x</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo><mo>=</mo><mi mathvariant=\"normal\">Φ</mi><mo stretchy=\"false\">(</mo><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo separator=\"true\">,</mo><msub><mi mathvariant=\"bold\">x</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">.</mi></mrow><annotation encoding=\"application/x-tex\">\nK(\\mathbf{x}_i, \\mathbf{x}_j) = \\Phi(\\mathbf{x}_i, \\mathbf{x}_j).\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mord\">Φ</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mord\">.</span></span></span></span></span></eqn></section></math>\n<p>It also measures <strong>the similarity</strong> between two points <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbf{x}_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.59444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> and <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"bold\">x</mi><mi>j</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbf{x}_j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.730548em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span></span>.</p>\n<p>We have some popular kernels,</p>\n<ul>\n<li><strong>Linear kernel</strong>: <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi><mo stretchy=\"false\">(</mo><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo separator=\"true\">,</mo><msub><mi mathvariant=\"bold\">x</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo><mo>=</mo><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo>⋅</mo><msub><mi mathvariant=\"bold\">x</mi><mi>j</mi></msub></mrow><annotation encoding=\"application/x-tex\">K(\\mathbf{x}_i, \\mathbf{x}_j) = \\mathbf{x}_i \\cdot \\mathbf{x}_j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.59445em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.730548em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span></span>. We use <code>kernel = 'linear'</code> in <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.svm.SVC.html#sklearn.svm.SVC\"><code>sklearn.svm.SVM</code></a>. Linear kernels are rarely used in practice.</li>\n<li><strong>Gaussian kernel</strong> (or <strong><em>Radial Basic Function</em> -- RBF</strong>): <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi><mo stretchy=\"false\">(</mo><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo separator=\"true\">,</mo><msub><mi mathvariant=\"bold\">x</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo><mo>=</mo><mi>exp</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mo>−</mo><mi>γ</mi><mi mathvariant=\"normal\">∥</mi><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo>−</mo><msub><mi mathvariant=\"bold\">x</mi><mi>j</mi></msub><msup><mi mathvariant=\"normal\">∥</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">K(\\mathbf{x}_i, \\mathbf{x}_j) = \\exp(-\\gamma\\Vert \\mathbf{x}_i - \\mathbf{x}_j \\Vert^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">exp</span><span class=\"mopen\">(</span><span class=\"mord\">−</span><span class=\"mord mathnormal\" style=\"margin-right:0.05556em;\">γ</span><span class=\"mord\">∥</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1002159999999999em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\">∥</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span>. It's used the most. We use <code>kernel = 'rbf'</code> (default) with keyword <code>gamma</code> for <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>γ</mi></mrow><annotation encoding=\"application/x-tex\">\\gamma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05556em;\">γ</span></span></span></span></span> (must be greater than <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></span>) in <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.svm.SVC.html#sklearn.svm.SVC\"><code>sklearn.svm.SVM</code></a>.</li>\n<li><strong>Exponential kernel</strong>: <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi><mo stretchy=\"false\">(</mo><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo separator=\"true\">,</mo><msub><mi mathvariant=\"bold\">x</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo><mo>=</mo><mi>exp</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mo>−</mo><mi>γ</mi><mi mathvariant=\"normal\">∥</mi><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo>−</mo><msub><mi mathvariant=\"bold\">x</mi><mi>j</mi></msub><mi mathvariant=\"normal\">∥</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">K(\\mathbf{x}_i, \\mathbf{x}_j) = \\exp(-\\gamma\\Vert \\mathbf{x}_i - \\mathbf{x}_j \\Vert)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">exp</span><span class=\"mopen\">(</span><span class=\"mord\">−</span><span class=\"mord mathnormal\" style=\"margin-right:0.05556em;\">γ</span><span class=\"mord\">∥</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mord\">∥</span><span class=\"mclose\">)</span></span></span></span></span>.</li>\n<li><strong>Polynomial kernel</strong>: <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi><mo stretchy=\"false\">(</mo><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo separator=\"true\">,</mo><msub><mi mathvariant=\"bold\">x</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo><mo>=</mo><mo stretchy=\"false\">(</mo><mi>r</mi><mo>+</mo><mi>γ</mi><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo>⋅</mo><msub><mi mathvariant=\"bold\">x</mi><mi>j</mi></msub><msup><mo stretchy=\"false\">)</mo><mi>d</mi></msup></mrow><annotation encoding=\"application/x-tex\">K(\\mathbf{x}_i, \\mathbf{x}_j) = (r+\\gamma\\mathbf{x}_i \\cdot \\mathbf{x}_j)^d</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.63889em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05556em;\">γ</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.135216em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.849108em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">d</span></span></span></span></span></span></span></span></span></span></span></span>. We use <code>kernel = 'poly'</code> with keyword <code>degree</code> for <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">d</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">d</span></span></span></span></span> and <code>coef0</code> for <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span></span> in <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.svm.SVC.html#sklearn.svm.SVC\"><code>sklearn.svm.SVM</code></a>. It's more popular than RBF in NLP. The most common degree is <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">d = 2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span></span> (quadratic), since larger degrees tend to overfit on NLP problems.<sup><a href=\"https://en.wikipedia.org/wiki/Polynomial_kernel\">[ref]</a></sup></li>\n<li><strong>Hybrid kernel</strong>: <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi><mo stretchy=\"false\">(</mo><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo separator=\"true\">,</mo><msub><mi mathvariant=\"bold\">x</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo><mo>=</mo><mo stretchy=\"false\">(</mo><mi>p</mi><mo>+</mo><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo>⋅</mo><msub><mi mathvariant=\"bold\">x</mi><mi>j</mi></msub><msup><mo stretchy=\"false\">)</mo><mi>q</mi></msup><mi>exp</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mo>−</mo><mi>γ</mi><mi mathvariant=\"normal\">∥</mi><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo>−</mo><msub><mi mathvariant=\"bold\">x</mi><mi>j</mi></msub><msup><mi mathvariant=\"normal\">∥</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">K(\\mathbf{x}_i, \\mathbf{x}_j) = (p+\\mathbf{x}_i \\cdot \\mathbf{x}_j)^q\\exp(-\\gamma\\Vert \\mathbf{x}_i - \\mathbf{x}_j \\Vert^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">p</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.59445em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">q</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\">exp</span><span class=\"mopen\">(</span><span class=\"mord\">−</span><span class=\"mord mathnormal\" style=\"margin-right:0.05556em;\">γ</span><span class=\"mord\">∥</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1002159999999999em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\">∥</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span>.</li>\n<li><strong>Sigmoidal</strong>: <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi><mo stretchy=\"false\">(</mo><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo separator=\"true\">,</mo><msub><mi mathvariant=\"bold\">x</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo><mo>=</mo><mi>tanh</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>γ</mi><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo>⋅</mo><msub><mi mathvariant=\"bold\">x</mi><mi>j</mi></msub><mo>+</mo><mi>r</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">K(\\mathbf{x}_i, \\mathbf{x}_j) = \\tanh(\\gamma\\mathbf{x}_i \\cdot \\mathbf{x}_j+r)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">tanh</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05556em;\">γ</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8694379999999999em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mclose\">)</span></span></span></span></span>. We use <code>kernel = 'sigmoid'</code> with keyword <code>coef0</code> for <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span></span> in <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.svm.SVC.html#sklearn.svm.SVC\"><code>sklearn.svm.SVM</code></a>.</li>\n</ul>\n<p>We can also define a custom kernel thanks to <a href=\"https://scikit-learn.org/stable/modules/svm.html#custom-kernels\">this help</a>.</p>\n<div class=\"success\">\n<p>Choose whatever kernel performs best on cross-validation data. Andrew NG said in his ML course.</p>\n</div>\n<div class=\"hsbox\"><div class=\"hs__title\">Examples of choosing a kernel</div><div class=\"hs__content\"><p><img src=\"/img/post/ML/support-vector-machine/svm-8.jpg\" alt=\"SVM in XOR problem.\" class=\"img-full-90 pop\"><br>\n<em>Using SVM with 3 different kernels in a <a href=\"https://en.wikipedia.org/wiki/Exclusive_or\">XOR problem</a>. In this case, Gaussian kernel is the choice.<sup><a href=\"https://machinelearningcoban.com/2017/04/22/kernelsmv/#4-v%C3%AD-d%E1%BB%A5-minh-h%E1%BB%8Da\">[ref]</a></sup></em></p>\n<p><img src=\"/img/post/ML/support-vector-machine/svm-9.jpg\" alt=\"In the case of almost linearly separable data.\" class=\"img-full-90 pop\"><br>\n<em>Using SVM with 3 different kernels in the case of <strong>almost linearly</strong> separable data. In this case, Polynomial kernel is the choice.</em></p>\n</div></div>\n<h2 id=\"good-or-bad%3F\">Good or Bad? <a class=\"direct-link\" href=\"#good-or-bad%3F\">#</a></h2>\n<p><strong>Advantages</strong>:</p>\n<p class=\"indent\"></p>\n<ul>\n<li>Compared to both logistic regression and NN, a SVM sometimes gives a cleaner way of learning <mark>non-linear functions</mark>.</li>\n<li>SVM is better than NN with 1 layer (Perceptron Learning Algorithm) thanks to the largest margin between 2 classes.</li>\n<li>Accurate in <mark>high-dimensional spaces</mark> + <mark>memory effecient</mark>.</li>\n<li>Good accuracy and perform <mark>faster</mark> prediction compared to <mark>Naïve Bayes algorithm</mark>.<sup><a href=\"https://www.datacamp.com/community/tutorials/svm-classification-scikit-learn-python#advantages\">[ref]</a></sup></li>\n</ul>\n<p><strong>Disadvantages</strong>:</p>\n<p class=\"indent\"></p>\n<ul>\n<li>Prone to <mark>overfitting</mark>: if number of features are larger than number of samples.</li>\n<li>Don't provide probability estimation.</li>\n<li><mark>Not efficient</mark> if your <mark>data is very big</mark>!</li>\n<li>It works poorly with overlapping classes</li>\n<li>Sensitive to the type of kernel used.</li>\n</ul>\n<h2 id=\"svm-used-for%3F\">SVM used for? <a class=\"direct-link\" href=\"#svm-used-for%3F\">#</a></h2>\n<p>Some points:<sup><a href=\"https://www.youtube.com/watch?time_continue=21&amp;v=TtKF996oEl8\">[re]</a></sup></p>\n<p class=\"indent\"></p>\n<ul>\n<li>Classification, regression and outliers detection.</li>\n<li>Face detection.</li>\n<li>Text and hypertext categorization.</li>\n<li>Detecting spam.</li>\n<li>Classification of images.</li>\n<li>Bioinformatics.</li>\n</ul>\n<h2 id=\"using-svm-with-scikit-learn\">Using SVM with Scikit-learn <a class=\"direct-link\" href=\"#using-svm-with-scikit-learn\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>svm <span class=\"token keyword\">import</span> SVC<br><br>svc <span class=\"token operator\">=</span> SVC<span class=\"token punctuation\">(</span>kernel<span class=\"token operator\">=</span><span class=\"token string\">'linear'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># default = 'rbf' (Gaussian kernel)</span><br><span class=\"token comment\"># other kernels: poly, sigmoid, precomputed or a callable</span><br><br>svc <span class=\"token operator\">=</span> svc<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><br>svc<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># gives the support vectors</span><br>svc<span class=\"token punctuation\">.</span>support_vectors_</code></pre>\n<p>There are <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.svm.SVC.html#sklearn.svm.SVC\">other parameters</a> of <code>sklearn.svm.SVM</code>.</p>\n<div class=\"warning\">\n<p>In the case of <strong>linear SVM</strong>, we can also use <code>sklearn.svm.LinearSVC</code>. It's similar to <code>sklearn.svm.SVG</code> with <code>kernel='linear'</code> but implemented in terms of <code>liblinear</code> rather than <code>libsvm</code>, so it has more flexibility in the choice of penalties and loss functions and should scale better to large numbers of samples.<sup><a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.svm.LinearSVC.html\">[ref]</a></sup></p>\n</div>\n<h3 id=\"meaning-of-some-parameters\">Meaning of some parameters <a class=\"direct-link\" href=\"#meaning-of-some-parameters\">#</a></h3>\n<p><strong>The Regularization parameter</strong> (<code>C</code>, default <code>C=1.0</code>): if <code>C</code> is larger, hyperplane has smaller margin but do a better job of classification and otherwise. This is how you can control the trade-off between decision boundary and misclassification term.</p>\n<p class=\"indent\"></p>\n<ul>\n<li><strong>Higher values</strong> of <code>C</code> <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> a higher possibility of <mark>overfitting</mark>, the softmargin SVM is equivalent to the hard-margin SVM.</li>\n<li><strong>Lower values</strong> of <code>C</code> <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> a higher possibility of <mark>underfitting</mark>. We admit misclassifications in the training data</li>\n</ul>\n<p>We use this in the case of <em>not linearly separable data</em>; It's also called <strong>soft-margin linear SVM</strong>.</p>\n<p><img src=\"/img/post/ML/support-vector-machine/svm-4.jpg\" alt=\"The Regularization parameter.\" class=\"img-full-85 pop\"><br>\n<em>An illustration of using <code>C</code>.</em></p>\n<p><img src=\"/img/post/ML/support-vector-machine/svm-7.jpg\" alt=\"The Regularization parameter.\" class=\"img-full-100 pop\"><br>\n<em>An illustration of using <code>C</code>. Bigger <code>C</code>, smaller margin.<sup><a href=\"https://machinelearningcoban.com/2017/04/13/softmarginsmv/\">[ref]</a></sup></em></p>\n<div class=\"hsbox\"><div class=\"hs__title\">More mathematical details on <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span></span></span></span></span> and soft-margin problems</div><div class=\"hs__content\"><p>Recall that the <em>hard-margin</em> problem is,</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">w</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>arg</mi><mo>⁡</mo><munder><mo><mi>min</mi><mo>⁡</mo></mo><mrow><mi mathvariant=\"bold\">w</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow></munder><mfrac><mn>1</mn><mn>2</mn></mfrac><mi mathvariant=\"normal\">∥</mi><mi mathvariant=\"bold\">w</mi><msubsup><mi mathvariant=\"normal\">∥</mi><mn>2</mn><mn>2</mn></msubsup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mtext>subject to</mtext></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mtext>  </mtext><msub><mi>y</mi><mi>i</mi></msub><mo stretchy=\"false\">(</mo><msup><mi mathvariant=\"bold\">w</mi><mi>T</mi></msup><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo>+</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>−</mo><mn>1</mn><mo>≥</mo><mn>0</mn><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">∀</mi><mi>i</mi><mo>=</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mi>N</mi><mi mathvariant=\"normal\">.</mi></mrow></mstyle></mtd></mtr></mtable><mspace width=\"1em\"/><mo stretchy=\"false\">(</mo><mn>4</mn><mtext> revisited</mtext><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\n\\begin{aligned}\n    &amp;(\\mathbf{w}, b) = \\arg \\min_{\\mathbf{w}, b} \\frac{1}{2}\\Vert\\mathbf{w}\\Vert_2^2   \\\\\n    \\text{subject to} &amp;~~ y_i(\\mathbf{w}^T\\mathbf{x}_i + b) -1 \\geq 0, \\forall i = 1, 2, \\dots, N.\n\\end{aligned} \\quad (4~\\text{revisited})\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:4.060987em;vertical-align:-1.7804935000000004em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.2804934999999995em;\"><span style=\"top:-4.2804934999999995em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"></span></span><span style=\"top:-2.2009464999999997em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">subject to</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.7804935000000004em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.2804934999999995em;\"><span style=\"top:-4.2804934999999995em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mop\">ar<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.66786em;\"><span style=\"top:-2.3478920000000003em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathbf mtight\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">b</span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\">min</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8882159999999999em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\">∥</span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mord\"><span class=\"mord\">∥</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-2.2009464999999997em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace nobreak\"> </span><span class=\"mspace nobreak\"> </span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913309999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">∀</span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord\">.</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.7804935000000004em;\"><span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">4</span><span class=\"mspace nobreak\"> </span><span class=\"mord text\"><span class=\"mord\">revisited</span></span><span class=\"mclose\">)</span></span></span></span></span></eqn></section></math>\n<p>and its duality is,</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mi>λ</mi><mo>=</mo><mi>arg</mi><mo>⁡</mo><munder><mo><mi>max</mi><mo>⁡</mo></mo><mi>λ</mi></munder><mrow><mo fence=\"true\">(</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>λ</mi><mi>i</mi></msub><mo>−</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>λ</mi><mi>i</mi></msub><msub><mi>λ</mi><mi>j</mi></msub><msub><mi>y</mi><mi>i</mi></msub><msub><mi>y</mi><mi>j</mi></msub><msubsup><mi mathvariant=\"bold\">x</mi><mi>i</mi><mi>T</mi></msubsup><msub><mi mathvariant=\"bold\">x</mi><mi>j</mi></msub><mo fence=\"true\">)</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mtext>subject to</mtext></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mtext>  </mtext><msub><mi>λ</mi><mi>i</mi></msub><mo>≥</mo><mn>0</mn><mo separator=\"true\">,</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>λ</mi><mi>i</mi></msub><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><mn>0</mn><mo separator=\"true\">,</mo><mtext> </mtext><mi mathvariant=\"normal\">∀</mi><mi>i</mi><mo>=</mo><mn>1</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mi>N</mi><mi mathvariant=\"normal\">.</mi></mrow></mstyle></mtd></mtr></mtable><mspace width=\"1em\"/><mo stretchy=\"false\">(</mo><mn>5</mn><mtext> revisited</mtext><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\n\\begin{aligned}\n    &amp;\\lambda = \\arg\\max_{\\lambda} \\left( \\sum_{i=1}^N \\lambda_i  -\\frac{1}{2}\\sum_{i=1}^N \\sum_{j=1}^N \\lambda_i\\lambda_j y_i y_j \\mathbf{x}_i^T\\mathbf{x}_j \\right)  \\\\\n    \\text{subject to} &amp;~~ \\lambda_i \\ge 0, \\sum_{i=1}^N\\lambda_iy_i = 0, ~\\forall i=1,\\ldots,N.\n\\end{aligned} \\quad (5~\\text{revisited})\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:6.948118000000001em;vertical-align:-3.2240590000000005em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.7240590000000005em;\"><span style=\"top:-5.7240590000000005em;\"><span class=\"pstrut\" style=\"height:3.8283360000000006em;\"></span><span class=\"mord\"></span></span><span style=\"top:-2.181946em;\"><span class=\"pstrut\" style=\"height:3.8283360000000006em;\"></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">subject to</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.2240590000000005em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.7240590000000005em;\"><span style=\"top:-5.7240590000000005em;\"><span class=\"pstrut\" style=\"height:3.8283360000000006em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mord mathnormal\">λ</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mop\">ar<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.43055999999999994em;\"><span style=\"top:-2.347892em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">λ</span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\">max</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.752108em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size4\">(</span></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8283360000000002em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8283360000000002em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8283360000000006em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.4137769999999998em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913309999999999em;\"><span style=\"top:-2.4530000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size4\">)</span></span></span></span></span><span style=\"top:-2.181946em;\"><span class=\"pstrut\" style=\"height:3.8283360000000006em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace nobreak\"> </span><span class=\"mspace nobreak\"> </span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8283360000000002em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace nobreak\"> </span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">∀</span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord\">.</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.2240590000000005em;\"><span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">5</span><span class=\"mspace nobreak\"> </span><span class=\"mord text\"><span class=\"mord\">revisited</span></span><span class=\"mclose\">)</span></span></span></span></span></eqn></section></math>\n<p>Instead of considering a <em>hard-margin</em> <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mn>4</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(4)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">4</span><span class=\"mclose\">)</span></span></span></span></span>, we consider following <em>soft-margin</em> problem (with the addition of <em>slack variables</em>)</p>\n<div class=\"columns-2\">\n<p><img src=\"/img/post/ML/support-vector-machine/ssvm3.png\" alt=\"The slack variables.\" class=\"img-full-100 pop\"><br>\n<em>An introduction to slack variables.<sup><a href=\"https://machinelearningcoban.com/2017/04/13/softmarginsmv/\">[ref]</a></sup></em></p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">w</mi><mo separator=\"true\">,</mo><mi>b</mi><mo separator=\"true\">,</mo><mi>ξ</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>arg</mi><mo>⁡</mo><munder><mo><mi>min</mi><mo>⁡</mo></mo><mrow><mi mathvariant=\"bold\">w</mi><mo separator=\"true\">,</mo><mi>b</mi><mo separator=\"true\">,</mo><mi>ξ</mi></mrow></munder><mrow><mo fence=\"true\">(</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mrow><mi mathvariant=\"normal\">∥</mi><mi mathvariant=\"bold\">w</mi><msubsup><mi mathvariant=\"normal\">∥</mi><mn>2</mn><mn>2</mn></msubsup></mrow><mo>+</mo><mi>C</mi><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>ξ</mi><mi>i</mi></msub><mo fence=\"true\">)</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mtext>subject to</mtext></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mtext>  </mtext><msub><mi>y</mi><mi>i</mi></msub><mo stretchy=\"false\">(</mo><msup><mi mathvariant=\"bold\">w</mi><mi>T</mi></msup><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo>+</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>≥</mo><mn>1</mn><mo>−</mo><msub><mi>ξ</mi><mi>i</mi></msub><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">∀</mi><mi>i</mi><mo>=</mo><mn>1</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mi>N</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mtext>  </mtext><msub><mi>ξ</mi><mi>i</mi></msub><mo>≤</mo><mn>0</mn><mo separator=\"true\">,</mo><mtext> </mtext><mi mathvariant=\"normal\">∀</mi><mi>i</mi><mo>=</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mi>N</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\n\\begin{aligned}\n    &amp;(\\mathbf{w}, b, \\xi) = \\arg\\min_{\\mathbf{w}, b, \\xi} \\left( \\frac{1}{2}{\\Vert\\mathbf{w}\\Vert_2^2} + C \\sum_{i=1}^N \\xi_i \\right)  \\\\\n    \\text{subject to} &amp;~~ y_i(\\mathbf{w}^T\\mathbf{x}_i + b) \\geq 1 - \\xi_i, \\forall i = 1, \\dots, N \\\\\n    &amp;~~ \\xi_i \\leq 0,  ~\\forall i = 1, 2, \\dots, N\n\\end{aligned}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:6.457336000000001em;vertical-align:-2.978668em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.4786680000000008em;\"><span style=\"top:-5.478668000000001em;\"><span class=\"pstrut\" style=\"height:3.828336em;\"></span><span class=\"mord\"></span></span><span style=\"top:-3.0096680000000005em;\"><span class=\"pstrut\" style=\"height:3.828336em;\"></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">subject to</span></span></span></span><span style=\"top:-1.5096680000000005em;\"><span class=\"pstrut\" style=\"height:3.828336em;\"></span><span class=\"mord\"></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.978668em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.4786680000000008em;\"><span style=\"top:-5.478668000000001em;\"><span class=\"pstrut\" style=\"height:3.828336em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.04601em;\">ξ</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mop\">ar<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.66786em;\"><span style=\"top:-2.3478920000000003em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathbf mtight\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">b</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.04601em;\">ξ</span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\">min</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8882159999999999em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size4\">(</span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\"><span class=\"mord\">∥</span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mord\"><span class=\"mord\">∥</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8283360000000002em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04601em;\">ξ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.04601em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size4\">)</span></span></span></span></span><span style=\"top:-3.0096680000000005em;\"><span class=\"pstrut\" style=\"height:3.828336em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace nobreak\"> </span><span class=\"mspace nobreak\"> </span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913309999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04601em;\">ξ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.04601em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">∀</span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span><span style=\"top:-1.5096680000000005em;\"><span class=\"pstrut\" style=\"height:3.828336em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace nobreak\"> </span><span class=\"mspace nobreak\"> </span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04601em;\">ξ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.04601em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace nobreak\"> </span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">∀</span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.978668em;\"><span></span></span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n</div>\n<p>With these new slack variables, we have to decide the trade-off between maximizing the margin (term <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mn>1</mn><mn>2</mn></mfrac><mi mathvariant=\"normal\">∥</mi><mi mathvariant=\"bold\">w</mi><msubsup><mi mathvariant=\"normal\">∥</mi><mn>2</mn><mn>2</mn></msubsup></mrow><annotation encoding=\"application/x-tex\">\\frac{1}{2}\\Vert \\mathbf{w}\\Vert_2^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.190108em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\">∥</span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mord\"><span class=\"mord\">∥</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-2.4518920000000004em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24810799999999997em;\"><span></span></span></span></span></span></span></span></span></span></span>) and minimizing the mistakes (term <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><msubsup><mi mathvariant=\"normal\">Σ</mi><mn>1</mn><mi>n</mi></msubsup><msub><mi>ξ</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">C\\Sigma_1^n\\xi_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9425479999999999em;vertical-align:-0.24810799999999997em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord\"><span class=\"mord\">Σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-2.4518920000000004em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24810799999999997em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04601em;\">ξ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.04601em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>).</p>\n<p>When <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span></span></span></span></span> is big, the term <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mn>1</mn><mn>2</mn></mfrac><mi mathvariant=\"normal\">∥</mi><mi mathvariant=\"bold\">w</mi><msubsup><mi mathvariant=\"normal\">∥</mi><mn>2</mn><mn>2</mn></msubsup></mrow><annotation encoding=\"application/x-tex\">\\frac{1}{2}\\Vert \\mathbf{w}\\Vert_2^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.190108em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\">∥</span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">w</span></span><span class=\"mord\"><span class=\"mord\">∥</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-2.4518920000000004em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24810799999999997em;\"><span></span></span></span></span></span></span></span></span></span></span> is almost considered as <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></span> in the minimized problem and the problem focuses on minimizing the term <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><msubsup><mi mathvariant=\"normal\">Σ</mi><mn>1</mn><mi>n</mi></msubsup><msub><mi>ξ</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">C\\Sigma_1^n\\xi_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9425479999999999em;vertical-align:-0.24810799999999997em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord\"><span class=\"mord\">Σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-2.4518920000000004em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24810799999999997em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04601em;\">ξ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.04601em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> (avoiding misclassification). That's why the margin looks more narrow in the case of bigger <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span></span></span></span></span>.</p>\n<p>A dual formulation of above soft-margin problem is,</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mi>λ</mi><mo>=</mo><mi>arg</mi><mo>⁡</mo><munder><mo><mi>max</mi><mo>⁡</mo></mo><mi>λ</mi></munder><mrow><mo fence=\"true\">(</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>λ</mi><mi>i</mi></msub><mo>−</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>λ</mi><mi>i</mi></msub><msub><mi>λ</mi><mi>j</mi></msub><msub><mi>y</mi><mi>i</mi></msub><msub><mi>y</mi><mi>j</mi></msub><msubsup><mi mathvariant=\"bold\">x</mi><mi>i</mi><mi>T</mi></msubsup><msub><mi mathvariant=\"bold\">x</mi><mi>j</mi></msub><mo fence=\"true\">)</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mtext>subject to</mtext></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mtext>  </mtext><mn>0</mn><mo>≤</mo><msub><mi>λ</mi><mi>i</mi></msub><mo>≤</mo><mi>C</mi><mo separator=\"true\">,</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>λ</mi><mi>i</mi></msub><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><mn>0</mn><mo separator=\"true\">,</mo><mtext> </mtext><mi mathvariant=\"normal\">∀</mi><mi>i</mi><mo>=</mo><mn>1</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mi>N</mi><mi mathvariant=\"normal\">.</mi></mrow></mstyle></mtd></mtr></mtable><mspace width=\"1em\"/><mo stretchy=\"false\">(</mo><mn>6</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\n\\begin{aligned}\n    &amp;\\lambda = \\arg\\max_{\\lambda} \\left( \\sum_{i=1}^N \\lambda_i  -\\frac{1}{2}\\sum_{i=1}^N \\sum_{j=1}^N \\lambda_i\\lambda_j y_i y_j \\mathbf{x}_i^T\\mathbf{x}_j \\right)  \\\\\n    \\text{subject to} &amp;~~ 0 \\le \\lambda_i \\le C, \\sum_{i=1}^N\\lambda_iy_i = 0,~\\forall i=1,\\ldots,N.\n\\end{aligned} \\quad (6)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:6.948118000000001em;vertical-align:-3.2240590000000005em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.7240590000000005em;\"><span style=\"top:-5.7240590000000005em;\"><span class=\"pstrut\" style=\"height:3.8283360000000006em;\"></span><span class=\"mord\"></span></span><span style=\"top:-2.181946em;\"><span class=\"pstrut\" style=\"height:3.8283360000000006em;\"></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">subject to</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.2240590000000005em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.7240590000000005em;\"><span style=\"top:-5.7240590000000005em;\"><span class=\"pstrut\" style=\"height:3.8283360000000006em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mord mathnormal\">λ</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mop\">ar<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.43055999999999994em;\"><span style=\"top:-2.347892em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">λ</span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\">max</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.752108em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size4\">(</span></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8283360000000002em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8283360000000002em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8283360000000006em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.4137769999999998em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913309999999999em;\"><span style=\"top:-2.4530000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size4\">)</span></span></span></span></span><span style=\"top:-2.181946em;\"><span class=\"pstrut\" style=\"height:3.8283360000000006em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace nobreak\"> </span><span class=\"mspace nobreak\"> </span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8283360000000002em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace nobreak\"> </span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">∀</span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord\">.</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.2240590000000005em;\"><span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">6</span><span class=\"mclose\">)</span></span></span></span></span></eqn></section></math>\n<p>Note that, <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mn>6</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(6)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">6</span><span class=\"mclose\">)</span></span></span></span></span> looks like <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mn>5</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(5)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">5</span><span class=\"mclose\">)</span></span></span></span></span> (duality of hard-margin problem) but condition <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn><mo>≤</mo><msub><mi>λ</mi><mi>i</mi></msub><mo>≤</mo><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">0 \\le \\lambda_i \\le C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.78041em;vertical-align:-0.13597em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span></span></span></span></span>.</p>\n</div></div>\n<p><strong>Gamma</strong> (<code>gamma</code>, default <code>gamma='auto'</code> which uses <code>1/n_features</code>): determine the number of points to construct the hyperplane.</p>\n<p><img src=\"/img/post/ML/support-vector-machine/svm-5.jpg\" alt=\"The parameter gamma.\" class=\"img-full-90 pop\"><br>\n<em>An illustration of using <code>gamma</code>. In <strong>high-gamma</strong> case, we only consider points nearby the hyperplane, it may cause an <mark>overfitting</mark>.</em></p>\n<p><img src=\"/img/post/ML/support-vector-machine/svm-10.jpg\" alt=\"gamma parameter.\" class=\"img-full-90 pop\"><br>\n<em><mark>Bigger gamma</mark>, more change to get <mark>overfitting</mark> (in a XOR problem).</em></p>\n<div class=\"hsbox\"><div class=\"hs__title\">Understanding the idea of <code>gamma</code> in the Gaussian kernel</div><div class=\"hs__content\"><p>We have another form of Gaussian kernel which is,</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>K</mi><mo stretchy=\"false\">(</mo><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo separator=\"true\">,</mo><msub><mi mathvariant=\"bold\">x</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo><mo>=</mo><mtext>exp</mtext><mrow><mo fence=\"true\">(</mo><mo>−</mo><mfrac><mrow><mi mathvariant=\"normal\">∥</mi><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo>−</mo><msub><mi mathvariant=\"bold\">x</mi><mi>j</mi></msub><msup><mi mathvariant=\"normal\">∥</mi><mn>2</mn></msup></mrow><mrow><mn>2</mn><msup><mi>σ</mi><mn>2</mn></msup></mrow></mfrac><mo fence=\"true\">)</mo></mrow><mo separator=\"true\">,</mo></mrow><annotation encoding=\"application/x-tex\">\nK(\\mathbf{x}_i, \\mathbf{x}_j)\n= \\text{exp}\\left( - \\dfrac{\\Vert \\mathbf{x}_i - \\mathbf{x}_j \\Vert^2}{2\\sigma^2}  \\right),\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.441138em;vertical-align:-0.95003em;\"></span><span class=\"mord text\"><span class=\"mord\">exp</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">(</span></span><span class=\"mord\">−</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.4911079999999999em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.740108em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">∥</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\">∥</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">)</span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span></span></span></span></span></eqn></section></math>\n<p>where <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>σ</mi></mrow><annotation encoding=\"application/x-tex\">\\sigma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span></span></span></span></span> is the standard deviation which shows the spread of the data.</p>\n<p>Compare to the one used in the scikit-learn, <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi><mo stretchy=\"false\">(</mo><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo separator=\"true\">,</mo><msub><mi mathvariant=\"bold\">x</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo><mo>=</mo><mi>exp</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mo>−</mo><mi>γ</mi><mi mathvariant=\"normal\">∥</mi><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub><mo>−</mo><msub><mi mathvariant=\"bold\">x</mi><mi>j</mi></msub><msup><mi mathvariant=\"normal\">∥</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">K(\\mathbf{x}_i, \\mathbf{x}_j) = \\exp(-\\gamma\\Vert \\mathbf{x}_i - \\mathbf{x}_j \\Vert^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">exp</span><span class=\"mopen\">(</span><span class=\"mord\">−</span><span class=\"mord mathnormal\" style=\"margin-right:0.05556em;\">γ</span><span class=\"mord\">∥</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1002159999999999em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\">∥</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span>, we see that <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>γ</mi></mrow><annotation encoding=\"application/x-tex\">\\gamma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05556em;\">γ</span></span></span></span></span> is an inverse of <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>σ</mi></mrow><annotation encoding=\"application/x-tex\">\\sigma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span></span></span></span></span>. It implies,</p>\n<ul>\n<li>When <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>σ</mi></mrow><annotation encoding=\"application/x-tex\">\\sigma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span></span></span></span></span> is bigger (or <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>γ</mi></mrow><annotation encoding=\"application/x-tex\">\\gamma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05556em;\">γ</span></span></span></span></span> is smaller), the similarity between two points <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbf{x}_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.59444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> and <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"bold\">x</mi><mi>j</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbf{x}_j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.730548em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span></span> are considered in a wide range (spreading widely).</li>\n<li>Conversely, when <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>σ</mi></mrow><annotation encoding=\"application/x-tex\">\\sigma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span></span></span></span></span> is smaller (or <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>γ</mi></mrow><annotation encoding=\"application/x-tex\">\\gamma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05556em;\">γ</span></span></span></span></span> is bigger), only two points <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"bold\">x</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbf{x}_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.59444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> and <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"bold\">x</mi><mi>j</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbf{x}_j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.730548em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbf\">x</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span></span> which are really near to each other will be considered to be similar. That's why we see there are many &quot;groups&quot; in the figure corresponding to <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>γ</mi><mo>=</mo><mn>100</mn></mrow><annotation encoding=\"application/x-tex\">\\gamma=100</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05556em;\">γ</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span></span></span></span></span>. It leads to an overfitting problem.</li>\n</ul>\n</div></div>\n<h2 id=\"svm-in-action\">SVM in action <a class=\"direct-link\" href=\"#svm-in-action\">#</a></h2>\n<ul>\n<li>\n<p><strong>XOR problem</strong> to see the effect of <code>gamma</code> and <code>C</code> in the case of using RBF kernel: <a href=\"/files/ml/svm/SVM-XOR-RBF-kernel-parameters.html\">html file</a> -- <a href=\"https://drive.google.com/file/d/1tvmwhMJiEB89Mo7m2oys0pcUwdgwPW5f/view?usp=sharing\">open in colab</a>.</p>\n</li>\n<li>\n<p><strong>Face Recognition</strong><sup><a href=\"https://jakevdp.github.io/PythonDataScienceHandbook/05.07-support-vector-machines.html\">[ref]</a></sup>: <a href=\"/files/ml/svm/SVM-face-recognition.html\">html file</a> -- <a href=\"https://colab.research.google.com/drive/1n2mpRLGL_pyUvV7yJacnspEvDwBYz16A\">open in colab</a>.</p>\n  <div ><div class=\"hsbox\">\n  <div class=\"hs__title\">What's interesting?</div>\n  <div class=\"hs__content\">\n<p>Some points:<sup><a href=\"https://jakevdp.github.io/PythonDataScienceHandbook/05.07-support-vector-machines.html\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<p class=\"indent\"></p>\n<ul>\n<li>We will use a principal component analysis to extract 150 fundamental components to feed into our support vector machine classifier.</li>\n<li>Grid search cross-validation to explore combinations of parameters.</li>\n<li>For a real-world facial recognition task, in which the photos do not come precropped into nice grids, the only difference in the facial classification scheme is the feature selection: you would need to use a more sophisticated algorithm to find the faces, and extract features that are independent of the pixellation. For this kind of application, one good option is to make use of <a href=\"http://opencv.org/\">OpenCV</a>, which, among other things, includes pre-trained implementations of state-of-the-art feature extraction tools for images in general and faces in particular.</li>\n<li>I generally only turn to SVMs once other simpler, faster, and less tuning-intensive methods have been shown to be insufficient for my needs. Nevertheless, if you have the CPU cycles to commit to training and cross-validating an SVM on your data, the method can lead to excellent results.</li>\n</ul>\n  </div>\n  </div>\n</li>\n</ul>\n<h2 id=\"references\">References <a class=\"direct-link\" href=\"#references\">#</a></h2>\n<ul>\n<li><strong>Scikit-learn</strong> -- <a href=\"https://scikit-learn.org/stable/modules/svm.html\">SVM official doc</a>.</li>\n<li><strong>Simplilearn</strong> -- <a href=\"https://www.youtube.com/watch?time_continue=21&amp;v=TtKF996oEl8\">How Support Vector Machine Works | SVM In Machine Learning</a>.</li>\n<li><strong>Tiep Vu</strong> -- <a href=\"https://machinelearningcoban.com/2017/04/09/smv/\">Bài 19: Support Vector Machine</a>.</li>\n<li><strong>Jeremy Kun</strong> -- <a href=\"https://jeremykun.com/2017/06/05/formulating-the-support-vector-machine-optimization-problem/\">Formulating the Support Vector Machine Optimization Problem</a>.</li>\n<li><strong>Tiep Vu</strong> -- <a href=\"https://machinelearningcoban.com/2017/04/13/softmarginsmv/\">Bài 20: Soft Margin Support Vector Machine</a>.</li>\n<li><strong>Tiep Vu</strong> - <a href=\"https://machinelearningcoban.com/2017/04/22/kernelsmv/\">Bài 21: Kernel Support Vector Machine</a>.</li>\n<li><strong>Alexander Statnikov</strong>, <strong>Douglas Hardin</strong>, <strong>Isabelle Guyon</strong>, <strong>Constantin F. Aliferis</strong> -- <a href=\"/files/ml//svm-without-tears.pdf\">A Gentle Introduction to Support Vector Machines in Biomedicine</a>.</li>\n<li><strong>Jake VanderPlas</strong> -- <a href=\"https://jakevdp.github.io/PythonDataScienceHandbook/05.07-support-vector-machines.html\">In-Depth: Support Vector Machines</a>. -- Example: How to code and illustrate hyperplane and support vectors in Python?</li>\n<li><strong>Chris Albon</strong> -- <a href=\"https://chrisalbon.com/\">Notes</a> about Support Vector Machines.</li>\n<li><strong>Andrew NG</strong> -- <a href=\"https://mynote.dinhanhthi.com/machine-learning-coursera-7\">My raw note</a> when I learned <a href=\"https://www.coursera.org/learn/machine-learning/\">the course Machine Learning</a> on Coursera.</li>\n</ul>\n",
      "date_published": "2019-09-19T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/web-design-tips/",
      "url": "https://dinhanhthi.com/web-design-tips/",
      "title": "Web Design extra",
      "content_html": "<h2 id=\"terms\">Terms <a class=\"direct-link\" href=\"#terms\">#</a></h2>\n<ul>\n<li><strong>Font ligatures</strong>: When you type <kbd>=</kbd> + <kbd>&gt;</kbd>, it becomes <code>⇒</code>.</li>\n</ul>\n<h2 id=\"auto-focus-on-an-input-field-when-page-loads\">Auto focus on an input field when page loads <a class=\"direct-link\" href=\"#auto-focus-on-an-input-field-when-page-loads\">#</a></h2>\n<p>Just add <code>autofocus</code> into the <code>&lt;input&gt;</code> tag.</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>q<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>search<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>search<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">autofocus</span><span class=\"token punctuation\">></span></span></code></pre>\n<h2 id=\"separate-a-list-into-2-columns\">Separate a list into 2 columns <a class=\"direct-link\" href=\"#separate-a-list-into-2-columns\">#</a></h2>\n<p>And make it into 1 if the screen is small.</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>two-columns-list<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><br>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n<pre class=\"language-scss\"><code class=\"language-scss\"><span class=\"token selector\">.two-columns-list </span><span class=\"token punctuation\">{</span><br>  <span class=\"token atrule\"><span class=\"token rule\">@media</span> <span class=\"token punctuation\">(</span><span class=\"token property\">min-width</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$grid-md</span><span class=\"token punctuation\">)</span></span> <span class=\"token punctuation\">{</span><br>    <span class=\"token keyword\">@include</span> <span class=\"token function\">column-count</span><span class=\"token punctuation\">(</span>2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>    <span class=\"token selector\"><span class=\"token parent important\">&amp;</span> > li </span><span class=\"token punctuation\">{</span><br>      <span class=\"token property\">padding-right</span><span class=\"token punctuation\">:</span> 10px<span class=\"token punctuation\">;</span><br>    <span class=\"token punctuation\">}</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n</div>\n<h2 id=\"%40media-not-working\"><code>@media</code> not working <a class=\"direct-link\" href=\"#%40media-not-working\">#</a></h2>\n<p>When I use bootstrap, the <code>@media</code> is not working when I change to mobile use, try to add below line to <code>&lt;head&gt;</code>,</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>viewport<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>width=device-width<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre>\n<h2 id=\"useful-urls\">Useful URLs <a class=\"direct-link\" href=\"#useful-urls\">#</a></h2>\n<ul>\n<li><strong>Sia Karamalegos</strong> -- <a href=\"https://medium.com/clio-calliope/making-google-fonts-faster-aadf3c02a36d\">Making Google Fonts Faster</a>.</li>\n<li><strong>The SASS way</strong> -- <a href=\"http://thesassway.com/intermediate/if-for-each-while\">If-For-Each-While in SCSS</a>.</li>\n</ul>\n",
      "date_published": "2019-09-02T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/jekyll-tips/",
      "url": "https://dinhanhthi.com/jekyll-tips/",
      "title": "Jekyll + Liquid",
      "content_html": "<p>This note is used for you who have already had the basic idea about jekyll and how to create a jekyll site. This note is only for quickly reference.</p>\n<h2 id=\"useful-links\">Useful links <a class=\"direct-link\" href=\"#useful-links\">#</a></h2>\n<div class=\"two-columns-list\" markdown=\"1\">\n<ul>\n<li><a href=\"https://www.webfx.com/tools/emoji-cheat-sheet/\">Jemoji cheat sheet</a>.</li>\n<li>Link to <a href=\"https://jekyllrb.com/docs/liquid/tags/#linking-to-posts\">post</a> / <a href=\"https://jekyllrb.com/docs/liquid/tags/#link\">page</a>.</li>\n<li><a href=\"https://learn.cloudcannon.com/jekyll-cheat-sheet/\">Jekyll cheat sheet</a>.</li>\n<li><a href=\"http://jwarby.github.io/jekyll-pygments-themes/languages/javascript.html\">Rouge CSS file theme</a> (Pygment)</li>\n<li><a href=\"http://jch.penibelst.de/\">Compress HTML in Jekyll</a>.</li>\n<li><a href=\"https://kramdown.gettalong.org/quickref.html\">Kramdown quickref</a>.</li>\n<li><a href=\"https://pages.github.com/versions/\">Official dependencies / gems</a> supported by Github Pages.</li>\n</ul>\n</div>\n<h2 id=\"using-docker-to-run%2Fdeploy-jekyll\">Using docker to run/deploy jekyll <a class=\"direct-link\" href=\"#using-docker-to-run%2Fdeploy-jekyll\">#</a></h2>\n<p>Read this <a href=\"https://github.com/dinhanhthi/my-dockerfiles/tree/master/quick-jekyll\">readme</a>. An example is <a href=\"https://github.com/dinhanhthi/dinhanhthi.com/tree/jekyll\">an old version of this site</a>.</p>\n<h2 id=\"install-and-run-jekyll-on-fresh-machine\">Install and run Jekyll on fresh machine <a class=\"direct-link\" href=\"#install-and-run-jekyll-on-fresh-machine\">#</a></h2>\n<h3 id=\"ubuntu\">Ubuntu <a class=\"direct-link\" href=\"#ubuntu\">#</a></h3>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install ruby-dev</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> ruby-dev<br><br><span class=\"token comment\"># install bundler</span><br><span class=\"token function\">sudo</span> gem <span class=\"token function\">install</span> bundler<br><br><span class=\"token comment\"># clone a jekyll theme</span><br><span class=\"token comment\"># cd to that theme</span><br><br><span class=\"token comment\"># install gems in the theme</span><br>bundle <span class=\"token function\">install</span> --path vendor/bundle<br><br><span class=\"token comment\"># serve</span><br>bundle <span class=\"token builtin class-name\">exec</span> jekyll serve<br><br><span class=\"token comment\"># If error \"ExecJS and could not find a JavaScript runtime\"</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> nodejs</code></pre>\n<h3 id=\"windows\">Windows <a class=\"direct-link\" href=\"#windows\">#</a></h3>\n<p>Follow <a href=\"/docker-wsl2-windows#jekyll-on-wsl2\">this guide</a> using WSL2 on Windows.</p>\n<h2 id=\"make-jekyll-build-faster\">Make jekyll build faster <a class=\"direct-link\" href=\"#make-jekyll-build-faster\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># BENCHMARKING your site</span><br>bundle <span class=\"token builtin class-name\">exec</span> jekyll build --profile</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># clean cache</span><br>bundle <span class=\"token builtin class-name\">exec</span> jekyll clean</code></pre>\n</div>\n<ol>\n<li>Disable <code>jekyll-feed</code></li>\n<li>Run <code>bundle exec jekyll serve -I</code> (wuth <code>-I</code>) to generate the changed file only. If you create a new file, open a new terminal tab and run <code>bundle exec jekyll build</code>.</li>\n<li>Upgrade to Jekyll 4.0.</li>\n<li>Add <code>gem &quot;liquid-c&quot;</code> to <code>Gemfile</code> and make <code>bundle update</code></li>\n<li>Use <code>jekyll-include-cache</code> (both in <code>Gemfile</code> and <code>_config.yml</code>)</li>\n</ol>\n<p>Read more in <a href=\"https://forestry.io/blog/how-i-reduced-my-jekyll-build-time-by-61/\">this article</a>.</p>\n<h3 id=\"disable-jekyll-feed\">Disable jekyll-feed <a class=\"direct-link\" href=\"#disable-jekyll-feed\">#</a></h3>\n<ol>\n<li>Comment line <code>jekyll-feed</code> in <code>Gemfile</code></li>\n<li>Comment line <code>jekyll-feed</code> in <code>_config.yml</code></li>\n<li>Rebuild.</li>\n</ol>\n<h2 id=\"sitemap\">Sitemap <a class=\"direct-link\" href=\"#sitemap\">#</a></h2>\n<p>If in <a href=\"https://github.com/jekyll/jekyll-sitemap\">sitemap</a>, there is error like <code>&lt;loc&gt;/reading&lt;/loc&gt;</code>, check your <code>_config.yml</code> + make sure there is an url inside <code>url</code> field.</p>\n<h2 id=\"loop-through-posts\">Loop through posts <a class=\"direct-link\" href=\"#loop-through-posts\">#</a></h2>\n<pre class=\"language-liquid\"><code class=\"language-liquid\">{<span class=\"token operator\">%</span> <span class=\"token keyword\">for</span> post <span class=\"token keyword\">in</span> site.posts <span class=\"token operator\">%</span>}<br>  {{ post.title }}<br>{<span class=\"token operator\">%</span> <span class=\"token keyword\">endfor</span> <span class=\"token operator\">%</span>}</code></pre>\n<div class=\"warning\">\n<p>If you using <code>baseurl</code>,</p>\n<pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token comment\"># in _config.yml</span><br><span class=\"token key atrule\">url</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span><br><span class=\"token key atrule\">baseurl</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/tools\"</span></code></pre>\n<pre class=\"language-liquid\"><code class=\"language-liquid\"><span class=\"token operator\">&lt;</span>ol<span class=\"token operator\">></span><br>\t{<span class=\"token operator\">%</span> <span class=\"token keyword\">for</span> post <span class=\"token keyword\">in</span> site.posts <span class=\"token operator\">%</span>}<br>\t<span class=\"token operator\">&lt;</span>li<span class=\"token operator\">></span><br>\t\t<span class=\"token operator\">&lt;</span>a href<span class=\"token operator\">=</span>\"{{ site.baseurl }}{{ post.url }}\"<span class=\"token operator\">></span>{{ post.title }}<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span><br>\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span><br>\t{<span class=\"token operator\">%</span> <span class=\"token keyword\">endfor</span> <span class=\"token operator\">%</span>}<br><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ol<span class=\"token operator\">></span><br></code></pre>\n</div>\n<p>List all posts in each category,</p>\n<pre class=\"language-liquid\"><code class=\"language-liquid\">{<span class=\"token operator\">%</span> <span class=\"token keyword\">for</span> category <span class=\"token keyword\">in</span> site.data.categories <span class=\"token operator\">%</span>}<br>  {<span class=\"token operator\">%</span> <span class=\"token keyword\">if</span> site.categories[category.name].size <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">%</span>}<br>    {<span class=\"token operator\">%</span> <span class=\"token keyword\">for</span> post <span class=\"token keyword\">in</span> site.categories[category.name] <span class=\"token operator\">%</span>}<br>      {{ post.title }}<br>    {<span class=\"token operator\">%</span> <span class=\"token keyword\">endfor</span> <span class=\"token operator\">%</span>}<br>  {<span class=\"token operator\">%</span> <span class=\"token keyword\">endif</span> <span class=\"token operator\">%</span>}<br>{<span class=\"token operator\">%</span> <span class=\"token keyword\">endfor</span> <span class=\"token operator\">%</span>}</code></pre>\n<p>List all posts in ABC order<sup><a href=\"https://stackoverflow.com/questions/39922776/how-to-sort-site-posts-alphabetically-by-post-title-in-jekyll\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup>,</p>\n<pre class=\"language-liquid\"><code class=\"language-liquid\">{<span class=\"token operator\">%</span> <span class=\"token keyword\">assign</span> sortedPosts <span class=\"token operator\">=</span> site.posts <span class=\"token operator\">|</span> <span class=\"token function\">sort</span><span class=\"token operator\">:</span> 'title' <span class=\"token operator\">%</span>}<br>{<span class=\"token operator\">%</span> <span class=\"token keyword\">for</span> post <span class=\"token keyword\">in</span> sortedPosts <span class=\"token operator\">%</span>}<br>  {{ post.title }}<br>{<span class=\"token operator\">%</span> <span class=\"token keyword\">endfor</span> <span class=\"token operator\">%</span>}</code></pre>\n<p>List of categories and tags in a single line with commas,</p>\n<pre class=\"language-liquid\"><code class=\"language-liquid\">{<span class=\"token operator\">%</span> <span class=\"token keyword\">for</span> category <span class=\"token keyword\">in</span> site.categories <span class=\"token keyword\">reversed</span> <span class=\"token operator\">%</span>}{<span class=\"token operator\">%</span> <span class=\"token keyword\">capture</span> category_name <span class=\"token operator\">%</span>}{{ category <span class=\"token operator\">|</span> <span class=\"token function\">first</span> }}{<span class=\"token operator\">%</span> <span class=\"token keyword\">endcapture</span> <span class=\"token operator\">%</span>}<span class=\"token operator\">&lt;</span>a href<span class=\"token operator\">=</span>\"{{site.url}}{{site.baseurl}}<span class=\"token operator\">/</span>#{{category_name <span class=\"token operator\">|</span> <span class=\"token function\">replace</span><span class=\"token operator\">:</span> \" \",\"_\"}}\"<span class=\"token operator\">></span>{{ category_name }}<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span>{<span class=\"token operator\">%</span> <span class=\"token keyword\">if</span> forloop.length <span class=\"token operator\">></span> <span class=\"token number\">1</span> and forloop.last <span class=\"token operator\">!=</span> true <span class=\"token operator\">%</span>}, {<span class=\"token operator\">%</span> <span class=\"token keyword\">else</span> <span class=\"token operator\">%</span>}.{<span class=\"token operator\">%</span> <span class=\"token keyword\">endif</span> <span class=\"token operator\">%</span>}{<span class=\"token operator\">%</span> <span class=\"token keyword\">endfor</span> <span class=\"token operator\">%</span>}</code></pre>\n<pre class=\"language-liquid\"><code class=\"language-liquid\">{<span class=\"token operator\">%</span> <span class=\"token keyword\">for</span> tag <span class=\"token keyword\">in</span> site.tags <span class=\"token operator\">%</span>}{<span class=\"token operator\">%</span> <span class=\"token keyword\">capture</span> test <span class=\"token operator\">%</span>}{{tag[<span class=\"token number\">0</span>] <span class=\"token operator\">|</span> <span class=\"token function\">slice</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span>}}{<span class=\"token operator\">%</span> <span class=\"token keyword\">endcapture</span> <span class=\"token operator\">%</span>}{<span class=\"token operator\">%</span> <span class=\"token keyword\">capture</span> testup <span class=\"token operator\">%</span>}{{tag[<span class=\"token number\">0</span>] <span class=\"token operator\">|</span> <span class=\"token function\">slice</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token operator\">|</span> upcase}}{<span class=\"token operator\">%</span> <span class=\"token keyword\">endcapture</span> <span class=\"token operator\">%</span>}<span class=\"token operator\">&lt;</span>a href<span class=\"token operator\">=</span>\"#{{tag[<span class=\"token number\">0</span>] <span class=\"token operator\">|</span> slugify}}{<span class=\"token operator\">%</span> <span class=\"token keyword\">if</span> test <span class=\"token operator\">==</span> testup <span class=\"token operator\">%</span>}_cap{<span class=\"token operator\">%</span> <span class=\"token keyword\">endif</span> <span class=\"token operator\">%</span>}\"<span class=\"token operator\">></span>{{tag[<span class=\"token number\">0</span>]}}<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span>{<span class=\"token operator\">%</span> <span class=\"token keyword\">if</span> forloop.length <span class=\"token operator\">></span> <span class=\"token number\">1</span> and forloop.last <span class=\"token operator\">!=</span> true <span class=\"token operator\">%</span>}, {<span class=\"token operator\">%</span> <span class=\"token keyword\">else</span> <span class=\"token operator\">%</span>}.{<span class=\"token operator\">%</span> <span class=\"token keyword\">endif</span> <span class=\"token operator\">%</span>}{<span class=\"token operator\">%</span> <span class=\"token keyword\">endfor</span> <span class=\"token operator\">%</span>}</code></pre>\n<h3 id=\"edit-tags-for-all-posts\">Edit tags for all posts <a class=\"direct-link\" href=\"#edit-tags-for-all-posts\">#</a></h3>\n<p>Read <a href=\"https://github.com/dinhanhthi/dinhanhthi.com/blob/master/pages/tags.html\">this source code</a>.</p>\n<h2 id=\"using-markdown-syntax-inside-html-tags\">Using markdown syntax inside html tags <a class=\"direct-link\" href=\"#using-markdown-syntax-inside-html-tags\">#</a></h2>\n<p>You can use directly by</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">markdown</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>span<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">markdown</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>of only once,</p>\n<pre class=\"language-html\"><code class=\"language-html\">{::options parse_block_html=\"true\" /}<br><span class=\"token comment\">&lt;!-- other html + markdown inside --></span></code></pre>\n<p>Or even shorter,</p>\n<pre><code>Testing {::nomarkdown}**see**{:/} and test.\n</code></pre>\n<h2 id=\"check-version\">Check version <a class=\"direct-link\" href=\"#check-version\">#</a></h2>\n<ul>\n<li>Local gems: <code>gem list jekyll</code>.</li>\n<li>Current jekyll version of website: check <code>Gemfile</code>. Need to run <code>bundle update</code> if change any version in this file.</li>\n</ul>\n<h2 id=\"link-to-posts\">Link to posts <a class=\"direct-link\" href=\"#link-to-posts\">#</a></h2>\n<pre><code>[Name of Link]({% post_url 2010-07-21-name-of-post %})\n</code></pre>\n<p>Edit this post on github (put below link in your post layout),</p>\n<pre><code>https://github.com/dinhanhthi/dinhanhthi.com/edit/master/{{path.path}}\n</code></pre>\n<h2 id=\"custom-domain-%26-repository-with-jekyll-sites\">Custom domain &amp; repository with Jekyll sites <a class=\"direct-link\" href=\"#custom-domain-%26-repository-with-jekyll-sites\">#</a></h2>\n<p>There are several choices for you to choose, it depends on your need.</p>\n<h3 id=\"you-don't-have-a-custom-domain\">You don't have a custom domain <a class=\"direct-link\" href=\"#you-don't-have-a-custom-domain\">#</a></h3>\n<ol>\n<li>Suppose your github account is <code>&lt;username&gt;</code>.</li>\n<li>Create a repo <code>&lt;username&gt;.github.io</code>.</li>\n<li>Put your site in branch <code>master</code> (default).</li>\n<li>Your site is published at <code>https://&lt;username&gt;.github.io</code></li>\n</ol>\n<p>If you wanna store your site in a custom repo, e.g. <code>mysite</code>:</p>\n<p class=\"indent\"></p>\n<ol>\n<li>Create a branch <code>gh-pages</code> + set it as default + store your site here.</li>\n<li>Remove content at <code>url:</code> in <code>_config.yml</code>.</li>\n<li>Your site is live at <code>https://&lt;username&gt;.github.io/mysite/</code></li>\n</ol>\n<h3 id=\"you-have-a-custom-domain\">You have a custom domain <a class=\"direct-link\" href=\"#you-have-a-custom-domain\">#</a></h3>\n<ol>\n<li>Create file <code>CNAME</code> at root and put <code>&lt;customdomain&gt;.com</code> in it.</li>\n<li>Create <code>A</code> or <code>CNAME</code> record in DNS provider. Check <a href=\"https://help.github.com/en/github/working-with-github-pages/managing-a-custom-domain-for-your-github-pages-site\">more</a>.</li>\n<li>You can also use <a href=\"http://netlify.com\">netlify</a> to set all things up automatically.</li>\n</ol>\n<h2 id=\"using-custom-plugins%3F\">Using custom plugins? <a class=\"direct-link\" href=\"#using-custom-plugins%3F\">#</a></h2>\n<ol>\n<li>Build your site locally and get a folder <code>_site</code>.</li>\n<li>Put it to github and see the results.</li>\n</ol>\n<p>You can also use <a href=\"https://netlify.com\"><code>netlify</code></a>, it accepts custom plugin as well.</p>\n<h2 id=\"using-_data-with-include\">Using <code>_data</code> with <code>include</code> <a class=\"direct-link\" href=\"#using-_data-with-include\">#</a></h2>\n<p>You can use,</p>\n<pre><code>{% include proud-of.html data=site.data.proudof-notes %}\n</code></pre>\n<p>where there is a data file located in <code>_data/proudof-notes.yml</code>.</p>\n<h2 id=\"create-a-custom-tags%2Fblocks\">Create a custom tags/blocks <a class=\"direct-link\" href=\"#create-a-custom-tags%2Fblocks\">#</a></h2>\n<h3 id=\"refs\">Refs <a class=\"direct-link\" href=\"#refs\">#</a></h3>\n<ul>\n<li><a href=\"https://jekyllrb.com/docs/plugins/tags/\">Official Jekyll guid</a>.</li>\n<li><a href=\"https://blog.sverrirs.com/2016/04/custom-jekyll-tags.html\">How to create customizable Liquid tags</a> in Jekyll by Sverrir Sigmundarson.</li>\n<li><a href=\"http://mikelui.io/2018/07/22/jekyll-nested-blocks.html\">Creating an Accordion Plugin for Jekyll</a> by Mike Lui.</li>\n</ul>\n<h3 id=\"tag-with-single-parameter\">Tag with single parameter <a class=\"direct-link\" href=\"#tag-with-single-parameter\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre><code>{% render_time page rendered at: %}\n</code></pre>\n<pre class=\"language-html\"><code class=\"language-html\">page rendered at: Tue June 22 23:38:47 –0500 2010</code></pre>\n</div>\n<p>Inside folder <code>_plugins</code>, create a file <code>thi_single_tag.rb</code> whose content is,</p>\n<pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token keyword\">module</span> <span class=\"token constant\">Jekyll</span><br>  <span class=\"token keyword\">class</span> <span class=\"token class-name\">RenderTimeTag</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">Liquid</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Tag</span><br><br>    <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">initialize</span></span><span class=\"token punctuation\">(</span>tag_name<span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">,</span> tokens<span class=\"token punctuation\">)</span><br>      <span class=\"token keyword\">super</span><br>      <span class=\"token variable\">@text</span> <span class=\"token operator\">=</span> text<br>    <span class=\"token keyword\">end</span><br><br>    <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">render</span></span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span><br>      <span class=\"token string\">\"<span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span><span class=\"token variable\">@text</span><span class=\"token delimiter tag\">}</span></span> <span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span><span class=\"token builtin\">Time</span><span class=\"token punctuation\">.</span>now<span class=\"token delimiter tag\">}</span></span>\"</span><br>    <span class=\"token keyword\">end</span><br>  <span class=\"token keyword\">end</span><br><span class=\"token keyword\">end</span><br><br><span class=\"token constant\">Liquid</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Template</span><span class=\"token punctuation\">.</span>register_tag<span class=\"token punctuation\">(</span><span class=\"token string\">'render_time'</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">Jekyll</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">RenderTimeTag</span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"tag-with-two-parameters\">Tag with two parameters <a class=\"direct-link\" href=\"#tag-with-two-parameters\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre><code>{% badge update | green %}\n</code></pre>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tbadge badge-green<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>update<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span></code></pre>\n</div>\n<p>Inside folder <code>_plugins</code>, create a file <code>thi_badge.rb</code> whose content is,</p>\n<pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Badge</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">Liquid</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Tag</span><br>  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">initialize</span></span><span class=\"token punctuation\">(</span>tag_name<span class=\"token punctuation\">,</span> input<span class=\"token punctuation\">,</span> tokens<span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">super</span><br>    <span class=\"token variable\">@input</span> <span class=\"token operator\">=</span> input<br>  <span class=\"token keyword\">end</span><br><br>  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">render</span></span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span><br>    <span class=\"token comment\"># Split the input variable (omitting error checking)</span><br>    input_split <span class=\"token operator\">=</span> split_params<span class=\"token punctuation\">(</span><span class=\"token variable\">@input</span><span class=\"token punctuation\">)</span><br>    text <span class=\"token operator\">=</span> input_split<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>strip<br>    color <span class=\"token operator\">=</span> input_split<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>strip<br><br>    <span class=\"token comment\"># Write the output HTML string</span><br>    output <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">~</span><span class=\"token constant\">EOS</span><br>      <span class=\"token operator\">&lt;</span>span <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"tbadge badge-<span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>color<span class=\"token delimiter tag\">}</span></span>\"</span><span class=\"token operator\">></span><span class=\"token comment\">#{text}&lt;/span></span><br>    <span class=\"token constant\">EOS</span><br><br>    <span class=\"token comment\"># Render it on the page by returning it</span><br>    <span class=\"token keyword\">return</span> output<span class=\"token punctuation\">;</span><br>  <span class=\"token keyword\">end</span><br><br>  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">split_params</span></span><span class=\"token punctuation\">(</span>params<span class=\"token punctuation\">)</span><br>    params<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token string\">\"|\"</span><span class=\"token punctuation\">)</span><br>  <span class=\"token keyword\">end</span><br><span class=\"token keyword\">end</span><br><span class=\"token constant\">Liquid</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Template</span><span class=\"token punctuation\">.</span>register_tag<span class=\"token punctuation\">(</span><span class=\"token string\">'badge'</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">Badge</span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"block-with-single-parameter\">Block with single parameter <a class=\"direct-link\" href=\"#block-with-single-parameter\">#</a></h3>\n<p>For example, we wanna create a custom block <code>alertbox</code> using <a href=\"https://getbootstrap.com/docs/4.1/components/alerts/\">class from Bootstrap</a>.</p>\n<div class=\"col-2-equal\">\n<pre><code>{% alertbox warning %}\nContent\n{% endalertbox %}\n</code></pre>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>alert alert-warning<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">role</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>alert<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">markdown</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br>Content<br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n</div>\n<p>Inside folder <code>_plugins</code>, create a file <code>thi_alert.rb</code> whose content is,</p>\n<pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token keyword\">module</span> <span class=\"token constant\">Jekyll</span><br>  <span class=\"token keyword\">class</span> <span class=\"token class-name\">Alertbox</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">Liquid</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Block</span><br>    <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">initialize</span></span><span class=\"token punctuation\">(</span>tag_name<span class=\"token punctuation\">,</span> input<span class=\"token punctuation\">,</span> liquid_options<span class=\"token punctuation\">)</span><br>      <span class=\"token keyword\">super</span><br>      <span class=\"token variable\">@input</span> <span class=\"token operator\">=</span> input<span class=\"token punctuation\">.</span>strip<br>    <span class=\"token keyword\">end</span><br><br>    <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">render</span></span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span><br>      content <span class=\"token operator\">=</span> <span class=\"token keyword\">super</span><br><br>      <span class=\"token keyword\">case</span> <span class=\"token variable\">@input</span><br>      <span class=\"token keyword\">when</span> <span class=\"token string\">\"warning\"</span><br>        box_type <span class=\"token operator\">=</span> <span class=\"token string\">'warning'</span><br>      <span class=\"token keyword\">when</span> <span class=\"token string\">\"success\"</span><br>        box_type <span class=\"token operator\">=</span> <span class=\"token string\">'success'</span><br>      <span class=\"token keyword\">when</span> <span class=\"token string\">\"primary\"</span><br>        box_type <span class=\"token operator\">=</span> <span class=\"token string\">'primary'</span><br>      <span class=\"token keyword\">when</span> <span class=\"token string\">\"secondary\"</span><br>        box_type <span class=\"token operator\">=</span> <span class=\"token string\">'secondary'</span><br>      <span class=\"token keyword\">when</span> <span class=\"token string\">\"danger\"</span><br>        box_type <span class=\"token operator\">=</span> <span class=\"token string\">'danger'</span><br>      <span class=\"token keyword\">when</span> <span class=\"token string\">\"info\"</span><br>        box_type <span class=\"token operator\">=</span> <span class=\"token string\">'info'</span><br>      <span class=\"token keyword\">when</span> <span class=\"token string\">\"light\"</span><br>        box_type <span class=\"token operator\">=</span> <span class=\"token string\">'light'</span><br>      <span class=\"token keyword\">when</span> <span class=\"token string\">\"dark\"</span><br>        box_type <span class=\"token operator\">=</span> <span class=\"token string\">'dark'</span><br>      <span class=\"token keyword\">end</span><br><br>      output <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">~</span><span class=\"token constant\">EOS</span><br>        <span class=\"token operator\">&lt;</span>div <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"alert alert-<span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>box_type<span class=\"token delimiter tag\">}</span></span>\"</span> markdown<span class=\"token operator\">=</span><span class=\"token string\">\"1\"</span><span class=\"token operator\">></span><br>          <span class=\"token comment\">#{content}</span><br>        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span><br>      <span class=\"token constant\">EOS</span><br>    <span class=\"token keyword\">end</span><br>  <span class=\"token keyword\">end</span><br><span class=\"token keyword\">end</span><br><br><span class=\"token constant\">Liquid</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Template</span><span class=\"token punctuation\">.</span>register_tag<span class=\"token punctuation\">(</span><span class=\"token string\">'alertbox'</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">Jekyll</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">AlertBox</span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"nested-blocks-with-crossed-using-variables\">Nested blocks with crossed-using variables <a class=\"direct-link\" href=\"#nested-blocks-with-crossed-using-variables\">#</a></h3>\n<p>A more complicated example, suppose that you wanna create a <strong class=\"tbrown\">hide/show box</strong> using <a href=\"https://getbootstrap.com/docs/4.1/components/collapse/\">Bootstrap's Collapse</a>, you can use below shortcode. Its advantage is that you don't have to put manually the <code>id</code> for each box! Wonderful!</p>\n<div class=\"col-2-equal\">\n<pre><code>{% hsbox %}\n\n{% hstitle %}\nBox's title\n{% endhstitle %}\n\n{% hscontent %}\nBox's content.\n{% endhscontent %}\n\n{% endhsbox %}\n</code></pre>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hide-show-box<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">markdown</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>btn collapsed box-button<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-toggle</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>collapse<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-target</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#box1ct<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br>Box's title<br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>box1ct<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">markdown</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>collapse multi-collapse box-content<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br>Box's content.<br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n</div>\n<p>Inside folder <code>_plugins</code>, create a file <code>thi_hideshowbox.rb</code> whose content is,</p>\n<pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token keyword\">module</span> <span class=\"token constant\">Jekyll</span><br>  <span class=\"token keyword\">class</span> <span class=\"token class-name\">HideShowBox</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">Liquid</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Block</span><br><br>    <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">initialize</span></span><span class=\"token punctuation\">(</span>tag_name<span class=\"token punctuation\">,</span> contain<span class=\"token punctuation\">,</span> tokens<span class=\"token punctuation\">)</span><br>      <span class=\"token keyword\">super</span><br>    <span class=\"token keyword\">end</span><br><br>    <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">generate_box_id</span></span><span class=\"token punctuation\">(</span>number<span class=\"token punctuation\">)</span><br>      charset <span class=\"token operator\">=</span> <span class=\"token builtin\">Array</span><span class=\"token punctuation\">(</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token string\">'Z'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">Array</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token string\">'z'</span><span class=\"token punctuation\">)</span><br>      <span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">(</span>number<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> charset<span class=\"token punctuation\">.</span>sample <span class=\"token punctuation\">}</span><span class=\"token punctuation\">.</span>join<br>    <span class=\"token keyword\">end</span><br><br>    <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">render</span></span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span><br>      context<span class=\"token punctuation\">.</span>stack <span class=\"token keyword\">do</span><br>        context<span class=\"token punctuation\">[</span><span class=\"token string\">\"boxID\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> generate_box_id<span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># create the box's ID</span><br>        <span class=\"token variable\">@content</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">super</span><br>      <span class=\"token keyword\">end</span><br>      <span class=\"token string\">\"&lt;div class=\\\"hide-show-box\\\"><span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span><span class=\"token variable\">@content</span><span class=\"token delimiter tag\">}</span></span>&lt;/div>\"</span><br>    <span class=\"token keyword\">end</span><br>  <span class=\"token keyword\">end</span><br><br>  <span class=\"token keyword\">class</span> <span class=\"token class-name\">HSBtitle</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">Liquid</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Tag</span><br>    <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">initialize</span></span><span class=\"token punctuation\">(</span>tag_name<span class=\"token punctuation\">,</span> contain<span class=\"token punctuation\">,</span> tokens<span class=\"token punctuation\">)</span><br>      <span class=\"token keyword\">super</span><br>      <span class=\"token variable\">@title</span> <span class=\"token operator\">=</span> contain<br>    <span class=\"token keyword\">end</span><br><br>    <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">render</span></span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span><br>      boxID <span class=\"token operator\">=</span> context<span class=\"token punctuation\">[</span><span class=\"token string\">\"boxID\"</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># get the box's ID</span><br><br>      output <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">~</span><span class=\"token constant\">EOS</span><br>        <span class=\"token operator\">&lt;</span>button type<span class=\"token operator\">=</span><span class=\"token string\">\"button\"</span> markdown<span class=\"token operator\">=</span><span class=\"token string\">\"1\"</span> <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"btn collapsed box-button\"</span> data<span class=\"token operator\">-</span>toggle<span class=\"token operator\">=</span><span class=\"token string\">\"collapse\"</span> data<span class=\"token operator\">-</span>target<span class=\"token operator\">=</span><span class=\"token string\">\"#<span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>boxID<span class=\"token delimiter tag\">}</span></span>\"</span><span class=\"token operator\">></span><span class=\"token comment\">#{@title}&lt;/button></span><br>      <span class=\"token constant\">EOS</span><br>    <span class=\"token keyword\">end</span><br>  <span class=\"token keyword\">end</span><br><br>  <span class=\"token keyword\">class</span> <span class=\"token class-name\">HSBcontent</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">Liquid</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Block</span><br>    <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">initialize</span></span><span class=\"token punctuation\">(</span>tag_name<span class=\"token punctuation\">,</span> contain<span class=\"token punctuation\">,</span> tokens<span class=\"token punctuation\">)</span><br>      <span class=\"token keyword\">super</span><br>      <span class=\"token variable\">@showBox</span> <span class=\"token operator\">=</span> contain<span class=\"token punctuation\">.</span>strip<br>    <span class=\"token keyword\">end</span><br><br>    <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">render</span></span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span><br>      boxID <span class=\"token operator\">=</span> context<span class=\"token punctuation\">[</span><span class=\"token string\">\"boxID\"</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># get the box's ID</span><br>      <span class=\"token keyword\">if</span> <span class=\"token variable\">@showBox</span> <span class=\"token operator\">==</span> <span class=\"token string\">'show'</span><br>        classShow <span class=\"token operator\">=</span> <span class=\"token string\">'show'</span><br>      <span class=\"token keyword\">else</span><br>        classShow <span class=\"token operator\">=</span> <span class=\"token string\">''</span><br>      <span class=\"token keyword\">end</span><br>      output <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">~</span><span class=\"token constant\">EOS</span><br>        <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>boxID<span class=\"token delimiter tag\">}</span></span>\"</span> markdown<span class=\"token operator\">=</span><span class=\"token string\">\"1\"</span> <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"collapse multi-collapse box-content <span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>classShow<span class=\"token delimiter tag\">}</span></span>\"</span><span class=\"token operator\">></span><br>          <span class=\"token comment\">#{super}</span><br>        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span><br>      <span class=\"token constant\">EOS</span><br><br>      output<br>    <span class=\"token keyword\">end</span><br>  <span class=\"token keyword\">end</span><br><span class=\"token keyword\">end</span><br><br><span class=\"token constant\">Liquid</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Template</span><span class=\"token punctuation\">.</span>register_tag<span class=\"token punctuation\">(</span><span class=\"token string\">'hsbox'</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">Jekyll</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">HideShowBox</span><span class=\"token punctuation\">)</span><br><span class=\"token constant\">Liquid</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Template</span><span class=\"token punctuation\">.</span>register_tag<span class=\"token punctuation\">(</span><span class=\"token string\">'hstitle'</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">Jekyll</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">HSBtitle</span><span class=\"token punctuation\">)</span><br><span class=\"token constant\">Liquid</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Template</span><span class=\"token punctuation\">.</span>register_tag<span class=\"token punctuation\">(</span><span class=\"token string\">'hscontent'</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">Jekyll</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">HSBcontent</span><span class=\"token punctuation\">)</span></code></pre>\n<p>💡 Actually, there is a <strong class=\"tbrown\">simpler solution</strong> for this task. We can get</p>\n<div class=\"col-2-equal\">\n<pre><code>{% hsbox **Box's title** | show %}\nBox's content.\n{% endhsbox %}\n</code></pre>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hide-show-box<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">markdown</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>btn collapsed box-button<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-toggle</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>collapse<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-target</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#something<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>strong</span><span class=\"token punctuation\">></span></span>Box's title<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>strong</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>something<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">markdown</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>collapse multi-collapse box-content<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br>Box's content.<br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n</div>\n<p>by using</p>\n<pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token keyword\">module</span> <span class=\"token constant\">Jekyll</span><br>  <span class=\"token keyword\">class</span> <span class=\"token class-name\">HideShowBox</span> <span class=\"token operator\">&lt;</span> <span class=\"token constant\">Liquid</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Block</span><br><br>    <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">initialize</span></span><span class=\"token punctuation\">(</span>tag_name<span class=\"token punctuation\">,</span> contain<span class=\"token punctuation\">,</span> tokens<span class=\"token punctuation\">)</span><br>      <span class=\"token keyword\">super</span><br>      <span class=\"token variable\">@input</span> <span class=\"token operator\">=</span> contain<br>    <span class=\"token keyword\">end</span><br><br>    <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">generate_box_id</span></span><span class=\"token punctuation\">(</span>number<span class=\"token punctuation\">)</span><br>      charset <span class=\"token operator\">=</span> <span class=\"token builtin\">Array</span><span class=\"token punctuation\">(</span><span class=\"token string\">'A'</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token string\">'Z'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token builtin\">Array</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token string\">'z'</span><span class=\"token punctuation\">)</span><br>      <span class=\"token builtin\">Array</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">(</span>number<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> charset<span class=\"token punctuation\">.</span>sample <span class=\"token punctuation\">}</span><span class=\"token punctuation\">.</span>join<br>    <span class=\"token keyword\">end</span><br><br>    <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">render</span></span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span><br>      <span class=\"token comment\"># Split the input variable (omitting error checking)</span><br>      input_split <span class=\"token operator\">=</span> split_params<span class=\"token punctuation\">(</span><span class=\"token variable\">@input</span><span class=\"token punctuation\">)</span><br>      title <span class=\"token operator\">=</span> input_split<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><br>      boxid <span class=\"token operator\">=</span> generate_box_id<span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><br>      <span class=\"token keyword\">if</span> input_split<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">!=</span> <span class=\"token keyword\">nil</span><br>        <span class=\"token keyword\">if</span> input_split<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>strip <span class=\"token operator\">==</span> <span class=\"token string\">'show'</span><br>          showbox <span class=\"token operator\">=</span> <span class=\"token string\">\"show\"</span><br>        <span class=\"token keyword\">else</span><br>          showbox <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><br>        <span class=\"token keyword\">end</span><br>      <span class=\"token keyword\">else</span><br>        showbox <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><br>      <span class=\"token keyword\">end</span><br>      content <span class=\"token operator\">=</span> <span class=\"token keyword\">super</span><br><br>      output <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">~</span><span class=\"token constant\">EOS</span><br>        <span class=\"token operator\">&lt;</span>div <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"hide-show-box\"</span><span class=\"token operator\">></span><br>          <span class=\"token operator\">&lt;</span>button type<span class=\"token operator\">=</span><span class=\"token string\">\"button\"</span> markdown<span class=\"token operator\">=</span><span class=\"token string\">\"1\"</span> <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"btn collapsed box-button\"</span> data<span class=\"token operator\">-</span>toggle<span class=\"token operator\">=</span><span class=\"token string\">\"collapse\"</span> data<span class=\"token operator\">-</span>target<span class=\"token operator\">=</span><span class=\"token string\">\"#<span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>boxid<span class=\"token delimiter tag\">}</span></span>\"</span><span class=\"token operator\">></span><br>            <span class=\"token comment\">#{title}</span><br>          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span><br>          <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>boxid<span class=\"token delimiter tag\">}</span></span>\"</span> markdown<span class=\"token operator\">=</span><span class=\"token string\">\"1\"</span> <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"collapse multi-collapse box-content <span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>showbox<span class=\"token delimiter tag\">}</span></span>\"</span><span class=\"token operator\">></span><br>            <span class=\"token comment\">#{content}</span><br>          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span><br>        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span><br>      <span class=\"token constant\">EOS</span><br>    <span class=\"token keyword\">end</span><br><br>    <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">split_params</span></span><span class=\"token punctuation\">(</span>params<span class=\"token punctuation\">)</span><br>      params<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token string\">\"|\"</span><span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">end</span><br>  <span class=\"token keyword\">end</span><br><span class=\"token keyword\">end</span><br><br><span class=\"token constant\">Liquid</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">Template</span><span class=\"token punctuation\">.</span>register_tag<span class=\"token punctuation\">(</span><span class=\"token string\">'hsbox'</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">Jekyll</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">HideShowBox</span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"problem-with-kramdown\">Problem with kramdown <a class=\"direct-link\" href=\"#problem-with-kramdown\">#</a></h3>\n<p>Somtimes, we cannot use <code>markdown=&quot;1&quot;</code> directly in ruby file. For example, below block of code produces a block of codes (<code>&lt;pre&gt;</code>) instead of a single text,</p>\n<pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">initialize</span></span><span class=\"token punctuation\">(</span>tag_name<span class=\"token punctuation\">,</span> input<span class=\"token punctuation\">,</span> liquid_options<span class=\"token punctuation\">)</span><br>  <span class=\"token keyword\">super</span><br>  <span class=\"token variable\">@title</span> <span class=\"token operator\">=</span> input<br><span class=\"token keyword\">end</span><br><br><span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">render</span></span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span><br>  content <span class=\"token operator\">=</span> <span class=\"token keyword\">super</span><br>  output <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">~</span><span class=\"token constant\">EOS</span><br>    <span class=\"token operator\">&lt;</span>div <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"def-box\"</span> id<span class=\"token operator\">=</span><span class=\"token string\">\"dn1\"</span><span class=\"token operator\">></span><br>      <span class=\"token operator\">&lt;</span>div <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"box-title\"</span> markdown<span class=\"token operator\">=</span><span class=\"token string\">\"1\"</span><span class=\"token operator\">></span><br>        <span class=\"token comment\">#{@title}</span><br>      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span><br>      <span class=\"token operator\">&lt;</span>div <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"box-content\"</span> markdown<span class=\"token operator\">=</span><span class=\"token string\">\"1\"</span><span class=\"token operator\">></span><br>        <span class=\"token comment\">#{content}</span><br>      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span><br>    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span><br>  <span class=\"token constant\">EOS</span><br><span class=\"token keyword\">end</span></code></pre>\n<p>Instead, we change a little bit like this,</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>box-title<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">markdown</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>span<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>#{@title}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n<h2 id=\"run-with-draft\">Run with draft <a class=\"direct-link\" href=\"#run-with-draft\">#</a></h2>\n<p>Inside the root folder, create a folder named <code>_drafts</code>. You can put your draft posts inside this folder and whenever you wanna show it in your site, use this command,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">bundle <span class=\"token builtin class-name\">exec</span> jekyll serve --draft</code></pre>\n<p>In the case you have already build your site (all new posts are rendered to <code>_site</code>), you only changes some small things in some post and you don't want jekyll to render again all things on your site (just look at your current post), use this,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">bundle <span class=\"token builtin class-name\">exec</span> jekyll serve -I</code></pre>\n<h2 id=\"serve-in-background\">Serve in background <a class=\"direct-link\" href=\"#serve-in-background\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># start</span><br>bundle <span class=\"token builtin class-name\">exec</span> jekyll serve <span class=\"token operator\"><span class=\"token file-descriptor important\">2</span>></span><span class=\"token file-descriptor important\">&amp;1</span> <span class=\"token operator\">&amp;</span><br>bundle <span class=\"token builtin class-name\">exec</span> jekyll serve -I <span class=\"token operator\"><span class=\"token file-descriptor important\">2</span>></span><span class=\"token file-descriptor important\">&amp;1</span> <span class=\"token operator\">&amp;</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># stop</span><br><span class=\"token comment\"># find jekyll server process</span><br><span class=\"token function\">ps</span> -ef <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> jekyll<br><span class=\"token comment\"># substitute pid# with process id</span><br><span class=\"token function\">kill</span> -9 pid<span class=\"token comment\">#</span></code></pre>\n</div>\n<h2 id=\"using-markdown-syntax-inside-a-html-tag%2Fblock\">Using markdown syntax inside a HTML tag/block <a class=\"direct-link\" href=\"#using-markdown-syntax-inside-a-html-tag%2Fblock\">#</a></h2>\n<p>For a block, we use <code>markdown=&quot;1&quot;</code>,</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">markdown</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>paragraph<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>For a tag, we use <code>markdown=&quot;span&quot;</code>,</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mark</span> <span class=\"token attr-name\">markdown</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>span<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>text<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span></code></pre>\n<h2 id=\"add-search-with-lunrjs\">Add search with lunrjs <a class=\"direct-link\" href=\"#add-search-with-lunrjs\">#</a></h2>\n<p>Download <a href=\"/js/lunr.min.js\">lunr.min.js</a> and <a href=\"/js/search.js\">search.js</a> and put them in <code>root/js/</code>. The newest version of lunrjs given here but I'm not sur if it works with this technique or not.</p>\n<p>Create a file <code>search.html</code> in the root folder with content:</p>\n<pre class=\"language-html\"><code class=\"language-html\">---<br>layout: page<br>title: Search on this page<br>---<br><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>p-intro<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>search-process<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{{re_loading}}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span> {{re_result}} <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>search-query-container<span class=\"token punctuation\">\"</span></span> <span class=\"token style-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token style language-css\"><span class=\"token property\">display</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">></span></span>{{re_forkey}} \"<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>strong</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>search-query<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>strong</span><span class=\"token punctuation\">></span></span>\"<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>search-results<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><br><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/javascript<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"><br>  window<span class=\"token punctuation\">.</span>data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> <span class=\"token keyword\">for</span> post <span class=\"token keyword\">in</span> site<span class=\"token punctuation\">.</span>posts <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span><br>      <span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> <span class=\"token keyword\">if</span> post<span class=\"token punctuation\">.</span>title <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span><br>        <span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> unless post<span class=\"token punctuation\">.</span>excluded_in_search <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span><br>          <span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> <span class=\"token keyword\">if</span> added <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> endif <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span><br>          <span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> assign added <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span> <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span><br>          <span class=\"token string\">\"{{ post.url | slugify }}\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>            <span class=\"token string\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"{{ post.url | slugify }}\"</span><span class=\"token punctuation\">,</span><br>            <span class=\"token string\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"{{ post.title | xml_escape }}\"</span><span class=\"token punctuation\">,</span><br>            <span class=\"token string\">\"categories\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"{{ post.categories | join: \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\" | xml_escape }}\"</span><span class=\"token punctuation\">,</span><br>            <span class=\"token string\">\"tags\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"{{ post.tags | join: \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\" | xml_escape }}\"</span><span class=\"token punctuation\">,</span><br>            <span class=\"token string\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\" {{ post.url | xml_escape }}\"</span><span class=\"token punctuation\">,</span><br>            <span class=\"token string\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> post<span class=\"token punctuation\">.</span>content <span class=\"token operator\">|</span> strip_html <span class=\"token operator\">|</span> replace_regex<span class=\"token operator\">:</span> <span class=\"token string\">\"[\\s/\\n]+\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\" \"</span> <span class=\"token operator\">|</span> strip <span class=\"token operator\">|</span> jsonify <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><br>          <span class=\"token punctuation\">}</span><br>          <span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> assign added <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span> <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span><br>        <span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> endunless <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span><br>      <span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> endif <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span><br>    <span class=\"token punctuation\">{</span><span class=\"token operator\">%</span> endfor <span class=\"token operator\">%</span><span class=\"token punctuation\">}</span><br>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span><br></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{ site.baseurl }}/js/lunr.min.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{ site.baseurl }}/js/search.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Note that, you can change some personal settings in the files <code>search.js</code> and <code>search.html</code> if you like.</p>\n<p><strong>Remark</strong>: if your site has so many posts, you can remove the last line (<code>&quot;content&quot;....</code>) to ignore the content from the search. You can even add &quot;keywords&quot; (resplace for &quot;content&quot;) and put that &quot;keywords&quot; in the frontmatter, change also the term &quot;content&quot; in <code>search.js</code> by &quot;keywords&quot;. That's what I did on this site.</p>\n",
      "date_published": "2019-09-02T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/python-with-sublime-text/",
      "url": "https://dinhanhthi.com/python-with-sublime-text/",
      "title": "Sublime Text 3",
      "content_html": "<p>This instruction taken from <a href=\"https://www.youtube.com/watch?v=xFciV6Ew5r4\">a video</a> of Corey Schafer. You need to install <a href=\"https://www.sublimetext.com/3\">Sublime Text 3</a> and its <a href=\"https://packagecontrol.io/installation\">Package Control</a> to do below stuffs.</p>\n<h2 id=\"theme\">Theme <a class=\"direct-link\" href=\"#theme\">#</a></h2>\n<p>Install theme <strong><a href=\"https://packagecontrol.io/packages/Predawn\">Predawn</a></strong> and <strong>Material Theme</strong>:</p>\n<ol>\n<li>Open <strong>Command Palette</strong> (<em>Tool</em> &gt; <em>Command Palette</em> or <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>P</kbd>). Type <code>install</code> to open <code>Package Control: Install Package</code>.</li>\n<li>Search and install <code>Predawn</code> and <code>Material Theme</code>.</li>\n</ol>\n<h2 id=\"personal-settings\">Personal settings <a class=\"direct-link\" href=\"#personal-settings\">#</a></h2>\n<p>Open <strong>Preferences</strong> &gt; <strong>Settings</strong>, replace the content in tab <code>-User</code> by,</p>\n<div class=\"hsbox\"><div class=\"hs__title\">Show settings</div><div class=\"hs__content\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span><br>\t<span class=\"token property\">\"bold_folder_labels\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"caret_extra_width\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"caret_style\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"phase\"</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"close_windows_when_empty\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"color_scheme\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Packages/Predawn/predawn.tmTheme\"</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"copy_with_empty_selection\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"detect_indentation\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"drag_text\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"draw_minimap_border\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"enable_tab_scrolling\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"ensure_newline_at_eof_on_save\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"file_exclude_patterns\"</span><span class=\"token operator\">:</span><br>\t<span class=\"token punctuation\">[</span><br>\t\t<span class=\"token string\">\"*.pyc\"</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token string\">\"*.pyo\"</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token string\">\"*.exe\"</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token string\">\"*.dll\"</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token string\">\"*.obj\"</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token string\">\"*.o\"</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token string\">\"*.a\"</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token string\">\"*.lib\"</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token string\">\"*.so\"</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token string\">\"*.dylib\"</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token string\">\"*.ncb\"</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token string\">\"*.sdf\"</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token string\">\"*.suo\"</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token string\">\"*.pdb\"</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token string\">\"*.idb\"</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token string\">\".DS_Store\"</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token string\">\"*.class\"</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token string\">\"*.psd\"</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token string\">\"*.sublime-workspace\"</span><br>\t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"folder_exclude_patterns\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\".svn\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\".git\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\".hg\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"CVS\"</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token string\">\"_site\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"vendor\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\".jekyll-cache\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"img\"</span><br>\t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"font_face\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Source Code Pro\"</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"font_options\"</span><span class=\"token operator\">:</span><br>\t<span class=\"token punctuation\">[</span><br>\t\t<span class=\"token string\">\"no_round\"</span><br>\t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"font_size\"</span><span class=\"token operator\">:</span> <span class=\"token number\">13</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"highlight_line\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"highlight_modified_tabs\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"ignored_packages\"</span><span class=\"token operator\">:</span><br>\t<span class=\"token punctuation\">[</span><br>\t\t<span class=\"token string\">\"Vintage\"</span><br>\t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"line_padding_bottom\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"line_padding_top\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"match_brackets_content\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"match_selection\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"match_tags\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"material_theme_accent_graphite\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"material_theme_compact_sidebar\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"open_files_in_new_window\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"overlay_scroll_bars\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"enabled\"</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"preview_on_click\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"scroll_past_end\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"scroll_speed\"</span><span class=\"token operator\">:</span> <span class=\"token number\">5.0</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"shift_tab_unindent\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"show_definitions\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"show_encoding\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"show_errors_inline\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"show_full_path\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"sidebar_default\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"tab_size\"</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"theme\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Adaptive.sublime-theme\"</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"translate_tabs_to_spaces\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"trim_trailing_white_space_on_save\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"use_simple_full_screen\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"word_wrap\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><br><span class=\"token punctuation\">}</span></code></pre>\n</div></div>\n<h2 id=\"useful-packages\">Useful packages <a class=\"direct-link\" href=\"#useful-packages\">#</a></h2>\n<p>Install other useful packages (the same way as installing Predawn):</p>\n<p class=\"indent\"></p>\n<ul>\n<li><strong>BracketHighlighter</strong>: indicate the paired bracket.</li>\n<li><strong>SidebarEnhancement</strong>: add more options to sidebar.</li>\n<li><strong>TabNine</strong>: autocomplete extension using deep learning.</li>\n</ul>\n<h2 id=\"python\">Python <a class=\"direct-link\" href=\"#python\">#</a></h2>\n<h3 id=\"packages\">Packages <a class=\"direct-link\" href=\"#packages\">#</a></h3>\n<ul>\n<li>\n<p><strong>Anaconda</strong>: after installing this package, go go <strong>Preferences</strong> &gt; <strong>Package settings</strong> &gt; <strong>Anaconda</strong> &gt; <strong>Settings - Users</strong> &gt; paste following content,</p>\n  <div class=\"hsbox\">\n  <div class=\"hs__title\">\n  Show settings\n  </div>\n  <div class=\"hs__content\">\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span><br>\t<span class=\"token property\">\"auto_formatting\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"autoformat_ignore\"</span><span class=\"token operator\">:</span><br>\t<span class=\"token punctuation\">[</span><br>\t\t<span class=\"token string\">\"E309\"</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token string\">\"E501\"</span><br>\t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"pep8_ignore\"</span><span class=\"token operator\">:</span><br>\t<span class=\"token punctuation\">[</span><br>\t\t<span class=\"token string\">\"E309\"</span><span class=\"token punctuation\">,</span><br>\t\t<span class=\"token string\">\"E501\"</span><br>\t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"anaconda_linter_underlines\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"anaconda_linter_mark_style\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"none\"</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"display_signatures\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"disable_anaconda_completion\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><br><span class=\"token punctuation\">}</span></code></pre>\n  </div>\n  </div>\n</li>\n</ul>\n<h3 id=\"custom-build-systems\">Custom Build Systems <a class=\"direct-link\" href=\"#custom-build-systems\">#</a></h3>\n<p>If you wanna create different Build Systems w.r.t different versions of Python: <strong>Tools</strong> &gt; <strong>Build System</strong> &gt; <strong>New Build System...</strong> &gt; paste following codes (replace the directory to the directory of Python version that you want to use).</p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span><br>  <span class=\"token property\">\"cmd\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"/home/thi/anaconda3/bin/python\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"-u\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"$file\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><br>  <span class=\"token property\">\"file_regex\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^[ ]*File \\\"(...*?)\\\", line ([0-9]*)\"</span><span class=\"token punctuation\">,</span><br>  <span class=\"token property\">\"quiet\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><br><span class=\"token punctuation\">}</span></code></pre>\n<p>In order to run codes, you need to choose the build system first, then use <kbd>Ctrl</kbd> + <kbd>B</kbd>.</p>\n<h2 id=\"markdown\">Markdown <a class=\"direct-link\" href=\"#markdown\">#</a></h2>\n<ul>\n<li>\n<p>Install package <strong>MarkdownEditting</strong>.</p>\n</li>\n<li>\n<p>Change hotkeys: <strong>Prefereces</strong> &gt; <strong>Package Settings</strong> &gt; <strong>Markdown Editing</strong> &gt; <strong>Key Bindings - User</strong></p>\n  <div class=\"hsbox\">\n  <div class=\"hs__title\">\n  Show settings\n  </div>\n  <div class=\"hs__content\">\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">[</span><br>\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"keys\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"ctrl+b\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"command\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"run_macro_file\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"args\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token property\">\"file\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Packages/MarkdownEditing/macros/Transform Word - Bold.sublime-macro\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"context\"</span><span class=\"token operator\">:</span><br>\t\t<span class=\"token punctuation\">[</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"selection_empty\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"equal\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"match_all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"selector\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"equal\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text.html.markdown\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"match_all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><br>\t\t<span class=\"token punctuation\">]</span><br>\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"keys\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"ctrl+b\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"command\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"insert_snippet\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"args\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token property\">\"contents\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"${MD_BOLD_MARKER}$1${MD_BOLD_MARKER}\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"context\"</span><span class=\"token operator\">:</span><br>\t\t<span class=\"token punctuation\">[</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"setting.auto_match_enabled\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"equal\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"selection_empty\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"equal\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"match_all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"following_text\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"regex_contains\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^(?:\\t| |\\\\)|]|\\\\}|$)\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"match_all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"preceding_text\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"not_regex_contains\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"['a-zA-Z0-9_]$\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"match_all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"eol_selector\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"not_equal\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string.quoted.single\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"match_all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"selector\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"equal\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text.html.markdown\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"match_all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><br>\t\t<span class=\"token punctuation\">]</span><br>\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"keys\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"ctrl+b\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"command\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"insert_snippet\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"args\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token property\">\"contents\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"${MD_BOLD_MARKER}${SELECTION/(^[\\\\*_]*|[\\\\*_]*$)//g}${MD_BOLD_MARKER}\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"context\"</span><span class=\"token operator\">:</span><br>\t\t<span class=\"token punctuation\">[</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"setting.auto_match_enabled\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"equal\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"selection_empty\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"equal\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"match_all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"selector\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"equal\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text.html.markdown\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"match_all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><br>\t\t<span class=\"token punctuation\">]</span><br>\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"keys\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"ctrl+b\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"command\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"run_macro_file\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"args\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token property\">\"file\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Packages/MarkdownEditing/macros/Transform Word - Unbold Unitalicize.sublime-macro\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"context\"</span><span class=\"token operator\">:</span><br>\t\t<span class=\"token punctuation\">[</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"selection_empty\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"equal\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"match_all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"preceding_text\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"regex_contains\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\\\\b__+\\\\S+__+$\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"match_all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"selector\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"equal\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text.html.markdown\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"match_all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><br>\t\t<span class=\"token punctuation\">]</span><br>\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token comment\">// italics on Alt + I</span><br>\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"keys\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"alt+i\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"command\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"run_macro_file\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"args\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token property\">\"file\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Packages/MarkdownEditing/macros/Transform Word - Italic.sublime-macro\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"context\"</span><span class=\"token operator\">:</span><br>\t\t<span class=\"token punctuation\">[</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"selection_empty\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"equal\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"match_all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"selector\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"equal\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text.html.markdown\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"match_all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><br>\t\t<span class=\"token punctuation\">]</span><br>\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"keys\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"alt+i\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"command\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"insert_snippet\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"args\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token property\">\"contents\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"${MD_ITALIC_MARKER}$0${MD_ITALIC_MARKER}\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"context\"</span><span class=\"token operator\">:</span><br>\t\t<span class=\"token punctuation\">[</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"setting.auto_match_enabled\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"equal\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"selection_empty\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"equal\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"match_all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"following_text\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"regex_contains\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^(?:\\t| |\\\\)|]|\\\\}|$)\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"match_all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"preceding_text\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"not_regex_contains\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"['a-zA-Z0-9_]$\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"match_all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"eol_selector\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"not_equal\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"string.quoted.single\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"match_all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"selector\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"equal\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text.html.markdown\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"match_all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><br>\t\t<span class=\"token punctuation\">]</span><br>\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"keys\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"alt+i\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"command\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"insert_snippet\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"args\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token property\">\"contents\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"${MD_ITALIC_MARKER}${SELECTION/(^[\\\\*_]*|[\\\\*_]*$)//g}${MD_ITALIC_MARKER}\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"context\"</span><span class=\"token operator\">:</span><br>\t\t<span class=\"token punctuation\">[</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"setting.auto_match_enabled\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"equal\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"selection_empty\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"equal\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"match_all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"selector\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"equal\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text.html.markdown\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"match_all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><br>\t\t<span class=\"token punctuation\">]</span><br>\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"keys\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"alt+i\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"command\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"insert_snippet\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"args\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token property\">\"contents\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"${SELECTION/(^[\\\\*_]|[\\\\*_]$)//g}\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"context\"</span><span class=\"token operator\">:</span><br>\t\t<span class=\"token punctuation\">[</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"selection_empty\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"equal\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"match_all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"regex_match\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^[*_].*[*_]$\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"match_all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"selector\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"equal\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text.html.markdown\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"match_all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><br>\t\t<span class=\"token punctuation\">]</span><br>\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"keys\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"alt+i\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"command\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"run_macro_file\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"args\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token property\">\"file\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Packages/MarkdownEditing/macros/Transform Word - Unbold Unitalicize.sublime-macro\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"context\"</span><span class=\"token operator\">:</span><br>\t\t<span class=\"token punctuation\">[</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"selection_empty\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"equal\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"match_all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"selector\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"equal\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text.html.markdown markup.italic.markdown\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"match_all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><br>\t\t<span class=\"token punctuation\">]</span><br>\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"keys\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"alt+i\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"command\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"run_macro_file\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"args\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token property\">\"file\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Packages/MarkdownEditing/macros/Transform Word - Unbold Unitalicize.sublime-macro\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"context\"</span><span class=\"token operator\">:</span><br>\t\t<span class=\"token punctuation\">[</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"selection_empty\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"equal\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"match_all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"preceding_text\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"regex_contains\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\\\\b_(?!_)\\\\S+_$\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"match_all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"selector\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"equal\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text.html.markdown\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"match_all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><br>\t\t<span class=\"token punctuation\">]</span><br>\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token comment\">// run paste as link command on selected text</span><br>\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"keys\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"ctrl+k\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"command\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"reference_new_inline_link\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"context\"</span><span class=\"token operator\">:</span><br>\t\t<span class=\"token punctuation\">[</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"setting.mde.keymap_disable.reference_new_inline_link\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"not_equal\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"selector\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operator\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"equal\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"operand\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text.html.markdown\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"match_all\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><br>\t\t<span class=\"token punctuation\">]</span><br>\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token punctuation\">{</span> <span class=\"token property\">\"keys\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"shift+alt+b\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"command\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"toggle_side_bar\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><br><span class=\"token punctuation\">]</span></code></pre>\n  </div>\n  </div>\n</li>\n<li>\n<p>Make main window be on left (not center): <strong>Prefereces</strong> &gt; <strong>Package Settings</strong> &gt; <strong>Markdown Editing</strong> &gt; Markdown GFM Settings - User</p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span><br>\t<span class=\"token property\">\"color_scheme\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Packages/Predawn/predawn.tmTheme\"</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"draw_centered\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span><br>\t<span class=\"token property\">\"highlight_line\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><br><span class=\"token punctuation\">}</span></code></pre>\n</li>\n</ul>\n",
      "date_published": "2019-09-02T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/jupyter-notebook/",
      "url": "https://dinhanhthi.com/jupyter-notebook/",
      "title": "Jupyter Notebook",
      "content_html": "<h2 id=\"installation\">Installation <a class=\"direct-link\" href=\"#installation\">#</a></h2>\n<h3 id=\"jupyter-notebook\">Jupyter notebook <a class=\"direct-link\" href=\"#jupyter-notebook\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># BY PIP</span><br>pip <span class=\"token function\">install</span> --upgrade pip<br>pip <span class=\"token function\">install</span> --upgrade ipython jupyter</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># BY CONDA</span><br>conda <span class=\"token function\">install</span> ipython jupyter</code></pre>\n</div>\n<p>Or read more in <a href=\"/python-installation#jupyer-notebook\">this note</a>.</p>\n<p>If you meet error <code>OSError: [Errno 99] Cannot assign requested address</code>, try</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">jupyter notebook --ip<span class=\"token operator\">=</span><span class=\"token number\">127.0</span>.0.1 --port<span class=\"token operator\">=</span><span class=\"token number\">8080</span><br><span class=\"token comment\"># or</span><br>jupyter notebook --ip<span class=\"token operator\">=</span><span class=\"token number\">127.0</span>.0.1 --port<span class=\"token operator\">=</span><span class=\"token number\">8080</span> --allow-root</code></pre>\n<h3 id=\"setting-up-a-password\">Setting up a password <a class=\"direct-link\" href=\"#setting-up-a-password\">#</a></h3>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># create a juputer notebook config file</span><br><span class=\"token comment\"># it can be used for other settings</span><br><span class=\"token comment\"># https://jupyter-notebook.readthedocs.io/en/stable/public_server.html#prerequisite-a-notebook-configuration-file</span><br>jupyter notebook --generate-config<br><br><span class=\"token comment\"># create a new password</span><br><span class=\"token comment\"># note: sha1 cannot be reverted!!</span><br>jupyter notebook password</code></pre>\n<p>Inside notebook:</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> notebook<span class=\"token punctuation\">.</span>auth <span class=\"token keyword\">import</span> passwd<br>passwd<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<p>With docker</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># create a sha1 password</span><br><span class=\"token comment\"># download file create_sha1.py from https://github.com/dinhanhthi/scripts</span><br><span class=\"token comment\"># run ./create_sha1.py</span><br><br><span class=\"token comment\"># docker-compose.yml</span><br>environment:<br>  - <span class=\"token assign-left variable\">PASSWD</span><span class=\"token operator\">=</span><span class=\"token string\">'sha1:d03968479249:319e92302e68d601392918f011d6c9334493023f'</span><br><br><span class=\"token comment\"># Dockerfile</span><br>CMD /bin/bash -c <span class=\"token string\">'jupyter lab --no-browser --allow-root --ip=0.0.0.0 --NotebookApp.password=\"<span class=\"token variable\">$PASSWD</span>\" \"<span class=\"token variable\">$@</span>\"'</span></code></pre>\n<h3 id=\"r-with-jupyter-notebook\">R with jupyter notebook <a class=\"direct-link\" href=\"#r-with-jupyter-notebook\">#</a></h3>\n<p>Read more <a href=\"https://irkernel.github.io/installation/#linux-panel\">here</a>.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install jupyter</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> libzmq3-dev libcurl4-openssl-dev libssl-dev jupyter-core jupyter-client<br><br><span class=\"token comment\"># install R on linux</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> r-base<br><br><span class=\"token comment\"># R kernel for Jupyter Notebook</span><br>R <span class=\"token comment\"># enter R environnement</span><br><span class=\"token comment\"># install R kernel</span><br>install.packages<span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">(</span><span class=\"token string\">'repr'</span>, <span class=\"token string\">'IRdisplay'</span>, <span class=\"token string\">'IRkernel'</span><span class=\"token punctuation\">)</span>, <span class=\"token builtin class-name\">type</span> <span class=\"token operator\">=</span> <span class=\"token string\">'source'</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\"># or</span><br>install.packages<span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">(</span><span class=\"token string\">'repr'</span>, <span class=\"token string\">'IRkernel'</span><span class=\"token punctuation\">)</span>, <span class=\"token builtin class-name\">type</span> <span class=\"token operator\">=</span> <span class=\"token string\">'source'</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\"># make jupyter see r kernel</span><br>IRkernel::installspec<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># current user</span><br>IRkernel::installspec<span class=\"token punctuation\">(</span>user <span class=\"token operator\">=</span> FALSE<span class=\"token punctuation\">)</span> <span class=\"token comment\"># global</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># embedded R</span><br><span class=\"token comment\"># use by cell magic %%R</span><br>pip <span class=\"token function\">install</span> rpy2<br><br><span class=\"token comment\"># in a notebook</span><br>%load_ext rpy2.ipython<br><br><span class=\"token comment\"># then use</span><br>%%R<br><span class=\"token comment\"># R's codes</span></code></pre>\n<h2 id=\"other-tips\">Other tips <a class=\"direct-link\" href=\"#other-tips\">#</a></h2>\n<ul>\n<li>Running 2 tasks in the same cell TAKE LONGER TIME than running each on different cells.</li>\n<li>Download a folder in jupyter notebook:\n<ul>\n<li>\n<p>Inside notebook, use:</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">%</span><span class=\"token operator\">%</span>bash<br>tar <span class=\"token operator\">-</span>czf archive<span class=\"token punctuation\">.</span>tar<span class=\"token punctuation\">.</span>gz foldername</code></pre>\n</li>\n<li>\n<p>Or using <a href=\"https://github.com/data-8/nbzip\">nbzip</a> (only working on current server).</p>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"check-the-info\">Check the info <a class=\"direct-link\" href=\"#check-the-info\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># function's info</span><br>?<span class=\"token operator\">&lt;</span>func<span class=\"token operator\">-</span>name<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># function's shortcode</span><br>??<span class=\"token operator\">&lt;</span>func-name<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># get the list of current variables</span><br>whos</code></pre>\n</div>\n<p>Check where command executed from (in your <code>$path</code>)?</p>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\">!<span class=\"token builtin\">type</span> python</code></pre>\n<pre><code>python is /Users/thi/anaconda/envs/python3.6/bin/python\n</code></pre>\n</div>\n<h2 id=\"multiline-commands\">Multiline commands <a class=\"direct-link\" href=\"#multiline-commands\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Using '\\'</span><br>df<span class=\"token punctuation\">.</span>columns <span class=\"token operator\">=</span> df<span class=\"token punctuation\">.</span>columns<span class=\"token punctuation\">.</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span><span class=\"token string\">'.'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">)</span>\\<br>                       <span class=\"token punctuation\">.</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span><span class=\"token string\">'\\s+'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">)</span>\\<br>                       <span class=\"token punctuation\">.</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">.</span>strip<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">.</span>upper<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<p>You CANNOT put <code># comments</code> at the end of each line break!</p>\n<h2 id=\"hotkeys-%2F-shortcuts\">Hotkeys / Shortcuts <a class=\"direct-link\" href=\"#hotkeys-%2F-shortcuts\">#</a></h2>\n<p>There are 2 modes: <strong>command mode</strong> (pres <kbd>ESC</kbd> to activate) and <strong>edit mode</strong> (<kbd>Enter</kbd> to activate). Below are the most useful ones (for me).</p>\n<p>You can edit / add more shortcuts in <strong>Help</strong> &gt; <strong>Edit Keyboard Shortcuts</strong>.</p>\n<div class=\"hsbox\"><div class=\"hs__title\">Click to see the full list</div><div class=\"hs__content\"><p>For both modes,</p>\n<p class=\"indent\"></p>\n<ul>\n<li><kbd>Shift</kbd> + <kbd>Enter</kbd> run the current cell, select below.</li>\n<li><kbd>Ctrl</kbd> + <kbd>Enter</kbd> run selected cells.</li>\n<li><kbd>Alt</kbd> + <kbd>Enter</kbd> run the current cell, insert below.</li>\n<li><kbd>Ctrl</kbd> + <kbd>S</kbd> save and checkpoint.</li>\n</ul>\n<p>Command modes,</p>\n<p class=\"indent\"></p>\n<ul>\n<li><kbd>Enter</kbd> take you into edit mode.</li>\n<li><kbd>H</kbd> show all shortcuts.</li>\n<li><kbd>Up</kbd> / <kbd>Down</kbd> select cell above / below.</li>\n<li><kbd>Shift</kbd> + <kbd>Up</kbd> / <kbd>Down</kbd> extend selected cells above / below.</li>\n<li><kbd>A</kbd> / <kbd>B</kbd> insert cell above / below.</li>\n<li><kbd>X</kbd> cut selected cells.</li>\n<li><kbd>C</kbd> copy selected cells.</li>\n<li><kbd>V</kbd> / <kbd>Shift</kbd> + <kbd>V</kbd> paste cells below / above.</li>\n<li><kbd>D</kbd>, <kbd>D</kbd> (press the key twice) delete selected cells.</li>\n<li><kbd>Z</kbd> undo cell deletion.</li>\n<li><kbd>S</kbd> Save and Checkpoint.</li>\n<li><kbd>Y</kbd> change the cell type to Code.</li>\n<li><kbd>M</kbd> change the cell type to Markdown.</li>\n</ul>\n<p>Edit mode,</p>\n<p class=\"indent\"></p>\n<ul>\n<li><kbd>Esc</kbd> take you into command mode.</li>\n<li><kbd>Tab</kbd> code completion or indent.</li>\n<li><kbd>Ctrl</kbd> + <kbd>]</kbd> indent.</li>\n<li><kbd>Ctrl</kbd> + <kbd>[</kbd> dedent.</li>\n<li><kbd>Ctrl</kbd> + <kbd>A</kbd> select all.</li>\n<li><kbd>Ctrl</kbd> + <kbd>Z</kbd> undo.</li>\n<li><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>Z</kbd> or <kbd>Ctrl</kbd> + <kbd>Y</kbd> redo.</li>\n</ul>\n</div></div>\n<h2 id=\"jupyter-notebook-on-remote-server\">Jupyter notebook on remote server <a class=\"direct-link\" href=\"#jupyter-notebook-on-remote-server\">#</a></h2>\n<p>Open jupyter notebook in local browser but the backend-server is on remote.</p>\n<ul>\n<li>\n<p>If jupyter server <strong>is already</strong> running on remote at <code>http://192.168.0.155:9889</code>,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">ssh</span> -N -L localhost:9888:192.168.0.155:9899 <span class=\"token operator\">&lt;</span>username-remote<span class=\"token operator\">></span>@<span class=\"token operator\">&lt;</span>remote-host<span class=\"token operator\">></span> -p <span class=\"token operator\">&lt;</span>port<span class=\"token operator\">></span><br><span class=\"token comment\"># if there is no port, remove `-p &lt;port>`</span></code></pre>\n<p>Open browser: <code>http://localhost:9888</code> (type password if needed).</p>\n</li>\n<li>\n<p>If jupyter server <strong>is not</strong> running on remote yet,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># connect to remote</span><br><span class=\"token function\">ssh</span> <span class=\"token operator\">&lt;</span>username-remote<span class=\"token operator\">></span>@<span class=\"token operator\">&lt;</span>remote-host<span class=\"token operator\">></span> -p <span class=\"token operator\">&lt;</span>port<span class=\"token operator\">></span><br><span class=\"token comment\"># if there is no port, remove `-p &lt;port>`</span></code></pre>\n<p>On remote,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># run juputer with custom port</span><br>jupyter notebook --no-browser --port<span class=\"token operator\">=</span><span class=\"token number\">9899</span><br><br><span class=\"token comment\"># if there is error `OSError: [Errno 99] Cannot assign requested address`</span><br>jupyter notebook --ip<span class=\"token operator\">=</span><span class=\"token number\">0.0</span>.0.0 --no-browser --port<span class=\"token operator\">=</span><span class=\"token number\">9899</span><br><br><span class=\"token comment\"># if there is error `Running as root is not recommended`</span><br>jupyter notebook --ip<span class=\"token operator\">=</span><span class=\"token number\">0.0</span>.0.0 --no-browser --port<span class=\"token operator\">=</span><span class=\"token number\">9899</span> --alow-root</code></pre>\n<p>It's running and there are somethings like that,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">http://127.0.0.1:9889/?token<span class=\"token operator\">=</span>717d9d276f0537a9<span class=\"token punctuation\">..</span>.831793df6319ad389accd</code></pre>\n<p>Open another terminal window and type,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">ssh</span> -N -L localhost:9888:localhost:9889 <span class=\"token operator\">&lt;</span>username-remote<span class=\"token operator\">></span>@<span class=\"token operator\">&lt;</span>remote-host<span class=\"token operator\">></span> -p <span class=\"token operator\">&lt;</span>port<span class=\"token operator\">></span><br><span class=\"token comment\"># if there is no port, remove `-p &lt;port>`</span><br><span class=\"token comment\"># there is nothing but it's running</span></code></pre>\n<p>Open browser:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">http://localhost:9888/?token<span class=\"token operator\">=</span>717d9d276f0537a9<span class=\"token punctuation\">..</span>.831793df6319ad389accd</code></pre>\n</li>\n</ul>\n<p>You can choose any port number you wanna instead of <code>9888</code> and <code>9889</code> (they can be the same), note that, you need to use a port number GREATER THAN <code>8000</code>!</p>\n<h2 id=\"install-new-python-package-inside-jupyter-notebook\">Install new python package inside Jupyter Notebook <a class=\"direct-link\" href=\"#install-new-python-package-inside-jupyter-notebook\">#</a></h2>\n<p>Using <code>conda</code><sup><a href=\"https://jakevdp.github.io/blog/2017/12/05/installing-python-packages-from-jupyter/\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup>,</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Install a conda package in the current Jupyter kernel</span><br><span class=\"token keyword\">import</span> sys<br>!conda install <span class=\"token operator\">-</span><span class=\"token operator\">-</span>yes <span class=\"token operator\">-</span><span class=\"token operator\">-</span>prefix <span class=\"token punctuation\">{</span>sys<span class=\"token punctuation\">.</span>prefix<span class=\"token punctuation\">}</span> numpy<br><br><span class=\"token comment\"># DON'T DO THIS</span><br>!conda install <span class=\"token operator\">-</span><span class=\"token operator\">-</span>yes numpy</code></pre>\n<p>Using <code>pip</code>,</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Install a pip package in the current Jupyter kernel</span><br><span class=\"token keyword\">import</span> sys<br>!<span class=\"token punctuation\">{</span>sys<span class=\"token punctuation\">.</span>executable<span class=\"token punctuation\">}</span> <span class=\"token operator\">-</span>m pip install numpy<br><br><span class=\"token comment\"># DON'T DO THIS</span><br>!pip install numpy</code></pre>\n<p>Check version and update/upgrade,</p>\n<pre class=\"language-python\"><code class=\"language-python\">!pip show pandas</code></pre>\n<h2 id=\"display-dataframes-side-by-side\">Display dataframes side-by-side <a class=\"direct-link\" href=\"#display-dataframes-side-by-side\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> IPython<span class=\"token punctuation\">.</span>display <span class=\"token keyword\">import</span> display_html<br><span class=\"token keyword\">def</span> <span class=\"token function\">display_side_by_side</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    html_str<span class=\"token operator\">=</span><span class=\"token string\">''</span><br>    <span class=\"token keyword\">for</span> df <span class=\"token keyword\">in</span> args<span class=\"token punctuation\">:</span><br>        html_str<span class=\"token operator\">+=</span>df<span class=\"token punctuation\">.</span>to_html<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>    display_html<span class=\"token punctuation\">(</span>html_str<span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span><span class=\"token string\">'table'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'table style=\"display:inline; margin-right: 5px;\"'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>raw<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\">display_side_by_side<span class=\"token punctuation\">(</span>df1<span class=\"token punctuation\">,</span>df2<span class=\"token punctuation\">,</span>df1<span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"get-previous-outputs\">Get previous outputs <a class=\"direct-link\" href=\"#get-previous-outputs\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\">_ <span class=\"token comment\"># previous output</span><br>__ <span class=\"token comment\"># second-to-last output</span><br>___ <span class=\"token comment\"># third-to-last output</span></code></pre>\n<h2 id=\"display-2-figures-side-by-side-markdown-cell\">Display 2 figures side-by-side markdown cell <a class=\"direct-link\" href=\"#display-2-figures-side-by-side-markdown-cell\">#</a></h2>\n<p>Put below codes in the markdown cell of Jupyter Notebook.</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>tr</span><span class=\"token punctuation\">></span></span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Nordic_trails.jpg<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Drawing<span class=\"token punctuation\">\"</span></span> <span class=\"token style-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token style language-css\"><span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 250px<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">/></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">></span></span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Nordic_trails.jpg<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Drawing<span class=\"token punctuation\">\"</span></span> <span class=\"token style-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token style language-css\"><span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 250px<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">/></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>tr</span><span class=\"token punctuation\">></span></span></code></pre>\n<h2 id=\"magic-functions\">Magic Functions <a class=\"direct-link\" href=\"#magic-functions\">#</a></h2>\n<ul>\n<li>Check the full list (in examples) <a href=\"https://nbviewer.jupyter.org/github/ipython/ipython/blob/1.x/examples/notebooks/Cell%20Magics.ipynb\">here</a> or their docs <a href=\"https://ipython.readthedocs.io/en/stable/interactive/magics.html\">here</a>.</li>\n<li>You can define your custom magic functions <a href=\"https://ipython.readthedocs.io/en/stable/config/custommagics.html\">here</a>.</li>\n</ul>\n<p>Auto update the new updated modules (put at the beginning of the notebook)</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">%load_ext autoreload<br>%autoreload <span class=\"token number\">2</span> <span class=\"token comment\"># Reload all modules every time before executing</span><br><br>%autoreload <span class=\"token number\">0</span> <span class=\"token comment\"># disable autoreloader</span></code></pre>\n<p>Check more settings of <code>%autoreload</code> <a href=\"https://ipython.org/ipython-doc/3/config/extensions/autoreload.html\">here</a>.</p>\n<p>Show the plots inside the notebook:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">%matplotlib inline</code></pre>\n<p>Get the commands from 1 to 4:</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">%</span>history <span class=\"token operator\">-</span>n <span class=\"token number\">1</span><span class=\"token operator\">-</span><span class=\"token number\">4</span> <span class=\"token comment\"># get commands 1 to 4</span></code></pre>\n<h2 id=\"extensions\">Extensions <a class=\"direct-link\" href=\"#extensions\">#</a></h2>\n<h3 id=\"table-of-contents\">Table of contents <a class=\"direct-link\" href=\"#table-of-contents\">#</a></h3>\n<ol>\n<li>Install <a href=\"https://github.com/nodesource/distributions/blob/master/README.md#debinstall\">npm and nodejs</a>.</li>\n<li>Install <a href=\"https://github.com/jupyterlab/jupyterlab-toc\">this extension</a>.</li>\n<li>Enable in jupyter lab view.</li>\n<li>Refresh the page.</li>\n</ol>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># errors</span><br><span class=\"token comment\"># UnicodeDecodeError: 'ascii' codec can't decode byte 0xf0 in position 23: ordinal not in range(128)</span><br><span class=\"token function\">npm</span> config <span class=\"token builtin class-name\">set</span> unicode <span class=\"token boolean\">false</span></code></pre>\n<h3 id=\"debugger\">Debugger <a class=\"direct-link\" href=\"#debugger\">#</a></h3>\n<ol>\n<li>Install <code>xeus-python</code>, <code>jupyterlab</code></li>\n</ol>\n<pre class=\"language-bash\"><code class=\"language-bash\">pip <span class=\"token function\">install</span> xeus-python<br>pip <span class=\"token function\">install</span> jupyterlab</code></pre>\n<ol start=\"2\">\n<li>Install <a href=\"https://github.com/jupyterlab/debugger\">this extension</a>.</li>\n<li>Refresh the page, you have to choose kernel <em>xpython</em> (instead of <em>Python 3</em>) to use the debugger.</li>\n</ol>\n",
      "date_published": "2019-09-02T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/git/",
      "url": "https://dinhanhthi.com/git/",
      "title": "Git",
      "content_html": "<p>Quick references for basic tasks with git.</p>\n<p>👉 Note: <a href=\"/github\">Github</a>.</p>\n<h2 id=\"installation-%26-tools\">Installation &amp; Tools <a class=\"direct-link\" href=\"#installation-%26-tools\">#</a></h2>\n<ul>\n<li>Download and install (to use command lines): <a href=\"https://git-scm.com/downloads\">git's homepage</a>.</li>\n<li>Git client tools: <a href=\"https://desktop.github.com/\">Github Desktop</a> (Windows and MacOS, <a href=\"https://github.com/shiftkey/desktop/releases/\">Linux</a>), <a href=\"https://www.gitkraken.com/download\">GitKraken</a> (Windows, Linux, MacOS).</li>\n<li>Read <code>html</code> files in repository on Github: use <a href=\"/github-html\">this tool</a>.</li>\n</ul>\n<h2 id=\"rules-to-be-more-effective\">Rules to be more effective <a class=\"direct-link\" href=\"#rules-to-be-more-effective\">#</a></h2>\n<ul>\n<li>Do commit early and often.<sup><a href=\"https://sethrobertson.github.io/GitBestPractices/\">[ref]</a></sup></li>\n<li>Do make useful commit messages.</li>\n<li>Create a new branch for every new feature.</li>\n<li>Use <code>pull</code> requests to merge code to <code>master</code>.<sup><a href=\"https://www.freecodecamp.org/news/follow-these-simple-rules-and-youll-become-a-git-and-github-master-e1045057468f/\">[ref]</a></sup></li>\n<li>For temporary branches, name them starting with <code>_</code>.</li>\n</ul>\n<h2 id=\"settings-on-local-machine\">Settings on local machine <a class=\"direct-link\" href=\"#settings-on-local-machine\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># SET GLOBAL INFO</span><br><span class=\"token function\">git</span> config --global user.name <span class=\"token string\">\"Anh-Thi DINH\"</span><br><span class=\"token function\">git</span> config --global user.email <span class=\"token string\">\"dinhanhthi@gmail.com\"</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># SPECIFIC REPO</span><br><span class=\"token function\">git</span> config user.name <span class=\"token string\">\"Thi\"</span><br><span class=\"token function\">git</span> config user.email <span class=\"token string\">\"thi@abc.com\"</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Verify your configuration</span><br><span class=\"token function\">cat</span> .git/config</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># IF: `Could not resolve host: github.com`</span><br><span class=\"token function\">git</span> config --global --unset http.proxy<br><span class=\"token function\">git</span> config --global --unset https.proxy</code></pre>\n</div>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># SAVE GITHUB AS DEFAULT</span><br><span class=\"token comment\"># (don't need to log in again every time we use)</span><br><span class=\"token function\">git</span> config credential.helper store<br><span class=\"token function\">git</span> pull</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># FORMATTING DISPLAY</span><br><span class=\"token function\">git</span> config color.ui <span class=\"token boolean\">true</span> <span class=\"token comment\"># add colors to the results</span><br><span class=\"token function\">git</span> config format.pretty oneline <span class=\"token comment\"># disply only one line of each commit</span></code></pre>\n<h2 id=\"check-the-status\">Check the status <a class=\"direct-link\" href=\"#check-the-status\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># CHECK STATUS</span><br><span class=\"token function\">git</span> status<br><span class=\"token function\">git</span> status -s <span class=\"token comment\"># modified files</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Get remote list</span><br><span class=\"token function\">git</span> remote -v</code></pre>\n</div>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># WITH COLORS</span><br><span class=\"token function\">git</span> log --oneline --graph --color --all --decorate<br><span class=\"token comment\"># --graph: draw text-based branches</span><br><span class=\"token comment\"># --decorate: display names and tags</span></code></pre>\n<p>Check some commit:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> log -- <span class=\"token operator\">&lt;</span>file<span class=\"token operator\">></span> <span class=\"token comment\"># check commits containing &lt;file></span><br><span class=\"token function\">git</span> log --prep<span class=\"token operator\">=</span><span class=\"token string\">'abc'</span> <span class=\"token comment\"># look for commits containing \"abc\" in their name</span><br><span class=\"token function\">git</span> log <span class=\"token operator\">&lt;</span>from<span class=\"token operator\">></span><span class=\"token punctuation\">..</span><span class=\"token operator\">&lt;</span>to<span class=\"token operator\">></span> <span class=\"token comment\"># display commints from &lt;from> to &lt;to> (commit's id, branch's name,...)</span></code></pre>\n<p>Check current <code>HEAD</code></p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> log -1<br><span class=\"token comment\"># something likes HEAD -> &lt;branch-name></span></code></pre>\n<p>Check the change of some file,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> <span class=\"token function\">diff</span> file_name.abc</code></pre>\n<p>Check the list of files in the last commit,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># get the last commit id</span><br><span class=\"token function\">git</span> log --format<span class=\"token operator\">=</span><span class=\"token string\">\"%H\"</span> -n <span class=\"token number\">1</span><br><span class=\"token comment\"># list of files</span><br><span class=\"token function\">git</span> diff-tree --no-commit-id --name-only -r <span class=\"token operator\">&lt;</span>commit_id<span class=\"token operator\">></span></code></pre>\n<h2 id=\"git-ignore\">Git ignore <a class=\"direct-link\" href=\"#git-ignore\">#</a></h2>\n<p>Create a file <code>.gitignore</code>.</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ignore</span><br>.jekyll-cache<br>.git<br>__pycache__/</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\">__pycache__/<br><br><span class=\"token comment\"># ignore all except</span><br>/*<br><br><span class=\"token comment\"># whitelist</span><br><span class=\"token operator\">!</span>.gitignore<br><span class=\"token operator\">!</span>/docker/</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># add a file/folder to .gitignore</span><br><span class=\"token builtin class-name\">echo</span> file.txt <span class=\"token operator\">>></span> .gitignore<br><span class=\"token builtin class-name\">echo</span> folder <span class=\"token operator\">>></span> .gitignore</code></pre>\n</div>\n<p>Ignore local changes on some files from <code>pull</code>/<code>push</code>,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># they are assumed to be unchanged</span><br><span class=\"token function\">git</span> update-index --assume-unchanged file_1 file_2<br><br><span class=\"token comment\"># undo</span><br><span class=\"token function\">git</span> update-index --no-assume-unchanged file_1 file_2<br><br><span class=\"token comment\"># To get a list of dir's/files that are assume-unchanged</span><br><span class=\"token function\">git</span> ls-files -v<span class=\"token operator\">|</span><span class=\"token function\">grep</span> <span class=\"token string\">'^h'</span></code></pre>\n<h2 id=\"repositories\">Repositories <a class=\"direct-link\" href=\"#repositories\">#</a></h2>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># CREATE REPO</span><br><span class=\"token function\">git</span> init <span class=\"token operator\">&lt;</span>repo-name<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># CLONE REPO (using https or ssh)</span><br><span class=\"token function\">git</span> clone <span class=\"token operator\">&lt;</span>repo-link<span class=\"token operator\">></span></code></pre>\n</div>\n<h2 id=\"git-gui\">Git GUI <a class=\"direct-link\" href=\"#git-gui\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> gui<br>gitk</code></pre>\n<h2 id=\"staged-%26-commits-%26-push-%26-pull\">Staged &amp; Commits &amp; Push &amp; Pull <a class=\"direct-link\" href=\"#staged-%26-commits-%26-push-%26-pull\">#</a></h2>\n<h3 id=\"staged\">Staged <a class=\"direct-link\" href=\"#staged\">#</a></h3>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ADD MODIFICATION (1 FILE)</span><br><span class=\"token function\">git</span> <span class=\"token function\">add</span> * <span class=\"token comment\"># add all the changes</span><br><span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token operator\">&lt;</span>file-name<span class=\"token operator\">></span> <span class=\"token comment\"># only add the &lt;file-name> to the staged</span></code></pre>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># UNSTAGE A FILE</span><br><span class=\"token function\">git</span> reset HEAD <span class=\"token operator\">&lt;</span>file<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># UNSTAGED EVERYTHING</span><br><span class=\"token function\">git</span> reset</code></pre>\n</div>\n<h3 id=\"commit-%26-push\">Commit &amp; Push <a class=\"direct-link\" href=\"#commit-%26-push\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># MAKE COMMIT (FROM STAGED)</span><br><span class=\"token function\">git</span> commit -m <span class=\"token string\">'&lt;comment-for-this-commit>'</span><br><span class=\"token function\">git</span> commit -a <span class=\"token comment\"># commit any files</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># UNCOMMIT (back to before commit)</span><br><span class=\"token function\">git</span> reset --soft HEAD~1</code></pre>\n</div>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># PUSH TO REMOTE</span><br><span class=\"token function\">git</span> push origin <span class=\"token operator\">&lt;</span>branch-name<span class=\"token operator\">></span> <span class=\"token comment\"># push only &lt;branch-name></span><br><span class=\"token function\">git</span> push --all origin <span class=\"token comment\"># push all branches</span></code></pre>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># CHECK &amp; TEST A COMMIT</span><br><span class=\"token function\">git</span> checkout <span class=\"token operator\">&lt;</span>commit-id<span class=\"token operator\">></span><br><span class=\"token comment\"># after testing</span><br><span class=\"token function\">git</span> checkout -- <span class=\"token builtin class-name\">.</span> <span class=\"token comment\"># discard all changes</span><br><span class=\"token function\">git</span> checkout <span class=\"token operator\">&lt;</span>current-branch<span class=\"token operator\">></span> <span class=\"token comment\"># back to previous</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Commit current date</span><br><span class=\"token function\">git</span> commit -m <span class=\"token string\">\"<span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token function\">date</span><span class=\"token variable\">`</span></span>\"</span> <span class=\"token comment\"># Wed Aug 28 10:22:06 CST 2019</span><br><span class=\"token function\">git</span> commit -m <span class=\"token string\">\"<span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token function\">date</span> +<span class=\"token string\">'%Y-%m-%d'</span><span class=\"token variable\">`</span></span>\"</span> <span class=\"token comment\"># 2019-08-28</span><br><span class=\"token function\">git</span> commit -m <span class=\"token string\">\"Updated: <span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token function\">date</span> +<span class=\"token string\">'%Y-%m-%d %H:%M:%S'</span><span class=\"token variable\">`</span></span>\"</span> <span class=\"token comment\"># Updated: 2019-08-28 10:22:06</span></code></pre>\n</div>\n<h3 id=\"pull-%26-fetch\">Pull &amp; Fetch <a class=\"direct-link\" href=\"#pull-%26-fetch\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># LIST ALL REMOTE REPOS</span><br><span class=\"token function\">git</span> remote -v</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># UPDATE REMOTE -> LOCAL</span><br><span class=\"token function\">git</span> pull origin <span class=\"token operator\">&lt;</span>branch-on-remote<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Pull (fetch) a branch from remote</span><br><span class=\"token function\">git</span> checkout --track origin/<span class=\"token operator\">&lt;</span>branch<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># COPY A COPY FROM REMOTE</span><br><span class=\"token function\">git</span> fetch origin <span class=\"token operator\">&lt;</span>branch-on-remote<span class=\"token operator\">></span><br><span class=\"token comment\"># compare current branch to this copy</span><br><span class=\"token function\">git</span> <span class=\"token function\">diff</span> --stat FETCH_HEAD</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># just fetch the changes from remote</span><br><span class=\"token function\">git</span> fetch</code></pre>\n</div>\n<p>Difference between <code>git pull --rebase</code> and <code>git pull --ff-only</code><sup><a href=\"https://stackoverflow.com/questions/25430600/difference-between-git-pull-rebase-and-git-pull-ff-only\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup>,</p>\n<ul>\n<li>\n<p><code>--rebase</code>: remote changes (<code>C</code>) will be applied before local changes (<code>D</code>) resulting in the following tree</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">A -- B -- C -- D</code></pre>\n</li>\n<li>\n<p><code>--ff-only</code>: fail if there are conflicts, otherwise, it will work!</p>\n</li>\n</ul>\n<h2 id=\"branches\">Branches <a class=\"direct-link\" href=\"#branches\">#</a></h2>\n<h3 id=\"create\">Create <a class=\"direct-link\" href=\"#create\">#</a></h3>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># CREATE A BRANCH</span><br><span class=\"token function\">git</span> branch <span class=\"token operator\">&lt;</span>branch-name<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># CREATE AND MOVE TO NEW BRANCH</span><br><span class=\"token comment\"># This one is based on the current `HEAD` (git log -1).</span><br><span class=\"token function\">git</span> checkout -b <span class=\"token operator\">&lt;</span>new-branch<span class=\"token operator\">></span><br><span class=\"token comment\"># new branch based on another one</span><br><span class=\"token function\">git</span> checkout -b <span class=\"token operator\">&lt;</span>new-branch<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>existing-branch<span class=\"token operator\">></span></code></pre>\n<h3 id=\"two-branches\">Two branches <a class=\"direct-link\" href=\"#two-branches\">#</a></h3>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># CHANGE TO ANOTHER BRANCH</span><br><span class=\"token function\">git</span> checkout <span class=\"token operator\">&lt;</span>branch-name<span class=\"token operator\">></span><br><br><span class=\"token comment\"># fatal: 'dev' could be both a local file and a tracking branch.</span><br><span class=\"token function\">git</span> checkout <span class=\"token operator\">&lt;</span>branch_name<span class=\"token operator\">></span> --</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># UPDATE ALL REMOTE BRANCHES TO LOCAL</span><br><span class=\"token comment\"># (there may be deleted branches on remote)</span><br><span class=\"token function\">git</span> remote update origin --prune</code></pre>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># LIST ALL LOCAL BRANCHES</span><br><span class=\"token function\">git</span> branch</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># LIST ALL LOCAL + REMOTE</span><br><span class=\"token function\">git</span> branch -a</code></pre>\n</div>\n<h3 id=\"comparing\">Comparing <a class=\"direct-link\" href=\"#comparing\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># compare current branch with other</span><br><span class=\"token function\">git</span> <span class=\"token function\">diff</span> <span class=\"token operator\">&lt;</span>branch<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># COMPARE 2 BRANCHES</span><br><span class=\"token function\">git</span> <span class=\"token function\">diff</span> <span class=\"token operator\">&lt;</span>source-branch<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>compared-branch<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># a specific file</span><br><span class=\"token function\">git</span> <span class=\"token function\">diff</span> mybranch master -- myfile</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># list all diff files: current vs</span><br><span class=\"token function\">git</span> <span class=\"token function\">diff</span> --name-status master</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 2 files vs</span><br><span class=\"token function\">git</span> <span class=\"token function\">diff</span> mybranch master --name-status<br><span class=\"token comment\"># can be \"--name-only\"</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># LOCAL &lt;-> REMOTE BRANCHES</span><br><span class=\"token function\">git</span> branch -vv</code></pre>\n</div>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># save to log file</span><br><span class=\"token function\">git</span> <span class=\"token function\">diff</span> --output<span class=\"token operator\">=</span>log.txt branch_1 branch_2 --name-status</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># CORRESPONDING LOCAL BRANCH &lt;-> REMOTE</span><br><span class=\"token function\">git</span> fetch<br><span class=\"token function\">git</span> branch --set-upstream-to<span class=\"token operator\">=</span>origin/<span class=\"token operator\">&lt;</span>remote_branch<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>local_branch<span class=\"token operator\">></span></code></pre>\n<h3 id=\"delete\">Delete <a class=\"direct-link\" href=\"#delete\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># DEL A LOCAL BRANCH</span><br><span class=\"token function\">git</span> branch -d <span class=\"token operator\">&lt;</span>branch-name<span class=\"token operator\">></span><br><span class=\"token function\">git</span> branch -D <span class=\"token operator\">&lt;</span>branch<span class=\"token operator\">></span> <span class=\"token comment\"># force to delete</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># DEL A REMOTE BRANCH</span><br><span class=\"token function\">git</span> push origin :<span class=\"token operator\">&lt;</span>branch-name<span class=\"token operator\">></span></code></pre>\n</div>\n<h3 id=\"merge\">Merge <a class=\"direct-link\" href=\"#merge\">#</a></h3>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># MERGE &lt;branch> TO CURRENT</span><br><span class=\"token function\">git</span> merge <span class=\"token operator\">&lt;</span>branch<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># MERGE &lt;sub-branch> TO master + REPLACE master</span><br><span class=\"token function\">git</span> checkout <span class=\"token operator\">&lt;</span>sub-branch<span class=\"token operator\">></span><br><span class=\"token function\">git</span> merge -s ours master<br><span class=\"token function\">git</span> checkout master<br><span class=\"token function\">git</span> merge <span class=\"token operator\">&lt;</span>sub-branch<span class=\"token operator\">></span><br><span class=\"token comment\"># master can be other</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># MERGE `/link/to/abc.xyz` FROM `&lt;branch-1>` TO `&lt;branch-2>` (can be `master`)</span><br><span class=\"token function\">git</span> checkout branch-2<br><span class=\"token function\">git</span> checkout branch-1 /link/to/abc.xyz</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># MERGE ONLY SOME FOLDER</span><br><span class=\"token function\">git</span> checkout <span class=\"token operator\">&lt;</span>branch<span class=\"token operator\">></span><br><span class=\"token function\">git</span> checkout <span class=\"token operator\">&lt;</span>from-branch<span class=\"token operator\">></span> folder1<span class=\"token punctuation\">\\</span> folder2<span class=\"token punctuation\">\\</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># MERGE commit from ONE BRANCH to CURRENT</span><br><span class=\"token function\">git</span> cherry-pick <span class=\"token operator\">&lt;</span>commit hash<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># KEEP FILES/FOLDERS FROM MERGE</span><br><span class=\"token comment\"># add line to .gitattributes</span><br><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'file_name.txt merge=ours'</span> <span class=\"token operator\">>></span> .gitattributes</code></pre>\n<h4 id=\"conflict\">Conflict <a class=\"direct-link\" href=\"#conflict\">#</a></h4>\n<p>If there are changes from both local and remote, there will be conflicts! Something likes that,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">&lt;&lt;&lt;</span><span class=\"token operator\">&lt;&lt;&lt;</span> HEAD<br>changes on <span class=\"token builtin class-name\">local</span><br><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><br>changes from remote<br><span class=\"token operator\">>></span><span class=\"token operator\">>></span><span class=\"token operator\">>></span> template/notetheme2</code></pre>\n<p>If you use <a href=\"/visual-studio-code\">Visual Studio Code</a>, there is a small toolbar above each conflict and you can choose which one you prefer to keep!</p>\n<p>Prefer one of them?</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># keep remote changes</span><br><span class=\"token function\">git</span> pull -X theirs <span class=\"token operator\">&lt;</span>remote-repo<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># keep local changes</span><br><span class=\"token function\">git</span> pull -X ours <span class=\"token operator\">&lt;</span>remote-repo<span class=\"token operator\">></span></code></pre>\n</div>\n<p>Keep both? Using <strong>Visual Studio Code</strong> or,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># add below line to .gitattributes (on branch being merged)</span><br><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"*.whatever merge=union\"</span> .gitattributes<br><span class=\"token comment\"># on windows, remove `\"\"`</span></code></pre>\n<p>Already in conflicted state?</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> checkout --theirs path/to/file <span class=\"token comment\"># remote</span><br><span class=\"token function\">git</span> checkout --ours path/to/file <span class=\"token comment\"># local</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Abort the conflicts</span><br><span class=\"token comment\"># (go back to before merging)</span><br><span class=\"token function\">git</span> merge --abort</code></pre>\n</div>\n<h4 id=\"exclude-from-merging\">Exclude from merging <a class=\"direct-link\" href=\"#exclude-from-merging\">#</a></h4>\n<p>Exclude some <strong>files</strong> from merge (keep <code>ours</code>),</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ONLY FOR FILES</span><br><span class=\"token comment\"># add below line to .gitattributes (on branch being merged)</span><br><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"file.ext merge=ours\"</span> .gitattributes<br><span class=\"token comment\"># on windows, remove `\"\"`</span></code></pre>\n<p>Exclude some <strong>folders</strong> (we cannot use <code>git</code> in this case):</p>\n<ol>\n<li>\n<p>If you delete these folders after merging, just commit and later merges will ignore them.</p>\n</li>\n<li>\n<p>If you meet a conflict, add the folder's name in a file called <code>reset_folders.sh</code>,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/sh</span><br><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'Reset some only-this-branch folders after merging.'</span><br><span class=\"token function\">git</span> reset folder_1, folder_2<br><span class=\"token function\">git</span> checkout <span class=\"token builtin class-name\">.</span><br><span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span><br><span class=\"token function\">git</span> commit -m <span class=\"token string\">\"update from merge (keep local in some folders)\"</span></code></pre>\n<p>Each time,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> merge <span class=\"token operator\">&lt;</span>from-branch<span class=\"token operator\">></span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">sh</span> reset_folders.sh</code></pre>\n</li>\n</ol>\n<h3 id=\"rename\">Rename <a class=\"direct-link\" href=\"#rename\">#</a></h3>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># CURRENT BRANCH</span><br><span class=\"token function\">git</span> branch -m <span class=\"token operator\">&lt;</span>newname<span class=\"token operator\">></span><br><span class=\"token function\">git</span> branch -M <span class=\"token operator\">&lt;</span>newname<span class=\"token operator\">></span> <span class=\"token comment\"># if there are only capitalization changes</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># CURRENT IS ANOTHER BRANCH</span><br><span class=\"token function\">git</span> branch -m <span class=\"token operator\">&lt;</span>oldname<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>newname<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># RENAME REMOTE BRANCH (delete old + push new)</span><br><span class=\"token comment\"># (rename local branch first)</span><br><span class=\"token function\">git</span> push origin :<span class=\"token operator\">&lt;</span>oldname<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>newname<span class=\"token operator\">></span><br><span class=\"token comment\"># reset the upstream branch for the new-name local branch</span><br><span class=\"token function\">git</span> checkout <span class=\"token operator\">&lt;</span>newname<span class=\"token operator\">></span><br><span class=\"token function\">git</span> push origin -u <span class=\"token operator\">&lt;</span>newname<span class=\"token operator\">></span></code></pre>\n<h3 id=\"others\">Others <a class=\"direct-link\" href=\"#others\">#</a></h3>\n<p>Add a description (using <a href=\"https://www.vim.org/\">Vim</a> editor):</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> branch --edit-description</code></pre>\n<p>In the case you wanna exit Vim, press <kbd>ESC</kbd> then type <code>:q</code> to quit or <code>:wq</code> to write and quit.</p>\n<h2 id=\"remove-from-git\">Remove from git <a class=\"direct-link\" href=\"#remove-from-git\">#</a></h2>\n<p>Remove from git, not from system,</p>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># a file</span><br><span class=\"token function\">git</span> <span class=\"token function\">rm</span> --cached <span class=\"token operator\">&lt;</span>file_name<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># a folder</span><br><span class=\"token function\">git</span> <span class=\"token function\">rm</span> -r --cached <span class=\"token operator\">&lt;</span>folder<span class=\"token operator\">></span></code></pre>\n</div>\n<h2 id=\"discard-the-changes\">Discard the changes <a class=\"direct-link\" href=\"#discard-the-changes\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># DISCARD CHANGES ON CURRENT DIR</span><br><span class=\"token function\">git</span> checkout -- <span class=\"token builtin class-name\">.</span> <span class=\"token comment\"># for all changes</span><br><span class=\"token function\">git</span> checkout -- <span class=\"token operator\">&lt;</span>file-name<span class=\"token operator\">></span> <span class=\"token comment\"># for a specific file (go back the last commit of this file)</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># DISCARD ALL LOCAL CHANGES</span><br><span class=\"token function\">git</span> reset --hard</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Get back to some prev commit and ignore all the changes (including the commits)</span><br><span class=\"token function\">git</span> reset --hard <span class=\"token operator\">&lt;</span>commit-id<span class=\"token operator\">></span></code></pre>\n<p>In the case you want to discard the changes but <strong>want to make a save</strong> before moving to another branch to test. You can use below line.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> stash</code></pre>\n<p>If you wanna get back to the place you saved (and remove it from the stashed list), just go back to the branch you make the save and use</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> stash pop</code></pre>\n<h2 id=\"restore\">Restore <a class=\"direct-link\" href=\"#restore\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># RESTORE FROM LAST COMMIT</span><br><span class=\"token function\">git</span> checkout -- <span class=\"token operator\">&lt;</span>file<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># DISCARD ALL CHANGES ON LOCAL + GET FROM REMOTE</span><br><span class=\"token function\">git</span> fetch origin<br><span class=\"token function\">git</span> reset --hard origin/master</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># DISCARD ALL CHANGES + get the last update from remote</span><br><span class=\"token function\">git</span> reset --hard @<span class=\"token punctuation\">{</span>u<span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># EREASE ALL COMMITS + BACK TO &lt;commit-id></span><br><span class=\"token function\">git</span> reset --hard <span class=\"token operator\">&lt;</span>commit_id<span class=\"token operator\">></span><br><span class=\"token comment\"># (force) to push</span><br><span class=\"token function\">git</span> push -f origin master</code></pre>\n<h2 id=\"change-remote-url\">Change remote url <a class=\"direct-link\" href=\"#change-remote-url\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># check the current remote url</span><br><span class=\"token function\">cat</span> .git/config<span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token string\">\"url\"</span><br><br><span class=\"token comment\"># change to the new one</span><br><span class=\"token function\">git</span> remote set-url origin new.git.url/here</code></pre>\n<h2 id=\"alias\">Alias <a class=\"direct-link\" href=\"#alias\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># use `git br` instead of `git branch`</span><br><span class=\"token function\">git</span> config alias.br branch</code></pre>\n<h2 id=\"gitlab%3A-clone-a-private-repo-to-local\">Gitlab: Clone a private repo to local <a class=\"direct-link\" href=\"#gitlab%3A-clone-a-private-repo-to-local\">#</a></h2>\n<ol>\n<li>(Windows) Generate a ssh key <code>ssh-keygen -t rsa -b 4096 -C &quot;your_email@example.com&quot;</code> in <code>C:\\Users\\dinha\\.ssh</code> under the name <code>id_rsa</code> (for private) and <code>id_rsa.pub</code> for public. It's important, the name!!!!</li>\n<li>Open and copy key in <code>C:\\Users\\dinha\\.ssh\\id_rsa.pub</code></li>\n<li>Go to <strong>Gitlab</strong> &gt; <strong>Settings</strong> &gt; <strong>SSH Keys</strong> &gt; paste a copied key and name it.</li>\n<li>Clone again the repo and it shoule be working!</li>\n</ol>\n<h2 id=\"errors\">Errors <a class=\"direct-link\" href=\"#errors\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># error: invalid object Error building trees</span><br><span class=\"token function\">git</span> hash-object -w <span class=\"token operator\">&lt;</span>error-file<span class=\"token operator\">></span></code></pre>\n<p>You can also go back to the previous commit (<code>git reset --hard</code>) and you LOSE all uncommit files.</p>\n<hr>\n<p><code>WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!</code></p>\n<p>Go to <code>~/.ssh/</code> (Linux) or <code>C:\\Users\\dinha\\.ssh</code> (Windows), remove the host from <code>known_hosts</code> and re-connect again.</p>\n<h2 id=\"git-submodules\">Git submodules <a class=\"direct-link\" href=\"#git-submodules\">#</a></h2>\n<p><a href=\"https://git-scm.com/book/en/v2/Git-Tools-Submodules\">Git submodules</a> allow you to keep a git repository as a subdirectory of another git repository.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># \"git clone\" &amp; \"git pull\" to automatically update submodules.</span><br><span class=\"token function\">git</span> config --global submodule.recurse <span class=\"token boolean\">true</span><br><br><span class=\"token comment\"># public repo: github.com/you/blog (clone)</span><br><span class=\"token comment\"># private repo: github.com/you/posts</span><br><br><span class=\"token builtin class-name\">cd</span> blog<br><span class=\"token function\">git</span> submodule <span class=\"token function\">add</span> https://github.com/you/posts <span class=\"token comment\"># blog/posts</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># update submodules</span><br><span class=\"token function\">git</span> submodule update --remote<br><span class=\"token comment\"># don't make change on the folder of submodules!!!!</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># clone a repo with submodules</span><br><span class=\"token function\">git</span> clone <span class=\"token operator\">&lt;</span>repo<span class=\"token operator\">></span> --recursive<br><span class=\"token comment\"># or</span><br><span class=\"token function\">git</span> clone <span class=\"token operator\">&lt;</span>repo<span class=\"token operator\">></span><br><span class=\"token function\">git</span> submodule init<br><span class=\"token function\">git</span> submodule update</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># REMOVE a submodule</span><br><span class=\"token number\">0</span>. <span class=\"token function\">mv</span> a/submodule a/submodule_tmp<br><br><span class=\"token number\">1</span>. <span class=\"token function\">git</span> submodule deinit -f -- a/submodule<br><span class=\"token number\">2</span>. <span class=\"token function\">rm</span> -rf .git/modules/a/submodule<br><span class=\"token number\">3</span>. <span class=\"token function\">git</span> <span class=\"token function\">rm</span> -f a/submodule<br><span class=\"token comment\"># Note: a/submodule (no trailing slash)</span><br><br><span class=\"token comment\"># or, if you want to leave it in your working tree and have done step 0</span><br><span class=\"token number\">3</span>.   <span class=\"token function\">git</span> <span class=\"token function\">rm</span> --cached a/submodule<br>3bis <span class=\"token function\">mv</span> a/submodule_tmp a/submodule</code></pre>\n<h2 id=\"others-2\">Others <a class=\"direct-link\" href=\"#others-2\">#</a></h2>\n<ul>\n<li><strong>fast-forward</strong> means that the commits can be applied directly on top of the working tree without requiring a merge. When <code>git pull</code> and get this message, we can be sure that the new update are not confict with our current modifications.</li>\n<li><strong>Find big files / commits</strong>: Using <a href=\"https://github.com/dinhanhthi/scripts/blob/master/git-largest-files\">this scripts</a> and <a href=\"https://stackoverflow.com/questions/10622179/how-to-find-identify-large-commits-in-git-history\">this answer</a>.</li>\n</ul>\n",
      "date_published": "2019-09-02T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/python-tips/",
      "url": "https://dinhanhthi.com/python-tips/",
      "title": "Python extra",
      "content_html": "<h2 id=\"miscellaneous\">Miscellaneous <a class=\"direct-link\" href=\"#miscellaneous\">#</a></h2>\n<ul>\n<li>\n<p><code>;</code> is not used, use spaces instead!</p>\n</li>\n<li>\n<p>If you wanna 2 or more commands in 1 line, you can use <code>;</code> to separate them.</p>\n</li>\n<li>\n<p>Tab size usually is 4.</p>\n</li>\n<li>\n<p>Lines can be broken with just an <kbd>Enter</kbd>, you also use <code>\\</code> between the lines if you want.</p>\n</li>\n<li>\n<p>From Python 3.6, you can use <code>1_000_000</code> for the number <code>1000000</code>.</p>\n</li>\n<li>\n<p><code>from __future__ import &lt;package&gt;</code> allows current version of python to use <code>&lt;package&gt;</code> which is only available in the &quot;future&quot; version of python.</p>\n</li>\n<li>\n<p><code>if __name__ == &quot;__main__&quot;:</code> determines the main running file of codes. The codes inside this command only run if the file containing it is the main executed file! <a href=\"https://stackoverflow.com/questions/419163/what-does-if-name-main-do\" target=\"_blank\">[read more]</a></p>\n</li>\n<li>\n<p>If we don't need to mention some variable, use <code>_</code>:</p>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">for</span> _ <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>  <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Thi\"</span><span class=\"token punctuation\">)</span></code></pre>\n<pre><code>Thi\nThi\n</code></pre>\n</div>\n</li>\n</ul>\n<h2 id=\"swap-2-variables\">Swap 2 variables <a class=\"direct-link\" href=\"#swap-2-variables\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\">a<span class=\"token punctuation\">,</span> b <span class=\"token operator\">=</span> b<span class=\"token punctuation\">,</span> a</code></pre>\n<h2 id=\"clear-variables\">Clear variables <a class=\"direct-link\" href=\"#clear-variables\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Clear (without confirmation) a variable from workspace</span><br><span class=\"token keyword\">del</span> <span class=\"token operator\">&lt;</span>var<span class=\"token operator\">></span><br><span class=\"token operator\">%</span>reset_selective <span class=\"token operator\">&lt;</span>var<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Check if available and then delete</span><br><span class=\"token keyword\">if</span> <span class=\"token string\">'&lt;var>'</span> <span class=\"token keyword\">in</span> <span class=\"token builtin\">globals</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">del</span> <span class=\"token operator\">&lt;</span>var<span class=\"token operator\">></span><br><span class=\"token comment\"># use locals() inside a def</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Clear all variables</span><br><span class=\"token operator\">%</span>reset <span class=\"token comment\"># with confirmation</span><br><span class=\"token operator\">%</span>reset <span class=\"token operator\">-</span>f <span class=\"token comment\"># without confirmation</span></code></pre>\n<h2 id=\"references\">References <a class=\"direct-link\" href=\"#references\">#</a></h2>\n<ul>\n<li><strong>Huyền Chip</strong> -- <a href=\"https://github.com/chiphuyen/python-is-cool/blob/master/cool-python-tips.ipynb\">A gentle guide to Python features that I didn't know exist or was too afraid to use</a>.</li>\n</ul>\n",
      "date_published": "2019-09-02T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/python-list/",
      "url": "https://dinhanhthi.com/python-list/",
      "title": "Python List",
      "content_html": "<h2 id=\"general\">General <a class=\"direct-link\" href=\"#general\">#</a></h2>\n<ul>\n<li>Index starts with <code>0</code>.</li>\n<li>Slice: <code>x[1:4]</code> gives elements from <code>x[1]</code> to <code>x[3]</code> inclusive (takes <code>1</code>, not <code>4</code>).</li>\n<li><code>x[:3] + x[3:]</code> gives exactly <code>x</code>.</li>\n</ul>\n<h2 id=\"properties\">Properties <a class=\"direct-link\" href=\"#properties\">#</a></h2>\n<p><strong>Ordered</strong> (different order, different list):</p>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">x <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><br>y <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><br>z <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><br><br>x <span class=\"token operator\">==</span> y<br>x <span class=\"token operator\">==</span> z</code></pre>\n<pre><code>True\nFalse\n</code></pre>\n</div>\n<p><strong>Mutable</strong> (we can change elements in list),</p>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">x <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><br>x<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">5</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># change mutiple elements</span><br>y <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><br>y<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">]</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">)</span></code></pre>\n<pre><code>[1, 5, 3]\n[1, 20, 30, 4, 5]\n</code></pre>\n</div>\n<h2 id=\"create\">Create <a class=\"direct-link\" href=\"#create\">#</a></h2>\n<p>Directly,</p>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">x <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Thi\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># mixed datatypes</span><br>y <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><br>     <span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># nested list</span><br>z <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># empty list</span><br><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>z<span class=\"token punctuation\">)</span></code></pre>\n<pre><code>[1, 'Thi', 3]\n[[1, 2, 3], [4, 5, 6]]\n[]\n</code></pre>\n</div>\n<p>From other types,</p>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">a <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># tuple</span><br>x <span class=\"token operator\">=</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><br><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span></code></pre>\n<pre><code>(1, 2, 3)\n[1, 2, 3]\n</code></pre>\n</div>\n<p>With <code>for</code> (List comprehensions),</p>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">x <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>i <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span></code></pre>\n<pre><code>[0, 1, 2, 3]\n</code></pre>\n</div>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># list comprehension with if</span><br><span class=\"token punctuation\">[</span>e <span class=\"token keyword\">for</span> e <span class=\"token keyword\">in</span> lst <span class=\"token keyword\">if</span> e<span class=\"token operator\">></span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><br><br><span class=\"token comment\"># list comprehension with if else</span><br><span class=\"token punctuation\">[</span>x<span class=\"token operator\">+</span><span class=\"token number\">1</span> <span class=\"token keyword\">if</span> x <span class=\"token operator\">>=</span> <span class=\"token number\">45</span> <span class=\"token keyword\">else</span> x<span class=\"token operator\">+</span><span class=\"token number\">5</span> <span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> l<span class=\"token punctuation\">]</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># 2 fors in list comprehension</span><br><span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> seq_x <span class=\"token keyword\">for</span> y <span class=\"token keyword\">in</span> seq_y<span class=\"token punctuation\">]</span><br><span class=\"token punctuation\">[</span>entry <span class=\"token keyword\">for</span> tag <span class=\"token keyword\">in</span> tags <span class=\"token keyword\">for</span> entry <span class=\"token keyword\">in</span> entries <span class=\"token keyword\">if</span> tag <span class=\"token keyword\">in</span> entry<span class=\"token punctuation\">]</span><br><br>a <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><br><span class=\"token punctuation\">{</span>i <span class=\"token keyword\">for</span> e <span class=\"token keyword\">in</span> a <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> e<span class=\"token punctuation\">}</span><br><span class=\"token comment\"># {1, 2, 3, 4}</span></code></pre>\n<p>Create a list from range,</p>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token punctuation\">[</span><span class=\"token operator\">*</span><span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">21</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></code></pre>\n<pre><code>[10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20]\n</code></pre>\n</div>\n<p>A list of random int numbers,</p>\n<pre class=\"language-python\"><code class=\"language-python\">random<span class=\"token punctuation\">.</span>sample<span class=\"token punctuation\">(</span><span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\"># [16, 19, 13, 18, 15]</span></code></pre>\n<h2 id=\"copy\">Copy <a class=\"direct-link\" href=\"#copy\">#</a></h2>\n<p>Don't use <code>y = x</code> directly!</p>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">x <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><br>y <span class=\"token operator\">=</span> x<br>z <span class=\"token operator\">=</span> x<span class=\"token punctuation\">.</span>copy<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>t <span class=\"token operator\">=</span> x<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span><br>u <span class=\"token operator\">=</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><br><br>x<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">30</span> <span class=\"token comment\"># x changes</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">)</span> <span class=\"token comment\"># y changes with x</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>z<span class=\"token punctuation\">)</span> <span class=\"token comment\"># z doesn't change</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">)</span> <span class=\"token comment\"># t doesn't change</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>u<span class=\"token punctuation\">)</span> <span class=\"token comment\"># u doesn't change</span></code></pre>\n<pre><code>[1, 2, 30]\n[1, 2, 30]\n[1, 2, 3]\n[1, 2, 3]\n[1, 2, 3]\n</code></pre>\n</div>\n<h2 id=\"access-elements\">Access elements <a class=\"direct-link\" href=\"#access-elements\">#</a></h2>\n<p>Normal list (1 dimensional),</p>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">x <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><br><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># single index</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># slice</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># negative index</span></code></pre>\n<pre><code>1\n[1, 2]\n3\n</code></pre>\n</div>\n<p>Nested list,</p>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">y <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><br>     <span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><br><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># single element</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># row 1</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>row<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">for</span> row <span class=\"token keyword\">in</span> y<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># column 1</span></code></pre>\n<pre><code>2\n[4, 5, 6]\n[2, 5]\n</code></pre>\n</div>\n<h2 id=\"get-length\">Get length <a class=\"direct-link\" href=\"#get-length\">#</a></h2>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">x <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><br>y <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><br>     <span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><br><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># number of rows</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># number of columns</span><br><br><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np<br>np<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">)</span></code></pre>\n<pre><code>4\n2\n3\n\n(3,4)\n</code></pre>\n</div>\n<h2 id=\"add-more-elements\">Add more elements <a class=\"direct-link\" href=\"#add-more-elements\">#</a></h2>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">x <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><br><br>x<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># single element</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><br><br>x<span class=\"token punctuation\">.</span>extend<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># another list</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span></code></pre>\n<pre><code>[1, 2, 3, 4]\n[1, 2, 3, 4, 5, 6]\n</code></pre>\n</div>\n<p>Add to desired positions,</p>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">x <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><br>x<span class=\"token punctuation\">.</span>insert<span class=\"token punctuation\">(</span><span class=\"token number\">30</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># at 30th position --> add to the last</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><br><br>y <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><br>y<span class=\"token punctuation\">.</span>insert<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">)</span></code></pre>\n<pre><code>[1, 2, 3]\n[1, 3, 2]\n</code></pre>\n</div>\n<p>With slices (it likes the intersection between indexes of the current list with indexes indicated in the slice):</p>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">x <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><br>x<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">:</span><span class=\"token number\">7</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><br><br>y <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><br>y<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">)</span></code></pre>\n<pre><code>[1, 2, 3, 4]\n[1, 2, 3, 4, 5]\n</code></pre>\n</div>\n<h2 id=\"remove-elements\">Remove elements <a class=\"direct-link\" href=\"#remove-elements\">#</a></h2>\n<p>Using the keyword <code>del</code>:</p>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">x <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><br><br><span class=\"token keyword\">del</span> x<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><br><br><span class=\"token keyword\">del</span> x<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><br><br><span class=\"token keyword\">del</span> x  <span class=\"token comment\"># delete entire list</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span></code></pre>\n<pre><code>[1, 2, 3, 4, 5]\n[1, 3, 4, 5]\n[4, 5]\nNameError: name 'x' is not defined\n</code></pre>\n</div>\n<p>Using <code>.remove()</code> to remove <strong>a value</strong> in list (it removes the <strong>first found value</strong>):</p>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">x <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><br>x<span class=\"token punctuation\">.</span>remove<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># remove the first found value \"3\"</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span></code></pre>\n<pre><code>[1, 2, 4, 3]\n</code></pre>\n</div>\n<p>If you wanna remove <strong>all specific value</strong> from a list:</p>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">x <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><br>x <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>i <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> x <span class=\"token keyword\">if</span> i <span class=\"token operator\">!=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span></code></pre>\n<pre><code>[1, 2, 4]\n</code></pre>\n</div>\n<p>Using <code>.pop()</code> to remove and <strong>return the deleted element</strong>.</p>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">x <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><br>y <span class=\"token operator\">=</span> x<span class=\"token punctuation\">.</span>pop<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># delete at 2nd position</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">)</span><br><br>z <span class=\"token operator\">=</span> x<span class=\"token punctuation\">.</span>pop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># delete the last element</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>z<span class=\"token punctuation\">)</span></code></pre>\n<pre><code>[1, 2, 4]\n3\n[1, 2]\n4\n</code></pre>\n</div>\n<p>Using <code>.clear()</code> to empty a list:</p>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">x <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><br>x<span class=\"token punctuation\">.</span>clear<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span></code></pre>\n<pre><code>[]\n</code></pre>\n</div>\n<p>Special case, using a empty list:</p>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">x <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><br>x<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span></code></pre>\n<pre><code>[1, 4]\n</code></pre>\n</div>\n<h2 id=\"2-lists\">2 lists <a class=\"direct-link\" href=\"#2-lists\">#</a></h2>\n<h3 id=\"intersection\">Intersection <a class=\"direct-link\" href=\"#intersection\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">set</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span> <span class=\"token builtin\">set</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"coupling-2-lists\">Coupling 2 lists <a class=\"direct-link\" href=\"#coupling-2-lists\">#</a></h3>\n<p>Using <code>+</code> and <code>*</code> (repeat),</p>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">x <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">+</span> <span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"re\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span></code></pre>\n<pre><code>[1, 2, 3, 4, 5, 6]\n['re', 're', 're']\n</code></pre>\n</div>\n<h2 id=\"sort-a-list\">Sort a list <a class=\"direct-link\" href=\"#sort-a-list\">#</a></h2>\n<p>Return a sorted list but not change the list:</p>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">x <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">sorted</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># ASC</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">sorted</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> reverse<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># DESC</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> <span class=\"token comment\"># x doesn't change</span></code></pre>\n<pre><code>[1, 2, 3, 4, 5]\n[5, 4, 3, 2, 1]\n[1, 5, 3, 2, 4]\n</code></pre>\n</div>\n<p>Sort and change a list:</p>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">x <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><br>x<span class=\"token punctuation\">.</span>sort<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># return None, ASC</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> <span class=\"token comment\"># x does change</span><br>x<span class=\"token punctuation\">.</span>sort<span class=\"token punctuation\">(</span>reverse<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># DESC</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span></code></pre>\n<pre><code>[1, 2, 3, 4, 5]\n[5, 4, 3, 2, 1]\n</code></pre>\n</div>\n<h2 id=\"reverse-a-list\">Reverse a list <a class=\"direct-link\" href=\"#reverse-a-list\">#</a></h2>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">x <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><br>y <span class=\"token operator\">=</span> x<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># x doesn't change</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">)</span><br>x<span class=\"token punctuation\">.</span>reverse<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># x changes</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span></code></pre>\n<pre><code>[1, 2, 3, 4]\n[4, 3, 2, 1]\n[4, 3, 2, 1]\n</code></pre>\n</div>\n<h2 id=\"map-a-function-to-each-element\">Map a function to each element <a class=\"direct-link\" href=\"#map-a-function-to-each-element\">#</a></h2>\n<p>If you wanna apply a function to each element in an iterable:</p>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">square <span class=\"token operator\">=</span> <span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> x <span class=\"token operator\">*</span> <span class=\"token number\">2</span><br>x <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># can be tuple or other iterable</span><br>y <span class=\"token operator\">=</span> <span class=\"token builtin\">map</span><span class=\"token punctuation\">(</span>square<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span> <span class=\"token comment\"># return a map object</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<pre><code>[1, 4, 9, 16]\n</code></pre>\n</div>\n<h2 id=\"get-indexes\">Get indexes <a class=\"direct-link\" href=\"#get-indexes\">#</a></h2>\n<h3 id=\"get-indexes-with-for\">Get indexes with for <a class=\"direct-link\" href=\"#get-indexes-with-for\">#</a></h3>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\">courses <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">]</span><br><span class=\"token keyword\">for</span> idx<span class=\"token punctuation\">,</span> val <span class=\"token keyword\">in</span> <span class=\"token builtin\">enumerate</span><span class=\"token punctuation\">(</span>courses<span class=\"token punctuation\">,</span> start<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>idx<span class=\"token punctuation\">,</span> val<span class=\"token punctuation\">)</span></code></pre>\n<pre><code>1 a\n2 b\n3 c\n</code></pre>\n</div>\n<h3 id=\"get-index-of-some-element\">Get index of some element <a class=\"direct-link\" href=\"#get-index-of-some-element\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\">lst<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>e<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># Returns the index of the first matched item</span><br><br>lst<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">(</span><span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span>lst<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># get the index of the max in list</span></code></pre>\n<h2 id=\"other-methods\">Other methods <a class=\"direct-link\" href=\"#other-methods\">#</a></h2>\n<ul>\n<li><code>.count(&lt;e&gt;)</code>: Returns the number of item <code>&lt;e&gt;</code> in list.</li>\n</ul>\n",
      "date_published": "2019-09-02T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/python-installation/",
      "url": "https://dinhanhthi.com/python-installation/",
      "title": "Python Installation",
      "content_html": "<h2 id=\"windows\">Windows <a class=\"direct-link\" href=\"#windows\">#</a></h2>\n<p><strong>Update 11/Sep/20</strong>: Install python <a href=\"/docker-wsl2-windows\">on WSL2</a> using <a href=\"#linux-ubuntu\"><strong>Miniconda</strong></a>.</p>\n<div class=\"hsbox\"><div class=\"hs__title\">Other options (directly install)</div><div class=\"hs__content\"><p>Download and install <a href=\"https://www.anaconda.com/distribution/\">Anaconda</a> or smaller version <a href=\"https://docs.conda.io/en/latest/miniconda.html\">Miniconda</a>.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># default installed dir</span><br>C:<span class=\"token punctuation\">\\</span>ProgramData<span class=\"token punctuation\">\\</span>Anaconda3</code></pre>\n<p>Add to <em>System Environment Variables</em>:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">C:<span class=\"token punctuation\">\\</span>ProgramData<span class=\"token punctuation\">\\</span>Anaconda3<br>C:<span class=\"token punctuation\">\\</span>ProgramData<span class=\"token punctuation\">\\</span>Anaconda3<span class=\"token punctuation\">\\</span>Scripts</code></pre>\n<p>If you don't wanna use Anaconda and <a href=\"https://www.python.org/downloads/\">install it by yourself</a>, add this:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">C:<span class=\"token punctuation\">\\</span>Users<span class=\"token punctuation\">\\</span><span class=\"token operator\">&lt;</span>user<span class=\"token operator\">></span><span class=\"token punctuation\">\\</span>AppData<span class=\"token punctuation\">\\</span>Roaming<span class=\"token punctuation\">\\</span>Python<span class=\"token punctuation\">\\</span>Python36<span class=\"token punctuation\">\\</span>Scripts</code></pre>\n<p>(<em>You can find <code>C:\\...\\Roaming</code> by typing <code>%appdata%</code> in the Windows Explorer's navigation bar</em>)</p>\n<p>App to run: <a href=\"https://cmder.net/\">cmder</a> (use <a href=\"/files/cmderSetting.xml\">this setting</a> file).</p>\n</div></div><h2 id=\"macos\">MacOS <a class=\"direct-link\" href=\"#macos\">#</a></h2>\n<div class=\"hsbox\"><div class=\"hs__title\"><strong>If you use Apple M1</strong> (updated on 21/02/2021)?</div><div class=\"hs__content\"><div class=\"warning\">\nCannot use docker with AI things! Pytorch is not available for M1!\n</div>\n<p>👉 <a href=\"https://github.com/apple/tensorflow_macos/issues/153\">Instructions to install TensorFlow in a Conda Environment</a></p>\n<pre class=\"language-bash\"><code class=\"language-bash\">conda init <span class=\"token comment\"># after installing</span><br><span class=\"token comment\"># restart terminal after installing</span><br><span class=\"token comment\"># check if ok</span><br><span class=\"token function\">which</span> python <span class=\"token comment\"># should return \"/Users/thi/miniforge3/bin/python\"</span><br><br><span class=\"token comment\"># manually install package</span><br>conda <span class=\"token function\">install</span> <span class=\"token operator\">&lt;</span>pkg name<span class=\"token operator\">></span><br>conda <span class=\"token function\">install</span> -y <span class=\"token operator\">&lt;</span>pkg<span class=\"token operator\">></span> <span class=\"token comment\"># auto accept</span></code></pre>\n<p>If you use conda (miniforge3), use the instructions in previous link to install tensorflow (not about the link to &quot;newest&quot; version of tensorflow-macos). If you wanna use python on your mac (using <code>venv</code>), check below link.</p>\n<p>👉 <a href=\"https://github.com/apple/tensorflow_macos\">Mac-optimized TensorFlow and TensorFlow Addons</a></p>\n<p><strong>Remark</strong>: After installing, check the version of <code>tensorflow-macos</code> (not <code>tensorflow</code>)</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">pip show tensorflow-macos</code></pre>\n<p><strong>Remark</strong>: If you wanna install some package, use <code>conda install -y &lt;pkg&gt;</code>, then check its version by <code>pip show &lt;pkg&gt;</code>.</p>\n<p>👉 Using <a href=\"https://github.com/dinhanhthi/scripts/blob/master/settings/macos/requirement_m1.txt\">my personal requirement file</a>.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">conda <span class=\"token function\">install</span> --file requirement_m1.txt</code></pre>\n</div></div><p>By default, Python 2 is already installed on MacOS, you can check this by</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">python --version<br><span class=\"token comment\"># to be sure, check if python3 is installed?</span><br>python3 --version</code></pre>\n<h2 id=\"linux-(ubuntu)\">Linux (Ubuntu) <a class=\"direct-link\" href=\"#linux-(ubuntu)\">#</a></h2>\n<p>Python is already installed on Ubuntu. You would like to install Anaconda, <a href=\"https://www.anaconda.com/distribution/\">download and install</a> it.</p>\n<p>Wanna install <strong>Miniconda</strong> instead? 👉 Download<a href=\"https://docs.conda.io/en/latest/miniconda.html#linux-installers\"> <code>.sh</code> file</a> and install inside Linux environement (including <a href=\"/docker-wsl2-windows\">WSL2</a>).</p>\n<div class=\"hsbox\"><div class=\"hs__title\">Miniconda or Conda? (<a href=\"https://stackoverflow.com/questions/45421163/anaconda-vs-miniconda#:~:text=Note%20that%20Conda%20is%20the,Anaconda%20and%20Miniconda%20are%20distributions.&amp;text=Miniconda%20is%20essentially%20an%20installer,Source.\">ref</a>)</div><div class=\"hs__content\"><p>Note that <a href=\"https://conda.io/projects/conda/en/latest/\">Conda</a> is the <em>package manager</em> (e.g. <code>conda list</code> displays all installed packages in the environment), whereas Anaconda and Miniconda are distributions.</p>\n<p>Choose Anaconda if you:</p>\n<ul>\n<li>Are new to conda or Python</li>\n<li>Like the convenience of having Python and over 1500 scientific packages automatically installed at once</li>\n<li>Have the time and disk space (a few minutes and 3 GB), and/or</li>\n<li>Don’t want to install each of the packages you want to use individually.</li>\n</ul>\n<p>Choose Miniconda if you:</p>\n<ul>\n<li>Do not mind installing each of the packages you want to use individually.</li>\n<li>Do not have time or disk space to install over 1500 packages at once, and/or</li>\n<li>Just want fast access to Python and the conda commands, and wish to sort out the other programs later.</li>\n</ul>\n</div></div>\n<div class=\"hsbox\"><div class=\"hs__title\">Add conda to <code>$PATH</code></div><div class=\"hs__content\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ADD CONDA TO $PATH</span><br><br><span class=\"token function\">nano</span> ~/.profile<br><span class=\"token comment\"># find where conda is installed and then</span><br><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span>/home/<span class=\"token operator\">&lt;</span>user<span class=\"token operator\">></span>/anaconda3/bin:<span class=\"token environment constant\">$PATH</span><br><span class=\"token builtin class-name\">source</span> ~/.profile<br><br><span class=\"token comment\"># check</span><br><span class=\"token function\">which</span> python<br><span class=\"token comment\"># should return: /home/&lt;user>/anaconda3/bin/python</span><br><br><span class=\"token comment\"># check version</span><br>conda --version</code></pre>\n</div></div>\n<div class=\"hsbox\"><div class=\"hs__title\">Make a right version</div><div class=\"hs__content\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">alias</span> <span class=\"token assign-left variable\">python</span><span class=\"token operator\">=</span>python3<br><span class=\"token builtin class-name\">alias</span> <span class=\"token assign-left variable\">pip</span><span class=\"token operator\">=</span>pip3<br><span class=\"token comment\"># for ubuntu >=20.04</span><br><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> python-is-python3<br><span class=\"token comment\"># prevent Python 2 from being installed as a dependency of something</span><br><span class=\"token function\">sudo</span> apt-mark hold python2 python2-minimal python2.7 python2.7-minimal libpython2-stdlib libpython2.7-minimal libpython2.7-stdlib</code></pre>\n</div></div>\n<h2 id=\"jupyer-notebook\">Jupyer Notebook <a class=\"direct-link\" href=\"#jupyer-notebook\">#</a></h2>\n<p>👉 Note: <a href=\"/jupyter-notebook\">Jupyter notebook</a>.</p>\n<p>Anaconda contains JN in it, no need to install it again. <code>cd</code> to the folder you wanna work on and run</p>\n<div class=\"code-2cols\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># RUN (after installing Anaconda)</span><br>python -m notebook</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># If `ImportError: DLL load failed`</span><br>active base <span class=\"token comment\"># active env \"base\" in anaconda</span><br>jupyter notebook</code></pre>\n</div>\n<p>The <code>-m</code> option allows you to execute a module or package as a script<sup><a href=\"https://www.quora.com/What-does-m-mean-in-the-terminal-command-Python-m-pip-install-openpyxl\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup>.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># If `import _ssl`, `ImportError`</span><br><span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">CONDA_DLL_SEARCH_MODIFICATION_ENABLE</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><br>python -m notebook</code></pre>\n<h2 id=\"check-gpu\">Check GPU <a class=\"direct-link\" href=\"#check-gpu\">#</a></h2>\n<p>👉 Read more on <a href=\"/pytorch#problem-with-cuda-version\">note of pytorch</a>.</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># with pytorch</span><br><span class=\"token keyword\">import</span> torch<br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'cuda is available? '</span><span class=\"token punctuation\">,</span> torch<span class=\"token punctuation\">.</span>cuda<span class=\"token punctuation\">.</span>is_available<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'device_count: '</span><span class=\"token punctuation\">,</span> torch<span class=\"token punctuation\">.</span>cuda<span class=\"token punctuation\">.</span>device_count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'current device: '</span><span class=\"token punctuation\">,</span> torch<span class=\"token punctuation\">.</span>cuda<span class=\"token punctuation\">.</span>current_device<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'device name: '</span><span class=\"token punctuation\">,</span> torch<span class=\"token punctuation\">.</span>cuda<span class=\"token punctuation\">.</span>get_device_name<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># with tensorflow</span><br><span class=\"token keyword\">import</span> tensorflow <span class=\"token keyword\">as</span> tf<br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Num GPUs Available: \"</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>experimental<span class=\"token punctuation\">.</span>list_physical_devices<span class=\"token punctuation\">(</span><span class=\"token string\">'GPU'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br></code></pre>\n<h2 id=\"pip\">pip <a class=\"direct-link\" href=\"#pip\">#</a></h2>\n<h3 id=\"update-pip\">Update pip <a class=\"direct-link\" href=\"#update-pip\">#</a></h3>\n<div class=\"code-2cols\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Check pip version</span><br>pip -V</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># update pip</span><br>easy_install -U pip</code></pre>\n</div>\n<div class=\"hsbox\"><div class=\"hs__title\">Problem?</div><div class=\"hs__content\"><ul>\n<li>If you meet <code>AttributeError: 'NoneType' object has no attribute 'bytes'</code> when updating <code>pip</code>, check the version and make sure that there is only 1 pip on your computer and then use <code>easy_install -U pip</code> (don't forget to <code>activate </code>)</li>\n<li>If there is a problem with <code>python -m pip install --upgrade pip</code>, use <code>easy_install</code>!</li>\n</ul>\n</div></div>\n<h3 id=\"install-packages-with-pip\">Install packages with pip <a class=\"direct-link\" href=\"#install-packages-with-pip\">#</a></h3>\n<p>Install <a href=\"https://pypi.org/project/pip/\">pip</a> (It's actually installed with Anaconda). If you wanna upgrade it to the latest version:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">python -m pip <span class=\"token function\">install</span> --user --upgrade pip <span class=\"token comment\"># install for current user only</span><br>python -m pip <span class=\"token function\">install</span> --upgrade pip <span class=\"token comment\"># need to run cmder as administrator</span></code></pre>\n<div class=\"hsbox\"><div class=\"hs__title\">AttributeError: 'NoneType' object</div><div class=\"hs__content\"><p>First, <code>activate &lt;env&gt;</code> and then using <code>easy_install -U pip</code>. You can check the version of pip by <code>pip -V</code>.</p>\n</div></div><div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># LIST ALL INSTALLED PACKAGES</span><br>pip freeze</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># INSTALL A PACKAGE</span><br>pip <span class=\"token function\">install</span> <span class=\"token operator\">&lt;</span>package<span class=\"token operator\">></span> <span class=\"token comment\"># admin &lt;-- SHOULDN'T!!!</span><br>pip <span class=\"token function\">install</span> --user <span class=\"token operator\">&lt;</span>package<span class=\"token operator\">></span> <span class=\"token comment\"># current user only</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># REMOVE</span><br>pip uninstall <span class=\"token operator\">&lt;</span>package<span class=\"token operator\">></span><br>pip uninstall --user <span class=\"token operator\">&lt;</span>package<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># CHECK VERSION OF A PACKAGE</span><br>pip show <span class=\"token operator\">&lt;</span>package<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># version &lt;=</span><br>pip3 <span class=\"token function\">install</span> -U <span class=\"token string\">\"pillow&lt;7\"</span></code></pre>\n</div>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Install a package from a git repository</span><br>pip <span class=\"token function\">install</span> git+https://github.com/TimeSynth/TimeSynth.git</code></pre>\n<p>If install packages with <code>pip</code>, they are installed in which environment of conda? Where <code>pip</code> is executed from.</p>\n<div class=\"code-output-flex\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">which</span> python<br><span class=\"token function\">which</span> pip<br><br>conda info --envs<br><span class=\"token comment\"># or</span><br><span class=\"token comment\"># conda env list</span></code></pre>\n<pre><code>/c/ProgramData/Anaconda3/python\n/c/ProgramData/Anaconda3/Scripts/pip\n\n# conda environments:\nbase                  *  C:\\ProgramData\\Anaconda3\nfastai                   C:\\Users\\thi\\.conda\\envs\\fastai\n</code></pre>\n</div>\n<p>Install packages with requirement file,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">pip <span class=\"token function\">install</span> -r requirements.txt</code></pre>\n<p>An example of requirement file,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token assign-left variable\">geopandas</span><span class=\"token operator\">==</span><span class=\"token number\">0.4</span>.1<br><span class=\"token assign-left variable\">grpcio</span><span class=\"token operator\">==</span><span class=\"token number\">1.27</span>.1<br>grpcio-tools<span class=\"token operator\">==</span><span class=\"token number\">1.27</span>.1<br><span class=\"token assign-left variable\">h5py</span><span class=\"token operator\">==</span><span class=\"token number\">2.10</span>.0<br><span class=\"token assign-left variable\">isodate</span><span class=\"token operator\">==</span><span class=\"token number\">0.6</span>.0<br><span class=\"token assign-left variable\">PyYAML</span><span class=\"token operator\">==</span><span class=\"token number\">5.3</span>.1</code></pre>\n<h2 id=\"pip-vs-conda%3F\"><code>pip</code> vs <code>conda</code>? <a class=\"direct-link\" href=\"#pip-vs-conda%3F\">#</a></h2>\n<p>Differences:<sup><a href=\"https://jakevdp.github.io/blog/2017/12/05/installing-python-packages-from-jupyter\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<ul>\n<li><code>pip</code> installs <strong>python packages</strong> in <strong>any environment</strong>.</li>\n<li><code>conda</code> installs <strong>any package</strong> in <strong>conda environments</strong>.</li>\n</ul>\n<p>Which one to be used?<sup><a href=\"https://jakevdp.github.io/blog/2017/12/05/installing-python-packages-from-jupyter\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<ul>\n<li>If you installed Python using Anaconda or Miniconda, then use <code>conda</code> to install Python packages. If <code>conda</code> tells you the package you want doesn't exist, then use <code>pip</code> (or try <code>conda-forge</code>, which has more packages available than the default conda channel).</li>\n<li>If you installed Python any other way (from source, using <code>pyenv</code>, <code>virtualenv</code>, etc.), then use <code>pip</code> to install Python packages</li>\n</ul>\n<h2 id=\"python-virtual-environnement\">Python virtual environnement <a class=\"direct-link\" href=\"#python-virtual-environnement\">#</a></h2>\n<p>Main guide is <a href=\"https://packaging.python.org/tutorials/installing-packages/#creating-virtual-environments\">here</a>.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> python3-venv<br><br><span class=\"token comment\"># cd to &lt;DIR> where python venv stored</span><br>python3 -m venv <span class=\"token operator\">&lt;</span>DIR<span class=\"token operator\">></span><br><br><span class=\"token comment\"># activate</span><br>tutorial-env<span class=\"token punctuation\">\\</span>Scripts<span class=\"token punctuation\">\\</span>activate.bat <span class=\"token comment\"># windows</span><br><span class=\"token builtin class-name\">source</span> <span class=\"token operator\">&lt;</span>DIR<span class=\"token operator\">></span>/bin/activate <span class=\"token comment\"># linux</span><br><br><span class=\"token comment\"># deactivate</span><br>deactivate</code></pre>\n<p>To detele, just remove the corresponding folder, i.e., <code>&lt;DIR&gt;</code>.</p>\n<h2 id=\"conda\">Conda <a class=\"direct-link\" href=\"#conda\">#</a></h2>\n<h3 id=\"install-%2F-update-conda\">Install / Update conda <a class=\"direct-link\" href=\"#install-%2F-update-conda\">#</a></h3>\n<p>👉 Read more on <a href=\"#linux-(ubuntu)\">this section</a>.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># INSTALL CONDA BY PIP (without Anaconda)</span><br>pip <span class=\"token function\">install</span> conda</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># UPDATE CONDA</span><br>conda --version <span class=\"token comment\"># check version</span><br>conda update -n base -c defaults conda</code></pre>\n<p>If there is an error <code>TypeError: LoadLibrary() argument 1 must be str, not None</code> at the end of the log, try to activate the environment <code>base</code> before running above line.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">activate base <span class=\"token comment\"># on Windows</span><br><span class=\"token builtin class-name\">source</span> activate base <span class=\"token comment\"># on MacOS</span></code></pre>\n<h3 id=\"install-packages-with-conda\">Install packages with conda <a class=\"direct-link\" href=\"#install-packages-with-conda\">#</a></h3>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># INSTALL</span><br>activate <span class=\"token operator\">&lt;</span>env<span class=\"token operator\">></span> <span class=\"token comment\"># you need to activate an environment first</span><br>conda <span class=\"token function\">install</span> <span class=\"token operator\">&lt;</span>package<span class=\"token operator\">></span> <span class=\"token comment\"># install for &lt;env> only</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># UPDATE</span><br>acctivate <span class=\"token operator\">&lt;</span>env<span class=\"token operator\">></span> <span class=\"token comment\"># choose an env first</span><br>conda update <span class=\"token operator\">&lt;</span>package<span class=\"token operator\">></span> <span class=\"token comment\"># ud package in that env</span></code></pre>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># LIST ALL INSTALLED PACKAGES</span><br>conda list</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># check version of a package</span><br>pip show <span class=\"token operator\">&lt;</span>pkg<span class=\"token operator\">></span></code></pre>\n</div>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Update packages listed in an env file to current env,</span><br>conda <span class=\"token function\">env</span> update -n <span class=\"token operator\">&lt;</span>env<span class=\"token operator\">></span> -f /path/to/<span class=\"token operator\">&lt;</span>file<span class=\"token operator\">></span>.yml</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># example of yml file</span><br>name: stats<br>dependencies:<br>    - <span class=\"token assign-left variable\">python</span><span class=\"token operator\">=</span><span class=\"token number\">3.6</span><br>    - <span class=\"token assign-left variable\">geopandas</span><span class=\"token operator\">==</span><span class=\"token number\">0.4</span>.1</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install packages with requirements.txt</span><br>conda <span class=\"token function\">install</span> --file requirements.txt</code></pre>\n<h3 id=\"environment\">Environment <a class=\"direct-link\" href=\"#environment\">#</a></h3>\n<p>👉 Check an <a href=\"https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html\">official doc</a> or <a href=\"https://towardsdatascience.com/a-guide-to-conda-environments-bc6180fc533\">this useful post</a>.</p>\n<p>Create a new environment with python version 3.7:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">conda create -n <span class=\"token operator\">&lt;</span>env-name<span class=\"token operator\">></span> <span class=\"token assign-left variable\">python</span><span class=\"token operator\">=</span><span class=\"token number\">3.7</span> anaconda<br><span class=\"token comment\"># created in /home/thi/miniconda3/envs/&lt;env-name>/</span><br><span class=\"token builtin class-name\">source</span> activate <span class=\"token operator\">&lt;</span>env-name<span class=\"token operator\">></span> <span class=\"token comment\"># activate this env</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># The same python version with current shell's Python interpreter</span><br>conda create -n <span class=\"token operator\">&lt;</span>env-name<span class=\"token operator\">></span> python</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># with addtional packages (python will be automatically installed)</span><br>conda create -n <span class=\"token operator\">&lt;</span>env-name<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>package<span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>></span> <span class=\"token operator\">&lt;</span>package<span class=\"token operator\"><span class=\"token file-descriptor important\">2</span>></span><br><span class=\"token comment\"># with version</span><br>conda create -n <span class=\"token operator\">&lt;</span>env-name<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>package<span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>></span><span class=\"token operator\">=</span><span class=\"token number\">1.16</span> <span class=\"token operator\">&lt;</span>package<span class=\"token operator\"><span class=\"token file-descriptor important\">2</span>></span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># in different directory</span><br>conda create --prefix /path/to/<span class=\"token operator\">&lt;</span>env-name<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># create from file &lt;file>.yml</span><br>conda <span class=\"token function\">env</span> create -n <span class=\"token operator\">&lt;</span>env<span class=\"token operator\">></span> -f /path/to/<span class=\"token operator\">&lt;</span>file<span class=\"token operator\">></span>.yml</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Clone from another env</span><br>conda create --name <span class=\"token operator\">&lt;</span>cloned-env<span class=\"token operator\">></span> --clone <span class=\"token operator\">&lt;</span>env<span class=\"token operator\">></span></code></pre>\n<div class=\"warning\">\n<p>Most of below commands are assumed to be run in an environment named <code>env</code> which is already activated. If you don't activate any environment before, use an alternative instead. For example,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">conda update pandas             <span class=\"token comment\"># &lt;env> activated</span><br>conda update -n <span class=\"token operator\">&lt;</span>env<span class=\"token operator\">></span> pandas    <span class=\"token comment\"># &lt;env> isn't activated</span><br>conda update -p /path/to/<span class=\"token operator\">&lt;</span>env<span class=\"token operator\">></span>  <span class=\"token comment\"># &lt;env> isn't in the default directory of conda</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\">conda <span class=\"token function\">env</span> <span class=\"token builtin class-name\">export</span> -f <span class=\"token operator\">&lt;</span>file<span class=\"token operator\">></span>.yml                       <span class=\"token comment\"># &lt;env> activated &amp; current folder</span><br>conda <span class=\"token function\">env</span> <span class=\"token builtin class-name\">export</span> -n <span class=\"token operator\">&lt;</span>env<span class=\"token operator\">></span> -f /path/to/<span class=\"token operator\">&lt;</span>file<span class=\"token operator\">></span>.yml      <span class=\"token comment\"># &lt;env> isn't activated &amp; different folder</span><br>conda update -p /path/to/<span class=\"token operator\">&lt;</span>env<span class=\"token operator\">></span> -f /path/to/<span class=\"token operator\">&lt;</span>file<span class=\"token operator\">></span>.yml <span class=\"token comment\"># &lt;env> isn't in the default directory of conda &amp; different folder</span></code></pre>\n</div>\n<div class=\"col-2-equal\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Activate an env</span><br>activate <span class=\"token operator\">&lt;</span>env<span class=\"token operator\">></span> <span class=\"token comment\"># windows</span><br><span class=\"token builtin class-name\">source</span> activate <span class=\"token operator\">&lt;</span>env<span class=\"token operator\">></span> <span class=\"token comment\"># linux / macos</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># DEACTIVE AN ENV</span><br>conda deactivate <span class=\"token comment\"># Linux</span><br>deactivate <span class=\"token comment\"># Windows</span><br><span class=\"token builtin class-name\">source</span> deactivate <span class=\"token comment\"># MacOS</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># REMOVE AN ENV</span><br>conda remove -n <span class=\"token operator\">&lt;</span>env<span class=\"token operator\">></span> --all</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># SHOW LIST OF CURRENT ENV</span><br>conda info --envs<br><span class=\"token comment\"># or</span><br>conda <span class=\"token function\">env</span> list</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># EXPORT TO A ENV FILE</span><br>conda <span class=\"token function\">env</span> <span class=\"token builtin class-name\">export</span> -f <span class=\"token operator\">&lt;</span>file<span class=\"token operator\">></span>.yml</code></pre>\n</div>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Update packages listed in an env file to current env,</span><br>conda <span class=\"token function\">env</span> update -n <span class=\"token operator\">&lt;</span>env<span class=\"token operator\">></span> -f /path/to/<span class=\"token operator\">&lt;</span>file<span class=\"token operator\">></span>.yml --prune</code></pre>\n<div class=\"hsbox\"><div class=\"hs__title\">Show activated env in <a href=\"/terminal/#zsh-(linux)\">zsh</a></div><div class=\"hs__content\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># run this first in your current shell</span><br>conda init <span class=\"token function\">zsh</span><br><span class=\"token comment\"># other options than zsh: bash, powershell, ...</span><br><span class=\"token builtin class-name\">source</span> ~/.zshrc</code></pre>\n<p>If you wanna hide <code>(base)</code> in prompt,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">conda config --set changeps1 <span class=\"token boolean\">false</span><br><span class=\"token comment\"># don't forget to reset the terminal</span></code></pre>\n</div></div>\n<h3 id=\"kernel-2-%26-3-for-jupyter-notebook\">Kernel 2 &amp; 3 for Jupyter Notebook <a class=\"direct-link\" href=\"#kernel-2-%26-3-for-jupyter-notebook\">#</a></h3>\n<p>Check if <code>nb_conda_kernels</code> is installed by <code>conda list</code>. If not, install it by:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">conda <span class=\"token function\">install</span> nb_conda_kernels</code></pre>\n<p>If you are using <strong>Python 2</strong> and you wanna separate <strong>Python 3</strong>,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">conda create -n py37 <span class=\"token assign-left variable\">python</span><span class=\"token operator\">=</span><span class=\"token number\">3.7</span> ipykernel <span class=\"token comment\"># \"py37\" is a custom name</span></code></pre>\n<p>If you are using <strong>Python 3</strong> and you wanna separate <strong>Python 2</strong>,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">conda create -n py27 <span class=\"token assign-left variable\">python</span><span class=\"token operator\">=</span><span class=\"token number\">2.7</span> ipykernel <span class=\"token comment\"># \"py37\" is a custom name</span></code></pre>\n<p>Restart the Jupyter Notebook, the list of kernels is available under <strong>New</strong>.</p>\n<h3 id=\"conda-revisions\">Conda Revisions <a class=\"direct-link\" href=\"#conda-revisions\">#</a></h3>\n<div class=\"code-2cols\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Check revisions</span><br>conda list --revisions</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Go back to revision `1`,</span><br>conda <span class=\"token function\">install</span> --revision <span class=\"token number\">1</span></code></pre>\n</div>\n<h2 id=\"error%3F\">Error? <a class=\"direct-link\" href=\"#error%3F\">#</a></h2>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># UnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position 975: ordinal not</span><br><span class=\"token comment\"># solution: instead of</span><br>pip3 <span class=\"token function\">install</span> sesd<br><span class=\"token comment\"># use</span><br><span class=\"token assign-left variable\"><span class=\"token environment constant\">LC_ALL</span></span><span class=\"token operator\">=</span>C.UTF-8 pip3 <span class=\"token function\">install</span> sesd</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># conda: The following packages are not available from current channels:</span><br><span class=\"token comment\"># Solution 1: One can use pip in this case (the same env with conda)</span><br><span class=\"token comment\"># Solution 2:</span><br>conda <span class=\"token function\">install</span> -c anaconda <span class=\"token operator\">&lt;</span>package<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># The following required packages can not be built: * freetype (from matplotlib)</span><br><span class=\"token comment\"># try to use conda to install matplotlib</span><br>conda <span class=\"token function\">install</span> matplotlib<br><span class=\"token comment\"># it actually install the same thing as pip does on the same env</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># dtaidistance: C-library is not available</span><br>pip <span class=\"token function\">install</span> -vvv --upgrade --force-reinstall dtaidistance</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># zsh: command not found: conda</span><br><span class=\"token comment\"># Make sure your installation folder is already</span><br><span class=\"token comment\"># in the $PATH</span><br><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span><span class=\"token string\">\"/home/thi/miniconda3/bin:<span class=\"token environment constant\">$PATH</span>\"</span></code></pre>\n",
      "date_published": "2019-09-02T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/python-input-output/",
      "url": "https://dinhanhthi.com/python-input-output/",
      "title": "Python: Input &amp; Output",
      "content_html": "<h2 id=\"input\">Input <a class=\"direct-link\" href=\"#input\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Get input from user and display (input's type is `string`)</span><br>age <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Your age? \"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># python 3, raw_input for python 2</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Your age:\"</span><span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">)</span> <span class=\"token comment\"># don't need space after \"age\"</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Get the input and store to numbers list</span><br>numbers <span class=\"token operator\">=</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">map</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Get multi inputs on 1 line</span><br>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> z<span class=\"token punctuation\">,</span> n <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> _ <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"comment\">Comment <a class=\"direct-link\" href=\"#comment\">#</a></h3>\n<p>Using <code>#</code> on each line.</p>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># print(\"This is not showed.\")</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>\"This <span class=\"token keyword\">is</span> showed<span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span></code></pre>\n<pre><code>This is showed.\n</code></pre>\n</div>\n<h2 id=\"print-%2F-display\">Print / Display <a class=\"direct-link\" href=\"#print-%2F-display\">#</a></h2>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Print normally</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello!\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># python 3</span><br><span class=\"token keyword\">print</span> <span class=\"token string\">\"Hello!\"</span> <span class=\"token comment\"># python 2</span></code></pre>\n<pre><code>Hello!\nHello!\n</code></pre>\n</div>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># print with `format`</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello {} and {}.\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"A\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"B\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<pre><code>Hello A and B.\n</code></pre>\n</div>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># change order</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello {2} and {1}.\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"A\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"B\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<pre><code>Hello B and A.\n</code></pre>\n</div>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Directly insert (python 3.6 or above)</span><br>b <span class=\"token operator\">=</span> <span class=\"token string\">\"B\"</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f'Hello </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span><span class=\"token string\">\"A\"</span><span class=\"token punctuation\">}</span></span><span class=\"token string\"> and </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>b<span class=\"token punctuation\">}</span></span><span class=\"token string\">.'</span></span><span class=\"token punctuation\">)</span></code></pre>\n<pre><code>Hello A and B.\n</code></pre>\n</div>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># long strings</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'This is a part of sentence.'</span><br>      <span class=\"token string\">'This is other part.'</span><span class=\"token punctuation\">)</span></code></pre>\n<pre><code>This is a part of sentence. This is other part.\n</code></pre>\n</div>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># print decimals</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{:.6f}\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>number<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<pre><code># print decimals\n1.000000\n</code></pre>\n</div>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># print multiples</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"thi\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># there are spaces</span></code></pre>\n<pre><code># print multiples\n1 5 thi\n</code></pre>\n</div>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># first 20 characters, second 10 characters</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span> <span class=\"token string\">'{:&lt;20s} {:&lt;10s}'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>string_one<span class=\"token punctuation\">,</span> string_two<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span></code></pre>\n<p>Display separated results (like in executing multiple code cells),</p>\n<pre class=\"language-python\"><code class=\"language-python\">display<span class=\"token punctuation\">(</span>df_1<span class=\"token punctuation\">)</span><br>display<span class=\"token punctuation\">(</span>df_2<span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"logging\">Logging <a class=\"direct-link\" href=\"#logging\">#</a></h2>\n<p>Check more <a href=\"https://docs.python.org/3/howto/logging-cookbook.html\">here</a>.</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> logging<br>log <span class=\"token operator\">=</span> logging<span class=\"token punctuation\">.</span>getLogger<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># order of increasing severity</span><br>log<span class=\"token punctuation\">.</span>debug<span class=\"token punctuation\">(</span><span class=\"token string\">'something'</span><span class=\"token punctuation\">)</span><br>log<span class=\"token punctuation\">.</span>info<span class=\"token punctuation\">(</span><span class=\"token string\">'something'</span><span class=\"token punctuation\">)</span><br>log<span class=\"token punctuation\">.</span>warning<span class=\"token punctuation\">(</span><span class=\"token string\">'something'</span><span class=\"token punctuation\">)</span><br>log<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">(</span><span class=\"token string\">'something'</span><span class=\"token punctuation\">)</span><br>logger<span class=\"token punctuation\">.</span>critical<span class=\"token punctuation\">(</span><span class=\"token string\">'something'</span><span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># by default, the logging module logs the messages with a severity level of WARNING or above</span><br><span class=\"token comment\"># thus: debug and info aren't show by default</span></code></pre>\n<p>If the <code>log.info()</code> doesn't work, set below<sup><a href=\"https://stackoverflow.com/questions/11548674/logging-info-doesnt-show-up-on-console-but-warn-and-error-do/11548754\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup>,</p>\n<pre class=\"language-python\"><code class=\"language-python\">logging<span class=\"token punctuation\">.</span>getLogger<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>setLevel<span class=\"token punctuation\">(</span>logging<span class=\"token punctuation\">.</span>INFO<span class=\"token punctuation\">)</span> <span class=\"token comment\"># show all except \"debug\"</span><br><span class=\"token comment\"># or</span><br>logging<span class=\"token punctuation\">.</span>basicConfig<span class=\"token punctuation\">(</span>level<span class=\"token operator\">=</span>logging<span class=\"token punctuation\">.</span>DEBUG<span class=\"token punctuation\">)</span> <span class=\"token comment\"># show all</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># in the class</span><br><span class=\"token keyword\">import</span> logging<br>log <span class=\"token operator\">=</span> logging<span class=\"token punctuation\">.</span>getLogger<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span><br><br>log<span class=\"token punctuation\">.</span>info<span class=\"token punctuation\">(</span><span class=\"token string\">\"abc\"</span><span class=\"token punctuation\">)</span><br>log<span class=\"token punctuation\">.</span>debug<span class=\"token punctuation\">(</span><span class=\"token string\">\"xyz\"</span><span class=\"token punctuation\">)</span><br><br>log<span class=\"token punctuation\">.</span>info<span class=\"token punctuation\">(</span><span class=\"token string\">\"abc: %s\"</span><span class=\"token punctuation\">,</span> abc<span class=\"token punctuation\">)</span><br>log<span class=\"token punctuation\">.</span>debug<span class=\"token punctuation\">(</span><span class=\"token string\">\"xyz: {}\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>xyz<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># in the jupyter notebook</span><br><span class=\"token keyword\">import</span> logging<br>log <span class=\"token operator\">=</span> logging<span class=\"token punctuation\">.</span>getLogger<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span><br>logging<span class=\"token punctuation\">.</span>basicConfig<span class=\"token punctuation\">(</span>level<span class=\"token operator\">=</span>os<span class=\"token punctuation\">.</span>environ<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"LOGLEVEL\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"DEBUG\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n",
      "date_published": "2019-09-02T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/python-functions/",
      "url": "https://dinhanhthi.com/python-functions/",
      "title": "Python Functions",
      "content_html": "<h2 id=\"facts\">Facts <a class=\"direct-link\" href=\"#facts\">#</a></h2>\n<ul>\n<li>In python, function is the <strong>first-class object</strong>. It's can be used as an argument.</li>\n<li>Function can be used as a return value.\n<ul>\n<li><code>return func1</code>: reference to <code>func1</code>.</li>\n<li><code>return func1()</code>: results of evaluating <code>func()</code>.</li>\n</ul>\n</li>\n<li><strong>Should we check the argument/input?</strong>: <strong>No!</strong> The responsibility is on the caller! Your function should be well-documented, that's it!<sup><a href=\"https://stackoverflow.com/questions/19684434/best-way-to-check-function-arguments-in-python\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></li>\n</ul>\n<h2 id=\"create-a-normal-function\">Create a normal function <a class=\"direct-link\" href=\"#create-a-normal-function\">#</a></h2>\n<p>If a function doesn't return any value, it returns <code>None</code>.</p>\n<div class=\"code-2cols\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># without arguments</span><br><span class=\"token keyword\">def</span> <span class=\"token function\">func_name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>  <span class=\"token keyword\">pass</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># with arguments</span><br><span class=\"token keyword\">def</span> <span class=\"token function\">func_name</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>args<span class=\"token operator\">></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>  <span class=\"token keyword\">pass</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># return</span><br><span class=\"token keyword\">def</span> <span class=\"token function\">func_name</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>args<span class=\"token operator\">></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>some_thing<span class=\"token operator\">></span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># call a function</span><br>func_name<span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>args<span class=\"token operator\">></span><span class=\"token punctuation\">)</span></code></pre>\n</div>\n<h2 id=\"unpacking-a-function\">Unpacking a function <a class=\"direct-link\" href=\"#unpacking-a-function\">#</a></h2>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">sum_and_div</span><span class=\"token punctuation\">(</span>num1<span class=\"token punctuation\">,</span> num2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>  sum_nums <span class=\"token operator\">=</span> num1 <span class=\"token operator\">+</span> num2<br>  div_nums <span class=\"token operator\">=</span> num1 <span class=\"token operator\">/</span> num2<br>  <span class=\"token keyword\">return</span> sum_nums<span class=\"token punctuation\">,</span> div_nums <span class=\"token comment\"># multiple returns</span><br><br><span class=\"token builtin\">sum</span><span class=\"token punctuation\">,</span> div <span class=\"token operator\">=</span> sum_and_div<span class=\"token punctuation\">(</span><span class=\"token number\">18</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">,</span> div<span class=\"token punctuation\">)</span></code></pre>\n<pre><code>27 2.0\n</code></pre>\n</div>\n<h2 id=\"functions-with-stars-(*args-and-**kwargs)\">Functions with stars (<code>*args</code> and <code>**kwargs</code>) <a class=\"direct-link\" href=\"#functions-with-stars-(*args-and-**kwargs)\">#</a></h2>\n<p>The <code>*args</code> will give you all function parameters as <strong>a tuple</strong>:<sup><a href=\"https://stackoverflow.com/questions/36901/what-does-double-star-asterisk-and-star-asterisk-do-for-parameters\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>  <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">)</span><br>  <span class=\"token keyword\">for</span> a <span class=\"token keyword\">in</span> args<span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><br><br>foo<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><br>foo<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span></code></pre>\n<pre><code>(1,)\n1\n(2, 3, 4)\n2\n3\n4\n</code></pre>\n</div>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span>rarg1<span class=\"token punctuation\">,</span> rarg2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>  <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>rarg1<span class=\"token punctuation\">,</span> rarg2<span class=\"token punctuation\">)</span><br><br>lst <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><br>foo<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>lst<span class=\"token punctuation\">)</span><br>tpl <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><br>foo<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>tpl<span class=\"token punctuation\">)</span></code></pre>\n<pre><code>1 2\n3 4\n</code></pre>\n</div>\n<p>If you wanna use &quot;keywords arguments&quot;, use <code>**args</code>:</p>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">kwfunc</span><span class=\"token punctuation\">(</span><span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>  <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>kwargs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>  <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>kwargs<span class=\"token punctuation\">)</span><br><br>kwfunc<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>kwfunc<span class=\"token punctuation\">(</span>kw1<span class=\"token operator\">=</span><span class=\"token string\">\"thi\"</span><span class=\"token punctuation\">,</span> kw2<span class=\"token operator\">=</span><span class=\"token string\">\"dinh\"</span><span class=\"token punctuation\">)</span></code></pre>\n<pre><code>&lt;class 'dict'&gt;\n{}\n&lt;class 'dict'&gt;\n{'kw1': 'thi', 'kw2': 'dinh'}\n</code></pre>\n</div>\n<p>Use a dictionary as an input,</p>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">kwfunc</span><span class=\"token punctuation\">(</span><span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># must have **</span><br>  <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>kwargs<span class=\"token punctuation\">)</span><br><br>kwargs <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'kw1'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"thi\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'kw2'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"dinh\"</span><span class=\"token punctuation\">}</span><br>kwfunc<span class=\"token punctuation\">(</span><span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span> <span class=\"token comment\"># must have **</span></code></pre>\n<pre><code>{'kw1': 'thi', 'kw2': 'dinh'}\n</code></pre>\n</div>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">kwfunc</span><span class=\"token punctuation\">(</span>kw1<span class=\"token operator\">=</span><span class=\"token string\">\"john\"</span><span class=\"token punctuation\">,</span> kw2<span class=\"token operator\">=</span><span class=\"token string\">\"doe\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>  <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>kw1<span class=\"token punctuation\">,</span> kw2<span class=\"token punctuation\">)</span><br><br>kwargs <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'kw1'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"thi\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'kw2'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"dinh\"</span><span class=\"token punctuation\">}</span><br><br>kwfunc<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>kwfunc<span class=\"token punctuation\">(</span>kwargs<span class=\"token punctuation\">)</span> <span class=\"token comment\"># goes to kw1</span><br>kwfunc<span class=\"token punctuation\">(</span><span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span> <span class=\"token comment\"># goes to both kw1 &amp; kw2</span></code></pre>\n<pre><code>john doe\n{'kw1': 'thi', 'kw2': 'dinh'} doe\nthi dinh\n</code></pre>\n</div>\n<p>Coupling <code>rargs</code>, <code>*args</code> and <code>**kwargs</code>:</p>\n<ul>\n<li>Required positional arguments: <code>rarg1</code>, <code>rarg2</code>, ...</li>\n<li>Optional positional arguments: <code>*args</code>.</li>\n<li>Optional key-values arguments: <code>**kwargs</code>.</li>\n</ul>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">kwfunc</span><span class=\"token punctuation\">(</span>rarg1<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> rarg2<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>  <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"required args: \"</span><span class=\"token punctuation\">,</span> rarg1<span class=\"token punctuation\">,</span> rarg2<span class=\"token punctuation\">)</span><br>  <span class=\"token keyword\">if</span> args<span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"*args: \"</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><br>  <span class=\"token keyword\">if</span> kwargs<span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"**kwargs: \"</span><span class=\"token punctuation\">,</span> kwargs<span class=\"token punctuation\">)</span><br>  <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">)</span><br><br><br>kwfunc<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>kwfunc<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><br>kwfunc<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span><br>kwfunc<span class=\"token punctuation\">(</span>kw1<span class=\"token operator\">=</span><span class=\"token string\">\"thi\"</span><span class=\"token punctuation\">,</span> kw2<span class=\"token operator\">=</span><span class=\"token string\">\"dinh\"</span><span class=\"token punctuation\">)</span></code></pre>\n<pre><code>required args:  0 0\n\nrequired args:  1 2\n\nrequired args:  3 4\n*args:  (5, 6)\n\nrequired args:  0 0\n**kwargs:  {'kw1': 'thi', 'kw2': 'dinh'}\n</code></pre>\n</div>\n<p>All arguments after <code>*</code> must be key-value arguments,</p>\n<div class=\"code-output-flex\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">func</span><span class=\"token punctuation\">(</span>rarg1<span class=\"token punctuation\">,</span> rarg2<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span><span class=\"token punctuation\">,</span> kwarg1<span class=\"token punctuation\">,</span> kwarg2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>  <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"required args: \"</span><span class=\"token punctuation\">,</span> rarg1<span class=\"token punctuation\">,</span> rarg2<span class=\"token punctuation\">)</span><br>  <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"kwarg*: \"</span><span class=\"token punctuation\">,</span> kwarg1<span class=\"token punctuation\">,</span> kwarg2<span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># func(1, 2, 3, 4) # error!</span><br>func<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> kwarg1<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> kwarg2<span class=\"token operator\">=</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span></code></pre>\n<pre><code>required args:  1 2\nkwarg*:  3 4\n</code></pre>\n</div>\n<h2 id=\"lambda-function\">Lambda function <a class=\"direct-link\" href=\"#lambda-function\">#</a></h2>\n<p>It's convenient but don't use it regularly, use <code>def</code> (in 1 line) instead.</p>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\">x <span class=\"token operator\">=</span> <span class=\"token keyword\">lambda</span> a <span class=\"token punctuation\">:</span> a <span class=\"token operator\">+</span> <span class=\"token number\">10</span><br><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># you can use this</span><br><span class=\"token keyword\">def</span> <span class=\"token function\">x</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">return</span> a <span class=\"token operator\">+</span> <span class=\"token number\">10</span></code></pre>\n<pre><code>15\n</code></pre>\n</div>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># if else with lambda function</span><br><span class=\"token keyword\">lambda</span> row<span class=\"token punctuation\">:</span> <span class=\"token string\">'good'</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>row<span class=\"token operator\">>=</span><span class=\"token number\">80</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'bad'</span> <span class=\"token keyword\">if</span> row<span class=\"token operator\">&lt;</span><span class=\"token number\">80</span> <span class=\"token keyword\">else</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"check-input-%26-raise-error\">Check input &amp; raise error <a class=\"direct-link\" href=\"#check-input-%26-raise-error\">#</a></h2>\n<p>Something like that,</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">if</span> par1 <span class=\"token keyword\">is</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">:</span><br>  msg <span class=\"token operator\">=</span> <span class=\"token string\">\"par1 must be in type `int`\"</span><br>  <span class=\"token keyword\">raise</span> TypeError<span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">)</span></code></pre>\n<p>You can check other exceptions <a href=\"https://docs.python.org/3/library/exceptions.html\">here</a>.</p>\n<h2 id=\"decorators\">Decorators <a class=\"direct-link\" href=\"#decorators\">#</a></h2>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">my_decorator</span><span class=\"token punctuation\">(</span>func<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">def</span> <span class=\"token function\">wrapper</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Before func called.\"</span><span class=\"token punctuation\">)</span><br>        func<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"After func called.\"</span><span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">return</span> wrapper<br><br><span class=\"token keyword\">def</span> <span class=\"token function\">say_whee</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Whee!\"</span><span class=\"token punctuation\">)</span><br><br>say_whee <span class=\"token operator\">=</span> my_decorator<span class=\"token punctuation\">(</span>say_whee<span class=\"token punctuation\">)</span><br>say_whee<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<pre><code>Before func called.\nWhee!\nAfter func called.\n</code></pre>\n</div>\n<p>In a class (note that, there is no <code>self</code> parameter in <code>_deco</code>),</p>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">test_class</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br><br>    <span class=\"token keyword\">def</span> <span class=\"token function\">_deco</span><span class=\"token punctuation\">(</span>func<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>        <span class=\"token keyword\">def</span> <span class=\"token function\">wrapper</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Before func called'</span><span class=\"token punctuation\">)</span><br>            func<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><br>            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'After func called.'</span><span class=\"token punctuation\">)</span><br>        <span class=\"token keyword\">return</span> wrapper<br><br>    <span class=\"token decorator annotation punctuation\">@_deco</span><br>    <span class=\"token keyword\">def</span> <span class=\"token function\">fit</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello, '</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><br><br>a <span class=\"token operator\">=</span> test_class<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>a<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span><span class=\"token string\">'thi'</span><span class=\"token punctuation\">)</span></code></pre>\n<pre><code>Before func called\nHello,  thi\nAfter func called\n</code></pre>\n</div>\n",
      "date_published": "2019-09-02T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/python-docs-refs/",
      "url": "https://dinhanhthi.com/python-docs-refs/",
      "title": "Python references",
      "content_html": "<h2 id=\"for-checking\">For checking <a class=\"direct-link\" href=\"#for-checking\">#</a></h2>\n<ul>\n<li><a href=\"http://google.com\">Google</a>, of course!</li>\n<li><a href=\"https://www.programiz.com/\">programiz.com</a></li>\n<li><a href=\"https://apps.apple.com/us/app/python-reference/id1386866064\">Python Reference</a> on iOS.</li>\n</ul>\n<h2 id=\"courses\">Courses <a class=\"direct-link\" href=\"#courses\">#</a></h2>\n<ul>\n<li><a href=\"https://www.tutorialspoint.com/python3/index.htm\">Python 3 tutorial</a> on <strong>TutorialsPoint</strong>.</li>\n<li><a href=\"https://www.w3schools.com/python/default.asp\">Python Tutorial</a> on <strong>W3School</strong>.</li>\n<li><a href=\"https://www.youtube.com/user/schafer5/playlists\">Python Tutorials</a> by <strong>Corey Schafer</strong> on Youtube.</li>\n<li><a href=\"https://www.codecademy.com/learn/learn-python-3\">Python 3</a> on <strong>Codecademy</strong> (paid).</li>\n<li><a href=\"https://app.pluralsight.com/library/courses/python-fundamentals/table-of-contents\">Python fundamentals</a> on <strong>PluralSight</strong> (paid).</li>\n</ul>\n<h2 id=\"books\">Books <a class=\"direct-link\" href=\"#books\">#</a></h2>\n<h2 id=\"practice\">Practice <a class=\"direct-link\" href=\"#practice\">#</a></h2>\n<ul>\n<li><a href=\"https://www.hackerrank.com/domains/python\">Hackerrank</a>.</li>\n<li><a href=\"https://exercism.io/my/tracks/python\">Exercism</a>.</li>\n<li><a href=\"https://app.codesignal.com\">CodeSignal</a>.</li>\n<li><a href=\"https://www.codechef.com/\">CodeChef</a>.</li>\n</ul>\n<h2 id=\"others\">Others <a class=\"direct-link\" href=\"#others\">#</a></h2>\n<ul>\n<li><a href=\"https://www.pythonweekly.com/\">Newsletter for python news</a>.</li>\n<li><a href=\"https://wiki.python.org/moin/TimeComplexity\">Time complexity</a> (Big O) of various operators in CPython.</li>\n</ul>\n",
      "date_published": "2019-09-02T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/python-classes-objects/",
      "url": "https://dinhanhthi.com/python-classes-objects/",
      "title": "Python Classes &amp; Objects",
      "content_html": "<h2 id=\"classes-vs-objects-vs-instances-vs-methods\">Classes vs Objects vs Instances vs Methods <a class=\"direct-link\" href=\"#classes-vs-objects-vs-instances-vs-methods\">#</a></h2>\n<ul>\n<li><strong>Class</strong> is a blueprint/template of an object.\n<ul>\n<li>Each class has its own <strong>attributes</strong> (its states) and <strong>methods</strong> (its behaviors).</li>\n</ul>\n</li>\n<li><strong>Object</strong> is a bundle of related attributes and methods.</li>\n<li><strong>Instance</strong> is a single and unique unit of a class.\n<ul>\n<li>Many instances may have the same class. They have attributes and methods defined in the class.</li>\n</ul>\n</li>\n</ul>\n<div class=\"hsbox\"><div class=\"hs__title\">An example</div><div class=\"hs__content\"><p>A <strong>class</strong> <code>student</code> represents (a template of) an <strong>object</strong> student with:</p>\n<ul>\n<li>Attributes: <code>name</code>, <code>marks</code> and</li>\n<li>Methods: <code>take_exams()</code>, <code>graduate()</code>.</li>\n</ul>\n<p><strong>Instances</strong> <code>john_doe</code> and <code>jane_doe</code> defined from class <code>student</code> will have:</p>\n<ul>\n<li>Their names: <code>john_doe.name</code> and <code>jane_doe.name</code>.</li>\n<li>Their marks: <code>john_doe.marks</code> and <code>jane_doe.marks</code>.</li>\n<li>Their behaviors: <code>john_doe.take_exams()</code> and <code>jane_doe.graduate()</code>, ...</li>\n</ul>\n</div></div><h2 id=\"syntactic-sugar-%26-self\">Syntactic sugar &amp; <code>self</code> <a class=\"direct-link\" href=\"#syntactic-sugar-%26-self\">#</a></h2>\n<p>Syntactic sugar is syntax within a programming language that is designed to make things easier to read or to express. For example, we use <code>arr[i,j]</code> but behind the scene, it's <code>get_element(arr, vector(i,j))</code>.</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MyClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>    <span class=\"token keyword\">def</span> <span class=\"token function\">method</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span><br><br>my_object <span class=\"token operator\">=</span> MyClass<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>my_object<span class=\"token punctuation\">.</span>method<span class=\"token punctuation\">(</span><span class=\"token string\">'foo'</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\"># TypeError: method() takes exactly 1 positional argument (2 given)</span></code></pre>\n<p><code>my_object.method('foo')</code> means <code>MyClass.method(my_object, 'foo')</code>. That's why we need <code>self</code> or a <a href=\"https://docs.python.org/3/glossary.html#term-decorator\">decorator</a>,</p>\n<div class=\"code-2cols\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MyClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">def</span> <span class=\"token function\">method</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># DON'T NEED `self`</span><br><span class=\"token keyword\">class</span> <span class=\"token class-name\">MyClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token decorator annotation punctuation\">@staticmethod</span><br>    <span class=\"token keyword\">def</span> <span class=\"token function\">method</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span></code></pre>\n</div>\n<h2 id=\"get-all-attributes-of-a-class\">Get all attributes of a class <a class=\"direct-link\" href=\"#get-all-attributes-of-a-class\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># CHECK THERE IS AN ATTRIBUTE</span><br><span class=\"token builtin\">getattr</span><span class=\"token punctuation\">(</span>MyClass<span class=\"token punctuation\">,</span> <span class=\"token string\">'report'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\"># if there is a class, it return this class' detail</span><br><span class=\"token comment\"># if not, return None</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">props</span><span class=\"token punctuation\">(</span>cls<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>i <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> cls<span class=\"token punctuation\">.</span>__dict__<span class=\"token punctuation\">.</span>keys<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">if</span> i<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">!=</span> <span class=\"token string\">'_'</span><span class=\"token punctuation\">]</span><br><br><span class=\"token comment\"># access these attributes</span><br>properties <span class=\"token operator\">=</span> props<span class=\"token punctuation\">(</span>MyClass<span class=\"token punctuation\">)</span><br><span class=\"token keyword\">for</span> att <span class=\"token keyword\">in</span> properties<span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">getattr</span><span class=\"token punctuation\">(</span>MyClass<span class=\"token punctuation\">,</span> att<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Get dictionaries of all attributes &amp; their values</span><br>MyClass<span class=\"token punctuation\">.</span>__dict__</code></pre>\n<h2 id=\"import-local-class\">Import local class <a class=\"direct-link\" href=\"#import-local-class\">#</a></h2>\n<p>Suppose that we have a folders/files structure like below,</p>\n<div class=\"code-2cols\">\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ORIGINAL STRUCTURE</span><br>popai/<br>  processings/<br>    a.py <span class=\"token comment\"># contains class ABC</span><br>    test/<br>      b.py<br>  lib/<br>    c.py <span class=\"token comment\"># contains class XYZ</span></code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># UPDATED STRUCTURE</span><br>popai/<br>  __init__.py<br>  processings/<br>    __init__.py<br>    a.py <span class=\"token comment\"># contains class ABC</span><br>    test/<br>      __init__.py<br>      b.py<br>  lib/<br>    c.py <span class=\"token comment\"># contains class XYZ</span></code></pre>\n</div>\n<p>We want import both classes <code>ABC</code> and <code>XYZ</code>,</p>\n<div class=\"code-2cols\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># b.py</span><br><span class=\"token keyword\">from</span> popai<span class=\"token punctuation\">.</span>processings<span class=\"token punctuation\">.</span>a <span class=\"token keyword\">import</span> ABC</code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># a.py</span><br><span class=\"token keyword\">from</span> popai<span class=\"token punctuation\">.</span>lib<span class=\"token punctuation\">.</span>c <span class=\"token keyword\">import</span> XYZ</code></pre>\n</div>\n<p>Just add <code>__init__.py</code> like in the right box above.</p>\n<p>Some errors may occur,</p>\n<pre class=\"language-python\"><code class=\"language-python\">ValueError<span class=\"token punctuation\">:</span> attempted relative <span class=\"token keyword\">import</span> beyond top<span class=\"token operator\">-</span>level package</code></pre>\n<h2 id=\"father-and-son\">Father and Son <a class=\"direct-link\" href=\"#father-and-son\">#</a></h2>\n<div class=\"code-2cols\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># FATHER</span><br><span class=\"token keyword\">class</span> <span class=\"token class-name\">father_class</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>  <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    self<span class=\"token punctuation\">.</span>abc <span class=\"token operator\">=</span> <span class=\"token number\">1</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># SON</span><br><span class=\"token keyword\">class</span> <span class=\"token class-name\">son_class</span><span class=\"token punctuation\">(</span>father_class<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>  <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token comment\"># son_class has attribute `abc`</span><br>    <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>__init__<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>    self<span class=\"token punctuation\">.</span>xyz <span class=\"token operator\">=</span> <span class=\"token number\">2</span></code></pre>\n</div>\n<p>If you want son takes all parameters of father and use additional parameters,</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Shape</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> shapename<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>        self<span class=\"token punctuation\">.</span>shapename <span class=\"token operator\">=</span> shapename<br><br><span class=\"token keyword\">class</span> <span class=\"token class-name\">ColoredShape</span><span class=\"token punctuation\">(</span>Shape<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> color<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>        <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>__init__<span class=\"token punctuation\">(</span><span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><br>        self<span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> color<br><br>cs <span class=\"token operator\">=</span> ColoredShape<span class=\"token punctuation\">(</span>color<span class=\"token operator\">=</span><span class=\"token string\">'red'</span><span class=\"token punctuation\">,</span> shapename<span class=\"token operator\">=</span><span class=\"token string\">'circle'</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"abstract-base-classes-(abc)\">Abstract Base Classes (ABC) <a class=\"direct-link\" href=\"#abstract-base-classes-(abc)\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> abc <span class=\"token keyword\">import</span> ABC<span class=\"token punctuation\">,</span> abstractmethod</code></pre>\n<div class=\"code-2cols\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># FATHER CLASS</span><br><span class=\"token keyword\">class</span> <span class=\"token class-name\">BaseModel</span><span class=\"token punctuation\">(</span>ABC<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>  <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">pass</span><br><br>  <span class=\"token comment\"># child class must have</span><br>  <span class=\"token decorator annotation punctuation\">@abstractmethod</span><br>  <span class=\"token keyword\">def</span> <span class=\"token function\">fit</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> X<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">pass</span><br><br>  <span class=\"token comment\"># child class must have</span><br>  <span class=\"token decorator annotation punctuation\">@abstractmethod</span><br>  <span class=\"token keyword\">def</span> <span class=\"token function\">predit</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> X<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">pass</span><br><br>  <span class=\"token comment\"># children class don't need to have</span><br>  <span class=\"token comment\">#   but they can call</span><br>  <span class=\"token keyword\">def</span> <span class=\"token function\">fit_predict</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> X<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">pass</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># CHILD CLASS</span><br><span class=\"token keyword\">class</span> <span class=\"token class-name\">LinearModel</span><span class=\"token punctuation\">(</span>BaseModel<span class=\"token punctuation\">)</span><br>  <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">pass</span><br><br>  <span class=\"token comment\"># must-have</span><br>  <span class=\"token keyword\">def</span> <span class=\"token function\">fit</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> X<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">pass</span><br><br>  <span class=\"token comment\"># must-have</span><br>  <span class=\"token keyword\">def</span> <span class=\"token function\">predict</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> X<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">pass</span><br><br>  <span class=\"token comment\"># this call can use .fix_predict()</span><br>  <span class=\"token comment\">#   from its father!</span></code></pre>\n</div>\n",
      "date_published": "2019-09-02T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/pep-8/",
      "url": "https://dinhanhthi.com/pep-8/",
      "title": "Python PEP 8 : Style Guide",
      "content_html": "<h2 id=\"what's-pep-8%3F\">What's PEP 8? <a class=\"direct-link\" href=\"#what's-pep-8%3F\">#</a></h2>\n<p>It contains some conventions in coding with Python. They make the codes clearer and more beautiful. Read the full doc <a href=\"https://www.python.org/dev/peps/pep-0008/\">here</a>. Below are just some of them in my choice.</p>\n<h2 id=\"naming-styles\">Naming styles <a class=\"direct-link\" href=\"#naming-styles\">#</a></h2>\n<ul>\n<li>\n<p>Package &amp; module names &amp; function &amp; variable: <code>all_lower_case</code> or <code>short</code> with <code>underscore</code>.</p>\n</li>\n<li>\n<p>Class names: use <code>CapWords</code>.</p>\n</li>\n<li>\n<p>Constant: <code>ALL_CAPITAL_LETTERS</code>.</p>\n</li>\n<li>\n<p><strong>Avoid these</strong>:</p>\n<pre class=\"language-python\"><code class=\"language-python\">l <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token comment\"># lowercase letter el</span><br>O <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token comment\"># uppercase letter oh</span><br>I <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token comment\"># uppercase letter eye</span><br><br>Capitalized_Words_With_Underscores <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token comment\"># ugly</span></code></pre>\n</li>\n</ul>\n<h2 id=\"code-layout\">Code layout <a class=\"direct-link\" href=\"#code-layout\">#</a></h2>\n<h3 id=\"indentation\">Indentation <a class=\"direct-link\" href=\"#indentation\">#</a></h3>\n<p>Use <strong>4 spaces</strong> per indentation level. Note that, in this site, for a better view, I use 2 spaces for the code highlight.</p>\n<div class=\"code-2cols\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># YES</span><br><span class=\"token keyword\">def</span> <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    commands <span class=\"token comment\"># 4 spaces</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># NO</span><br><span class=\"token keyword\">def</span> <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>  commands <span class=\"token comment\"># 2 spaces</span></code></pre>\n</div>\n<p>Vertical align when break a continuous line:</p>\n<div class=\"code-2cols\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># YES</span><br>foo <span class=\"token operator\">=</span> long_function_name<span class=\"token punctuation\">(</span>var_one<span class=\"token punctuation\">,</span> var_two<span class=\"token punctuation\">,</span><br>                         var_three<span class=\"token punctuation\">,</span> var_four<span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># NO</span><br>foo <span class=\"token operator\">=</span> long_function_name<span class=\"token punctuation\">(</span>var_one<span class=\"token punctuation\">,</span> var_two<span class=\"token punctuation\">,</span><br>    var_three<span class=\"token punctuation\">,</span> var_four<span class=\"token punctuation\">)</span></code></pre>\n</div>\n<p>Distinguish arguments from the rest:</p>\n<div class=\"code-2cols\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># YES</span><br><span class=\"token keyword\">def</span> <span class=\"token function\">long_function_name</span><span class=\"token punctuation\">(</span><br>        var_one<span class=\"token punctuation\">,</span> var_two<span class=\"token punctuation\">,</span> var_three<span class=\"token punctuation\">,</span><br>        var_four<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>var_one<span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># NO</span><br><span class=\"token keyword\">def</span> <span class=\"token function\">long_function_name</span><span class=\"token punctuation\">(</span><br>    var_one<span class=\"token punctuation\">,</span> var_two<span class=\"token punctuation\">,</span> var_three<span class=\"token punctuation\">,</span><br>    var_four<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>var_one<span class=\"token punctuation\">)</span></code></pre>\n</div>\n<h3 id=\"tabs-or-spaces%3F\">Tabs or spaces? <a class=\"direct-link\" href=\"#tabs-or-spaces%3F\">#</a></h3>\n<p><strong>Spaces</strong> are preferred. Don't mix tabs and spaces (not allowed in Python 3).</p>\n<h3 id=\"max-line-lenght\">Max line lenght <a class=\"direct-link\" href=\"#max-line-lenght\">#</a></h3>\n<p>Max of <strong>79 characters</strong>.</p>\n<h3 id=\"line-break-with-operator\">Line break with operator <a class=\"direct-link\" href=\"#line-break-with-operator\">#</a></h3>\n<p>Operators should go with operands</p>\n<div class=\"code-2cols\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># YES</span><br>income <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>salary<br>          <span class=\"token operator\">+</span> sale<span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># NO</span><br>income <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>salary <span class=\"token operator\">+</span><br>          sale<span class=\"token punctuation\">)</span></code></pre>\n</div>\n<h3 id=\"import\">Import <a class=\"direct-link\" href=\"#import\">#</a></h3>\n<p>Imports should usually be on separate lines:</p>\n<div class=\"code-2cols\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># YES</span><br><span class=\"token keyword\">import</span> os<br><span class=\"token keyword\">import</span> sys</code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># NO</span><br><span class=\"token keyword\">import</span> os<span class=\"token punctuation\">,</span> sys</code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># But yes</span><br><span class=\"token keyword\">from</span> subprocess <span class=\"token keyword\">import</span> Popen<span class=\"token punctuation\">,</span> PIPE</code></pre>\n</div>\n<h2 id=\"whitespace\">Whitespace <a class=\"direct-link\" href=\"#whitespace\">#</a></h2>\n<p>Avoid extraneous whitespace:</p>\n<div class=\"code-2cols\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># YES</span><br>spam<span class=\"token punctuation\">(</span>ham<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>eggs<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><br>foo <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><br><span class=\"token keyword\">if</span> x <span class=\"token operator\">==</span> <span class=\"token number\">4</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">print</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">;</span> x<span class=\"token punctuation\">,</span> y <span class=\"token operator\">=</span> y<span class=\"token punctuation\">,</span> x</code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># NO</span><br>spam<span class=\"token punctuation\">(</span> ham<span class=\"token punctuation\">[</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> eggs<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span><br>bar <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">)</span><br><span class=\"token keyword\">if</span> x <span class=\"token operator\">==</span> <span class=\"token number\">4</span> <span class=\"token punctuation\">:</span> <span class=\"token keyword\">print</span> x <span class=\"token punctuation\">,</span> y <span class=\"token punctuation\">;</span> x <span class=\"token punctuation\">,</span> y <span class=\"token operator\">=</span> y <span class=\"token punctuation\">,</span> x</code></pre>\n</div>\n<p>For slices</p>\n<div class=\"code-2cols\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># YES</span><br>ham<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token number\">9</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> ham<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token number\">9</span><span class=\"token punctuation\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> ham<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">9</span><span class=\"token punctuation\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> ham<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> ham<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token number\">9</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span><br>ham<span class=\"token punctuation\">[</span>lower<span class=\"token punctuation\">:</span>upper<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> ham<span class=\"token punctuation\">[</span>lower<span class=\"token punctuation\">:</span>upper<span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> ham<span class=\"token punctuation\">[</span>lower<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>step<span class=\"token punctuation\">]</span><br>ham<span class=\"token punctuation\">[</span>lower<span class=\"token operator\">+</span>offset <span class=\"token punctuation\">:</span> upper<span class=\"token operator\">+</span>offset<span class=\"token punctuation\">]</span><br>ham<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span> upper_fn<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> step_fn<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> ham<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span> step_fn<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><br>ham<span class=\"token punctuation\">[</span>lower <span class=\"token operator\">+</span> offset <span class=\"token punctuation\">:</span> upper <span class=\"token operator\">+</span> offset<span class=\"token punctuation\">]</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># NO</span><br>ham<span class=\"token punctuation\">[</span>lower <span class=\"token operator\">+</span> offset<span class=\"token punctuation\">:</span>upper <span class=\"token operator\">+</span> offset<span class=\"token punctuation\">]</span><br>ham<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span> <span class=\"token number\">9</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> ham<span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token punctuation\">:</span><span class=\"token number\">9</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> ham<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token number\">9</span> <span class=\"token punctuation\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><br>ham<span class=\"token punctuation\">[</span>lower <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">:</span> upper<span class=\"token punctuation\">]</span><br>ham<span class=\"token punctuation\">[</span> <span class=\"token punctuation\">:</span> upper<span class=\"token punctuation\">]</span></code></pre>\n</div>\n<p>Add open parenthesis/bracket right after:</p>\n<div class=\"code-2cols\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># YES</span><br>spam<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><br>dct<span class=\"token punctuation\">[</span><span class=\"token string\">'key'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> lst<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># NO</span><br>spam <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><br>dct <span class=\"token punctuation\">[</span><span class=\"token string\">'key'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> lst <span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span></code></pre>\n</div>\n<p>No need to have verticle alignment:</p>\n<div class=\"code-2cols\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># YES</span><br>x <span class=\"token operator\">=</span> <span class=\"token number\">1</span><br>y <span class=\"token operator\">=</span> <span class=\"token number\">2</span><br>long_variable <span class=\"token operator\">=</span> <span class=\"token number\">3</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># NO</span><br>x             <span class=\"token operator\">=</span> <span class=\"token number\">1</span><br>y             <span class=\"token operator\">=</span> <span class=\"token number\">2</span><br>long_variable <span class=\"token operator\">=</span> <span class=\"token number\">3</span></code></pre>\n</div>\n<p>With operators:</p>\n<div class=\"code-2cols\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># YES</span><br>i <span class=\"token operator\">=</span> i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><br>submitted <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><br>x <span class=\"token operator\">=</span> x<span class=\"token operator\">*</span><span class=\"token number\">2</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><br>hypot2 <span class=\"token operator\">=</span> x<span class=\"token operator\">*</span>x <span class=\"token operator\">+</span> y<span class=\"token operator\">*</span>y<br>c <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>a<span class=\"token operator\">+</span>b<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>a<span class=\"token operator\">-</span>b<span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># NO</span><br>i<span class=\"token operator\">=</span>i<span class=\"token operator\">+</span><span class=\"token number\">1</span><br>submitted <span class=\"token operator\">+=</span><span class=\"token number\">1</span><br>x <span class=\"token operator\">=</span> x <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><br>hypot2 <span class=\"token operator\">=</span> x <span class=\"token operator\">*</span> x <span class=\"token operator\">+</span> y <span class=\"token operator\">*</span> y<br>c <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>a <span class=\"token operator\">-</span> b<span class=\"token punctuation\">)</span></code></pre>\n</div>\n<p>Def of a function:</p>\n<div class=\"code-2cols\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># YES</span><br><span class=\"token keyword\">def</span> <span class=\"token function\">complex</span><span class=\"token punctuation\">(</span>real<span class=\"token punctuation\">,</span> imag<span class=\"token operator\">=</span><span class=\"token number\">0.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">return</span> magic<span class=\"token punctuation\">(</span>r<span class=\"token operator\">=</span>real<span class=\"token punctuation\">,</span> i<span class=\"token operator\">=</span>imag<span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># NO</span><br><span class=\"token keyword\">def</span> <span class=\"token function\">complex</span><span class=\"token punctuation\">(</span>real<span class=\"token punctuation\">,</span> imag <span class=\"token operator\">=</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">return</span> magic<span class=\"token punctuation\">(</span>r <span class=\"token operator\">=</span> real<span class=\"token punctuation\">,</span> i <span class=\"token operator\">=</span> imag<span class=\"token punctuation\">)</span></code></pre>\n</div>\n<h2 id=\"programming-recommendations\">Programming Recommendations <a class=\"direct-link\" href=\"#programming-recommendations\">#</a></h2>\n<p>Using <code>not</code> inside <code>if</code>:</p>\n<div class=\"code-2cols\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># YES</span><br><span class=\"token keyword\">if</span> foo <span class=\"token keyword\">is</span> <span class=\"token keyword\">not</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">:</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># NO</span><br><span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> foo <span class=\"token keyword\">is</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">:</span></code></pre>\n</div>\n<p>Using Use <code>.startswith()</code> and <code>.endswith()</code> instead of string slicing:</p>\n<div class=\"code-2cols\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># YES</span><br><span class=\"token keyword\">if</span> foo<span class=\"token punctuation\">.</span>startswith<span class=\"token punctuation\">(</span><span class=\"token string\">'bar'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># NO</span><br><span class=\"token keyword\">if</span> foo<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token string\">'bar'</span><span class=\"token punctuation\">:</span></code></pre>\n</div>\n<p>For sequences, (strings, lists, tuples), use the fact that empty sequences are false:</p>\n<div class=\"code-2cols\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># YES</span><br><span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> seq<span class=\"token punctuation\">:</span><br><span class=\"token keyword\">if</span> seq<span class=\"token punctuation\">:</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># NO</span><br><span class=\"token keyword\">if</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>seq<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br><span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>seq<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></code></pre>\n</div>\n<p>Don't compare boolean values to True or False using <code>==</code>:</p>\n<div class=\"code-2cols\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># YES</span><br><span class=\"token keyword\">if</span> greeting<span class=\"token punctuation\">:</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># NO</span><br><span class=\"token keyword\">if</span> greeting <span class=\"token operator\">==</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Worse</span><br><span class=\"token keyword\">if</span> greeting <span class=\"token keyword\">is</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span></code></pre>\n</div>\n",
      "date_published": "2019-09-02T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/computer-and-internet-tips/",
      "url": "https://dinhanhthi.com/computer-and-internet-tips/",
      "title": "Computer &amp; Internet tips",
      "content_html": "<h2 id=\"general\">General <a class=\"direct-link\" href=\"#general\">#</a></h2>\n<h2 id=\"applications\">Applications <a class=\"direct-link\" href=\"#applications\">#</a></h2>\n<p>🔅  Change default directory in <a href=\"https://cmder.net/\">cmder</a></p>\n<ol>\n<li>Go to settings</li>\n<li>Then, Startup &gt; Tasks</li>\n<li>Choose <code>{cmd::Cmder}</code></li>\n<li>Choose the below-right box, let the cursor at the end of the text</li>\n<li>Click on &quot;Startup dir…&quot;</li>\n<li>Choose your desired directory &gt; OK</li>\n<li>Remove the current line with the new appearing one (<code>new_console:d:%USERPROFILE%</code>)</li>\n<li>Click on Save settings</li>\n</ol>\n<h2 id=\"windows\">Windows <a class=\"direct-link\" href=\"#windows\">#</a></h2>\n<h3 id=\"cortana-uses-chrome-instead-of-edge\">Cortana uses Chrome instead of Edge <a class=\"direct-link\" href=\"#cortana-uses-chrome-instead-of-edge\">#</a></h3>\n<ul>\n<li>Download and install <a href=\"https://github.com/da2x/EdgeDeflector/releases\">this app</a> (reinstall it after every update of Windows).</li>\n<li>Choose <strong>EdgeDeflector</strong> as the default web browser if it asks.</li>\n<li>Install <a href=\"https://chrome.google.com/webstore/detail/chrometana-redirect-bing/\">this extension</a> in Chrome to force to redirect from <strong>Bing</strong> to <strong>Google Search Engine</strong>.</li>\n</ul>\n<h3 id=\"change-default-directory-in-powershell\">Change default directory in PowerShell <a class=\"direct-link\" href=\"#change-default-directory-in-powershell\">#</a></h3>\n<ul>\n<li>Create a folder in your <strong>Documents</strong> folder called <strong>WindowsPowerShell</strong></li>\n<li>Create a file called <code>profile.ps1</code> inside this folder</li>\n<li>Add following command <code>Set-Location c:\\abc</code></li>\n<li>Every time you launch PowerShell, the profile script will be executed</li>\n</ul>\n<h2 id=\"internet\">Internet <a class=\"direct-link\" href=\"#internet\">#</a></h2>\n<p>🔅  Remove apps permission from Google Apps (Youtube, Google Play Music, …) ⇾ <a href=\"https://myaccount.google.com/permissions\">here</a>.</p>\n<h3 id=\"problem-of-hsts\">Problem of hsts <a class=\"direct-link\" href=\"#problem-of-hsts\">#</a></h3>\n<p>Cannot open a page with security problem.</p>\n<ol>\n<li>Go to <a href=\"chrome://net-internals/#hsts\">chrome://net-internals/#hsts</a></li>\n<li>&quot;Query HSTS/PKP domain&quot;, fill domain, e.g. <code>gitlab.powerop.io</code>.</li>\n<li>&quot;Delete domain security policies&quot;, fill domain and click on <strong>Delete</strong>.</li>\n<li>Try again &gt; Click on &quot;Advanced&quot; &gt; Click on ...unsafe....</li>\n</ol>\n<h3 id=\"download-flash-video\">Download flash video <a class=\"direct-link\" href=\"#download-flash-video\">#</a></h3>\n<p>In most case, you can use <a href=\"https://chrome.google.com/webstore/detail/flash-video-downloader/aiimdkdngfcipjohbjenkahhlhccpdbc?hl=en\">Flash Video Downloader</a> (for Chrome) or other extensions to detect the video url.</p>\n<p>In the case browser extensions cannot capture the url, you can open the <strong>Developer Tools</strong> (in Chrome, press <kbd>F12</kbd>) &gt; Reload the page and click to play again the video &gt; <strong>Network</strong> tab &gt; <strong>Media</strong> tab &gt; click on any sources on the left column (<code>videoplayback?expire...</code>) &gt; On the right column, in tab <strong>Headers</strong> &gt; <strong>General</strong> &gt; Copy the content in <strong>Request URL</strong>, something like below,</p>\n<pre><code>https://r4---sn-25ge7ns7.googlevideo.com/videoplayback?expire=1568040368&amp;ei=kEl2Xb...f_cW7qE=\n</code></pre>\n<p>Open a new tab in your browser, <kbd>Ctrl</kbd> + <kbd>S</kbd> to save the video. You can also open the Downloads manager in your browser (<kbd>Ctrl</kbd> + <kbd>J</kbd>) to copy the download link and use other Download Manager tools to download this video without using the browser!</p>\n<h3 id=\"github-readme.md-on-localhost\">Github <a href=\"http://README.md\">README.md</a> on localhost <a class=\"direct-link\" href=\"#github-readme.md-on-localhost\">#</a></h3>\n<p>In stall <a href=\"https://github.com/joeyespo/grip\">grip</a>.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># go to the file's directory</span><br>grip <span class=\"token comment\"># if file is README.md</span><br>grip file.md</code></pre>\n",
      "date_published": "2019-09-02T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/decision-tree-regression/",
      "url": "https://dinhanhthi.com/decision-tree-regression/",
      "title": "Decision Tree Regression",
      "content_html": "<h2 id=\"what's-the-idea-of-decision-tree-regression%3F\">What's the idea of Decision Tree Regression? <a class=\"direct-link\" href=\"#what's-the-idea-of-decision-tree-regression%3F\">#</a></h2>\n<p>The basic intuition behind a decision tree is to map out all possible decision paths in the form of a tree. It can be used for <em>classification</em> (<a href=\"/decision-tree-classifier\">note</a>) and <em>regression</em>. In this post, let's try to understand the regression.</p>\n<p>DT Regression is similar to <a href=\"/decision-tree-classifier\">DT Classification</a>, however we use <strong>Mean Square Error</strong> (MSE, default) or <strong>Mean Absolute Error</strong> (MAE) instead of <em>cross-entropy</em> or <em>Gini impurity</em> to determine splits.</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mtext>MSE</mtext></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mfrac><mn>1</mn><mi>n</mi></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mo stretchy=\"false\">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>−</mo><msub><mover accent=\"true\"><mi>y</mi><mo>ˉ</mo></mover><mi>i</mi></msub><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup><mo separator=\"true\">,</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mtext>MAE</mtext></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mfrac><mn>1</mn><mi>n</mi></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mi mathvariant=\"normal\">∣</mi><msub><mi>y</mi><mi>i</mi></msub><mo>−</mo><msub><mover accent=\"true\"><mi>y</mi><mo>ˉ</mo></mover><mi>i</mi></msub><mi mathvariant=\"normal\">∣</mi><mi mathvariant=\"normal\">.</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\n\\begin{aligned}\n\\text{MSE} &amp;= \\frac{1}{n} \\sum_{i=1}^{n} (y_i - \\bar{y}_i)^2, \\\\\n\\text{MAE} &amp;= \\frac{1}{n}\\sum_{i=1}^n \\vert y_i - \\bar{y}_i \\vert.\n\\end{aligned}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:6.458132000000001em;vertical-align:-2.9790660000000004em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.4790660000000004em;\"><span style=\"top:-5.479066em;\"><span class=\"pstrut\" style=\"height:3.6513970000000002em;\"></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">MSE</span></span></span></span><span style=\"top:-2.25em;\"><span class=\"pstrut\" style=\"height:3.6513970000000002em;\"></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">MAE</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.9790660000000004em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.4790660000000004em;\"><span style=\"top:-5.479066em;\"><span class=\"pstrut\" style=\"height:3.6513970000000002em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">n</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6513970000000002em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.56778em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.19444em;\"><span class=\"mord\">ˉ</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.19444em;\"><span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span></span></span><span style=\"top:-2.25em;\"><span class=\"pstrut\" style=\"height:3.6513970000000002em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">n</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6513970000000002em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.56778em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.19444em;\"><span class=\"mord\">ˉ</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.19444em;\"><span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">∣</span><span class=\"mord\">.</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.9790660000000004em;\"><span></span></span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n<p>Suppose that we have a dataset <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span> like in the figure below,</p>\n<div class=\"columns-2\" markdown=\"1\">\n<p><img src=\"/img/post/ML/random-forest-decision-tree/r1.jpg\" alt=\"Example of dataset\" class=\"img-100 pop\"><br>\n<em>An example of dataset <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span>.</em></p>\n<p><img src=\"/img/post/ML/random-forest-decision-tree/r2.jpg\" alt=\"Example of dataset\" class=\"img-100 pop\"><br>\n<em>A decision tree we want.</em></p>\n</div>\n<h3 id=\"some-basic-concepts\">Some basic concepts <a class=\"direct-link\" href=\"#some-basic-concepts\">#</a></h3>\n<p><img src=\"/img/post/ML/random-forest-decision-tree/r3.jpg\" alt=\"Concepts with a tree.\" class=\"img-full-85\"></p>\n<ul>\n<li><strong>Splitting</strong>: It is a process of dividing a node into two or more sub-nodes.</li>\n<li><strong>Pruning</strong>: When we remove sub-nodes of a decision node, this process is called pruning.</li>\n<li><strong>Parent node and Child Node</strong>: A node, which is divided into sub-nodes is called parent node of sub-nodes where as sub-nodes are the child of parent node.</li>\n</ul>\n<div class=\"success\">\n<p>Other aspects of decision tree algorithm, check <a href=\"/decision-tree-classifier\">this note</a>.</p>\n</div>\n<div class=\"warning\">\n<p>Looking for an example like in <a href=\"/decision-tree-classifier\">the post of decision tree classifier</a>? Check <a href=\"/files/ml/saedsayad.com_Decision_Tree_Regression.pdf\">this</a>! Below are a short algorithm,</p>\n</div>\n<ol>\n<li>\n<p>Calculate the <strong>Standard Deviation</strong> (<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mi>D</mi></mrow><annotation encoding=\"application/x-tex\">SD</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span></span></span></span></span>) of the current node (let's say <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span>, parent node) by using MSE or MAE,</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>S</mi><mi>D</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mfrac><mn>1</mn><mi>n</mi></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mo stretchy=\"false\">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>−</mo><msub><mover accent=\"true\"><mi>y</mi><mo>ˉ</mo></mover><mi>i</mi></msub><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup><mo separator=\"true\">,</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mtext>or </mtext><mi>S</mi><mi>D</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mfrac><mn>1</mn><mi>n</mi></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mi mathvariant=\"normal\">∣</mi><msub><mi>y</mi><mi>i</mi></msub><mo>−</mo><msub><mover accent=\"true\"><mi>y</mi><mo>ˉ</mo></mover><mi>i</mi></msub><mi mathvariant=\"normal\">∣</mi><mo separator=\"true\">,</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{aligned}SD(S) &amp;= \\frac{1}{n} \\sum_{i=1}^{n} (y_i - \\bar{y}_i)^2, \\\\\\text{or  } SD(S) &amp;= \\frac{1}{n}\\sum_{i=1}^n \\vert y_i - \\bar{y}_i \\vert,\\end{aligned}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:6.458132000000001em;vertical-align:-2.9790660000000004em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.4790660000000004em;\"><span style=\"top:-5.479066em;\"><span class=\"pstrut\" style=\"height:3.6513970000000002em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span></span></span><span style=\"top:-2.25em;\"><span class=\"pstrut\" style=\"height:3.6513970000000002em;\"></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">or </span></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.9790660000000004em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.4790660000000004em;\"><span style=\"top:-5.479066em;\"><span class=\"pstrut\" style=\"height:3.6513970000000002em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">n</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6513970000000002em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.56778em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.19444em;\"><span class=\"mord\">ˉ</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.19444em;\"><span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span></span></span><span style=\"top:-2.25em;\"><span class=\"pstrut\" style=\"height:3.6513970000000002em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">n</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6513970000000002em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.56778em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.19444em;\"><span class=\"mord\">ˉ</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.19444em;\"><span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">∣</span><span class=\"mpunct\">,</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.9790660000000004em;\"><span></span></span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n<p>where <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>y</mi><mi>i</mi></msub><mo>∈</mo></mrow><annotation encoding=\"application/x-tex\">y_i\\in</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7335400000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span></span></span></span></span> the target values (<em>Hours Played</em> in the above example), <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mi>y</mi><mo>ˉ</mo></mover><mo>=</mo><mfrac><mrow><mi mathvariant=\"normal\">Σ</mi><mi>y</mi></mrow><mi>n</mi></mfrac></mrow><annotation encoding=\"application/x-tex\">\\bar{y}=\\frac{\\Sigma y}{n}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7622199999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.56778em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.19444em;\"><span class=\"mord\">ˉ</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.19444em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.269439em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.924439em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.446108em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">Σ</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">y</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span> is the mean value and <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span></span> is the number of examples <strong>in this node</strong>.</p>\n</li>\n<li>\n<p>Check the <strong>stopping conditions</strong> (we don't need to make any split at this node) to stop the split and this node becomes a leaf node. Otherwise, go to step 3.</p>\n<ul>\n<li>The minimum number of samples required to split an internal node, use <code>min_samples_split</code> in <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.tree.DecisionTreeRegressor.html#sklearn.tree.DecisionTreeRegressor\">scikit-learn</a>.</li>\n<li>The maximum depth of the tree, use <code>max_depth</code> in <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.tree.DecisionTreeRegressor.html#sklearn.tree.DecisionTreeRegressor\">scikit-learn</a>.</li>\n<li>A node will be split if this split induces a decrease of the impurity greater than or equal to this value, use <code>min_impurity_decrease</code> in <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.tree.DecisionTreeRegressor.html#sklearn.tree.DecisionTreeRegressor\">scikit-learn</a>.</li>\n<li>Its <em>coefficient of variation</em> (<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi>S</mi><mi>D</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo></mrow><mover accent=\"true\"><mi>y</mi><mo>ˉ</mo></mover></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{SD(S)}{\\bar{y}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.491108em;vertical-align:-0.481108em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.01em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord accent mtight\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.56778em;\"><span style=\"top:-2.7em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">y</span></span></span><span style=\"top:-2.7em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"accent-body\" style=\"left:-0.19444em;\"><span class=\"mord mtight\">ˉ</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.19444em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.485em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">D</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.481108em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>) is less than a certain threshold.</li>\n</ul>\n</li>\n<li>\n<p>Calculate the <strong>Standard Deviation Reduction</strong> (SDR) after splitting node <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span> on each attribute (for example, consider attribute <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi></mrow><annotation encoding=\"application/x-tex\">O</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span></span></span></span></span>). The attribute w.r.t. the biggest SDR will be chosen!</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><munder><munder><mrow><mi>S</mi><mi>D</mi><mi>R</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><mi>O</mi><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"true\">⏟</mo></munder><mtext>Standard Deviation Reduction</mtext></munder><mo>=</mo><munder><munder><mrow><mi>S</mi><mi>D</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"true\">⏟</mo></munder><mtext>SD before split</mtext></munder><mo>−</mo><munder><munder><mrow><munder><mo>∑</mo><mi>j</mi></munder><mi>P</mi><mo stretchy=\"false\">(</mo><msub><mi>O</mi><mi>j</mi></msub><mi mathvariant=\"normal\">∣</mi><mi>S</mi><mo stretchy=\"false\">)</mo><mo>×</mo><mi>S</mi><mi>D</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><msub><mi>O</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"true\">⏟</mo></munder><mtext>weighted SD after split</mtext></munder></mrow><annotation encoding=\"application/x-tex\">\\underbrace{SDR(S,O)}_{\\text{Standard Deviation Reduction}}= \\underbrace{SD(S)}_{\\text{SD before split}}- \\underbrace{\\sum_j P(O_j | S) \\times SD(S,O_j)}_{\\text{weighted SD after split}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.334108em;vertical-align:-1.584108em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.75em;\"><span style=\"top:-1.415892em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">Standard Deviation Reduction</span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.75em;\"><span class=\"svg-align\" style=\"top:-2.102em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"stretchy\" style=\"height:0.548em;min-width:1.6em;\"><span class=\"brace-left\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMinYMin slice'><path d='M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z'/></svg></span><span class=\"brace-center\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMidYMin slice'><path d='M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z'/></svg></span><span class=\"brace-right\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMaxYMin slice'><path d='M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z'/></svg></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.898em;\"><span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.584108em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.4702159999999997em;vertical-align:-1.720216em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.75em;\"><span style=\"top:-1.415892em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">SD before split</span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.75em;\"><span class=\"svg-align\" style=\"top:-2.102em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"stretchy\" style=\"height:0.548em;min-width:1.6em;\"><span class=\"brace-left\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMinYMin slice'><path d='M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z'/></svg></span><span class=\"brace-center\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMidYMin slice'><path d='M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z'/></svg></span><span class=\"brace-right\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMaxYMin slice'><path d='M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z'/></svg></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.898em;\"><span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.720216em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.9339980000000003em;vertical-align:-2.8839930000000003em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.050005em;\"><span style=\"top:-0.30211999999999983em;\"><span class=\"pstrut\" style=\"height:3.050005em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">weighted SD after split</span></span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.050005em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.050005em;\"><span class=\"svg-align\" style=\"top:-0.9882279999999999em;\"><span class=\"pstrut\" style=\"height:3.050005em;\"></span><span class=\"stretchy\" style=\"height:0.548em;min-width:1.6em;\"><span class=\"brace-left\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMinYMin slice'><path d='M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z'/></svg></span><span class=\"brace-center\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMidYMin slice'><path d='M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z'/></svg></span><span class=\"brace-right\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMaxYMin slice'><path d='M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z'/></svg></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.050005em;\"></span><span class=\"mord\"><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.050005em;\"><span style=\"top:-1.8723309999999997em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span><span style=\"top:-3.0500049999999996em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.413777em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.061777em;\"><span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.8839930000000003em;\"><span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n<p>where <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>j</mi><mo>∈</mo></mrow><annotation encoding=\"application/x-tex\">j \\in</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05724em;\">j</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span></span></span></span></span> number of different properties in <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi></mrow><annotation encoding=\"application/x-tex\">O</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span></span></span></span></span> and <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>P</mi><mo stretchy=\"false\">(</mo><msub><mi>O</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">P(O_j)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span> is the propability of property <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>O</mi><mi>j</mi></msub></mrow><annotation encoding=\"application/x-tex\">O_j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.969438em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span></span> in <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi></mrow><annotation encoding=\"application/x-tex\">O</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span></span></span></span></span>. Note that, <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mi>D</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><msub><mi>O</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">SD(S,O_j)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span> means the SD of node <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>O</mi><mi>j</mi></msub></mrow><annotation encoding=\"application/x-tex\">O_j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.969438em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span></span> which is also a child of node <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span>.</p>\n</li>\n<li>\n<p>After splitting, we have new child nodes. Each of them becomes a new parent node in the next step. Go back to step 1.</p>\n</li>\n</ol>\n<h2 id=\"using-decision-tree-regression-with-scikit-learn\">Using Decision Tree Regression with Scikit-learn <a class=\"direct-link\" href=\"#using-decision-tree-regression-with-scikit-learn\">#</a></h2>\n<h3 id=\"load-and-create\">Load and create <a class=\"direct-link\" href=\"#load-and-create\">#</a></h3>\n<p>Load the library,</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>tree <span class=\"token keyword\">import</span> DecisionTreeRegressor</code></pre>\n<p>Create a decision tree (<a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.tree.DecisionTreeRegressor.html#sklearn.tree.DecisionTreeRegressor\">other parameters</a>):</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># mean squared error (default)</span><br>reg <span class=\"token operator\">=</span> DecisionTreeRegressor<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># criterion='mse'</span><br><span class=\"token comment\"># mean absolute error</span><br>reg <span class=\"token operator\">=</span> DecisionTreeRegressor<span class=\"token punctuation\">(</span>criterion<span class=\"token operator\">=</span><span class=\"token string\">'mae'</span><span class=\"token punctuation\">)</span></code></pre>\n<p>An example,</p>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> sklearn <span class=\"token keyword\">import</span> tree<br>X <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><br>y <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2.5</span><span class=\"token punctuation\">]</span><br>reg <span class=\"token operator\">=</span> tree<span class=\"token punctuation\">.</span>DecisionTreeRegressor<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>reg <span class=\"token operator\">=</span> reg<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span> <span class=\"token comment\"># train</span></code></pre>\n<pre><code>array([0.5])\n</code></pre>\n</div>\n<h3 id=\"plot-and-save-plots\">Plot and save plots <a class=\"direct-link\" href=\"#plot-and-save-plots\">#</a></h3>\n<p>Plot the tree (You may need to install <a href=\"https://www.graphviz.org/\">Graphviz</a> first. Don't forget to add its installed folder to <code>$path</code>),</p>\n<div class=\"columns-2 size-2-1\" markdown=\"1\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> IPython<span class=\"token punctuation\">.</span>display <span class=\"token keyword\">import</span> Image<br><span class=\"token keyword\">import</span> pydotplus<br>dot_data <span class=\"token operator\">=</span> tree<span class=\"token punctuation\">.</span>export_graphviz<span class=\"token punctuation\">(</span>reg<span class=\"token punctuation\">,</span> out_file<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span><br>                                rounded<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span><br>                                filled<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><br>graph <span class=\"token operator\">=</span> pydotplus<span class=\"token punctuation\">.</span>graph_from_dot_data<span class=\"token punctuation\">(</span>dot_data<span class=\"token punctuation\">)</span><br>Image<span class=\"token punctuation\">(</span>graph<span class=\"token punctuation\">.</span>create_png<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<p><img src=\"/img/post/ML/random-forest-decision-tree/r4.png\" alt=\"An example.\" class=\"img-100 pop\"></p>\n</div>\n<p>Save the tree (follows the codes in &quot;plot the tree&quot;)</p>\n<pre class=\"language-python\"><code class=\"language-python\">graph<span class=\"token punctuation\">.</span>write_pdf<span class=\"token punctuation\">(</span><span class=\"token string\">\"tree.pdf\"</span><span class=\"token punctuation\">)</span>   <span class=\"token comment\"># to pdf</span><br>graph<span class=\"token punctuation\">.</span>write_png<span class=\"token punctuation\">(</span><span class=\"token string\">\"thi.png\"</span><span class=\"token punctuation\">)</span>    <span class=\"token comment\"># to png</span></code></pre>\n<h2 id=\"references\">References <a class=\"direct-link\" href=\"#references\">#</a></h2>\n<ul>\n<li><strong>Skikit-learn</strong>. <em><a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.tree.DecisionTreeRegressor.html#sklearn.tree.DecisionTreeRegressor\">Decision Tree Regressor</a> official doc</em>.</li>\n<li><strong>Saed Sayad</strong>. <em><a href=\"http://saedsayad.com/decision_tree_reg.htm\">Decision Tree - Regression</a></em>.</li>\n</ul>\n",
      "date_published": "2019-09-02T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/decision-tree-classifier/",
      "url": "https://dinhanhthi.com/decision-tree-classifier/",
      "title": "Decision Tree Classifier",
      "content_html": "<h2 id=\"what's-the-idea-of-decision-tree-classifier%3F\">What's the idea of Decision Tree Classifier? <a class=\"direct-link\" href=\"#what's-the-idea-of-decision-tree-classifier%3F\">#</a></h2>\n<p>The basic intuition behind a decision tree is to map out all possible decision paths in the form of a tree. It can be used for <em>classification</em> and <em>regression</em> (<a href=\"/decision-tree-regression\">note</a>). In this post, let's try to understand the classifier.</p>\n<p>Suppose that we have a dataset <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span> like in the figure below<sup><a href=\"https://books.google.fr/books/about/Data_Mining_Practical_Machine_Learning_T.html?id=bDtLM8CODsQC\" target=\"_blank\">[ref, <em>Table 1.2</em>]</a></sup>,</p>\n<div class=\"col-2-equal\">\n<p><img src=\"/img/post/ML/random-forest-decision-tree/dt-1-1.jpg\" alt=\"Example of dataset\" class=\"img-100 pop\"><br>\n<em>An example of dataset <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span>.</em></p>\n<p><img src=\"/img/post/ML/random-forest-decision-tree/dt-1-2.jpg\" alt=\"Example of dataset\" class=\"img-100 pop\"><br>\n<em>A decision tree we want.</em></p>\n</div>\n<p>There are <a href=\"https://en.wikipedia.org/wiki/Decision_tree_learning#Decision_tree_types\">many algorithms</a> which can help us make a tree like above, in Machine Learning, we usually use:</p>\n<p class=\"indent\"></p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/ID3_algorithm\"><strong>ID3</strong></a> (<em>Iterative Dichotomiser</em>): uses <strong>information gain</strong> / <strong>entropy</strong>.</li>\n<li><strong><a href=\"https://en.wikipedia.org/wiki/Decision_tree_learning#Gini_impurity\">CART</a></strong> (<em>Classification And Regression Tree</em>): uses <strong>Gini impurity</strong>.</li>\n</ul>\n<h3 id=\"some-basic-concepts\">Some basic concepts <a class=\"direct-link\" href=\"#some-basic-concepts\">#</a></h3>\n<p><img src=\"/img/post/ML/random-forest-decision-tree/f5.jpg\" alt=\"Concepts with a tree.\" class=\"img-full-80\"></p>\n<ul>\n<li><strong>Splitting</strong>: It is a process of dividing a node into two or more sub-nodes.</li>\n<li><strong>Pruning</strong>: When we remove sub-nodes of a decision node, this process is called pruning.</li>\n<li><strong>Parent node and Child Node</strong>: A node, which is divided into sub-nodes is called parent node of sub-nodes where as sub-nodes are the child of parent node.</li>\n</ul>\n<h3 id=\"id3-algorithm\">ID3 algorithm <a class=\"direct-link\" href=\"#id3-algorithm\">#</a></h3>\n<div class=\"hsbox\"><div class=\"hs__title\"><strong>ID3 algorithm (TL;DR;)</strong></div><div class=\"hs__content\"><ol>\n<li>\n<p>To check the disorder at current node (let's say <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span>, parent node), we calculate its <strong>entropy</strong> with,</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>H</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mo>−</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mn>2</mn></munderover><msub><mi>p</mi><mrow><mi>S</mi><mo separator=\"true\">,</mo><mi>i</mi></mrow></msub><msub><mo><mi>log</mi><mo>⁡</mo></mo><mn>2</mn></msub><msub><mi>p</mi><mrow><mi>S</mi><mo separator=\"true\">,</mo><mi>i</mi></mrow></msub><mo separator=\"true\">,</mo></mrow><annotation encoding=\"application/x-tex\">\n\tH(S) = -\\sum_{i=1}^{2} p_{S,i} \\log_2 p_{S,i},\n\t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.0787820000000004em;vertical-align:-1.277669em;\"></span><span class=\"mord\">−</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8011130000000004em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.328331em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.20696799999999996em;\"><span style=\"top:-2.4558600000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24414em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.328331em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span></span></span></span></span></eqn></section></math>\n<p>where <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>∈</mo></mrow><annotation encoding=\"application/x-tex\">i \\in</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69862em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span></span></span></span></span> the number of classes and <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>p</mi><mrow><mi>S</mi><mo separator=\"true\">,</mo><mi>i</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">p_{S,i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.716668em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.328331em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span></span> is the probability of class <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span></span> in <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span>.</p>\n</li>\n<li>\n<p>If entropy at this node is <strong>pure</strong> (there is only 1 class or the majority is 1 class) or it meets <a href=\"#when-to-stop\">the stopping conditions</a>, we stop splitting at this node. Otherwise, go to the next step.</p>\n</li>\n<li>\n<p>Calculate the <strong>information gain</strong> (IG) after splitting node <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span> on each attribute (for example, consider attribute <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi></mrow><annotation encoding=\"application/x-tex\">O</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span></span></span></span></span>). The attribute w.r.t. the <mark>biggest IG</mark> will be chosen!</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><munder><munder><mrow><mi>I</mi><mi>G</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><mi>O</mi><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"true\">⏟</mo></munder><mtext>information gain</mtext></munder><mo>=</mo><munder><munder><mrow><mi>H</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"true\">⏟</mo></munder><mtext>entropy before split</mtext></munder><mo>−</mo><munder><munder><mrow><munder><mo>∑</mo><mi>j</mi></munder><mi>P</mi><mo stretchy=\"false\">(</mo><msub><mi>O</mi><mi>j</mi></msub><mi mathvariant=\"normal\">∣</mi><mi>S</mi><mo stretchy=\"false\">)</mo><mo>×</mo><mi>H</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><msub><mi>O</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"true\">⏟</mo></munder><mtext>weighted entropy after split</mtext></munder></mrow><annotation encoding=\"application/x-tex\">\\underbrace{IG(S,O)}_{\\text{information gain}} = \\underbrace{H(S)}_{\\text{entropy before split}} - \\underbrace{\\sum_j P(O_j | S) \\times H(S,O_j)}_{\\text{weighted entropy after split}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.4702159999999997em;vertical-align:-1.720216em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.75em;\"><span style=\"top:-1.415892em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">information gain</span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.75em;\"><span class=\"svg-align\" style=\"top:-2.102em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"stretchy\" style=\"height:0.548em;min-width:1.6em;\"><span class=\"brace-left\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMinYMin slice'><path d='M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z'/></svg></span><span class=\"brace-center\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMidYMin slice'><path d='M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z'/></svg></span><span class=\"brace-right\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMaxYMin slice'><path d='M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z'/></svg></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathnormal\">G</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.898em;\"><span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.720216em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.4702159999999997em;vertical-align:-1.720216em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.75em;\"><span style=\"top:-1.415892em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">entropy before split</span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.75em;\"><span class=\"svg-align\" style=\"top:-2.102em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"stretchy\" style=\"height:0.548em;min-width:1.6em;\"><span class=\"brace-left\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMinYMin slice'><path d='M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z'/></svg></span><span class=\"brace-center\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMidYMin slice'><path d='M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z'/></svg></span><span class=\"brace-right\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMaxYMin slice'><path d='M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z'/></svg></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.898em;\"><span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.720216em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.9339980000000003em;vertical-align:-2.8839930000000003em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.050005em;\"><span style=\"top:-0.30211999999999983em;\"><span class=\"pstrut\" style=\"height:3.050005em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">weighted entropy after split</span></span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.050005em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.050005em;\"><span class=\"svg-align\" style=\"top:-0.9882279999999999em;\"><span class=\"pstrut\" style=\"height:3.050005em;\"></span><span class=\"stretchy\" style=\"height:0.548em;min-width:1.6em;\"><span class=\"brace-left\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMinYMin slice'><path d='M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z'/></svg></span><span class=\"brace-center\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMidYMin slice'><path d='M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z'/></svg></span><span class=\"brace-right\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMaxYMin slice'><path d='M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z'/></svg></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.050005em;\"></span><span class=\"mord\"><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.050005em;\"><span style=\"top:-1.8723309999999997em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span><span style=\"top:-3.0500049999999996em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.413777em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.061777em;\"><span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.8839930000000003em;\"><span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n<p>where <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>j</mi><mo>∈</mo></mrow><annotation encoding=\"application/x-tex\">j \\in</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05724em;\">j</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span></span></span></span></span> number of different properties in <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi></mrow><annotation encoding=\"application/x-tex\">O</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span></span></span></span></span> and <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>P</mi><mo stretchy=\"false\">(</mo><msub><mi>O</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">P(O_j)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span> is the propability of property <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>O</mi><mi>j</mi></msub></mrow><annotation encoding=\"application/x-tex\">O_j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.969438em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span></span> in <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi></mrow><annotation encoding=\"application/x-tex\">O</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span></span></span></span></span>.</p>\n</li>\n<li>\n<p>After splitting, we have new child nodes. Each of them becomes a new parent node in the next step. Go back to step 1.</p>\n</li>\n</ol>\n</div></div>\n<div class=\"hsbox\"><div class=\"hs__title\"><strong>ID3 algorithm in detail</strong></div><div class=\"hs__content\"><p>How we know we can split the dataset <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span> base on the <strong>Outlook attribute</strong> instead of the others (<em>Temperature, Humidity, Windy</em>)? <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding=\"application/x-tex\">\\Rightarrow</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">⇒</span></span></span></span></span> We calculate the <strong>information gain</strong> after splitting <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span> on each attribute. <em>It’s the information which can increase the level of certainty after splitting</em>. The <strong>highest one</strong> will be chosen (after this section, you will see that the Outlook attribute has the highest information gain).</p>\n<p>In order to calculate the information gain, we need &quot;<strong>entropy</strong>&quot; which is <em>the amount of information disorder or the amount of randomness in the data</em>.</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mtext>information gain</mtext><mo>=</mo><mtext>entropy before split</mtext><mo>−</mo><mtext>weighted entropy after split</mtext></mrow><annotation encoding=\"application/x-tex\">\n\\text{information gain} = \\text{entropy before split} - \\text{weighted entropy after split}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord text\"><span class=\"mord\">information gain</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord text\"><span class=\"mord\">entropy before split</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord text\"><span class=\"mord\">weighted entropy after split</span></span></span></span></span></span></eqn></section></math>\n<p>At the beginning, <code>entropy before split</code> (<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">H(S)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span></span></span></span></span>) shows us the disorder status of the whole dataset <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span>. If <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span> contains only <code>Yes</code>, <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span> has no disorder or it's <strong>pure</strong> (<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mn>0</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">H(S)=0)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">0</span><span class=\"mclose\">)</span></span></span></span></span>. If the amount of <code>Yes</code> and <code>No</code> in <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span> is equal, <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span> has the highest disorder (<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">H(S)=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></span>).</p>\n<p><img src=\"/img/post/ML/random-forest-decision-tree/f6.jpg\" alt=\"Illustration of entropy with different proportions of Yes/No in S.\" class=\"img-full-80\"><br>\n<em>An illustration of entropy with different proportions of Yes/No in <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span>.</em></p>\n<p>At each node, we need to calculate again its entropy (corresponding to the number of <code>Yes</code> and <code>No</code> in this node.). We prefer <strong>the lowest entropy</strong>, of course! How can we calculate entropy of each node? More specifically, how to calculate <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">H(S)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span></span></span></span></span>?</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>H</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mo>−</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mn>2</mn></munderover><msub><mi>p</mi><mrow><mi>S</mi><mo separator=\"true\">,</mo><mi>i</mi></mrow></msub><msub><mo><mi>log</mi><mo>⁡</mo></mo><mn>2</mn></msub><msub><mi>p</mi><mrow><mi>S</mi><mo separator=\"true\">,</mo><mi>i</mi></mrow></msub><mo separator=\"true\">,</mo></mrow><annotation encoding=\"application/x-tex\">\nH(S) = -\\sum_{i=1}^{2} p_{S,i} \\log_2 p_{S,i},\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.0787820000000004em;vertical-align:-1.277669em;\"></span><span class=\"mord\">−</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8011130000000004em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.328331em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.20696799999999996em;\"><span style=\"top:-2.4558600000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24414em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.328331em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span></span></span></span></span></eqn></section></math>\n<p>where <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>∈</mo></mrow><annotation encoding=\"application/x-tex\">i \\in</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69862em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span></span></span></span></span> the number of classes (node <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span> has 2 classes, <code>Yes</code> and <code>No</code>), <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>p</mi><mrow><mi>S</mi><mo separator=\"true\">,</mo><mi>i</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">p_{S,i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.716668em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.328331em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span></span> is the probability of class <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span></span> in <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span>.</p>\n<p><img src=\"/img/post/ML/random-forest-decision-tree/f11.svg\" alt=\"Graph of H(S) in the case there are 2 classes.\" class=\"img-full-45 bg-white\"><br>\n<em>Graph of <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><mo stretchy=\"false\">(</mo><mi>p</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">H(p)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">p</span><span class=\"mclose\">)</span></span></span></span></span> in the case of 2 classes. Max is 1.</em></p>\n<div class=\"warning\">\n<p>In this case we use <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mo><mi>log</mi><mo>⁡</mo></mo><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\log_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.93858em;vertical-align:-0.24414em;\"></span><span class=\"mop\"><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.20696799999999996em;\"><span style=\"top:-2.4558600000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24414em;\"><span></span></span></span></span></span></span></span></span></span></span> (binary logarithm) to obtain the maximum <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">H(S)=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></span> and we also use a convention in which <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn><mo>×</mo><msub><mo><mi>log</mi><mo>⁡</mo></mo><mn>2</mn></msub><mo stretchy=\"false\">(</mo><mn>0</mn><mo stretchy=\"false\">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0\\times\\log_2(0)=0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.20696799999999996em;\"><span style=\"top:-2.4558600000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24414em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\">0</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></span>. There are other documents using <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>log</mi><mo>⁡</mo></mrow><annotation encoding=\"application/x-tex\">\\log</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span></span></span></span></span> (natural logarithm) instead.</p>\n</div>\n<div class=\"columns-2\">\n<div>\n<p>On node <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span> , we have,</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>H</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mi>H</mi><mo stretchy=\"false\">(</mo><mo stretchy=\"false\">[</mo><mn>9</mn><mo separator=\"true\">,</mo><mn>5</mn><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mo>−</mo><mfrac><mn>9</mn><mn>14</mn></mfrac><mo>×</mo><msub><mo><mi>log</mi><mo>⁡</mo></mo><mn>2</mn></msub><mo stretchy=\"false\">(</mo><mfrac><mn>9</mn><mn>14</mn></mfrac><mo stretchy=\"false\">)</mo><mo>−</mo><mfrac><mn>5</mn><mn>14</mn></mfrac><mo>×</mo><msub><mo><mi>log</mi><mo>⁡</mo></mo><mn>2</mn></msub><mo stretchy=\"false\">(</mo><mfrac><mn>5</mn><mn>14</mn></mfrac><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mn>0.94.</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\n\\begin{aligned}\nH(S) &amp;= H([9,5]) \\\\\n&amp;= -\\frac{9}{14} \\times \\log_2(\\frac{9}{14}) - \\frac{5}{14}\\times\\log_2(\\frac{5}{14})\\\\\n&amp;= 0.94.\n\\end{aligned}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:5.30744em;vertical-align:-2.4037200000000003em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.90372em;\"><span style=\"top:-5.38516em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span></span></span><span style=\"top:-3.4037200000000003em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"></span></span><span style=\"top:-1.5777199999999998em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.4037200000000003em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.90372em;\"><span style=\"top:-5.38516em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mopen\">[</span><span class=\"mord\">9</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">5</span><span class=\"mclose\">]</span><span class=\"mclose\">)</span></span></span><span style=\"top:-3.4037200000000003em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">−</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">4</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">9</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mop\"><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.20696799999999996em;\"><span style=\"top:-2.4558600000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24414em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">4</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">9</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">4</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">5</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mop\"><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.20696799999999996em;\"><span style=\"top:-2.4558600000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24414em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">4</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">5</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\">)</span></span></span><span style=\"top:-1.5777199999999998em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">9</span><span class=\"mord\">4</span><span class=\"mord\">.</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.4037200000000003em;\"><span></span></span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n<p>We see that, <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span> is not pure but it's also not totally disordered.</p>\n</div>\n<p><img src=\"/img/post/ML/random-forest-decision-tree/f1.jpg\" alt=\"The frequency of classes in S\" class=\"img-100\"><br>\n<em>The frequency of classes in S.</em></p>\n</div>\n<p>Because we are considering to split <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span> on <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi></mrow><annotation encoding=\"application/x-tex\">O</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span></span></span></span></span> (Outlook) and <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi></mrow><annotation encoding=\"application/x-tex\">O</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span></span></span></span></span> has 3 different properties which are <em>Sunny, Overcast</em> and <em>Rainy</em>. Corresponding to these properties, we have different sizes of <code>Yes</code>/<code>No</code> (Different nodes having different sizes of data but their total is equal to the size of <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span> which is their &quot;parent&quot; node.). That's why we need to calculate the <strong>weighted entropy</strong> (<code>weighted entropy after split</code>).</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mn>3</mn></munderover><mi>P</mi><mo stretchy=\"false\">(</mo><msub><mi>O</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo><mo>×</mo><mi>H</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><msub><mi>O</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo></mrow><annotation encoding=\"application/x-tex\">\n\\sum_{j=1}^3 P(O_j) \\times H(S,O_j),\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:3.2148900000000005em;vertical-align:-1.4137769999999998em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8011130000000004em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.4137769999999998em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span></span></span></span></span></eqn></section></math>\n<p>where <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>j</mi><mo>∈</mo></mrow><annotation encoding=\"application/x-tex\">j \\in</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05724em;\">j</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span></span></span></span></span> number of different properties in <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi></mrow><annotation encoding=\"application/x-tex\">O</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span></span></span></span></span> and <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>P</mi><mo stretchy=\"false\">(</mo><msub><mi>O</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">P(O_j)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span> is the propability of property <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>O</mi><mi>j</mi></msub></mrow><annotation encoding=\"application/x-tex\">O_j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.969438em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span></span> in <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi></mrow><annotation encoding=\"application/x-tex\">O</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span></span></span></span></span>. Therefore, the information gain if split <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span> on <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi></mrow><annotation encoding=\"application/x-tex\">O</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span></span></span></span></span> is,</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>I</mi><mi>G</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><mi>O</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>H</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo><mo>−</mo><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mn>3</mn></munderover><mi>P</mi><mo stretchy=\"false\">(</mo><msub><mi>O</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo><mo>×</mo><mi>H</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><msub><mi>O</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">.</mi></mrow><annotation encoding=\"application/x-tex\">\nIG(S,O) = H(S) - \\sum_{j=1}^3 P(O_j) \\times H(S,O_j).\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathnormal\">G</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.2148900000000005em;vertical-align:-1.4137769999999998em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8011130000000004em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.4137769999999998em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mord\">.</span></span></span></span></span></eqn></section></math>\n<p><img src=\"/img/post/ML/random-forest-decision-tree/f2.jpg\" alt=\"If we split S in O?\" class=\"img-100 pop\"><br>\n<em>If we split S on Outlook (O), there will be 3 branches.</em></p>\n<p>For example, we consider branch <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>O</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">O_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> (Sunny), it has <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>P</mi><mo stretchy=\"false\">(</mo><msub><mi>O</mi><mn>1</mn></msub><mo stretchy=\"false\">)</mo><mo>=</mo><mfrac><mn>5</mn><mn>14</mn></mfrac></mrow><annotation encoding=\"application/x-tex\">P(O_1)=\\frac{5}{14}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.190108em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mord mtight\">4</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">5</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span> and entropy at this node, <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><msub><mi>O</mi><mn>1</mn></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">H(S,O_1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span> is calculated as</p>\n<div class=\"columns-2\">\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>H</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><msub><mi>O</mi><mn>1</mn></msub><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mi>H</mi><mo stretchy=\"false\">(</mo><mo stretchy=\"false\">[</mo><mn>2</mn><mo separator=\"true\">,</mo><mn>3</mn><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mo>−</mo><mfrac><mn>2</mn><mn>5</mn></mfrac><mo>×</mo><msub><mo><mi>log</mi><mo>⁡</mo></mo><mn>2</mn></msub><mo stretchy=\"false\">(</mo><mfrac><mn>2</mn><mn>5</mn></mfrac><mo stretchy=\"false\">)</mo><mo>−</mo><mfrac><mn>3</mn><mn>5</mn></mfrac><mo>×</mo><msub><mo><mi>log</mi><mo>⁡</mo></mo><mn>2</mn></msub><mo stretchy=\"false\">(</mo><mfrac><mn>3</mn><mn>5</mn></mfrac><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mn>0.97.</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\n\\begin{aligned}\nH(S,O_1) &amp;= H([2,3]) \\\\\n&amp;= -\\frac{2}{5} \\times \\log_2(\\frac{2}{5}) - \\frac{3}{5}\\times\\log_2(\\frac{3}{5})\\\\\n&amp;= 0.97.\n\\end{aligned}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:5.30744em;vertical-align:-2.4037200000000003em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.90372em;\"><span style=\"top:-5.38516em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span><span style=\"top:-3.4037200000000003em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"></span></span><span style=\"top:-1.5777199999999998em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.4037200000000003em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.90372em;\"><span style=\"top:-5.38516em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mopen\">[</span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">3</span><span class=\"mclose\">]</span><span class=\"mclose\">)</span></span></span><span style=\"top:-3.4037200000000003em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">−</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">5</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mop\"><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.20696799999999996em;\"><span style=\"top:-2.4558600000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24414em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">5</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">5</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mop\"><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.20696799999999996em;\"><span style=\"top:-2.4558600000000004em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24414em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">5</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\">)</span></span></span><span style=\"top:-1.5777199999999998em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">9</span><span class=\"mord\">7</span><span class=\"mord\">.</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.4037200000000003em;\"><span></span></span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n<p><img src=\"/img/post/ML/random-forest-decision-tree/f3.jpg\" alt=\"Only consider O1\" class=\"img-100\"><br>\n<em>Only consider branch Sunny (<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>O</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">O_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>).</em></p>\n</div>\n<p>Thus, the information gain after splitting <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span> on <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi></mrow><annotation encoding=\"application/x-tex\">O</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span></span></span></span></span> is,</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>I</mi><mi>G</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><mi>O</mi><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mi>H</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo><mo>−</mo><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mn>3</mn></munderover><mi>P</mi><mo stretchy=\"false\">(</mo><msub><mi>O</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo><mo>×</mo><mi>H</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><msub><mi>O</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mn>0.94</mn><mo>−</mo><mo stretchy=\"false\">(</mo><mfrac><mn>5</mn><mn>14</mn></mfrac><mo>×</mo><mn>0.971</mn><mo>+</mo><mfrac><mn>4</mn><mn>14</mn></mfrac><mo>×</mo><mn>0</mn><mo>+</mo><mfrac><mn>5</mn><mn>14</mn></mfrac><mo>×</mo><mn>0.971</mn><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mn>0.94</mn><mo>−</mo><mn>0.693</mn><mo>=</mo><mn>0.247.</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\n\\begin{aligned}\nIG(S,O) &amp;= H(S) - \\sum_{j=1}^3 P(O_j) \\times H(S,O_j) \\\\\n&amp;= 0.94 - (\\frac{5}{14}\\times 0.971 + \\frac{4}{14}\\times 0 + \\frac{5}{14}\\times 0.971) \\\\\n&amp;= 0.94 - 0.693 = 0.247.\n\\end{aligned}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:7.322330000000001em;vertical-align:-3.4111650000000004em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.911165em;\"><span style=\"top:-5.9111650000000004em;\"><span class=\"pstrut\" style=\"height:3.8011130000000004em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathnormal\">G</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mclose\">)</span></span></span><span style=\"top:-2.8759479999999997em;\"><span class=\"pstrut\" style=\"height:3.8011130000000004em;\"></span><span class=\"mord\"></span></span><span style=\"top:-1.049948em;\"><span class=\"pstrut\" style=\"height:3.8011130000000004em;\"></span><span class=\"mord\"></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.4111650000000004em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.911165em;\"><span style=\"top:-5.9111650000000004em;\"><span class=\"pstrut\" style=\"height:3.8011130000000004em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8011130000000004em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.4137769999999998em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span><span style=\"top:-2.8759479999999997em;\"><span class=\"pstrut\" style=\"height:3.8011130000000004em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">9</span><span class=\"mord\">4</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">4</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">5</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">9</span><span class=\"mord\">7</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">4</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">4</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">4</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">5</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">9</span><span class=\"mord\">7</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span><span style=\"top:-1.049948em;\"><span class=\"pstrut\" style=\"height:3.8011130000000004em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">9</span><span class=\"mord\">4</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">6</span><span class=\"mord\">9</span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">2</span><span class=\"mord\">4</span><span class=\"mord\">7</span><span class=\"mord\">.</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.4111650000000004em;\"><span></span></span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n<p>With the same method, we can calculate the information gain after splitting <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span> on other attributes (Temperature, Windy, Humidity) and get,</p>\n<p><img src=\"/img/post/ML/random-forest-decision-tree/dt-4.jpg\" alt=\"Dataset is split into different ways.\" class=\"img-full-75 pop\"><br>\n<em>Dataset is split into different ways.</em></p>\n<p>We can see that, the winner is <strong>Outlook</strong> with <strong>the highest information gain</strong>. We split <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span> on that attribute first!</p>\n<p><img src=\"/img/post/ML/random-forest-decision-tree/f9.jpg\" alt=\"Data is split on Outlook.\" class=\"img-100 pop\"><br>\n<em>Dataset is split on Outlook.</em></p>\n<p>How about 3 others remaining attributes (Temperature, Humidity, Windy), which one to be chosen next? Especially on branches Suuny and Humidity because on branch Overcast, this node is pure (all are <code>Yes</code>), we don't need to split any more.</p>\n<p><img src=\"/img/post/ML/random-forest-decision-tree/f10.jpg\" alt=\"Which attribute will be chosen next?\" class=\"img-full-50\"><br>\n<em>There are remaining Temperature, Humidity, Windy. Which attribute will be chosen next?</em></p>\n<p>We repeat the steps again, for example, on the branch <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>O</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">O_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> (Sunny), we calculate IG after splitting <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>O</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">O_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> on each attribute Temperature (T), Humidity (H) or Windy (W). Other words, we need to calculate <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>I</mi><mi>G</mi><mo stretchy=\"false\">(</mo><msub><mi>O</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mi>T</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">IG(O_1,T)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathnormal\">G</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span></span></span></span></span>, <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>I</mi><mi>G</mi><mo stretchy=\"false\">(</mo><msub><mi>O</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mi>H</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">IG(O_1, H)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathnormal\">G</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mclose\">)</span></span></span></span></span> and <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>I</mi><mi>G</mi><mo stretchy=\"false\">(</mo><msub><mi>O</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mi>W</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">IG(O_1, W)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathnormal\">G</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mclose\">)</span></span></span></span></span> and then compare them to find the best one. Let's consider <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi></mrow><annotation encoding=\"application/x-tex\">H</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span></span></span></span></span> (Humidity) as an example,</p>\n<div class=\"columns-2\">\n<div>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>I</mi><mi>G</mi><mo stretchy=\"false\">(</mo><msub><mi>O</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mi>H</mi><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mi>H</mi><mo stretchy=\"false\">(</mo><msub><mi>O</mi><mn>1</mn></msub><mo stretchy=\"false\">)</mo><mo>−</mo><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mn>2</mn></munderover><mi>P</mi><mo stretchy=\"false\">(</mo><msub><mi>H</mi><mi>j</mi></msub><mi mathvariant=\"normal\">∣</mi><msub><mi>O</mi><mn>1</mn></msub><mo stretchy=\"false\">)</mo><mo>×</mo><mi>H</mi><mo stretchy=\"false\">(</mo><msub><mi>O</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>H</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mi>H</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><msub><mi>O</mi><mn>1</mn></msub><mo stretchy=\"false\">)</mo><mo>−</mo><mfrac><mn>3</mn><mn>5</mn></mfrac><mo>×</mo><mn>0</mn><mo>−</mo><mfrac><mn>2</mn><mn>5</mn></mfrac><mo>×</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mn>0.971.</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\n\\begin{aligned}\nIG(O_1,H) &amp;= H(O_1) - \\sum_{j=1}^2 P(H_j|O_1) \\times H(O_1,H_j) \\\\\n&amp;= H(S,O_1) - \\frac{3}{5}\\times 0 - \\frac{2}{5} \\times 0 \\\\\n&amp;= 0.971.\n\\end{aligned}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:7.322330000000001em;vertical-align:-3.4111650000000004em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.911165em;\"><span style=\"top:-5.9111650000000004em;\"><span class=\"pstrut\" style=\"height:3.8011130000000004em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathnormal\">G</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mclose\">)</span></span></span><span style=\"top:-2.8759479999999997em;\"><span class=\"pstrut\" style=\"height:3.8011130000000004em;\"></span><span class=\"mord\"></span></span><span style=\"top:-1.049948em;\"><span class=\"pstrut\" style=\"height:3.8011130000000004em;\"></span><span class=\"mord\"></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.4111650000000004em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.911165em;\"><span style=\"top:-5.9111650000000004em;\"><span class=\"pstrut\" style=\"height:3.8011130000000004em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8011130000000004em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.4137769999999998em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span><span style=\"top:-2.8759479999999997em;\"><span class=\"pstrut\" style=\"height:3.8011130000000004em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">5</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">5</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\">0</span></span></span><span style=\"top:-1.049948em;\"><span class=\"pstrut\" style=\"height:3.8011130000000004em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">9</span><span class=\"mord\">7</span><span class=\"mord\">1</span><span class=\"mord\">.</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.4111650000000004em;\"><span></span></span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n<p>Nodes <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>W</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">W_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> and <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>W</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">W_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> are pure, that's why their entropy are <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></span>.</p>\n</div>\n<p><img src=\"/img/post/ML/random-forest-decision-tree/f4.jpg\" alt=\"Consider branch O1 and attribute W\" class=\"img-full-75\"><br>\n<em>Consider branch <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>O</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">O_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> and attribute Windy (W).</em></p>\n</div>\n<p>Similarly, we calculate <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>I</mi><mi>G</mi><mo stretchy=\"false\">(</mo><msub><mi>O</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mi>T</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">IG(O_1,T)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathnormal\">G</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span></span></span></span></span>, <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>I</mi><mi>G</mi><mo stretchy=\"false\">(</mo><msub><mi>O</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mi>H</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">IG(O_1,H)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathnormal\">G</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mclose\">)</span></span></span></span></span> and we see that <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>I</mi><mi>G</mi><mo stretchy=\"false\">(</mo><msub><mi>O</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mi>W</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">IG(O_1,W)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathnormal\">G</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mclose\">)</span></span></span></span></span> is the biggest one! So we choose <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>W</mi></mrow><annotation encoding=\"application/x-tex\">W</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span></span></span></span></span> (Windy) to split at node <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>O</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">O_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>. On the branch <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>O</mi><mn>3</mn></msub></mrow><annotation encoding=\"application/x-tex\">O_3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> (Rainy), the biggest information gain after splitting is on <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi></mrow><annotation encoding=\"application/x-tex\">H</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span></span></span></span></span> (Humidity).</p>\n<p><img src=\"/img/post/ML/random-forest-decision-tree/dt-1.jpg\" alt=\"Example of dataset\" class=\"img-100 pop\"></p>\n<p>From now, if we have a new input which contains information about <em>Outlook, Temperature, Humidity</em> and <em>Windy</em>, we go from the top of the tree and choose an appropriate branch to get the decision <code>Yes</code> or <code>No</code>.</p>\n</div></div>\n<h3 id=\"cart-algorithm\">CART algorithm <a class=\"direct-link\" href=\"#cart-algorithm\">#</a></h3>\n<div class=\"hsbox\"><div class=\"hs__title\"><strong>CART algorithm (TL;DR;)</strong></div><div class=\"hs__content\"><div class=\"warning\">\n<p>The difference between two algorithms is the difference between <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">H(S)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span></span></span></span></span> and <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>I</mi><mi>G</mi></msub><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">I_G(S)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">G</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span></span></span></span></span>.</p>\n</div>\n<ol>\n<li>\n<p>To check the disorder at current node (let's say <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span>, parent node), we calculate its <strong>Giny Impurity</strong> with,</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>I</mi><mi>G</mi></msub><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mn>2</mn></munderover><msub><mi>p</mi><mrow><mi>S</mi><mo separator=\"true\">,</mo><mi>i</mi></mrow></msub><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><msub><mi>p</mi><mrow><mi>S</mi><mo separator=\"true\">,</mo><mi>i</mi></mrow></msub><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo></mrow><annotation encoding=\"application/x-tex\">I_G(S) = \\sum_{i=1}^{2} p_{S,i}(1-p_{S,i}),</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">G</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.0787820000000004em;vertical-align:-1.277669em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8011130000000004em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.328331em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.328331em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span></span></span></span></span></eqn></section></math>\n<p>where <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>∈</mo></mrow><annotation encoding=\"application/x-tex\">i \\in</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69862em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span></span></span></span></span> the number of classes in <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span> and <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>p</mi><mrow><mi>S</mi><mo separator=\"true\">,</mo><mi>i</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">p_{S,i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.716668em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.328331em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span></span> is the probability of class <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span></span> in <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span>.</p>\n</li>\n<li>\n<p>If entropy at this node is <strong>pure</strong> (there is only 1 class or the majority is 1 class) or it meets <a href=\"#when-to-stop\">the stopping conditions</a>, we stop splitting at this node. Otherwise, go to the next step.</p>\n</li>\n<li>\n<p>Calculate the <strong>Gini Gain</strong> (GG) after splitting node <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span> on each attribute (for example, consider attribute <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi></mrow><annotation encoding=\"application/x-tex\">O</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span></span></span></span></span>). The attribute w.r.t. the <mark>biggest GG</mark> will be chosen!</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><munder><munder><mrow><mi>G</mi><mi>G</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><mi>O</mi><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"true\">⏟</mo></munder><mtext>gini gain</mtext></munder><mo>=</mo><munder><munder><mrow><msub><mi>I</mi><mi>G</mi></msub><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"true\">⏟</mo></munder><mtext>gini impurity before split</mtext></munder><mo>−</mo><munder><munder><mrow><munder><mo>∑</mo><mi>j</mi></munder><mi>P</mi><mo stretchy=\"false\">(</mo><msub><mi>O</mi><mi>j</mi></msub><mi mathvariant=\"normal\">∣</mi><mi>S</mi><mo stretchy=\"false\">)</mo><mo>×</mo><msub><mi>I</mi><mi>G</mi></msub><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><msub><mi>O</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"true\">⏟</mo></munder><mtext>weighted gini impurity after split</mtext></munder></mrow><annotation encoding=\"application/x-tex\">\\underbrace{GG(S,O)}_{\\text{gini gain}} = \\underbrace{I_G(S)}_{\\text{gini impurity before split}} - \\underbrace{\\sum_j P(O_j | S) \\times I_G(S,O_j)}_{\\text{weighted gini impurity after split}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.45161em;vertical-align:-1.7016099999999998em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7500000000000002em;\"><span style=\"top:-1.434498em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">gini gain</span></span></span></span></span><span style=\"top:-3.0000000000000004em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.75em;\"><span class=\"svg-align\" style=\"top:-2.102em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"stretchy\" style=\"height:0.548em;min-width:1.6em;\"><span class=\"brace-left\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMinYMin slice'><path d='M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z'/></svg></span><span class=\"brace-center\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMidYMin slice'><path d='M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z'/></svg></span><span class=\"brace-right\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMaxYMin slice'><path d='M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z'/></svg></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"mord mathnormal\">G</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.898em;\"><span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.7016099999999998em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.4702159999999997em;vertical-align:-1.720216em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.75em;\"><span style=\"top:-1.415892em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">gini impurity before split</span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.75em;\"><span class=\"svg-align\" style=\"top:-2.102em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"stretchy\" style=\"height:0.548em;min-width:1.6em;\"><span class=\"brace-left\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMinYMin slice'><path d='M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z'/></svg></span><span class=\"brace-center\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMidYMin slice'><path d='M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z'/></svg></span><span class=\"brace-right\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMaxYMin slice'><path d='M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z'/></svg></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">G</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.898em;\"><span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.720216em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.9339980000000003em;vertical-align:-2.8839930000000003em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.050005em;\"><span style=\"top:-0.30211999999999983em;\"><span class=\"pstrut\" style=\"height:3.050005em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">weighted gini impurity after split</span></span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.050005em;\"></span><span class=\"mord munder\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.050005em;\"><span class=\"svg-align\" style=\"top:-0.9882279999999999em;\"><span class=\"pstrut\" style=\"height:3.050005em;\"></span><span class=\"stretchy\" style=\"height:0.548em;min-width:1.6em;\"><span class=\"brace-left\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMinYMin slice'><path d='M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z'/></svg></span><span class=\"brace-center\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMidYMin slice'><path d='M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z'/></svg></span><span class=\"brace-right\" style=\"height:0.548em;\"><svg width='400em' height='0.548em' viewBox='0 0 400000 548' preserveAspectRatio='xMaxYMin slice'><path d='M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z'/></svg></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.050005em;\"></span><span class=\"mord\"><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.050005em;\"><span style=\"top:-1.8723309999999997em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span><span style=\"top:-3.0500049999999996em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.413777em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">G</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.061777em;\"><span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.8839930000000003em;\"><span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n<p>where <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>j</mi><mo>∈</mo></mrow><annotation encoding=\"application/x-tex\">j \\in</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05724em;\">j</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span></span></span></span></span> number of different properties in <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi></mrow><annotation encoding=\"application/x-tex\">O</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span></span></span></span></span> and <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>P</mi><mo stretchy=\"false\">(</mo><msub><mi>O</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">P(O_j)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span> is the propability of property <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>O</mi><mi>j</mi></msub></mrow><annotation encoding=\"application/x-tex\">O_j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.969438em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span></span> in <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi></mrow><annotation encoding=\"application/x-tex\">O</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span></span></span></span></span>.</p>\n</li>\n<li>\n<p>After splitting, we have new child nodes. Each of them becomes a new parent node in the next step. Go back to step 1.</p>\n</li>\n</ol>\n</div></div>\n<div class=\"hsbox\"><div class=\"hs__title\"><strong>CART algorithm in detail</strong></div><div class=\"hs__content\"><p>It's quite the same to the ID3 algorithm except a truth that it's based on the definition of <strong>Gini impurity</strong> instead of <strong>Entropy</strong>. <em>Gini impurity is a measure of how often a randomly chosen element from the set would be incorrectly labeled if it was randomly labeled according to the distribution of labels in the subset.</em></p>\n<p>At every nonleaf node (which isn't pure), we have to answer a question &quot;<em>Which attribute we should choose to split that node?</em>&quot; We calculate the <strong>Gini gain</strong> for each split based on the attribute we are going to use. This <em>Gini gain</em> is quite the same as <em>Information gain</em>. The highest one will be chosen.</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mtext>gini gain</mtext><mo>=</mo><mtext>gini impurity before split</mtext><mo>−</mo><mtext>weighted gini impurity after split</mtext></mrow><annotation encoding=\"application/x-tex\">\n\\text{gini gain} = \\text{gini impurity before split} - \\text{weighted gini impurity after split}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8623000000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord text\"><span class=\"mord\">gini gain</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord text\"><span class=\"mord\">gini impurity before split</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord text\"><span class=\"mord\">weighted gini impurity after split</span></span></span></span></span></span></eqn></section></math>\n<p>The <strong>Gini Impurity</strong> at node <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span> is calculated as,</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>I</mi><mi>G</mi></msub><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mn>2</mn></munderover><msub><mi>p</mi><mrow><mi>S</mi><mo separator=\"true\">,</mo><mi>i</mi></mrow></msub><mo stretchy=\"false\">(</mo><mn>1</mn><mo>−</mo><msub><mi>p</mi><mrow><mi>S</mi><mo separator=\"true\">,</mo><mi>i</mi></mrow></msub><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo></mrow><annotation encoding=\"application/x-tex\">\nI_G(S) = \\sum_{i=1}^2p_{S,i}(1-p_{S,i}),\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">G</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.0787820000000004em;vertical-align:-1.277669em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8011130000000004em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.328331em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.328331em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span></span></span></span></span></eqn></section></math>\n<p>where <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>∈</mo></mrow><annotation encoding=\"application/x-tex\">i\\in</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69862em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span></span></span></span></span> the number of classes in <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span>, <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>p</mi><mrow><mi>S</mi><mo separator=\"true\">,</mo><mi>i</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">p_{S,i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.716668em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.328331em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span></span> is the probability of class <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span></span> in <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span>. <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>I</mi><mi>G</mi></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">I_G=0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">G</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span></span> will be the best!</p>\n<div class=\"columns-2\">\n<div markdown=\"1\">\n<p>On node <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span>, we have,</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><msub><mi>I</mi><mi>G</mi></msub><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><msub><mi>I</mi><mi>G</mi></msub><mo stretchy=\"false\">(</mo><mo stretchy=\"false\">[</mo><mn>9</mn><mo separator=\"true\">,</mo><mn>5</mn><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mfrac><mn>9</mn><mn>14</mn></mfrac><mo>×</mo><mfrac><mn>5</mn><mn>14</mn></mfrac><mo>+</mo><mfrac><mn>5</mn><mn>14</mn></mfrac><mo>×</mo><mfrac><mn>9</mn><mn>14</mn></mfrac></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mn>0.459.</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\n\\begin{aligned}\nI_G(S) &amp;= I_G([9,5]) \\\\\n&amp;= \\frac{9}{14} \\times \\frac{5}{14} + \\frac{5}{14} \\times \\frac{9}{14}\\\\\n&amp;= 0.459.\n\\end{aligned}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:5.30744em;vertical-align:-2.4037200000000003em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.90372em;\"><span style=\"top:-5.38516em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">G</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span></span></span><span style=\"top:-3.4037200000000003em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"></span></span><span style=\"top:-1.5777199999999998em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.4037200000000003em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.90372em;\"><span style=\"top:-5.38516em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">G</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mopen\">[</span><span class=\"mord\">9</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">5</span><span class=\"mclose\">]</span><span class=\"mclose\">)</span></span></span><span style=\"top:-3.4037200000000003em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">4</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">9</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">4</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">5</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">4</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">5</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">4</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">9</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span><span style=\"top:-1.5777199999999998em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">4</span><span class=\"mord\">5</span><span class=\"mord\">9</span><span class=\"mord\">.</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.4037200000000003em;\"><span></span></span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n</div>\n<p><img src=\"/img/post/ML/random-forest-decision-tree/f1.jpg\" alt=\"The frequency of classes in S\" class=\"img-100\"><br>\n<em>The frequency of classes in S.</em></p>\n</div>\n<p>Similarly to the information gain, we can calculate <strong>Gini Gain</strong> (<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">GG</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord mathnormal\">G</span></span></span></span></span>) after splitting <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span> on the property <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi></mrow><annotation encoding=\"application/x-tex\">O</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span></span></span></span></span> with,</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>G</mi><mi>G</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><mi>O</mi><mo stretchy=\"false\">)</mo><mo>=</mo><msub><mi>I</mi><mi>G</mi></msub><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo><mo>−</mo><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mn>3</mn></munderover><mi>P</mi><mo stretchy=\"false\">(</mo><msub><mi>O</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo><mo>×</mo><msub><mi>I</mi><mi>G</mi></msub><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><msub><mi>O</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo></mrow><annotation encoding=\"application/x-tex\">\nGG(S,O) = I_G(S) - \\sum_{j=1}^3 P(O_j) \\times I_G(S,O_j),\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord mathnormal\">G</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">G</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.2148900000000005em;vertical-align:-1.4137769999999998em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8011130000000004em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.4137769999999998em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">G</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span></span></span></span></span></eqn></section></math>\n<p>where <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>j</mi><mo>∈</mo></mrow><annotation encoding=\"application/x-tex\">j \\in</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05724em;\">j</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span></span></span></span></span> number of different properties in <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi></mrow><annotation encoding=\"application/x-tex\">O</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span></span></span></span></span> and <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>P</mi><mo stretchy=\"false\">(</mo><msub><mi>O</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">P(O_j)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span> is the propability of property <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>O</mi><mi>j</mi></msub></mrow><annotation encoding=\"application/x-tex\">O_j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.969438em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span></span> in <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi></mrow><annotation encoding=\"application/x-tex\">O</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span></span></span></span></span>.</p>\n<p><img src=\"/img/post/ML/random-forest-decision-tree/f12.jpg\" alt=\"If we split S in O?\" class=\"img-100 pop\"><br>\n<em>If we split S on Outlook (O), there will be 3 branches.</em></p>\n<p>Apply above equation, we calculate all GG if splitting <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span> on each property and get,</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.24999999999999992em\" columnalign=\"right left\" columnspacing=\"0em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>G</mi><mi>G</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><mi>O</mi><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><msub><mi>I</mi><mi>G</mi></msub><mo stretchy=\"false\">(</mo><mo stretchy=\"false\">[</mo><mn>9</mn><mo separator=\"true\">,</mo><mn>5</mn><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">)</mo><mo>−</mo><mo stretchy=\"false\">(</mo><mfrac><mn>5</mn><mn>14</mn></mfrac><mo>×</mo><msub><mi>I</mi><mi>G</mi></msub><mo stretchy=\"false\">(</mo><mo stretchy=\"false\">[</mo><mn>2</mn><mo separator=\"true\">,</mo><mn>3</mn><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">)</mo><mo>+</mo><mfrac><mn>4</mn><mn>14</mn></mfrac><mo>×</mo><msub><mi>I</mi><mi>G</mi></msub><mo stretchy=\"false\">(</mo><mo stretchy=\"false\">[</mo><mn>4</mn><mo separator=\"true\">,</mo><mn>0</mn><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">)</mo><mo>+</mo><mfrac><mn>5</mn><mn>14</mn></mfrac><mo>×</mo><msub><mi>I</mi><mi>G</mi></msub><mo stretchy=\"false\">(</mo><mo stretchy=\"false\">[</mo><mn>3</mn><mo separator=\"true\">,</mo><mn>2</mn><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mrow></mrow><mo>=</mo><mo>…</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\n\\begin{aligned}\nGG(S,O) &amp;= I_G([9,5]) - ( \\frac{5}{14}\\times I_G([2,3]) + \\frac{4}{14}\\times I_G([4,0]) + \\frac{5}{14}\\times I_G([3,2])) \\\\\n&amp;= \\ldots\n\\end{aligned}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:3.8074400000000006em;vertical-align:-1.6537200000000003em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-r\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.1537200000000003em;\"><span style=\"top:-4.15372em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"mord mathnormal\">G</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mclose\">)</span></span></span><span style=\"top:-2.32772em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6537200000000003em;\"><span></span></span></span></span></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.1537200000000003em;\"><span style=\"top:-4.15372em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">G</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mopen\">[</span><span class=\"mord\">9</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">5</span><span class=\"mclose\">]</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">4</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">5</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">G</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mopen\">[</span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">3</span><span class=\"mclose\">]</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">4</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">4</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">G</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mopen\">[</span><span class=\"mord\">4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">0</span><span class=\"mclose\">]</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mord\">4</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">5</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">G</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mopen\">[</span><span class=\"mord\">3</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span><span class=\"mclose\">]</span><span class=\"mclose\">)</span><span class=\"mclose\">)</span></span></span><span style=\"top:-2.32772em;\"><span class=\"pstrut\" style=\"height:3.32144em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"minner\">…</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6537200000000003em;\"><span></span></span></span></span></span></span></span></span></span></span></span></eqn></section></math>\n<p>The same for <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mi>G</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><mi>H</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">GG(S,H)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord mathnormal\">G</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mclose\">)</span></span></span></span></span> (Humidity), <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mi>G</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><mi>T</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">GG(S,T)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord mathnormal\">G</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mclose\">)</span></span></span></span></span> (Temperature) and <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mi>G</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo separator=\"true\">,</mo><mi>W</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">GG(S,W)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord mathnormal\">G</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mclose\">)</span></span></span></span></span> (Windy). Keep going the same arguments as in the section <strong>ID3 in detail</strong>, we will get the final tree. The difference between two algorithms is the difference between <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">H(S)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span></span></span></span></span> and <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>I</mi><mi>G</mi></msub><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">I_G(S)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">G</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mclose\">)</span></span></span></span></span>.</p>\n</div></div>\n<h3 id=\"gini-impurity-or-entropy%3F\">Gini Impurity or Entropy? <a class=\"direct-link\" href=\"#gini-impurity-or-entropy%3F\">#</a></h3>\n<p>Some points:<sup><a href=\"https://books.google.fr/books/about/Hands_on_Machine_Learning_with_Scikit_Le.html?id=I6qkDAEACAAJ&amp;source=kp_book_description&amp;redir_esc=y\">[ref]</a></sup></p>\n<p class=\"indent\"></p>\n<ul>\n<li>Most of the time, they lead to similar trees.<sup><a href=\"https://www.unine.ch/files/live/sites/imi/files/shared/documents/papers/Gini_index_fulltext.pdf\">[ref]</a></sup></li>\n<li>Gini impurity is slightly faster.<sup><a href=\"https://www.unine.ch/files/live/sites/imi/files/shared/documents/papers/Gini_index_fulltext.pdf\">[ref]</a></sup></li>\n<li>Gini impurity tends to isolate the most frequent class in its own branch of the tree, while entropy tends to produce slightly more balanced trees.</li>\n</ul>\n<h2 id=\"good-%2F-bad-of-decision-tree%3F\">Good / Bad of Decision Tree? <a class=\"direct-link\" href=\"#good-%2F-bad-of-decision-tree%3F\">#</a></h2>\n<p>Some highlight <strong>advantages</strong> of Decision Tree Classifier:<sup><a href=\"https://blog.easysol.net/machine-learning-algorithms-1\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<p class=\"indent\"></p>\n<ol>\n<li>Can be used for regression or classification.</li>\n<li>Can be displayed graphically.</li>\n<li>Highly interpretable.</li>\n<li>Can be specified as a series of rules, and more closely approximate human decision-making than other models.</li>\n<li>Prediction is fast.</li>\n<li>Features don't need scaling.</li>\n<li>Automatically learns feature interactions.</li>\n<li>Tends to ignore irrelevant features.</li>\n<li>Non-parametric (will outperform linear models if relationship between features and response is highly non-linear).</li>\n</ol>\n<p>Its <strong>disadvantages</strong>:</p>\n<p class=\"indent\"></p>\n<ol>\n<li>Performance is (generally) not competitive with the best supervised learning methods.</li>\n<li>Can easily <mark>overfit</mark> the training data (<a href=\"https://stackoverflow.com/questions/22903267/what-is-tuning-in-machine-learning\">tuning</a> is required).</li>\n<li>Small variations in the data can result in a completely different tree (high variance).</li>\n<li>Recursive binary splitting makes &quot;locally optimal&quot; decisions that may not result in a globally optimal tree.</li>\n<li><mark>Doesn't</mark> work well with <mark>unbalanced</mark> or <mark>small</mark> datasets.</li>\n</ol>\n<h2 id=\"when-to-stop%3F\">When to stop? <a class=\"direct-link\" href=\"#when-to-stop%3F\">#</a></h2>\n<p>If the number of features are too large, we'll have a very large tree! Even, it easily leads to an <a href=\"/underfitting-overfitting\">overfitting problem</a>. How to avoid them?</p>\n<p class=\"indent\"></p>\n<ol>\n<li><strong>Pruning</strong>: removing the branches that make use of features having low importance.</li>\n<li>Set a minimum number of training input to use on each leaf. If it doesn't satisfy, we remove this leaf. In <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.tree.DecisionTreeClassifier.html#sklearn.tree.DecisionTreeClassifier\">scikit-learn</a>, use <code>min_samples_split</code>.</li>\n<li>Set the maximum depth of the tree. In <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.tree.DecisionTreeClassifier.html#sklearn.tree.DecisionTreeClassifier\">scikit-learn</a>, use <code>max_depth</code>.</li>\n</ol>\n<h2 id=\"when-we-need-to-use-decision-tree%3F\">When we need to use Decision Tree? <a class=\"direct-link\" href=\"#when-we-need-to-use-decision-tree%3F\">#</a></h2>\n<ul>\n<li>When explainability between variable is prioritised over accuracy. Otherwise, we tend to use <a href=\"%7B/random-forest\">Random Forest</a>.</li>\n<li>When the data is more non-parametric in nature.</li>\n<li>When we want a simple model.</li>\n<li>When entire dataset and features can be used</li>\n<li>When we have limited computational power</li>\n<li>When we are not worried about accuracy on future datasets.</li>\n<li>When we are not worried about accuracy on future datasets.</li>\n</ul>\n<h2 id=\"using-decision-tree-classifier-with-scikit-learn\">Using Decision Tree Classifier with Scikit-learn <a class=\"direct-link\" href=\"#using-decision-tree-classifier-with-scikit-learn\">#</a></h2>\n<h3 id=\"load-and-create\">Load and create <a class=\"direct-link\" href=\"#load-and-create\">#</a></h3>\n<p>Load the library,</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>tree <span class=\"token keyword\">import</span> DecisionTreeClassifier</code></pre>\n<p>Create a decision tree (<a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.tree.DecisionTreeClassifier.html#sklearn.tree.DecisionTreeClassifier\">other parameters</a>):</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># The Gini impurity (default)</span><br>clf <span class=\"token operator\">=</span> DecisionTreeClassifier<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># criterion='gini'</span><br><span class=\"token comment\"># The information gain (ID3)</span><br>clf <span class=\"token operator\">=</span> DecisionTreeClassifier<span class=\"token punctuation\">(</span>criterion<span class=\"token operator\">=</span><span class=\"token string\">'entropy'</span><span class=\"token punctuation\">)</span></code></pre>\n<p>An example,</p>\n<div class=\"code-output-equal\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> sklearn <span class=\"token keyword\">import</span> tree<br>X <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><br>Y <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><br>clf <span class=\"token operator\">=</span> tree<span class=\"token punctuation\">.</span>DecisionTreeClassifier<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>clf <span class=\"token operator\">=</span> clf<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">,</span> Y<span class=\"token punctuation\">)</span><br><span class=\"token comment\"># predict</span><br>clf<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br><span class=\"token comment\"># probability of each class</span><br>clf<span class=\"token punctuation\">.</span>predict_proba<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n<pre><code>array([1])\narray([[0., 1.]])\n</code></pre>\n</div>\n<h3 id=\"plot-and-save-plots\">Plot and Save plots <a class=\"direct-link\" href=\"#plot-and-save-plots\">#</a></h3>\n<p>Plot the tree (You may need to install <a href=\"https://www.graphviz.org/\">Graphviz</a> first. Don't forget to add its installed folder to <code>$path</code>),</p>\n<div class=\"columns-2\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> IPython<span class=\"token punctuation\">.</span>display <span class=\"token keyword\">import</span> Image<br><span class=\"token keyword\">import</span> pydotplus<br>dot_data <span class=\"token operator\">=</span> tree<span class=\"token punctuation\">.</span>export_graphviz<span class=\"token punctuation\">(</span>clf<span class=\"token punctuation\">,</span> out_file<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span><br>                                rounded<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span><br>                                filled<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><br>graph <span class=\"token operator\">=</span> pydotplus<span class=\"token punctuation\">.</span>graph_from_dot_data<span class=\"token punctuation\">(</span>dot_data<span class=\"token punctuation\">)</span><br>Image<span class=\"token punctuation\">(</span>graph<span class=\"token punctuation\">.</span>create_png<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<p><img src=\"/img/post/ML/random-forest-decision-tree/iris-tree.png\" alt=\"Iris tree.\" class=\"img-100 pop\"></p>\n</div>\n<p>Save the tree (follows the codes in &quot;plot the tree&quot;)</p>\n<pre class=\"language-python\"><code class=\"language-python\">graph<span class=\"token punctuation\">.</span>write_pdf<span class=\"token punctuation\">(</span><span class=\"token string\">\"tree.pdf\"</span><span class=\"token punctuation\">)</span>   <span class=\"token comment\"># to pdf</span><br>graph<span class=\"token punctuation\">.</span>write_png<span class=\"token punctuation\">(</span><span class=\"token string\">\"thi.png\"</span><span class=\"token punctuation\">)</span>    <span class=\"token comment\"># to png</span></code></pre>\n<h2 id=\"references\">References <a class=\"direct-link\" href=\"#references\">#</a></h2>\n<ul>\n<li><strong>Scikit-learn</strong>. <em><a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.tree.DecisionTreeClassifier.html#sklearn.tree.DecisionTreeClassifier\">Decision Tree CLassifier</a> official doc</em>.</li>\n<li><strong>Saed Sayad</strong>. <em><a href=\"https://www.saedsayad.com/decision_tree.htm\">Decision Tree - Classification</a></em>.</li>\n<li><strong>Tiep Vu</strong>. <a href=\"https://machinelearningcoban.com/2018/01/14/id3/\"><em>Bài 34: Decision Trees (1): Iterative Dichotomiser 3</em></a>.</li>\n<li><strong>Brian Ambielli</strong>. <em><a href=\"https://bambielli.com/til/2017-10-22-information-gain/\">Information Entropy and Information Gain</a></em>.</li>\n<li><strong>Brian Ambielli</strong>. <em><a href=\"https://bambielli.com/til/2017-10-29-gini-impurity/\">Gini Impurity (With Examples)</a></em>.</li>\n<li><strong>Aurélien Géron</strong>. <em><a href=\"https://books.google.fr/books/about/Hands_on_Machine_Learning_with_Scikit_Le.html?id=I6qkDAEACAAJ&amp;source=kp_book_description&amp;redir_esc=y\">Hands-on Machine Learning with Scikit-Learn and TensorFlow</a></em>, chapter 6.</li>\n</ul>\n",
      "date_published": "2019-09-02T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/random-forest/",
      "url": "https://dinhanhthi.com/random-forest/",
      "title": "Random Forest",
      "content_html": "<h2 id=\"what's-the-idea-of-random-forest%3F\">What's the idea of Random Forest? <a class=\"direct-link\" href=\"#what's-the-idea-of-random-forest%3F\">#</a></h2>\n<p>Random forest consists a (large) number of <a href=\"/search?q=decision+tree\">decision trees</a> operating together (<a href=\"https://en.wikipedia.org/wiki/Ensemble_learning\">ensemble learning</a>). <mark>The class with the most votes</mark> from the trees will be chosen as the final result of the RF's prediction. These decision tree models are relatively uncorrelated so that they can protect each other from their individual errors.</p>\n<p><img src=\"/img/post/ML/random-forest-decision-tree/rf1.jpg\" alt=\"An illustration of the random forest's idea.\" class=\"img-full-85\"><br>\n<em>An illustration of the random forest's idea.</em></p>\n<div class=\"hsbox\"><div class=\"hs__title\">What is <strong>Ensemble Learning</strong>?</div><div class=\"hs__content\"><p>Ensemble learning involves the <strong>combination of several models</strong> to solve a single prediction problem. It works by generating multiple classifiers/models which learn and make predictions independently. Those predictions are then combined into a single (mega) prediction that should be as good or better than the prediction made by any one classifer.<sup><a href=\"http://blog.yhat.com/posts/random-forests-in-python.html\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n</div></div>\n<p>❓ <strong>How (decision) trees are chosen?</strong> RF ensures that the chosen trees are not too correlated to the others.</p>\n<ol>\n<li><strong>Bagging</strong>: From a sample of size N, trees are chosen so that they also have size N <strong>with replacement</strong>. For example, if our training data was [1, 2, 3, 4, 5] (size 5), then we might give one of our tree the list [1, 2, 2, 5, 5] (with replacement).</li>\n<li><strong>Feature randomness</strong>: The features in the original dataset are chosen randomly. There may be some trees that are lacking in some features.</li>\n</ol>\n<p>So in our random forest, we end up with trees that are not only trained on different sets of data (thanks to bagging) but also use different features to make decisions<sup><a href=\"https://towardsdatascience.com/understanding-random-forest-58381e0602d2\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup>.</p>\n<p><em>For each tree</em>, we can use <a href=\"/decision-tree-classifier\">decision tree classifier</a> or <a href=\"/decision-tree-regression\">decision tree regression</a> depending on the type our problem (classification or regression).</p>\n<h2 id=\"when-we-use-random-forest%3F\">When we use Random Forest? <a class=\"direct-link\" href=\"#when-we-use-random-forest%3F\">#</a></h2>\n<ul>\n<li><em>Decision tree algorithms</em> easily lead to <mark><em>overfitting problems</em></mark>. Random forest algorithm can <mark>overcome</mark> this.</li>\n<li>Capable of both regression and classification problems.</li>\n<li>Handle a large number of features.</li>\n<li>Estimating which features are important in the underlying data being modeled<sup><a href=\"http://blog.yhat.com/posts/random-forests-in-python.html\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup>.</li>\n<li>Random forest is capable of learning without carefully crafted data transformations<sup><a href=\"http://blog.yhat.com/posts/random-forests-in-python.html\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup>.</li>\n<li><mark>Output probabilities</mark> for classification problems.</li>\n</ul>\n<h2 id=\"using-rf-with-scikit-learn\">Using RF with Scikit-learn <a class=\"direct-link\" href=\"#using-rf-with-scikit-learn\">#</a></h2>\n<h3 id=\"random-forest-classifier\">Random forest classifier <a class=\"direct-link\" href=\"#random-forest-classifier\">#</a></h3>\n<p>Load the library,</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>ensemble <span class=\"token keyword\">import</span> RandomForestClassifier</code></pre>\n<p>A sample dataset:</p>\n<pre class=\"language-python\"><code class=\"language-python\">iris <span class=\"token operator\">=</span> datasets<span class=\"token punctuation\">.</span>load_iris<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># iris flowers</span><br>X <span class=\"token operator\">=</span> iris<span class=\"token punctuation\">.</span>data<br>y <span class=\"token operator\">=</span> iris<span class=\"token punctuation\">.</span>target</code></pre>\n<p>Create RF classifier(<a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestClassifier.html\">other parameters</a>),</p>\n<pre class=\"language-python\"><code class=\"language-python\">clf <span class=\"token operator\">=</span> RandomForestClassifier<span class=\"token punctuation\">(</span>criterion<span class=\"token operator\">=</span><span class=\"token string\">'entropy'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># default is 'gini'</span><br>                             n_estimators<span class=\"token operator\">=</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># number of trees (default=10)</span><br>                             n_jobs<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># number of processors being used (\"-1\" means \"all\")</span></code></pre>\n<div class=\"success\">\n<p>If a problem has <strong>imbalanced classes</strong>, use <code>class_weight=&quot;balanced&quot;</code>.<sup><a href=\"https://chrisalbon.com/machine_learning/trees_and_forests/handle_imbalanced_classes_in_random_forests/\">[ref]</a></sup></p>\n</div>\n<p>Training &amp; predict (<a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestClassifier.html\">other methods</a>),</p>\n<pre class=\"language-python\"><code class=\"language-python\">model <span class=\"token operator\">=</span> clf<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><br>model<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>  <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>  <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>  <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># returns: array([1])</span><br>model<span class=\"token punctuation\">.</span>predict_proba<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>  <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>  <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>  <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># predict class probabilities</span></code></pre>\n<h3 id=\"random-forest-regression\">Random forest regression <a class=\"direct-link\" href=\"#random-forest-regression\">#</a></h3>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># load libraries</span><br><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>ensemble <span class=\"token keyword\">import</span> RandomForestRegressor<br><span class=\"token keyword\">from</span> sklearn <span class=\"token keyword\">import</span> datasets</code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># sample: Boston Housing Data</span><br>boston <span class=\"token operator\">=</span> datasets<span class=\"token punctuation\">.</span>load_boston<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>X <span class=\"token operator\">=</span> boston<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><br>y <span class=\"token operator\">=</span> boston<span class=\"token punctuation\">.</span>target</code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># train</span><br>regr <span class=\"token operator\">=</span> RandomForestRegressor<span class=\"token punctuation\">(</span>random_state<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> n_jobs<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><br>model <span class=\"token operator\">=</span> regr<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span></code></pre>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># predict</span><br>model<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>something<span class=\"token operator\">></span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"select-important-features-in-random-forest\">Select important features in Random Forest <a class=\"direct-link\" href=\"#select-important-features-in-random-forest\">#</a></h3>\n<p>Some premilinaries,</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>ensemble <span class=\"token keyword\">import</span> RandomForestClassifier<br><br><span class=\"token comment\"># Load data</span><br>iris <span class=\"token operator\">=</span> datasets<span class=\"token punctuation\">.</span>load_iris<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>X <span class=\"token operator\">=</span> iris<span class=\"token punctuation\">.</span>data<br>y <span class=\"token operator\">=</span> iris<span class=\"token punctuation\">.</span>target<br><br><span class=\"token comment\"># create a RF classifier</span><br>clf <span class=\"token operator\">=</span> RandomForestClassifier<span class=\"token punctuation\">(</span>random_state<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> n_jobs<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code></pre>\n<p>Select feature importance<sup><a href=\"https://chrisalbon.com/machine_learning/trees_and_forests/feature_importance\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup>,</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Train model</span><br>model <span class=\"token operator\">=</span> clf<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># Calculate feature importances</span><br>importances <span class=\"token operator\">=</span> model<span class=\"token punctuation\">.</span>feature_importances_<br><br><span class=\"token comment\"># load additional packages</span><br><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np<br><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt</code></pre>\n<p>Visualize,</p>\n<div class=\"columns-2\">\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Sort feature importances in descending order</span><br>indices <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>argsort<span class=\"token punctuation\">(</span>importances<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><br><span class=\"token comment\"># Rearrange feature names so they match the sorted feature importances</span><br>names <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>iris<span class=\"token punctuation\">.</span>feature_names<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> indices<span class=\"token punctuation\">]</span><br><br>plt<span class=\"token punctuation\">.</span>figure<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">(</span><span class=\"token string\">\"Feature Importance\"</span><span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">(</span><span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> importances<span class=\"token punctuation\">[</span>indices<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>xticks<span class=\"token punctuation\">(</span><span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> names<span class=\"token punctuation\">,</span> rotation<span class=\"token operator\">=</span><span class=\"token number\">90</span><span class=\"token punctuation\">)</span><br><br>plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<p><img src=\"/img/post/ML/random-forest-decision-tree/feature_importance_11_0.png\" alt=\"Features importances.\" class=\"img-100 bg-white\"></p>\n</div>\n<p>Select features with importance greater than a threshold,<sup><a href=\"https://chrisalbon.com/machine_learning/trees_and_forests/select_important_features_in_random_forest\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>feature_selection <span class=\"token keyword\">import</span> SelectFromModel<br><br><span class=\"token comment\"># Create object that selects features with importance greater than or equal to a threshold</span><br>selector <span class=\"token operator\">=</span> SelectFromModel<span class=\"token punctuation\">(</span>clf<span class=\"token punctuation\">,</span> threshold<span class=\"token operator\">=</span><span class=\"token number\">0.3</span><span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># Feature new feature matrix using selector</span><br>X_important <span class=\"token operator\">=</span> selector<span class=\"token punctuation\">.</span>fit_transform<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><br><br><span class=\"token comment\"># Train random forest using most important features</span><br>model <span class=\"token operator\">=</span> clf<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>X_important<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"references\">References <a class=\"direct-link\" href=\"#references\">#</a></h2>\n<ul>\n<li><strong>Tony Yiu</strong> -- <a href=\"https://towardsdatascience.com/understanding-random-forest-58381e0602d2\">Understanding Random Forest</a>.</li>\n<li><strong>Scikit-learn</strong> -- <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestClassifier.html\">Random Forest CLassifier</a> official doc.</li>\n<li><strong>Scikit-learn</strong> -- <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestRegressor.html\">Random Forest Regression</a> official doc.</li>\n<li><strong>Chris Albon</strong> -- <a href=\"https://chrisalbon.com/machine_learning/trees_and_forests/titanic_competition_with_random_forest/\">Titanic Competition With Random Forest</a>.</li>\n<li><strong>The Yhat Blog</strong> -- <a href=\"http://blog.yhat.com/posts/random-forests-in-python.html\">Random Forests in Python</a>.</li>\n<li><strong><a href=\"http://fast.ai\">fast.ai</a></strong> -- <a href=\"http://course18.fast.ai/lessonsml1/lesson1.html\">Introduction to Random Forest</a> and a solution to &quot;<em>Bull Book for Bulldozers</em>&quot; problem on Kaggle.</li>\n</ul>\n",
      "date_published": "2019-09-02T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/js-tips/",
      "url": "https://dinhanhthi.com/js-tips/",
      "title": "JavaScript extra",
      "content_html": "<h2 id=\"automatically-reload-page-if-js-file-changes\">Automatically reload page if js file changes <a class=\"direct-link\" href=\"#automatically-reload-page-if-js-file-changes\">#</a></h2>\n<ol>\n<li>Install <a href=\"https://nodejs.org/en/download/\">nodejs</a>.</li>\n<li>Install <a href=\"https://github.com/tapio/live-server\">live-server</a> using nodejs: <code>npm install -g live-server</code>.</li>\n<li><code>cd</code> to the project folder.</li>\n<li>run <code>live-server</code> (accept all networks notification)</li>\n<li>Browse: <a href=\"http://127.0.0.1:8080\">http://127.0.0.1:8080</a></li>\n<li>Enjoy!</li>\n</ol>\n<div class=\"warning\">\n<p>It may not reload the browser (it only detects the changes)!</p>\n</div>\n<h2 id=\"add-mathjax-to-website\">Add MathJax to website <a class=\"direct-link\" href=\"#add-mathjax-to-website\">#</a></h2>\n<p>👉 Check <a href=\"https://gist.github.com/dinhanhthi/e4dac3caa5e50c8c6f6493ab4b80b07c\">the codes</a>.</p>\n<h2 id=\"anchor-links-hidden-by-fixed-navigation\">Anchor links hidden by fixed navigation <a class=\"direct-link\" href=\"#anchor-links-hidden-by-fixed-navigation\">#</a></h2>\n<p>If you use table of content for posts in which links starting with <code>#</code> link to headings. After jumping, headings are usually hidden by the fixed navigation. Adding below script before <code>&lt;/body&gt;</code> tag can solve the problem (change value <code>100</code> to change where the page jump).<sup><a href=\"http://stackoverflow.com/questions/17534661/make-anchor-link-go-some-pixels-above-where-its-linked-to\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<p>👉 Check <a href=\"https://gist.github.com/dinhanhthi/a08f2e0f77c467b5a08dcd687339a8b7\">the codes</a>.</p>\n<h2 id=\"heading-hover-anchor-links\">Heading hover anchor links <a class=\"direct-link\" href=\"#heading-hover-anchor-links\">#</a></h2>\n<p>👉 Check <a href=\"https://gist.github.com/dinhanhthi/7c22452738840943dffe3e2a0249cbb7\">the codes</a>.<sup><a href=\"https://ben.balter.com/2014/03/13/pages-anchor-links\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<h2 id=\"back-to-top-button\">Back to top button <a class=\"direct-link\" href=\"#back-to-top-button\">#</a></h2>\n<p>Click and go back to the top of the page using javascript with smooth effect.</p>\n<p>👉 Check <a href=\"https://gist.github.com/dinhanhthi/20daf8dda279685fd1a65f81491177d0\">the codes</a>.</p>\n<h2 id=\"hide-%2F-show-box\">Hide / Show box <a class=\"direct-link\" href=\"#hide-%2F-show-box\">#</a></h2>\n<p>Auto hide / show the next <code>div</code> of the currently clicked <code>div</code>.</p>\n<p>👉 Check <a href=\"https://gist.github.com/dinhanhthi/cc6ce14f1ce4af862e67ecf8f8c9a3a9\">the codes</a>.</p>\n<p><strong>Advantage</strong>: We don't need the id of content div, this method requires that <code>div.hs__content</code> comes right after <code>div.hs__title</code>, otherwise it won't work!</p>\n<h2 id=\"click-to-enlarge-photo\">Click to enlarge photo <a class=\"direct-link\" href=\"#click-to-enlarge-photo\">#</a></h2>\n<p>If some photos on your page are too small and you wanna add a function in that users can click on the photo to enlarge it. This technique requires <a href=\"https://getbootstrap.com\">Bootstrap 4</a>.</p>\n<p>👉 Check <a href=\"https://gist.github.com/dinhanhthi/fb81766d0070d15d5ad2fc239643fb3b\">the codes</a>.</p>\n<h2 id=\"prevent-default-event\">Prevent default event <a class=\"direct-link\" href=\"#prevent-default-event\">#</a></h2>\n<p>Stop arrow key acts as usual,</p>\n<pre class=\"language-js\"><code class=\"language-js\">window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"keydown\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t<span class=\"token comment\">// space and arrow keys</span><br>\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">,</span> <span class=\"token number\">37</span><span class=\"token punctuation\">,</span> <span class=\"token number\">38</span><span class=\"token punctuation\">,</span> <span class=\"token number\">39</span><span class=\"token punctuation\">,</span> <span class=\"token number\">40</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>keyCode<span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t\te<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>If <code>div_1</code> inside <code>div_2</code>, prevent actions in <code>div_2</code> when performs on <code>div_1</code> (check <a href=\"https://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_event_stoppropagation\">this example</a>), use <code>e.stopPropagation()</code>.</p>\n<h2 id=\"search-%2B-result-%2B-navigation\">Search + result + navigation <a class=\"direct-link\" href=\"#search-%2B-result-%2B-navigation\">#</a></h2>\n<ul>\n<li>Auto close the result if losing focus.</li>\n<li>Cycling the result items with arrow up/down keys.</li>\n<li>Auto focus to the <code>a</code> tag of the title.</li>\n</ul>\n<p>👉 Check <a href=\"https://gist.github.com/dinhanhthi/908585062181e6f34bf8fb098ba3b001\">the codes</a>.</p>\n<h2 id=\"scrolling-headings-in-toc\">Scrolling headings in TOC <a class=\"direct-link\" href=\"#scrolling-headings-in-toc\">#</a></h2>\n<p>Follow the position of viewport, auto highlight heading in toc w.r.t the current heading on page</p>\n<p>👉 Check <a href=\"https://gist.github.com/dinhanhthi/c51fa9e525253179601d2a3e1b47d0b6\">the codes</a>.</p>\n<h2 id=\"fetch-starred-repository-(json-to-ol)\">Fetch starred repository (JSON to <code>ol</code>) <a class=\"direct-link\" href=\"#fetch-starred-repository-(json-to-ol)\">#</a></h2>\n<p>Automatically fetch a list of Github starred repositories using Github API and display it under <code>&lt;ol&gt;</code> html tag.<sup><a href=\"https://stackoverflow.com/questions/55090335/how-to-create-lis-based-on-fetch-result\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<p>👉 Check <a href=\"https://gist.github.com/dinhanhthi/699aa86bb5fb63fad0a6ab97410b1b5b\">the codes</a>.</p>\n",
      "date_published": "2019-09-02T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/confusion-matrix-and-f1-score/",
      "url": "https://dinhanhthi.com/confusion-matrix-and-f1-score/",
      "title": "Confusion matrix &amp; f1-score",
      "content_html": "<h2 id=\"confusion-matrix\">Confusion matrix <a class=\"direct-link\" href=\"#confusion-matrix\">#</a></h2>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\"></th>\n<th style=\"text-align:center\">actual (yes)</th>\n<th style=\"text-align:center\">actual (no)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">predict (yes)</td>\n<td style=\"text-align:center\"><span class=\"tgreen-light\">TP</span></td>\n<td style=\"text-align:center\"><span class=\"tpink-light\">FP</span></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">predict (no)</td>\n<td style=\"text-align:center\"><span class=\"tpink-light\">FN</span></td>\n<td style=\"text-align:center\"><span class=\"tgreen-light\">TN</span></td>\n</tr>\n</tbody>\n</table>\n<div class=\"columns-2\" markdown=\"1\">\n<div markdown=\"1\">\n<ul>\n<li><strong>True Positive</strong> (<strong class=\"tgreen\">TP</strong>): what we predict Positive is really Positive.</li>\n<li><strong>True Negative</strong> (<strong class=\"tgreen\">FN</strong>): what we predict Negative is really Negative.</li>\n<li><strong>False Negative</strong> (<strong>FN</strong>): what we predict Negative is actually Positive.</li>\n<li><strong>False Positive</strong> (<strong>FP</strong>): what we predict Positive is actually Negative.</li>\n</ul>\n</div>\n<p><img src=\"/img/post/ML/confusion-matrix-f1-score/cm_ex.png\" alt=\"This guy is pregnant?\" class=\"img-full-100 pop\"><br>\n<em>This guy is pregnant?</em></p>\n</div>\n<h3 id=\"how-to-remember%3F\">How to remember? <a class=\"direct-link\" href=\"#how-to-remember%3F\">#</a></h3>\n<ul>\n<li><strong>True</strong>/<strong>False</strong> indicates what we predicted is right/wrong.</li>\n<li><strong>Positive</strong>/<strong>Negative</strong> is what we predicted (yes or no).</li>\n</ul>\n<h3 id=\"type-i-%2F-type-ii-errors\">Type I / Type II errors <a class=\"direct-link\" href=\"#type-i-%2F-type-ii-errors\">#</a></h3>\n<ul>\n<li>FP = <a href=\"https://en.wikipedia.org/wiki/Type_I_and_type_II_errors\">Type I</a> error = rejection of true null hypothesis = negative results are predicted wrongly = what we predict positive is actually negative.</li>\n<li>FN = <a href=\"https://en.wikipedia.org/wiki/Type_I_and_type_II_errors\">Type II</a> error = non-rejection of a false null hypothesis = positive results are predicted wrongly = what we predict negative are actually positive.</li>\n</ul>\n<h3 id=\"why-cm-is-important%3F\">Why CM is important? <a class=\"direct-link\" href=\"#why-cm-is-important%3F\">#</a></h3>\n<p>Give a general view about our model, &quot;is it really good?&quot; thanks to precision and recall!</p>\n<h2 id=\"precision-%26-recall\">Precision &amp; Recall <a class=\"direct-link\" href=\"#precision-%26-recall\">#</a></h2>\n<p class=\"table.bd-right.table-dark\"></p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\"></th>\n<th style=\"text-align:center\">actual (yes)</th>\n<th style=\"text-align:center\">actual (no)</th>\n<th style=\"text-align:center\"></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">predict (yes)</td>\n<td style=\"text-align:center\"><span class=\"tgreen-light\">TP</span></td>\n<td style=\"text-align:center\"><span class=\"tpink-light\">FP</span></td>\n<td style=\"text-align:center\"><strong>Precision</strong></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">predict (no)</td>\n<td style=\"text-align:center\"><span class=\"tpink-light\">FN</span></td>\n<td style=\"text-align:center\"><span class=\"tgreen-light\">TN</span></td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td style=\"text-align:center\"></td>\n<td style=\"text-align:center\"><strong>Recall</strong></td>\n<td style=\"text-align:center\"></td>\n<td style=\"text-align:center\"></td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>\n<p><strong>Precision</strong>: How many of our positive predictions are really true? (Check the accuracy of our positive predictions).</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mrow><mi mathvariant=\"normal\">p</mi><mi mathvariant=\"normal\">r</mi><mi mathvariant=\"normal\">e</mi><mi mathvariant=\"normal\">c</mi><mi mathvariant=\"normal\">i</mi><mi mathvariant=\"normal\">s</mi><mi mathvariant=\"normal\">i</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">n</mi></mrow><mo>=</mo><mfrac><mrow><mi mathvariant=\"normal\">t</mi><mi mathvariant=\"normal\">r</mi><mi mathvariant=\"normal\">u</mi><mi mathvariant=\"normal\">e</mi><mtext> </mtext><mi mathvariant=\"normal\">p</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">s</mi><mi mathvariant=\"normal\">i</mi><mi mathvariant=\"normal\">t</mi><mi mathvariant=\"normal\">i</mi><mi mathvariant=\"normal\">v</mi><mi mathvariant=\"normal\">e</mi></mrow><mrow><mi mathvariant=\"normal\">p</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">s</mi><mi mathvariant=\"normal\">i</mi><mi mathvariant=\"normal\">t</mi><mi mathvariant=\"normal\">i</mi><mi mathvariant=\"normal\">v</mi><mi mathvariant=\"normal\">e</mi><mi mathvariant=\"normal\">l</mi><mi mathvariant=\"normal\">y</mi><mtext> </mtext><mi mathvariant=\"normal\">p</mi><mi mathvariant=\"normal\">r</mi><mi mathvariant=\"normal\">e</mi><mi mathvariant=\"normal\">d</mi><mi mathvariant=\"normal\">i</mi><mi mathvariant=\"normal\">c</mi><mi mathvariant=\"normal\">t</mi><mi mathvariant=\"normal\">e</mi><mi mathvariant=\"normal\">d</mi><mtext> </mtext><mi mathvariant=\"normal\">r</mi><mi mathvariant=\"normal\">e</mi><mi mathvariant=\"normal\">s</mi><mi mathvariant=\"normal\">u</mi><mi mathvariant=\"normal\">l</mi><mi mathvariant=\"normal\">t</mi><mi mathvariant=\"normal\">s</mi></mrow></mfrac><mo>=</mo><mfrac><mrow><mi mathvariant=\"normal\">T</mi><mi mathvariant=\"normal\">P</mi></mrow><mrow><mrow><mi mathvariant=\"normal\">T</mi><mi mathvariant=\"normal\">P</mi></mrow><mo>+</mo><mrow><mi mathvariant=\"normal\">F</mi><mi mathvariant=\"normal\">P</mi></mrow></mrow></mfrac><mi mathvariant=\"normal\">.</mi></mrow><annotation encoding=\"application/x-tex\">\\mathrm {precision}= \\dfrac{\\mathrm{true\\, positive}}{\\mathrm{positively\\, predicted\\, results}}= \\dfrac{\\mathrm{TP}}{\\mathrm{TP} + \\mathrm{FP}}.</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8623000000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">p</span><span class=\"mord mathrm\">r</span><span class=\"mord mathrm\">e</span><span class=\"mord mathrm\">c</span><span class=\"mord mathrm\">i</span><span class=\"mord mathrm\">s</span><span class=\"mord mathrm\">i</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">n</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.2253000000000003em;vertical-align:-0.8804400000000001em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3448600000000002em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">p</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">s</span><span class=\"mord mathrm\">i</span><span class=\"mord mathrm\">t</span><span class=\"mord mathrm\">i</span><span class=\"mord mathrm\" style=\"margin-right:0.01389em;\">v</span><span class=\"mord mathrm\">e</span><span class=\"mord mathrm\">l</span><span class=\"mord mathrm\" style=\"margin-right:0.01389em;\">y</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathrm\">p</span><span class=\"mord mathrm\">r</span><span class=\"mord mathrm\">e</span><span class=\"mord mathrm\">d</span><span class=\"mord mathrm\">i</span><span class=\"mord mathrm\">c</span><span class=\"mord mathrm\">t</span><span class=\"mord mathrm\">e</span><span class=\"mord mathrm\">d</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathrm\">r</span><span class=\"mord mathrm\">e</span><span class=\"mord mathrm\">s</span><span class=\"mord mathrm\">u</span><span class=\"mord mathrm\">l</span><span class=\"mord mathrm\">t</span><span class=\"mord mathrm\">s</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">t</span><span class=\"mord mathrm\">r</span><span class=\"mord mathrm\">u</span><span class=\"mord mathrm\">e</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathrm\">p</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">s</span><span class=\"mord mathrm\">i</span><span class=\"mord mathrm\">t</span><span class=\"mord mathrm\">i</span><span class=\"mord mathrm\" style=\"margin-right:0.01389em;\">v</span><span class=\"mord mathrm\">e</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8804400000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.1296600000000003em;vertical-align:-0.7693300000000001em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.36033em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">T</span><span class=\"mord mathrm\">P</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">F</span><span class=\"mord mathrm\">P</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">T</span><span class=\"mord mathrm\">P</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693300000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\">.</span></span></span></span></span></eqn></section></math>\n</li>\n<li>\n<p><strong>Recall</strong>: How many of positive results belong to our predictions? (Do we miss some negative predictions?)</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mrow><mi mathvariant=\"normal\">r</mi><mi mathvariant=\"normal\">e</mi><mi mathvariant=\"normal\">c</mi><mi mathvariant=\"normal\">a</mi><mi mathvariant=\"normal\">l</mi><mi mathvariant=\"normal\">l</mi></mrow><mo>=</mo><mfrac><mrow><mi mathvariant=\"normal\">t</mi><mi mathvariant=\"normal\">r</mi><mi mathvariant=\"normal\">u</mi><mi mathvariant=\"normal\">e</mi><mtext> </mtext><mi mathvariant=\"normal\">p</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">s</mi><mi mathvariant=\"normal\">i</mi><mi mathvariant=\"normal\">t</mi><mi mathvariant=\"normal\">i</mi><mi mathvariant=\"normal\">v</mi><mi mathvariant=\"normal\">e</mi></mrow><mrow><mi mathvariant=\"normal\">p</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">s</mi><mi mathvariant=\"normal\">i</mi><mi mathvariant=\"normal\">t</mi><mi mathvariant=\"normal\">i</mi><mi mathvariant=\"normal\">v</mi><mi mathvariant=\"normal\">e</mi><mi mathvariant=\"normal\">l</mi><mi mathvariant=\"normal\">y</mi><mtext> </mtext><mi mathvariant=\"normal\">a</mi><mi mathvariant=\"normal\">c</mi><mi mathvariant=\"normal\">t</mi><mi mathvariant=\"normal\">u</mi><mi mathvariant=\"normal\">a</mi><mi mathvariant=\"normal\">l</mi><mtext> </mtext><mi mathvariant=\"normal\">r</mi><mi mathvariant=\"normal\">e</mi><mi mathvariant=\"normal\">s</mi><mi mathvariant=\"normal\">u</mi><mi mathvariant=\"normal\">l</mi><mi mathvariant=\"normal\">t</mi><mi mathvariant=\"normal\">s</mi></mrow></mfrac><mo>=</mo><mfrac><mrow><mi mathvariant=\"normal\">T</mi><mi mathvariant=\"normal\">P</mi></mrow><mrow><mrow><mi mathvariant=\"normal\">T</mi><mi mathvariant=\"normal\">P</mi></mrow><mo>+</mo><mrow><mi mathvariant=\"normal\">F</mi><mi mathvariant=\"normal\">N</mi></mrow></mrow></mfrac><mi mathvariant=\"normal\">.</mi></mrow><annotation encoding=\"application/x-tex\">\\mathrm {recall}= \\dfrac{\\mathrm{true\\, positive}}{\\mathrm{positively\\, actual\\, results}}= \\dfrac{\\mathrm{TP}}{\\mathrm{TP} + \\mathrm{FN}}.</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">r</span><span class=\"mord mathrm\">e</span><span class=\"mord mathrm\">c</span><span class=\"mord mathrm\">a</span><span class=\"mord mathrm\">l</span><span class=\"mord mathrm\">l</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.2253000000000003em;vertical-align:-0.8804400000000001em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3448600000000002em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">p</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">s</span><span class=\"mord mathrm\">i</span><span class=\"mord mathrm\">t</span><span class=\"mord mathrm\">i</span><span class=\"mord mathrm\" style=\"margin-right:0.01389em;\">v</span><span class=\"mord mathrm\">e</span><span class=\"mord mathrm\">l</span><span class=\"mord mathrm\" style=\"margin-right:0.01389em;\">y</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathrm\">a</span><span class=\"mord mathrm\">c</span><span class=\"mord mathrm\">t</span><span class=\"mord mathrm\">u</span><span class=\"mord mathrm\">a</span><span class=\"mord mathrm\">l</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathrm\">r</span><span class=\"mord mathrm\">e</span><span class=\"mord mathrm\">s</span><span class=\"mord mathrm\">u</span><span class=\"mord mathrm\">l</span><span class=\"mord mathrm\">t</span><span class=\"mord mathrm\">s</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">t</span><span class=\"mord mathrm\">r</span><span class=\"mord mathrm\">u</span><span class=\"mord mathrm\">e</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathrm\">p</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">s</span><span class=\"mord mathrm\">i</span><span class=\"mord mathrm\">t</span><span class=\"mord mathrm\">i</span><span class=\"mord mathrm\" style=\"margin-right:0.01389em;\">v</span><span class=\"mord mathrm\">e</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8804400000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.1296600000000003em;vertical-align:-0.7693300000000001em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.36033em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">T</span><span class=\"mord mathrm\">P</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">F</span><span class=\"mord mathrm\">N</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">T</span><span class=\"mord mathrm\">P</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693300000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\">.</span></span></span></span></span></eqn></section></math>\n</li>\n</ul>\n<p><img src=\"/img/post/ML/confusion-matrix-f1-score/confusion-matrix-example.png\" alt=\"An example of using confusion matrix\" class=\"img-85\"><br>\n<em>Recognizing number 5. Figure taken from <a href=\"https://www.oreilly.com/library/view/hands-on-machine-learning/9781492032632/\">this book</a>.</em></p>\n<h3 id=\"when-to-use%3F\">When to use? <a class=\"direct-link\" href=\"#when-to-use%3F\">#</a></h3>\n<ul>\n<li><strong>Precision</strong> is importantly used when the &quot;wrongly predicted yes&quot; (FP) influences much (e.g. <em>This email is spam?</em> -- results yes but actually no and we lost important emails!).</li>\n<li><strong>Recall</strong> (<em><strong>Sensitivity</strong></em>) is importantly used when the &quot;wrongly predicted no&quot; (FN) influences much (e.g. In the banking industry, <em>this transaction is fraudulent?</em> -- results no but actually yes and we lost money!).</li>\n</ul>\n<h3 id=\"precision_recall_curve\">Precision / Recall curve <a class=\"direct-link\" href=\"#precision_recall_curve\">#</a></h3>\n<p>With <em>thresholds</em>, we can use <code>precision_recall_curve()</code> to compute precision and recall for all possible thresholds,</p>\n<p><img src=\"/img/post/ML/confusion-matrix-f1-score/precision-reacll-curve.png\" alt=\"An example of Precision/Recall curve\" class=\"img-85\"><br>\n<em>An example of Precision/Recall curve with many thresholds. Figure taken from <a href=\"https://www.oreilly.com/library/view/hands-on-machine-learning/9781492032632/\">this book</a>.</em></p>\n<p><strong>Trace-off</strong>: Higher precision, lower recall and vice versa.</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>metrics <span class=\"token keyword\">import</span> precision_recall_curve<br>precisions<span class=\"token punctuation\">,</span> recalls<span class=\"token punctuation\">,</span> thresholds <span class=\"token operator\">=</span> precision_recall_curve<span class=\"token punctuation\">(</span>y_train_5<span class=\"token punctuation\">,</span> y_scores<span class=\"token punctuation\">)</span><br><br>plt<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>thresholds<span class=\"token punctuation\">,</span> precisions<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"b--\"</span><span class=\"token punctuation\">,</span> label<span class=\"token operator\">=</span><span class=\"token string\">\"Precision\"</span><span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>thresholds<span class=\"token punctuation\">,</span> recalls<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"g-\"</span><span class=\"token punctuation\">,</span> label<span class=\"token operator\">=</span><span class=\"token string\">\"Recall\"</span><span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"f1-score\">F1-Score <a class=\"direct-link\" href=\"#f1-score\">#</a></h2>\n<p>High precision and low recall or vice versa? F1-Score gives us a balance between precision and recall.</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>f</mi><mn>1</mn></msub><mo>=</mo><msup><mrow><mo fence=\"true\">(</mo><mfrac><mrow><msup><mrow><mi mathvariant=\"normal\">r</mi><mi mathvariant=\"normal\">e</mi><mi mathvariant=\"normal\">c</mi><mi mathvariant=\"normal\">a</mi><mi mathvariant=\"normal\">l</mi><mi mathvariant=\"normal\">l</mi></mrow><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo>+</mo><msup><mrow><mi mathvariant=\"normal\">p</mi><mi mathvariant=\"normal\">r</mi><mi mathvariant=\"normal\">e</mi><mi mathvariant=\"normal\">c</mi><mi mathvariant=\"normal\">i</mi><mi mathvariant=\"normal\">s</mi><mi mathvariant=\"normal\">i</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">n</mi></mrow><mrow><mo>−</mo><mn>1</mn></mrow></msup></mrow><mn>2</mn></mfrac><mo fence=\"true\">)</mo></mrow><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo>=</mo><mn>2</mn><mo>×</mo><mfrac><mrow><mrow><mi mathvariant=\"normal\">p</mi><mi mathvariant=\"normal\">r</mi><mi mathvariant=\"normal\">e</mi><mi mathvariant=\"normal\">c</mi><mi mathvariant=\"normal\">i</mi><mi mathvariant=\"normal\">s</mi><mi mathvariant=\"normal\">i</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">n</mi></mrow><mo>⋅</mo><mrow><mi mathvariant=\"normal\">r</mi><mi mathvariant=\"normal\">e</mi><mi mathvariant=\"normal\">c</mi><mi mathvariant=\"normal\">a</mi><mi mathvariant=\"normal\">l</mi><mi mathvariant=\"normal\">l</mi></mrow></mrow><mrow><mrow><mi mathvariant=\"normal\">p</mi><mi mathvariant=\"normal\">r</mi><mi mathvariant=\"normal\">e</mi><mi mathvariant=\"normal\">c</mi><mi mathvariant=\"normal\">i</mi><mi mathvariant=\"normal\">s</mi><mi mathvariant=\"normal\">i</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">n</mi></mrow><mo>+</mo><mrow><mi mathvariant=\"normal\">r</mi><mi mathvariant=\"normal\">e</mi><mi mathvariant=\"normal\">c</mi><mi mathvariant=\"normal\">a</mi><mi mathvariant=\"normal\">l</mi><mi mathvariant=\"normal\">l</mi></mrow></mrow></mfrac><mi mathvariant=\"normal\">.</mi></mrow><annotation encoding=\"application/x-tex\">\nf_1 = \\left({\\frac {\\mathrm {recall} ^{-1}+\\mathrm {precision} ^{-1}}{2}}\\right)^{-1}=2\\times {\\frac {\\mathrm {precision} \\cdot \\mathrm {recall} }{\\mathrm {precision} +\\mathrm {recall} }}.\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.729486em;vertical-align:-0.95003em;\"></span><span class=\"minner\"><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">(</span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.5754479999999997em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">r</span><span class=\"mord mathrm\">e</span><span class=\"mord mathrm\">c</span><span class=\"mord mathrm\">a</span><span class=\"mord mathrm\">l</span><span class=\"mord mathrm\">l</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8984479999999999em;\"><span style=\"top:-3.14734em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">p</span><span class=\"mord mathrm\">r</span><span class=\"mord mathrm\">e</span><span class=\"mord mathrm\">c</span><span class=\"mord mathrm\">i</span><span class=\"mord mathrm\">s</span><span class=\"mord mathrm\">i</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">n</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.871868em;\"><span style=\"top:-3.12076em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">)</span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.779456em;\"><span style=\"top:-4.028348em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.25188em;vertical-align:-0.8804400000000001em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714399999999998em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">p</span><span class=\"mord mathrm\">r</span><span class=\"mord mathrm\">e</span><span class=\"mord mathrm\">c</span><span class=\"mord mathrm\">i</span><span class=\"mord mathrm\">s</span><span class=\"mord mathrm\">i</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">n</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">r</span><span class=\"mord mathrm\">e</span><span class=\"mord mathrm\">c</span><span class=\"mord mathrm\">a</span><span class=\"mord mathrm\">l</span><span class=\"mord mathrm\">l</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">p</span><span class=\"mord mathrm\">r</span><span class=\"mord mathrm\">e</span><span class=\"mord mathrm\">c</span><span class=\"mord mathrm\">i</span><span class=\"mord mathrm\">s</span><span class=\"mord mathrm\">i</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">n</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">r</span><span class=\"mord mathrm\">e</span><span class=\"mord mathrm\">c</span><span class=\"mord mathrm\">a</span><span class=\"mord mathrm\">l</span><span class=\"mord mathrm\">l</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8804400000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span><span class=\"mord\">.</span></span></span></span></span></eqn></section></math>\n<p>F1-score depends on how we label the class &quot;positive&quot;. <em>This email is spam?</em> is <strong>very different</strong> from <em>This email is not spam?</em></p>\n<h3 id=\"when-to-use-f1-score%3F\">When to use F1-Score? <a class=\"direct-link\" href=\"#when-to-use-f1-score%3F\">#</a></h3>\n<ul>\n<li>When you need a balance between precision and recall.</li>\n<li>When we have a &quot;skewed class&quot; problem (uneven class distribution, too many &quot;yes&quot; and very few &quot;no&quot;, for example).</li>\n<li>One of precision and recall is improved but the other changes too much, then f1-score will be very small!</li>\n</ul>\n<h3 id=\"how-to-choose-f1-score-value%3F\">How to choose f1-score value? <a class=\"direct-link\" href=\"#how-to-choose-f1-score-value%3F\">#</a></h3>\n<p>Normally, <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>f</mi><mn>1</mn></msub><mo>∈</mo><mo stretchy=\"false\">(</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">f_1\\in (0,1]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span></span> and it gets the higher values, the better our model is.</p>\n<ul>\n<li>The best one (<span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>f</mi><mn>1</mn></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">f_1=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></span>), both precision and recall get <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>100</mn><mi mathvariant=\"normal\">%</mi></mrow><annotation encoding=\"application/x-tex\">100\\%</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.80556em;vertical-align:-0.05556em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">%</span></span></span></span></span>.</li>\n<li>One of precision and recall gets very small value (close to 0), <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>f</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">f_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> is very small, our model is not good!</li>\n</ul>\n<p>What if we prefer one of precision and recall than the other? We consider <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>f</mi><mi>β</mi></msub></mrow><annotation encoding=\"application/x-tex\">f_{\\beta}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.980548em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361079999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05278em;\">β</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span></span><sup><a href=\"https://pdfs.semanticscholar.org/3dcd/a1bec36586b46b1dc67a477beca2c5a105be.pdf\" rel=\"noopener noreferrer\" target=\"_blank\">[ref]</a></sup></p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>f</mi><mi>β</mi></msub><mo>=</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>+</mo><msup><mi>β</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo><mfrac><mrow><mtext>precision</mtext><mo>⋅</mo><mtext>recall</mtext></mrow><mrow><msup><mi>β</mi><mn>2</mn></msup><mo>⋅</mo><mtext>precision</mtext><mo>+</mo><mtext>recall</mtext></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\nf_{\\beta} = ( 1 + \\beta^2)\\frac{\\text{precision}\\cdot\\text{recall}}{\\beta^2\\cdot\\text{precision} + \\text{recall}}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.980548em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361079999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05278em;\">β</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.25188em;vertical-align:-0.8804400000000001em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714399999999998em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.740108em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord text\"><span class=\"mord\">precision</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord text\"><span class=\"mord\">recall</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">precision</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord text\"><span class=\"mord\">recall</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8804400000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></eqn></section></math>\n<p><span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>f</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">f_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> is a special case of <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>f</mi><mi>β</mi></msub></mrow><annotation encoding=\"application/x-tex\">f_{\\beta}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.980548em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361079999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05278em;\">β</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span></span></span> when <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>β</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">\\beta=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></span>:</p>\n<ul>\n<li>When precision is more important than recall, we choose <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>β</mi><mo>&lt;</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">\\beta &lt; 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></span> (usually choose <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>β</mi><mo>=</mo><mn>0.5</mn></mrow><annotation encoding=\"application/x-tex\">\\beta=0.5</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">5</span></span></span></span></span>).</li>\n<li>When recall is more important than precision, we choose <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>β</mi><mo>&gt;</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">\\beta &gt; 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></span> (usually choose <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>β</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">\\beta=2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span></span>).</li>\n</ul>\n<h2 id=\"accuracy-%2F-specificity\">Accuracy / Specificity <a class=\"direct-link\" href=\"#accuracy-%2F-specificity\">#</a></h2>\n<ul>\n<li>\n<p><strong>Accuracy</strong>: How accurate our predictions to the whole predictions?</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mrow><mi mathvariant=\"normal\">a</mi><mi mathvariant=\"normal\">c</mi><mi mathvariant=\"normal\">c</mi><mi mathvariant=\"normal\">u</mi><mi mathvariant=\"normal\">r</mi><mi mathvariant=\"normal\">a</mi><mi mathvariant=\"normal\">c</mi><mi mathvariant=\"normal\">y</mi></mrow><mo>=</mo><mfrac><mrow><mi>T</mi><mi>P</mi><mo>+</mo><mi>T</mi><mi>N</mi></mrow><mrow><mi>T</mi><mi>P</mi><mo>+</mo><mi>T</mi><mi>N</mi><mo>+</mo><mi>F</mi><mi>P</mi><mo>+</mo><mi>F</mi><mi>N</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\mathrm{accuracy} = \\dfrac{TP + TN}{TP + TN + FP + FN}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">a</span><span class=\"mord mathrm\">c</span><span class=\"mord mathrm\">c</span><span class=\"mord mathrm\">u</span><span class=\"mord mathrm\">r</span><span class=\"mord mathrm\">a</span><span class=\"mord mathrm\">c</span><span class=\"mord mathrm\" style=\"margin-right:0.01389em;\">y</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.1296600000000003em;vertical-align:-0.7693300000000001em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.36033em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693300000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></eqn></section></math>\n</li>\n<li>\n<p><strong>Specificity</strong>: How many negative results belong to our predictions?</p>\n<section class=\"eqn\"><eqn><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mrow><mi mathvariant=\"normal\">s</mi><mi mathvariant=\"normal\">p</mi><mi mathvariant=\"normal\">e</mi><mi mathvariant=\"normal\">c</mi><mi mathvariant=\"normal\">i</mi><mi mathvariant=\"normal\">f</mi><mi mathvariant=\"normal\">i</mi><mi mathvariant=\"normal\">c</mi><mi mathvariant=\"normal\">i</mi><mi mathvariant=\"normal\">t</mi><mi mathvariant=\"normal\">y</mi></mrow><mo>=</mo><mfrac><mrow><mi>T</mi><mi>N</mi></mrow><mrow><mi>F</mi><mi>P</mi><mo>+</mo><mi>T</mi><mi>N</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\mathrm{specificity} = \\dfrac{TN}{FP + TN}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">s</span><span class=\"mord mathrm\">p</span><span class=\"mord mathrm\">e</span><span class=\"mord mathrm\">c</span><span class=\"mord mathrm\">i</span><span class=\"mord mathrm\" style=\"margin-right:0.07778em;\">f</span><span class=\"mord mathrm\">i</span><span class=\"mord mathrm\">c</span><span class=\"mord mathrm\">i</span><span class=\"mord mathrm\">t</span><span class=\"mord mathrm\" style=\"margin-right:0.01389em;\">y</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.1296600000000003em;vertical-align:-0.7693300000000001em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.36033em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693300000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></eqn></section></math>\n</li>\n</ul>\n<h3 id=\"when-to-use%3F-2\">When to use? <a class=\"direct-link\" href=\"#when-to-use%3F-2\">#</a></h3>\n<ul>\n<li><strong>Accuaracy</strong> is used when we have symmetric datasets.</li>\n<li><strong>Specificity</strong> is used when we care about TN values and don't want to make false alarms of the FP values (e.g. drug test).</li>\n</ul>\n<h2 id=\"the-roc-curve\">The ROC Curve <a class=\"direct-link\" href=\"#the-roc-curve\">#</a></h2>\n<ul>\n<li>ROC = <em>Receiver operating characteristic</em>.</li>\n<li>A common tool used with <em>binary classifier</em>.</li>\n<li>Diffrent from <a href=\"#precision_recall_curve\">precision/recall curve</a>, ROC plots the <em>true positive rate</em> (<em>recall</em>) against the <em>false positive rate</em> (<em>1 - specificity</em>).</li>\n</ul>\n<p><img src=\"/img/post/ML/confusion-matrix-f1-score/roc-curve.png\" alt=\"An example of ROC curve\" class=\"img-85\"><br>\n<em>This ROC curve plots FPR vs TPR for all possible thresholds. <strong>The dotted line</strong> represents the ROC curve of a purely random classifier; a good classifier stays as far away from that lines as possible (<mark>toward the top-left corner</mark>). Figure taken from <a href=\"https://www.oreilly.com/library/view/hands-on-machine-learning/9781492032632/\">this book</a>.</em></p>\n<p><strong>Trade-off</strong>: the higher recall, the more FPR (predict wrong) the classifier produces.</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>metrics <span class=\"token keyword\">import</span> roc_curve<br><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt<br><span class=\"token operator\">%</span>matplotlib inline<br><br>fpr<span class=\"token punctuation\">,</span> tpr<span class=\"token punctuation\">,</span> thresholds <span class=\"token operator\">=</span> roc_curve<span class=\"token punctuation\">(</span>y_test<span class=\"token punctuation\">,</span> y_pred_prob<span class=\"token punctuation\">)</span><br><span class=\"token comment\"># create plot</span><br>plt<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>fpr<span class=\"token punctuation\">,</span> tpr<span class=\"token punctuation\">,</span> label<span class=\"token operator\">=</span><span class=\"token string\">'ROC curve'</span><span class=\"token punctuation\">)</span><br>plt<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'k--'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># Dashed diagonal</span><br>plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n<h3 id=\"the-auc\">The AUC <a class=\"direct-link\" href=\"#the-auc\">#</a></h3>\n<ul>\n<li>AUC = Area under the curve.</li>\n<li>Perfect classifier will have AUC = 1 (fix the rectangle).</li>\n<li>The purely random classifier (dotted line) will have AUC = 0.5.</li>\n</ul>\n<h2 id=\"confusion-matrix-%26-f1-score-with-scikit-learn\">Confusion Matrix &amp; F1-Score with Scikit-learn <a class=\"direct-link\" href=\"#confusion-matrix-%26-f1-score-with-scikit-learn\">#</a></h2>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>metrics <span class=\"token keyword\">import</span> confusion_matrix<br>n_classes <span class=\"token operator\">=</span> target<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><br>confusion_matrix<span class=\"token punctuation\">(</span>y_true<span class=\"token punctuation\">,</span> y_pred<span class=\"token punctuation\">,</span> labels<span class=\"token operator\">=</span><span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>n_classes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<p>Precision / Reacall / f1-score / support</p>\n<pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>metrics <span class=\"token keyword\">import</span> classification_report<br>classification_report<span class=\"token punctuation\">(</span>y_test<span class=\"token punctuation\">,</span> y_pred<span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"references\">References <a class=\"direct-link\" href=\"#references\">#</a></h2>\n<ol>\n<li><a href=\"https://developers.google.com/machine-learning/crash-course/classification/precision-and-recall\" target=\"_blank\">Classification: Precision and Recall</a> - <strong>Google Developers</strong>, <em>Machine Learning Crash Course</em>.</li>\n<li><a href=\"https://developers.google.com/machine-learning/crash-course/classification/check-your-understanding-accuracy-precision-recall\" target=\"_blank\">Classification: Check Your Understanding (Accuracy, Precision, Recall)</a> - <strong>Google Developers</strong>, <em>Machine Learning Crash Course</em>.</li>\n<li><a href=\"https://nlpers.blogspot.com/2007/10/f-measure-versus-accuracy.html\" target=\"_blank\">F-measure versus Accuracy</a> - <strong>NLP blog</strong>.</li>\n<li><a href=\"https://towardsdatascience.com/accuracy-precision-recall-or-f1-331fb37c5cb9\" target=\"_blank\">Accuracy, Precision, Recall or F1?</a> - <strong>Koo Ping Shung</strong>, <em>Towards Data Science</em>.</li>\n<li><a href=\"https://www.marcoaltini.com/blog/dealing-with-imbalanced-data-undersampling-oversampling-and-proper-cross-validation#\" target=\"_blank\">Dealing with Imbalanced data: undersampling, oversampling and proper cross-validation</a> - <strong>Marco Altini</strong>.</li>\n<li><a href=\"https://towardsdatascience.com/accuracy-recall-precision-f-score-specificity-which-to-optimize-on-867d3f11124\" target=\"_blank\">Accuracy, Recall, Precision, F-Score &amp; Specificity, which to optimize on?</a> - <strong>Salma Ghoneim</strong>, <em>Towards Data Science</em>.</li>\n</ol>\n",
      "date_published": "2019-05-24T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/setting-up-a-cafe-in-hcmc/",
      "url": "https://dinhanhthi.com/setting-up-a-cafe-in-hcmc/",
      "title": "Setting up a café in Ho Chi Minh City",
      "content_html": "<p>This is the final project for the course &quot;<a href=\"https://www.coursera.org/learn/applied-data-science-capstone\">Applied Data Science Capstone</a>&quot; given by IBM on Coursera. We will explore the venues in Pdifferent districts of Ho Chi Minh City to find the best place to set up our business.</p>\n<p class=\"text-center\"><a href=\"https://dinhanhthi.github.io/tools/github-html?https://github.com/dinhanhthi/cafe-in-hcm/blob/master/battle_of_neighborhood_project.html\">html file</a> -- <a href=\"https://dinhanhthi.github.io/tools/github-colab?https://github.com/dinhanhthi/cafe-in-hcm/blob/master/battle_of_neighborhood_project.ipynb\">open in colab</a> -- <a href=\"https://github.com/dinhanhthi/cafe-in-hcm/blob/master/final_project_report.pdf\">full report</a></p>\n<p id=\"data-presentation\"></p>\n<h2 id=\"data-presentation\">Data presentation <a class=\"direct-link\" href=\"#data-presentation\">#</a></h2>\n<p>In order to explore the previous questions, we need to use the following data in the research.</p>\n<p class=\"indent\"></p>\n<ol>\n<li><a href=\"https://en.wikipedia.org/wiki/Ho_Chi_Minh_City\" target=\"_blank\">List of Ho Chi Minh City administrative units</a> from Wikipedia.</li>\n<li>List of the coordinates (latitude, longitude) of all urban districts in HCMC. This list can be generated based on the name of each district and package <em>geopy.geocoders.Nominatim</em>.</li>\n<li><a href=\"https://mogi.vn/gia-nha-dat\" target=\"_blank\">List of average housing prices</a> per <span class=\"eq\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>m</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">m^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span> in HCMC.</li>\n<li>A <code>.json</code> file contains all coordinates where we use it to create a choropleth map of Housing Sales Price Index of HCMC. I create this file by myself using <a href=\"https://nominatim.openstreetmap.org\" target=\"_blank\">OpenStreetMap</a>.</li>\n</ol>\n<h2 id=\"methodology-(tl%3Bdr%3B)\">Methodology (TL;DR;) <a class=\"direct-link\" href=\"#methodology-(tl%3Bdr%3B)\">#</a></h2>\n<ul>\n<li><strong>Get the data</strong>:\n<ul>\n<li>Scrape the data from a website using <code>requests</code> and <code>bs4.BeautifulSoup</code>: data of districts (<code>df_hcm</code>) and data of housing price (<code>df_housing_price</code>).</li>\n<li>Using <code>geopy.geocoders.Nominatim</code> to find coordinates (longitude, latitude) of districts based on their name.</li>\n</ul>\n</li>\n<li>Using <code>folium</code> to plot the map.</li>\n<li>Using <a href=\"https://foursquare.com/developers/login?continue=%2Fdevelopers%2Fapps\">Foursquare API</a> to find the venues of each district.</li>\n<li>Explore the venues in each district:\n<ul>\n<li>List of unique categories.</li>\n<li>Number of venues in each district.</li>\n<li>Number of venues in each category.</li>\n<li>Number of categories in each district.</li>\n</ul>\n</li>\n<li><strong>Data preprocessing</strong>:\n<ul>\n<li>Remove all <code>,</code> in a number.</li>\n<li>Create new feature called <code>Density</code> which is the population over area.</li>\n<li>Remove word <code>District</code> and only keep the name of that district.</li>\n<li>Remove Vietnamese accents.</li>\n<li>Merge 2 dataframes into 1 <code>df</code>.</li>\n<li>Using <code>pd.get_dummies()</code> to convert categorical features into dummy ones (one-hot encoding).</li>\n</ul>\n</li>\n<li>Using <code>groupby</code> to find the top 10 venue categories for each district.</li>\n<li>Using <a href=\"/k-means\">K-Means clustering</a> to cluster districts by category. We try with different values of <code>k</code> and use the &quot;elbow&quot; method to choose the best <code>k</code> for the K-Means.</li>\n<li>Next, we examine the range of Average Housing Price (AHP): low, medium, high and very high.</li>\n<li>Finally, based on the map, we can choose the best district to set up our business: the one in which there are a lot of people living there (high density), there are not many already-working café and the average housing price is low.</li>\n</ul>\n",
      "date_published": "2019-05-15T22:00:00Z"
    },{
      "id": "https://dinhanhthi.com/css-tips/",
      "url": "https://dinhanhthi.com/css-tips/",
      "title": "CSS extra",
      "content_html": "<h2 id=\"tools\">Tools <a class=\"direct-link\" href=\"#tools\">#</a></h2>\n<ul>\n<li><strong><a href=\"https://flatuicolors.com/\">Flat UI Color</a></strong>: Choose different contrast colors</li>\n<li><a href=\"https://mycolor.space/?hex=%231E0A40&amp;sub=1\"><strong>Color Space</strong></a>: make gradient colors.</li>\n<li><a href=\"https://cssgradient.io/gradient-backgrounds/\"><strong>CSS Gradient</strong></a>: make gradient background.</li>\n</ul>\n<h2 id=\"px-vs-em-vs-rem-vs-%25\"><code>px</code> vs <code>em</code> vs <code>rem</code> vs <code>%</code> <a class=\"direct-link\" href=\"#px-vs-em-vs-rem-vs-%25\">#</a></h2>\n<ul>\n<li><code>px</code>: not responsive.</li>\n<li><code>em</code>: flexible + scalable + translated to <code>px</code>.\n<ul>\n<li>Relative to element on which it's used.</li>\n<li><code>1em = 16px</code> (default font-size Google Chrome)</li>\n<li>Used for: headings, paragraphs, texts, elements related to typography (padding, margin).</li>\n</ul>\n</li>\n<li><code>rem</code>: flexible + scalable + translated to <code>px</code>.\n<ul>\n<li>Relative to root HTML's font size.</li>\n<li>Change root font size -&gt; change the hold project.</li>\n</ul>\n</li>\n<li><code>%</code>: relative to another component.\n<ul>\n<li>Used for height, width properties.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"automatically-watch-and-convert-scss-to-css\">Automatically watch and convert <code>scss</code> to <code>css</code> <a class=\"direct-link\" href=\"#automatically-watch-and-convert-scss-to-css\">#</a></h2>\n<h3 id=\"easy%3A-if-you-use-vsc\">Easy: if you use VSC <a class=\"direct-link\" href=\"#easy%3A-if-you-use-vsc\">#</a></h3>\n<ol>\n<li>\n<p>Install extension <a href=\"https://marketplace.visualstudio.com/items?itemName=ritwickdey.live-sass\">Live Sass Compiler</a></p>\n</li>\n<li>\n<p>Open settings and add following,</p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"liveSassCompile.settings.formats\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><br>  <span class=\"token punctuation\">{</span><br>    <span class=\"token property\">\"format\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"expanded\"</span><span class=\"token punctuation\">,</span><br>    <span class=\"token property\">\"extensionName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\".css\"</span><span class=\"token punctuation\">,</span><br>    <span class=\"token property\">\"savePath\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code></pre>\n</li>\n<li>\n<p>Click on &quot;<strong>Watch Sass</strong>&quot; at the bottom line of VSC.</p>\n</li>\n<li>\n<p>Everytime you save or make some changes on <code>/sass/style.scss</code>, <code>/style.css</code> will be automatically updated.</p>\n</li>\n</ol>\n<h3 id=\"any-scss-file-to-css-file\">Any scss file to css file <a class=\"direct-link\" href=\"#any-scss-file-to-css-file\">#</a></h3>\n<p>Using <a href=\"https://gulpjs.com/\">gulp</a>,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> gulp-cli -g<br><span class=\"token function\">npm</span> <span class=\"token function\">install</span> gulp -D<br>npx -p <span class=\"token function\">touch</span> nodetouch gulpfile.js<br>gulp --help<br><br><span class=\"token comment\"># then use</span><br>sass --watch <span class=\"token operator\">&lt;</span>scss folder<span class=\"token operator\">></span>:<span class=\"token operator\">&lt;</span>css folder<span class=\"token operator\">></span></code></pre>\n<h3 id=\"style.scss-to-style.css\"><code>style.scss</code> to <code>style.css</code> <a class=\"direct-link\" href=\"#style.scss-to-style.css\">#</a></h3>\n<ol>\n<li>\n<p>Install <a href=\"https://www.ruby-lang.org/en/downloads/\">ruby</a>.</p>\n</li>\n<li>\n<p>Update ruby (if you installed it before) and install <a href=\"http://compass-style.org/install/\">compass</a>,</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">gem update --system<br>gem <span class=\"token function\">install</span> compass</code></pre>\n</li>\n<li>\n<p><code>cd</code> to the current working theme.</p>\n</li>\n<li>\n<p>Create a folder named <strong>sass</strong> in the root of this theme.</p>\n</li>\n<li>\n<p>Create a file <strong>config.rb</strong> which contains below codes, this file is for compass</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">http_path <span class=\"token operator\">=</span> <span class=\"token string\">\"/\"</span> <span class=\"token comment\">#root level target path</span><br>css_dir <span class=\"token operator\">=</span> <span class=\"token string\">\".\"</span> <span class=\"token comment\">#targets our default style.css file at the root level of our theme</span><br>sass_dir <span class=\"token operator\">=</span> <span class=\"token string\">\"sass\"</span> <span class=\"token comment\">#targets our sass directory</span><br>images_dir <span class=\"token operator\">=</span> <span class=\"token string\">\"images\"</span> <span class=\"token comment\">#targets our pre existing image directory</span><br>javascripts_dir <span class=\"token operator\">=</span> <span class=\"token string\">\"js\"</span> <span class=\"token comment\">#targets our JavaScript directory</span><br><span class=\"token comment\">#</span><br><span class=\"token comment\"># You can select your preferred output style here (can be overridden via the command line):</span><br><span class=\"token comment\"># output_style = :expanded or :nested or :compact or :compressed</span><br><span class=\"token comment\">#</span><br><span class=\"token comment\"># To enable relative paths to assets via compass helper functions.</span><br><span class=\"token comment\"># note: this is important in wordpress themes for sprites</span><br><span class=\"token comment\">#</span><br>relative_assets <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span></code></pre>\n</li>\n<li>\n<p>Inside folder <strong>sass</strong>, create a folder named <strong>_partials</strong>, all partial scss files will be located in this folder. For example, we use <strong>_font.scss</strong> to store all styles relating to font for the theme.</p>\n</li>\n<li>\n<p>Inside folder sass, create a file named <strong>style.scss</strong>, after every modification, this file will be generated by compass and overwirte the <strong>style.css</strong> file in the root theme folder. In the content of this file, you place,</p>\n<pre class=\"language-scss\"><code class=\"language-scss\"><span class=\"token keyword\">@import</span> <span class=\"token string\">\"compass\"</span><span class=\"token punctuation\">;</span><br><span class=\"token keyword\">@import</span> <span class=\"token string\">\"_partials/font\"</span><span class=\"token punctuation\">;</span></code></pre>\n</li>\n<li>\n<p>Use terminal and run following command (suppose that you are already in the theme folder). From this step, everytime you modify <strong>style.scss</strong> or files in <strong>_partials</strong> folder, the compass will automatically update the changes and overwrite to the <strong>style.css</strong> file in root theme folder.</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">compass <span class=\"token function\">watch</span></code></pre>\n</li>\n</ol>\n<h2 id=\"using-fontawesome-5-in-css\">Using FontAwesome 5 in CSS <a class=\"direct-link\" href=\"#using-fontawesome-5-in-css\">#</a></h2>\n<p>👉 <a href=\"https://fontawesome.com/how-to-use/on-the-web/advanced/css-pseudo-elements\">Official doc</a>.</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.login::before</span> <span class=\"token punctuation\">{</span><br>  <span class=\"token property\">content</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"\\f007\"</span><span class=\"token punctuation\">;</span><br>  <span class=\"token property\">font-family</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Font Awesome 5 Free\"</span><span class=\"token punctuation\">;</span><br>  <span class=\"token property\">font-weight</span><span class=\"token punctuation\">:</span> 900<span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre>\n<h2 id=\"heading-numbering\">Heading numbering <a class=\"direct-link\" href=\"#heading-numbering\">#</a></h2>\n<pre class=\"language-scss\"><code class=\"language-scss\"><span class=\"token comment\">// don't count h1, from h2 only</span><br><span class=\"token selector\">body</span><span class=\"token punctuation\">{</span><span class=\"token property\">counter-reset</span><span class=\"token punctuation\">:</span> h2counter<span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span><br><br><span class=\"token selector\">.post-content</span><span class=\"token punctuation\">{</span><br>  <span class=\"token selector\">h1 </span><span class=\"token punctuation\">{</span><span class=\"token property\">counter-reset</span><span class=\"token punctuation\">:</span> h2counter<span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span><br>  <span class=\"token selector\">h2 </span><span class=\"token punctuation\">{</span><span class=\"token property\">counter-reset</span><span class=\"token punctuation\">:</span> h3counter<span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span><br>  <span class=\"token selector\">h3 </span><span class=\"token punctuation\">{</span><span class=\"token property\">counter-reset</span><span class=\"token punctuation\">:</span> h4counter<span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span><br><br>  <span class=\"token selector\">h2:before </span><span class=\"token punctuation\">{</span><br>    <span class=\"token property\">content</span><span class=\"token punctuation\">:</span> <span class=\"token function\">counter</span><span class=\"token punctuation\">(</span>h2counter<span class=\"token punctuation\">)</span> <span class=\"token string\">\".\\0000a0\\0000a0\"</span><span class=\"token punctuation\">;</span><br>    <span class=\"token property\">counter-increment</span><span class=\"token punctuation\">:</span> h2counter<span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span><br><br>  <span class=\"token selector\">h3:before </span><span class=\"token punctuation\">{</span><br>    <span class=\"token property\">content</span><span class=\"token punctuation\">:</span> <span class=\"token function\">counter</span><span class=\"token punctuation\">(</span>h2counter<span class=\"token punctuation\">)</span> <span class=\"token string\">\".\"</span> <span class=\"token function\">counter</span><span class=\"token punctuation\">(</span>h3counter<span class=\"token punctuation\">)</span> <span class=\"token string\">\".\\0000a0\\0000a0\"</span><span class=\"token punctuation\">;</span><br>    <span class=\"token property\">counter-increment</span><span class=\"token punctuation\">:</span> h3counter<span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span><br><br>  <span class=\"token selector\">h4:before </span><span class=\"token punctuation\">{</span><br>    <span class=\"token property\">content</span><span class=\"token punctuation\">:</span> <span class=\"token function\">counter</span><span class=\"token punctuation\">(</span>h2counter<span class=\"token punctuation\">)</span> <span class=\"token string\">\".\"</span> <span class=\"token function\">counter</span><span class=\"token punctuation\">(</span>h3counter<span class=\"token punctuation\">)</span> <span class=\"token string\">\".\"</span> <span class=\"token function\">counter</span><span class=\"token punctuation\">(</span>h4counter<span class=\"token punctuation\">)</span> <span class=\"token string\">\".\\0000a0\\0000a0\"</span><span class=\"token punctuation\">;</span><br>    <span class=\"token property\">counter-increment</span><span class=\"token punctuation\">:</span> h4counter<span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<h3 id=\"toc-numbering\">TOC numbering <a class=\"direct-link\" href=\"#toc-numbering\">#</a></h3>\n<pre class=\"language-scss\"><code class=\"language-scss\"><span class=\"token selector\">.post-content</span><span class=\"token punctuation\">{</span><br>  <span class=\"token property\">counter-reset</span><span class=\"token punctuation\">:</span> item<span class=\"token punctuation\">;</span><br>    <span class=\"token property\">list-style-type</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span><br>    <span class=\"token selector\">ol </span><span class=\"token punctuation\">{</span><br>      <span class=\"token property\">counter-reset</span><span class=\"token punctuation\">:</span> item<span class=\"token punctuation\">;</span><br>      <span class=\"token property\">list-style-type</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span><br>    <span class=\"token selector\">li </span><span class=\"token punctuation\">{</span><br>      <span class=\"token selector\"><span class=\"token parent important\">&amp;</span>::before </span><span class=\"token punctuation\">{</span><br>        <span class=\"token property\">content</span><span class=\"token punctuation\">:</span> <span class=\"token function\">counters</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">,</span> <span class=\"token string\">\".\"</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\". \"</span><span class=\"token punctuation\">;</span><br>        <span class=\"token property\">counter-increment</span><span class=\"token punctuation\">:</span> item<span class=\"token punctuation\">;</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<h2 id=\"scss-%2F-sass\">SCSS / SASS <a class=\"direct-link\" href=\"#scss-%2F-sass\">#</a></h2>\n<p>👉 <a href=\"https://sass-lang.com/documentation\">Official references</a>.</p>\n<h3 id=\"loop\">Loop <a class=\"direct-link\" href=\"#loop\">#</a></h3>\n<pre class=\"language-scss\"><code class=\"language-scss\"><span class=\"token property\"><span class=\"token variable\">$imgage-sizes</span></span><span class=\"token punctuation\">:</span> 50<span class=\"token punctuation\">,</span> 55<span class=\"token punctuation\">,</span> 60<span class=\"token punctuation\">,</span> 65<span class=\"token punctuation\">,</span> 70<span class=\"token punctuation\">,</span> 75<span class=\"token punctuation\">,</span> 80<span class=\"token punctuation\">,</span> 85<span class=\"token punctuation\">,</span> 90<span class=\"token punctuation\">,</span> 95<span class=\"token punctuation\">,</span> 100<span class=\"token punctuation\">;</span><br><br><span class=\"token keyword\">@each</span> <span class=\"token selector\"><span class=\"token variable\">$size</span> in <span class=\"token variable\">$imgage-sizes</span></span><span class=\"token punctuation\">{</span><br>  <span class=\"token selector\">.img-full-<span class=\"token variable\">#{$size}</span></span><span class=\"token punctuation\">{</span><br>    <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$size</span>/100*100%<span class=\"token punctuation\">;</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span></code></pre>\n<h3 id=\"mixin-(function)\">Mixin (function) <a class=\"direct-link\" href=\"#mixin-(function)\">#</a></h3>\n<div class=\"col-2-equal\">\n<pre class=\"language-scss\"><code class=\"language-scss\"><span class=\"token keyword\">@mixin</span> <span class=\"token function\">column-count</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$ncol</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>\t<span class=\"token property\">column-count</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$ncol</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token property\">-webkit-column-count</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$ncol</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token property\">-moz-column-count</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$ncol</span><span class=\"token punctuation\">;</span><br>\t<span class=\"token property\">-moz-column-count</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$ncol</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-scss\"><code class=\"language-scss\"><span class=\"token comment\">// usage</span><br><span class=\"token selector\">.custom</span><span class=\"token punctuation\">{</span><br>  <span class=\"token keyword\">@include</span> <span class=\"token function\">column-count</span><span class=\"token punctuation\">(</span>3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre>\n</div>\n",
      "date_published": "2019-03-06T23:00:00Z"
    }
  ]
}
