---
layout: post
title: "Git / Github / Gitlab"
categories: [skills]
keywords: "github git gitlab branches merge remove clone github desktop gitkraken push pull commit discard changes repository staged alias git gui gitk reset checkout ssh clone to local key rename branch local remote restore commit stash pull push -m -d -b master remote checkout -- . : -s ours FETCH HEAD comparelog -1 --prep status checkout gui graphic repository repo config credential.helper store --global git cheatsheet"
---

{% assign img-url = '/img/post/others' %}

{% include toc.html %}

Quick references for basic tasks with git.

## Installation & Tools

- Download and install (to use command lines): [git's homepage](https://git-scm.com/downloads).
- Git client tools: [Github Desktop](https://desktop.github.com/) (Windows and MacOS), [GitKraken](https://www.gitkraken.com/download) (Windows, Linux, MacOS).
- Read `html` files in repository on Github: use [this tool](/github-html).

## Rules to be more effective

- Do commit early and often.<sup>[[ref]](https://sethrobertson.github.io/GitBestPractices/)</sup>
- Do make useful commit messages.
- Create a new branch for every new feature.
- Use `pull` requests to merge code to `master`.<sup>[[ref]](https://www.freecodecamp.org/news/follow-these-simple-rules-and-youll-become-a-git-and-github-master-e1045057468f/)</sup>
- For temporary branches, name them starting with `_`.

## Settings on local machine

~~~ bash
# SET GLOBAL INFO
git config --global user.name "Anh-Thi DINH"
git config --global user.email "dinhanhthi@gmail.com"

# SAVE GITHUB AS DEFAULT
# (don't need to log in again every time we use)
git config credential.helper store
git pull

# IF: `Could not resolve host: github.com`
git config --global --unset http.proxy 
git config --global --unset https.proxy

# FORMATTING DISPLAY
git config color.ui true # add colors to the results
git config format.pretty oneline # disply only one line of each commit
~~~

## Repositories

~~~ bash
# CREATE REPO
git init <repo-name>

# CLONE REPO (using https or ssh)
git clone <repo-link>
~~~

## Git GUI

~~~ bash
git gui
gitk
~~~

## Staged & Commits & Push & Pull

### Staged

~~~ bash
# ADD MODIFICATION (1 FILE)
git add * # add all the changes
git add <file-name> # only add the <file-name> to the staged

# UNSTAGE A FILE
git reset HEAD <file>

# UNSTAGED EVERYTHING
git reset
~~~

### Commit & Push

~~~ bash
# MAKE COMMIT (FROM STAGED)
git commit -m '<comment-for-this-commit>'
git commit -a # commit any files

# PUSH TO REMOTE
git push origin <branch-name> # push only <branch-name>
git push --all origin # push all branches

# CHECK & TEST A COMMIT
git checkout <commit-id>
# after testing
git checkout <current-branch>
~~~

### Pull

~~~ bash
# LIST ALL REMOTE REPOS
git remote -v

# COPY A COPY FROM REMOTE
git fetch origin <branch-on-remote>
# compare current branch to this copy
git diff --stat FETCH_HEAD

# UPDATE REMOTE -> LOCAL
git pull origin <branch-on-remote>
~~~

## Check the status

~~~ bash
# CHECK STATUS
git status

# WITH COLORS
git log --oneline --graph --color --all --decorate
# --graph: draw text-based branches
# --decorate: display names and tags
~~~

Check some commit:

~~~ bash
git log -- <file> # check commits containing <file>
git log --prep="abc" # look for commits containing "abc" in their name
git log <from>..<to> # display commints from <from> to <to> (commit's id, branch's name,...) 
~~~

Check current `HEAD`

~~~   bash
git log -1
# something like HEAD -> <branch-name>
~~~

## Branches

### Create

~~~ bash
# CREATE A BRANCH
git branch <branch-name>

# CREATE AND MOVE TO NEW BRANCH
# This one is based on the current `HEAD` (git log -1).
git checkout -b <new-branch>
# new branch based on another one
git checkout -b <new-branch> <existing-branch>
~~~

### Two branches

~~~ bash
# CHANGE TO ANOTHER BRANCH
git checkout <branch-name>

# LIST ALL LOCAL BRANCHES
git branch

# LIST ALL LOCAL + REMOTE
git branch -a

# UPDATE ALL REMOTE BRANCHES TO LOCAL
# (there may be some deleted branches on remote)
git remote update origin --prune

# COMPARE 2 BRANCHES
git diff <source-branch> <compared-branch>
~~~

### Delete

~~~ bash
# DEL A LOCAL BRANCH
git branch -d <branch-name>

# DEL A REMOTE BRANCH
git push origin :<branch-name>
~~~

### Merge

~~~ bash
# MERGE <branch> TO CURRENT
git merge <branch>

# MERGE <sub-branch> TO master + REPLACE master
git checkout <sub-branch>
git merge -s ours master
git checkout master
git merge <sub-branch>

# MERGE `/link/to/abc.xyz` FROM `<branch-1>` TO `<branch-2>` (can be `master`)
git checkout branch-2
git checkout branch-1 /link/to/abc.xyz
~~~

### Rename

~~~ bash
# CURRENT BRANCH
git branch -m <newname>
git branch -M <newname> # if there are only capitalization changes 

# CURRENT IS ANOTHER BRANCH
git branch -m <oldname> <newname>
~~~

~~~ bash
# RENAME REMOTE BRANCH (delete old + push new)
# (rename local branch first)
git push origin :<oldname> <newname>
# reset the upstream branch for the new-name local branch
git checkout <newname>
git push origin -u <newname>
~~~

### Others

Add a description (using [Vim](https://www.vim.org/) editor):

~~~ bash
git branch --edit-description
~~~

In the case you wanna exit Vim, press <kbd>ESC</kbd> then type `:q` to quit or `:wq` to write and quit.

## Discard the changes

~~~ bash
# DISCARD CHANGES ON CURRENT DIR
git checkout -- . # for all changes
git checkout -- <file-name> # for a specific file (go back the last commit of this file)

# DISCARD ALL LOCAL CHANGES
git reset --hard
~~~

In the case you want to discard the changes but **want to make a save** before moving to another branch to test. You can use below line. 

~~~ bash
git stash
~~~

If you wanna get back to the place you saved (and remove it from the stashed list), just go back to the branch you make the save and use

~~~ bash
git stash pop
~~~

## Restore

~~~ bash
# RESTORE FROM LAST COMMIT
git checkout -- <file>

# DISCARD ALL CHANGES ON LOCAL + GET FROM REMOTE
git fetch origin
git reset --hard origin/master

# EREASE ALL COMMITS + BACK TO <commit-id>
git reset --hard <commit-id>
~~~

## Alias

Normally, we use `git branch`. If we wanna use `git br` instead, we use an alias:

~~~ bash
git config alias.br branch
~~~

## Gitlab: Clone a private repo to local

1. Open and copy key in `C:\Users\dinha\.ssh\id_rsa.pub`
2. Go to **Gitlab** > **Settings** > **SSH Keys** > paste a copied key and name it.
3. Clone again the repo and it shoule be working!